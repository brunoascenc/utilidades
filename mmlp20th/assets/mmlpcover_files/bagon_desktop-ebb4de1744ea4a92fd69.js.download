!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1740)}([function(t,e,n){"use strict";var i=n(11),r=n(604),o=n(74),a=n(606),s=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,o=r.toSubscriber(t,e,n);if(i?i.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?e=i.root.Rx.config.Promise:i.root.Promise&&(e=i.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,i){var r;r=n.subscribe(function(e){if(r)try{t(e)}catch(t){i(t),r.unsubscribe()}else t(e)},i,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[o.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:a.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?t=i.root.Rx.config.Promise:i.root.Promise&&(t=i.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var i;e.subscribe(function(t){return i=t},function(t){return n(t)},function(){return t(i)})})},t.create=function(e){return new t(e)},t}();e.Observable=s},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,,,function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(71),o=n(18),a=n(124),s=n(73),c=function(t){function e(e,n,i){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!e){this.destination=a.empty;break}if("object"==typeof e){if(u(e)){var r=e[s.rxSubscriber]();this.syncErrorThrowable=r.syncErrorThrowable,this.destination=r,r.add(this)}else this.syncErrorThrowable=!0,this.destination=new l(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,n,i)}}return i(e,t),e.prototype[s.rxSubscriber]=function(){return this},e.create=function(t,n,i){var r=new e(t,n,i);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.Subscription);e.Subscriber=c;var l=function(t){function e(e,n,i,o){var s;t.call(this),this._parentSubscriber=e;var c=this;r.isFunction(n)?s=n:n&&(s=n.next,i=n.error,o=n.complete,n!==a.empty&&(c=Object.create(n),r.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=s,this._error=i,this._complete=o}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c);function u(t){return t instanceof c||"syncErrorThrowable"in t&&t[s.rxSubscriber]}},,,,,,function(t,e,n){"use strict";(function(t){var n="undefined"!=typeof window&&window,i="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,r=n||void 0!==t&&t||i;e.root=r,function(){if(!r)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,n(1))},function(t,e,n){(function(e){t.exports=e.$=n(205)}).call(this,n(1))},,,function(t,e,n){t.exports=n(149)},,function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var i=n(33),r=n(123),o=n(71),a=n(72),s=n(46),c=n(605),l=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,l=this._parents,d=this._unsubscribe,p=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,_=l?l.length:0;n;)n.remove(this),n=++f<_&&l[f]||null;if(o.isFunction(d))a.tryCatch(d).call(this)===s.errorObject&&(e=!0,t=t||(s.errorObject.e instanceof c.UnsubscriptionError?u(s.errorObject.e.errors):[s.errorObject.e]));if(i.isArray(p))for(f=-1,_=p.length;++f<_;){var h=p[f];if(r.isObject(h))if(a.tryCatch(h.unsubscribe).call(h)===s.errorObject){e=!0,t=t||[];var m=s.errorObject.e;m instanceof c.UnsubscriptionError?t=t.concat(u(m.errors)):t.push(m)}}if(e)throw new c.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function u(t){return t.reduce(function(t,e){return t.concat(e instanceof c.UnsubscriptionError?e.errors:e)},[])}e.Subscription=l},function(t,e,n){"use strict";e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(0),o=n(75),a=n(76),s=n(19),c=function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return i(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var i=t[t.length-1];s.isScheduler(i)?t.pop():i=null;var r=t.length;return r>1?new e(t,i):1===r?new o.ScalarObservable(t[0],i):new a.EmptyObservable(i)},e.dispatch=function(t){var e=t.array,n=t.index,i=t.count,r=t.subscriber;n>=i?r.complete():(r.next(e[n]),r.closed||(t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.array,i=n.length,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{array:n,index:0,count:i,subscriber:t});for(var o=0;o<i&&!t.closed;o++)t.next(n[o]);t.complete()},e}(r.Observable);e.ArrayObservable=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.notifyNext=function(t,e,n,i,r){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n(5).Subscriber);e.OuterSubscriber=r},function(t,e,n){"use strict";var i=n(11),r=n(127),o=n(128),a=n(123),s=n(0),c=n(77),l=n(612),u=n(74);e.subscribeToResult=function(t,e,n,d){var p=new l.InnerSubscriber(t,n,d);if(p.closed)return null;if(e instanceof s.Observable)return e._isScalar?(p.next(e.value),p.complete(),null):(p.syncErrorThrowable=!0,e.subscribe(p));if(r.isArrayLike(e)){for(var f=0,_=e.length;f<_&&!p.closed;f++)p.next(e[f]);p.closed||p.complete()}else{if(o.isPromise(e))return e.then(function(t){p.closed||(p.next(t),p.complete())},function(t){return p.error(t)}).then(null,function(t){i.root.setTimeout(function(){throw t})}),p;if(e&&"function"==typeof e[c.iterator])for(var h=e[c.iterator]();;){var m=h.next();if(m.done){p.complete();break}if(p.next(m.value),p.closed)break}else if(e&&"function"==typeof e[u.observable]){var g=e[u.observable]();if("function"==typeof g.subscribe)return g.subscribe(new l.InnerSubscriber(t,n,d));p.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var v="You provided "+(a.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";p.error(new TypeError(v))}}return null}},,,,,,,,,,,function(t,e,n){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},,,,,,,,,,,,function(t,e){
//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var n,i;n=this,i=function(){"use strict";var e;function n(){return e.apply(null,arguments)}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){for(var n in e)o(e,n)&&(t[n]=e[n]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function s(t,e,n,i){return Lt(t,e,n,i,!0).utc()}function c(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),t._pf}function l(t){if(null==t._isValid){var e=c(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function u(t){var e=s(NaN);return null!=t?a(c(e),t):c(e).userInvalidated=!0,e}var d=n.momentProperties=[];function p(t,e){var n,i,r;if(void 0!==e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),void 0!==e._i&&(t._i=e._i),void 0!==e._f&&(t._f=e._f),void 0!==e._l&&(t._l=e._l),void 0!==e._strict&&(t._strict=e._strict),void 0!==e._tzm&&(t._tzm=e._tzm),void 0!==e._isUTC&&(t._isUTC=e._isUTC),void 0!==e._offset&&(t._offset=e._offset),void 0!==e._pf&&(t._pf=c(e)),void 0!==e._locale&&(t._locale=e._locale),d.length>0)for(n in d)void 0!==(r=e[i=d[n]])&&(t[i]=r);return t}var f=!1;function _(t){p(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),!1===f&&(f=!0,n.updateOffset(this),f=!1)}function h(t){return t instanceof _||null!=t&&null!=t._isAMomentObject}function m(t){return t<0?Math.ceil(t):Math.floor(t)}function g(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=m(e)),n}function v(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;i<r;i++)(n&&t[i]!==e[i]||!n&&g(t[i])!==g(e[i]))&&a++;return a+o}function b(){}var y,w={};function $(t){return t?t.toLowerCase().replace("_","-"):t}function x(e){var n=null;if(!w[e]&&void 0!==t&&t&&t.exports)try{n=y._abbr,require("./locale/"+e),k(n)}catch(t){}return w[e]}function k(t,e){var n;return t&&(n=void 0===e?S(t):C(t,e))&&(y=n),y._abbr}function C(t,e){return null!==e?(e.abbr=t,w[t]=w[t]||new b,w[t].set(e),k(t),w[t]):(delete w[t],null)}function S(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return y;if(!i(t)){if(e=x(t))return e;t=[t]}return function(t){for(var e,n,i,r,o=0;o<t.length;){for(e=(r=$(t[o]).split("-")).length,n=(n=$(t[o+1]))?n.split("-"):null;e>0;){if(i=x(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&v(r,n,!0)>=e-1)break;e--}o++}return null}(t)}var A={};function E(t,e){var n=t.toLowerCase();A[n]=A[n+"s"]=A[e]=t}function j(t){return"string"==typeof t?A[t]||A[t.toLowerCase()]:void 0}function O(t){var e,n,i={};for(n in t)o(t,n)&&(e=j(n))&&(i[e]=t[n]);return i}function T(t,e){return function(i){return null!=i?(M(this,t,i),n.updateOffset(this,e),this):q(this,t)}}function q(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function M(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function P(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if("function"==typeof this[t=j(t)])return this[t](e);return this}function I(t,e,n){var i=""+Math.abs(t),r=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var R=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,D=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,z={},L={};function N(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(L[t]=r),e&&(L[e[0]]=function(){return I(r.apply(this,arguments),e[1],e[2])}),n&&(L[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function F(t,e){return t.isValid()?(e=U(e,t.localeData()),z[e]=z[e]||function(t){var e,n,i,r=t.match(R);for(e=0,n=r.length;e<n;e++)L[r[e]]?r[e]=L[r[e]]:r[e]=(i=r[e]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(i){var o="";for(e=0;e<n;e++)o+=r[e]instanceof Function?r[e].call(i,t):r[e];return o}}(e),z[e](t)):t.localeData().invalidDate()}function U(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(D.lastIndex=0;n>=0&&D.test(t);)t=t.replace(D,i),D.lastIndex=0,n-=1;return t}var V=/\d/,B=/\d\d/,H=/\d{3}/,W=/\d{4}/,G=/[+-]?\d{6}/,Y=/\d\d?/,K=/\d{1,3}/,J=/\d{1,4}/,Q=/[+-]?\d{1,6}/,X=/\d+/,Z=/[+-]?\d+/,tt=/Z|[+-]\d\d:?\d\d/gi,et=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,nt={};function it(t,e,n){var i;nt[t]="function"==typeof(i=e)&&"[object Function]"===Object.prototype.toString.call(i)?e:function(t){return t&&n?n:e}}function rt(t,e){return o(nt,t)?nt[t](e._strict,e._locale):new RegExp(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))}var ot={};function at(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=g(t)}),n=0;n<t.length;n++)ot[t[n]]=i}function st(t,e){at(t,function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function ct(t,e,n){null!=e&&o(ot,t)&&ot[t](e,n._a,n,t)}var lt=0,ut=1,dt=2,pt=3,ft=4,_t=5,ht=6;function mt(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}N("M",["MM",2],"Mo",function(){return this.month()+1}),N("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),N("MMMM",0,0,function(t){return this.localeData().months(this,t)}),E("month","M"),it("M",Y),it("MM",Y,B),it("MMM",et),it("MMMM",et),at(["M","MM"],function(t,e){e[ut]=g(t)-1}),at(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[ut]=r:c(n).invalidMonth=t});var gt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),vt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function bt(t,e){var n;return"string"==typeof e&&"number"!=typeof(e=t.localeData().monthsParse(e))?t:(n=Math.min(t.date(),mt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function yt(t){return null!=t?(bt(this,t),n.updateOffset(this,!0),this):q(this,"Month")}function wt(t){var e,n=t._a;return n&&-2===c(t).overflow&&(e=n[ut]<0||n[ut]>11?ut:n[dt]<1||n[dt]>mt(n[lt],n[ut])?dt:n[pt]<0||n[pt]>24||24===n[pt]&&(0!==n[ft]||0!==n[_t]||0!==n[ht])?pt:n[ft]<0||n[ft]>59?ft:n[_t]<0||n[_t]>59?_t:n[ht]<0||n[ht]>999?ht:-1,c(t)._overflowDayOfYear&&(e<lt||e>dt)&&(e=dt),c(t).overflow=e),t}function $t(t){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function xt(t,e){var n=!0;return a(function(){return n&&($t(t+"\n"+(new Error).stack),n=!1),e.apply(this,arguments)},e)}var kt={};n.suppressDeprecationWarnings=!1;var Ct=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,St=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],At=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Et=/^\/?Date\((\-?\d+)/i;function jt(t){var e,n,i=t._i,r=Ct.exec(i);if(r){for(c(t).iso=!0,e=0,n=St.length;e<n;e++)if(St[e][1].exec(i)){t._f=St[e][0];break}for(e=0,n=At.length;e<n;e++)if(At[e][1].exec(i)){t._f+=(r[6]||" ")+At[e][0];break}i.match(tt)&&(t._f+="Z"),Dt(t)}else t._isValid=!1}function Ot(t){var e=new Date(Date.UTC.apply(null,arguments));return t<1970&&e.setUTCFullYear(t),e}function Tt(t){return qt(t)?366:365}function qt(t){return t%4==0&&t%100!=0||t%400==0}n.createFromInputFallback=xt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),N(0,["YY",2],0,function(){return this.year()%100}),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),E("year","y"),it("Y",Z),it("YY",Y,B),it("YYYY",J,W),it("YYYYY",Q,G),it("YYYYYY",Q,G),at(["YYYYY","YYYYYY"],lt),at("YYYY",function(t,e){e[lt]=2===t.length?n.parseTwoDigitYear(t):g(t)}),at("YY",function(t,e){e[lt]=n.parseTwoDigitYear(t)}),n.parseTwoDigitYear=function(t){return g(t)+(g(t)>68?1900:2e3)};var Mt=T("FullYear",!1);function Pt(t,e,n){var i,r=n-e,o=n-t.day();return o>r&&(o-=7),o<r-7&&(o+=7),i=Nt(t).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function It(t,e,n){return null!=t?t:null!=e?e:n}function Rt(t){var e,n,i,r,o=[];if(!t._d){for(i=function(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[dt]&&null==t._a[ut]&&function(t){var e,n,i,r,o,a,s;null!=(e=t._w).GG||null!=e.W||null!=e.E?(o=1,a=4,n=It(e.GG,t._a[lt],Pt(Nt(),1,4).year),i=It(e.W,1),r=It(e.E,1)):(o=t._locale._week.dow,a=t._locale._week.doy,n=It(e.gg,t._a[lt],Pt(Nt(),o,a).year),i=It(e.w,1),null!=e.d?(r=e.d)<o&&++i:r=null!=e.e?e.e+o:o);s=function(t,e,n,i,r){var o,a=6+r-i,s=Ot(t,0,1+a).getUTCDay();return s<r&&(s+=7),{year:(o=1+a+7*(e-1)-s+(n=null!=n?1*n:r))>0?t:t-1,dayOfYear:o>0?o:Tt(t-1)+o}}(n,i,r,a,o),t._a[lt]=s.year,t._dayOfYear=s.dayOfYear}(t),t._dayOfYear&&(r=It(t._a[lt],i[lt]),t._dayOfYear>Tt(r)&&(c(t)._overflowDayOfYear=!0),n=Ot(r,0,t._dayOfYear),t._a[ut]=n.getUTCMonth(),t._a[dt]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=o[e]=i[e];for(;e<7;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[pt]&&0===t._a[ft]&&0===t._a[_t]&&0===t._a[ht]&&(t._nextDay=!0,t._a[pt]=0),t._d=(t._useUTC?Ot:function(t,e,n,i,r,o,a){var s=new Date(t,e,n,i,r,o,a);return t<1970&&s.setFullYear(t),s}).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[pt]=24)}}function Dt(t){if(t._f!==n.ISO_8601){t._a=[],c(t).empty=!0;var e,i,r,o,a,s=""+t._i,l=s.length,u=0;for(r=U(t._f,t._locale).match(R)||[],e=0;e<r.length;e++)o=r[e],(i=(s.match(rt(o,t))||[])[0])&&((a=s.substr(0,s.indexOf(i))).length>0&&c(t).unusedInput.push(a),s=s.slice(s.indexOf(i)+i.length),u+=i.length),L[o]?(i?c(t).empty=!1:c(t).unusedTokens.push(o),ct(o,i,t)):t._strict&&!i&&c(t).unusedTokens.push(o);c(t).charsLeftOver=l-u,s.length>0&&c(t).unusedInput.push(s),!0===c(t).bigHour&&t._a[pt]<=12&&t._a[pt]>0&&(c(t).bigHour=void 0),t._a[pt]=function(t,e,n){var i;if(null==n)return e;return null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((i=t.isPM(n))&&e<12&&(e+=12),i||12!==e||(e=0),e):e}(t._locale,t._a[pt],t._meridiem),Rt(t),wt(t)}else jt(t)}function zt(t){var e=t._i,o=t._f;return t._locale=t._locale||S(t._l),null===e||void 0===o&&""===e?u({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),h(e)?new _(wt(e)):(i(o)?function(t){var e,n,i,r,o;if(0===t._f.length)return c(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Dt(e),l(e)&&(o+=c(e).charsLeftOver,o+=10*c(e).unusedTokens.length,c(e).score=o,(null==i||o<i)&&(i=o,n=e));a(t,n||e)}(t):o?Dt(t):r(e)?t._d=e:function(t){var e=t._i;void 0===e?t._d=new Date:r(e)?t._d=new Date(+e):"string"==typeof e?function(t){var e=Et.exec(t._i);null===e?(jt(t),!1===t._isValid&&(delete t._isValid,n.createFromInputFallback(t))):t._d=new Date(+e[1])}(t):i(e)?(t._a=function(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}(e.slice(0),function(t){return parseInt(t,10)}),Rt(t)):"object"==typeof e?function(t){if(!t._d){var e=O(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],Rt(t)}}(t):"number"==typeof e?t._d=new Date(e):n.createFromInputFallback(t)}(t),t))}function Lt(t,e,n,i,r){var o,a={};return"boolean"==typeof n&&(i=n,n=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=r,a._l=n,a._i=t,a._f=e,a._strict=i,(o=new _(wt(zt(a))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function Nt(t,e,n,i){return Lt(t,e,n,i,!1)}N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),E("week","w"),E("isoWeek","W"),it("w",Y),it("ww",Y,B),it("W",Y),it("WW",Y,B),st(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=g(t)}),N("DDD",["DDDD",3],"DDDo","dayOfYear"),E("dayOfYear","DDD"),it("DDD",K),it("DDDD",H),at(["DDD","DDDD"],function(t,e,n){n._dayOfYear=g(t)}),n.ISO_8601=function(){};var Ft=xt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Nt.apply(null,arguments);return t<this?this:t}),Ut=xt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Nt.apply(null,arguments);return t>this?this:t});function Vt(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Nt();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}function Bt(t){var e=O(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||0,a=e.day||0,s=e.hour||0,c=e.minute||0,l=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*l+6e4*c+36e5*s,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=S(),this._bubble()}function Ht(t){return t instanceof Bt}function Wt(t,e){N(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+I(~~(t/60),2)+e+I(~~t%60,2)})}Wt("Z",":"),Wt("ZZ",""),it("Z",tt),it("ZZ",tt),at(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Yt(t)});var Gt=/([\+\-]|\d\d)/gi;function Yt(t){var e=(t||"").match(tt)||[],n=((e[e.length-1]||[])+"").match(Gt)||["-",0,0],i=60*n[1]+g(n[2]);return"+"===n[0]?i:-i}function Kt(t,e){var i,o;return e._isUTC?(i=e.clone(),o=(h(t)||r(t)?+t:+Nt(t))-+i,i._d.setTime(+i._d+o),n.updateOffset(i,!1),i):Nt(t).local()}function Jt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Qt(){return this._isUTC&&0===this._offset}n.updateOffset=function(){};var Xt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Zt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function te(t,e){var n,i,r,a=t,s=null;return Ht(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(s=Xt.exec(t))?(n="-"===s[1]?-1:1,a={y:0,d:g(s[dt])*n,h:g(s[pt])*n,m:g(s[ft])*n,s:g(s[_t])*n,ms:g(s[ht])*n}):(s=Zt.exec(t))?(n="-"===s[1]?-1:1,a={y:ee(s[2],n),M:ee(s[3],n),d:ee(s[4],n),h:ee(s[5],n),m:ee(s[6],n),s:ee(s[7],n),w:ee(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=function(t,e){var n;e=Kt(e,t),t.isBefore(e)?n=ne(t,e):((n=ne(e,t)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Nt(a.from),Nt(a.to)),(a={}).ms=r.milliseconds,a.M=r.months),i=new Bt(a),Ht(t)&&o(t,"_locale")&&(i._locale=t._locale),i}function ee(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function ne(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function ie(t,e){return function(n,i){var r;return null===i||isNaN(+i)||(!function(t,e){kt[t]||($t(e),kt[t]=!0)}(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),r=n,n=i,i=r),re(this,te(n="string"==typeof n?+n:n,i),t),this}}function re(t,e,i,r){var o=e._milliseconds,a=e._days,s=e._months;r=null==r||r,o&&t._d.setTime(+t._d+o*i),a&&M(t,"Date",q(t,"Date")+a*i),s&&bt(t,q(t,"Month")+s*i),r&&n.updateOffset(t,a||s)}te.fn=Bt.prototype;var oe=ie(1,"add"),ae=ie(-1,"subtract");function se(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():F(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ce(t){var e;return void 0===t?this._locale._abbr:(null!=(e=S(t))&&(this._locale=e),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var le=xt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function ue(){return this._locale}function de(t,e){N(0,[t,t.length],0,e)}function pe(t,e,n){return Pt(Nt([t,11,31+e-n]),e,n).week}N(0,["gg",2],0,function(){return this.weekYear()%100}),N(0,["GG",2],0,function(){return this.isoWeekYear()%100}),de("gggg","weekYear"),de("ggggg","weekYear"),de("GGGG","isoWeekYear"),de("GGGGG","isoWeekYear"),E("weekYear","gg"),E("isoWeekYear","GG"),it("G",Z),it("g",Z),it("GG",Y,B),it("gg",Y,B),it("GGGG",J,W),it("gggg",J,W),it("GGGGG",Q,G),it("ggggg",Q,G),st(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=g(t)}),st(["gg","GG"],function(t,e,i,r){e[r]=n.parseTwoDigitYear(t)}),N("Q",0,0,"quarter"),E("quarter","Q"),it("Q",V),at("Q",function(t,e){e[ut]=3*(g(t)-1)}),N("D",["DD",2],"Do","date"),E("date","D"),it("D",Y),it("DD",Y,B),it("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),at(["D","DD"],dt),at("Do",function(t,e){e[dt]=g(t.match(Y)[0])});var fe=T("Date",!0);N("d",0,"do","day"),N("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),N("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),N("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),E("day","d"),E("weekday","e"),E("isoWeekday","E"),it("d",Y),it("e",Y),it("E",Y),it("dd",et),it("ddd",et),it("dddd",et),st(["dd","ddd","dddd"],function(t,e,n){var i=n._locale.weekdaysParse(t);null!=i?e.d=i:c(n).invalidWeekday=t}),st(["d","e","E"],function(t,e,n,i){e[i]=g(t)});var _e="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),he="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),me="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function ge(t,e){N(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function ve(t,e){return e._meridiemParse}N("H",["HH",2],0,"hour"),N("h",["hh",2],0,function(){return this.hours()%12||12}),ge("a",!0),ge("A",!1),E("hour","h"),it("a",ve),it("A",ve),it("H",Y),it("h",Y),it("HH",Y,B),it("hh",Y,B),at(["H","HH"],pt),at(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),at(["h","hh"],function(t,e,n){e[pt]=g(t),c(n).bigHour=!0});var be=T("Hours",!0);N("m",["mm",2],0,"minute"),E("minute","m"),it("m",Y),it("mm",Y,B),at(["m","mm"],ft);var ye=T("Minutes",!1);N("s",["ss",2],0,"second"),E("second","s"),it("s",Y),it("ss",Y,B),at(["s","ss"],_t);var we,$e=T("Seconds",!1);for(N("S",0,0,function(){return~~(this.millisecond()/100)}),N(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,function(){return 10*this.millisecond()}),N(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),N(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),N(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),N(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),N(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),E("millisecond","ms"),it("S",K,V),it("SS",K,B),it("SSS",K,H),we="SSSS";we.length<=9;we+="S")it(we,X);function xe(t,e){e[ht]=g(1e3*("0."+t))}for(we="S";we.length<=9;we+="S")at(we,xe);var ke=T("Milliseconds",!1);N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var Ce=_.prototype;Ce.add=oe,Ce.calendar=function(t,e){var n=t||Nt(),i=Kt(n,this).startOf("day"),r=this.diff(i,"days",!0),o=r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse";return this.format(e&&e[o]||this.localeData().calendar(o,this,Nt(n)))},Ce.clone=function(){return new _(this)},Ce.diff=function(t,e,n){var i,r,o=Kt(t,this),a=6e4*(o.utcOffset()-this.utcOffset());return"year"===(e=j(e))||"month"===e||"quarter"===e?(s=this,c=o,d=12*(c.year()-s.year())+(c.month()-s.month()),p=s.clone().add(d,"months"),c-p<0?(l=s.clone().add(d-1,"months"),u=(c-p)/(p-l)):(l=s.clone().add(d+1,"months"),u=(c-p)/(l-p)),r=-(d+u),"quarter"===e?r/=3:"year"===e&&(r/=12)):(i=this-o,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-a)/864e5:"week"===e?(i-a)/6048e5:i),n?r:m(r);var s,c,l,u,d,p},Ce.endOf=function(t){return void 0===(t=j(t))||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},Ce.format=function(t){var e=F(this,t||n.defaultFormat);return this.localeData().postformat(e)},Ce.from=function(t,e){return this.isValid()?te({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Ce.fromNow=function(t){return this.from(Nt(),t)},Ce.to=function(t,e){return this.isValid()?te({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Ce.toNow=function(t){return this.to(Nt(),t)},Ce.get=P,Ce.invalidAt=function(){return c(this).overflow},Ce.isAfter=function(t,e){return"millisecond"===(e=j(void 0!==e?e:"millisecond"))?+this>+(t=h(t)?t:Nt(t)):(h(t)?+t:+Nt(t))<+this.clone().startOf(e)},Ce.isBefore=function(t,e){var n;return"millisecond"===(e=j(void 0!==e?e:"millisecond"))?+this<+(t=h(t)?t:Nt(t)):(n=h(t)?+t:+Nt(t),+this.clone().endOf(e)<n)},Ce.isBetween=function(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)},Ce.isSame=function(t,e){var n;return"millisecond"===(e=j(e||"millisecond"))?+this==+(t=h(t)?t:Nt(t)):(n=+Nt(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))},Ce.isValid=function(){return l(this)},Ce.lang=le,Ce.locale=ce,Ce.localeData=ue,Ce.max=Ut,Ce.min=Ft,Ce.parsingFlags=function(){return a({},c(this))},Ce.set=P,Ce.startOf=function(t){switch(t=j(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},Ce.subtract=ae,Ce.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},Ce.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},Ce.toDate=function(){return this._offset?new Date(+this):this._d},Ce.toISOString=se,Ce.toJSON=se,Ce.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Ce.unix=function(){return Math.floor(+this/1e3)},Ce.valueOf=function(){return+this._d-6e4*(this._offset||0)},Ce.year=Mt,Ce.isLeapYear=function(){return qt(this.year())},Ce.weekYear=function(t){var e=Pt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},Ce.isoWeekYear=function(t){var e=Pt(this,1,4).year;return null==t?e:this.add(t-e,"y")},Ce.quarter=Ce.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},Ce.month=yt,Ce.daysInMonth=function(){return mt(this.year(),this.month())},Ce.week=Ce.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},Ce.isoWeek=Ce.isoWeeks=function(t){var e=Pt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},Ce.weeksInYear=function(){var t=this.localeData()._week;return pe(this.year(),t.dow,t.doy)},Ce.isoWeeksInYear=function(){return pe(this.year(),1,4)},Ce.date=fe,Ce.day=Ce.days=function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},Ce.weekday=function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},Ce.isoWeekday=function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},Ce.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},Ce.hour=Ce.hours=be,Ce.minute=Ce.minutes=ye,Ce.second=Ce.seconds=$e,Ce.millisecond=Ce.milliseconds=ke,Ce.utcOffset=function(t,e){var i,r=this._offset||0;return null!=t?("string"==typeof t&&(t=Yt(t)),Math.abs(t)<16&&(t*=60),!this._isUTC&&e&&(i=Jt(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?re(this,te(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Jt(this)},Ce.utc=function(t){return this.utcOffset(0,t)},Ce.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Jt(this),"m")),this},Ce.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Yt(this._i)),this},Ce.hasAlignedHourOffset=function(t){return t=t?Nt(t).utcOffset():0,(this.utcOffset()-t)%60==0},Ce.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Ce.isDSTShifted=function(){if(void 0!==this._isDSTShifted)return this._isDSTShifted;var t={};if(p(t,this),(t=zt(t))._a){var e=t._isUTC?s(t._a):Nt(t._a);this._isDSTShifted=this.isValid()&&v(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted},Ce.isLocal=function(){return!this._isUTC},Ce.isUtcOffset=function(){return this._isUTC},Ce.isUtc=Qt,Ce.isUTC=Qt,Ce.zoneAbbr=function(){return this._isUTC?"UTC":""},Ce.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Ce.dates=xt("dates accessor is deprecated. Use date instead.",fe),Ce.months=xt("months accessor is deprecated. Use month instead",yt),Ce.years=xt("years accessor is deprecated. Use year instead",Mt),Ce.zone=xt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()});var Se=Ce;function Ae(t){return t}var Ee=b.prototype;function je(t,e,n,i){var r=S(),o=s().set(i,e);return r[n](o,t)}function Oe(t,e,n,i,r){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return je(t,e,n,r);var o,a=[];for(o=0;o<i;o++)a[o]=je(t,o,n,r);return a}Ee._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ee.calendar=function(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.call(e,n):i},Ee._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ee.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},Ee._invalidDate="Invalid date",Ee.invalidDate=function(){return this._invalidDate},Ee._ordinal="%d",Ee.ordinal=function(t){return this._ordinal.replace("%d",t)},Ee._ordinalParse=/\d{1,2}/,Ee.preparse=Ae,Ee.postformat=Ae,Ee._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ee.relativeTime=function(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)},Ee.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},Ee.set=function(t){var e,n;for(n in t)"function"==typeof(e=t[n])?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},Ee.months=function(t){return this._months[t.month()]},Ee._months=gt,Ee.monthsShort=function(t){return this._monthsShort[t.month()]},Ee._monthsShort=vt,Ee.monthsParse=function(t,e,n){var i,r,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=s([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},Ee.week=function(t){return Pt(t,this._week.dow,this._week.doy).week},Ee._week={dow:0,doy:6},Ee.firstDayOfYear=function(){return this._week.doy},Ee.firstDayOfWeek=function(){return this._week.dow},Ee.weekdays=function(t){return this._weekdays[t.day()]},Ee._weekdays=_e,Ee.weekdaysMin=function(t){return this._weekdaysMin[t.day()]},Ee._weekdaysMin=me,Ee.weekdaysShort=function(t){return this._weekdaysShort[t.day()]},Ee._weekdaysShort=he,Ee.weekdaysParse=function(t){var e,n,i;for(this._weekdaysParse=this._weekdaysParse||[],e=0;e<7;e++)if(this._weekdaysParse[e]||(n=Nt([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},Ee.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},Ee._meridiemParse=/[ap]\.?m?\.?/i,Ee.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},k("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),n.lang=xt("moment.lang is deprecated. Use moment.locale instead.",k),n.langData=xt("moment.langData is deprecated. Use moment.localeData instead.",S);var Te=Math.abs;function qe(t,e,n,i){var r=te(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function Me(t){return t<0?Math.floor(t):Math.ceil(t)}function Pe(t){return 4800*t/146097}function Ie(t){return 146097*t/4800}function Re(t){return function(){return this.as(t)}}var De=Re("ms"),ze=Re("s"),Le=Re("m"),Ne=Re("h"),Fe=Re("d"),Ue=Re("w"),Ve=Re("M"),Be=Re("y");function He(t){return function(){return this._data[t]}}var We=He("milliseconds"),Ge=He("seconds"),Ye=He("minutes"),Ke=He("hours"),Je=He("days"),Qe=He("months"),Xe=He("years"),Ze=Math.round,tn={s:45,m:45,h:22,d:26,M:11},en=Math.abs;function nn(){var t,e,n=en(this._milliseconds)/1e3,i=en(this._days),r=en(this._months);t=m(n/60),e=m(t/60),n%=60,t%=60;var o=m(r/12),a=r%=12,s=i,c=e,l=t,u=n,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(s?s+"D":"")+(c||l||u?"T":"")+(c?c+"H":"")+(l?l+"M":"")+(u?u+"S":""):"P0D"}var rn=Bt.prototype;return rn.abs=function(){var t=this._data;return this._milliseconds=Te(this._milliseconds),this._days=Te(this._days),this._months=Te(this._months),t.milliseconds=Te(t.milliseconds),t.seconds=Te(t.seconds),t.minutes=Te(t.minutes),t.hours=Te(t.hours),t.months=Te(t.months),t.years=Te(t.years),this},rn.add=function(t,e){return qe(this,t,e,1)},rn.subtract=function(t,e){return qe(this,t,e,-1)},rn.as=function(t){var e,n,i=this._milliseconds;if("month"===(t=j(t))||"year"===t)return e=this._days+i/864e5,n=this._months+Pe(e),"month"===t?n:n/12;switch(e=this._days+Math.round(Ie(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},rn.asMilliseconds=De,rn.asSeconds=ze,rn.asMinutes=Le,rn.asHours=Ne,rn.asDays=Fe,rn.asWeeks=Ue,rn.asMonths=Ve,rn.asYears=Be,rn.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)},rn._bubble=function(){var t,e,n,i,r,o=this._milliseconds,a=this._days,s=this._months,c=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Me(Ie(s)+a),a=0,s=0),c.milliseconds=o%1e3,t=m(o/1e3),c.seconds=t%60,e=m(t/60),c.minutes=e%60,n=m(e/60),c.hours=n%24,a+=m(n/24),s+=r=m(Pe(a)),a-=Me(Ie(r)),i=m(s/12),s%=12,c.days=a,c.months=s,c.years=i,this},rn.get=function(t){return this[(t=j(t))+"s"]()},rn.milliseconds=We,rn.seconds=Ge,rn.minutes=Ye,rn.hours=Ke,rn.days=Je,rn.weeks=function(){return m(this.days()/7)},rn.months=Qe,rn.years=Xe,rn.humanize=function(t){var e=this.localeData(),n=function(t,e,n){var i=te(t).abs(),r=Ze(i.as("s")),o=Ze(i.as("m")),a=Ze(i.as("h")),s=Ze(i.as("d")),c=Ze(i.as("M")),l=Ze(i.as("y")),u=r<tn.s&&["s",r]||1===o&&["m"]||o<tn.m&&["mm",o]||1===a&&["h"]||a<tn.h&&["hh",a]||1===s&&["d"]||s<tn.d&&["dd",s]||1===c&&["M"]||c<tn.M&&["MM",c]||1===l&&["y"]||["yy",l];return u[2]=e,u[3]=+t>0,u[4]=n,function(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}.apply(null,u)}(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},rn.toISOString=nn,rn.toString=nn,rn.toJSON=nn,rn.locale=ce,rn.localeData=ue,rn.toIsoString=xt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nn),rn.lang=le,N("X",0,0,"unix"),N("x",0,0,"valueOf"),it("x",Z),it("X",/[+-]?\d+(\.\d{1,3})?/),at("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),at("x",function(t,e,n){n._d=new Date(g(t))}),n.version="2.10.6",e=Nt,n.fn=Se,n.min=function(){return Vt("isBefore",[].slice.call(arguments,0))},n.max=function(){return Vt("isAfter",[].slice.call(arguments,0))},n.utc=s,n.unix=function(t){return Nt(1e3*t)},n.months=function(t,e){return Oe(t,e,"months",12,"month")},n.isDate=r,n.locale=k,n.invalid=u,n.duration=te,n.isMoment=h,n.weekdays=function(t,e){return Oe(t,e,"weekdays",7,"day")},n.parseZone=function(){return Nt.apply(null,arguments).parseZone()},n.localeData=S,n.isDuration=Ht,n.monthsShort=function(t,e){return Oe(t,e,"monthsShort",12,"month")},n.weekdaysMin=function(t,e){return Oe(t,e,"weekdaysMin",7,"day")},n.defineLocale=C,n.weekdaysShort=function(t,e){return Oe(t,e,"weekdaysShort",7,"day")},n.normalizeUnits=j,n.relativeTimeThreshold=function(t,e){return void 0!==tn[t]&&(void 0===e?tn[t]:(tn[t]=e,!0))},n},"object"==typeof e&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):n.moment=i()},function(t,e,n){"use strict";e.errorObject={e:{}}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(0),o=n(5),a=n(18),s=n(126),c=n(607),l=n(73),u=function(t){function e(e){t.call(this,e),this.destination=e}return i(e,t),e}(o.Subscriber);e.SubjectSubscriber=u;var d=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return i(e,t),e.prototype[l.rxSubscriber]=function(){return new u(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),r=0;r<n;r++)i[r].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),r=0;r<n;r++)i[r].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(t.complete(),a.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new r.Observable;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(r.Observable);e.Subject=d;var p=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.Subscription.EMPTY},e}(d);e.AnonymousSubject=p},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(47),o=n(0),a=n(5),s=n(18),c=n(608),l=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.Subscription).add(this.source.subscribe(new d(this.getSubject(),this))),t.closed?(this._connection=null,t=s.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return c.refCount()(this)},e}(o.Observable);e.ConnectableObservable=l;var u=l.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}};var d=function(t){function e(e,n){t.call(this,e),this.connectable=n}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(r.SubjectSubscriber),p=(function(){function t(t){this.connectable=t}t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new p(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}(),function(t){function e(e,n){t.call(this,e),this.connectable=n}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null},e}(a.Subscriber))},,,,,,,,,,,,function(t,e,n){n(69),t.exports=angular},,,,,,,,,function(t,e){
/**
 * @license AngularJS v1.6.6
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t){"use strict";var e={objectMaxDepth:5};function n(t){if(!N(t))return e;L(t.objectMaxDepth)&&(e.objectMaxDepth=i(t.objectMaxDepth)?t.objectMaxDepth:NaN)}function i(t){return V(t)&&t>0}function r(t,n){return n=n||Error,function(){var i,r,o=arguments[0],a=arguments[1],s="["+(t?t+":":"")+o+"] ",c=pt(arguments,2).map(function(t){return Yt(t,e.objectMaxDepth)});for(s+=a.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1);return e<c.length?c[e]:t}),s+="\nhttp://errors.angularjs.org/1.6.6/"+(t?t+"/":"")+o,r=0,i="?";r<c.length;r++,i="&")s+=i+"p"+r+"="+encodeURIComponent(c[r]);return new n(s)}}var o=/^\/(.+)\/([a-z]*)$/,a="validity",s=Object.prototype.hasOwnProperty,c=function(t){return U(t)?t.toLowerCase():t},l=function(t){return U(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(c=function(t){return U(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},l=function(t){return U(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t});var u,d,p,f,_=[].slice,h=[].splice,m=[].push,g=Object.prototype.toString,v=Object.getPrototypeOf,b=r("ng"),y=t.angular||(t.angular={}),w=0;function $(t){if(null==t||K(t))return!1;if(H(t)||U(t)||d&&t instanceof d)return!0;var e="length"in Object(t)&&t.length;return V(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function x(t,e,n){var i,r;if(t)if(G(t))for(i in t)"prototype"!==i&&"length"!==i&&"name"!==i&&t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else if(H(t)||$(t)){var o="object"!=typeof t;for(i=0,r=t.length;i<r;i++)(o||i in t)&&e.call(n,t[i],i,t)}else if(t.forEach&&t.forEach!==x)t.forEach(e,n,t);else if(F(t))for(i in t)e.call(n,t[i],i,t);else if("function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else for(i in t)s.call(t,i)&&e.call(n,t[i],i,t);return t}function k(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function C(t){return function(e,n){t(n,e)}}function S(){return++w}function A(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function E(t,e,n){for(var i=t.$$hashKey,r=0,o=e.length;r<o;++r){var a=e[r];if(N(a)||G(a))for(var s=Object.keys(a),c=0,l=s.length;c<l;c++){var u=s[c],d=a[u];n&&N(d)?B(d)?t[u]=new Date(d.valueOf()):Y(d)?t[u]=new RegExp(d):d.nodeName?t[u]=d.cloneNode(!0):nt(d)?t[u]=d.clone():(N(t[u])||(t[u]=H(d)?[]:{}),E(t[u],[d],!0)):t[u]=d}}return A(t,i),t}function j(t){return E(t,_.call(arguments,1),!1)}function O(t){return E(t,_.call(arguments,1),!0)}function T(t){return parseInt(t,10)}u=t.document.documentMode;var q=Number.isNaN||function(t){return t!=t};function M(t,e){return j(Object.create(t),e)}function P(){}function I(t){return t}function R(t){return function(){return t}}function D(t){return G(t.toString)&&t.toString!==g}function z(t){return void 0===t}function L(t){return void 0!==t}function N(t){return null!==t&&"object"==typeof t}function F(t){return null!==t&&"object"==typeof t&&!v(t)}function U(t){return"string"==typeof t}function V(t){return"number"==typeof t}function B(t){return"[object Date]"===g.call(t)}P.$inject=[],I.$inject=[];var H=Array.isArray;function W(t){switch(g.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function G(t){return"function"==typeof t}function Y(t){return"[object RegExp]"===g.call(t)}function K(t){return t&&t.window===t}function J(t){return t&&t.$evalAsync&&t.$watch}function Q(t){return"boolean"==typeof t}function X(t){return t&&G(t.then)}var Z=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var tt=function(t){return U(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function nt(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function it(t){return c(t.nodeName||t[0]&&t[0].nodeName)}function rt(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function ot(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function at(t,e,n){var r,o,a=[],c=[];if(n=i(n)?n:NaN,e){if((o=e)&&V(o.length)&&Z.test(g.call(o))||(r=e,"[object ArrayBuffer]"===g.call(r)))throw b("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw b("cpi","Can't copy! Source and destination are identical.");return H(e)?e.length=0:x(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),a.push(t),c.push(e),l(t,e,n)}return u(t,n);function l(t,e,n){if(--n<0)return"...";var i,r=e.$$hashKey;if(H(t))for(var o=0,a=t.length;o<a;o++)e.push(u(t[o],n));else if(F(t))for(i in t)e[i]=u(t[i],n);else if(t&&"function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&(e[i]=u(t[i],n));else for(i in t)s.call(t,i)&&(e[i]=u(t[i],n));return A(e,r),e}function u(t,e){if(!N(t))return t;var n=a.indexOf(t);if(-1!==n)return c[n];if(K(t)||J(t))throw b("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var i=!1,r=function(t){switch(g.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(u(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(G(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===r&&(r=H(t)?[]:Object.create(v(t)),i=!0),a.push(t),c.push(r),i?l(t,r,e):r}}function st(t,e){return t===e||t!=t&&e!=e}function ct(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,i,r,o=typeof t;if(o===typeof e&&"object"===o){if(!H(t)){if(B(t))return!!B(e)&&st(t.getTime(),e.getTime());if(Y(t))return!!Y(e)&&t.toString()===e.toString();if(J(t)||J(e)||K(t)||K(e)||H(e)||B(e)||Y(e))return!1;for(i in r=Nt(),t)if("$"!==i.charAt(0)&&!G(t[i])){if(!ct(t[i],e[i]))return!1;r[i]=!0}for(i in e)if(!(i in r)&&"$"!==i.charAt(0)&&L(e[i])&&!G(e[i]))return!1;return!0}if(!H(e))return!1;if((n=t.length)===e.length){for(i=0;i<n;i++)if(!ct(t[i],e[i]))return!1;return!0}}return!1}var lt=function(){if(!L(lt.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");lt.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else lt.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return lt.rules},ut=function(){if(L(ut.name_))return ut.name_;var e,n,i,r,o=St.length;for(n=0;n<o;++n)if(i=St[n],e=t.document.querySelector("["+i.replace(":","\\:")+"jq]")){r=e.getAttribute(i+"jq");break}return ut.name_=r};function dt(t,e,n){return t.concat(_.call(e,n))}function pt(t,e){return _.call(t,e||0)}function ft(t,e){var n=arguments.length>2?pt(arguments,2):[];return!G(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,dt(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function _t(e,n){var i=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=void 0:K(n)?i="$WINDOW":n&&t.document===n?i="$DOCUMENT":J(n)&&(i="$SCOPE"),i}function ht(t,e){if(!z(t))return V(e)||(e=e?2:null),JSON.stringify(t,_t,e)}function mt(t){return U(t)?JSON.parse(t):t}var gt=/:/g;function vt(t,e){t=t.replace(gt,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return q(n)?e:n}function bt(t,e,n){n=n?-1:1;var i=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,n*(vt(e,i)-i))}function yt(t){t=d(t).clone().empty();var e=d("<div>").append(t).html();try{return t[0].nodeType===Vt?c(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+c(e)})}catch(t){return c(e)}}function wt(t){try{return decodeURIComponent(t)}catch(t){}}function $t(t){var e={};return x((t||"").split("&"),function(t){var n,i,r;t&&(i=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(i=t.substring(0,n),r=t.substring(n+1)),L(i=wt(i))&&(r=!L(r)||wt(r),s.call(e,i)?H(e[i])?e[i].push(r):e[i]=[e[i],r]:e[i]=r))}),e}function xt(t){var e=[];return x(t,function(t,n){H(t)?x(t,function(t){e.push(Ct(n,!0)+(!0===t?"":"="+Ct(t,!0)))}):e.push(Ct(n,!0)+(!0===t?"":"="+Ct(t,!0)))}),e.length?e.join("&"):""}function kt(t){return Ct(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ct(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var St=["ng-","data-ng-","ng:","x-ng-"];var At=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var i=n.attributes;return[i.getNamedItem("src"),i.getNamedItem("href"),i.getNamedItem("xlink:href")].every(function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(t.document);function Et(e,n){var i,r,o={};if(x(St,function(t){var n=t+"app";!i&&e.hasAttribute&&e.hasAttribute(n)&&(i=e,r=e.getAttribute(n))}),x(St,function(t){var n,o=t+"app";!i&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(i=n,r=n.getAttribute(o))}),i){if(!At)return void t.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,i,r=St.length;for(i=0;i<r;++i)if(n=St[i]+e,U(n=t.getAttribute(n)))return n;return null}(i,"strict-di"),n(i,r?[r]:[],o)}}function jt(e,n,i){N(i)||(i={});i=j({strictDi:!1},i);var r=function(){if((e=d(e)).injector()){var r=e[0]===t.document?"document":yt(e);throw b("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Je(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!a.test(t.name))return r();t.name=t.name.replace(a,""),y.resumeBootstrap=function(t){return x(t,function(t){n.push(t)}),r()},G(y.resumeDeferredBootstrap)&&y.resumeDeferredBootstrap()}function Ot(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function Tt(t){var e=y.element(t).injector();if(!e)throw b("test","no injector found for element argument to getTestability");return e.get("$$testability")}var qt=/[A-Z]/g;function Mt(t,e){return e=e||"_",t.replace(qt,function(t,n){return(n?e:"")+t.toLowerCase()})}var Pt=!1;function It(t,e,n){if(!t)throw b("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function Rt(t,e,n){return n&&H(t)&&(t=t[t.length-1]),It(G(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Dt(t,e){if("hasOwnProperty"===t)throw b("badname","hasOwnProperty is not a valid {0} name",e)}function zt(t,e,n){if(!e)return t;for(var i,r=e.split("."),o=t,a=r.length,s=0;s<a;s++)i=r[s],t&&(t=(o=t)[i]);return!n&&G(t)?ft(o,t):t}function Lt(t){for(var e,n=t[0],i=t[t.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(e||t[r]!==n)&&(e||(e=d(_.call(t,0,r))),e.push(n));return e||t}function Nt(){return Object.create(null)}function Ft(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!D(t)||H(t)||B(t)?ht(t):t.toString()}return t}var Ut=1,Vt=3,Bt=8,Ht=9,Wt=11;function Gt(t,e){if(H(t)){e=e||[];for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}else if(N(t))for(var r in e=e||{},t)"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r]);return e||t}function Yt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):z(t)?"undefined":"string"!=typeof t?function(t,e){var n=[];return i(e)&&(t=y.copy(t,null,e)),JSON.stringify(t,function(t,e){if(N(e=_t(t,e))){if(n.indexOf(e)>=0)return"...";n.push(e)}return e})}(t,e):t}var Kt={full:"1.6.6",major:1,minor:6,dot:6,codeName:"interdimensional-cable"};fe.expando="ng339";var Jt=fe.cache={},Qt=1;fe._data=function(t){return this.cache[t[this.expando]]||{}};var Xt=/-([a-z])/g,Zt=/^-ms-/,te={mouseleave:"mouseout",mouseenter:"mouseover"},ee=r("jqLite");function ne(t,e){return e.toUpperCase()}function ie(t){return t.replace(Xt,ne)}var re=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,oe=/<|&#?\w+;/,ae=/<([\w:-]+)/,se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ce={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function le(t){return!oe.test(t)}function ue(t){var e=t.nodeType;return e===Ut||!e||e===Ht}function de(t,e){var n,i,r,o,a=e.createDocumentFragment(),s=[];if(le(t))s.push(e.createTextNode(t));else{for(n=a.appendChild(e.createElement("div")),i=(ae.exec(t)||["",""])[1].toLowerCase(),r=ce[i]||ce._default,n.innerHTML=r[1]+t.replace(se,"<$1></$2>")+r[2],o=r[0];o--;)n=n.lastChild;s=dt(s,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",x(s,function(t){a.appendChild(t)}),a}ce.optgroup=ce.option,ce.tbody=ce.tfoot=ce.colgroup=ce.caption=ce.thead,ce.th=ce.td;var pe=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function fe(e){if(e instanceof fe)return e;var n,i,r,o;if(U(e)&&(e=tt(e),n=!0),!(this instanceof fe)){if(n&&"<"!==e.charAt(0))throw ee("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new fe(e)}n?xe(this,(i=e,r=r||t.document,(o=re.exec(i))?[r.createElement(o[1])]:(o=de(i,r))?o.childNodes:[])):G(e)?Ee(e):xe(this,e)}function _e(t){return t.cloneNode(!0)}function he(t,e){!e&&ue(t)&&d.cleanData([t]),t.querySelectorAll&&d.cleanData(t.querySelectorAll("*"))}function me(t,e,n,i){if(L(i))throw ee("offargs","jqLite#off() does not support the `selector` argument");var r=ve(t),o=r&&r.events,a=r&&r.handle;if(a)if(e){var s=function(e){var i=o[e];L(n)&&ot(i||[],n),L(n)&&i&&i.length>0||(t.removeEventListener(e,a),delete o[e])};x(e.split(" "),function(t){s(t),te[t]&&s(te[t])})}else for(e in o)"$destroy"!==e&&t.removeEventListener(e,a),delete o[e]}function ge(t,e){var n=t.ng339,i=n&&Jt[n];if(i){if(e)return void delete i.data[e];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),me(t)),delete Jt[n],t.ng339=void 0}}function ve(t,e){var n=t.ng339,i=n&&Jt[n];return e&&!i&&(t.ng339=n=++Qt,i=Jt[n]={events:{},data:{},handle:void 0}),i}function be(t,e,n){if(ue(t)){var i,r=L(n),o=!r&&e&&!N(e),a=!e,s=ve(t,!o),c=s&&s.data;if(r)c[ie(e)]=n;else{if(a)return c;if(o)return c&&c[ie(e)];for(i in e)c[ie(i)]=e[i]}}}function ye(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function we(t,e){e&&t.setAttribute&&x(e.split(" "),function(e){t.setAttribute("class",tt((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+tt(e)+" "," ")))})}function $e(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");x(e.split(" "),function(t){t=tt(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",tt(n))}}function xe(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;i<n;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function ke(t,e){return Ce(t,"$"+(e||"ngController")+"Controller")}function Ce(t,e,n){t.nodeType===Ht&&(t=t.documentElement);for(var i=H(e)?e:[e];t;){for(var r=0,o=i.length;r<o;r++)if(L(n=d.data(t,i[r])))return n;t=t.parentNode||t.nodeType===Wt&&t.host}}function Se(t){for(he(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Ae(t,e){e||he(t);var n=t.parentNode;n&&n.removeChild(t)}function Ee(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var je=fe.prototype={ready:Ee,toString:function(){var t=[];return x(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return d(t>=0?this[t]:this[this.length+t])},length:0,push:m,sort:[].sort,splice:[].splice},Oe={};x("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Oe[c(t)]=t});var Te={};x("input,select,option,textarea,button,form,details".split(","),function(t){Te[t]=!0});var qe={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Me(t,e){var n=Oe[e.toLowerCase()];return n&&Te[it(t)]&&n}function Pe(t,e,n){n.call(t,e)}function Ie(t,e,n){var i=e.relatedTarget;i&&(i===t||pe.call(t,i))||n.call(t,e)}function Re(){this.$get=function(){return j(fe,{hasClass:function(t,e){return t.attr&&(t=t[0]),ye(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),$e(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),we(t,e)}})}}function De(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return n="function"===i||"object"===i&&null!==t?t.$$hashKey=i+":"+(e||S)():i+":"+t}x({data:be,removeData:ge,hasData:function(t){for(var e in Jt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)ge(t[e])}},function(t,e){fe[e]=t}),x({data:be,inheritedData:Ce,scope:function(t){return d.data(t,"$scope")||Ce(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return d.data(t,"$isolateScope")||d.data(t,"$isolateScopeNoTemplate")},controller:ke,injector:function(t){return Ce(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:ye,css:function(t,e,n){if(e=function(t){return ie(t.replace(Zt,"ms-"))}(e),!L(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var i,r=t.nodeType;if(r!==Vt&&2!==r&&r!==Bt&&t.getAttribute){var o=c(e),a=Oe[o];if(!L(n))return i=t.getAttribute(e),a&&null!==i&&(i=o),null===i?void 0:i;null===n||!1===n&&a?t.removeAttribute(e):t.setAttribute(e,a?o:n)}},prop:function(t,e,n){if(!L(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(z(e)){var n=t.nodeType;return n===Ut||n===Vt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(z(e)){if(t.multiple&&"select"===it(t)){var n=[];return x(t.options,function(t){t.selected&&n.push(t.value||t.text)}),n}return t.value}t.value=e},html:function(t,e){if(z(e))return t.innerHTML;he(t,!0),t.innerHTML=e},empty:Se},function(t,e){fe.prototype[e]=function(e,n){var i,r,o=this.length;if(t!==Se&&z(2===t.length&&t!==ye&&t!==ke?e:n)){if(N(e)){for(i=0;i<o;i++)if(t===be)t(this[i],e);else for(r in e)t(this[i],r,e[r]);return this}for(var a=t.$dv,s=z(a)?Math.min(o,1):o,c=0;c<s;c++){var l=t(this[c],e,n);a=a?a+l:l}return a}for(i=0;i<o;i++)t(this[i],e,n);return this}}),x({removeData:ge,on:function(t,e,n,i){if(L(i))throw ee("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ue(t)){var r=ve(t,!0),o=r.events,a=r.handle;a||(a=r.handle=function(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type],o=r?r.length:0;if(o){if(z(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=r.specialHandlerWrapper||Pe;o>1&&(r=Gt(r));for(var c=0;c<o;c++)n.isImmediatePropagationStopped()||s(t,n,r[c])}};return n.elem=t,n}(t,o));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],c=s.length,l=function(e,i,r){var s=o[e];s||((s=o[e]=[]).specialHandlerWrapper=i,"$destroy"===e||r||t.addEventListener(e,a)),s.push(n)};c--;)e=s[c],te[e]?(l(te[e],Ie),l(e,void 0,!0)):l(e)}},off:me,one:function(t,e,n){(t=d(t)).on(e,function i(){t.off(e,n),t.off(e,i)}),t.on(e,n)},replaceWith:function(t,e){var n,i=t.parentNode;he(t),x(new fe(e),function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e})},children:function(t){var e=[];return x(t.childNodes,function(t){t.nodeType===Ut&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Ut||n===Wt)for(var i=0,r=(e=new fe(e)).length;i<r;i++){var o=e[i];t.appendChild(o)}},prepend:function(t,e){if(t.nodeType===Ut){var n=t.firstChild;x(new fe(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){var n,i,r;n=t,i=d(e).eq(0).clone()[0],(r=n.parentNode)&&r.replaceChild(i,n),i.appendChild(n)},remove:Ae,detach:function(t){Ae(t,!0)},after:function(t,e){var n=t,i=t.parentNode;if(i)for(var r=0,o=(e=new fe(e)).length;r<o;r++){var a=e[r];i.insertBefore(a,n.nextSibling),n=a}},addClass:$e,removeClass:we,toggleClass:function(t,e,n){e&&x(e.split(" "),function(e){var i=n;z(i)&&(i=!ye(t,e)),(i?$e:we)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Wt?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:_e,triggerHandler:function(t,e,n){var i,r,o,a=e.type||e,s=ve(t),c=s&&s.events,l=c&&c[a];l&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:P,type:a,target:t},e.type&&(i=j(i,e)),r=Gt(l),o=n?[i].concat(n):[i],x(r,function(e){i.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(t,e){fe.prototype[e]=function(e,n,i){for(var r,o=0,a=this.length;o<a;o++)z(r)?L(r=t(this[o],e,n,i))&&(r=d(r)):xe(r,t(this[o],e,n,i));return L(r)?r:this}}),fe.prototype.bind=fe.prototype.on,fe.prototype.unbind=fe.prototype.off;var ze=Object.create(null);function Le(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Le.prototype={_idx:function(t){return t===this._lastKey?this._lastIndex:(this._lastKey=t,this._lastIndex=this._keys.indexOf(t),this._lastIndex)},_transformKey:function(t){return q(t)?ze:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Ne=Le,Fe=[function(){this.$get=[function(){return Ne}]}],Ue=/^([^(]+?)=>/,Ve=/^[^(]*\(\s*([^)]*)\)/m,Be=/,/,He=/^\s*(_?)(\S+?)\1\s*$/,We=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ge=r("$injector");function Ye(t){return Function.prototype.toString.call(t)}function Ke(t){var e=Ye(t).replace(We,"");return e.match(Ue)||e.match(Ve)}function Je(t,e){e=!0===e;var n={},i="Provider",r=[],o=new Ne,a={$provide:{provider:_(h),factory:_(g),service:_(function(t,e){return g(t,["$injector",function(t){return t.instantiate(e)}])}),value:_(function(t,e){return g(t,R(e),!1)}),constant:_(function(t,e){Dt(t,"constant"),a[t]=e,c[t]=e}),decorator:function(t,e){var n=s.get(t+i),r=n.$get;n.$get=function(){var t=d.invoke(r,n);return d.invoke(e,null,{$delegate:t})}}}},s=a.$injector=v(a,function(t,e){throw y.isString(e)&&r.push(e),Ge("unpr","Unknown provider: {0}",r.join(" <- "))}),c={},l=v(c,function(t,e){var n=s.get(t+i,e);return d.invoke(n.$get,n,void 0,t)}),d=l;a["$injector"+i]={$get:R(l)},d.modules=s.modules=Nt();var p=function t(e){It(z(e)||H(e),"modulesToLoad","not an array");var n,i=[];x(e,function(e){if(!o.get(e)){o.set(e,!0);try{U(e)?(n=f(e),d.modules[e]=n,i=i.concat(t(n.requires)).concat(n._runBlocks),r(n._invokeQueue),r(n._configBlocks)):G(e)?i.push(s.invoke(e)):H(e)?i.push(s.invoke(e)):Rt(e,"module")}catch(t){throw H(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),Ge("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var i=t[e],r=s.get(i[0]);r[i[1]].apply(r,i[2])}}});return i}(t);return(d=l.get("$injector")).strictDi=e,x(p,function(t){t&&d.invoke(t)}),d;function _(t){return function(e,n){if(!N(e))return t(e,n);x(e,C(t))}}function h(t,e){if(Dt(t,"service"),(G(e)||H(e))&&(e=s.instantiate(e)),!e.$get)throw Ge("pget","Provider '{0}' must define $get factory method.",t);return a[t+i]=e}function m(t,e){return function(){var n=d.invoke(e,this);if(z(n))throw Ge("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function g(t,e,n){return h(t,{$get:!1!==n?m(t,e):e})}function v(t,o){function s(e,i){if(t.hasOwnProperty(e)){if(t[e]===n)throw Ge("cdep","Circular dependency found: {0}",e+" <- "+r.join(" <- "));return t[e]}try{return r.unshift(e),t[e]=n,t[e]=o(e,i),t[e]}catch(i){throw t[e]===n&&delete t[e],i}finally{r.shift()}}function c(t,n,i){for(var r=[],o=Je.$$annotate(t,e,i),a=0,c=o.length;a<c;a++){var l=o[a];if("string"!=typeof l)throw Ge("itkn","Incorrect injection token! Expected service name as string, got {0}",l);r.push(n&&n.hasOwnProperty(l)?n[l]:s(l,i))}return r}return{invoke:function(t,e,n,i){"string"==typeof n&&(i=n,n=null);var r=c(t,n,i);return H(t)&&(t=t[t.length-1]),function(t){if(u||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return Q(e)||(e=t.$$ngIsClass=/^(?:class\b|constructor\()/.test(Ye(t))),e}(t)?(r.unshift(null),new(Function.prototype.bind.apply(t,r))):t.apply(e,r)},instantiate:function(t,e,n){var i=H(t)?t[t.length-1]:t,r=c(t,e,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))},get:s,annotate:Je.$$annotate,has:function(e){return a.hasOwnProperty(e+i)||t.hasOwnProperty(e)}}}}function Qe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,i,r){var o=n.document;function a(t){if(t){t.scrollIntoView();var e=function(){var t=s.yOffset;if(G(t))t=t();else if(nt(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else V(t)||(t=0);return t}();if(e){var i=t.getBoundingClientRect().top;n.scrollBy(0,i-e)}}else n.scrollTo(0,0)}function s(t){var e,n,r;(t=U(t)?t:V(t)?t.toString():i.hash())?(e=o.getElementById(t))?a(e):(n=o.getElementsByName(t),r=null,Array.prototype.some.call(n,function(t){if("a"===it(t))return r=t,!0}),(e=r)?a(e):"top"===t&&a(null)):a(null)}return e&&r.$watch(function(){return i.hash()},function(e,n){var i,o;e===n&&""===e||(i=function(){r.$evalAsync(s)},"complete"===(o=o||t).document.readyState?o.setTimeout(i):d(o).on("load",i))}),s}]}Je.$$annotate=function(t,e,n){var i,r;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw U(n)&&n||(n=t.name||function(t){var e=Ke(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Ge("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);x(Ke(t)[1].split(Be),function(t){t.replace(He,function(t,e,n){i.push(n)})})}t.$inject=i}}else H(t)?(Rt(t[r=t.length-1],"fn"),i=t.slice(0,r)):Rt(t,"fn",!0);return i};var Xe=r("$animate"),Ze=1;function tn(t,e){return t||e?t?e?(H(t)&&(t=t.join(" ")),H(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function en(t){return N(t)?t:{}}var nn=function(){this.$get=P},rn=function(){var t=new Ne,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){return{enabled:P,on:P,off:P,pin:P,push:function(a,s,c,l){l&&l(),(c=c||{}).from&&a.css(c.from),c.to&&a.css(c.to),(c.addClass||c.removeClass)&&function(n,a,s){var c=t.get(n)||{},l=r(c,a,!0),u=r(c,s,!1);(l||u)&&(t.set(n,c),e.push(n),1===e.length&&i.$$postDigest(o))}(a,c.addClass,c.removeClass);var u=new n;return u.complete(),u}};function r(t,e,n){var i=!1;return e&&x(e=U(e)?e.split(" "):H(e)?e:[],function(e){e&&(i=!0,t[e]=n)}),i}function o(){x(e,function(e){var n=t.get(e);if(n){var i=function(t){U(t)&&(t=t.split(" "));var e=Nt();return x(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),r="",o="";x(n,function(t,e){t!==!!i[e]&&(t?r+=(r.length?" ":"")+e:o+=(o.length?" ":"")+e)}),x(e,function(t){r&&$e(t,r),o&&we(t,o)}),t.delete(e)}}),e.length=0}}]},on=["$provide",function(t){var e=this,n=null,i=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw Xe("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";e.$$registeredAnimations[n.substr(1)]=r,t.factory(r,i)},this.customFilter=function(t){return 1===arguments.length&&(i=G(t)?t:null),i},this.classNameFilter=function(t){if(1===arguments.length&&((n=t instanceof RegExp?t:null)&&new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]").test(n.toString())))throw n=null,Xe("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Ze)return n}}(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,i,r,o){return i=i&&d(i),r=r&&d(r),e(n,i=i||r.parent(),r),t.push(n,"enter",en(o))},move:function(n,i,r,o){return i=i&&d(i),r=r&&d(r),e(n,i=i||r.parent(),r),t.push(n,"move",en(o))},leave:function(e,n){return t.push(e,"leave",en(n),function(){e.remove()})},addClass:function(e,n,i){return(i=en(i)).addClass=tn(i.addclass,n),t.push(e,"addClass",i)},removeClass:function(e,n,i){return(i=en(i)).removeClass=tn(i.removeClass,n),t.push(e,"removeClass",i)},setClass:function(e,n,i,r){return(r=en(r)).addClass=tn(r.addClass,n),r.removeClass=tn(r.removeClass,i),t.push(e,"setClass",r)},animate:function(e,n,i,r,o){return(o=en(o)).from=o.from?j(o.from,n):n,o.to=o.to?j(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=tn(o.tempClasses,r),t.push(e,"animate",o)}}}]}],an=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t(function(){for(var t=0;t<e.length;t++)e[t]();e=[]})}return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]},sn=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,i,r){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){i()?function(t){r(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function i(){if(n===t.length)return void e(!0);t[n](function(t){!1!==t?(n++,i()):e(!1)})}()},o.all=function(t,e){var n=0,i=!0;function r(r){i=i&&r,++n===t.length&&e(i)}x(t,function(t){t.done(r)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:P,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(x(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},cn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,i){var r=i||{};r.$$prepared||(r=at(r)),r.cleanupStyles&&(r.from=r.to=null),r.from&&(e.css(r.from),r.from=null);var o,a=new n;return{start:s,end:s};function s(){return t(function(){!function(){r.addClass&&(e.addClass(r.addClass),r.addClass=null);r.removeClass&&(e.removeClass(r.removeClass),r.removeClass=null);r.to&&(e.css(r.to),r.to=null)}(),o||a.complete(),o=!0}),a}}}]};function ln(t,e,n,i){var r=this,o=t.location,a=t.history,s=t.setTimeout,c=t.clearTimeout,l={};r.isMock=!1;var u=0,p=[];function f(t){try{t.apply(null,pt(arguments,1))}finally{if(0===--u)for(;p.length;)try{p.pop()()}catch(t){n.error(t)}}}r.$$completeOutstandingRequest=f,r.$$incOutstandingRequestCount=function(){u++},r.notifyWhenNoOutstandingRequests=function(t){0===u?t():p.push(t)};var _,h,m=o.href,g=e.find("base"),v=null,b=i.history?function(){try{return a.state}catch(t){}}:P;C(),r.url=function(e,n,s){if(z(s)&&(s=null),o!==t.location&&(o=t.location),a!==t.history&&(a=t.history),e){var c=h===s;if(m===e&&(!i.history||c))return r;var l=m&&ai(m)===ai(e);return m=e,h=s,!i.history||l&&c?(l||(v=e),n?o.replace(e):l?o.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):o.href=e,o.href!==e&&(v=e)):(a[n?"replaceState":"pushState"](s,"",e),C()),v&&(v=e),r}return v||o.href.replace(/%27/g,"'")},r.state=function(){return _};var y=[],w=!1;function $(){v=null,S()}var k=null;function C(){ct(_=z(_=b())?null:_,k)&&(_=k),k=_,h=_}function S(){var t=h;C(),m===r.url()&&t===_||(m=r.url(),h=_,x(y,function(t){t(r.url(),_)}))}r.onUrlChange=function(e){return w||(i.history&&d(t).on("popstate",$),d(t).on("hashchange",$),w=!0),y.push(e),e},r.$$applicationDestroyed=function(){d(t).off("hashchange popstate",$)},r.$$checkUrlChange=S,r.baseHref=function(){var t=g.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},r.defer=function(t,e){var n;return u++,n=s(function(){delete l[n],f(t)},e||0),l[n]=!0,n},r.defer.cancel=function(t){return!!l[t]&&(delete l[t],c(t),f(P),!0)}}function un(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new ln(t,i,e,n)}]}function dn(){this.$get=function(){var t={};function e(e,n){if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var i=0,o=j({},n,{id:e}),a=Nt(),s=n&&n.capacity||Number.MAX_VALUE,c=Nt(),l=null,u=null;return t[e]={put:function(t,e){if(!z(e)){if(s<Number.MAX_VALUE)d(c[t]||(c[t]={key:t}));return t in a||i++,a[t]=e,i>s&&this.remove(u.key),e}},get:function(t){if(s<Number.MAX_VALUE){var e=c[t];if(!e)return;d(e)}return a[t]},remove:function(t){if(s<Number.MAX_VALUE){var e=c[t];if(!e)return;e===l&&(l=e.p),e===u&&(u=e.n),p(e.n,e.p),delete c[t]}t in a&&(delete a[t],i--)},removeAll:function(){a=Nt(),i=0,c=Nt(),l=u=null},destroy:function(){a=null,o=null,c=null,delete t[e]},info:function(){return j({},o,{size:i})}};function d(t){t!==l&&(u?u===t&&(u=t.n):u=t,p(t.n,t.p),p(t,l),(l=t).n=null)}function p(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return x(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function pn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var fn=r("$compile");var _n=new function(){};function hn(e,n){var i={},r="Directive",o=/^\s*directive:\s*([\w-]+)\s+(.*)$/,a=/(([\w-]+)(?::([^;]+))?;?)/,l=function(t){var e,n={},i=t.split(",");for(e=0;e<i.length;e++)n[i[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),p=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,f=/^(on[a-z]+|formaction)$/,_=Nt();function h(t,e,n){var i=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,r=Nt();return x(t,function(t,o){if(t in _)r[o]=_[t];else{var a=t.match(i);if(!a)throw fn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");r[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(_[t]=r[o])}}),r}function m(t,e){var n={isolateScope:null,bindToController:null};if(N(t.scope)&&(!0===t.bindToController?(n.bindToController=h(t.scope,e,!0),n.isolateScope={}):n.isolateScope=h(t.scope,e,!1)),N(t.bindToController)&&(n.bindToController=h(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw fn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,o){return It(n,"name"),Dt(n,"directive"),U(n)?(!function(t){var e=t.charAt(0);if(!e||e!==c(e))throw fn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw fn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),It(o,"directiveFactory"),i.hasOwnProperty(n)||(i[n]=[],e.factory(n+r,["$injector","$exceptionHandler",function(t,e){var r=[];return x(i[n],function(i,o){try{var a=t.invoke(i);G(a)?a={compile:R(a)}:!a.compile&&a.link&&(a.compile=R(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=function(t){var e=t.require||t.controller&&t.name;return!H(e)&&N(e)&&x(e,function(t,n){var i=t.match(p);t.substring(i[0].length)||(e[n]=i[0]+n)}),e}(a),a.restrict=function(t,e){if(t&&(!U(t)||!/[EACM]/.test(t)))throw fn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(a.restrict,n),a.$$moduleName=i.$$moduleName,r.push(a)}catch(t){e(t)}}),r}])),i[n].push(o)):x(n,C(t)),this},this.component=function t(e,n){if(!U(e))return x(e,C(ft(this,t))),this;var i=n.controller||function(){};function r(t){function e(e){return G(e)||H(e)?function(n,i){return t.invoke(e,this,{$element:n,$attrs:i})}:e}var r=n.template||n.templateUrl?n.template:"",o={controller:i,controllerAs:kn(n.controller)||n.controllerAs||"$ctrl",template:e(r),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return x(n,function(t,e){"$"===e.charAt(0)&&(o[e]=t)}),o}return x(n,function(t,e){"$"===e.charAt(0)&&(r[e]=t,G(i)&&(i[e]=t))}),r.$inject=["$injector"],this.directive(e,r)},this.aHrefSanitizationWhitelist=function(t){return L(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return L(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var v=!0;this.debugInfoEnabled=function(t){return L(t)?(v=t,this):v};var b=!1;this.preAssignBindingsEnabled=function(t){return L(t)?(b=t,this):b};var y=!1;this.strictComponentBindingsEnabled=function(t){return L(t)?(y=t,this):y};var w=10;this.onChangesTtl=function(t){return arguments.length?(w=t,this):w};var $=!0;this.commentDirectivesEnabled=function(t){return arguments.length?($=t,this):$};var k=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(k=t,this):k},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,_,h,C,S,A,E,O,T){var q,R=/^\w/,D=t.document.createElement("div"),F=$,V=k,B=w;function Y(){try{if(!--B)throw q=void 0,fn("infchng","{0} $onChanges() iterations reached. Aborting!\n",w);A.$apply(function(){for(var t=[],e=0,n=q.length;e<n;++e)try{q[e]()}catch(e){t.push(e)}if(q=void 0,t.length)throw t})}finally{B++}}function K(t,e){if(e){var n,i,r,o=Object.keys(e);for(n=0,i=o.length;n<i;n++)this[r=o[n]]=e[r]}else this.$attr={};this.$$element=t}function X(t,e){try{t.addClass(e)}catch(t){}}K.prototype={$normalize:bn,$addClass:function(t){t&&t.length>0&&O.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&O.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=yn(t,e);n&&n.length&&O.addClass(this.$$element,n);var i=yn(e,t);i&&i.length&&O.removeClass(this.$$element,i)},$set:function(t,e,n,i){var r,o=Me(this.$$element[0],t),a=qe[t],s=t;if(o?(this.$$element.prop(t,e),i=o):a&&(this[a]=e,s=a),this[t]=e,i?this.$attr[t]=i:(i=this.$attr[t])||(this.$attr[t]=i=Mt(t,"-")),"a"===(r=it(this.$$element))&&("href"===t||"xlinkHref"===t)||"img"===r&&"src"===t)this[t]=e=T(e,"src"===t);else if("img"===r&&"srcset"===t&&L(e)){for(var c="",l=tt(e),u=/\s/.test(l)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,d=l.split(u),p=Math.floor(d.length/2),f=0;f<p;f++){var h=2*f;c+=T(tt(d[h]),!0),c+=" "+tt(d[h+1])}var m=tt(d[2*f]).split(/\s/);c+=T(tt(m[0]),!0),2===m.length&&(c+=" "+tt(m[1])),this[t]=e=c}!1!==n&&(null===e||z(e)?this.$$element.removeAttr(i):R.test(i)?this.$$element.attr(i,e):function(t,e,n){D.innerHTML="<span "+e+">";var i=D.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,t.attributes.setNamedItem(r)}(this.$$element[0],i,e));var g=this.$$observers;g&&x(g[s],function(t){try{t(e)}catch(t){_(t)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=Nt()),r=i[t]||(i[t]=[]);return r.push(e),A.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(t)||z(n[t])||e(n[t])}),function(){ot(r,e)}}};var Z=n.startSymbol(),et=n.endSymbol(),nt="{{"===Z&&"}}"===et?I:function(t){return t.replace(/\{\{/g,Z).replace(/}}/g,et)},rt=/^ngAttr[A-Z]/,at=/^(.+)Start$/;return lt.$$addBindingInfo=v?function(t,e){var n=t.data("$binding")||[];H(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:P,lt.$$addBindingClass=v?function(t){X(t,"ng-binding")}:P,lt.$$addScopeInfo=v?function(t,e,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(r,e)}:P,lt.$$addScopeClass=v?function(t,e){X(t,e?"ng-isolate-scope":"ng-scope")}:P,lt.$$createComment=function(e,n){var i="";return v&&(i=" "+(e||"")+": ",n&&(i+=n+" ")),t.document.createComment(i)},lt;function lt(t,e,n,i,r){t instanceof d||(t=d(t));var o=ut(t,e,t,n,i,r);lt.$$addScopeClass(t);var a=null;return function(e,n,i){if(!t)throw fn("multilink","This element has already been linked.");It(e,"scope"),r&&r.needsNewScope&&(e=e.$parent.$new());var s,c,l,u=(i=i||{}).parentBoundTranscludeFn,p=i.transcludeControllers,f=i.futureParentElement;if(u&&u.$$boundTransclude&&(u=u.$$boundTransclude),a||(c=(s=f)&&s[0],a=c&&"foreignobject"!==it(c)&&g.call(c).match(/SVG/)?"svg":"html"),l="html"!==a?d(jt(a,d("<div>").append(t).html())):n?je.clone.call(t):t,p)for(var _ in p)l.data("$"+_+"Controller",p[_].instance);return lt.$$addScopeInfo(l,e),n&&n(l,e),o&&o(e,l,l,u),n||(t=o=null),l}}function ut(t,e,n,i,r,o){for(var a,s,c,l,p,f,_,h=[],m=H(t)||t instanceof d,g=0;g<t.length;g++)a=new K,11===u&&dt(t,g,m),(c=(s=ht(t[g],[],a,0===g?i:void 0,r)).length?bt(s,t[g],a,e,n,null,[],[],o):null)&&c.scope&&lt.$$addScopeClass(a.$$element),p=c&&c.terminal||!(l=t[g].childNodes)||!l.length?null:ut(l,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e),(c||p)&&(h.push(g,c,p),f=!0,_=_||c),o=null;return f?function(t,n,i,r){var o,a,s,c,l,u,p,f,m;if(_){var g=n.length;for(m=new Array(g),l=0;l<h.length;l+=3)p=h[l],m[p]=n[p]}else m=n;for(l=0,u=h.length;l<u;)s=m[h[l++]],o=h[l++],a=h[l++],o?(o.scope?(c=t.$new(),lt.$$addScopeInfo(d(s),c)):c=t,f=o.transcludeOnThisElement?_t(t,o.transclude,r):!o.templateOnThisElement&&r?r:!r&&e?_t(t,e):null,o(a,c,s,i,f)):a&&a(t,s.childNodes,void 0,r)}:null}function dt(t,e,n){var i,r=t[e],o=r.parentNode;if(r.nodeType===Vt)for(;(i=o?r.nextSibling:t[e+1])&&i.nodeType===Vt;)r.nodeValue=r.nodeValue+i.nodeValue,i.parentNode&&i.parentNode.removeChild(i),n&&i===t[e+1]&&t.splice(e+1,1)}function _t(t,e,n){function i(i,r,o,a,s){return i||((i=t.$new(!1,s)).$$transcluded=!0),e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var r=i.$$slots=Nt();for(var o in e.$$slots)e.$$slots[o]?r[o]=_t(t,e.$$slots[o],n):r[o]=null;return i}function ht(t,e,i,r,s){var c,l,u,d=t.nodeType,p=i.$attr;switch(d){case Ut:xt(e,bn(l=it(t)),"E",r,s);for(var f,_,h,m,g,v,b=t.attributes,y=0,w=b&&b.length;y<w;y++){var $=!1,x=!1;_=(f=b[y]).name,g=f.value,m=bn(_),(v=rt.test(m))&&(_=_.replace(gn,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var k=m.match(at);k&&kt(k[1])&&($=_,x=_.substr(0,_.length-5)+"end",_=_.substr(0,_.length-6)),p[h=bn(_.toLowerCase())]=_,!v&&i.hasOwnProperty(h)||(i[h]=g,Me(t,h)&&(i[h]=!0)),Ot(t,e,g,h,v),xt(e,h,"A",r,s,$,x)}if("input"===l&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!V)break;if(N(u=t.className)&&(u=u.animVal),U(u)&&""!==u)for(;c=a.exec(u);)xt(e,h=bn(c[2]),"C",r,s)&&(i[h]=tt(c[3])),u=u.substr(c.index+c[0].length);break;case Vt:!function(t,e){var i=n(e,!0);i&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&lt.$$addBindingClass(e),function(t,e){var r=e.parent();n||lt.$$addBindingClass(r),lt.$$addBindingInfo(r,i.expressions),t.$watch(i,function(t){e[0].nodeValue=t})}}})}(e,t.nodeValue);break;case Bt:if(!F)break;!function(t,e,n,i,r){try{var a=o.exec(t.nodeValue);if(a){var s=bn(a[1]);xt(e,s,"M",i,r)&&(n[s]=tt(a[2]))}}catch(t){}}(t,e,i,r,s)}return e.sort(At),e}function mt(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw fn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType===Ut&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),i.push(t),t=t.nextSibling}while(r>0);else i.push(t);return d(i)}function gt(t,e,n){return function(i,r,o,a,s){return r=mt(r[0],e,n),t(i,r,o,a,s)}}function vt(t,e,n,i,r,o){var a;return t?lt(e,n,i,r,o):function(){return a||(a=lt(e,n,i,r,o),e=n=o=null),a.apply(this,arguments)}}function bt(t,e,n,i,r,o,a,s,c){c=c||{};for(var l,u,p,f,h,m=-Number.MAX_VALUE,g=c.newScopeDirective,v=c.controllerDirectives,y=c.newIsolateScopeDirective,w=c.templateDirective,$=c.nonTlbTranscludeDirective,k=!1,C=!1,A=c.hasElementTranscludeDirective,E=n.$$element=d(e),O=o,T=i,q=!1,M=!1,P=0,I=t.length;P<I;P++){var R=(l=t[P]).$$start,D=l.$$end;if(R&&(E=mt(e,R,D)),p=void 0,m>l.priority)break;if((h=l.scope)&&(l.templateUrl||(N(h)?(Et("new/isolated scope",y||g,l,E),y=l):Et("new/isolated scope",y,l,E)),g=g||l),u=l.name,!q&&(l.replace&&(l.templateUrl||l.template)||l.transclude&&!l.$$tlb)){for(var L,F=P+1;L=t[F++];)if(L.transclude&&!L.$$tlb||L.replace&&(L.templateUrl||L.template)){M=!0;break}q=!0}if(!l.templateUrl&&l.controller&&(v=v||Nt(),Et("'"+u+"' controller",v[u],l,E),v[u]=l),h=l.transclude)if(k=!0,l.$$tlb||(Et("transclusion",$,l,E),$=l),"element"===h)A=!0,m=l.priority,p=E,E=n.$$element=d(lt.$$createComment(u,n[u])),e=E[0],Tt(r,pt(p),e),p[0].$$parentNode=p[0].parentNode,T=vt(M,p,i,m,O&&O.name,{nonTlbTranscludeDirective:$});else{var U=Nt();if(N(h)){p=[];var V=Nt(),B=Nt();for(var W in x(h,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,V[t]=e,U[e]=null,B[e]=n}),x(E.contents(),function(t){var e=V[bn(it(t))];e?(B[e]=!0,U[e]=U[e]||[],U[e].push(t)):p.push(t)}),x(B,function(t,e){if(!t)throw fn("reqslot","Required transclusion slot `{0}` was not filled.",e)}),U)U[W]&&(U[W]=vt(M,U[W],i))}else p=d(_e(e)).contents();E.empty(),(T=vt(M,p,i,void 0,void 0,{needsNewScope:l.$$isolateScope||l.$$newScope})).$$slots=U}if(l.template)if(C=!0,Et("template",w,l,E),w=l,h=G(l.template)?l.template(E,n):l.template,h=nt(h),l.replace){if(O=l,p=le(h)?[]:wn(jt(l.templateNamespace,tt(h))),e=p[0],1!==p.length||e.nodeType!==Ut)throw fn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",u,"");Tt(r,E,e);var Y={$attr:{}},Q=ht(e,[],Y),X=t.splice(P+1,t.length-(P+1));(y||g)&&$t(Q,y,g),t=t.concat(Q).concat(X),Ct(n,Y),I=t.length}else E.html(h);if(l.templateUrl)C=!0,Et("template",w,l,E),w=l,l.replace&&(O=l),rt=St(t.splice(P,t.length-P),E,n,r,k&&T,a,s,{controllerDirectives:v,newScopeDirective:g!==l&&g,newIsolateScopeDirective:y,templateDirective:w,nonTlbTranscludeDirective:$}),I=t.length;else if(l.compile)try{f=l.compile(E,n,T);var Z=l.$$originalDirective||l;G(f)?et(null,ft(Z,f),R,D):f&&et(ft(Z,f.pre),ft(Z,f.post),R,D)}catch(t){_(t,yt(E))}l.terminal&&(rt.terminal=!0,m=Math.max(m,l.priority))}return rt.scope=g&&!0===g.scope,rt.transcludeOnThisElement=k,rt.templateOnThisElement=C,rt.transclude=T,c.hasElementTranscludeDirective=A,rt;function et(t,e,n,i){t&&(n&&(t=gt(t,n,i)),t.require=l.require,t.directiveName=u,(y===l||l.$$isolateScope)&&(t=qt(t,{isolateScope:!0})),a.push(t)),e&&(n&&(e=gt(e,n,i)),e.require=l.require,e.directiveName=u,(y===l||l.$$isolateScope)&&(e=qt(e,{isolateScope:!0})),s.push(e))}function rt(t,i,r,o,c){var l,u,p,f,h,m,$,k,C,E;for(var O in e===r?(C=n,k=n.$$element):C=new K(k=d(r),n),h=i,y?f=i.$new(!0):g&&(h=i.$parent),c&&(($=function(t,e,n,i){var r;J(t)||(i=n,n=e,e=t,t=void 0);A&&(r=m);n||(n=A?k.parent():k);if(!i)return c(t,e,r,n,I);var o=c.$$slots[i];if(o)return o(t,e,r,n,I);if(z(o))throw fn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,yt(k))}).$$boundTransclude=c,$.isSlotFilled=function(t){return!!c.$$slots[t]}),v&&(m=function(t,e,n,i,r,o,a){var s=Nt();for(var c in i){var l=i[c],u={$scope:l===a||l.$$isolateScope?r:o,$element:t,$attrs:e,$transclude:n},d=l.controller;"@"===d&&(d=e[l.name]);var p=S(d,u,!0,l.controllerAs);s[l.name]=p,t.data("$"+l.name+"Controller",p.instance)}return s}(k,C,$,v,f,i,y)),y&&(lt.$$addScopeInfo(k,f,!0,!(w&&(w===y||w===y.$$originalDirective))),lt.$$addScopeClass(k,!0),f.$$isolateBindings=y.$$isolateBindings,(E=Dt(i,C,f,f.$$isolateBindings,y)).removeWatches&&f.$on("$destroy",E.removeWatches)),m){var T=v[O],q=m[O],M=T.$$bindings.bindToController;if(b){q.bindingInfo=M?Dt(h,C,q.instance,M,T):{};var P=q();P!==q.instance&&(q.instance=P,k.data("$"+T.name+"Controller",P),q.bindingInfo.removeWatches&&q.bindingInfo.removeWatches(),q.bindingInfo=Dt(h,C,q.instance,M,T))}else q.instance=q(),k.data("$"+T.name+"Controller",q.instance),q.bindingInfo=Dt(h,C,q.instance,M,T)}for(x(v,function(t,e){var n=t.require;t.bindToController&&!H(n)&&N(n)&&j(m[e].instance,wt(e,n,k,m))}),x(m,function(t){var e=t.instance;if(G(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){_(t)}if(G(e.$onInit))try{e.$onInit()}catch(t){_(t)}G(e.$doCheck)&&(h.$watch(function(){e.$doCheck()}),e.$doCheck()),G(e.$onDestroy)&&h.$on("$destroy",function(){e.$onDestroy()})}),l=0,u=a.length;l<u;l++)Pt(p=a[l],p.isolateScope?f:i,k,C,p.require&&wt(p.directiveName,p.require,k,m),$);var I=i;for(y&&(y.template||null===y.templateUrl)&&(I=f),t&&t(I,r.childNodes,void 0,c),l=s.length-1;l>=0;l--)Pt(p=s[l],p.isolateScope?f:i,k,C,p.require&&wt(p.directiveName,p.require,k,m),$);x(m,function(t){var e=t.instance;G(e.$postLink)&&e.$postLink()})}}function wt(t,e,n,i){var r;if(U(e)){var o=e.match(p),a=e.substring(o[0].length),s=o[1]||o[3],c="?"===o[2];if("^^"===s?n=n.parent():r=(r=i&&i[a])&&r.instance,!r){var l="$"+a+"Controller";r=s?n.inheritedData(l):n.data(l)}if(!r&&!c)throw fn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(H(e)){r=[];for(var u=0,d=e.length;u<d;u++)r[u]=wt(t,e[u],n,i)}else N(e)&&(r={},x(e,function(e,o){r[o]=wt(t,e,n,i)}));return r||null}function $t(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i]=M(t[i],{$$isolateScope:e,$$newScope:n})}function xt(t,n,o,a,s,c,l){if(n===s)return null;var u=null;if(i.hasOwnProperty(n))for(var d,p=e.get(n+r),f=0,_=p.length;f<_;f++)if(d=p[f],(z(a)||a>d.priority)&&-1!==d.restrict.indexOf(o)){if(c&&(d=M(d,{$$start:c,$$end:l})),!d.$$bindings){var h=d.$$bindings=m(d,d.name);N(h.isolateScope)&&(d.$$isolateBindings=h.isolateScope)}t.push(d),u=d}return u}function kt(t){if(i.hasOwnProperty(t))for(var n=e.get(t+r),o=0,a=n.length;o<a;o++)if(n[o].multiElement)return!0;return!1}function Ct(t,e){var n=e.$attr,i=t.$attr;x(t,function(i,r){"$"!==r.charAt(0)&&(e[r]&&e[r]!==i&&(i.length?i+=("style"===r?";":" ")+e[r]:i=e[r]),t.$set(r,i,!0,n[r]))}),x(e,function(e,r){t.hasOwnProperty(r)||"$"===r.charAt(0)||(t[r]=e,"class"!==r&&"style"!==r&&(i[r]=n[r]))})}function St(t,e,n,i,r,o,a,s){var c,l,u=[],p=e[0],f=t.shift(),m=M(f,{templateUrl:null,transclude:null,replace:null,$$originalDirective:f}),g=G(f.templateUrl)?f.templateUrl(e,n):f.templateUrl,v=f.templateNamespace;return e.empty(),h(g).then(function(_){var h,b,y,w;if(_=nt(_),f.replace){if(y=le(_)?[]:wn(jt(v,tt(_))),h=y[0],1!==y.length||h.nodeType!==Ut)throw fn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f.name,g);b={$attr:{}},Tt(i,e,h);var $=ht(h,[],b);N(f.scope)&&$t($,!0),t=$.concat(t),Ct(n,b)}else h=p,e.html(_);for(t.unshift(m),c=bt(t,h,n,r,e,f,o,a,s),x(i,function(t,n){t===h&&(i[n]=e[0])}),l=ut(e[0].childNodes,r);u.length;){var k=u.shift(),C=u.shift(),S=u.shift(),A=u.shift(),E=e[0];if(!k.$$destroyed){if(C!==p){var j=C.className;s.hasElementTranscludeDirective&&f.replace||(E=_e(h)),Tt(S,d(C),E),X(d(E),j)}w=c.transcludeOnThisElement?_t(k,c.transclude,A):A,c(l,k,E,i,w)}}u=null}).catch(function(t){W(t)&&_(t)}),function(t,e,n,i,r){var o=r;e.$$destroyed||(u?u.push(e,n,i,o):(c.transcludeOnThisElement&&(o=_t(e,c.transclude,r)),c(l,e,n,i,o)))}}function At(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function Et(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e)throw fn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,yt(i))}function jt(e,n){switch(e=c(e||"html")){case"svg":case"math":var i=t.document.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function Ot(t,e,i,r,o){var a=function(t,e){if("srcdoc"===e)return E.HTML;var n=it(t);if("src"===e||"ngSrc"===e){if(-1===["img","video","audio","source","track"].indexOf(n))return E.RESOURCE_URL}else if("xlinkHref"===e||"form"===n&&"action"===e||"link"===n&&"href"===e)return E.RESOURCE_URL}(t,r),s=!o,c=l[r]||o,u=n(i,s,a,c);if(u){if("multiple"===r&&"select"===it(t))throw fn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",yt(t));if(f.test(r))throw fn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var s=o.$$observers||(o.$$observers=Nt()),l=o[r];l!==i&&(u=l&&n(l,!0,a,c),i=l),u&&(o[r]=u(t),(s[r]||(s[r]=[])).$$inter=!0,(o.$$observers&&o.$$observers[r].$$scope||t).$watch(u,function(t,e){"class"===r&&t!==e?o.$updateClass(t,e):o.$set(r,t)}))}}}})}}function Tt(e,n,i){var r,o,a=n[0],s=n.length,c=a.parentNode;if(e)for(r=0,o=e.length;r<o;r++)if(e[r]===a){e[r++]=i;for(var l=r,u=l+s-1,p=e.length;l<p;l++,u++)u<p?e[l]=e[u]:delete e[l];e.length-=s-1,e.context===a&&(e.context=i);break}c&&c.replaceChild(i,a);var f=t.document.createDocumentFragment();for(r=0;r<s;r++)f.appendChild(n[r]);for(d.hasData(a)&&(d.data(i,d.data(a)),d(a).off("$destroy")),d.cleanData(f.querySelectorAll("*")),r=1;r<s;r++)delete n[r];n[0]=i,n.length=1}function qt(t,e){return j(function(){return t.apply(null,arguments)},t,e)}function Pt(t,e,n,i,r,o){try{t(e,n,i,r,o)}catch(t){_(t,yt(n))}}function Rt(t,e){if(y)throw fn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Dt(t,e,i,r,o){var a,c=[],l={};function u(e,n,r){G(i.$onChanges)&&!st(n,r)&&(q||(t.$$postDigest(Y),q=[]),a||(a={},q.push(d)),a[e]&&(r=a[e].previousValue),a[e]=new mn(r,n))}function d(){i.$onChanges(a),a=void 0}return x(r,function(r,a){var d,p,f,_,h,m=r.attrName,g=r.optional;switch(r.mode){case"@":g||s.call(e,m)||(Rt(m,o.name),i[a]=e[m]=void 0),h=e.$observe(m,function(t){if(U(t)||Q(t)){var e=i[a];u(a,t,e),i[a]=t}}),e.$$observers[m].$$scope=t,U(d=e[m])?i[a]=n(d)(t):Q(d)&&(i[a]=d),l[a]=new mn(_n,i[a]),c.push(h);break;case"=":if(!s.call(e,m)){if(g)break;Rt(m,o.name),e[m]=void 0}if(g&&!e[m])break;p=C(e[m]),_=p.literal?ct:st,f=p.assign||function(){throw d=i[a]=p(t),fn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[m],m,o.name)},d=i[a]=p(t);var v=function(e){return _(e,i[a])||(_(e,d)?f(t,e=i[a]):i[a]=e),d=e};v.$stateful=!0,h=r.collection?t.$watchCollection(e[m],v):t.$watch(C(e[m],v),null,p.literal),c.push(h);break;case"<":if(!s.call(e,m)){if(g)break;Rt(m,o.name),e[m]=void 0}if(g&&!e[m])break;var b=(p=C(e[m])).literal,y=i[a]=p(t);l[a]=new mn(_n,i[a]),h=t.$watch(p,function(t,e){if(e===t){if(e===y||b&&ct(e,y))return;e=y}u(a,t,e),i[a]=t},b),c.push(h);break;case"&":if(g||s.call(e,m)||Rt(m,o.name),(p=e.hasOwnProperty(m)?C(e[m]):P)===P&&g)break;i[a]=function(e){return p(t,e)}}}),{initialChanges:l,removeWatches:c.length&&function(){for(var t=0,e=c.length;t<e;++t)c[t]()}}}}]}function mn(t,e){this.previousValue=t,this.currentValue=e}hn.$inject=["$provide","$$sanitizeUriProvider"],mn.prototype.isFirstChange=function(){return this.previousValue===_n};var gn=/^((?:x|data)[:\-_])/i,vn=/[:\-_]+(.)/g;function bn(t){return t.replace(gn,"").replace(vn,ne)}function yn(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var o=0;o<i.length;o++){for(var a=i[o],s=0;s<r.length;s++)if(a===r[s])continue t;n+=(n.length>0?" ":"")+a}return n}function wn(t){var e=(t=d(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(n.nodeType===Bt||n.nodeType===Vt&&""===n.nodeValue.trim())&&h.call(t,e,1)}return t}var $n=r("$controller"),xn=/^(\S+)(\s+as\s+([\w$]+))?$/;function kn(t,e){if(e&&U(e))return e;if(U(t)){var n=xn.exec(t);if(n)return n[3]}}function Cn(){var t={},e=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Dt(e,"controller"),N(e)?j(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(n,i){return function(r,a,s,c){var l,u,d,p;if(s=!0===s,c&&U(c)&&(p=c),U(r)){if(!(u=r.match(xn)))throw $n("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(d=u[1],p=p||u[3],!(r=t.hasOwnProperty(d)?t[d]:zt(a.$scope,d,!0)||(e?zt(i,d,!0):void 0)))throw $n("ctrlreg","The controller with the name '{0}' is not registered.",d);Rt(r,d,!0)}if(s){var f=(H(r)?r[r.length-1]:r).prototype;return l=Object.create(f||null),p&&o(a,p,l,d||r.name),j(function(){var t=n.invoke(r,l,a,d);return t!==l&&(N(t)||G(t))&&(l=t,p&&o(a,p,l,d||r.name)),l},{instance:l,identifier:p})}return l=n.instantiate(r,a,d),p&&o(a,p,l,d||r.name),l};function o(t,e,n,i){if(!t||!N(t.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,e);t.$scope[e]=n}}]}function Sn(){this.$get=["$window",function(t){return d(t.document)}]}function An(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],i=n&&n.hidden;function r(){i=n.hidden}return t.on("visibilitychange",r),e.$on("$destroy",function(){t.off("visibilitychange",r)}),function(){return i}}]}function En(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var jn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof d&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},On="application/json",Tn={"Content-Type":On+";charset=utf-8"},qn=/^\[|^\{(?!\{)/,Mn={"[":/]$/,"{":/}$/},Pn=/^\)]\}',?\n/,In=r("$http");function Rn(t){return N(t)?B(t)?t.toISOString():ht(t):t}function Dn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return k(t,function(t,n){null===t||z(t)||G(t)||(H(t)?x(t,function(t){e.push(Ct(n)+"="+Ct(Rn(t)))}):e.push(Ct(n)+"="+Ct(Rn(t))))}),e.join("&")}}}function zn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,i,r){if(null===n||z(n))return;H(n)?x(n,function(e,n){t(e,i+"["+(N(e)?n:"")+"]")}):N(n)&&!B(n)?k(n,function(e,n){t(e,i+(r?"":"[")+n+(r?"":"]"))}):e.push(Ct(i)+"="+Ct(Rn(n)))}(t,"",!0),e.join("&")}}}function Ln(t,e){if(U(t)){var n=t.replace(Pn,"").trim();if(n){var i=e("Content-Type"),r=i&&0===i.indexOf(On);if(r||(a=(o=n).match(qn))&&Mn[a[0]].test(o))try{t=mt(n)}catch(e){if(!r)return t;throw In("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}var o,a;return t}function Nn(t){var e,n=Nt();function i(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return U(t)?x(t.split("\n"),function(t){e=t.indexOf(":"),i(c(tt(t.substr(0,e))),tt(t.substr(e+1)))}):N(t)&&x(t,function(t,e){i(c(e),tt(t))}),n}function Fn(t){var e;return function(n){if(e||(e=Nn(t)),n){var i=e[c(n)];return void 0===i&&(i=null),i}return e}}function Un(t,e,n,i){return G(i)?i(t,e,n):(x(i,function(i){t=i(t,e,n)}),t)}function Vn(t){return 200<=t&&t<300}function Bn(){var t=this.defaults={transformResponse:[Ln],transformRequest:[function(t){return!N(t)||(e=t,"[object File]"===g.call(e))||function(t){return"[object Blob]"===g.call(t)}(t)||function(t){return"[object FormData]"===g.call(t)}(t)?t:ht(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Gt(Tn),put:Gt(Tn),patch:Gt(Tn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return L(t)?(e=!!t,this):e};var n=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(i,o,a,s,u,d,p,f){var _=s("$http");t.paramSerializer=U(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var h=[];function m(n){if(!N(n))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!U(f.valueOf(n.url)))throw r("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var s=j({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);s.headers=function(e){var n,i,r,o=t.headers,a=j({},e.headers);o=j({},o.common,o[c(e.method)]);t:for(n in o){for(r in i=c(n),a)if(c(r)===i)continue t;a[n]=o[n]}return function(t,e){var n,i={};return x(t,function(t,r){G(t)?null!=(n=t(e))&&(i[r]=n):i[r]=t}),i}(a,Gt(e))}(n),s.method=l(s.method),s.paramSerializer=U(s.paramSerializer)?p.get(s.paramSerializer):s.paramSerializer,i.$$incOutstandingRequestCount();var g=[],v=[],b=d.resolve(s);return x(h,function(t){(t.request||t.requestError)&&g.unshift(t.request,t.requestError),(t.response||t.responseError)&&v.push(t.response,t.responseError)}),b=y(b,g),b=(b=y(b=b.then(function(n){var i=n.headers,r=Un(n.data,Fn(i),void 0,n.transformRequest);z(r)&&x(i,function(t,e){"content-type"===c(e)&&delete i[e]});z(n.withCredentials)&&!z(t.withCredentials)&&(n.withCredentials=t.withCredentials);return function(n,i){var r,s,l=d.defer(),p=l.promise,h=n.headers,g="jsonp"===c(n.method),v=n.url;g?v=f.getTrustedResourceUrl(v):U(v)||(v=f.valueOf(v));v=function(t,e){return e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}(v,n.paramSerializer(n.params)),g&&(v=function(t,e){if(/[&?][^=]+=JSON_CALLBACK/.test(t))throw In("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(new RegExp("[&?]"+e+"=").test(t))throw In("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t);return t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(v,n.jsonpCallbackParam));m.pendingRequests.push(n),p.then(k,k),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(r=N(n.cache)?n.cache:N(t.cache)?t.cache:_);r&&(L(s=r.get(v))?X(s)?s.then($,$):H(s)?w(s[1],s[0],Gt(s[2]),s[3],s[4]):w(s,200,{},"OK","complete"):r.put(v,p));if(z(s)){var b=ar(n.url)?a()[n.xsrfCookieName||t.xsrfCookieName]:void 0;b&&(h[n.xsrfHeaderName||t.xsrfHeaderName]=b),o(n.method,v,i,function(t,n,i,o,a){r&&(Vn(t)?r.put(v,[t,n,Nn(i),o,a]):r.remove(v));function s(){w(n,t,i,o,a)}e?u.$applyAsync(s):(s(),u.$$phase||u.$apply())},h,n.timeout,n.withCredentials,n.responseType,y(n.eventHandlers),y(n.uploadEventHandlers))}return p;function y(t){if(t){var n={};return x(t,function(t,i){n[i]=function(n){function i(){t(n)}e?u.$applyAsync(i):u.$$phase?i():u.$apply(i)}}),n}}function w(t,e,i,r,o){(Vn(e=e>=-1?e:0)?l.resolve:l.reject)({data:t,status:e,headers:Fn(i),config:n,statusText:r,xhrStatus:o})}function $(t){w(t.data,t.status,Gt(t.headers()),t.statusText,t.xhrStatus)}function k(){var t=m.pendingRequests.indexOf(n);-1!==t&&m.pendingRequests.splice(t,1)}}(n,r).then(w,w)}),v)).finally(function(){i.$$completeOutstandingRequest(P)});function y(t,e){for(var n=0,i=e.length;n<i;){var r=e[n++],o=e[n++];t=t.then(r,o)}return e.length=0,t}function w(t){var e=j({},t);return e.data=Un(t.data,t.headers,t.status,s.transformResponse),Vn(t.status)?e:d.reject(e)}}return x(n,function(t){h.unshift(U(t)?p.get(t):p.invoke(t))}),m.pendingRequests=[],function(t){x(arguments,function(t){m[t]=function(e,n){return m(j({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){x(arguments,function(t){m[t]=function(e,n,i){return m(j({},i||{},{method:t,url:e,data:n}))}})}("post","put","patch"),m.defaults=t,m}]}function Hn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Wn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,i){return function(t,e,n,i,r){return function(o,a,s,l,u,d,p,f,_,h){if(a=a||t.url(),"jsonp"===c(o))var m=i.createCallback(a),g=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=r.createElement("script"),a=null;return o.type="text/javascript",o.src=t,o.async=!0,a=function(t){o.removeEventListener("load",a),o.removeEventListener("error",a),r.body.removeChild(o),o=null;var s=-1,c="unknown";t&&("load"!==t.type||i.wasCalled(e)||(t={type:"error"}),c=t.type,s="error"===t.type?404:200),n&&n(s,c)},o.addEventListener("load",a),o.addEventListener("error",a),r.body.appendChild(o),a}(a,m,function(t,e){var n=200===t&&i.getResponse(m);w(l,t,n,"",e,"complete"),i.removeCallback(m)});else{var v=e(o,a);v.open(o,a,!0),x(u,function(t,e){L(t)&&v.setRequestHeader(e,t)}),v.onload=function(){var t=v.statusText||"",e="response"in v?v.response:v.responseText,n=1223===v.status?204:v.status;0===n&&(n=e?200:"file"===or(a).protocol?404:0),w(l,n,e,v.getAllResponseHeaders(),t,"complete")};if(v.onerror=function(){w(l,-1,null,null,"","error")},v.onabort=function(){w(l,-1,null,null,"","abort")},v.ontimeout=function(){w(l,-1,null,null,"","timeout")},x(_,function(t,e){v.addEventListener(e,t)}),x(h,function(t,e){v.upload.addEventListener(e,t)}),p&&(v.withCredentials=!0),f)try{v.responseType=f}catch(t){if("json"!==f)throw t}v.send(z(s)?null:s)}if(d>0)var b=n(y,d);else X(d)&&d.then(y);function y(){g&&g(),v&&v.abort()}function w(t,e,i,r,o,a){L(b)&&n.cancel(b),g=v=null,t(e,i,r,o,a)}}}(t,i,t.defer,e,n[0])}]}var Gn=y.$interpolateMinErr=r("$interpolate");function Yn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){var o=t.length,a=e.length,s=new RegExp(t.replace(/./g,l),"g"),c=new RegExp(e.replace(/./g,l),"g");function l(t){return"\\\\\\"+t}function u(n){return n.replace(s,t).replace(c,e)}function d(t,e,n,i){var r=t.$watch(function(t){return r(),i(t)},e,n);return r}function p(s,c,l,p){if(!s.length||-1===s.indexOf(t)){var f;if(!c)(f=R(u(s))).exp=s,f.expressions=[],f.$$watchDelegate=d;return f}p=!!p;for(var _,h,m,g=0,v=[],b=[],y=s.length,w=[],$=[];g<y;){if(-1===(_=s.indexOf(t,g))||-1===(h=s.indexOf(e,_+o))){g!==y&&w.push(u(s.substring(g)));break}g!==_&&w.push(u(s.substring(g,_))),m=s.substring(_+o,h),v.push(m),b.push(n(m,C)),g=h+a,$.push(w.length),w.push("")}if(l&&w.length>1&&Gn.throwNoconcat(s),!c||v.length){var x=function(t){for(var e=0,n=v.length;e<n;e++){if(p&&z(t[e]))return;w[$[e]]=t[e]}return w.join("")},k=function(t){return l?r.getTrusted(l,t):r.valueOf(t)};return j(function(t){var e=0,n=v.length,r=new Array(n);try{for(;e<n;e++)r[e]=b[e](t);return x(r)}catch(t){i(Gn.interr(s,t))}},{exp:s,expressions:v,$$watchDelegate:function(t,e){var n;return t.$watchGroup(b,function(i,r){var o=x(i);G(e)&&e.call(this,o,i!==r?n:o,t),n=o})}})}function C(t){try{return t=k(t),p&&!L(t)?t:Ft(t)}catch(t){i(Gn.interr(s,t))}}}return p.startSymbol=function(){return t},p.endSymbol=function(){return e},p}]}function Kn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,i,r){var o={};function a(a,s,c,l){var u=arguments.length>4,d=u?pt(arguments,4):[],p=e.setInterval,f=e.clearInterval,_=0,h=L(l)&&!l,m=(h?i:n).defer(),g=m.promise;return c=L(c)?c:0,g.$$intervalId=p(function(){h?r.defer(v):t.$evalAsync(v),m.notify(_++),c>0&&_>=c&&(m.resolve(_),f(g.$$intervalId),delete o[g.$$intervalId]),h||t.$apply()},s),o[g.$$intervalId]=m,g;function v(){u?a.apply(null,d):a(_)}}return a.cancel=function(t){return!!(t&&t.$$intervalId in o)&&(Fi(o[t.$$intervalId].promise),o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0)},a}]}Gn.throwNoconcat=function(t){throw Gn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Gn.interr=function(t,e){return Gn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Jn=function(){this.$get=function(){var t=y.callbacks,e={};return{createCallback:function(n){var i="_"+(t.$$counter++).toString(36),r="angular.callbacks."+i,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(i);return e[r]=t[i]=o,r},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var i=e[n];delete t[i.id],delete e[n]}}}},Qn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Xn={http:80,https:443,ftp:21},Zn=r("$location");function ti(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=kt(e[n]);return e.join("/")}function ei(t,e){var n=or(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=T(n.port)||Xn[n.protocol]||null}var ni=/^\s*[\\/]{2,}/;function ii(t,e){if(ni.test(t))throw Zn("badpath",'Invalid url "{0}".',t);var n="/"!==t.charAt(0);n&&(t="/"+t);var i=or(t);e.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),e.$$search=$t(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function ri(t,e){return t.slice(0,e.length)===e}function oi(t,e){if(ri(e,t))return e.substr(t.length)}function ai(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function si(t){return t.replace(/(#.+)|#$/,"$1")}function ci(t,e,n){this.$$html5=!0,n=n||"",ei(t,this),this.$$parse=function(t){var n=oi(e,t);if(!U(n))throw Zn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);ii(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=xt(this.$$search),n=this.$$hash?"#"+kt(this.$$hash):"";this.$$url=ti(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(L(o=oi(t,i))?(a=o,s=n&&L(o=oi(n,o))?e+(oi("/",o)||o):t+a):L(o=oi(e,i))?s=e+o:e===i+"/"&&(s=e),s&&this.$$parse(s),!!s);var o,a,s}}function li(t,e,n){ei(t,this),this.$$parse=function(i){var r,o=oi(t,i)||oi(e,i);z(o)||"#"!==o.charAt(0)?this.$$html5?r=o:(r="",z(o)&&(t=i,this.replace())):z(r=oi(n,o))&&(r=o),ii(r,this),this.$$path=function(t,e,n){var i,r=/^\/[A-Z]:(\/.*)/;ri(e,n)&&(e=e.replace(n,""));if(r.exec(e))return t;return(i=r.exec(t))?i[1]:t}(this.$$path,r,t),this.$$compose()},this.$$compose=function(){var e=xt(this.$$search),i=this.$$hash?"#"+kt(this.$$hash):"";this.$$url=ti(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+(this.$$url?n+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,n){return ai(t)===ai(e)&&(this.$$parse(e),!0)}}function ui(t,e,n){this.$$html5=!0,li.apply(this,arguments),this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(t===ai(i)?o=i:(a=oi(e,i))?o=t+n+a:e===i+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,a},this.$$compose=function(){var e=xt(this.$$search),i=this.$$hash?"#"+kt(this.$$hash):"";this.$$url=ti(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+n+this.$$url,this.$$urlUpdatedByLocation=!0}}var di={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:pi("$$absUrl"),url:function(t){if(z(t))return this.$$url;var e=Qn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:pi("$$protocol"),host:pi("$$host"),port:pi("$$port"),path:fi("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(U(t)||V(t))t=t.toString(),this.$$search=$t(t);else{if(!N(t))throw Zn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");x(t=at(t,{}),function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:z(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:fi("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function pi(t){return function(){return this[t]}}function fi(t,e){return function(n){return z(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function _i(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return L(e)?(t=e,this):t},this.html5Mode=function(t){return Q(t)?(e.enabled=t,this):N(t)?(Q(t.enabled)&&(e.enabled=t.enabled),Q(t.requireBase)&&(e.requireBase=t.requireBase),(Q(t.rewriteLinks)||U(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,a){var s,c,l,u,p=i.baseHref(),f=i.url();if(e.enabled){if(!p&&e.requireBase)throw Zn("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=(u=f).substring(0,u.indexOf("/",u.indexOf("//")+2))+(p||"/"),c=r.history?ci:ui}else l=ai(f),c=li;var _=function(t){return t.substr(0,ai(t).lastIndexOf("/")+1)}(l);(s=new c(l,_,"#"+t)).$$parseLinkUrl(f,f),s.$$state=i.state();var h=/^\s*(javascript|mailto):/i;function m(t,e,n){var r=s.url(),o=s.$$state;try{i.url(t,e,n),s.$$state=i.state()}catch(t){throw s.url(r),s.$$state=o,t}}o.on("click",function(t){var r=e.rewriteLinks;if(r&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var c=d(t.target);"a"!==it(c[0]);)if(c[0]===o[0]||!(c=c.parent())[0])return;if(!U(r)||!z(c.attr(r))){var l=c.prop("href"),u=c.attr("href")||c.attr("xlink:href");N(l)&&"[object SVGAnimatedString]"===l.toString()&&(l=or(l.animVal).href),h.test(l)||!l||c.attr("target")||t.isDefaultPrevented()||s.$$parseLinkUrl(l,u)&&(t.preventDefault(),s.absUrl()!==i.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),si(s.absUrl())!==si(f)&&i.url(s.absUrl(),!0);var g=!0;return i.onUrlChange(function(t,e){ri(t,_)?(n.$evalAsync(function(){var i,r=s.absUrl(),o=s.$$state;t=si(t),s.$$parse(t),s.$$state=e,i=n.$broadcast("$locationChangeStart",t,r,e,o).defaultPrevented,s.absUrl()===t&&(i?(s.$$parse(r),s.$$state=o,m(r,!1,o)):(g=!1,v(r,o)))}),n.$$phase||n.$digest()):a.location.href=t}),n.$watch(function(){if(g||s.$$urlUpdatedByLocation){s.$$urlUpdatedByLocation=!1;var t=si(i.url()),e=si(s.absUrl()),o=i.state(),a=s.$$replace,c=t!==e||s.$$html5&&r.history&&o!==s.$$state;(g||c)&&(g=!1,n.$evalAsync(function(){var e=s.absUrl(),i=n.$broadcast("$locationChangeStart",e,t,s.$$state,o).defaultPrevented;s.absUrl()===e&&(i?(s.$$parse(t),s.$$state=o):(c&&m(e,a,o===s.$$state?null:s.$$state),v(t,o)))}))}s.$$replace=!1}),s;function v(t,e){n.$broadcast("$locationChangeSuccess",s.absUrl(),t,s.$$state,e)}}]}function hi(){var t=!0,e=this;this.debugEnabled=function(e){return L(e)?(t=e,this):t},this.$get=["$window",function(n){var i,r=u||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:(i=o("debug"),function(){t&&i.apply(e,arguments)})};function o(t){var e=n.console||{},i=e[t]||e.log||P;return function(){var t=[];return x(arguments,function(e){t.push(function(t){return W(t)&&(t.stack&&r?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}(e))}),Function.prototype.apply.call(i,e,t)}}}]}x([ui,li,ci],function(t){t.prototype=Object.create(di),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==ci||!this.$$html5)throw Zn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=z(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var mi=r("$parse"),gi={}.constructor.prototype.valueOf;function vi(t){return t+""}var bi=Nt();x("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){bi[t]=!0});var yi={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},wi=function(t){this.options=t};wi.prototype={constructor:wi,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=bi[e],o=bi[n],a=bi[i];if(r||o||a){var s=a?i:o?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||""===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=L(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw mi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=c(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=yi[o]||o}r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var $i=function(t,e){this.lexer=t,this.options=e};function xi(t,e){return void 0!==t?t:e}function ki(t,e){return void 0===t?e:void 0===e?t:t+e}$i.Program="Program",$i.ExpressionStatement="ExpressionStatement",$i.AssignmentExpression="AssignmentExpression",$i.ConditionalExpression="ConditionalExpression",$i.LogicalExpression="LogicalExpression",$i.BinaryExpression="BinaryExpression",$i.UnaryExpression="UnaryExpression",$i.CallExpression="CallExpression",$i.MemberExpression="MemberExpression",$i.Identifier="Identifier",$i.Literal="Literal",$i.ArrayExpression="ArrayExpression",$i.Property="Property",$i.ObjectExpression="ObjectExpression",$i.ThisExpression="ThisExpression",$i.LocalsExpression="LocalsExpression",$i.NGValueParameter="NGValueParameter",$i.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:$i.Program,body:t}},expressionStatement:function(){return{type:$i.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!ji(t))throw mi("lval","Trying to assign a value to a non l-value");t={type:$i.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:$i.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:$i.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:$i.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:$i.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:$i.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:$i.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:$i.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:$i.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=at(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:$i.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:$i.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:$i.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:$i.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:$i.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:$i.Identifier,name:t.text}},constant:function(){return{type:$i.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:$i.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:$i.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:$i.ObjectExpression,properties:e}},throwError:function(t,e){throw mi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw mi("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw mi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===i||a===r||!e&&!n&&!i&&!r)return o}return!1},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:$i.ThisExpression},$locals:{type:$i.LocalsExpression}}};var Ci=1,Si=2;function Ai(t,e,n){var i,r,o,a=t.isPure=function(t,e){switch(t.type){case $i.MemberExpression:if(t.computed)return!1;break;case $i.UnaryExpression:return Ci;case $i.BinaryExpression:return"+"!==t.operator&&Ci;case $i.CallExpression:return!1}return void 0===e?Si:e}(t,n);switch(t.type){case $i.Program:i=!0,x(t.body,function(t){Ai(t.expression,e,a),i=i&&t.expression.constant}),t.constant=i;break;case $i.Literal:t.constant=!0,t.toWatch=[];break;case $i.UnaryExpression:Ai(t.argument,e,a),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case $i.BinaryExpression:Ai(t.left,e,a),Ai(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case $i.LogicalExpression:Ai(t.left,e,a),Ai(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case $i.ConditionalExpression:Ai(t.test,e,a),Ai(t.alternate,e,a),Ai(t.consequent,e,a),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case $i.Identifier:t.constant=!1,t.toWatch=[t];break;case $i.MemberExpression:Ai(t.object,e,a),t.computed&&Ai(t.property,e,a),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case $i.CallExpression:o=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),i=o,r=[],x(t.arguments,function(t){Ai(t,e,a),i=i&&t.constant,r.push.apply(r,t.toWatch)}),t.constant=i,t.toWatch=o?r:[t];break;case $i.AssignmentExpression:Ai(t.left,e,a),Ai(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case $i.ArrayExpression:i=!0,r=[],x(t.elements,function(t){Ai(t,e,a),i=i&&t.constant,r.push.apply(r,t.toWatch)}),t.constant=i,t.toWatch=r;break;case $i.ObjectExpression:i=!0,r=[],x(t.properties,function(t){Ai(t.value,e,a),i=i&&t.value.constant,r.push.apply(r,t.value.toWatch),t.computed&&(Ai(t.key,e,!1),i=i&&t.key.constant,r.push.apply(r,t.key.toWatch))}),t.constant=i,t.toWatch=r;break;case $i.ThisExpression:case $i.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Ei(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function ji(t){return t.type===$i.Identifier||t.type===$i.MemberExpression}function Oi(t){if(1===t.body.length&&ji(t.body[0].expression))return{type:$i.AssignmentExpression,left:t.body[0].expression,right:{type:$i.NGValueParameter},operator:"="}}function Ti(t){this.$filter=t}function qi(t){this.$filter=t}function Mi(t,e,n){this.ast=new $i(t,n),this.astCompiler=n.csp?new qi(e):new Ti(e)}function Pi(t){return G(t.valueOf)?t.valueOf():gi.call(t)}function Ii(){var t,e,n=Nt(),i={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){i[t]=e},this.setIdentifierFns=function(n,i){return t=n,e=i,this},this.$get=["$filter",function(r){var o={csp:lt().noUnsafeEval,literals:at(i),isIdentifierStart:G(t)&&t,isIdentifierContinue:G(e)&&e};return function(t,e){var i,a,p;switch(typeof t){case"string":if(t=t.trim(),!(i=n[p=t])){":"===t.charAt(0)&&":"===t.charAt(1)&&(a=!0,t=t.substring(2));var f=new wi(o),_=new Mi(f,r,o);(i=_.parse(t)).constant?i.$$watchDelegate=u:a?i.$$watchDelegate=i.literal?l:c:i.inputs&&(i.$$watchDelegate=s),n[p]=i}return d(i,e);case"function":return d(t,e);default:return d(P,e)}};function a(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Pi(t))&&!n)&&(t===e||t!=t&&e!=e)}function s(t,e,n,i,r){var o,s=i.inputs;if(1===s.length){var c=a;return s=s[0],t.$watch(function(t){var e=s(t);return a(e,c,s.isPure)||(o=i(t,void 0,void 0,[e]),c=e&&Pi(e)),o},e,n,r)}for(var l=[],u=[],d=0,p=s.length;d<p;d++)l[d]=a,u[d]=null;return t.$watch(function(t){for(var e=!1,n=0,r=s.length;n<r;n++){var c=s[n](t);(e||(e=!a(c,l[n],s[n].isPure)))&&(u[n]=c,l[n]=c&&Pi(c))}return e&&(o=i(t,void 0,void 0,u)),o},e,n,r)}function c(t,e,n,i,r){var o,a;return o=i.inputs?s(t,c,n,i,r):t.$watch(function(t){return i(t)},c,n);function c(t,n,i){a=t,G(e)&&e(t,n,i),L(t)&&i.$$postDigest(function(){L(a)&&o()})}}function l(t,e,n,i){var r,o;return r=t.$watch(function(t){return i(t)},function(t,n,i){o=t,G(e)&&e(t,n,i),a(t)&&i.$$postDigest(function(){a(o)&&r()})},n);function a(t){var e=!0;return x(t,function(t){L(t)||(e=!1)}),e}}function u(t,e,n,i){var r=t.$watch(function(t){return r(),i(t)},e,n);return r}function d(t,e){if(!e)return t;var n=t.$$watchDelegate,i=!1,r=n!==l&&n!==c?function(n,r,o,a){var s=i&&a?a[0]:t(n,r,o,a);return e(s,n,r)}:function(n,i,r,o){var a=t(n,i,r,o),s=e(a,n,i);return L(a)?s:a};return i=!t.inputs,n&&n!==s?(r.$$watchDelegate=n,r.inputs=t.inputs):e.$stateful||(r.$$watchDelegate=s,r.inputs=t.inputs?t.inputs:[t]),r.inputs&&(r.inputs=r.inputs.map(function(t){return t.isPure===Si?function(e){return t(e)}:t})),r}}]}function Ri(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return zi(function(t){e.$evalAsync(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return L(e)?(t=e,this):t}}function Di(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return zi(function(t){e.defer(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return L(e)?(t=e,this):t}}function zi(t,e,n){var i=r("$q",TypeError),o=0,a=[];function s(){return new c}function c(){var t=this.promise=new l;this.resolve=function(e){p(t,e)},this.reject=function(e){f(t,e)},this.notify=function(e){h(t,e)}}function l(){this.$$state={status:0}}function u(){for(;!o&&a.length;){var t=a.shift();if(!Li(t)){Ni(t);var n="Possibly unhandled rejection: "+Yt(t.value);W(t.value)?e(t.value,n):e(n)}}}function d(e){!n||e.pending||2!==e.status||Li(e)||(0===o&&0===a.length&&t(u),a.push(e)),!e.processScheduled&&e.pending&&(e.processScheduled=!0,++o,t(function(){!function(e){var i,r,a;a=e.pending,e.processScheduled=!1,e.pending=void 0;try{for(var s=0,c=a.length;s<c;++s){Ni(e),r=a[s][0],i=a[s][e.status];try{G(i)?p(r,i(e.value)):1===e.status?p(r,e.value):f(r,e.value)}catch(t){f(r,t)}}}finally{--o,n&&0===o&&t(u)}}(e)}))}function p(t,e){t.$$state.status||(e===t?_(t,i("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):function t(e,n){var i;var r=!1;try{(N(n)||G(n))&&(i=n.then),G(i)?(e.$$state.status=-1,i.call(n,function o(t){if(r)return;r=!0,function t(e,n){var i;var r=!1;try{(N(n)||G(n))&&(i=n.then),G(i)?(e.$$state.status=-1,i.call(n,o,a,function(t){h(e,t)})):(e.$$state.value=n,e.$$state.status=1,d(e.$$state))}catch(t){a(t)}function o(n){r||(r=!0,t(e,n))}function a(t){r||(r=!0,_(e,t))}}(e,t)},a,function(t){h(e,t)})):(e.$$state.value=n,e.$$state.status=1,d(e.$$state))}catch(t){a(t)}function o(n){r||(r=!0,t(e,n))}function a(t){r||(r=!0,_(e,t))}}(t,e))}function f(t,e){t.$$state.status||_(t,e)}function _(t,e){t.$$state.value=e,t.$$state.status=2,d(t.$$state)}function h(n,i){var r=n.$$state.pending;n.$$state.status<=0&&r&&r.length&&t(function(){for(var t,n,o=0,a=r.length;o<a;o++){n=r[o][0],t=r[o][3];try{h(n,G(t)?t(i):i)}catch(t){e(t)}}})}function m(t){var e=new l;return f(e,t),e}function g(t,e,n){var i=null;try{G(n)&&(i=n())}catch(t){return m(t)}return X(i)?i.then(function(){return e(t)},m):e(t)}function v(t,e,n,i){var r=new l;return p(r,t),r.then(e,n,i)}j(l.prototype,{then:function(t,e,n){if(z(t)&&z(e)&&z(n))return this;var i=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),this.$$state.status>0&&d(this.$$state),i},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return g(e,b,t)},function(e){return g(e,m,t)},e)}});var b=v;function y(t){if(!G(t))throw i("norslvr","Expected resolverFn, got '{0}'",t);var e=new l;return t(function(t){p(e,t)},function(t){f(e,t)}),e}return y.prototype=l.prototype,y.defer=s,y.reject=m,y.when=v,y.resolve=b,y.all=function(t){var e=new l,n=0,i=H(t)?[]:{};return x(t,function(t,r){n++,v(t).then(function(t){i[r]=t,--n||p(e,i)},function(t){f(e,t)})}),0===n&&p(e,i),e},y.race=function(t){var e=s();return x(t,function(t){v(t).then(e.resolve,e.reject)}),e.promise},y}function Li(t){return!!t.pur}function Ni(t){t.pur=!0}function Fi(t){Ni(t.$$state)}function Ui(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(t){var e=n(t);return function(){i(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=r,o}]}function Vi(){var t=10,e=r("$rootScope"),n=null,i=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(r,o,a){function c(t){t.currentScope.$$destroyed=!0}function l(){this.$id=S(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}l.prototype={constructor:l,$new:function(t,e){var n;return e=e||this,t?(n=new l).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=S(),this.$$ChildScope=null}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",c),n},$watch:function(t,e,i,r){var a=o(t);if(a.$$watchDelegate)return a.$$watchDelegate(this,e,i,a,t);var s=this,c=s.$$watchers,l={fn:e,last:y,get:a,exp:r||t,eq:!!i};return n=null,G(e)||(l.fn=P),c||((c=s.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(l),c.$$digestWatchIndex++,v(this,1),function(){var t=ot(c,l);t>=0&&(v(s,-1),t<c.$$digestWatchIndex&&c.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),i=new Array(t.length),r=[],o=this,a=!1,s=!0;if(!t.length){var c=!0;return o.$evalAsync(function(){c&&e(i,i,o)}),function(){c=!1}}if(1===t.length)return this.$watch(t[0],function(t,r,o){i[0]=t,n[0]=r,e(i,t===r?i:n,o)});function l(){a=!1,s?(s=!1,e(i,i,o)):e(i,n,o)}return x(t,function(t,e){var s=o.$watch(t,function(t,r){i[e]=t,n[e]=r,a||(a=!0,o.$evalAsync(l))});r.push(s)}),function(){for(;r.length;)r.shift()()}},$watchCollection:function(t,e){h.$stateful=!0;var n,i,r,a=this,c=e.length>1,l=0,u=o(t,h),d=[],p={},f=!0,_=0;function h(t){var e,r,o,a;if(!z(n=t)){if(N(n))if($(n)){i!==d&&(_=(i=d).length=0,l++),e=n.length,_!==e&&(l++,i.length=_=e);for(var c=0;c<e;c++)a=i[c],o=n[c],a!=a&&o!=o||a===o||(l++,i[c]=o)}else{for(r in i!==p&&(i=p={},_=0,l++),e=0,n)s.call(n,r)&&(e++,o=n[r],a=i[r],r in i?a!=a&&o!=o||a===o||(l++,i[r]=o):(_++,i[r]=o,l++));if(_>e)for(r in l++,i)s.call(n,r)||(_--,delete i[r])}else i!==n&&(i=n,l++);return l}}return this.$watch(u,function(){if(f?(f=!1,e(n,n,a)):e(n,r,a),c)if(N(n))if($(n)){r=new Array(n.length);for(var t=0;t<n.length;t++)r[t]=n[t]}else for(var i in r={},n)s.call(n,i)&&(r[i]=n[i]);else r=n})},$digest:function(){var o,s,c,l,u,_,v,b,$,x=t,k=[];m("$digest"),a.$$checkUrlChange(),this===d&&null!==i&&(a.defer.cancel(i),w()),n=null;do{u=!1,v=this;for(var C=0;C<p.length;C++){try{(0,($=p[C]).fn)($.scope,$.locals)}catch(t){r(t)}n=null}p.length=0;t:do{if(l=v.$$watchers)for(l.$$digestWatchIndex=l.length;l.$$digestWatchIndex--;)try{if(o=l[l.$$digestWatchIndex])if((s=(0,o.get)(v))===(c=o.last)||(o.eq?ct(s,c):q(s)&&q(c))){if(o===n){u=!1;break t}}else u=!0,n=o,o.last=o.eq?at(s,null):s,(0,o.fn)(s,c===y?s:c,v),x<5&&(k[b=4-x]||(k[b]=[]),k[b].push({msg:G(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:s,oldVal:c}))}catch(t){r(t)}if(!(_=v.$$watchersCount&&v.$$childHead||v!==this&&v.$$nextSibling))for(;v!==this&&!(_=v.$$nextSibling);)v=v.$parent}while(v=_);if((u||p.length)&&!x--)throw g(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,k)}while(u||p.length);for(g();h<f.length;)try{f[h++]()}catch(t){r(t)}f.length=h=0,a.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===d&&a.$$applicationDestroyed(),v(this,-this.$$watchersCount),this.$$listenerCount)b(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=P,this.$on=this.$watch=this.$watchGroup=function(){return P},this.$$listeners={},this.$$nextSibling=null,function t(e){9===u&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return o(t)(this,e)},$evalAsync:function(t,e){d.$$phase||p.length||a.defer(function(){p.length&&d.$digest()}),p.push({scope:this,fn:o(t),locals:e})},$$postDigest:function(t){f.push(t)},$apply:function(t){try{m("$apply");try{return this.$eval(t)}finally{g()}}catch(t){r(t)}finally{try{d.$digest()}catch(t){throw r(t),t}}},$applyAsync:function(t){var e=this;t&&_.push(function(){e.$eval(t)}),t=o(t),null===i&&(i=a.defer(function(){d.$apply(w)}))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var i=this;do{i.$$listenerCount[t]||(i.$$listenerCount[t]=0),i.$$listenerCount[t]++}while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);-1!==i&&(n[i]=null,b(r,1,t))}},$emit:function(t,e){var n,i,o,a=[],s=this,c=!1,l={name:t,targetScope:s,stopPropagation:function(){c=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},u=dt([l],arguments,1);do{for(n=s.$$listeners[t]||a,l.currentScope=s,i=0,o=n.length;i<o;i++)if(n[i])try{n[i].apply(null,u)}catch(t){r(t)}else n.splice(i,1),i--,o--;if(c)return l.currentScope=null,l;s=s.$parent}while(s);return l.currentScope=null,l},$broadcast:function(t,e){var n=this,i=this,o={name:t,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return o;for(var a,s,c,l=dt([o],arguments,1);n=i;){for(o.currentScope=n,s=0,c=(a=n.$$listeners[t]||[]).length;s<c;s++)if(a[s])try{a[s].apply(null,l)}catch(t){r(t)}else a.splice(s,1),s--,c--;if(!(i=n.$$listenerCount[t]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(i=n.$$nextSibling);)n=n.$parent}return o.currentScope=null,o}};var d=new l,p=d.$$asyncQueue=[],f=d.$$postDigestQueue=[],_=d.$$applyAsyncQueue=[],h=0;return d;function m(t){if(d.$$phase)throw e("inprog","{0} already in progress",d.$$phase);d.$$phase=t}function g(){d.$$phase=null}function v(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function b(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function y(){}function w(){for(;_.length;)try{_.shift()()}catch(t){r(t)}i=null}}]}function Bi(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return L(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return L(t)?(e=t,this):e},this.$get=function(){return function(n,i){var r,o=i?e:t;return""===(r=or(n).href)||r.match(o)?n:"unsafe:"+r}}}Ti.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Ai(t,e.$filter);var n,i="";if(this.stage="assign",n=Oi(t)){this.state.computing="assign";var r=this.nextId();this.recurse(n,r),this.return_(r),i="fn.assign="+this.generateFunction("assign","s,v,l")}var o=Ei(t.body);e.stage="inputs",x(o,function(t,n){var i="fn"+n;e.state[i]={vars:[],body:[],own:{}},e.state.computing=i;var r=e.nextId();e.recurse(t,r),e.return_(r),e.state.inputs.push({name:i,isPure:t.isPure}),t.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(t);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+i+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,vi,xi,ki);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return x(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(t){return t.name}).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return x(this.state.filters,function(n,i){t.push(n+"=$filter("+e.escape(i)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,i,r,o){var a,s,c,l,u,d=this;if(i=i||P,!o&&L(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,i,r,!0));switch(t.type){case $i.Program:x(t.body,function(e,n){d.recurse(e.expression,void 0,void 0,function(t){s=t}),n!==t.body.length-1?d.current().body.push(s,";"):d.return_(s)});break;case $i.Literal:l=this.escape(t.value),this.assign(e,l),i(e||l);break;case $i.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){s=t}),l=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,l),i(l);break;case $i.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){s=t}),l="+"===t.operator?this.plus(a,s):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(s,0):"("+a+")"+t.operator+"("+s+")",this.assign(e,l),i(l);break;case $i.LogicalExpression:e=e||this.nextId(),d.recurse(t.left,e),d.if_("&&"===t.operator?e:d.not(e),d.lazyRecurse(t.right,e)),i(e);break;case $i.ConditionalExpression:e=e||this.nextId(),d.recurse(t.test,e),d.if_(e,d.lazyRecurse(t.alternate,e),d.lazyRecurse(t.consequent,e)),i(e);break;case $i.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",t.name)),function(){d.if_("inputs"===d.stage||"s",function(){r&&1!==r&&d.if_(d.isNull(d.nonComputedMember("s",t.name)),d.lazyAssign(d.nonComputedMember("s",t.name),"{}")),d.assign(e,d.nonComputedMember("s",t.name))})},e&&d.lazyAssign(e,d.nonComputedMember("l",t.name))),i(e);break;case $i.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),d.recurse(t.object,a,void 0,function(){d.if_(d.notNull(a),function(){t.computed?(s=d.nextId(),d.recurse(t.property,s),d.getStringValue(s),r&&1!==r&&d.if_(d.not(d.computedMember(a,s)),d.lazyAssign(d.computedMember(a,s),"{}")),l=d.computedMember(a,s),d.assign(e,l),n&&(n.computed=!0,n.name=s)):(r&&1!==r&&d.if_(d.isNull(d.nonComputedMember(a,t.property.name)),d.lazyAssign(d.nonComputedMember(a,t.property.name),"{}")),l=d.nonComputedMember(a,t.property.name),d.assign(e,l),n&&(n.computed=!1,n.name=t.property.name))},function(){d.assign(e,"undefined")}),i(e)},!!r);break;case $i.CallExpression:e=e||this.nextId(),t.filter?(s=d.filter(t.callee.name),c=[],x(t.arguments,function(t){var e=d.nextId();d.recurse(t,e),c.push(e)}),l=s+"("+c.join(",")+")",d.assign(e,l),i(e)):(s=d.nextId(),a={},c=[],d.recurse(t.callee,s,a,function(){d.if_(d.notNull(s),function(){x(t.arguments,function(e){d.recurse(e,t.constant?void 0:d.nextId(),void 0,function(t){c.push(t)})}),l=a.name?d.member(a.context,a.name,a.computed)+"("+c.join(",")+")":s+"("+c.join(",")+")",d.assign(e,l)},function(){d.assign(e,"undefined")}),i(e)}));break;case $i.AssignmentExpression:s=this.nextId(),a={},this.recurse(t.left,void 0,a,function(){d.if_(d.notNull(a.context),function(){d.recurse(t.right,s),l=d.member(a.context,a.name,a.computed)+t.operator+s,d.assign(e,l),i(e||l)})},1);break;case $i.ArrayExpression:c=[],x(t.elements,function(e){d.recurse(e,t.constant?void 0:d.nextId(),void 0,function(t){c.push(t)})}),l="["+c.join(",")+"]",this.assign(e,l),i(e||l);break;case $i.ObjectExpression:c=[],u=!1,x(t.properties,function(t){t.computed&&(u=!0)}),u?(e=e||this.nextId(),this.assign(e,"{}"),x(t.properties,function(t){t.computed?(a=d.nextId(),d.recurse(t.key,a)):a=t.key.type===$i.Identifier?t.key.name:""+t.key.value,s=d.nextId(),d.recurse(t.value,s),d.assign(d.member(e,a,t.computed),s)})):(x(t.properties,function(e){d.recurse(e.value,t.constant?void 0:d.nextId(),void 0,function(t){c.push(d.escape(e.key.type===$i.Identifier?e.key.name:""+e.key.value)+":"+t)})}),l="{"+c.join(",")+"}",this.assign(e,l)),i(e||l);break;case $i.ThisExpression:this.assign(e,"s"),i(e||"s");break;case $i.LocalsExpression:this.assign(e,"l"),i(e||"l");break;case $i.NGValueParameter:this.assign(e,"v"),i(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var i=this.current().body;i.push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,i,r,o){var a=this;return function(){a.recurse(t,e,n,i,r,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(U(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(V(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw mi("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},qi.prototype={compile:function(t){var e,n,i=this;Ai(t,i.$filter),(e=Oi(t))&&(n=this.recurse(e));var r,o=Ei(t.body);o&&(r=[],x(o,function(t,e){var n=i.recurse(t);n.isPure=t.isPure,t.input=n,r.push(n),t.watchId=e}));var a=[];x(t.body,function(t){a.push(i.recurse(t.expression))});var s=0===t.body.length?P:1===t.body.length?a[0]:function(t,e){var n;return x(a,function(i){n=i(t,e)}),n};return n&&(s.assign=function(t,e,i){return n(t,i,e)}),r&&(s.inputs=r),s},recurse:function(t,e,n){var i,r,o,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case $i.Literal:return this.value(t.value,e);case $i.UnaryExpression:return r=this.recurse(t.argument),this["unary"+t.operator](r,e);case $i.BinaryExpression:case $i.LogicalExpression:return i=this.recurse(t.left),r=this.recurse(t.right),this["binary"+t.operator](i,r,e);case $i.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case $i.Identifier:return a.identifier(t.name,e,n);case $i.MemberExpression:return i=this.recurse(t.object,!1,!!n),t.computed||(r=t.property.name),t.computed&&(r=this.recurse(t.property)),t.computed?this.computedMember(i,r,e,n):this.nonComputedMember(i,r,e,n);case $i.CallExpression:return o=[],x(t.arguments,function(t){o.push(a.recurse(t))}),t.filter&&(r=this.$filter(t.callee.name)),t.filter||(r=this.recurse(t.callee,!0)),t.filter?function(t,n,i,a){for(var s=[],c=0;c<o.length;++c)s.push(o[c](t,n,i,a));var l=r.apply(void 0,s,a);return e?{context:void 0,name:void 0,value:l}:l}:function(t,n,i,a){var s,c=r(t,n,i,a);if(null!=c.value){for(var l=[],u=0;u<o.length;++u)l.push(o[u](t,n,i,a));s=c.value.apply(c.context,l)}return e?{value:s}:s};case $i.AssignmentExpression:return i=this.recurse(t.left,!0,1),r=this.recurse(t.right),function(t,n,o,a){var s=i(t,n,o,a),c=r(t,n,o,a);return s.context[s.name]=c,e?{value:c}:c};case $i.ArrayExpression:return o=[],x(t.elements,function(t){o.push(a.recurse(t))}),function(t,n,i,r){for(var a=[],s=0;s<o.length;++s)a.push(o[s](t,n,i,r));return e?{value:a}:a};case $i.ObjectExpression:return o=[],x(t.properties,function(t){t.computed?o.push({key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}):o.push({key:t.key.type===$i.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})}),function(t,n,i,r){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(t,n,i,r)]=o[s].value(t,n,i,r):a[o[s].key]=o[s].value(t,n,i,r);return e?{value:a}:a};case $i.ThisExpression:return function(t){return e?{value:t}:t};case $i.LocalsExpression:return function(t,n){return e?{value:n}:n};case $i.NGValueParameter:return function(t,n,i){return e?{value:i}:i}}},"unary+":function(t,e){return function(n,i,r,o){var a=t(n,i,r,o);return a=L(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,i,r,o){var a=t(n,i,r,o);return a=L(a)?-a:-0,e?{value:a}:a}},"unary!":function(t,e){return function(n,i,r,o){var a=!t(n,i,r,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(i,r,o,a){var s=ki(t(i,r,o,a),e(i,r,o,a));return n?{value:s}:s}},"binary-":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a),c=e(i,r,o,a),l=(L(s)?s:0)-(L(c)?c:0);return n?{value:l}:l}},"binary*":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)*e(i,r,o,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)/e(i,r,o,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)%e(i,r,o,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)===e(i,r,o,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)!==e(i,r,o,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)==e(i,r,o,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)!=e(i,r,o,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)<e(i,r,o,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)>e(i,r,o,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)<=e(i,r,o,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)>=e(i,r,o,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)&&e(i,r,o,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)||e(i,r,o,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,i){return function(r,o,a,s){var c=t(r,o,a,s)?e(r,o,a,s):n(r,o,a,s);return i?{value:c}:c}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(i,r,o,a){var s=r&&t in r?r:i;n&&1!==n&&s&&null==s[t]&&(s[t]={});var c=s?s[t]:void 0;return e?{context:s,name:t,value:c}:c}},computedMember:function(t,e,n,i){return function(r,o,a,s){var c,l,u=t(r,o,a,s);return null!=u&&(c=vi(c=e(r,o,a,s)),i&&1!==i&&u&&!u[c]&&(u[c]={}),l=u[c]),n?{context:u,name:c,value:l}:l}},nonComputedMember:function(t,e,n,i){return function(r,o,a,s){var c=t(r,o,a,s);i&&1!==i&&c&&null==c[e]&&(c[e]={});var l=null!=c?c[e]:void 0;return n?{context:c,name:e,value:l}:l}},inputs:function(t,e){return function(n,i,r,o){return o?o[e]:t(n,i,r)}}},Mi.prototype={constructor:Mi,parse:function(t){var e=this.ast.ast(t),n=this.astCompiler.compile(e);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===$i.Literal||t.body[0].expression.type===$i.ArrayExpression||t.body[0].expression.type===$i.ObjectExpression)}(e),n.constant=function(t){return t.constant}(e),n}};var Hi=r("$sce"),Wi={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Gi=/_([a-z])/g;function Yi(t){return t.replace(Gi,ne)}function Ki(t){var e=[];return L(t)&&x(t,function(t){e.push(function(t){if("self"===t)return t;if(U(t)){if(t.indexOf("***")>-1)throw Hi("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(Y(t))return new RegExp("^"+t.source+"$");throw Hi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function Ji(){this.SCE_CONTEXTS=Wi;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Ki(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=Ki(t)),e},this.$get=["$injector",function(n){var i=function(t){throw Hi("unsafe","Attempting to use an unsafe value in a safe context.")};function r(t,e){return"self"===t?ar(e):!!t.exec(e.href)}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}n.has("$sanitize")&&(i=n.get("$sanitize"));var a=o(),s={};return s[Wi.HTML]=o(a),s[Wi.CSS]=o(a),s[Wi.URL]=o(a),s[Wi.JS]=o(a),s[Wi.RESOURCE_URL]=o(s[Wi.URL]),{trustAs:function(t,e){var n=s.hasOwnProperty(t)?s[t]:null;if(!n)throw Hi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||z(e)||""===e)return e;if("string"!=typeof e)throw Hi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(n,o){if(null===o||z(o)||""===o)return o;var a=s.hasOwnProperty(n)?s[n]:null;if(a&&o instanceof a)return o.$$unwrapTrustedValue();if(n===Wi.RESOURCE_URL){if(function(n){var i,o,a=or(n.toString()),s=!1;for(i=0,o=t.length;i<o;i++)if(r(t[i],a)){s=!0;break}if(s)for(i=0,o=e.length;i<o;i++)if(r(e[i],a)){s=!1;break}return s}(o))return o;throw Hi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",o.toString())}if(n===Wi.HTML)return i(o);throw Hi("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof a?t.$$unwrapTrustedValue():t}}}]}function Qi(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&u<8)throw Hi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=Gt(Wi);i.isEnabled=function(){return t},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,t||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=I),i.parseAs=function(t,n){var r=e(n);return r.literal&&r.constant?r:e(n,function(e){return i.getTrusted(t,e)})};var r=i.parseAs,o=i.getTrusted,a=i.trustAs;return x(Wi,function(t,e){var n=c(e);i[Yi("parse_as_"+n)]=function(e){return r(t,e)},i[Yi("get_trusted_"+n)]=function(e){return o(t,e)},i[Yi("trust_as_"+n)]=function(e){return a(t,e)}}),i}]}function Xi(){this.$get=["$window","$document",function(t,e){var n={},i=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,r=T((/android (\d+)/.exec(c((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},s=a.body&&a.body.style,l=!1,d=!1;return s&&(l=!!("transition"in s||"webkitTransition"in s),d=!!("animation"in s||"webkitAnimation"in s)),{history:!(!i||r<4||o),hasEvent:function(t){if("input"===t&&u)return!1;if(z(n[t])){var e=a.createElement("div");n[t]="on"+t in e}return n[t]},csp:lt(),transitions:l,animations:d,android:r}}]}var Zi=r("$compile");function tr(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,i,r,o){function a(s,c){a.totalPendingRequests++,U(s)&&!z(n.get(s))||(s=o.getTrustedResourceUrl(s));var l=i.defaults&&i.defaults.transformResponse;return H(l)?l=l.filter(function(t){return t!==Ln}):l===Ln&&(l=null),i.get(s,j({cache:n,transformResponse:l},t)).finally(function(){a.totalPendingRequests--}).then(function(t){return n.put(s,t.data),t.data},function(t){c||(t=Zi("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText),e(t));return r.reject(t)})}return a.totalPendingRequests=0,a}]}function er(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var i={findBindings:function(t,e,n){var i=t.getElementsByClassName("ng-binding"),r=[];return x(i,function(t){var i=y.element(t).data("$binding");i&&x(i,function(i){n?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!==i.indexOf(e)&&r.push(t)})}),r},findModels:function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o="["+i[r]+"model"+(n?"=":"*=")+'"'+e+'"]',a=t.querySelectorAll(o);if(a.length)return a}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return i}]}function nr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){var o={};function a(a,s,c){G(a)||(c=s,s=a,a=P);var l,u=pt(arguments,3),d=L(c)&&!c,p=(d?i:n).defer(),f=p.promise;return l=e.defer(function(){try{p.resolve(a.apply(null,u))}catch(t){p.reject(t),r(t)}finally{delete o[f.$$timeoutId]}d||t.$apply()},s),f.$$timeoutId=l,o[l]=p,f}return a.cancel=function(t){return!!(t&&t.$$timeoutId in o)&&(Fi(o[t.$$timeoutId].promise),o[t.$$timeoutId].reject("canceled"),delete o[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},a}]}var ir=t.document.createElement("a"),rr=or(t.location.href);function or(t){var e=t;return u&&(ir.setAttribute("href",e),e=ir.href),ir.setAttribute("href",e),{href:ir.href,protocol:ir.protocol?ir.protocol.replace(/:$/,""):"",host:ir.host,search:ir.search?ir.search.replace(/^\?/,""):"",hash:ir.hash?ir.hash.replace(/^#/,""):"",hostname:ir.hostname,port:ir.port,pathname:"/"===ir.pathname.charAt(0)?ir.pathname:"/"+ir.pathname}}function ar(t){var e=U(t)?or(t):t;return e.protocol===rr.protocol&&e.host===rr.host}function sr(){this.$get=R(t)}function cr(t){var e=t[0]||{},n={},i="";function r(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,a,s,c,l=function(t){try{return t.cookie||""}catch(t){return""}}(e);if(l!==i)for(t=(i=l).split("; "),n={},a=0;a<t.length;a++)(s=(o=t[a]).indexOf("="))>0&&(c=r(o.substring(0,s)),z(n[c])&&(n[c]=r(o.substring(s+1))));return n}}function lr(){this.$get=cr}function ur(t){var e="Filter";function n(i,r){if(N(i)){var o={};return x(i,function(t,e){o[e]=n(e,t)}),o}return t.factory(i+e,r)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",gr),n("date",jr),n("filter",dr),n("json",Or),n("limitTo",Mr),n("lowercase",Tr),n("number",vr),n("orderBy",Ir),n("uppercase",qr)}function dr(){return function(t,e,n,i){if(!$(t)){if(null==t)return t;throw r("filter")("notarray","Expected array but received: {0}",t)}var o,a;switch(i=i||"$",fr(e)){case"function":o=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=function(t,e,n,i){var r=N(t)&&n in t;!0===e?e=ct:G(e)||(e=function(t,e){return!z(t)&&(null===t||null===e?t===e:!(N(e)||N(t)&&!D(t))&&(t=c(""+t),e=c(""+e),-1!==t.indexOf(e)))});return function(o){return r&&!N(o)?pr(o,t[n],e,n,!1):pr(o,t,e,n,i)}}(e,n,i,a);break;default:return t}return Array.prototype.filter.call(t,o)}}function pr(t,e,n,i,r,o){var a=fr(t),s=fr(e);if("string"===s&&"!"===e.charAt(0))return!pr(t,e.substring(1),n,i,r);if(H(t))return t.some(function(t){return pr(t,e,n,i,r)});switch(a){case"object":var c;if(r){for(c in t)if(c.charAt&&"$"!==c.charAt(0)&&pr(t[c],e,n,i,!0))return!0;return!o&&pr(t,e,n,i,!1)}if("object"===s){for(c in e){var l=e[c];if(!G(l)&&!z(l)){var u=c===i;if(!pr(u?t:t[c],l,n,i,u,u))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function fr(t){return null===t?"null":typeof t}cr.$inject=["$document"],ur.$inject=["$provide"];var _r=22,hr=".",mr="0";function gr(t){var e=t.NUMBER_FORMATS;return function(t,n,i){return z(n)&&(n=e.CURRENCY_SYM),z(i)&&(i=e.PATTERNS[1].maxFrac),null==t?t:br(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function vr(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:br(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function br(t,e,n,i,r){if(!U(t)&&!V(t)||isNaN(t))return"";var o,a=!isFinite(t),s=!1,c=Math.abs(t)+"",l="";if(a)l="";else{(function(t,e,n,i){var r=t.d,o=r.length-t.i,a=(e=z(e)?Math.min(Math.max(n,o),i):+e)+t.i,s=r[a];if(a>0){r.splice(Math.max(t.i,a));for(var c=a;c<r.length;c++)r[c]=0}else{o=Math.max(0,o),t.i=1,r.length=Math.max(1,a=e+1),r[0]=0;for(var l=1;l<a;l++)r[l]=0}if(s>=5)if(a-1<0){for(var u=0;u>a;u--)r.unshift(0),t.i++;r.unshift(1),t.i++}else r[a-1]++;for(;o<Math.max(0,e);o++)r.push(0);var d=r.reduceRight(function(t,e,n,i){return e+=t,i[n]=e%10,Math.floor(e/10)},0);d&&(r.unshift(d),t.i++)})(o=function(t){var e,n,i,r,o,a=0;for((n=t.indexOf(hr))>-1&&(t=t.replace(hr,"")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charAt(i)===mr;i++);if(i===(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)===mr;)o--;for(n-=i,e=[],r=0;i<=o;i++,r++)e[r]=+t.charAt(i)}return n>_r&&(e=e.splice(0,_r-1),a=n-1,n=1),{d:e,e:a,i:n}}(c),r,e.minFrac,e.maxFrac);var u=o.d,d=o.i,p=o.e,f=[];for(s=u.reduce(function(t,e){return t&&!e},!0);d<0;)u.unshift(0),d++;d>0?f=u.splice(d,u.length):(f=u,u=[0]);var _=[];for(u.length>=e.lgSize&&_.unshift(u.splice(-e.lgSize,u.length).join(""));u.length>e.gSize;)_.unshift(u.splice(-e.gSize,u.length).join(""));u.length&&_.unshift(u.join("")),l=_.join(n),f.length&&(l+=i+f.join("")),p&&(l+="e+"+p)}return t<0&&!s?e.negPre+l+e.negSuf:e.posPre+l+e.posSuf}function yr(t,e,n,i){var r="";for((t<0||i&&t<=0)&&(i?t=1-t:(t=-t,r="-")),t=""+t;t.length<e;)t=mr+t;return n&&(t=t.substr(t.length-e)),r+t}function wr(t,e,n,i,r){return n=n||0,function(o){var a=o["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),yr(a,e,i,r)}}function $r(t,e,n){return function(i,r){var o=i["get"+t]();return r[l((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function xr(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function kr(t){return function(e){var n,i=xr(e.getFullYear()),r=+(n=e,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+i;return yr(1+Math.round(r/6048e5),t)}}function Cr(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}gr.$inject=["$locale"],vr.$inject=["$locale"];var Sr={yyyy:wr("FullYear",4,0,!1,!0),yy:wr("FullYear",2,0,!0,!0),y:wr("FullYear",1,0,!1,!0),MMMM:$r("Month"),MMM:$r("Month",!0),MM:wr("Month",2,1),M:wr("Month",1,1),LLLL:$r("Month",!1,!0),dd:wr("Date",2),d:wr("Date",1),HH:wr("Hours",2),H:wr("Hours",1),hh:wr("Hours",2,-12),h:wr("Hours",1,-12),mm:wr("Minutes",2),m:wr("Minutes",1),ss:wr("Seconds",2),s:wr("Seconds",1),sss:wr("Milliseconds",3),EEEE:$r("Day"),EEE:$r("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var i=-1*n,r=i>=0?"+":"";return r+=yr(Math[i>0?"floor":"ceil"](i/60),2)+yr(Math.abs(i%60),2)},ww:kr(2),w:kr(1),G:Cr,GG:Cr,GGG:Cr,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Ar=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Er=/^-?\d+$/;function jr(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var o,a,s="",c=[];if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,U(n)&&(n=Er.test(n)?T(n):function(t){var n;if(n=t.match(e)){var i=new Date(0),r=0,o=0,a=n[8]?i.setUTCFullYear:i.setFullYear,s=n[8]?i.setUTCHours:i.setHours;n[9]&&(r=T(n[9]+n[10]),o=T(n[9]+n[11])),a.call(i,T(n[1]),T(n[2])-1,T(n[3]));var c=T(n[4]||0)-r,l=T(n[5]||0)-o,u=T(n[6]||0),d=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(i,c,l,u,d),i}return t}(n)),V(n)&&(n=new Date(n)),!B(n)||!isFinite(n.getTime()))return n;for(;i;)(a=Ar.exec(i))?i=(c=dt(c,a,1)).pop():(c.push(i),i=null);var l=n.getTimezoneOffset();return r&&(l=vt(r,l),n=bt(n,r,!0)),x(c,function(e){o=Sr[e],s+=o?o(n,t.DATETIME_FORMATS,l):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function Or(){return function(t,e){return z(e)&&(e=2),ht(t,e)}}jr.$inject=["$locale"];var Tr=R(c),qr=R(l);function Mr(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):T(e),q(e)?t:(V(t)&&(t=t.toString()),$(t)?(n=(n=!n||isNaN(n)?0:T(n))<0?Math.max(0,t.length+n):n,e>=0?Pr(t,n,n+e):0===n?Pr(t,e,t.length):Pr(t,Math.max(0,n+e),n)):t)}}function Pr(t,e,n){return U(t)?t.slice(e,n):_.call(t,e,n)}function Ir(t){return function(i,o,a,s){if(null==i)return i;if(!$(i))throw r("orderBy")("notarray","Expected array but received: {0}",i);H(o)||(o=[o]),0===o.length&&(o=["+"]);var c=o.map(function(e){var n=1,i=I;if(G(e))i=e;else if(U(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(i=t(e)).constant)){var r=i();i=function(t){return t[r]}}return{get:i,descending:n}}),l=a?-1:1,u=G(s)?s:n,d=Array.prototype.map.call(i,function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:c.map(function(i){return function(t,n){var i=typeof t;null===t?(i="string",t="null"):"object"===i&&(t=function(t){if(G(t.valueOf)&&e(t=t.valueOf()))return t;if(D(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:i,index:n}}(i.get(t),n)})}});return d.sort(function(t,e){for(var i=0,r=c.length;i<r;i++){var o=u(t.predicateValues[i],e.predicateValues[i]);if(o)return o*c[i].descending*l}return(u(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*l}),i=d.map(function(t){return t.value})};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,i=t.type,r=e.type;if(i===r){var o=t.value,a=e.value;"string"===i?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===i&&(N(o)&&(o=t.index),N(a)&&(a=e.index)),o!==a&&(n=o<a?-1:1)}else n=i<r?-1:1;return n}}function Rr(t){return G(t)&&(t={link:t}),t.restrict=t.restrict||"AC",R(t)}Ir.$inject=["$parse"];var Dr=R({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===g.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),zr={};x(Oe,function(t,e){if("multiple"!==t){var n=bn("ng-"+e),i=r;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[n]&&r(t,0,i)}),zr[n]=function(){return{restrict:"A",priority:100,link:i}}}function r(t,i,r){t.$watch(r[n],function(t){r.$set(e,!!t)})}}),x(qe,function(t,e){zr[e]=function(){return{priority:100,link:function(t,n,i){if("ngPattern"===e&&"/"===i.ngPattern.charAt(0)){var r=i.ngPattern.match(o);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}t.$watch(i[e],function(t){i.$set(e,t)})}}}}),x(["src","srcset","href"],function(t){var e=bn("ng-"+t);zr[e]=function(){return{priority:99,link:function(n,i,r){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===g.call(i.prop("href"))&&(a="xlinkHref",r.$attr[a]="xlink:href",o=null),r.$observe(e,function(e){e?(r.$set(a,e),u&&o&&i.prop(o,r[a])):"href"===t&&r.$set(a,null)})}}}});var Lr={$addControl:P,$$renameControl:function(t,e){t.$name=e},$removeControl:P,$setValidity:P,$setDirty:P,$setPristine:P,$setSubmitted:P},Nr="ng-pending";function Fr(t,e,n,i,r){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=r(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Lr,this.$$element=t,this.$$animate=i,Hr(this)}Fr.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Fr.prototype={$rollbackViewValue:function(){x(this.$$controls,function(t){t.$rollbackViewValue()})},$commitViewValue:function(){x(this.$$controls,function(t){t.$commitViewValue()})},$addControl:function(t){Dt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],x(this.$pending,function(e,n){this.$setValidity(n,null,t)},this),x(this.$error,function(e,n){this.$setValidity(n,null,t)},this),x(this.$$success,function(e,n){this.$setValidity(n,null,t)},this),ot(this.$$controls,t),t.$$parentForm=Lr},$setDirty:function(){this.$$animate.removeClass(this.$$element,No),this.$$animate.addClass(this.$$element,Fo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,No,Fo+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,x(this.$$controls,function(t){t.$setPristine()})},$setUntouched:function(){x(this.$$controls,function(t){t.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},Wr({clazz:Fr,set:function(t,e,n){var i=t[e];i?-1===i.indexOf(n)&&i.push(n):t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(ot(i,n),0===i.length&&delete t[e])}});var Ur=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Fr,compile:function(n,r){n.addClass(No).addClass(zo);var o=r.name?"name":!(!t||!r.ngForm)&&"ngForm";return{pre:function(t,n,r,a){var s=a[0];if(!("action"in r)){var c=function(e){t.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),e.preventDefault()};n[0].addEventListener("submit",c),n.on("$destroy",function(){e(function(){n[0].removeEventListener("submit",c)},0,!1)})}(a[1]||s.$$parentForm).$addControl(s);var l=o?i(s.$name):P;o&&(l(t,s),r.$observe(o,function(e){s.$name!==e&&(l(t,void 0),s.$$parentForm.$$renameControl(s,e),(l=i(s.$name))(t,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),l(t,void 0),j(s,Lr)})}}}};function i(t){return""===t?n('this[""]').assign:n(t).assign||P}}]},Vr=Ur(),Br=Ur(!0);function Hr(t){t.$$classCache={},t.$$classCache[Lo]=!(t.$$classCache[zo]=t.$$element.hasClass(zo))}function Wr(t){var e=t.clazz,n=t.set,i=t.unset;function r(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function o(t,e,n){e=e?"-"+Mt(e,"-"):"",r(t,zo+e,!0===n),r(t,Lo+e,!1===n)}e.prototype.$setValidity=function(t,e,a){var s;z(e)?function(t,e,i,r){t[e]||(t[e]={});n(t[e],i,r)}(this,"$pending",t,a):function(t,e,n,r){t[e]&&i(t[e],n,r);Gr(t[e])&&(t[e]=void 0)}(this,"$pending",t,a),Q(e)?e?(i(this.$error,t,a),n(this.$$success,t,a)):(n(this.$error,t,a),i(this.$$success,t,a)):(i(this.$error,t,a),i(this.$$success,t,a)),this.$pending?(r(this,Nr,!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(r(this,Nr,!1),this.$valid=Gr(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,t,s=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,s,this)}}function Gr(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Yr=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Kr=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Jr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Qr=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Xr=/^(\d{4,})-(\d{2})-(\d{2})$/,Zr=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,to=/^(\d{4,})-W(\d\d)$/,eo=/^(\d{4,})-(\d\d)$/,no=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,io="keydown wheel mousedown",ro=Nt();x("date,datetime-local,month,time,week".split(","),function(t){ro[t]=!0});var oo={text:function(t,e,n,i,r,o){so(t,e,n,i,r,o),ao(i)},date:lo("date",Xr,co(Xr,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":lo("datetimelocal",Zr,co(Zr,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:lo("time",no,co(no,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:lo("week",to,function(t,e){if(B(t))return t;if(U(t)){to.lastIndex=0;var n=to.exec(t);if(n){var i=+n[1],r=+n[2],o=0,a=0,s=0,c=0,l=xr(i),u=7*(r-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),c=e.getMilliseconds()),new Date(i,0,l.getDate()+u,o,a,s,c)}}return NaN},"yyyy-Www"),month:lo("month",eo,co(eo,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,i,r,o){var a,s;uo(t,e,n,i),po(i),so(t,e,n,i,r,o),(L(n.min)||n.ngMin)&&(i.$validators.min=function(t){return i.$isEmpty(t)||z(a)||t>=a},n.$observe("min",function(t){a=fo(t),i.$validate()}));(L(n.max)||n.ngMax)&&(i.$validators.max=function(t){return i.$isEmpty(t)||z(s)||t<=s},n.$observe("max",function(t){s=fo(t),i.$validate()}));if(L(n.step)||n.ngStep){var c;i.$validators.step=function(t,e){return i.$isEmpty(e)||z(c)||mo(e,a||0,c)},n.$observe("step",function(t){c=fo(t),i.$validate()})}},url:function(t,e,n,i,r,o){so(t,e,n,i,r,o),ao(i),i.$$parserName="url",i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||Kr.test(n)}},email:function(t,e,n,i,r,o){so(t,e,n,i,r,o),ao(i),i.$$parserName="email",i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||Jr.test(n)}},radio:function(t,e,n,i){var r=!n.ngTrim||"false"!==tt(n.ngTrim);z(n.name)&&e.attr("name",S());e.on("click",function(t){var o;e[0].checked&&(o=n.value,r&&(o=tt(o)),i.$setViewValue(o,t&&t.type))}),i.$render=function(){var t=n.value;r&&(t=tt(t)),e[0].checked=t===i.$viewValue},n.$observe("value",i.$render)},range:function(t,e,n,i,r,o){uo(t,e,n,i),po(i),so(t,e,n,i,r,o);var a=i.$$hasNativeValidators&&"range"===e[0].type,s=a?0:void 0,c=a?100:void 0,l=a?1:void 0,u=e[0].validity,d=L(n.min),p=L(n.max),f=L(n.step),_=i.$render;i.$render=a&&L(u.rangeUnderflow)&&L(u.rangeOverflow)?function(){_(),i.$setViewValue(e.val())}:_,d&&(i.$validators.min=a?function(){return!0}:function(t,e){return i.$isEmpty(e)||z(s)||e>=s},h("min",function(t){if(s=fo(t),q(i.$modelValue))return;if(a){var n=e.val();s>n&&(n=s,e.val(n)),i.$setViewValue(n)}else i.$validate()}));p&&(i.$validators.max=a?function(){return!0}:function(t,e){return i.$isEmpty(e)||z(c)||e<=c},h("max",function(t){if(c=fo(t),q(i.$modelValue))return;if(a){var n=e.val();c<n&&(e.val(c),n=c<s?s:c),i.$setViewValue(n)}else i.$validate()}));f&&(i.$validators.step=a?function(){return!u.stepMismatch}:function(t,e){return i.$isEmpty(e)||z(l)||mo(e,s||0,l)},h("step",function(t){if(l=fo(t),q(i.$modelValue))return;a&&i.$viewValue!==e.val()?i.$setViewValue(e.val()):i.$validate()}));function h(t,i){e.attr(t,n[t]),n.$observe(t,i)}},checkbox:function(t,e,n,i,r,o,a,s){var c=go(s,t,"ngTrueValue",n.ngTrueValue,!0),l=go(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){i.$setViewValue(e[0].checked,t&&t.type)}),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return!1===t},i.$formatters.push(function(t){return ct(t,c)}),i.$parsers.push(function(t){return t?c:l})},hidden:P,button:P,submit:P,reset:P,file:P};function ao(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function so(t,e,n,i,r,o){var s,l=c(e[0].type);if(!r.android){var u=!1;e.on("compositionstart",function(){u=!0}),e.on("compositionend",function(){u=!1,d()})}var d=function(t){if(s&&(o.defer.cancel(s),s=null),!u){var r=e.val(),a=t&&t.type;"password"===l||n.ngTrim&&"false"===n.ngTrim||(r=tt(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,a)}};if(r.hasEvent("input"))e.on("input",d);else{var p=function(t,e,n){s||(s=o.defer(function(){s=null,e&&e.value===n||d(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||p(t,this,this.value)}),r.hasEvent("paste")&&e.on("paste cut",p)}e.on("change",d),ro[l]&&i.$$hasNativeValidators&&l===n.type&&e.on(io,function(t){if(!s){var e=this[a],n=e.badInput,i=e.typeMismatch;s=o.defer(function(){s=null,e.badInput===n&&e.typeMismatch===i||d(t)})}}),i.$render=function(){var t=i.$isEmpty(i.$viewValue)?"":i.$viewValue;e.val()!==t&&e.val(t)}}function co(t,e){return function(n,i){var r,o;if(B(n))return n;if(U(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Yr.test(n))return new Date(n);if(t.lastIndex=0,r=t.exec(n))return r.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},x(r,function(t,n){n<e.length&&(o[e[n]]=+t)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function lo(t,e,n,i){return function(r,o,a,s,c,l,u){uo(r,o,a,s),so(0,o,a,s,c,l);var d,p,f,_=s&&s.$options.getOption("timezone");(s.$$parserName=t,s.$parsers.push(function(t){if(s.$isEmpty(t))return null;if(e.test(t)){var i=n(t,d);return _&&(i=bt(i,_)),i}}),s.$formatters.push(function(t){if(t&&!B(t))throw Uo("datefmt","Expected `{0}` to be a date",t);return h(t)?((d=t)&&_&&(d=bt(d,_,!0)),u("date")(t,i,_)):(d=null,"")}),L(a.min)||a.ngMin)&&(s.$validators.min=function(t){return!h(t)||z(p)||n(t)>=p},a.$observe("min",function(t){p=m(t),s.$validate()}));(L(a.max)||a.ngMax)&&(s.$validators.max=function(t){return!h(t)||z(f)||n(t)<=f},a.$observe("max",function(t){f=m(t),s.$validate()}));function h(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function m(t){return L(t)&&!B(t)?n(t)||void 0:t}}}function uo(t,e,n,i){var r=e[0];(i.$$hasNativeValidators=N(r.validity))&&i.$parsers.push(function(t){var n=e.prop(a)||{};return n.badInput||n.typeMismatch?void 0:t})}function po(t){t.$$parserName="number",t.$parsers.push(function(e){return t.$isEmpty(e)?null:Qr.test(e)?parseFloat(e):void 0}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!V(e))throw Uo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function fo(t){return L(t)&&!V(t)&&(t=parseFloat(t)),q(t)?void 0:t}function _o(t){return(0|t)===t}function ho(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var i=/e-(\d+)$/.exec(e);if(i)return Number(i[1])}return 0}return e.length-n-1}function mo(t,e,n){var i=Number(t),r=!_o(i),o=!_o(e),a=!_o(n);if(r||o||a){var s=r?ho(i):0,c=o?ho(e):0,l=a?ho(n):0,u=Math.max(s,c,l),d=Math.pow(10,u);i*=d,e*=d,n*=d,r&&(i=Math.round(i)),o&&(e=Math.round(e)),a&&(n=Math.round(n))}return(i-e)%n==0}function go(t,e,n,i,r){var o;if(L(i)){if(!(o=t(i)).constant)throw Uo("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(e)}return r}var vo=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,a,s){s[0]&&(oo[c(a.type)]||oo.text)(r,o,a,s[0],e,t,n,i)}}}}],bo=/^(true|false|\d+)$/,yo=function(){function t(t,e,n){var i=L(n)?n:9===u?"":null;t.prop("value",i),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return bo.test(n.ngValue)?function(e,n,i){t(n,i,e.$eval(i.ngValue))}:function(e,n,i){e.$watch(i.ngValue,function(e){t(n,i,e)})}}}},wo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,i){t.$$addBindingInfo(n,i.ngBind),n=n[0],e.$watch(i.ngBind,function(t){n.textContent=Ft(t)})}}}}],$o=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,i,r){var o=t(i.attr(r.$attr.ngBindTemplate));e.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",function(t){i.textContent=z(t)?"":t})}}}}],xo=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(i,r){var o=e(r.ngBindHtml),a=e(r.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(i),function(e,i,r){n.$$addBindingInfo(i,r.ngBindHtml),e.$watch(a,function(){var n=o(e);i.html(t.getTrustedHtml(n)||"")})}}}}],ko=R({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function Co(t,e){var n;return t="ngClass"+t,["$parse",function(s){return{restrict:"AC",link:function(c,l,u){var d,p=u[t].trim(),f=":"===p.charAt(0)&&":"===p.charAt(1),_=s(p,f?a:o),h=f?function(t){var e=o(t);e!==d&&b(e)}:b,m=l.data("$classCounts"),g=!0;function v(t,e){var n=[];return x(t,function(t){(e>0||m[t])&&(m[t]=(m[t]||0)+e,m[t]===+(e>0)&&n.push(t))}),n.join(" ")}function b(t){g===e&&function(t,e){var n=r(t),o=r(e),a=i(n,o),s=i(o,n),c=v(a,-1),l=v(s,1);u.$addClass(l),u.$removeClass(c)}(d,t),d=t}m||(m=Nt(),l.data("$classCounts",m)),"ngClass"!==t&&(n||(n=s("$index",function(t){return 1&t})),c.$watch(n,function(t){t===e?(n=v(r(n=d),1),u.$addClass(n)):function(t){t=v(r(t),-1),u.$removeClass(t)}(d);var n;g=t})),c.$watch(_,h,f)}}}];function i(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r===e[o])continue t;n.push(r)}return n}function r(t){return t&&t.split(" ")}function o(t){var e=t;return H(t)?e=t.map(o).join(" "):N(t)&&(e=Object.keys(t).filter(function(e){return t[e]}).join(" ")),e}function a(t){var e=t;if(H(t))e=t.map(a);else if(N(t)){var n=!1;e=Object.keys(t).filter(function(e){var i=t[e];return!n&&z(i)&&(n=!0),i}),n&&e.push(void 0)}return e}}var So=Co("",!0),Ao=Co("Odd",0),Eo=Co("Even",1),jo=Rr({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Oo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],To={},qo={blur:!0,focus:!0};x("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=bn("ng-"+t);To[e]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var a=n(o[e]);return function(e,n){n.on(t,function(n){var r=function(){a(e,{$event:n})};qo[t]&&i.$$phase?e.$evalAsync(r):e.$apply(r)})}}}}]});var Mo=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,a){var s,c,l;n.$watch(r.ngIf,function(n){n?c||a(function(n,o){c=o,n[n.length++]=e.$$createComment("end ngIf",r.ngIf),s={clone:n},t.enter(n,i.parent(),i)}):(l&&(l.remove(),l=null),c&&(c.$destroy(),c=null),s&&(l=Lt(s.clone),t.leave(l).done(function(t){!1!==t&&(l=null)}),s=null))})}}}],Po=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:y.noop,compile:function(i,r){var o=r.ngInclude||r.src,a=r.onload||"",s=r.autoscroll;return function(i,r,c,l,u){var d,p,f,_=0,h=function(){p&&(p.remove(),p=null),d&&(d.$destroy(),d=null),f&&(n.leave(f).done(function(t){!1!==t&&(p=null)}),p=f,f=null)};i.$watch(o,function(o){var c=function(t){!1===t||!L(s)||s&&!i.$eval(s)||e()},p=++_;o?(t(o,!0).then(function(t){if(!i.$$destroyed&&p===_){var e=i.$new();l.template=t;var s=u(e,function(t){h(),n.enter(t,null,r).done(c)});f=s,(d=e).$emit("$includeContentLoaded",o),i.$eval(a)}},function(){i.$$destroyed||p===_&&(h(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(h(),l.template=null)})}}}}],Io=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){if(g.call(i[0]).match(/SVG/))return i.empty(),void e(de(o.template,t.document).childNodes)(n,function(t){i.append(t)},{futureParentElement:i});i.html(o.template),e(i.contents())(n)}}}],Ro=Rr({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Do=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,i){var r=n.ngList||", ",o="false"!==n.ngTrim,a=o?tt(r):r;i.$parsers.push(function(t){if(!z(t)){var e=[];return t&&x(t.split(a),function(t){t&&e.push(o?tt(t):t)}),e}}),i.$formatters.push(function(t){if(H(t))return t.join(r)}),i.$isEmpty=function(t){return!t||!t.length}}}},zo="ng-valid",Lo="ng-invalid",No="ng-pristine",Fo="ng-dirty",Uo=r("ngModel");function Vo(t,e,n,i,r,o,a,s,c){var l;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(t),this.$$parentForm=Lr,this.$options=Bo,this.$$parsedNgModel=r(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:t}),this.$$attr=n,this.$$element=i,this.$$animate=o,this.$$timeout=a,this.$$parse=r,this.$$q=s,this.$$exceptionHandler=e,Hr(this),(l=this).$$scope.$watch(function(t){var e=l.$$ngModelGet(t);if(e!==l.$modelValue&&(l.$modelValue==l.$modelValue||e==e)){l.$modelValue=l.$$rawModelValue=e,l.$$parserValid=void 0;for(var n=l.$formatters,i=n.length,r=e;i--;)r=n[i](r);l.$viewValue!==r&&(l.$$updateEmptyClasses(r),l.$viewValue=l.$$lastCommittedViewValue=r,l.$render(),l.$$runValidators(l.$modelValue,l.$viewValue,P))}return e})}Vo.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Vo.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return G(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){G(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Uo("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,yt(this.$$element))},$render:P,$isEmpty:function(t){return z(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Fo),this.$$animate.addClass(this.$$element,No)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,No),this.$$animate.addClass(this.$$element,Fo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!q(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,i=this.$modelValue,r=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,function(t){r||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==i&&o.$$writeModelToScope())})}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var i,r,o=this.$$currentValidationRunId,a=this;(function(){var t=a.$$parserName||"parse";if(!z(a.$$parserValid))return a.$$parserValid||(x(a.$validators,function(t,e){s(e,null)}),x(a.$asyncValidators,function(t,e){s(e,null)})),s(t,a.$$parserValid),a.$$parserValid;s(t,null);return!0})()?!function(){var n=!0;if(x(a.$validators,function(i,r){var o=Boolean(i(t,e));n=n&&o,s(r,o)}),!n)return x(a.$asyncValidators,function(t,e){s(e,null)}),!1;return!0}()?c(!1):(i=[],r=!0,x(a.$asyncValidators,function(n,o){var a=n(t,e);if(!X(a))throw Uo("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),i.push(a.then(function(){s(o,!0)},function(){r=!1,s(o,!1)}))}),i.length?a.$$q.all(i).then(function(){c(r)},P):c(!0)):c(!1);function s(t,e){o===a.$$currentValidationRunId&&a.$setValidity(t,e)}function c(t){o===a.$$currentValidationRunId&&n(t)}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!z(t)||void 0,this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(z(t=this.$parsers[n](t))){this.$$parserValid=!1;break}q(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var i=this.$modelValue,r=this.$options.getOption("allowInvalid");function o(){e.$modelValue!==i&&e.$$writeModelToScope()}this.$$rawModelValue=t,r&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(n){r||(e.$modelValue=n?t:void 0,o())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),x(this.$viewChangeListeners,function(t){try{t()}catch(t){this.$$exceptionHandler(t)}},this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");V(e[t])?e=e[t]:V(e.default)&&(e=e.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},e):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t)}},Wr({clazz:Vo,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Bo,Ho=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Vo,priority:1,compile:function(e){return e.addClass(No).addClass("ng-untouched").addClass(zo),{pre:function(t,e,n,i){var r=i[0],o=i[1]||r.$$parentForm,a=i[2];a&&(r.$options=a.$options),r.$$initGetterSetters(),o.$addControl(r),n.$observe("name",function(t){r.$name!==t&&r.$$parentForm.$$renameControl(r,t)}),t.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(e,n,i,r){var o=r[0];function a(){o.$setTouched()}o.$options.getOption("updateOn")&&n.on(o.$options.getOption("updateOn"),function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(a):e.$apply(a))})}}}}}],Wo=/(\s+|^)default(\s+|$)/;function Go(t){this.$$options=t}Go.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return x(t=j({},t),function(n,i){"$inherit"===n?"*"===i?e=!0:(t[i]=this.$$options[i],"updateOn"===i&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===i&&(t.updateOnDefault=!1,t[i]=tt(n.replace(Wo,function(){return t.updateOnDefault=!0," "})))},this),e&&(delete t["*"],Ko(t,this.$$options)),Ko(t,Bo.$$options),new Go(t)}},Bo=new Go({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Yo=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Bo,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function Ko(t,e){x(e,function(e,n){L(t[n])||(t[n]=e)})}var Jo=Rr({terminal:!0,priority:1e3}),Qo=r("ngOptions"),Xo=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Zo=["$compile","$document","$parse",function(e,n,i){var r=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,i){i[0].registerOption=P},post:function(t,a,s,c){for(var l=c[0],u=c[1],p=s.multiple,f=0,_=a.children(),h=_.length;f<h;f++)if(""===_[f].value){l.hasEmptyOption=!0,l.emptyOption=_.eq(f);break}a.empty();var m,g=!!l.emptyOption;d(r.cloneNode(!1)).val("?");var v=function(t,e,n){var r=t.match(Xo);if(!r)throw Qo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,yt(e));var o=r[5]||r[7],a=r[6],s=/ as /.test(r[0])&&r[1],c=r[9],l=i(r[2]?r[1]:o),u=s&&i(s)||l,d=c&&i(c),p=c?function(t,e){return d(n,e)}:function(t){return De(t)},f=function(t,e){return p(t,b(t,e))},_=i(r[2]||r[1]),h=i(r[3]||""),m=i(r[4]||""),g=i(r[8]),v={},b=a?function(t,e){return v[a]=e,v[o]=t,v}:function(t){return v[o]=t,v};function y(t,e,n,i,r){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=r}function w(t){var e;if(!a&&$(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:c,getTrackByValue:f,getWatchables:i(g,function(t){for(var e=[],i=w(t=t||[]),o=i.length,a=0;a<o;a++){var s=t===i?a:i[a],c=t[s],l=b(c,s),u=p(c,l);if(e.push(u),r[2]||r[1]){var d=_(n,l);e.push(d)}if(r[4]){var f=m(n,l);e.push(f)}}return e}),getOptions:function(){for(var t=[],e={},i=g(n)||[],r=w(i),o=r.length,a=0;a<o;a++){var s=i===r?a:r[a],l=i[s],d=b(l,s),v=u(n,d),$=p(v,d),x=new y($,v,_(n,d),h(n,d),m(n,d));t.push(x),e[$]=x}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[f(t)]},getViewValueFromOption:function(t){return c?at(t.viewValue):t.viewValue}}}}}(s.ngOptions,a,t),b=n[0].createDocumentFragment();function y(t,e){var n=r.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),e.value=t.selectValue}(t,n)}function w(t){var e=m.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}l.generateUnknownOptionValue=function(t){return"?"},p?(l.writeValue=function(t){if(m){var e=t&&t.map(w)||[];m.items.forEach(function(t){t.element.selected&&!rt(e,t)&&(t.element.selected=!1)})}},l.readValue=function(){var t=a.val()||[],e=[];return x(t,function(t){var n=m.selectValueMap[t];n&&!n.disabled&&e.push(m.getViewValueFromOption(n))}),e},v.trackBy&&t.$watchCollection(function(){if(H(u.$viewValue))return u.$viewValue.map(function(t){return v.getTrackByValue(t)})},function(){u.$render()})):(l.writeValue=function(t){if(m){var e=a[0].options[a[0].selectedIndex],n=m.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(a[0].value!==n.selectValue&&(l.removeUnknownOption(),a[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):l.selectUnknownOrEmptyOption(t)}},l.readValue=function(){var t=m.selectValueMap[a.val()];return t&&!t.disabled?(l.unselectEmptyOption(),l.removeUnknownOption(),m.getViewValueFromOption(t)):null},v.trackBy&&t.$watch(function(){return v.getTrackByValue(u.$viewValue)},function(){u.$render()})),g&&(e(l.emptyOption)(t),a.prepend(l.emptyOption),l.emptyOption[0].nodeType===Bt?(l.hasEmptyOption=!1,l.registerOption=function(t,e){""===e.val()&&(l.hasEmptyOption=!0,l.emptyOption=e,l.emptyOption.removeClass("ng-scope"),u.$render(),e.on("$destroy",function(){var t=l.$isEmptyOptionSelected();l.hasEmptyOption=!1,l.emptyOption=void 0,t&&u.$render()}))}):l.emptyOption.removeClass("ng-scope")),t.$watchCollection(v.getWatchables,function(){var t=m&&l.readValue();if(m)for(var e=m.items.length-1;e>=0;e--){var n=m.items[e];L(n.group)?Ae(n.element.parentNode):Ae(n.element)}m=v.getOptions();var i={};if(m.items.forEach(function(t){var e;L(t.group)?((e=i[t.group])||(e=o.cloneNode(!1),b.appendChild(e),e.label=null===t.group?"null":t.group,i[t.group]=e),y(t,e)):y(t,b)}),a[0].appendChild(b),u.$render(),!u.$isEmpty(t)){var r=l.readValue(),s=v.trackBy||p;(s?ct(t,r):t===r)||(u.$setViewValue(r),u.$render())}})}}}}],ta=["$locale","$interpolate","$log",function(t,e,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(o,a,s){var l,u=s.count,d=s.$attr.when&&a.attr(s.$attr.when),p=s.offset||0,f=o.$eval(d)||{},_={},h=e.startSymbol(),m=e.endSymbol(),g=h+u+"-"+p+m,v=y.noop;function b(t){a.text(t||"")}x(s,function(t,e){var n=r.exec(e);if(n){var i=(n[1]?"-":"")+c(n[2]);f[i]=a.attr(s.$attr[e])}}),x(f,function(t,n){_[n]=e(t.replace(i,g))}),o.$watch(u,function(e){var i=parseFloat(e),r=q(i);if(r||i in f||(i=t.pluralCat(i-p)),!(i===l||r&&q(l))){v();var a=_[i];z(a)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+d),v=P,b()):v=o.$watch(a,b),l=i}})}}}],ea=["$parse","$animate","$compile",function(t,e,n){var i=r("ngRepeat"),o=function(t,e,n,i,r,o,a){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},a=function(t){return t.clone[0]},c=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,l){var u=l.ngRepeat,d=n.$$createComment("end ngRepeat",u),p=u.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",u);var f=p[1],_=p[2],h=p[3],m=p[4];if(!(p=f.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",f);var g,v,b,y,w=p[3]||p[1],k=p[2];if(h&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(h)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(h)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",h);var C={$id:De};return m?g=t(m):(b=function(t,e){return De(e)},y=function(t){return t}),function(t,n,r,l,p){g&&(v=function(e,n,i){return k&&(C[k]=e),C[w]=n,C.$index=i,g(t,C)});var f=Nt();t.$watchCollection(_,function(r){var l,_,m,g,C,S,A,E,j,O,T,q,M=n[0],P=Nt();if(h&&(t[h]=r),$(r))j=r,E=v||b;else for(var I in E=v||y,j=[],r)s.call(r,I)&&"$"!==I.charAt(0)&&j.push(I);for(g=j.length,T=new Array(g),l=0;l<g;l++)if(C=r===j?l:j[l],S=r[C],A=E(C,S,l),f[A])O=f[A],delete f[A],P[A]=O,T[l]=O;else{if(P[A])throw x(T,function(t){t&&t.scope&&(f[t.id]=t)}),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",u,A,S);T[l]={id:A,scope:void 0,clone:void 0},P[A]=!0}for(var R in f){if(q=Lt((O=f[R]).clone),e.leave(q),q[0].parentNode)for(l=0,_=q.length;l<_;l++)q[l].$$NG_REMOVED=!0;O.scope.$destroy()}for(l=0;l<g;l++)if(C=r===j?l:j[l],S=r[C],(O=T[l]).scope){m=M;do{m=m.nextSibling}while(m&&m.$$NG_REMOVED);a(O)!==m&&e.move(Lt(O.clone),null,M),M=c(O),o(O.scope,l,w,S,k,C,g)}else p(function(t,n){O.scope=n;var i=d.cloneNode(!1);t[t.length++]=i,e.enter(t,null,M),M=i,O.clone=t,P[O.id]=O,o(O.scope,l,w,S,k,C,g)});f=P})}}}}],na=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ia=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ra=Rr(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&x(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),oa=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,o){var a=r.ngSwitch||r.on,s=[],c=[],l=[],u=[],d=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(a,function(n){for(var i,r;l.length;)t.cancel(l.pop());for(i=0,r=u.length;i<r;++i){var a=Lt(c[i].clone);u[i].$destroy(),(l[i]=t.leave(a)).done(d(l,i))}c.length=0,u.length=0,(s=o.cases["!"+n]||o.cases["?"])&&x(s,function(n){n.transclude(function(i,r){u.push(r);var o=n.element;i[i.length++]=e.$$createComment("end ngSwitchWhen");var a={clone:i};c.push(a),t.enter(i,o.parent(),o)})})})}}}],aa=Rr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){x(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(t,e,n){return n[e-1]!==t}),function(t){i.cases["!"+t]=i.cases["!"+t]||[],i.cases["!"+t].push({transclude:r,element:e})})}}),sa=Rr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),ca=r("ngTransclude"),la=["$compile",function(t){return{restrict:"EAC",terminal:!0,compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,i,r,o){if(!o)throw ca("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",yt(e));i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude="");var a=i.ngTransclude||i.ngTranscludeSlot;function s(){n(t,function(t){e.append(t)})}o(function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];if(i.nodeType!==Vt||i.nodeValue.trim())return!0}}(t)?e.append(t):(s(),n.$destroy())},null,a),a&&!o.isSlotFilled(a)&&s()}}}}],ua=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var i=n.id,r=e[0].text;t.put(i,r)}}}}],da={$setViewValue:P,$render:P};function pa(t,e){t.prop("selected",e),t.attr("selected",e)}var fa=["$element","$scope",function(e,n){var i=this,r=new Ne;i.selectValueMap={},i.ngModelCtrl=da,i.multiple=!1,i.unknownOption=d(t.document.createElement("option")),i.hasEmptyOption=!1,i.emptyOption=void 0,i.renderUnknownOption=function(t){var n=i.generateUnknownOptionValue(t);i.unknownOption.val(n),e.prepend(i.unknownOption),pa(i.unknownOption,!0),e.val(n)},i.updateUnknownOption=function(t){var n=i.generateUnknownOptionValue(t);i.unknownOption.val(n),pa(i.unknownOption,!0),e.val(n)},i.generateUnknownOptionValue=function(t){return"? "+De(t)+" ?"},i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.selectEmptyOption=function(){i.emptyOption&&(e.val(""),pa(i.emptyOption,!0))},i.unselectEmptyOption=function(){i.hasEmptyOption&&pa(i.emptyOption,!1)},n.$on("$destroy",function(){i.renderUnknownOption=P}),i.readValue=function(){var t=e.val(),n=t in i.selectValueMap?i.selectValueMap[t]:t;return i.hasOption(n)?n:null},i.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&pa(d(n),!1),i.hasOption(t)){i.removeUnknownOption();var r=De(t);e.val(r in i.selectValueMap?r:t);var o=e[0].options[e[0].selectedIndex];pa(d(o),!0)}else i.selectUnknownOrEmptyOption(t)},i.addOption=function(t,e){if(e[0].nodeType!==Bt){Dt(t,'"option value"'),""===t&&(i.hasEmptyOption=!0,i.emptyOption=e);var n=r.get(t)||0;r.set(t,n+1),a()}},i.removeOption=function(t){var e=r.get(t);e&&(1===e?(r.delete(t),""===t&&(i.hasEmptyOption=!1,i.emptyOption=void 0)):r.set(t,e-1))},i.hasOption=function(t){return!!r.get(t)},i.$hasEmptyOption=function(){return i.hasEmptyOption},i.$isUnknownOptionSelected=function(){return e[0].options[0]===i.unknownOption[0]},i.$isEmptyOptionSelected=function(){return i.hasEmptyOption&&e[0].options[e[0].selectedIndex]===i.emptyOption[0]},i.selectUnknownOrEmptyOption=function(t){null==t&&i.emptyOption?(i.removeUnknownOption(),i.selectEmptyOption()):i.unknownOption.parent().length?i.updateUnknownOption(t):i.renderUnknownOption(t)};var o=!1;function a(){o||(o=!0,n.$$postDigest(function(){o=!1,i.ngModelCtrl.$render()}))}var s=!1;function c(t){s||(s=!0,n.$$postDigest(function(){n.$$destroyed||(s=!1,i.ngModelCtrl.$setViewValue(i.readValue()),t&&i.ngModelCtrl.$render())}))}i.registerOption=function(t,e,n,r,o){if(n.$attr.ngValue){var s,l=NaN;n.$observe("value",function(t){var n,r=e.prop("selected");L(l)&&(i.removeOption(s),delete i.selectValueMap[l],n=!0),l=De(t),s=t,i.selectValueMap[l]=t,i.addOption(t,e),e.attr("value",l),n&&r&&c()})}else r?n.$observe("value",function(t){var n;i.readValue();var r=e.prop("selected");L(s)&&(i.removeOption(s),n=!0),s=t,i.addOption(t,e),n&&r&&c()}):o?t.$watch(o,function(t,r){n.$set("value",t);var o=e.prop("selected");r!==t&&i.removeOption(r),i.addOption(t,e),r&&o&&c()}):i.addOption(n.value,e);n.$observe("disabled",function(t){("true"===t||t&&e.prop("selected"))&&(i.multiple?c(!0):(i.ngModelCtrl.$setViewValue(null),i.ngModelCtrl.$render()))}),e.on("$destroy",function(){var t=i.readValue(),e=n.value;i.removeOption(e),a(),(i.multiple&&t&&-1!==t.indexOf(e)||t===e)&&c(!0)})}}],_a=function(){return{restrict:"E",require:["select","?ngModel"],controller:fa,priority:1,link:{pre:function(t,e,n,i){var r=i[0],o=i[1];if(!o)return void(r.registerOption=P);if(r.ngModelCtrl=o,e.on("change",function(){r.removeUnknownOption(),t.$apply(function(){o.$setViewValue(r.readValue())})}),n.multiple){r.multiple=!0,r.readValue=function(){var t=[];return x(e.find("option"),function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in r.selectValueMap?r.selectValueMap[n]:n)}}),t},r.writeValue=function(t){x(e.find("option"),function(e){var n=!!t&&(rt(t,e.value)||rt(t,r.selectValueMap[e.value])),i=e.selected;n!==i&&pa(d(e),n)})};var a,s=NaN;t.$watch(function(){s!==o.$viewValue||ct(a,o.$viewValue)||(a=Gt(o.$viewValue),o.$render()),s=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,i){var r=i[1];if(!r)return;var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}}},ha=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var i,r;return L(n.ngValue)||(L(n.value)?i=t(n.value,!0):(r=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o=e.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.registerOption(t,e,n,i,r)}}}}],ma=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){i&&(n.required=!0,i.$validators.required=function(t,e){return!n.required||!i.$isEmpty(e)},n.$observe("required",function(){i.$validate()}))}}},ga=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var o,a=n.ngPattern||n.pattern;n.$observe("pattern",function(t){if(U(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,t,yt(e));o=t||void 0,i.$validate()}),i.$validators.pattern=function(t,e){return i.$isEmpty(e)||z(o)||o.test(e)}}}}},va=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=-1;n.$observe("maxlength",function(t){var e=T(t);r=q(e)?-1:e,i.$validate()}),i.$validators.maxlength=function(t,e){return r<0||i.$isEmpty(e)||e.length<=r}}}}},ba=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=0;n.$observe("minlength",function(t){r=T(t)||0,i.$validate()}),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=r}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load angular more than once."):(!function(){var e;if(!Pt){var n=ut();(p=z(n)?t.jQuery:n?t[n]:void 0)&&p.fn.on?(d=p,j(p.fn,{scope:je.scope,isolateScope:je.isolateScope,controller:je.controller,injector:je.injector,inheritedData:je.inheritedData}),e=p.cleanData,p.cleanData=function(t){for(var n,i,r=0;null!=(i=t[r]);r++)(n=p._data(i,"events"))&&n.$destroy&&p(i).triggerHandler("$destroy");e(t)}):d=fe,y.element=d,Pt=!0}}(),function(e){j(e,{errorHandlingConfig:n,bootstrap:jt,copy:at,extend:j,merge:O,equals:ct,element:d,forEach:x,injector:Je,noop:P,bind:ft,toJson:ht,fromJson:mt,identity:I,isUndefined:z,isDefined:L,isString:U,isFunction:G,isObject:N,isNumber:V,isElement:nt,isArray:H,version:Kt,isDate:B,lowercase:c,uppercase:l,callbacks:{$$counter:0},getTestability:Tt,reloadWithDebugInfo:Ot,$$minErr:r,$$csp:lt,$$encodeUriSegment:kt,$$encodeUriQuery:Ct,$$stringify:Ft}),(f=function(t){var e=r("$injector"),n=r("ng");function i(t,e,n){return t[e]||(t[e]=n())}var o=i(t,"angular",Object);return o.$$minErr=o.$$minErr||r,i(o,"module",function(){var t={};return function(r,o,a){var s={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name",e)}(r,"module"),o&&t.hasOwnProperty(r)&&(t[r]=null),i(t,r,function(){if(!o)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var t=[],i=[],c=[],l=d("$injector","invoke","push",i),u={_invokeQueue:t,_configBlocks:i,_runBlocks:c,info:function(t){if(L(t)){if(!N(t))throw n("aobj","Argument '{0}' must be an object","value");return s=t,this}return s},requires:o,name:r,provider:p("$provide","provider"),factory:p("$provide","factory"),service:p("$provide","service"),value:d("$provide","value"),constant:d("$provide","constant","unshift"),decorator:p("$provide","decorator",i),animation:p("$animateProvider","register"),filter:p("$filterProvider","register"),controller:p("$controllerProvider","register"),directive:p("$compileProvider","directive"),component:p("$compileProvider","component"),config:l,run:function(t){return c.push(t),this}};return a&&l(a),u;function d(e,n,i,r){return r||(r=t),function(){return r[i||"push"]([e,n,arguments]),u}}function p(e,n,i){return i||(i=t),function(t,o){return o&&G(o)&&(o.$$moduleName=r),i.push([e,n,arguments]),u}}})}})}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Bi}),t.provider("$compile",hn).directive({a:Dr,input:vo,textarea:vo,form:Vr,script:ua,select:_a,option:ha,ngBind:wo,ngBindHtml:xo,ngBindTemplate:$o,ngClass:So,ngClassEven:Eo,ngClassOdd:Ao,ngCloak:jo,ngController:Oo,ngForm:Br,ngHide:ia,ngIf:Mo,ngInclude:Po,ngInit:Ro,ngNonBindable:Jo,ngPluralize:ta,ngRepeat:ea,ngShow:na,ngStyle:ra,ngSwitch:oa,ngSwitchWhen:aa,ngSwitchDefault:sa,ngOptions:Zo,ngTransclude:la,ngModel:Ho,ngList:Do,ngChange:ko,pattern:ga,ngPattern:ga,required:ma,ngRequired:ma,minlength:ba,ngMinlength:ba,maxlength:va,ngMaxlength:va,ngValue:yo,ngModelOptions:Yo}).directive({ngInclude:Io}).directive(zr).directive(To),t.provider({$anchorScroll:Qe,$animate:on,$animateCss:cn,$$animateJs:nn,$$animateQueue:rn,$$AnimateRunner:sn,$$animateAsyncRun:an,$browser:un,$cacheFactory:dn,$controller:Cn,$document:Sn,$$isDocumentHidden:An,$exceptionHandler:En,$filter:ur,$$forceReflow:jn,$interpolate:Yn,$interval:Kn,$http:Bn,$httpParamSerializer:Dn,$httpParamSerializerJQLike:zn,$httpBackend:Wn,$xhrFactory:Hn,$jsonpCallbacks:Jn,$location:_i,$log:hi,$parse:Ii,$rootScope:Vi,$q:Ri,$$q:Di,$sce:Qi,$sceDelegate:Ji,$sniffer:Xi,$templateCache:pn,$templateRequest:tr,$$testability:er,$timeout:nr,$window:sr,$$rAF:Ui,$$jqLite:Re,$$Map:Fe,$$cookieReader:lr})}]).info({angularVersion:"1.6.6"})}(y),y.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,i){var r=0|t,o=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var i=Math.pow(10,n);return{v:n,f:(t*i|0)%i}}(t,i);return 1==r&&0==o.v?e:n}})}]),d(function(){Et(t.document,jt)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},,function(t,e,n){"use strict";e.isFunction=function(t){return"function"==typeof t}},function(t,e,n){"use strict";var i,r=n(46);function o(){try{return i.apply(this,arguments)}catch(t){return r.errorObject.e=t,r.errorObject}}e.tryCatch=function(t){return i=t,o}},function(t,e,n){"use strict";var i=n(11).root.Symbol;e.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,n){"use strict";var i=n(11);function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}e.getSymbolObservable=r,e.observable=r(i.root),e.$$observable=e.observable},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return i(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.done,n=t.value,i=t.subscriber;e?i.complete():(i.next(n),i.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.value,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t});t.next(n),t.closed||t.complete()},e}(n(0).Observable);e.ScalarObservable=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(e){t.call(this),this.scheduler=e}return i(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(n(0).Observable);e.EmptyObservable=r},function(t,e,n){"use strict";var i=n(11);function r(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var n=t.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var i=t.Map;if(i)for(var r=Object.getOwnPropertyNames(i.prototype),o=0;o<r.length;++o){var a=r[o];if("entries"!==a&&"size"!==a&&i.prototype[a]===i.prototype.entries)return a}return"@@iterator"}e.symbolIteratorPonyfill=r,e.iterator=r(i.root),e.$$iterator=e.iterator},function(t,e,n){"use strict";var i=n(627),r=n(629);e.async=new r.AsyncScheduler(i.AsyncAction)},function(t,e,n){var i,r;r=this,void 0===(i=function(){return function(t){"use strict";var e=t&&t.I18n||{},n=Array.prototype.slice,i=function(t){return("0"+t.toString()).substr(-2)},r=function(t){var e=typeof t;return"function"===e||"object"===e},o=function(t){var e=typeof t;return"function"===e},a=function(t){return null!=t},s=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},c=function(t){return"string"==typeof value||"[object String]"===Object.prototype.toString.call(t)},l=function(t){return!0===t||!1===t},u=function(t,e,n){return void 0===n||0==+n?Math[t](e):(e=+e,n=+n,isNaN(e)||"number"!=typeof n||n%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math[t](+(e[0]+"e"+(e[1]?+e[1]-n:-n)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+n:n))))},d=function(t,e){return o(t)?t(e):t},p=function(t,e){var n,i,r;for(n in e)e.hasOwnProperty(n)&&(i=e[n],c(i)||"number"==typeof(r=i)||"[object Number]"===Object.prototype.toString.call(r)||l(i)?t[n]=i:(null==t[n]&&(t[n]={}),p(t[n],i)));return t},f={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},_={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},h={unit:"$",precision:2,format:"%u%n",sign_first:!0,delimiter:",",separator:"."},m={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""},g=[null,"kb","mb","gb","tb"],v={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{},missingBehaviour:"message",missingTranslationPrefix:""};return e.reset=function(){var t;for(t in v)this[t]=v[t]},e.initializeOptions=function(){var t;for(t in v)a(this[t])||(this[t]=v[t])},e.initializeOptions(),e.locales={},e.locales.get=function(t){var n=this[t]||this[e.locale]||this.default;return o(n)&&(n=n(t)),!1===s(n)&&(n=[n]),n},e.locales.default=function(t){var n,i=[],r=[];return t&&i.push(t),!t&&e.locale&&i.push(e.locale),e.fallbacks&&e.defaultLocale&&i.push(e.defaultLocale),i.forEach(function(t){n=t.split("-")[0],~r.indexOf(t)||r.push(t),e.fallbacks&&n&&n!==t&&!~r.indexOf(n)&&r.push(n)}),i.length||i.push("en"),r},e.pluralization={},e.pluralization.get=function(t){return this[t]||this[e.locale]||this.default},e.pluralization.default=function(t){switch(t){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},e.currentLocale=function(){return this.locale||this.defaultLocale},e.isSet=a,e.lookup=function(t,e){e=this.prepareOptions(e);var n,i,r,o,s=this.locales.get(e.locale).slice();for(s[0],r=this.getFullScope(t,e);s.length;)if(n=s.shift(),i=r.split(this.defaultSeparator),o=this.translations[n]){for(;i.length&&null!=(o=o[i.shift()]););if(null!=o)return o}if(a(e.defaultValue))return d(e.defaultValue,t)},e.pluralizationLookupWithoutFallback=function(t,e,n){var i,o,s=this.pluralization.get(e)(t);if(r(n))for(;s.length;)if(i=s.shift(),a(n[i])){o=n[i];break}return o},e.pluralizationLookup=function(t,e,n){n=this.prepareOptions(n);var i,o,s,c,l=this.locales.get(n.locale).slice();for(l[0],e=this.getFullScope(e,n);l.length;)if(i=l.shift(),o=e.split(this.defaultSeparator),s=this.translations[i]){for(;o.length&&(s=s[o.shift()],r(s));)0==o.length&&(c=this.pluralizationLookupWithoutFallback(t,i,s));if(null!=c&&null!=c)break}return null!=c&&null!=c||a(n.defaultValue)&&(c=r(n.defaultValue)?this.pluralizationLookupWithoutFallback(t,n.locale,n.defaultValue):n.defaultValue,s=n.defaultValue),{message:c,translations:s}},e.meridian=function(){var t=this.lookup("time"),e=this.lookup("date");return t&&t.am&&t.pm?[t.am,t.pm]:e&&e.meridian?e.meridian:f.meridian},e.prepareOptions=function(){for(var t,e=n.call(arguments),i={};e.length;)if("object"==typeof(t=e.shift()))for(var r in t)t.hasOwnProperty(r)&&(a(i[r])||(i[r]=t[r]));return i},e.createTranslationOptions=function(t,e){var n=[{scope:t}];return a(e.defaults)&&(n=n.concat(e.defaults)),a(e.defaultValue)&&(n.push({message:e.defaultValue}),delete e.defaultValue),n},e.translate=function(t,e){e=this.prepareOptions(e);var n,i=this.prepareOptions(e);return this.createTranslationOptions(t,e).some(function(i){if(a(i.scope)?n=this.lookup(i.scope,e):a(i.message)&&(n=d(i.message,t)),null!=n)return!0},this)?("string"==typeof n?n=this.interpolate(n,e):r(n)&&a(e.count)&&(n=this.pluralize(e.count,t,i)),n):this.missingTranslation(t,e)},e.interpolate=function(t,e){e=this.prepareOptions(e);var n,i,r,o,s=t.match(this.placeholder);if(!s)return t;for(;s.length;)i=(n=s.shift()).replace(this.placeholder,"$1"),o=a(e[i])?e[i].toString().replace(/\$/gm,"_#$#_"):i in e?this.nullPlaceholder(n,t,e):this.missingPlaceholder(n,t,e),r=new RegExp(n.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),t=t.replace(r,o);return t.replace(/_#\$#_/g,"$")},e.pluralize=function(t,e,n){var i,r;return n=this.prepareOptions(n),null==(r=this.pluralizationLookup(t,e,n)).translations||null==r.translations?this.missingTranslation(e,n):(n.count=String(t),null!=r.message&&null!=r.message?this.interpolate(r.message,n):(i=this.pluralization.get(n.locale),this.missingTranslation(e+"."+i(t)[0],n)))},e.missingTranslation=function(t,e){if("guess"==this.missingBehaviour){var n=t.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length>0?this.missingTranslationPrefix:"")+n.replace("_"," ").replace(/([a-z])([A-Z])/g,function(t,e,n){return e+" "+n.toLowerCase()})}return'[missing "'+[null!=e&&null!=e.locale?e.locale:this.currentLocale(),this.getFullScope(t,e)].join(this.defaultSeparator)+'" translation]'},e.missingPlaceholder=function(t,e,n){return"[missing "+t+" value]"},e.nullPlaceholder=function(){return e.missingPlaceholder.apply(e,arguments)},e.toNumber=function(t,e){e=this.prepareOptions(e,this.lookup("number.format"),_);var n,i,r=t<0,o=function(t,e){return u("round",t,-e).toFixed(e)}(Math.abs(t),e.precision).toString().split("."),a=[],s=e.format||"%n",c=r?"-":"";for(t=o[0],n=o[1];t.length>0;)a.unshift(t.substr(Math.max(0,t.length-3),3)),t=t.substr(0,t.length-3);return i=a.join(e.delimiter),e.strip_insignificant_zeros&&n&&(n=n.replace(/0+$/,"")),e.precision>0&&n&&(i+=e.separator+n),i=(s=e.sign_first?"%s"+s:s.replace("%n","%s%n")).replace("%u",e.unit).replace("%n",i).replace("%s",c)},e.toCurrency=function(t,e){return e=this.prepareOptions(e,this.lookup("number.currency.format"),this.lookup("number.format"),h),this.toNumber(t,e)},e.localize=function(t,e,n){switch(n||(n={}),t){case"currency":return this.toCurrency(e);case"number":return t=this.lookup("number.format"),this.toNumber(e,t);case"percentage":return this.toPercentage(e);default:var i;return i=t.match(/^(date|time)/)?this.toTime(t,e):e.toString(),this.interpolate(i,n)}},e.parseDate=function(t){var e,n,i;if("object"==typeof t)return t;if(e=t.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var r=1;r<=6;r++)e[r]=parseInt(e[r],10)||0;e[2]-=1,i=e[7]?1e3*("0"+e[7]):null,n=e[8]?new Date(Date.UTC(e[1],e[2],e[3],e[4],e[5],e[6],i)):new Date(e[1],e[2],e[3],e[4],e[5],e[6],i)}else"number"==typeof t?(n=new Date).setTime(t):t.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(n=new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" "))):(t.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/),(n=new Date).setTime(Date.parse(t)));return n},e.strftime=function(t,n){var r=this.lookup("date"),o=e.meridian();if(r||(r={}),r=this.prepareOptions(r,f),isNaN(t.getTime()))throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.");var a=t.getDay(),s=t.getDate(),c=t.getFullYear(),l=t.getMonth()+1,u=t.getHours(),d=u,p=u>11?1:0,_=t.getSeconds(),h=t.getMinutes(),m=t.getTimezoneOffset(),g=Math.floor(Math.abs(m/60)),v=Math.abs(m)-60*g,b=(m>0?"-":"+")+(g.toString().length<2?"0"+g:g)+(v.toString().length<2?"0"+v:v);return d>12?d-=12:0===d&&(d=12),n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace("%a",r.abbr_day_names[a])).replace("%A",r.day_names[a])).replace("%b",r.abbr_month_names[l])).replace("%B",r.month_names[l])).replace("%d",i(s))).replace("%e",s)).replace("%-d",s)).replace("%H",i(u))).replace("%-H",u)).replace("%I",i(d))).replace("%-I",d)).replace("%m",i(l))).replace("%-m",l)).replace("%M",i(h))).replace("%-M",h)).replace("%p",o[p])).replace("%S",i(_))).replace("%-S",_)).replace("%w",a)).replace("%y",i(c))).replace("%-y",i(c).replace(/^0+/,""))).replace("%Y",c)).replace("%z",b)},e.toTime=function(t,e){var n=this.parseDate(e),i=this.lookup(t);return n.toString().match(/invalid/i)?n.toString():i?this.strftime(n,i):n.toString()},e.toPercentage=function(t,e){return e=this.prepareOptions(e,this.lookup("number.percentage.format"),this.lookup("number.format"),m),this.toNumber(t,e)},e.toHumanSize=function(t,e){for(var n,i,r=t,o=0;r>=1024&&o<4;)r/=1024,o+=1;return 0===o?(n=this.t("number.human.storage_units.units.byte",{count:r}),i=0):(n=this.t("number.human.storage_units.units."+g[o]),i=r-Math.floor(r)==0?0:1),e=this.prepareOptions(e,{unit:n,precision:i,format:"%n%u",delimiter:""}),this.toNumber(r,e)},e.getFullScope=function(t,e){return e=this.prepareOptions(e),s(t)&&(t=t.join(this.defaultSeparator)),e.scope&&(t=[e.scope,t].join(this.defaultSeparator)),t},e.extend=function(t,e){return void 0===t&&void 0===e?{}:p(t,e)},e.t=e.translate,e.l=e.localize,e.p=e.pluralize,e}(r)}.call(e,n,e,t))||(t.exports=i)},,,,,,,,,,function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c,l=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&f())}function f(){if(!u){var t=s(p);u=!0;for(var e=l.length;e;){for(c=l,l=[];++d<e;)c&&c[d].run();d=-1,e=l.length}c=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function h(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new _(t,e)),1!==l.length||u||s(f)},_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){(function(e){t.exports=e.bowser=n(275)}).call(this,n(1))},function(t,e){var n;(n=jQuery).fn.extend({autocomplete:function(t,e){var i="string"==typeof t;return(e=n.extend({},n.Autocompleter.defaults,{url:i?t:null,data:i?null:t,delay:i?n.Autocompleter.defaults.delay:10,max:e&&!e.scroll?10:150},e)).highlight=e.highlight||function(t){return t},e.formatMatch=e.formatMatch||e.formatItem,this.each(function(){new n.Autocompleter(this,e)})},result:function(t){return this.bind("result",t)},search:function(t){return this.trigger("search",[t])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(t){return this.trigger("setOptions",[t])},unautocomplete:function(){return this.trigger("unautocomplete")}}),n.Autocompleter=function(t,e){var i,r,o,a={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},s=n(t).attr("autocomplete","off").addClass(e.inputClass),c="",l=n.Autocompleter.Cache(e),u=0,d={mouseDownOnSelect:!1},p=n.Autocompleter.Select(e,t,f,d);function f(){var i=p.selected();if(!i)return!1;var r=i.result;if(c=r,e.multiple){var o=h(s.val());if(o.length>1){var a,l=e.multipleSeparator.length,u=n(t).selection().start,d=0;n.each(o,function(t,e){if(d+=e.length,u<=d)return a=t,!1;d+=l}),o[a]=r,r=o.join(e.multipleSeparator)}r+=e.multipleSeparator}return s.val(r),g(),s.trigger("result",[i.data,i.value]),!0}function _(t,n){if(r!=a.DEL){var i=s.val();(n||i!=c)&&(c=i,(i=m(i)).length>=e.minChars?(s.addClass(e.loadingClass),b(i,v,g)):(y(),p.hide()))}else p.hide()}function h(t){return t?e.multiple?n.map(t.split(e.multipleSeparator),function(e){return n.trim(t).length?n.trim(e):null}):[n.trim(t)]:[""]}function m(i){if(!e.multiple)return i;var r=h(i);if(1==r.length)return r[0];var o=n(t).selection().start;return(r=o==i.length?h(i):h(i.replace(i.substring(o),"")))[r.length-1]}function g(){p.visible(),p.hide(),clearTimeout(i),y(),e.mustMatch&&s.search(function(t){if(!t)if(e.multiple){var n=h(s.val()).slice(0,-1);s.val(n.join(e.multipleSeparator)+(n.length?e.multipleSeparator:""))}else s.val(""),s.trigger("result",null)})}function v(i,o){o&&o.length&&u?(y(),p.display(o,i),function(i,o){e.autoFill&&m(s.val()).toLowerCase()==i.toLowerCase()&&r!=a.BACKSPACE&&(s.val(s.val()+o.substring(m(c).length)),n(t).selection(c.length,c.length+o.length))}(i,o[0].value),p.show()):g()}function b(i,r,o){var a=i;e.matchCase||(i=i.toLowerCase());var s=l.load(i);if(s&&s.length)r(i,s);else if("string"==typeof e.url&&e.url.length>0){var c={timestamp:+new Date};n.each(e.extraParams,function(t,e){c[t]="function"==typeof e?e():e}),n.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:e.dataType,url:e.url,data:n.extend({q:m(i),limit:e.max},c),success:function(t){var o=e.parse&&e.parse(t,a)||function(t){for(var i=[],r=t.split("\n"),o=0;o<r.length;o++){var a=n.trim(r[o]);a&&(a=a.split("|"),i[i.length]={data:a,value:a[0],result:e.formatResult&&e.formatResult(a,a[0])||a[0]})}return i}(t);l.add(i,o),r(i,o)}})}else p.emptyList(),o(i)}function y(){s.removeClass(e.loadingClass)}n.browser.opera&&n(t.form).bind("submit.autocomplete",function(){if(o)return o=!1,!1}),s.bind((n.browser.opera?"keypress":"keydown")+".autocomplete",function(t){switch(u=1,r=t.keyCode,t.keyCode){case a.UP:t.preventDefault(),p.visible()?p.prev():_(0,!0);break;case a.DOWN:t.preventDefault(),p.visible()?p.next():_(0,!0);break;case a.PAGEUP:t.preventDefault(),p.visible()?p.pageUp():_(0,!0);break;case a.PAGEDOWN:t.preventDefault(),p.visible()?p.pageDown():_(0,!0);break;case e.multiple&&","==n.trim(e.multipleSeparator)&&a.COMMA:case a.TAB:case a.RETURN:if(f())return t.preventDefault(),o=!0,!1;break;case a.ESC:p.hide();break;default:clearTimeout(i),i=setTimeout(_,e.delay)}}).focus(function(){u++}).blur(function(){u=0,d.mouseDownOnSelect||(clearTimeout(i),i=setTimeout(g,200))}).click(function(){u++>1&&!p.visible()&&_(0,!0)}).bind("search",function(){var t=arguments.length>1?arguments[1]:null;function e(e,n){var i;if(n&&n.length)for(var r=0;r<n.length;r++)if(n[r].result.toLowerCase()==e.toLowerCase()){i=n[r];break}"function"==typeof t?t(i):s.trigger("result",i&&[i.data,i.value])}n.each(h(s.val()),function(t,n){b(n,e,e)})}).bind("flushCache",function(){l.flush()}).bind("setOptions",function(){n.extend(e,arguments[1]),"data"in arguments[1]&&l.populate()}).bind("unautocomplete",function(){p.unbind(),s.unbind(),n(t.form).unbind(".autocomplete")})},n.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(t){return t[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(t,e){return t.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180},n.Autocompleter.Cache=function(t){var e={},i=0;function r(e,n){t.matchCase||(e=e.toLowerCase());var i=e.indexOf(n);return"word"==t.matchContains&&(i=e.toLowerCase().search("\\b"+n.toLowerCase())),-1!=i&&(0==i||t.matchContains)}function o(n,r){i>t.cacheLength&&s(),e[n]||i++,e[n]=r}function a(){if(!t.data)return!1;var e={},i=0;t.url||(t.cacheLength=1),e[""]=[];for(var r=0,a=t.data.length;r<a;r++){var s=t.data[r];s="string"==typeof s?[s]:s;var c=t.formatMatch(s,r+1,t.data.length);if(!1!==c){var l=c.charAt(0).toLowerCase();e[l]||(e[l]=[]);var u={value:c,data:s,result:t.formatResult&&t.formatResult(s)||c};e[l].push(u),i++<t.max&&e[""].push(u)}}n.each(e,function(e,n){t.cacheLength++,o(e,n)})}function s(){e={},i=0}return setTimeout(a,25),{flush:s,add:o,populate:a,load:function(o){if(!t.cacheLength||!i)return null;if(!t.url&&t.matchContains){var a=[];for(var s in e)if(s.length>0){var c=e[s];n.each(c,function(t,e){r(e.value,o)&&a.push(e)})}return a}if(e[o])return e[o];if(t.matchSubset)for(var l=o.length-1;l>=t.minChars;l--)if(c=e[o.substr(0,l)])return a=[],n.each(c,function(t,e){r(e.value,o)&&(a[a.length]=e)}),a;return null}}},n.Autocompleter.Select=function(t,e,i,r){var o,a,s,c,l={ACTIVE:"ac_over"},u=-1,d="",p=!0;function f(t){for(var e=t.target;e&&"LI"!=e.tagName;)e=e.parentNode;return e||[]}function _(e){o.slice(u,u+1).removeClass(l.ACTIVE),function(t){(u+=t)<0?u=o.size()-1:u>=o.size()&&(u=0)}(e);var n=o.slice(u,u+1).addClass(l.ACTIVE);if(t.scroll){var i=0;o.slice(0,u).each(function(){i+=this.offsetHeight}),i+n[0].offsetHeight-c.scrollTop()>c[0].clientHeight?c.scrollTop(i+n[0].offsetHeight-c.innerHeight()):i<c.scrollTop()&&c.scrollTop(i)}}function h(){c.empty();for(var e,i=(e=a.length,t.max&&t.max<e?t.max:e),r=0;r<i;r++)if(a[r]){var s=t.formatItem(a[r].data,r+1,i,a[r].value,d);if(!1!==s){var p=n("<li/>").html(t.highlight(s,d)).addClass(r%2==0?"ac_even":"ac_odd").appendTo(c)[0];n.data(p,"ac_data",a[r])}}o=c.find("li"),t.selectFirst&&(o.slice(0,1).addClass(l.ACTIVE),u=0),n.fn.bgiframe&&c.bgiframe()}return{display:function(o,_){p&&(s=n("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body),c=n("<ul/>").appendTo(s).mouseover(function(t){f(t).nodeName&&"LI"==f(t).nodeName.toUpperCase()&&(u=n("li",c).removeClass(l.ACTIVE).index(f(t)),n(f(t)).addClass(l.ACTIVE))}).click(function(t){return n(f(t)).addClass(l.ACTIVE),i(),e.focus(),!1}).mousedown(function(){r.mouseDownOnSelect=!0}).mouseup(function(){r.mouseDownOnSelect=!1}),t.width>0&&s.css("width",t.width),p=!1),a=o,d=_,h()},next:function(){_(1)},prev:function(){_(-1)},pageUp:function(){_(0!=u&&u-8<0?-u:-8)},pageDown:function(){u!=o.size()-1&&u+8>o.size()?_(o.size()-1-u):_(8)},hide:function(){s&&s.hide(),o&&o.removeClass(l.ACTIVE),u=-1},visible:function(){return s&&s.is(":visible")},current:function(){return this.visible()&&(o.filter("."+l.ACTIVE)[0]||t.selectFirst&&o[0])},show:function(){var i=n(e).offset();if(s.css({width:"string"==typeof t.width||t.width>0?t.width:n(e).width(),top:i.top+e.offsetHeight,left:i.left}).show(),t.scroll&&(c.scrollTop(0),c.css({maxHeight:t.scrollHeight,overflow:"auto"}),n.browser.msie&&void 0===document.body.style.maxHeight)){var r=0;o.each(function(){r+=this.offsetHeight});var a=r>t.scrollHeight;c.css("height",a?t.scrollHeight:r),a||o.width(c.width()-parseInt(o.css("padding-left"))-parseInt(o.css("padding-right")))}},selected:function(){var t=o&&o.filter("."+l.ACTIVE).removeClass(l.ACTIVE);return t&&t.length&&n.data(t[0],"ac_data")},emptyList:function(){c&&c.empty()},unbind:function(){s&&s.remove()}}},n.fn.selection=function(t,e){if(void 0!==t)return this.each(function(){if(this.createTextRange){var n=this.createTextRange();void 0===e||t==e?(n.move("character",t),n.select()):(n.collapse(!0),n.moveStart("character",t),n.moveEnd("character",e),n.select())}else this.setSelectionRange?this.setSelectionRange(t,e):this.selectionStart&&(this.selectionStart=t,this.selectionEnd=e)});var n=this[0];if(n.createTextRange){var i=document.selection.createRange(),r=n.value,o=i.text.length;i.text="<->";var a=n.value.indexOf("<->");return n.value=r,this.selection(a,a+o),{start:a,end:a+o}}return void 0!==n.selectionStart?{start:n.selectionStart,end:n.selectionEnd}:void 0}},function(t,e,n){"use strict";n.r(e);var i=n(0);n.d(e,"Observable",function(){return i.Observable});var r=n(48);n.d(e,"ConnectableObservable",function(){return r.ConnectableObservable});var o=n(47);n.d(e,"Subject",function(){return o.Subject});n(609),n(613),n(616),n(618),n(621),n(624),n(625),n(637),n(640),n(643),n(646),n(650),n(653),n(656),n(661),n(664),n(667),n(678),n(681);Object.assign(i.Observable,{always:function(t){return i.Observable.never().startWith(t)},$watch:function(t,e,n){return i.Observable.create(function(i){return t.$on("$destroy",i.complete.bind(i)),t.$watch(e,i.next.bind(i),n)})},fromPendingPromise:function(t){return i.Observable.create(function(e){e.next({pending:!0,value:null,error:null}),t.then(function(t){e.next({pending:!1,value:t,error:null}),e.complete()},function(t){e.next({pending:!1,value:null,error:t}),e.complete()})})}}),Object.assign(r.ConnectableObservable.prototype,{persist:function(){return this.connect(),this}}),Object.assign(i.Observable.prototype,{accumulate:function(){return this.scan(function(t,e){return t.concat(e)},[])},accumulateLatest:function(){return this.accumulate().switchMap(function(t){return i.Observable.combineLatest(t)})}})},function(t,e,n){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,n){"use strict";e.noop=function(){}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return i(e,t),e}(Error);e.ObjectUnsubscribedError=r},function(t,e,n){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length}},function(t,e,n){"use strict";e.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(11),o=function(t){function e(e,n){t.call(this),this.promise=e,this.scheduler=n}return i(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=this.promise,i=this.scheduler;if(null==i)this._isScalar?t.closed||(t.next(this.value),t.complete()):n.then(function(n){e.value=n,e._isScalar=!0,t.closed||(t.next(n),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){r.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return i.schedule(a,0,{value:this.value,subscriber:t})}else n.then(function(n){e.value=n,e._isScalar=!0,t.closed||t.add(i.schedule(a,0,{value:n,subscriber:t}))},function(e){t.closed||t.add(i.schedule(s,0,{err:e,subscriber:t}))}).then(null,function(t){r.root.setTimeout(function(){throw t})})},e}(n(0).Observable);function a(t){var e=t.value,n=t.subscriber;n.closed||(n.next(e),n.complete())}function s(t){var e=t.err,n=t.subscriber;n.closed||n.error(e)}e.PromiseObservable=o},function(t,e,n){"use strict";var i=n(131),r=n(620);e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),i.mergeMap(r.identity,null,t)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(22),o=n(21);e.mergeMap=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(i){return"number"==typeof e&&(n=e,e=null),i.lift(new a(t,e,n))}};var a=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=a;var s=function(t){function e(e,n,i,r){void 0===r&&(r=Number.POSITIVE_INFINITY),t.call(this,e),this.project=n,this.resultSelector=i,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(r.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,r){this.resultSelector?this._notifyResultSelector(t,e,n,i):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,n,i){var r;try{r=this.resultSelector(t,e,n,i)}catch(t){return void this.destination.error(t)}this.destination.next(r)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeMapSubscriber=s},function(t,e,n){"use strict";var i=n(20);e.of=i.ArrayObservable.of},function(t,e){angular.module("genius").factory("PlayerJS",["$window",function(t){return t.playerjs}])},function(t,e,n){var i,r;/*! tether 1.3.1 */void 0===(r="function"==typeof(i=function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=void 0;void 0===o&&(o={modules:[]});var a=null;function s(t){var e=getComputedStyle(t)||{},n=e.position,i=[];if("fixed"===n)return[t];for(var r=t;(r=r.parentNode)&&r&&1===r.nodeType;){var o=void 0;try{o=getComputedStyle(r)}catch(t){}if(null==o)return i.push(r),i;var a=o,s=a.overflow,c=a.overflowX,l=a.overflowY;/(auto|scroll)/.test(s+l+c)&&("absolute"!==n||["relative","absolute","fixed"].indexOf(o.position)>=0)&&i.push(r)}return i.push(document.body),i}var c,l=(c=0,function(){return++c}),u={},d=function(){var t=a;t||((t=document.createElement("div")).setAttribute("data-tether-id",l()),m(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),a=t);var e=t.getAttribute("data-tether-id");if(void 0===u[e]){u[e]={};var n=t.getBoundingClientRect();for(var i in n)u[e][i]=n[i];k(function(){delete u[e]})}return u[e]};function p(){a&&document.body.removeChild(a),a=null}function f(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var n=e.documentElement,i={},r=t.getBoundingClientRect();for(var o in r)i[o]=r[o];var a=d();return i.top-=a.top,i.left-=a.left,void 0===i.width&&(i.width=document.body.scrollWidth-i.left-i.right),void 0===i.height&&(i.height=document.body.scrollHeight-i.top-i.bottom),i.top=i.top-n.clientTop,i.left=i.left-n.clientLeft,i.right=e.body.clientWidth-i.width-i.left,i.bottom=e.body.clientHeight-i.height-i.top,i}function _(t){return t.offsetParent||document.documentElement}function h(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");m(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;n===i&&(i=e.clientWidth),document.body.removeChild(e);var r=n-i;return{width:r,height:r}}function m(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var n in e)({}).hasOwnProperty.call(e,n)&&(t[n]=e[n])}),t}function g(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var n=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),i=y(t).replace(n," ");w(t,i)}}function v(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{g(t,e);var n=y(t)+" "+e;w(t,n)}}function b(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=y(t);return new RegExp("(^| )"+e+"( |$)","gi").test(n)}function y(t){return t.className instanceof SVGAnimatedString?t.className.baseVal:t.className}function w(t,e){t.setAttribute("class",e)}function $(t,e,n){n.forEach(function(n){-1===e.indexOf(n)&&b(t,n)&&g(t,n)}),e.forEach(function(e){b(t,e)||v(t,e)})}var x=[],k=function(t){x.push(t)},C=function(){for(var t=void 0;t=x.pop();)t()},S=function(){function t(){r(this,t)}return i(t,[{key:"on",value:function(t,e,n){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:n,once:i})}},{key:"once",value:function(t,e,n){this.on(t,e,n,!0)}},{key:"off",value:function(t,e){if(void 0===this.bindings||void 0===this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var n=0;n<this.bindings[t].length;)this.bindings[t][n].handler===e?this.bindings[t].splice(n,1):++n}},{key:"trigger",value:function(t){if(void 0!==this.bindings&&this.bindings[t]){for(var e=0,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(;e<this.bindings[t].length;){var o=this.bindings[t][e],a=o.handler,s=o.ctx,c=o.once,l=s;void 0===l&&(l=this),a.apply(l,i),c?this.bindings[t].splice(e,1):++e}}}}]),t}();o.Utils={getScrollParents:s,getBounds:f,getOffsetParent:_,extend:m,addClass:v,removeClass:g,hasClass:b,updateClasses:$,defer:k,flush:C,uniqueId:l,Evented:S,getScrollBarSize:h,removeUtilElements:p};var A=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),E=function(t,e,n){for(var i=!0;i;){var r=t,o=e,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var c=s.get;if(void 0===c)return;return c.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;t=l,e=o,n=a,i=!0,s=l=void 0}};function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}if(void 0===o)throw new Error("You must include the utils.js file before tether.js");var s=(K=o.Utils).getScrollParents,f=K.getBounds,_=K.getOffsetParent,m=K.extend,v=K.addClass,g=K.removeClass,$=K.updateClasses,k=K.defer,C=K.flush,h=K.getScrollBarSize,p=K.removeUtilElements;function j(t,e){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+n>=e&&e>=t-n}var O,T,q,M,P=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","webkitTransform","OTransform","MozTransform","msTransform"],n=0;n<e.length;++n){var i=e[n];if(void 0!==t.style[i])return i}}(),I=[],R=function(){I.forEach(function(t){t.position(!1)}),C()};function D(){return"undefined"!=typeof performance&&void 0!==performance.now?performance.now():+new Date}O=null,T=null,q=null,M=function t(){if(void 0!==T&&T>16)return T=Math.min(T-16,250),void(q=setTimeout(t,250));void 0!==O&&D()-O<10||(null!=q&&(clearTimeout(q),q=null),O=D(),R(),T=D()-O)},"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,M)});var z={center:"center",left:"right",right:"left"},L={middle:"middle",top:"bottom",bottom:"top"},N={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},F=function(t){var e=t.left,n=t.top;return void 0!==N[t.left]&&(e=N[t.left]),void 0!==N[t.top]&&(n=N[t.top]),{left:e,top:n}};function U(){for(var t={top:0,left:0},e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach(function(e){var n=e.top,i=e.left;"string"==typeof n&&(n=parseFloat(n,10)),"string"==typeof i&&(i=parseFloat(i,10)),t.top+=n,t.left+=i}),t}function V(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}var B=function(t){var e=t.split(" "),n=A(e,2),i=n[0],r=n[1];return{top:i,left:r}},H=B,W=function(t){function e(t){var n=this;r(this,e),E(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.position=this.position.bind(this),I.push(this),this.history=[],this.setOptions(t,!1),o.modules.forEach(function(t){void 0!==t.initialize&&t.initialize.call(n)}),this.position()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return void 0!==e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]||arguments[1];this.options=m({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},t);var i=this.options,r=i.element,o=i.target,a=i.targetModifier;if(this.element=r,this.target=o,this.targetModifier=a,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if(void 0===e[t])throw new Error("Tether Error: Both element and target must be defined");void 0!==e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),v(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&v(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=H(this.options.targetAttachment),this.attachment=H(this.options.attachment),this.offset=B(this.options.offset),this.targetOffset=B(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=s(this.target),!1!==this.options.enabled&&this.enable(n)}},{key:"getTargetBounds",value:function(){if(void 0===this.targetModifier)return f(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=f(this.target),e={height:t.height,width:t.width,top:t.top,left:t.left};return e.height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e}if("scroll-handle"===this.targetModifier){var t=void 0,n=this.target;n===document.body?(n=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=f(n);var i=getComputedStyle(n),r=n.scrollWidth>n.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body,o=0;r&&(o=15);var a=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-o,e={width:15,height:.975*a*(a/n.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},s=0;a<408&&this.target===document.body&&(s=-11e-5*Math.pow(a,2)-.00727*a+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24));var c=this.target.scrollTop/(n.scrollHeight-a);return e.top=c*(a-e.height-s)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return void 0===this._cache&&(this._cache={}),void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&v(this.target,this.getClass("enabled")),v(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==document&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;g(this.target,this.getClass("enabled")),g(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),I.forEach(function(e,n){e===t&&I.splice(n,1)}),0===I.length&&p()}},{key:"updateAttachClasses",value:function(t,e){var n=this;t=t||this.attachment,e=e||this.targetAttachment,void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var i=this._addAttachClasses;t.top&&i.push(this.getClass("element-attached")+"-"+t.top),t.left&&i.push(this.getClass("element-attached")+"-"+t.left),e.top&&i.push(this.getClass("target-attached")+"-"+e.top),e.left&&i.push(this.getClass("target-attached")+"-"+e.left);var r=[];["left","top","bottom","right","middle","center"].forEach(function(t){r.push(n.getClass("element-attached")+"-"+t),r.push(n.getClass("target-attached")+"-"+t)}),k(function(){void 0!==n._addAttachClasses&&($(n.element,n._addAttachClasses,r),!1!==n.options.addTargetClasses&&$(n.target,n._addAttachClasses,r),delete n._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var n=function(t,e){var n=t.left,i=t.top;return"auto"===n&&(n=z[e.left]),"auto"===i&&(i=L[e.top]),{left:n,top:i}}(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);var i=this.cache("element-bounds",function(){return f(t.element)}),r=i.width,a=i.height;if(0===r&&0===a&&void 0!==this.lastSize){var s=this.lastSize;r=s.width,a=s.height}else this.lastSize={width:r,height:a};var c=this.cache("target-bounds",function(){return t.getTargetBounds()}),l=c,u=V(F(this.attachment),{width:r,height:a}),d=V(F(n),l),p=V(this.offset,{width:r,height:a}),m=V(this.targetOffset,l);u=U(u,p),d=U(d,m);for(var g=c.left+d.left-u.left,v=c.top+d.top-u.top,b=0;b<o.modules.length;++b){var y=o.modules[b],w=y.position.call(this,{left:g,top:v,targetAttachment:n,targetPos:c,elementPos:i,offset:u,targetOffset:d,manualOffset:p,manualTargetOffset:m,scrollbarSize:x,attachment:this.attachment});if(!1===w)return!1;void 0!==w&&"object"==typeof w&&(v=w.top,g=w.left)}var $={page:{top:v,left:g},viewport:{top:v-pageYOffset,bottom:pageYOffset-v-a+innerHeight,left:g-pageXOffset,right:pageXOffset-g-r+innerWidth}},x=void 0;return document.body.scrollWidth>window.innerWidth&&(x=this.cache("scrollbar-size",h),$.viewport.bottom-=x.height),document.body.scrollHeight>window.innerHeight&&(x=this.cache("scrollbar-size",h),$.viewport.right-=x.width),-1!==["","static"].indexOf(document.body.style.position)&&-1!==["","static"].indexOf(document.body.parentElement.style.position)||($.page.bottom=document.body.scrollHeight-v-a,$.page.right=document.body.scrollWidth-g-r),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var e=t.cache("target-offsetparent",function(){return _(t.target)}),n=t.cache("target-offsetparent-bounds",function(){return f(e)}),i=getComputedStyle(e),r=n,o={};if(["Top","Left","Bottom","Right"].forEach(function(t){o[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),n.right=document.body.scrollWidth-n.left-r.width+o.right,n.bottom=document.body.scrollHeight-n.top-r.height+o.bottom,$.page.top>=n.top+o.top&&$.page.bottom>=n.bottom&&$.page.left>=n.left+o.left&&$.page.right>=n.right){var a=e.scrollTop,s=e.scrollLeft;$.offset={top:$.page.top-n.top+a-o.top,left:$.page.left-n.left+s-o.left}}}(),this.move($),this.history.unshift($),this.history.length>3&&this.history.pop(),e&&C(),!0}}},{key:"move",value:function(t){var e=this;if(void 0!==this.element.parentNode){var n={};for(var i in t)for(var r in n[i]={},t[i]){for(var o=!1,a=0;a<this.history.length;++a){var s=this.history[a];if(void 0!==s[i]&&!j(s[i][r],t[i][r])){o=!0;break}}o||(n[i][r]=!0)}var c={top:"",left:"",right:"",bottom:""},l=function(t,n){var i=void 0!==e.options.optimizations,r=i?e.options.optimizations.gpu:null;if(!1!==r){var o=void 0,a=void 0;t.top?(c.top=0,o=n.top):(c.bottom=0,o=-n.bottom),t.left?(c.left=0,a=n.left):(c.right=0,a=-n.right),c[P]="translateX("+Math.round(a)+"px) translateY("+Math.round(o)+"px)","msTransform"!==P&&(c[P]+=" translateZ(0)")}else t.top?c.top=n.top+"px":c.bottom=n.bottom+"px",t.left?c.left=n.left+"px":c.right=n.right+"px"},u=!1;if((n.page.top||n.page.bottom)&&(n.page.left||n.page.right)?(c.position="absolute",l(n.page,t.page)):(n.viewport.top||n.viewport.bottom)&&(n.viewport.left||n.viewport.right)?(c.position="fixed",l(n.viewport,t.viewport)):void 0!==n.offset&&n.offset.top&&n.offset.left?function(){c.position="absolute";var i=e.cache("target-offsetparent",function(){return _(e.target)});_(e.element)!==i&&k(function(){e.element.parentNode.removeChild(e.element),i.appendChild(e.element)}),l(n.offset,t.offset),u=!0}():(c.position="absolute",l({top:!0,left:!0},t.page)),!u){for(var d=!0,p=this.element.parentNode;p&&1===p.nodeType&&"BODY"!==p.tagName;){if("static"!==getComputedStyle(p).position){d=!1;break}p=p.parentNode}d||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var f={},h=!1;for(var r in c){var g=c[r],v=this.element.style[r];v!==g&&(h=!0,f[r]=g)}h&&k(function(){m(e.element.style,f)})}}}]),e}(S);W.modules=[],o.position=R;var G=m(W,o),A=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},f=(K=o.Utils).getBounds,m=K.extend,$=K.updateClasses,k=K.defer,Y=["left","top","right","bottom"];o.modules.push({position:function(t){var e=this,n=t.top,i=t.left,r=t.targetAttachment;if(!this.options.constraints)return!0;var o=this.cache("element-bounds",function(){return f(e.element)}),a=o.height,s=o.width;if(0===s&&0===a&&void 0!==this.lastSize){var c=this.lastSize;s=c.width,a=c.height}var l=this.cache("target-bounds",function(){return e.getTargetBounds()}),u=l.height,d=l.width,p=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,n=t.pinnedClass;e&&p.push(e),n&&p.push(n)}),p.forEach(function(t){["left","top","right","bottom"].forEach(function(e){p.push(t+"-"+e)})});var _=[],h=m({},r),g=m({},this.attachment);return this.options.constraints.forEach(function(t){var o=t.to,c=t.attachment,l=t.pin;void 0===c&&(c="");var p=void 0,m=void 0;if(c.indexOf(" ")>=0){var v=c.split(" "),b=A(v,2);m=b[0],p=b[1]}else p=m=c;var y=function(t,e){var n,i,r;return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),void 0!==e.nodeType&&(n=f(e),i=n,r=getComputedStyle(e),e=[i.left,i.top,n.width+i.left,n.height+i.top],Y.forEach(function(t,n){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?e[n]+=parseFloat(r["border"+t+"Width"]):e[n]-=parseFloat(r["border"+t+"Width"])})),e}(e,o);"target"!==m&&"both"!==m||(n<y[1]&&"top"===h.top&&(n+=u,h.top="bottom"),n+a>y[3]&&"bottom"===h.top&&(n-=u,h.top="top")),"together"===m&&("top"===h.top&&("bottom"===g.top&&n<y[1]?(n+=u,h.top="bottom",n+=a,g.top="top"):"top"===g.top&&n+a>y[3]&&n-(a-u)>=y[1]&&(n-=a-u,h.top="bottom",g.top="bottom")),"bottom"===h.top&&("top"===g.top&&n+a>y[3]?(n-=u,h.top="top",n-=a,g.top="bottom"):"bottom"===g.top&&n<y[1]&&n+(2*a-u)<=y[3]&&(n+=a-u,h.top="top",g.top="top")),"middle"===h.top&&(n+a>y[3]&&"top"===g.top?(n-=a,g.top="bottom"):n<y[1]&&"bottom"===g.top&&(n+=a,g.top="top"))),"target"!==p&&"both"!==p||(i<y[0]&&"left"===h.left&&(i+=d,h.left="right"),i+s>y[2]&&"right"===h.left&&(i-=d,h.left="left")),"together"===p&&(i<y[0]&&"left"===h.left?"right"===g.left?(i+=d,h.left="right",i+=s,g.left="left"):"left"===g.left&&(i+=d,h.left="right",i-=s,g.left="right"):i+s>y[2]&&"right"===h.left?"left"===g.left?(i-=d,h.left="left",i-=s,g.left="right"):"right"===g.left&&(i-=d,h.left="left",i+=s,g.left="left"):"center"===h.left&&(i+s>y[2]&&"left"===g.left?(i-=s,g.left="right"):i<y[0]&&"right"===g.left&&(i+=s,g.left="left"))),"element"!==m&&"both"!==m||(n<y[1]&&"bottom"===g.top&&(n+=a,g.top="top"),n+a>y[3]&&"top"===g.top&&(n-=a,g.top="bottom")),"element"!==p&&"both"!==p||(i<y[0]&&("right"===g.left?(i+=s,g.left="left"):"center"===g.left&&(i+=s/2,g.left="left")),i+s>y[2]&&("left"===g.left?(i-=s,g.left="right"):"center"===g.left&&(i-=s/2,g.left="right"))),"string"==typeof l?l=l.split(",").map(function(t){return t.trim()}):!0===l&&(l=["top","left","right","bottom"]),l=l||[];var w,$,x=[],k=[];n<y[1]&&(l.indexOf("top")>=0?(n=y[1],x.push("top")):k.push("top")),n+a>y[3]&&(l.indexOf("bottom")>=0?(n=y[3]-a,x.push("bottom")):k.push("bottom")),i<y[0]&&(l.indexOf("left")>=0?(i=y[0],x.push("left")):k.push("left")),i+s>y[2]&&(l.indexOf("right")>=0?(i=y[2]-s,x.push("right")):k.push("right")),x.length&&(w=void 0,w=void 0!==e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),_.push(w),x.forEach(function(t){_.push(w+"-"+t)})),k.length&&($=void 0,$=void 0!==e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),_.push($),k.forEach(function(t){_.push($+"-"+t)})),(x.indexOf("left")>=0||x.indexOf("right")>=0)&&(g.left=h.left=!1),(x.indexOf("top")>=0||x.indexOf("bottom")>=0)&&(g.top=h.top=!1),h.top===r.top&&h.left===r.left&&g.top===e.attachment.top&&g.left===e.attachment.left||(e.updateAttachClasses(g,h),e.trigger("update",{attachment:g,targetAttachment:h}))}),k(function(){!1!==e.options.addTargetClasses&&$(e.target,_,p),$(e.element,_,p)}),{top:n,left:i}}});var K,f=(K=o.Utils).getBounds,$=K.updateClasses,k=K.defer;o.modules.push({position:function(t){var e=this,n=t.top,i=t.left,r=this.cache("element-bounds",function(){return f(e.element)}),o=r.height,a=r.width,s=this.getTargetBounds(),c=n+o,l=i+a,u=[];n<=s.bottom&&c>=s.top&&["left","right"].forEach(function(t){var e=s[t];e!==i&&e!==l||u.push(t)}),i<=s.right&&l>=s.left&&["top","bottom"].forEach(function(t){var e=s[t];e!==n&&e!==c||u.push(t)});var d=[],p=[];return d.push(this.getClass("abutted")),["left","top","right","bottom"].forEach(function(t){d.push(e.getClass("abutted")+"-"+t)}),u.length&&p.push(this.getClass("abutted")),u.forEach(function(t){p.push(e.getClass("abutted")+"-"+t)}),k(function(){!1!==e.options.addTargetClasses&&$(e.target,p,d),$(e.element,p,d)}),!0}});var A=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};return o.modules.push({position:function(t){var e=t.top,n=t.left;if(this.options.shift){var i=this.options.shift;"function"==typeof this.options.shift&&(i=this.options.shift.call(this,{top:e,left:n}));var r=void 0,o=void 0;if("string"==typeof i){(i=i.split(" "))[1]=i[1]||i[0];var a=A(i,2);r=a[0],o=a[1],r=parseFloat(r,10),o=parseFloat(o,10)}else r=i.top,o=i.left;return{top:e+=r,left:n+=o}}}}),G})?i.call(e,n,e,t):i)||(t.exports=r)},,,,,,,,,,,,function(t,e,n){(function(e){t.exports=e.Channel=n(204)}).call(this,n(1))},,function(t,e,n){(function(i,r){var o,a;
/*!
  * https://github.com/paulmillr/es6-shim
  * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
  *   and contributors,  MIT License
  * es6-shim: v0.35.1
  * see https://github.com/paulmillr/es6-shim/blob/0.35.1/LICENSE
  * Details and documentation:
  * https://github.com/paulmillr/es6-shim/
  */void 0===(a="function"==typeof(o=function(){"use strict";var t,e,n=Function.call.bind(Function.apply),o=Function.call.bind(Function.call),a=Array.isArray,s=Object.keys,c=function(t){try{return t(),!1}catch(t){return!0}},l=function(t){try{return t()}catch(t){return!1}},u=(e=c,function(){return!n(e,this,arguments)}),d=!!Object.defineProperty&&!c(function(){Object.defineProperty({},"x",{get:function(){}})}),p="foo"===function(){}.name,f=Function.call.bind(Array.prototype.forEach),_=Function.call.bind(Array.prototype.reduce),h=Function.call.bind(Array.prototype.filter),m=Function.call.bind(Array.prototype.some),g=function(t,e,n,i){!i&&e in t||(d?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n}):t[e]=n)},v=function(t,e,n){f(s(e),function(i){var r=e[i];g(t,i,r,!!n)})},b=Function.call.bind(Object.prototype.toString),y=function(t){return"function"==typeof t},w={getter:function(t,e,n){if(!d)throw new TypeError("getters require true ES5 support");Object.defineProperty(t,e,{configurable:!0,enumerable:!1,get:n})},proxy:function(t,e,n){if(!d)throw new TypeError("getters require true ES5 support");var i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,{configurable:i.configurable,enumerable:i.enumerable,get:function(){return t[e]},set:function(n){t[e]=n}})},redefine:function(t,e,n){if(d){var i=Object.getOwnPropertyDescriptor(t,e);i.value=n,Object.defineProperty(t,e,i)}else t[e]=n},defineByDescriptor:function(t,e,n){d?Object.defineProperty(t,e,n):"value"in n&&(t[e]=n.value)},preserveToString:function(t,e){e&&y(e.toString)&&g(t,"toString",e.toString.bind(e),!0)}},$=Object.create||function(t,e){var n=function(){};n.prototype=t;var i=new n;return void 0!==e&&s(e).forEach(function(t){w.defineByDescriptor(i,t,e[t])}),i},x=function(t,e){return!!Object.setPrototypeOf&&l(function(){var n=function e(n){var i=new t(n);return Object.setPrototypeOf(i,e.prototype),i};return Object.setPrototypeOf(n,t),n.prototype=$(t.prototype,{constructor:{value:n}}),e(n)})},k=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}(),C=k.isFinite,S=Function.call.bind(String.prototype.indexOf),A=Function.apply.bind(Array.prototype.indexOf),E=Function.call.bind(Array.prototype.concat),j=Function.call.bind(String.prototype.slice),O=Function.call.bind(Array.prototype.push),T=Function.apply.bind(Array.prototype.push),q=Function.call.bind(Array.prototype.shift),M=Math.max,P=Math.min,I=Math.floor,R=Math.abs,D=Math.exp,z=Math.log,L=Math.sqrt,N=Function.call.bind(Object.prototype.hasOwnProperty),F=function(){},U=k.Map,V=U&&U.prototype.delete,B=U&&U.prototype.get,H=U&&U.prototype.has,W=U&&U.prototype.set,G=k.Symbol||{},Y=G.species||"@@species",K=Number.isNaN||function(t){return t!=t},J=Number.isFinite||function(t){return"number"==typeof t&&C(t)},Q=y(Math.sign)?Math.sign:function(t){var e=Number(t);return 0===e?e:K(e)?e:e<0?-1:1},X=function(t){return"[object Arguments]"===b(t)},Z=X(arguments)?X:function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==b(t)&&"[object Function]"===b(t.callee)},tt={primitive:function(t){return null===t||"function"!=typeof t&&"object"!=typeof t},string:function(t){return"[object String]"===b(t)},regex:function(t){return"[object RegExp]"===b(t)},symbol:function(t){return"function"==typeof k.Symbol&&"symbol"==typeof t}},et=function(t,e,n){var i=t[e];g(t,e,n,!0),w.preserveToString(t[e],i)},nt="function"==typeof G&&"function"==typeof G.for&&tt.symbol(G()),it=tt.symbol(G.iterator)?G.iterator:"_es6-shim iterator_";k.Set&&"function"==typeof(new k.Set)["@@iterator"]&&(it="@@iterator"),k.Reflect||g(k,"Reflect",{},!0);var rt,ot=k.Reflect,at=String,st="undefined"!=typeof document&&document?document.all:null,ct=null==st?function(t){return null==t}:function(t){return null==t&&t!==st},lt={Call:function(t,e){var i=arguments.length>2?arguments[2]:[];if(!lt.IsCallable(t))throw new TypeError(t+" is not a function");return n(t,e,i)},RequireObjectCoercible:function(t,e){if(ct(t))throw new TypeError(e||"Cannot call method on "+t);return t},TypeIsObject:function(t){return null!=t&&!0!==t&&!1!==t&&("function"==typeof t||"object"==typeof t||t===st)},ToObject:function(t,e){return Object(lt.RequireObjectCoercible(t,e))},IsCallable:y,IsConstructor:function(t){return lt.IsCallable(t)},ToInt32:function(t){return lt.ToNumber(t)>>0},ToUint32:function(t){return lt.ToNumber(t)>>>0},ToNumber:function(t){if("[object Symbol]"===b(t))throw new TypeError("Cannot convert a Symbol value to a number");return+t},ToInteger:function(t){var e=lt.ToNumber(t);return K(e)?0:0!==e&&J(e)?(e>0?1:-1)*I(R(e)):e},ToLength:function(t){var e=lt.ToInteger(t);return e<=0?0:e>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e},SameValue:function(t,e){return t===e?0!==t||1/t==1/e:K(t)&&K(e)},SameValueZero:function(t,e){return t===e||K(t)&&K(e)},IsIterable:function(t){return lt.TypeIsObject(t)&&(void 0!==t[it]||Z(t))},GetIterator:function(e){if(Z(e))return new t(e,"value");var n=lt.GetMethod(e,it);if(!lt.IsCallable(n))throw new TypeError("value is not an iterable");var i=lt.Call(n,e);if(!lt.TypeIsObject(i))throw new TypeError("bad iterator");return i},GetMethod:function(t,e){var n=lt.ToObject(t)[e];if(!ct(n)){if(!lt.IsCallable(n))throw new TypeError("Method not callable: "+e);return n}},IteratorComplete:function(t){return!!t.done},IteratorClose:function(t,e){var n=lt.GetMethod(t,"return");if(void 0!==n){var i,r;try{i=lt.Call(n,t)}catch(t){r=t}if(!e){if(r)throw r;if(!lt.TypeIsObject(i))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(t){var e=arguments.length>1?t.next(arguments[1]):t.next();if(!lt.TypeIsObject(e))throw new TypeError("bad iterator");return e},IteratorStep:function(t){var e=lt.IteratorNext(t),n=lt.IteratorComplete(e);return!n&&e},Construct:function(t,e,n,i){var r=void 0===n?t:n;if(!i&&ot.construct)return ot.construct(t,e,r);var o=r.prototype;lt.TypeIsObject(o)||(o=Object.prototype);var a=$(o),s=lt.Call(t,a,e);return lt.TypeIsObject(s)?s:a},SpeciesConstructor:function(t,e){var n=t.constructor;if(void 0===n)return e;if(!lt.TypeIsObject(n))throw new TypeError("Bad constructor");var i=n[Y];if(ct(i))return e;if(!lt.IsConstructor(i))throw new TypeError("Bad @@species");return i},CreateHTML:function(t,e,n,i){var r=lt.ToString(t),o="<"+e;if(""!==n){var a=lt.ToString(i),s=a.replace(/"/g,"&quot;");o+=" "+n+'="'+s+'"'}var c=o+">",l=c+r;return l+"</"+e+">"},IsRegExp:function(t){if(!lt.TypeIsObject(t))return!1;var e=t[G.match];return void 0!==e?!!e:tt.regex(t)},ToString:function(t){return at(t)}};if(d&&nt){var ut=function(t){if(tt.symbol(G[t]))return G[t];var e=G.for("Symbol."+t);return Object.defineProperty(G,t,{configurable:!1,enumerable:!1,writable:!1,value:e}),e};if(!tt.symbol(G.search)){var dt=ut("search"),pt=String.prototype.search;g(RegExp.prototype,dt,function(t){return lt.Call(pt,t,[this])}),et(String.prototype,"search",function(t){var e=lt.RequireObjectCoercible(this);if(!ct(t)){var n=lt.GetMethod(t,dt);if(void 0!==n)return lt.Call(n,t,[e])}return lt.Call(pt,e,[lt.ToString(t)])})}if(!tt.symbol(G.replace)){var ft=ut("replace"),_t=String.prototype.replace;g(RegExp.prototype,ft,function(t,e){return lt.Call(_t,t,[this,e])}),et(String.prototype,"replace",function(t,e){var n=lt.RequireObjectCoercible(this);if(!ct(t)){var i=lt.GetMethod(t,ft);if(void 0!==i)return lt.Call(i,t,[n,e])}return lt.Call(_t,n,[lt.ToString(t),e])})}if(!tt.symbol(G.split)){var ht=ut("split"),mt=String.prototype.split;g(RegExp.prototype,ht,function(t,e){return lt.Call(mt,t,[this,e])}),et(String.prototype,"split",function(t,e){var n=lt.RequireObjectCoercible(this);if(!ct(t)){var i=lt.GetMethod(t,ht);if(void 0!==i)return lt.Call(i,t,[n,e])}return lt.Call(mt,n,[lt.ToString(t),e])})}var gt=tt.symbol(G.match),vt=gt&&((rt={})[G.match]=function(){return 42},42!=="a".match(rt));if(!gt||vt){var bt=ut("match"),yt=String.prototype.match;g(RegExp.prototype,bt,function(t){return lt.Call(yt,t,[this])}),et(String.prototype,"match",function(t){var e=lt.RequireObjectCoercible(this);if(!ct(t)){var n=lt.GetMethod(t,bt);if(void 0!==n)return lt.Call(n,t,[e])}return lt.Call(yt,e,[lt.ToString(t)])})}}var wt=function(t,e,n){w.preserveToString(e,t),Object.setPrototypeOf&&Object.setPrototypeOf(t,e),d?f(Object.getOwnPropertyNames(t),function(i){i in F||n[i]||w.proxy(t,i,e)}):f(Object.keys(t),function(i){i in F||n[i]||(e[i]=t[i])}),e.prototype=t.prototype,w.redefine(t.prototype,"constructor",e)},$t=function(){return this},xt=function(t){d&&!N(t,Y)&&w.getter(t,Y,$t)},kt=function(t,e){var n=e||function(){return this};g(t,it,n),!t[it]&&tt.symbol(it)&&(t[it]=n)},Ct=function(t,e,n){if(function(t,e,n){d?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[e]=n}(t,e,n),!lt.SameValue(t[e],n))throw new TypeError("property is nonconfigurable")},St=function(t,e,n,i){if(!lt.TypeIsObject(t))throw new TypeError("Constructor requires `new`: "+e.name);var r=e.prototype;lt.TypeIsObject(r)||(r=n);var o=$(r);for(var a in i)if(N(i,a)){var s=i[a];g(o,a,s,!0)}return o};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var At=String.fromCodePoint;et(String,"fromCodePoint",function(t){return lt.Call(At,this,arguments)})}var Et={fromCodePoint:function(t){for(var e,n=[],i=0,r=arguments.length;i<r;i++){if(e=Number(arguments[i]),!lt.SameValue(e,lt.ToInteger(e))||e<0||e>1114111)throw new RangeError("Invalid code point "+e);e<65536?O(n,String.fromCharCode(e)):(e-=65536,O(n,String.fromCharCode(55296+(e>>10))),O(n,String.fromCharCode(e%1024+56320)))}return n.join("")},raw:function(t){var e=lt.ToObject(t,"bad callSite"),n=lt.ToObject(e.raw,"bad raw value"),i=n.length,r=lt.ToLength(i);if(r<=0)return"";for(var o,a,s,c,l=[],u=0;u<r&&(o=lt.ToString(u),s=lt.ToString(n[o]),O(l,s),!(u+1>=r));)a=u+1<arguments.length?arguments[u+1]:"",c=lt.ToString(a),O(l,c),u+=1;return l.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&et(String,"raw",Et.raw),v(String,Et);var jt=1/0,Ot={repeat:function(t){var e=lt.ToString(lt.RequireObjectCoercible(this)),n=lt.ToInteger(t);if(n<0||n>=jt)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return function t(e,n){if(n<1)return"";if(n%2)return t(e,n-1)+e;var i=t(e,n/2);return i+i}(e,n)},startsWith:function(t){var e=lt.ToString(lt.RequireObjectCoercible(this));if(lt.IsRegExp(t))throw new TypeError('Cannot call method "startsWith" with a regex');var n,i=lt.ToString(t);arguments.length>1&&(n=arguments[1]);var r=M(lt.ToInteger(n),0);return j(e,r,r+i.length)===i},endsWith:function(t){var e=lt.ToString(lt.RequireObjectCoercible(this));if(lt.IsRegExp(t))throw new TypeError('Cannot call method "endsWith" with a regex');var n,i=lt.ToString(t),r=e.length;arguments.length>1&&(n=arguments[1]);var o=void 0===n?r:lt.ToInteger(n),a=P(M(o,0),r);return j(e,a-i.length,a)===i},includes:function(t){if(lt.IsRegExp(t))throw new TypeError('"includes" does not accept a RegExp');var e,n=lt.ToString(t);return arguments.length>1&&(e=arguments[1]),-1!==S(this,n,e)},codePointAt:function(t){var e=lt.ToString(lt.RequireObjectCoercible(this)),n=lt.ToInteger(t),i=e.length;if(n>=0&&n<i){var r=e.charCodeAt(n),o=n+1===i;if(r<55296||r>56319||o)return r;var a=e.charCodeAt(n+1);return a<56320||a>57343?r:1024*(r-55296)+(a-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&et(String.prototype,"includes",Ot.includes),String.prototype.startsWith&&String.prototype.endsWith){var Tt=c(function(){"/a/".startsWith(/a/)}),qt=l(function(){return!1==="abc".startsWith("a",1/0)});Tt&&qt||(et(String.prototype,"startsWith",Ot.startsWith),et(String.prototype,"endsWith",Ot.endsWith))}if(nt){var Mt=l(function(){var t=/a/;return t[G.match]=!1,"/a/".startsWith(t)});Mt||et(String.prototype,"startsWith",Ot.startsWith);var Pt=l(function(){var t=/a/;return t[G.match]=!1,"/a/".endsWith(t)});Pt||et(String.prototype,"endsWith",Ot.endsWith);var It=l(function(){var t=/a/;return t[G.match]=!1,"/a/".includes(t)});It||et(String.prototype,"includes",Ot.includes)}v(String.prototype,Ot);var Rt=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),Dt=new RegExp("(^["+Rt+"]+)|(["+Rt+"]+$)","g"),zt=function(){return lt.ToString(lt.RequireObjectCoercible(this)).replace(Dt,"")},Lt=["","",""].join(""),Nt=new RegExp("["+Lt+"]","g"),Ft=/^[-+]0x[0-9a-f]+$/i,Ut=Lt.trim().length!==Lt.length;g(String.prototype,"trim",zt,Ut);var Vt=function(t){return{value:t,done:0===arguments.length}},Bt=function(t){lt.RequireObjectCoercible(t),this._s=lt.ToString(t),this._i=0};Bt.prototype.next=function(){var t=this._s,e=this._i;if(void 0===t||e>=t.length)return this._s=void 0,Vt();var n,i,r=t.charCodeAt(e);return r<55296||r>56319||e+1===t.length?i=1:(n=t.charCodeAt(e+1),i=n<56320||n>57343?1:2),this._i=e+i,Vt(t.substr(e,i))},kt(Bt.prototype),kt(String.prototype,function(){return new Bt(this)});var Ht={from:function(t){var e,n,i,r=this;if(arguments.length>1&&(e=arguments[1]),void 0===e)n=!1;else{if(!lt.IsCallable(e))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2]),n=!0}var a,s,c,l=void 0!==(Z(t)||lt.GetMethod(t,it));if(l){s=lt.IsConstructor(r)?Object(new r):[];var u,d,p=lt.GetIterator(t);for(c=0;!1!==(u=lt.IteratorStep(p));){d=u.value;try{n&&(d=void 0===i?e(d,c):o(e,i,d,c)),s[c]=d}catch(t){throw lt.IteratorClose(p,!0),t}c+=1}a=c}else{var f,_=lt.ToObject(t);for(a=lt.ToLength(_.length),s=lt.IsConstructor(r)?Object(new r(a)):new Array(a),c=0;c<a;++c)f=_[c],n&&(f=void 0===i?e(f,c):o(e,i,f,c)),Ct(s,c,f)}return s.length=a,s},of:function(){for(var t=arguments.length,e=this,n=a(e)||!lt.IsCallable(e)?new Array(t):lt.Construct(e,[t]),i=0;i<t;++i)Ct(n,i,arguments[i]);return n.length=t,n}};v(Array,Ht),xt(Array),v((t=function(t,e){this.i=0,this.array=t,this.kind=e}).prototype,{next:function(){var e=this.i,n=this.array;if(!(this instanceof t))throw new TypeError("Not an ArrayIterator");if(void 0!==n)for(var i=lt.ToLength(n.length);e<i;e++){var r,o=this.kind;return"key"===o?r=e:"value"===o?r=n[e]:"entry"===o&&(r=[e,n[e]]),this.i=e+1,Vt(r)}return this.array=void 0,Vt()}}),kt(t.prototype),Array.of===Ht.of||function(){var t=function(t){this.length=t};t.prototype=[];var e=Array.of.apply(t,[1,2]);return e instanceof t&&2===e.length}()||et(Array,"of",Ht.of);var Wt={copyWithin:function(t,e){var n,i=lt.ToObject(this),r=lt.ToLength(i.length),o=lt.ToInteger(t),a=lt.ToInteger(e),s=o<0?M(r+o,0):P(o,r),c=a<0?M(r+a,0):P(a,r);arguments.length>2&&(n=arguments[2]);var l=void 0===n?r:lt.ToInteger(n),u=l<0?M(r+l,0):P(l,r),d=P(u-c,r-s),p=1;for(c<s&&s<c+d&&(p=-1,c+=d-1,s+=d-1);d>0;)c in i?i[s]=i[c]:delete i[s],c+=p,s+=p,d-=1;return i},fill:function(t){var e,n;arguments.length>1&&(e=arguments[1]),arguments.length>2&&(n=arguments[2]);var i=lt.ToObject(this),r=lt.ToLength(i.length);e=lt.ToInteger(void 0===e?0:e),n=lt.ToInteger(void 0===n?r:n);for(var o=e<0?M(r+e,0):P(e,r),a=n<0?r+n:n,s=o;s<r&&s<a;++s)i[s]=t;return i},find:function(t){var e=lt.ToObject(this),n=lt.ToLength(e.length);if(!lt.IsCallable(t))throw new TypeError("Array#find: predicate must be a function");for(var i,r=arguments.length>1?arguments[1]:null,a=0;a<n;a++)if(i=e[a],r){if(o(t,r,i,a,e))return i}else if(t(i,a,e))return i},findIndex:function(t){var e=lt.ToObject(this),n=lt.ToLength(e.length);if(!lt.IsCallable(t))throw new TypeError("Array#findIndex: predicate must be a function");for(var i=arguments.length>1?arguments[1]:null,r=0;r<n;r++)if(i){if(o(t,i,e[r],r,e))return r}else if(t(e[r],r,e))return r;return-1},keys:function(){return new t(this,"key")},values:function(){return new t(this,"value")},entries:function(){return new t(this,"entry")}};if(Array.prototype.keys&&!lt.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!lt.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[it]&&(v(Array.prototype,{values:Array.prototype[it]}),tt.symbol(G.unscopables)&&(Array.prototype[G.unscopables].values=!0)),p&&Array.prototype.values&&"values"!==Array.prototype.values.name){var Gt=Array.prototype.values;et(Array.prototype,"values",function(){return lt.Call(Gt,this,arguments)}),g(Array.prototype,it,Array.prototype.values,!0)}v(Array.prototype,Wt),1/[!0].indexOf(!0,-0)<0&&g(Array.prototype,"indexOf",function(t){var e=A(this,arguments);return 0===e&&1/e<0?0:e},!0),kt(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&kt(Object.getPrototypeOf([].values()));var Yt,Kt=l(function(){return 0===Array.from({length:-1}).length}),Jt=1===(Yt=Array.from([0].entries())).length&&a(Yt[0])&&0===Yt[0][0]&&0===Yt[0][1];if(Kt&&Jt||et(Array,"from",Ht.from),!l(function(){return Array.from([0],void 0)})){var Qt=Array.from;et(Array,"from",function(t){return arguments.length>1&&void 0!==arguments[1]?lt.Call(Qt,this,arguments):o(Qt,this,t)})}var Xt=-(Math.pow(2,32)-1),Zt=function(t,e){var n={length:Xt};return n[e?(n.length>>>0)-1:0]=!0,l(function(){return o(t,n,function(){throw new RangeError("should not reach here")},[]),!0})};if(!Zt(Array.prototype.forEach)){var te=Array.prototype.forEach;et(Array.prototype,"forEach",function(t){return lt.Call(te,this.length>=0?this:[],arguments)})}if(!Zt(Array.prototype.map)){var ee=Array.prototype.map;et(Array.prototype,"map",function(t){return lt.Call(ee,this.length>=0?this:[],arguments)})}if(!Zt(Array.prototype.filter)){var ne=Array.prototype.filter;et(Array.prototype,"filter",function(t){return lt.Call(ne,this.length>=0?this:[],arguments)})}if(!Zt(Array.prototype.some)){var ie=Array.prototype.some;et(Array.prototype,"some",function(t){return lt.Call(ie,this.length>=0?this:[],arguments)})}if(!Zt(Array.prototype.every)){var re=Array.prototype.every;et(Array.prototype,"every",function(t){return lt.Call(re,this.length>=0?this:[],arguments)})}if(!Zt(Array.prototype.reduce)){var oe=Array.prototype.reduce;et(Array.prototype,"reduce",function(t){return lt.Call(oe,this.length>=0?this:[],arguments)})}if(!Zt(Array.prototype.reduceRight,!0)){var ae=Array.prototype.reduceRight;et(Array.prototype,"reduceRight",function(t){return lt.Call(ae,this.length>=0?this:[],arguments)})}var se=8!==Number("0o10"),ce=2!==Number("0b10"),le=m(Lt,function(t){return 0===Number(t+0+t)});if(se||ce||le){var ue=Number,de=/^0b[01]+$/i,pe=/^0o[0-7]+$/i,fe=de.test.bind(de),_e=pe.test.bind(pe),he=Nt.test.bind(Nt),me=Ft.test.bind(Ft),ge=function(){var t=function(e){var n;"string"==typeof(n=arguments.length>0?tt.primitive(e)?e:function(t){var e;if("function"==typeof t.valueOf&&(e=t.valueOf(),tt.primitive(e)))return e;if("function"==typeof t.toString&&(e=t.toString(),tt.primitive(e)))return e;throw new TypeError("No default value")}(e):0)&&(n=lt.Call(zt,n),fe(n)?n=parseInt(j(n,2),2):_e(n)?n=parseInt(j(n,2),8):(he(n)||me(n))&&(n=NaN));var i=this,r=l(function(){return ue.prototype.valueOf.call(i),!0});return i instanceof t&&!r?new ue(n):ue(n)};return t}();wt(ue,ge,{}),v(ge,{NaN:ue.NaN,MAX_VALUE:ue.MAX_VALUE,MIN_VALUE:ue.MIN_VALUE,NEGATIVE_INFINITY:ue.NEGATIVE_INFINITY,POSITIVE_INFINITY:ue.POSITIVE_INFINITY}),Number=ge,w.redefine(k,"Number",ge)}var ve=Math.pow(2,53)-1;v(Number,{MAX_SAFE_INTEGER:ve,MIN_SAFE_INTEGER:-ve,EPSILON:2.220446049250313e-16,parseInt:k.parseInt,parseFloat:k.parseFloat,isFinite:J,isInteger:function(t){return J(t)&&lt.ToInteger(t)===t},isSafeInteger:function(t){return Number.isInteger(t)&&R(t)<=Number.MAX_SAFE_INTEGER},isNaN:K}),g(Number,"parseInt",k.parseInt,Number.parseInt!==k.parseInt),[,1].find(function(t,e){return 0===e})||et(Array.prototype,"find",Wt.find),0!==[,1].findIndex(function(t,e){return 0===e})&&et(Array.prototype,"findIndex",Wt.findIndex);var be,ye,we,$e=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),xe=function(t,e){d&&$e(t,e)&&Object.defineProperty(t,e,{enumerable:!1})},ke=function(){for(var t=Number(this),e=arguments.length,n=e-t,i=new Array(n<0?0:n),r=t;r<e;++r)i[r-t]=arguments[r];return i},Ce=function(t){return function(e,n){return e[n]=t[n],e}},Se=function(t,e){var n,i=s(Object(e));return lt.IsCallable(Object.getOwnPropertySymbols)&&(n=h(Object.getOwnPropertySymbols(Object(e)),$e(e))),_(E(i,n||[]),Ce(e),t)},Ae={assign:function(t,e){var n=lt.ToObject(t,"Cannot convert undefined or null to object");return _(lt.Call(ke,1,arguments),Se,n)},is:function(t,e){return lt.SameValue(t,e)}};if(Object.assign&&Object.preventExtensions&&function(){var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}}()&&et(Object,"assign",Ae.assign),v(Object,Ae),d){var Ee={setPrototypeOf:function(t,e){var n,i=function(t,e){return function(t,e){if(!lt.TypeIsObject(t))throw new TypeError("cannot set prototype on a non-object");if(null!==e&&!lt.TypeIsObject(e))throw new TypeError("can only set prototype to an object or null"+e)}(t,e),o(n,t,e),t};try{n=t.getOwnPropertyDescriptor(t.prototype,"__proto__").set,o(n,{},null)}catch(e){if(t.prototype!=={}.__proto__)return;n=function(t){this.__proto__=t},i.polyfill=i(i({},null),t.prototype)instanceof t}return i}(Object)};v(Object,Ee)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(be=Object.create(null),ye=Object.getPrototypeOf,we=Object.setPrototypeOf,Object.getPrototypeOf=function(t){var e=ye(t);return e===be?null:e},Object.setPrototypeOf=function(t,e){var n=null===e?be:e;return we(t,n)},Object.setPrototypeOf.polyfill=!1),c(function(){Object.keys("foo")})){var je=Object.keys;et(Object,"keys",function(t){return je(lt.ToObject(t))}),s=Object.keys}if(c(function(){Object.keys(/a/g)})){var Oe=Object.keys;et(Object,"keys",function(t){if(tt.regex(t)){var e=[];for(var n in t)N(t,n)&&O(e,n);return e}return Oe(t)}),s=Object.keys}if(Object.getOwnPropertyNames){var Te=!c(function(){Object.getOwnPropertyNames("foo")});if(!Te){var qe="object"==typeof window?Object.getOwnPropertyNames(window):[],Me=Object.getOwnPropertyNames;et(Object,"getOwnPropertyNames",function(t){var e=lt.ToObject(t);if("[object Window]"===b(e))try{return Me(e)}catch(t){return E([],qe)}return Me(e)})}}if(Object.getOwnPropertyDescriptor){var Pe=!c(function(){Object.getOwnPropertyDescriptor("foo","bar")});if(!Pe){var Ie=Object.getOwnPropertyDescriptor;et(Object,"getOwnPropertyDescriptor",function(t,e){return Ie(lt.ToObject(t),e)})}}if(Object.seal){var Re=!c(function(){Object.seal("foo")});if(!Re){var De=Object.seal;et(Object,"seal",function(t){return lt.TypeIsObject(t)?De(t):t})}}if(Object.isSealed){var ze=!c(function(){Object.isSealed("foo")});if(!ze){var Le=Object.isSealed;et(Object,"isSealed",function(t){return!lt.TypeIsObject(t)||Le(t)})}}if(Object.freeze){var Ne=!c(function(){Object.freeze("foo")});if(!Ne){var Fe=Object.freeze;et(Object,"freeze",function(t){return lt.TypeIsObject(t)?Fe(t):t})}}if(Object.isFrozen){var Ue=!c(function(){Object.isFrozen("foo")});if(!Ue){var Ve=Object.isFrozen;et(Object,"isFrozen",function(t){return!lt.TypeIsObject(t)||Ve(t)})}}if(Object.preventExtensions){var Be=!c(function(){Object.preventExtensions("foo")});if(!Be){var He=Object.preventExtensions;et(Object,"preventExtensions",function(t){return lt.TypeIsObject(t)?He(t):t})}}if(Object.isExtensible){var We=!c(function(){Object.isExtensible("foo")});if(!We){var Ge=Object.isExtensible;et(Object,"isExtensible",function(t){return!!lt.TypeIsObject(t)&&Ge(t)})}}if(Object.getPrototypeOf){var Ye=!c(function(){Object.getPrototypeOf("foo")});if(!Ye){var Ke=Object.getPrototypeOf;et(Object,"getPrototypeOf",function(t){return Ke(lt.ToObject(t))})}}var Je,Qe=d&&((Je=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&lt.IsCallable(Je.get));d&&!Qe&&w.getter(RegExp.prototype,"flags",function(){if(!lt.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t});var Xe,Ze=d&&l(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),tn=nt&&d&&((Xe=/./)[G.match]=!1,RegExp(Xe)===Xe),en=l(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),nn=en&&l(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!en||!nn){var rn=RegExp.prototype.toString;g(RegExp.prototype,"toString",function(){var t=lt.RequireObjectCoercible(this);if(tt.regex(t))return o(rn,t);var e=at(t.source),n=at(t.flags);return"/"+e+"/"+n},!0),w.preserveToString(RegExp.prototype.toString,rn)}if(d&&(!Ze||tn)){var on=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,an=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},sn=lt.IsCallable(an.get)?an.get:function(){return this.source},cn=RegExp,ln=function t(e,n){var i=lt.IsRegExp(e),r=this instanceof t;if(!r&&i&&void 0===n&&e.constructor===t)return e;var o=e,a=n;return tt.regex(e)?(o=lt.Call(sn,e),a=void 0===n?lt.Call(on,e):n,new t(o,a)):(i&&(o=e.source,a=void 0===n?e.flags:n),new cn(e,n))};wt(cn,ln,{$input:!0}),RegExp=ln,w.redefine(k,"RegExp",ln)}if(d){var un={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};f(s(un),function(t){t in RegExp&&!(un[t]in RegExp)&&w.getter(RegExp,un[t],function(){return RegExp[t]})})}xt(RegExp);var dn=1/Number.EPSILON,pn=Math.pow(2,-23),fn=Math.pow(2,127)*(2-pn),_n=Math.pow(2,-126),hn=Math.E,mn=Math.LOG2E,gn=Math.LOG10E,vn=Number.prototype.clz;delete Number.prototype.clz;var bn={acosh:function(t){var e=Number(t);return K(e)||t<1?NaN:1===e?0:e===1/0?e:z(e/hn+L(e+1)*L(e-1)/hn)+1},asinh:function t(e){var n=Number(e);return 0!==n&&C(n)?n<0?-t(-n):z(n+L(n*n+1)):n},atanh:function(t){var e=Number(t);return K(e)||e<-1||e>1?NaN:-1===e?-1/0:1===e?1/0:0===e?e:.5*z((1+e)/(1-e))},cbrt:function(t){var e=Number(t);if(0===e)return e;var n,i=e<0;return i&&(e=-e),e===1/0?n=1/0:(n=D(z(e)/3),n=(e/(n*n)+2*n)/3),i?-n:n},clz32:function(t){var e=Number(t),n=lt.ToUint32(e);return 0===n?32:vn?lt.Call(vn,n):31-I(z(n+.5)*mn)},cosh:function(t){var e=Number(t);return 0===e?1:K(e)?NaN:C(e)?(e<0&&(e=-e),e>21?D(e)/2:(D(e)+D(-e))/2):1/0},expm1:function(t){var e=Number(t);if(e===-1/0)return-1;if(!C(e)||0===e)return e;if(R(e)>.5)return D(e)-1;for(var n=e,i=0,r=1;i+n!==i;)i+=n,n*=e/(r+=1);return i},hypot:function(t,e){for(var n=0,i=0,r=0;r<arguments.length;++r){var o=R(Number(arguments[r]));i<o?(n*=i/o*(i/o),n+=1,i=o):n+=o>0?o/i*(o/i):o}return i===1/0?1/0:i*L(n)},log2:function(t){return z(t)*mn},log10:function(t){return z(t)*gn},log1p:function(t){var e=Number(t);return e<-1||K(e)?NaN:0===e||e===1/0?e:-1===e?-1/0:1+e-1==0?e:e*(z(1+e)/(1+e-1))},sign:Q,sinh:function(t){var e=Number(t);return C(e)&&0!==e?R(e)<1?(Math.expm1(e)-Math.expm1(-e))/2:(D(e-1)-D(-e-1))*hn/2:e},tanh:function(t){var e=Number(t);return K(e)||0===e?e:e>=20?1:e<=-20?-1:(Math.expm1(e)-Math.expm1(-e))/(D(e)+D(-e))},trunc:function(t){var e=Number(t);return e<0?-I(-e):I(e)},imul:function(t,e){var n=lt.ToUint32(t),i=lt.ToUint32(e),r=n>>>16&65535,o=65535&n,a=i>>>16&65535,s=65535&i;return o*s+(r*s+o*a<<16>>>0)|0},fround:function(t){var e=Number(t);if(0===e||e===1/0||e===-1/0||K(e))return e;var n=Q(e),i=R(e);if(i<_n)return n*(i/_n/pn+dn-dn)*_n*pn;var r=(1+pn/Number.EPSILON)*i,o=r-(r-i);return o>fn||K(o)?n*(1/0):n*o}};v(Math,bn),g(Math,"log1p",bn.log1p,-1e-17!==Math.log1p(-1e-17)),g(Math,"asinh",bn.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),g(Math,"tanh",bn.tanh,-2e-17!==Math.tanh(-2e-17)),g(Math,"acosh",bn.acosh,Math.acosh(Number.MAX_VALUE)===1/0),g(Math,"cbrt",bn.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8),g(Math,"sinh",bn.sinh,-2e-17!==Math.sinh(-2e-17));var yn=Math.expm1(10);g(Math,"expm1",bn.expm1,yn>22025.465794806718||yn<22025.465794806718);var wn=Math.round,$n=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),xn=[dn+1,2*dn-1].every(function(t){return Math.round(t)===t});g(Math,"round",function(t){var e=I(t),n=-1===e?-0:e+1;return t-e<.5?e:n},!$n||!xn),w.preserveToString(Math.round,wn);var kn=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=bn.imul,w.preserveToString(Math.imul,kn)),2!==Math.imul.length&&et(Math,"imul",function(t,e){return lt.Call(kn,Math,arguments)});var Cn,Sn,An=function(){var t=k.setTimeout;if("function"==typeof t||"object"==typeof t){lt.IsPromise=function(t){return!!lt.TypeIsObject(t)&&void 0!==t._promise};var e,n=function(t){if(!lt.IsConstructor(t))throw new TypeError("Bad promise constructor");var e=this;if(e.resolve=void 0,e.reject=void 0,e.promise=new t(function(t,n){if(void 0!==e.resolve||void 0!==e.reject)throw new TypeError("Bad Promise implementation!");e.resolve=t,e.reject=n}),!lt.IsCallable(e.resolve)||!lt.IsCallable(e.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&lt.IsCallable(window.postMessage)&&(e=function(){var t=[];return window.addEventListener("message",function(e){if(e.source===window&&"zero-timeout-message"===e.data){if(e.stopPropagation(),0===t.length)return;var n=q(t);n()}},!0),function(e){O(t,e),window.postMessage("zero-timeout-message","*")}});var i,a,s,c,l,u=lt.IsCallable(k.setImmediate)?k.setImmediate:"object"==typeof r&&r.nextTick?r.nextTick:(i=k.Promise,(a=i&&i.resolve&&i.resolve())&&function(t){return a.then(t)}||(lt.IsCallable(e)?e():function(e){t(e,0)})),d=function(t){return t},p=function(t){throw t},f={},_=function(t,e,n){u(function(){h(t,e,n)})},h=function(t,e,n){var i,r;if(e===f)return t(n);try{i=t(n),r=e.resolve}catch(t){i=t,r=e.reject}r(i)},m=function(t,e){var n=t._promise,i=n.reactionLength;if(i>0&&(_(n.fulfillReactionHandler0,n.reactionCapability0,e),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,i>1))for(var r=1,o=0;r<i;r++,o+=3)_(n[o+0],n[o+2],e),t[o+0]=void 0,t[o+1]=void 0,t[o+2]=void 0;n.result=e,n.state=1,n.reactionLength=0},g=function(t,e){var n=t._promise,i=n.reactionLength;if(i>0&&(_(n.rejectReactionHandler0,n.reactionCapability0,e),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,i>1))for(var r=1,o=0;r<i;r++,o+=3)_(n[o+1],n[o+2],e),t[o+0]=void 0,t[o+1]=void 0,t[o+2]=void 0;n.result=e,n.state=2,n.reactionLength=0},b=function(t){var e=!1;return{resolve:function(n){var i;if(!e){if(e=!0,n===t)return g(t,new TypeError("Self resolution"));if(!lt.TypeIsObject(n))return m(t,n);try{i=n.then}catch(e){return g(t,e)}if(!lt.IsCallable(i))return m(t,n);u(function(){w(t,n,i)})}},reject:function(n){if(!e)return e=!0,g(t,n)}}},y=function(t,e,n,i){t===c?o(t,e,n,i,f):o(t,e,n,i)},w=function(t,e,n){var i=b(t),r=i.resolve,o=i.reject;try{y(n,e,r,o)}catch(t){o(t)}},$=l=function(t){if(!(this instanceof l))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!lt.IsCallable(t))throw new TypeError("not a valid resolver");var e=St(this,l,s,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),n=b(e),i=n.reject;try{t(n.resolve,i)}catch(t){i(t)}return e};s=$.prototype;var x=function(t,e,n,i){var r=!1;return function(o){if(!r&&(r=!0,e[t]=o,0==--i.count)){var a=n.resolve;a(e)}}};return v($,{all:function(t){var e=this;if(!lt.TypeIsObject(e))throw new TypeError("Promise is not object");var i,r,o=new n(e);try{return i=lt.GetIterator(t),function(t,e,n){for(var i,r,o=t.iterator,a=[],s={count:1},c=0;;){try{if(!1===(i=lt.IteratorStep(o))){t.done=!0;break}r=i.value}catch(e){throw t.done=!0,e}a[c]=void 0;var l=e.resolve(r),u=x(c,a,n,s);s.count+=1,y(l.then,l,u,n.reject),c+=1}if(0==--s.count){var d=n.resolve;d(a)}return n.promise}(r={iterator:i,done:!1},e,o)}catch(t){var a=t;if(r&&!r.done)try{lt.IteratorClose(i,!0)}catch(t){a=t}var s=o.reject;return s(a),o.promise}},race:function(t){var e=this;if(!lt.TypeIsObject(e))throw new TypeError("Promise is not object");var i,r,o=new n(e);try{return i=lt.GetIterator(t),function(t,e,n){for(var i,r,o,a=t.iterator;;){try{if(!1===(i=lt.IteratorStep(a))){t.done=!0;break}r=i.value}catch(e){throw t.done=!0,e}o=e.resolve(r),y(o.then,o,n.resolve,n.reject)}return n.promise}(r={iterator:i,done:!1},e,o)}catch(t){var a=t;if(r&&!r.done)try{lt.IteratorClose(i,!0)}catch(t){a=t}var s=o.reject;return s(a),o.promise}},reject:function(t){if(!lt.TypeIsObject(this))throw new TypeError("Bad promise constructor");var e=new n(this),i=e.reject;return i(t),e.promise},resolve:function(t){var e=this;if(!lt.TypeIsObject(e))throw new TypeError("Bad promise constructor");if(lt.IsPromise(t)){var i=t.constructor;if(i===e)return t}var r=new n(e),o=r.resolve;return o(t),r.promise}}),v(s,{catch:function(t){return this.then(null,t)},then:function(t,e){if(!lt.IsPromise(this))throw new TypeError("not a promise");var i,r=lt.SpeciesConstructor(this,$),o=arguments.length>2&&arguments[2]===f;i=o&&r===$?f:new n(r);var a,s=lt.IsCallable(t)?t:d,c=lt.IsCallable(e)?e:p,l=this._promise;if(0===l.state){if(0===l.reactionLength)l.fulfillReactionHandler0=s,l.rejectReactionHandler0=c,l.reactionCapability0=i;else{var u=3*(l.reactionLength-1);l[u+0]=s,l[u+1]=c,l[u+2]=i}l.reactionLength+=1}else if(1===l.state)a=l.result,_(s,i,a);else{if(2!==l.state)throw new TypeError("unexpected Promise state");a=l.result,_(c,i,a)}return i.promise}}),f=new n($),c=s.then,$}}();if(k.Promise&&(delete k.Promise.accept,delete k.Promise.defer,delete k.Promise.prototype.chain),"function"==typeof An){v(k,{Promise:An});var En=x(k.Promise,function(t){return t.resolve(42).then(function(){})instanceof t}),jn=!c(function(){k.Promise.reject(42).then(null,5).then(null,F)}),On=c(function(){k.Promise.call(3,F)}),Tn=function(t){var e=t.resolve(5);e.constructor={};var n=t.resolve(e);try{n.then(null,F).then(null,F)}catch(t){return!0}return e===n}(k.Promise),qn=d&&(Cn=0,Sn=Object.defineProperty({},"then",{get:function(){Cn+=1}}),Promise.resolve(Sn),1===Cn),Mn=function t(e){var n=new Promise(e);e(3,function(){}),this.then=n.then,this.constructor=t};Mn.prototype=Promise.prototype,Mn.all=Promise.all;var Pn=l(function(){return!!Mn.all([1,2])});if(En&&jn&&On&&!Tn&&qn&&!Pn||(Promise=An,et(k,"Promise",An)),1!==Promise.all.length){var In=Promise.all;et(Promise,"all",function(t){return lt.Call(In,this,arguments)})}if(1!==Promise.race.length){var Rn=Promise.race;et(Promise,"race",function(t){return lt.Call(Rn,this,arguments)})}if(1!==Promise.resolve.length){var Dn=Promise.resolve;et(Promise,"resolve",function(t){return lt.Call(Dn,this,arguments)})}if(1!==Promise.reject.length){var zn=Promise.reject;et(Promise,"reject",function(t){return lt.Call(zn,this,arguments)})}xe(Promise,"all"),xe(Promise,"race"),xe(Promise,"resolve"),xe(Promise,"reject"),xt(Promise)}var Ln,Nn,Fn=function(t){var e=s(_(t,function(t,e){return t[e]=!0,t},{}));return t.join(":")===e.join(":")},Un=Fn(["z","a","bb"]),Vn=Fn(["z",1,"a","3",2]);if(d){var Bn=function(t,e){return e||Un?ct(t)?"^"+lt.ToString(t):"string"==typeof t?"$"+t:"number"==typeof t?Vn?t:"n"+t:"boolean"==typeof t?"b"+t:null:null},Hn=function(){return Object.create?Object.create(null):{}},Wn=function(t,e,n){if(a(n)||tt.string(n))f(n,function(t){if(!lt.TypeIsObject(t))throw new TypeError("Iterator value "+t+" is not an entry object");e.set(t[0],t[1])});else if(n instanceof t)o(t.prototype.forEach,n,function(t,n){e.set(n,t)});else{var i,r;if(!ct(n)){if(r=e.set,!lt.IsCallable(r))throw new TypeError("bad map");i=lt.GetIterator(n)}if(void 0!==i)for(;;){var s=lt.IteratorStep(i);if(!1===s)break;var c=s.value;try{if(!lt.TypeIsObject(c))throw new TypeError("Iterator value "+c+" is not an entry object");o(r,e,c[0],c[1])}catch(t){throw lt.IteratorClose(i,!0),t}}}},Gn=function(t,e,n){if(a(n)||tt.string(n))f(n,function(t){e.add(t)});else if(n instanceof t)o(t.prototype.forEach,n,function(t){e.add(t)});else{var i,r;if(!ct(n)){if(r=e.add,!lt.IsCallable(r))throw new TypeError("bad set");i=lt.GetIterator(n)}if(void 0!==i)for(;;){var s=lt.IteratorStep(i);if(!1===s)break;var c=s.value;try{o(r,e,c)}catch(t){throw lt.IteratorClose(i,!0),t}}}},Yn={Map:function(){var t={},e=function(t,e){this.key=t,this.value=e,this.next=null,this.prev=null};e.prototype.isRemoved=function(){return this.key===t};var n,i=function(t,e){if(!lt.TypeIsObject(t)||!function(t){return!!t._es6map}(t))throw new TypeError("Method Map.prototype."+e+" called on incompatible receiver "+lt.ToString(t))},r=function(t,e){i(t,"[[MapIterator]]"),this.head=t._head,this.i=this.head,this.kind=e};kt(r.prototype={next:function(){var t,e=this.i,n=this.kind,i=this.head;if(void 0===this.i)return Vt();for(;e.isRemoved()&&e!==i;)e=e.prev;for(;e.next!==i;)if(!(e=e.next).isRemoved())return t="key"===n?e.key:"value"===n?e.value:[e.key,e.value],this.i=e,Vt(t);return this.i=void 0,Vt()}});var a=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var i=St(this,t,n,{_es6map:!0,_head:null,_map:U?new U:null,_size:0,_storage:Hn()}),r=new e(null,null);return r.next=r.prev=r,i._head=r,arguments.length>0&&Wn(t,i,arguments[0]),i};return w.getter(n=a.prototype,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),v(n,{get:function(t){var e;i(this,"get");var n=Bn(t,!0);if(null!==n)return(e=this._storage[n])?e.value:void 0;if(this._map)return(e=B.call(this._map,t))?e.value:void 0;for(var r=this._head,o=r;(o=o.next)!==r;)if(lt.SameValueZero(o.key,t))return o.value},has:function(t){i(this,"has");var e=Bn(t,!0);if(null!==e)return void 0!==this._storage[e];if(this._map)return H.call(this._map,t);for(var n=this._head,r=n;(r=r.next)!==n;)if(lt.SameValueZero(r.key,t))return!0;return!1},set:function(t,n){i(this,"set");var r,o=this._head,a=o,s=Bn(t,!0);if(null!==s){if(void 0!==this._storage[s])return this._storage[s].value=n,this;r=this._storage[s]=new e(t,n),a=o.prev}else this._map&&(H.call(this._map,t)?B.call(this._map,t).value=n:(r=new e(t,n),W.call(this._map,t,r),a=o.prev));for(;(a=a.next)!==o;)if(lt.SameValueZero(a.key,t))return a.value=n,this;return r=r||new e(t,n),lt.SameValue(-0,t)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},delete:function(e){i(this,"delete");var n=this._head,r=n,o=Bn(e,!0);if(null!==o){if(void 0===this._storage[o])return!1;r=this._storage[o].prev,delete this._storage[o]}else if(this._map){if(!H.call(this._map,e))return!1;r=B.call(this._map,e).prev,V.call(this._map,e)}for(;(r=r.next)!==n;)if(lt.SameValueZero(r.key,e))return r.key=r.value=t,r.prev.next=r.next,r.next.prev=r.prev,this._size-=1,!0;return!1},clear:function(){i(this,"clear"),this._map=U?new U:null,this._size=0,this._storage=Hn();for(var e=this._head,n=e,r=n.next;(n=r)!==e;)n.key=n.value=t,r=n.next,n.next=n.prev=e;e.next=e.prev=e},keys:function(){return i(this,"keys"),new r(this,"key")},values:function(){return i(this,"values"),new r(this,"value")},entries:function(){return i(this,"entries"),new r(this,"key+value")},forEach:function(t){i(this,"forEach");for(var e=arguments.length>1?arguments[1]:null,n=this.entries(),r=n.next();!r.done;r=n.next())e?o(t,e,r.value[1],r.value[0],this):t(r.value[1],r.value[0],this)}}),kt(n,n.entries),a}(),Set:function(){var t,e=function(t,e){if(!lt.TypeIsObject(t)||!function(t){return t._es6set&&void 0!==t._storage}(t))throw new TypeError("Set.prototype."+e+" called on incompatible receiver "+lt.ToString(t))},n=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var n=St(this,e,t,{_es6set:!0,"[[SetData]]":null,_storage:Hn()});if(!n._es6set)throw new TypeError("bad set");return arguments.length>0&&Gn(e,n,arguments[0]),n};t=n.prototype;var i=function(t){if(!t["[[SetData]]"]){var e=t["[[SetData]]"]=new Yn.Map;f(s(t._storage),function(t){var n=function(t){var e=t;if("^null"===e)return null;if("^undefined"!==e){var n=e.charAt(0);return"$"===n?j(e,1):"n"===n?+j(e,1):"b"===n?"btrue"===e:+e}}(t);e.set(n,n)}),t["[[SetData]]"]=e}t._storage=null};return w.getter(n.prototype,"size",function(){return e(this,"size"),this._storage?s(this._storage).length:(i(this),this["[[SetData]]"].size)}),v(n.prototype,{has:function(t){var n;return e(this,"has"),this._storage&&null!==(n=Bn(t))?!!this._storage[n]:(i(this),this["[[SetData]]"].has(t))},add:function(t){var n;return e(this,"add"),this._storage&&null!==(n=Bn(t))?(this._storage[n]=!0,this):(i(this),this["[[SetData]]"].set(t,t),this)},delete:function(t){var n;if(e(this,"delete"),this._storage&&null!==(n=Bn(t))){var r=N(this._storage,n);return delete this._storage[n]&&r}return i(this),this["[[SetData]]"].delete(t)},clear:function(){e(this,"clear"),this._storage&&(this._storage=Hn()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return e(this,"values"),i(this),this["[[SetData]]"].values()},entries:function(){return e(this,"entries"),i(this),this["[[SetData]]"].entries()},forEach:function(t){e(this,"forEach");var n=arguments.length>1?arguments[1]:null,r=this;i(r),this["[[SetData]]"].forEach(function(e,i){n?o(t,n,i,i,r):t(i,i,r)})}}),g(n.prototype,"keys",n.prototype.values,!0),kt(n.prototype,n.prototype.values),n}()};if(k.Map||k.Set){var Kn=l(function(){return 2===new Map([[1,2]]).get(1)});Kn||(k.Map=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');var e=new U;return arguments.length>0&&Wn(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,k.Map.prototype),e},k.Map.prototype=$(U.prototype),g(k.Map.prototype,"constructor",k.Map,!0),w.preserveToString(k.Map,U));var Jn=new Map,Qn=((Nn=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,Nn),Nn.get(0)===Nn&&Nn.get(-0)===Nn&&Nn.has(0)&&Nn.has(-0)),Xn=Jn.set(1,2)===Jn;Qn&&Xn||et(Map.prototype,"set",function(t,e){return o(W,this,0===t?0:t,e),this}),Qn||(v(Map.prototype,{get:function(t){return o(B,this,0===t?0:t)},has:function(t){return o(H,this,0===t?0:t)}},!0),w.preserveToString(Map.prototype.get,B),w.preserveToString(Map.prototype.has,H));var Zn=new Set,ti=((Ln=Zn).delete(0),Ln.add(-0),!Ln.has(0)),ei=Zn.add(1)===Zn;if(!ti||!ei){var ni=Set.prototype.add;Set.prototype.add=function(t){return o(ni,this,0===t?0:t),this},w.preserveToString(Set.prototype.add,ni)}if(!ti){var ii=Set.prototype.has;Set.prototype.has=function(t){return o(ii,this,0===t?0:t)},w.preserveToString(Set.prototype.has,ii);var ri=Set.prototype.delete;Set.prototype.delete=function(t){return o(ri,this,0===t?0:t)},w.preserveToString(Set.prototype.delete,ri)}var oi=x(k.Map,function(t){var e=new t([]);return e.set(42,42),e instanceof t}),ai=Object.setPrototypeOf&&!oi,si=function(){try{return!(k.Map()instanceof k.Map)}catch(t){return t instanceof TypeError}}();0===k.Map.length&&!ai&&si||(k.Map=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');var e=new U;return arguments.length>0&&Wn(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,t.prototype),e},k.Map.prototype=U.prototype,g(k.Map.prototype,"constructor",k.Map,!0),w.preserveToString(k.Map,U));var ci=x(k.Set,function(t){var e=new t([]);return e.add(42,42),e instanceof t}),li=Object.setPrototypeOf&&!ci,ui=function(){try{return!(k.Set()instanceof k.Set)}catch(t){return t instanceof TypeError}}();if(0!==k.Set.length||li||!ui){var di=k.Set;k.Set=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');var e=new di;return arguments.length>0&&Gn(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,t.prototype),e},k.Set.prototype=di.prototype,g(k.Set.prototype,"constructor",k.Set,!0),w.preserveToString(k.Set,di)}var pi=new k.Map,fi=!l(function(){return pi.keys().next().done});if(("function"!=typeof k.Map.prototype.clear||0!==(new k.Set).size||0!==pi.size||"function"!=typeof k.Map.prototype.keys||"function"!=typeof k.Set.prototype.keys||"function"!=typeof k.Map.prototype.forEach||"function"!=typeof k.Set.prototype.forEach||u(k.Map)||u(k.Set)||"function"!=typeof pi.keys().next||fi||!oi)&&v(k,{Map:Yn.Map,Set:Yn.Set},!0),k.Set.prototype.keys!==k.Set.prototype.values&&g(k.Set.prototype,"keys",k.Set.prototype.values,!0),kt(Object.getPrototypeOf((new k.Map).keys())),kt(Object.getPrototypeOf((new k.Set).keys())),p&&"has"!==k.Set.prototype.has.name){var _i=k.Set.prototype.has;et(k.Set.prototype,"has",function(t){return o(_i,this,t)})}}v(k,Yn),xt(k.Map),xt(k.Set)}var hi=function(t){if(!lt.TypeIsObject(t))throw new TypeError("target must be an object")},mi={apply:function(){return lt.Call(lt.Call,null,arguments)},construct:function(t,e){if(!lt.IsConstructor(t))throw new TypeError("First argument must be a constructor.");var n=arguments.length>2?arguments[2]:t;if(!lt.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return lt.Construct(t,e,n,"internal")},deleteProperty:function(t,e){if(hi(t),d){var n=Object.getOwnPropertyDescriptor(t,e);if(n&&!n.configurable)return!1}return delete t[e]},has:function(t,e){return hi(t),e in t}};Object.getOwnPropertyNames&&Object.assign(mi,{ownKeys:function(t){hi(t);var e=Object.getOwnPropertyNames(t);return lt.IsCallable(Object.getOwnPropertySymbols)&&T(e,Object.getOwnPropertySymbols(t)),e}});var gi=function(t){return!c(t)};if(Object.preventExtensions&&Object.assign(mi,{isExtensible:function(t){return hi(t),Object.isExtensible(t)},preventExtensions:function(t){return hi(t),gi(function(){Object.preventExtensions(t)})}}),d){var vi=function(t,e,n){var i=Object.getOwnPropertyDescriptor(t,e);if(!i){var r=Object.getPrototypeOf(t);if(null===r)return;return vi(r,e,n)}return"value"in i?i.value:i.get?lt.Call(i.get,n):void 0},bi=function(t,e,n,i){var r=Object.getOwnPropertyDescriptor(t,e);if(!r){var a=Object.getPrototypeOf(t);if(null!==a)return bi(a,e,n,i);r={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if("value"in r){if(!r.writable)return!1;if(!lt.TypeIsObject(i))return!1;var s=Object.getOwnPropertyDescriptor(i,e);return s?ot.defineProperty(i,e,{value:n}):ot.defineProperty(i,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}return!!r.set&&(o(r.set,i,n),!0)};Object.assign(mi,{defineProperty:function(t,e,n){return hi(t),gi(function(){Object.defineProperty(t,e,n)})},getOwnPropertyDescriptor:function(t,e){return hi(t),Object.getOwnPropertyDescriptor(t,e)},get:function(t,e){hi(t);var n=arguments.length>2?arguments[2]:t;return vi(t,e,n)},set:function(t,e,n){hi(t);var i=arguments.length>3?arguments[3]:t;return bi(t,e,n,i)}})}if(Object.getPrototypeOf){var yi=Object.getPrototypeOf;mi.getPrototypeOf=function(t){return hi(t),yi(t)}}Object.setPrototypeOf&&mi.getPrototypeOf&&Object.assign(mi,{setPrototypeOf:function(t,e){if(hi(t),null!==e&&!lt.TypeIsObject(e))throw new TypeError("proto must be an object or null");return e===ot.getPrototypeOf(t)||!(ot.isExtensible&&!ot.isExtensible(t))&&!function(t,e){for(var n=e;n;){if(t===n)return!0;n=mi.getPrototypeOf(n)}return!1}(t,e)&&(Object.setPrototypeOf(t,e),!0)}}),Object.keys(mi).forEach(function(t){!function(t,e){if(lt.IsCallable(k.Reflect[t])){var n=l(function(){return k.Reflect[t](1),k.Reflect[t](NaN),k.Reflect[t](!0),!0});n&&et(k.Reflect,t,e)}else g(k.Reflect,t,e)}(t,mi[t])});var wi=k.Reflect.getPrototypeOf;if(p&&wi&&"getPrototypeOf"!==wi.name&&et(k.Reflect,"getPrototypeOf",function(t){return o(wi,k.Reflect,t)}),k.Reflect.setPrototypeOf&&l(function(){return k.Reflect.setPrototypeOf(1,{}),!0})&&et(k.Reflect,"setPrototypeOf",mi.setPrototypeOf),k.Reflect.defineProperty&&(l(function(){var t=!k.Reflect.defineProperty(1,"test",{value:1}),e="function"!=typeof Object.preventExtensions||!k.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return t&&e})||et(k.Reflect,"defineProperty",mi.defineProperty)),k.Reflect.construct&&(l(function(){var t=function(){};return k.Reflect.construct(function(){},[],t)instanceof t})||et(k.Reflect,"construct",mi.construct)),"Invalid Date"!==String(new Date(NaN))){var $i=Date.prototype.toString;et(Date.prototype,"toString",function(){var t=+this;return t!=t?"Invalid Date":lt.Call($i,this)})}var xi={anchor:function(t){return lt.CreateHTML(this,"a","name",t)},big:function(){return lt.CreateHTML(this,"big","","")},blink:function(){return lt.CreateHTML(this,"blink","","")},bold:function(){return lt.CreateHTML(this,"b","","")},fixed:function(){return lt.CreateHTML(this,"tt","","")},fontcolor:function(t){return lt.CreateHTML(this,"font","color",t)},fontsize:function(t){return lt.CreateHTML(this,"font","size",t)},italics:function(){return lt.CreateHTML(this,"i","","")},link:function(t){return lt.CreateHTML(this,"a","href",t)},small:function(){return lt.CreateHTML(this,"small","","")},strike:function(){return lt.CreateHTML(this,"strike","","")},sub:function(){return lt.CreateHTML(this,"sub","","")},sup:function(){return lt.CreateHTML(this,"sup","","")}};f(Object.keys(xi),function(t){var e=String.prototype[t],n=!1;if(lt.IsCallable(e)){var i=o(e,"",' " '),r=E([],i.match(/"/g)).length;n=i!==i.toLowerCase()||r>2}else n=!0;n&&et(String.prototype,t,xi[t])});var ki=function(){if(!nt)return!1;var t="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!t)return!1;if(void 0!==t(G()))return!0;if("[null]"!==t([G()]))return!0;var e={a:G()};return e[G()]=!0,"{}"!==t(e)}(),Ci=l(function(){return!nt||"{}"===JSON.stringify(Object(G()))&&"[{}]"===JSON.stringify([Object(G())])});if(ki||!Ci){var Si=JSON.stringify;et(JSON,"stringify",function(t){if("symbol"!=typeof t){var e;arguments.length>1&&(e=arguments[1]);var n=[t];if(a(e))n.push(e);else{var i=lt.IsCallable(e)?e:null;n.push(function(t,e){var n=i?o(i,this,t,e):e;if("symbol"!=typeof n)return tt.symbol(n)?Ce({})(n):n})}return arguments.length>2&&n.push(arguments[2]),Si.apply(this,n)}})}return k})?o.call(e,n,e,t):o)||(t.exports=a)}).call(this,n(1),n(89))},function(t,e,n){var i=function(){return this||"object"==typeof self&&self}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n(150),r)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",l="object"==typeof t,u=e.regeneratorRuntime;if(u)l&&(t.exports=u);else{(u=e.regeneratorRuntime=l?t.exports:{}).wrap=y;var d="suspendedStart",p="suspendedYield",f="executing",_="completed",h={},m={};m[a]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(T([])));v&&v!==i&&r.call(v,a)&&(m=v);var b=k.prototype=$.prototype=Object.create(m);x.prototype=b.constructor=k,k.constructor=x,k[c]=x.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(b),t},u.awrap=function(t){return{__await:t}},C(S.prototype),S.prototype[s]=function(){return this},u.AsyncIterator=S,u.async=function(t,e,n,i){var r=new S(y(t,e,n,i));return u.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},C(b),b[c]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return s.type="throw",s.arg=t,e.next=i,r&&(e.method="next",e.arg=n),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;j(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:T(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),h}}}function y(t,e,n,i){var r=e&&e.prototype instanceof $?e:$,o=Object.create(r.prototype),a=new O(i||[]);return o._invoke=function(t,e,n){var i=d;return function(r,o){if(i===f)throw new Error("Generator is already running");if(i===_){if("throw"===r)throw o;return q()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var c=w(t,e,n);if("normal"===c.type){if(i=n.done?_:p,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=_,n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function $(){}function x(){}function k(){}function C(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(n,i){function o(){return new Promise(function(e,o){!function e(n,i,o,a){var s=w(t[n],t,i);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(l).then(function(t){c.value=t,o(c)},function(t){return e("throw",t,o,a)})}a(s.arg)}(n,i,e,o)})}return e=e?e.then(o,o):o()}}function A(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,A(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=w(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function T(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:q}}function q(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=function(){"use strict";var t=Math.floor(1000001*Math.random()),e={};function n(t){return Array.isArray?Array.isArray(t):-1!=t.constructor.toString().indexOf("Array")}var i={},r=function(t){try{var n=JSON.parse(t.data);if("object"!=typeof n||null===n)throw"malformed"}catch(t){return}var r,o,a,s=t.source,c=t.origin;if("string"==typeof n.method){var l=n.method.split("::");2==l.length?(r=l[0],a=l[1]):a=n.method}if(void 0!==n.id&&(o=n.id),"string"==typeof a){var u=!1;if(e[c]&&e[c][r])for(var d=0;d<e[c][r].length;d++)if(e[c][r][d].win===s){e[c][r][d].handler(c,a,n),u=!0;break}if(!u&&e["*"]&&e["*"][r])for(d=0;d<e["*"][r].length;d++)if(e["*"][r][d].win===s){e["*"][r][d].handler(c,a,n);break}}else void 0!==o&&i[o]&&i[o](c,a,n)};return window.addEventListener?window.addEventListener("message",r,!1):window.attachEvent&&window.attachEvent("onmessage",r),{build:function(r){var o=function(t){if(r.debugOutput&&window.console&&window.console.log){try{"string"!=typeof t&&(t=JSON.stringify(t))}catch(t){}console.log("["+c+"] "+t)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof r)throw"Channel build invoked without a proper object argument";if(!r.window||!r.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===r.window)throw"target window is same as present window -- not allowed";var a,s=!1;"string"==typeof r.origin&&("*"===r.origin?s=!0:null!==(a=r.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(r.origin=a[0].toLowerCase(),s=!0));if(!s)throw"Channel.build() called with an invalid origin";if(void 0!==r.scope){if("string"!=typeof r.scope)throw"scope, when specified, must be a string";if(r.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}var c=function(){for(var t="",e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<5;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}(),l={},u={},d={},p=!1,f=[],_=function(t,e,a){if("function"==typeof r.gotMessageObserver)try{r.gotMessageObserver(t,a)}catch(t){o("gotMessageObserver() raised an exception: "+t.toString())}if(a.id&&e){if(l[e]){var s=function(t,e,n){var i=!1,r=!1;return{origin:e,invoke:function(e,i){if(!d[t])throw"attempting to invoke a callback of a nonexistent transaction: "+t;for(var r=!1,o=0;o<n.length;o++)if(e===n[o]){r=!0;break}if(!r)throw"request supports no such callback '"+e+"'";m({id:t,callback:e,params:i})},error:function(e,n){if(r=!0,!d[t])throw"error called for nonexistent message: "+t;delete d[t],m({id:t,error:e,message:n})},complete:function(e){if(r=!0,!d[t])throw"complete called for nonexistent message: "+t;delete d[t],m({id:t,result:e})},delayReturn:function(t){return"boolean"==typeof t&&(i=!0===t),i},completed:function(){return r}}}(a.id,t,a.callbacks?a.callbacks:[]);d[a.id]={};try{if(a.callbacks&&n(a.callbacks)&&a.callbacks.length>0)for(var c=0;c<a.callbacks.length;c++){for(var p=a.callbacks[c],f=a.params,_=p.split("/"),h=0;h<_.length-1;h++){var g=_[h];"object"!=typeof f[g]&&(f[g]={}),f=f[g]}f[_[_.length-1]]=function(){var t=p;return function(e){return s.invoke(t,e)}}()}var v=l[e](s,a.params);s.delayReturn()||s.completed()||s.complete(v)}catch(t){var b="runtime_error",y=null;if("string"==typeof t?y=t:"object"==typeof t&&(t&&n(t)&&2==t.length?(b=t[0],y=t[1]):"string"==typeof t.error&&(b=t.error,t.message?"string"==typeof t.message?y=t.message:t=t.message:y="")),null===y)try{void 0===(y=JSON.stringify(t))&&(y=t.toString())}catch(e){y=t.toString()}s.error(b,y)}}}else a.id&&a.callback?u[a.id]&&u[a.id].callbacks&&u[a.id].callbacks[a.callback]?u[a.id].callbacks[a.callback](a.params):o("ignoring invalid callback, id:"+a.id+" ("+a.callback+")"):a.id?u[a.id]?(a.error?(0,u[a.id].error)(a.error,a.message):void 0!==a.result?(0,u[a.id].success)(a.result):(0,u[a.id].success)(),delete u[a.id],delete i[a.id]):o("ignoring invalid response: "+a.id):e&&l[e]&&l[e]({origin:t},a.params)};!function(t,n,i,r){function o(e){for(var n=0;n<e.length;n++)if(e[n].win===t)return!0;return!1}var a=!1;if("*"===n){for(var s in e)if(e.hasOwnProperty(s)&&"*"!==s&&"object"==typeof e[s][i]&&(a=o(e[s][i])))break}else e["*"]&&e["*"][i]&&(a=o(e["*"][i])),!a&&e[n]&&e[n][i]&&(a=o(e[n][i]));if(a)throw"A channel is already bound to the same window which overlaps with origin '"+n+"' and has scope '"+i+"'";"object"!=typeof e[n]&&(e[n]={}),"object"!=typeof e[n][i]&&(e[n][i]=[]),e[n][i].push({win:t,handler:r})}(r.window,r.origin,"string"==typeof r.scope?r.scope:"",_);var h=function(t){return"string"==typeof r.scope&&r.scope.length&&(t=[r.scope,t].join("::")),t},m=function(t,e){if(!t)throw"postMessage called with null message";if(o((p?"post  ":"queue ")+" message: "+JSON.stringify(t)),e||p){if("function"==typeof r.postMessageObserver)try{r.postMessageObserver(r.origin,t)}catch(t){o("postMessageObserver() raised an exception: "+t.toString())}r.window.postMessage(JSON.stringify(t),r.origin)}else f.push(t)},g={unbind:function(t){if(l[t]){if(!delete l[t])throw"can't delete method: "+t;return!0}return!1},bind:function(t,e){if(!t||"string"!=typeof t)throw"'method' argument to bind must be string";if(!e||"function"!=typeof e)throw"callback missing from bind params";if(l[t])throw"method '"+t+"' is already bound!";return l[t]=e,this},call:function(e){if(!e)throw"missing arguments to call function";if(!e.method||"string"!=typeof e.method)throw"'method' argument to call must be string";if(!e.success||"function"!=typeof e.success)throw"'success' callback missing from call";var n={},r=[],o=[],a=function(t,e){if(o.indexOf(e)>=0)throw"params cannot be a recursive data structure";if(o.push(e),"object"==typeof e)for(var i in e)if(e.hasOwnProperty(i)){var s=t+(t.length?"/":"")+i;"function"==typeof e[i]?(n[s]=e[i],r.push(s),delete e[i]):"object"==typeof e[i]&&null!==e[i]&&a(s,e[i])}};a("",e.params);var s,c,l,d={id:t,method:h(e.method),params:e.params};r.length&&(d.callbacks=r),e.timeout&&(s=t,c=e.timeout,l=h(e.method),window.setTimeout(function(){if(u[s]){var t="timeout ("+c+"ms) exceeded on method '"+l+"'";(0,u[s].error)("timeout_error",t),delete u[s],delete i[s]}},c)),u[t]={callbacks:n,error:e.error,success:e.success},i[t]=_,t++,m(d)},notify:function(t){if(!t)throw"missing arguments to notify function";if(!t.method||"string"!=typeof t.method)throw"'method' argument to notify must be string";m({method:h(t.method),params:t.params})},destroy:function(){!function(t,n,i){for(var r=e[n][i],o=0;o<r.length;o++)r[o].win===t&&r.splice(o,1);0===e[n][i].length&&delete e[n][i]}(r.window,r.origin,"string"==typeof r.scope?r.scope:""),window.removeEventListener?window.removeEventListener("message",_,!1):window.detachEvent&&window.detachEvent("onmessage",_),p=!1,l={},d={},u={},r.origin=null,f=[],o("channel destroyed"),c=""}};return g.bind("__ready",function(t,e){if(o("ready msg received"),p)throw"received ready message while in ready state.  help!";for(c+="ping"===e?"-R":"-L",g.unbind("__ready"),p=!0,o("ready msg accepted."),"ping"===e&&g.notify({method:"__ready",params:"pong"});f.length;)m(f.pop());"function"==typeof r.onReady&&r.onReady(g)}),setTimeout(function(){m({method:h("__ready"),params:"ping"},!0)},0),g}}}();t.exports=i},function(t,e){t.exports=window.jQuery},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){window.performance&&performance.mark&&window.performance.mark("bundle_load_start")},function(t,e,n){(function(t){var e;!function t(n,i,r){function o(s,c){if(!i[s]){if(!n[s]){if(!c&&("function"==typeof e&&e))return e(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[s]={exports:{}};n[s][0].call(u.exports,function(t){var e=n[s][1][t];return o(e||t)},u,u.exports,t,n,i,r)}return i[s].exports}for(var a="function"==typeof e&&e,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){"use strict";var i=t("./Array.prototype");e.exports={prototype:i,shim:function(){i.shim()}}},{"./Array.prototype":3}],2:[function(t,e,n){"use strict";e.exports=t("array-includes")},{"array-includes":14}],3:[function(t,e,n){"use strict";var i=t("./Array.prototype.includes");e.exports={includes:i,shim:function(){i.shim()}}},{"./Array.prototype.includes":2}],4:[function(t,e,n){"use strict";var i=t("object.getownpropertydescriptors"),r=t("object.entries"),o=t("object.values");e.exports={entries:r,getOwnPropertyDescriptors:i,shim:function(){i.shim(),r.shim(),o.shim()},values:o}},{"object.entries":38,"object.getownpropertydescriptors":64,"object.values":89}],5:[function(t,e,n){"use strict";var i=t("./String.prototype");e.exports={prototype:i,shim:function(){i.shim()}}},{"./String.prototype":7}],6:[function(t,e,n){"use strict";e.exports=t("string-at")},{"string-at":114}],7:[function(t,e,n){"use strict";var i=t("./String.prototype.at"),r=t("./String.prototype.padStart"),o=t("./String.prototype.padEnd"),a=t("./String.prototype.trimLeft"),s=t("./String.prototype.trimRight");e.exports={at:i,padStart:r,padEnd:o,trimLeft:a,trimRight:s,shim:function(){i.shim(),r.shim(),o.shim(),a.shim(),s.shim()}}},{"./String.prototype.at":6,"./String.prototype.padEnd":8,"./String.prototype.padStart":9,"./String.prototype.trimLeft":10,"./String.prototype.trimRight":11}],8:[function(t,e,n){"use strict";e.exports=t("string.prototype.padend")},{"string.prototype.padend":137}],9:[function(t,e,n){"use strict";e.exports=t("string.prototype.padstart")},{"string.prototype.padstart":162}],10:[function(t,e,n){"use strict";e.exports=t("string.prototype.trimleft")},{"string.prototype.trimleft":187}],11:[function(t,e,n){"use strict";e.exports=t("string.prototype.trimright")},{"string.prototype.trimright":197}],12:[function(t,e,n){
/*!
 * https://github.com/es-shims/es7-shim
 * @license es7-shim Copyright 2014 by contributors, MIT License
 * see https://github.com/es-shims/es7-shim/blob/master/LICENSE
 */
"use strict";var i=t("./Array"),r=t("./Object"),o=t("./String");e.exports={Array:i,Object:r,String:o,shim:function(){i.shim(),r.shim(),o.shim()}}},{"./Array":1,"./Object":4,"./String":5}],13:[function(e,n,i){(function(t){"use strict";var i=e("es-abstract/es6"),r=Number.isNaN||function(t){return t!=t},o=Number.isFinite||function(e){return"number"==typeof e&&t.isFinite(e)},a=Array.prototype.indexOf;n.exports=function(t){var e=arguments.length>1?i.ToInteger(arguments[1]):0;if(a&&!r(t)&&o(e)&&void 0!==t)return a.apply(this,arguments)>-1;var n=i.ToObject(this),s=i.ToLength(n.length);if(0===s)return!1;for(var c=e>=0?e:Math.max(0,s+e);c<s;){if(i.SameValueZero(t,n[c]))return!0;c+=1}return!1}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"es-abstract/es6":17}],14:[function(t,e,n){"use strict";var i=t("define-properties"),r=t("es-abstract/es6"),o=t("./implementation"),a=t("./polyfill"),s=a(),c=t("./shim"),l=Array.prototype.slice,u=function(t,e){return r.RequireObjectCoercible(t),s.apply(t,l.call(arguments,1))};i(u,{implementation:o,getPolyfill:a,shim:c}),e.exports=u},{"./implementation":13,"./polyfill":35,"./shim":36,"define-properties":15,"es-abstract/es6":17}],15:[function(t,e,n){"use strict";var i=t("object-keys"),r=t("foreach"),o="function"==typeof Symbol&&"symbol"==typeof Symbol(),a=Object.prototype.toString,s=Object.defineProperty&&function(){var t={};try{for(var e in Object.defineProperty(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),c=function(t,e,n,i){var r;e in t&&("function"!=typeof(r=i)||"[object Function]"!==a.call(r)||!i())||(s?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},l=function(t,e){var n=arguments.length>2?arguments[2]:{},a=i(e);o&&(a=a.concat(Object.getOwnPropertySymbols(e))),r(a,function(i){c(t,i,e[i],n[i])})};l.supportsDescriptors=!!s,e.exports=l},{foreach:26,"object-keys":33}],16:[function(t,e,n){"use strict";var i=Number.isNaN||function(t){return t!=t},r=t("./helpers/isFinite"),o=t("./helpers/sign"),a=t("./helpers/mod"),s=t("is-callable"),c={ToPrimitive:t("es-to-primitive/es5"),ToBoolean:function(t){return Boolean(t)},ToNumber:function(t){return Number(t)},ToInteger:function(t){var e=this.ToNumber(t);return i(e)?0:0!==e&&r(e)?o(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(i(e)||0===e||!r(e))return 0;var n=o(e)*Math.floor(Math.abs(e));return a(n,65536)},ToString:function(t){return String(t)},ToObject:function(t){return this.CheckObjectCoercible(t),Object(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new TypeError(e||"Cannot call method on "+t);return t},IsCallable:s,SameValue:function(t,e){return t===e?0!==t||1/t==1/e:i(t)&&i(e)}};e.exports=c},{"./helpers/isFinite":19,"./helpers/mod":21,"./helpers/sign":22,"es-to-primitive/es5":23,"is-callable":29}],17:[function(t,e,n){"use strict";var i=Object.prototype.toString,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,o=r?Symbol.prototype.toString:i,a=Number.isNaN||function(t){return t!=t},s=t("./helpers/isFinite"),c=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,l=t("./helpers/assign"),u=t("./helpers/sign"),d=t("./helpers/mod"),p=t("./helpers/isPrimitive"),f=t("es-to-primitive/es6"),_=parseInt,h=t("function-bind"),m=h.call(Function.call,String.prototype.slice),g=h.call(Function.call,RegExp.prototype.test,/^0b[01]+$/i),v=h.call(Function.call,RegExp.prototype.test,/^0o[0-7]+$/i),b=["","",""].join(""),y=new RegExp("["+b+"]","g"),w=h.call(Function.call,RegExp.prototype.test,y),$=h.call(Function.call,RegExp.prototype.test,/^[\-\+]0x[0-9a-f]+$/i),x=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),k=new RegExp("(^["+x+"]+)|(["+x+"]+$)","g"),C=h.call(Function.call,String.prototype.replace),S=t("./es5"),A=t("is-regex"),E=l(l({},S),{Call:function(t,e){var n=arguments.length>2?arguments[2]:[];if(!this.IsCallable(t))throw new TypeError(t+" is not a function");return t.apply(e,n)},ToPrimitive:f,ToNumber:function(t){var e=p(t)?t:f(t,"number");if("symbol"==typeof e)throw new TypeError("Cannot convert a Symbol value to a number");if("string"==typeof e){if(g(e))return this.ToNumber(_(m(e,2),2));if(v(e))return this.ToNumber(_(m(e,2),8));if(w(e)||$(e))return NaN;var n=function(t){return C(t,k,"")}(e);if(n!==e)return this.ToNumber(n)}return Number(e)},ToInt16:function(t){var e=this.ToUint16(t);return e>=32768?e-65536:e},ToInt8:function(t){var e=this.ToUint8(t);return e>=128?e-256:e},ToUint8:function(t){var e=this.ToNumber(t);if(a(e)||0===e||!s(e))return 0;var n=u(e)*Math.floor(Math.abs(e));return d(n,256)},ToUint8Clamp:function(t){var e=this.ToNumber(t);if(a(e)||e<=0)return 0;if(e>=255)return 255;var n=Math.floor(t);return n+.5<e?n+1:e<n+.5?n:n%2!=0?n+1:n},ToString:function(t){if("symbol"==typeof t)throw new TypeError("Cannot convert a Symbol value to a string");return String(t)},ToObject:function(t){return this.RequireObjectCoercible(t),Object(t)},ToPropertyKey:function(t){var e=this.ToPrimitive(t,String);return"symbol"==typeof e?o.call(e):this.ToString(e)},ToLength:function(t){var e=this.ToInteger(t);return e<=0?0:e>c?c:e},CanonicalNumericIndexString:function(t){if("[object String]"!==i.call(t))throw new TypeError("must be a string");if("-0"===t)return-0;var e=this.ToNumber(t);return this.SameValue(this.ToString(e),t)?e:void 0},RequireObjectCoercible:S.CheckObjectCoercible,IsArray:Array.isArray||function(t){return"[object Array]"===i.call(t)},IsConstructor:function(t){return this.IsCallable(t)},IsExtensible:function(t){return!Object.preventExtensions||!p(t)&&Object.isExtensible(t)},IsInteger:function(t){if("number"!=typeof t||a(t)||!s(t))return!1;var e=Math.abs(t);return Math.floor(e)===e},IsPropertyKey:function(t){return"string"==typeof t||"symbol"==typeof t},IsRegExp:function(t){if(!t||"object"!=typeof t)return!1;if(r){var e=RegExp[Symbol.match];if(void 0!==e)return S.ToBoolean(e)}return A(t)},SameValueZero:function(t,e){return t===e||a(t)&&a(e)}});delete E.CheckObjectCoercible,e.exports=E},{"./es5":16,"./helpers/assign":18,"./helpers/isFinite":19,"./helpers/isPrimitive":20,"./helpers/mod":21,"./helpers/sign":22,"es-to-primitive/es6":24,"function-bind":28,"is-regex":31}],18:[function(t,e,n){var i=Object.prototype.hasOwnProperty;e.exports=Object.assign||function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);return t}},{}],19:[function(t,e,n){var i=Number.isNaN||function(t){return t!=t};e.exports=Number.isFinite||function(t){return"number"==typeof t&&!i(t)&&t!==1/0&&t!==-1/0}},{}],20:[function(t,e,n){e.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},{}],21:[function(t,e,n){e.exports=function(t,e){var n=t%e;return Math.floor(n>=0?n:n+e)}},{}],22:[function(t,e,n){e.exports=function(t){return t>=0?1:-1}},{}],23:[function(t,e,n){"use strict";var i=Object.prototype.toString,r=t("./helpers/isPrimitive"),o=t("is-callable"),a=function(t,e){var n=e||("[object Date]"===i.call(t)?String:Number);if(n===String||n===Number){var a,s,c=n===String?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<c.length;++s)if(o(t[c[s]])&&(a=t[c[s]](),r(a)))return a;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};e.exports=function(t,e){return r(t)?t:a(t,e)}},{"./helpers/isPrimitive":25,"is-callable":29}],24:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,r=t("./helpers/isPrimitive"),o=t("is-callable"),a=t("is-date-object"),s=t("is-symbol");e.exports=function(t,e){if(r(t))return t;var n,c="default";if(arguments.length>1&&(e===String?c="string":e===Number&&(c="number")),i&&(Symbol.toPrimitive?n=function(t,e){var n=t[e];if(null!=n){if(!o(n))throw new TypeError(n+" returned for property "+e+" of object "+t+" is not a function");return n}}(t,Symbol.toPrimitive):s(t)&&(n=Symbol.prototype.valueOf)),void 0!==n){var l=n.call(t,c);if(r(l))return l;throw new TypeError("unable to convert exotic object to primitive")}return"default"===c&&(a(t)||s(t))&&(c="string"),function(t,e){if(null==t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof e||"number"!==e&&"string"!==e)throw new TypeError('hint must be "string" or "number"');var n,i,a,s="string"===e?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<s.length;++a)if(n=t[s[a]],o(n)&&(i=n.call(t),r(i)))return i;throw new TypeError("No default value")}(t,"default"===c?"number":c)}},{"./helpers/isPrimitive":25,"is-callable":29,"is-date-object":30,"is-symbol":32}],25:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],26:[function(t,e,n){var i=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(t,e,n){if("[object Function]"!==r.call(e))throw new TypeError("iterator must be a function");var o=t.length;if(o===+o)for(var a=0;a<o;a++)e.call(n,t[a],a,t);else for(var s in t)i.call(t,s)&&e.call(n,t[s],s,t)}},{}],27:[function(t,e,n){var i=Array.prototype.slice,r=Object.prototype.toString;e.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==r.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,o=i.call(arguments,1),a=Math.max(0,e.length-o.length),s=[],c=0;c<a;c++)s.push("$"+c);if(n=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var r=e.apply(this,o.concat(i.call(arguments)));return Object(r)===r?r:this}return e.apply(t,o.concat(i.call(arguments)))}),e.prototype){var l=function(){};l.prototype=e.prototype,n.prototype=new l,l.prototype=null}return n}},{}],28:[function(t,e,n){var i=t("./implementation");e.exports=Function.prototype.bind||i},{"./implementation":27}],29:[function(t,e,n){"use strict";var i=Function.prototype.toString,r=/^\s*class /,o=function(t){try{var e=i.call(t).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return r.test(e)}catch(t){return!1}},a=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(s)return function(t){try{return!o(t)&&(i.call(t),!0)}catch(t){return!1}}(t);if(o(t))return!1;var e=a.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},{}],30:[function(t,e,n){"use strict";var i=Date.prototype.getDay,r=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return i.call(t),!0}catch(t){return!1}}(t):"[object Date]"===r.call(t))}},{}],31:[function(t,e,n){"use strict";var i=RegExp.prototype.exec,r=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(t){return"object"==typeof t&&(o?function(t){try{return i.call(t),!0}catch(t){return!1}}(t):"[object RegExp]"===r.call(t))}},{}],32:[function(t,e,n){"use strict";var i=Object.prototype.toString;if("function"==typeof Symbol&&"symbol"==typeof Symbol()){var r=Symbol.prototype.toString,o=/^Symbol\(.*\)$/;e.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==i.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&o.test(r.call(t))}(t)}catch(t){return!1}}}else e.exports=function(t){return!1}},{}],33:[function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=Array.prototype.slice,a=t("./isArguments"),s=!{toString:null}.propertyIsEnumerable("toString"),c=function(){}.propertyIsEnumerable("prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(t){var e=t.constructor;return e&&e.prototype===t},d={$console:!0,$frame:!0,$frameElement:!0,$frames:!0,$parent:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{u(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),f=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===r.call(t),o=a(t),d=e&&"[object String]"===r.call(t),f=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var _=c&&n;if(d&&t.length>0&&!i.call(t,0))for(var h=0;h<t.length;++h)f.push(String(h));if(o&&t.length>0)for(var m=0;m<t.length;++m)f.push(String(m));else for(var g in t)_&&"prototype"===g||!i.call(t,g)||f.push(String(g));if(s)for(var v=function(t){if("undefined"==typeof window||!p)return u(t);try{return u(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)v&&"constructor"===l[b]||!i.call(t,l[b])||f.push(l[b]);return f};f.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return a(e)?t(o.call(e)):t(e)}}}else Object.keys=f;return Object.keys||f},e.exports=f},{"./isArguments":34}],34:[function(t,e,n){"use strict";var i=Object.prototype.toString;e.exports=function(t){var e=i.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),n}},{}],35:[function(t,e,n){"use strict";var i=t("./implementation");e.exports=function(){return Array.prototype.includes||i}},{"./implementation":13}],36:[function(t,e,n){"use strict";var i=t("define-properties"),r=t("./polyfill");e.exports=function(){var t=r();return Array.prototype.includes!==t&&i(Array.prototype,{includes:t}),t}},{"./polyfill":35,"define-properties":15}],37:[function(t,e,n){"use strict";var i=t("es-abstract/es7"),r=t("has"),o=t("function-bind").call(Function.call,Object.prototype.propertyIsEnumerable);e.exports=function(t){var e=i.RequireObjectCoercible(t),n=[];for(var a in e)r(e,a)&&o(e,a)&&n.push([a,e[a]]);return n}},{"es-abstract/es7":42,"function-bind":53,has:54}],38:[function(t,e,n){"use strict";var i=t("define-properties"),r=t("./implementation");i(r,{getPolyfill:t("./polyfill"),implementation:r,shim:t("./shim")}),e.exports=r},{"./implementation":37,"./polyfill":61,"./shim":62,"define-properties":39}],39:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:51,"object-keys":59}],40:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":44,"./helpers/mod":46,"./helpers/sign":47,dup:16,"es-to-primitive/es5":48,"is-callable":55}],41:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":40,"./helpers/assign":43,"./helpers/isFinite":44,"./helpers/isPrimitive":45,"./helpers/mod":46,"./helpers/sign":47,dup:17,"es-to-primitive/es6":49,"function-bind":53,"is-regex":57}],42:[function(t,e,n){"use strict";var i=t("./es6"),r=t("./helpers/assign")(i,{SameValueNonNumber:function(t,e){if("number"==typeof t||typeof t!=typeof e)throw new TypeError("SameValueNonNumber requires two non-number values of the same type.");return this.SameValue(t,e)}});e.exports=r},{"./es6":41,"./helpers/assign":43}],43:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],44:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],45:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],46:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],47:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],48:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":50,dup:23,"is-callable":55}],49:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":50,dup:24,"is-callable":55,"is-date-object":56,"is-symbol":58}],50:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],51:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],52:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],53:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":52,dup:28}],54:[function(t,e,n){var i=t("function-bind");e.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":53}],55:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],56:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],57:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],58:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],59:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":60,dup:33}],60:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],61:[function(t,e,n){"use strict";var i=t("./implementation");e.exports=function(){return"function"==typeof Object.entries?Object.entries:i}},{"./implementation":37}],62:[function(t,e,n){"use strict";var i=t("./polyfill"),r=t("define-properties");e.exports=function(){var t=i();return r(Object,{entries:t},{entries:function(){return Object.entries!==t}}),t}},{"./polyfill":61,"define-properties":39}],63:[function(t,e,n){"use strict";var i=t("es-abstract/es7"),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,c=Function.call.bind(Array.prototype.concat),l=Function.call.bind(Array.prototype.reduce),u=s?function(t){return c(a(t),s(t))}:a,d=i.IsCallable(o)&&i.IsCallable(a);e.exports=function(t){if(i.RequireObjectCoercible(t),!d)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var e=i.ToObject(t);return l(u(e),function(t,n){var i,a,s;return i=t,a=n,s=o(e,n),r&&a in i?r(i,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):i[a]=s,t},{})}},{"es-abstract/es7":68}],64:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{"./implementation":63,"./polyfill":86,"./shim":87,"define-properties":65,dup:38}],65:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:77,"object-keys":84}],66:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":70,"./helpers/mod":72,"./helpers/sign":73,dup:16,"es-to-primitive/es5":74,"is-callable":80}],67:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":66,"./helpers/assign":69,"./helpers/isFinite":70,"./helpers/isPrimitive":71,"./helpers/mod":72,"./helpers/sign":73,dup:17,"es-to-primitive/es6":75,"function-bind":79,"is-regex":82}],68:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"./es6":67,"./helpers/assign":69,dup:42}],69:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],70:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],71:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],72:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],73:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],74:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":76,dup:23,"is-callable":80}],75:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":76,dup:24,"is-callable":80,"is-date-object":81,"is-symbol":83}],76:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],77:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],78:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],79:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":78,dup:28}],80:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],81:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],82:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],83:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],84:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":85,dup:33}],85:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],86:[function(t,e,n){"use strict";var i=t("./implementation");e.exports=function(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:i}},{"./implementation":63}],87:[function(t,e,n){"use strict";var i=t("./polyfill"),r=t("define-properties");e.exports=function(){var t=i();return r(Object,{getOwnPropertyDescriptors:t},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==t}}),t}},{"./polyfill":86,"define-properties":65}],88:[function(t,e,n){"use strict";var i=t("es-abstract/es7"),r=t("has"),o=t("function-bind").call(Function.call,Object.prototype.propertyIsEnumerable);e.exports=function(t){var e=i.RequireObjectCoercible(t),n=[];for(var a in e)r(e,a)&&o(e,a)&&n.push(e[a]);return n}},{"es-abstract/es7":93,"function-bind":104,has:105}],89:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{"./implementation":88,"./polyfill":112,"./shim":113,"define-properties":90,dup:38}],90:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:102,"object-keys":110}],91:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":95,"./helpers/mod":97,"./helpers/sign":98,dup:16,"es-to-primitive/es5":99,"is-callable":106}],92:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":91,"./helpers/assign":94,"./helpers/isFinite":95,"./helpers/isPrimitive":96,"./helpers/mod":97,"./helpers/sign":98,dup:17,"es-to-primitive/es6":100,"function-bind":104,"is-regex":108}],93:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"./es6":92,"./helpers/assign":94,dup:42}],94:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],95:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],96:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],97:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],98:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],99:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":101,dup:23,"is-callable":106}],100:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":101,dup:24,"is-callable":106,"is-date-object":107,"is-symbol":109}],101:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],102:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],103:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],104:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":103,dup:28}],105:[function(t,e,n){arguments[4][54][0].apply(n,arguments)},{dup:54,"function-bind":104}],106:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],107:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],108:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],109:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],110:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":111,dup:33}],111:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],112:[function(t,e,n){"use strict";var i=t("./implementation");e.exports=function(){return"function"==typeof Object.values?Object.values:i}},{"./implementation":88}],113:[function(t,e,n){"use strict";var i=t("./polyfill"),r=t("define-properties");e.exports=function(){var t=i();return r(Object,{values:t},{values:function(){return Object.values!==t}}),t}},{"./polyfill":112,"define-properties":90}],114:[function(t,e,n){"use strict";var i=t("define-properties"),r=t("es-abstract/es7"),o=t("function-bind"),a=function(t){r.RequireObjectCoercible(this);var e=r.ToObject(this),n=r.ToString(e),i=r.ToInteger(t),o=n.length;if(i<0||i>=o)return"";var a,s=n.charCodeAt(i),c=i+1,l=1;return s>=55296&&s<=56319&&o>c&&(a=n.charCodeAt(c))>=56320&&a<=57343&&(l=2),n.slice(i,i+l)},s=o.call(Function.call,a);i(s,{method:a,shim:function(){return i(String.prototype,{at:a}),String.prototype.at}}),e.exports=s},{"define-properties":115,"es-abstract/es7":118,"function-bind":129}],115:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:127,"object-keys":134}],116:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":120,"./helpers/mod":122,"./helpers/sign":123,dup:16,"es-to-primitive/es5":124,"is-callable":130}],117:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":116,"./helpers/assign":119,"./helpers/isFinite":120,"./helpers/isPrimitive":121,"./helpers/mod":122,"./helpers/sign":123,dup:17,"es-to-primitive/es6":125,"function-bind":129,"is-regex":132}],118:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"./es6":117,"./helpers/assign":119,dup:42}],119:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],120:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],121:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],122:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],123:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],124:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":126,dup:23,"is-callable":130}],125:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":126,dup:24,"is-callable":130,"is-date-object":131,"is-symbol":133}],126:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],127:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],128:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],129:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":128,dup:28}],130:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],131:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],132:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],133:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],134:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":135,dup:33}],135:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],136:[function(t,e,n){"use strict";var i=t("function-bind"),r=t("es-abstract/es7"),o=i.call(Function.call,String.prototype.slice);e.exports=function(t){var e,n=r.RequireObjectCoercible(this),i=r.ToString(n),a=r.ToLength(i.length);arguments.length>1&&(e=arguments[1]);var s=void 0===e?"":r.ToString(e);""===s&&(s=" ");var c=r.ToLength(t);if(c<=a)return i;for(var l=c-a;s.length<l;){var u=s.length,d=l-u;s+=u>d?o(s,0,d):s}return i+(s.length>l?o(s,0,l):s)}},{"es-abstract/es7":141,"function-bind":152}],137:[function(t,e,n){"use strict";var i=t("function-bind"),r=t("define-properties"),o=t("es-abstract/es7"),a=t("./implementation"),s=t("./polyfill"),c=t("./shim"),l=i.call(Function.apply,a),u=function(t,e){o.RequireObjectCoercible(t);var n=[e];return arguments.length>2&&n.push(arguments[2]),l(t,n)};r(u,{getPolyfill:s,implementation:a,shim:c}),e.exports=u},{"./implementation":136,"./polyfill":159,"./shim":160,"define-properties":138,"es-abstract/es7":141,"function-bind":152}],138:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:150,"object-keys":157}],139:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":143,"./helpers/mod":145,"./helpers/sign":146,dup:16,"es-to-primitive/es5":147,"is-callable":153}],140:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":139,"./helpers/assign":142,"./helpers/isFinite":143,"./helpers/isPrimitive":144,"./helpers/mod":145,"./helpers/sign":146,dup:17,"es-to-primitive/es6":148,"function-bind":152,"is-regex":155}],141:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"./es6":140,"./helpers/assign":142,dup:42}],142:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],143:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],144:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],145:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],146:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],147:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":149,dup:23,"is-callable":153}],148:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":149,dup:24,"is-callable":153,"is-date-object":154,"is-symbol":156}],149:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],150:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],151:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],152:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":151,dup:28}],153:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],154:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],155:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],156:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],157:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":158,dup:33}],158:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],159:[function(t,e,n){"use strict";var i=t("./implementation");e.exports=function(){return"function"==typeof String.prototype.padEnd?String.prototype.padEnd:i}},{"./implementation":136}],160:[function(t,e,n){"use strict";var i=t("./polyfill"),r=t("define-properties");e.exports=function(){var t=i();return r(String.prototype,{padEnd:t},{padEnd:function(){return String.prototype.padEnd!==t}}),t}},{"./polyfill":159,"define-properties":138}],161:[function(t,e,n){"use strict";var i=t("function-bind"),r=t("es-abstract/es7"),o=i.call(Function.call,String.prototype.slice);e.exports=function(t){var e,n=r.RequireObjectCoercible(this),i=r.ToString(n),a=r.ToLength(i.length);arguments.length>1&&(e=arguments[1]);var s=void 0===e?"":r.ToString(e);""===s&&(s=" ");var c=r.ToLength(t);if(c<=a)return i;for(var l=c-a;s.length<l;){var u=s.length,d=l-u;s+=u>d?o(s,0,d):s}return(s.length>l?o(s,0,l):s)+i}},{"es-abstract/es7":166,"function-bind":177}],162:[function(t,e,n){"use strict";var i=t("function-bind"),r=t("define-properties"),o=t("es-abstract/es7"),a=t("./implementation"),s=t("./polyfill"),c=t("./shim"),l=i.call(Function.apply,a),u=function(t,e){o.RequireObjectCoercible(t);var n=[e];return arguments.length>2&&n.push(arguments[2]),l(t,n)};r(u,{getPolyfill:s,implementation:a,shim:c}),e.exports=u},{"./implementation":161,"./polyfill":184,"./shim":185,"define-properties":163,"es-abstract/es7":166,"function-bind":177}],163:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:175,"object-keys":182}],164:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":168,"./helpers/mod":170,"./helpers/sign":171,dup:16,"es-to-primitive/es5":172,"is-callable":178}],165:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":164,"./helpers/assign":167,"./helpers/isFinite":168,"./helpers/isPrimitive":169,"./helpers/mod":170,"./helpers/sign":171,dup:17,"es-to-primitive/es6":173,"function-bind":177,"is-regex":180}],166:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"./es6":165,"./helpers/assign":167,dup:42}],167:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],168:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],169:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],170:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],171:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],172:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":174,dup:23,"is-callable":178}],173:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":174,dup:24,"is-callable":178,"is-date-object":179,"is-symbol":181}],174:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],175:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],176:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],177:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":176,dup:28}],178:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],179:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],180:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],181:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],182:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":183,dup:33}],183:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],184:[function(t,e,n){"use strict";var i=t("./implementation");e.exports=function(){return"function"==typeof String.prototype.padStart?String.prototype.padStart:i}},{"./implementation":161}],185:[function(t,e,n){"use strict";var i=t("./polyfill"),r=t("define-properties");e.exports=function(){var t=i();return r(String.prototype,{padStart:t},{padStart:function(){return String.prototype.padStart!==t}}),t}},{"./polyfill":184,"define-properties":163}],186:[function(t,e,n){"use strict";var i=t("function-bind").call(Function.call,String.prototype.replace),r=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;e.exports=function(){return i(this,r,"")}},{"function-bind":191}],187:[function(t,e,n){"use strict";var i=t("function-bind"),r=t("define-properties"),o=t("./implementation"),a=t("./polyfill"),s=t("./shim"),c=i.call(Function.call,a());r(c,{getPolyfill:a,implementation:o,shim:s}),e.exports=c},{"./implementation":186,"./polyfill":194,"./shim":195,"define-properties":188,"function-bind":191}],188:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:189,"object-keys":192}],189:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],190:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],191:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":190,dup:28}],192:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":193,dup:33}],193:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],194:[function(t,e,n){"use strict";var i=t("./implementation");e.exports=function(){if(!String.prototype.trimLeft)return i;return""!=="".trimLeft()?i:String.prototype.trimLeft}},{"./implementation":186}],195:[function(t,e,n){"use strict";var i=t("define-properties"),r=t("./polyfill");e.exports=function(){var t=r();return i(String.prototype,{trimLeft:t},{trimLeft:function(){return String.prototype.trimLeft!==t}}),t}},{"./polyfill":194,"define-properties":188}],196:[function(t,e,n){"use strict";var i=t("function-bind").call(Function.call,String.prototype.replace),r=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;e.exports=function(){return i(this,r,"")}},{"function-bind":201}],197:[function(t,e,n){arguments[4][187][0].apply(n,arguments)},{"./implementation":196,"./polyfill":204,"./shim":205,"define-properties":198,dup:187,"function-bind":201}],198:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:199,"object-keys":202}],199:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],200:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],201:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":200,dup:28}],202:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":203,dup:33}],203:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],204:[function(t,e,n){"use strict";var i=t("./implementation");e.exports=function(){if(!String.prototype.trimRight)return i;return""!=="".trimRight()?i:String.prototype.trimRight}},{"./implementation":196}],205:[function(t,e,n){"use strict";var i=t("define-properties"),r=t("./polyfill");e.exports=function(){var t=r();return i(String.prototype,{trimRight:t},{trimRight:function(){return String.prototype.trimRight!==t}}),t}},{"./polyfill":204,"define-properties":198}],206:[function(t,e,n){"use strict";e.exports=t("./es7-shim").shim()},{"./es7-shim":12}]},{},[206])}).call(this,n(1))},function(t,e){!function(){var t,e,n=function(){try{return!!Symbol.iterator}catch(t){return!1}}(),i=function(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e};"URLSearchParams"in window||((e=(t=function(e){if(Object.defineProperty(this,"_entries",{value:{}}),"string"==typeof e){if(""!==e)for(var n,i=(e=e.replace(/^\?/,"")).split("&"),r=0;r<i.length;r++)n=i[r].split("="),this.append(decodeURIComponent(n[0]),n.length>1?decodeURIComponent(n[1]):"")}else if(e instanceof t){var o=this;e.forEach(function(t,e){o.append(t,e)})}}).prototype).append=function(t,e){t in this._entries?this._entries[t].push(e.toString()):this._entries[t]=[e.toString()]},e.delete=function(t){delete this._entries[t]},e.get=function(t){return t in this._entries?this._entries[t][0]:null},e.getAll=function(t){return t in this._entries?this._entries[t].slice(0):[]},e.has=function(t){return t in this._entries},e.set=function(t,e){this._entries[t]=[e.toString()]},e.forEach=function(t,e){var n;for(var i in this._entries)if(this._entries.hasOwnProperty(i)){n=this._entries[i];for(var r=0;r<n.length;r++)t.call(e,n[r],i,this)}},e.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),i(t)},e.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},e.entries=function(){var t=[];return this.forEach(function(e,n){t.push([e,n])}),i(t)},n&&(e[Symbol.iterator]=e.entries),e.toString=function(){var t="";return this.forEach(function(e,n){t.length>0&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e)}),t},window.URLSearchParams=t)}(),function(){if(function(){try{var t=new URL("b","http://a");return t.pathname="c%20d","http://a/c%20d"===t.href}catch(t){return!1}}()||function(){var t=window.URL,e=function(t,e){if("string"!=typeof t)throw new TypeError("Failed to construct 'URL': Invalid URL");var n=document.implementation.createHTMLDocument("");if(e){var i=n.createElement("base");i.href=e,n.head.appendChild(i)}var r=n.createElement("a");if(r.href=t,n.body.appendChild(r),":"===r.protocol||!/:/.test(r.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:r})},n=e.prototype;["hash","host","hostname","href","port","protocol","search"].forEach(function(t){!function(t){Object.defineProperty(n,t,{get:function(){return this._anchorElement[t]},set:function(e){this._anchorElement[t]=e},enumerable:!0})}(t)}),Object.defineProperties(n,{toString:{get:function(){var t=this;return function(){return t.href}}},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(t){this._anchorElement.pathname=t},enumerable:!0},origin:{get:function(){return this._anchorElement.protocol+"//"+this._anchorElement.hostname},enumerable:!0},password:{get:function(){return""},set:function(t){},enumerable:!0},username:{get:function(){return""},set:function(t){},enumerable:!0},searchParams:{get:function(){var t=new URLSearchParams(this.search),e=this;return["append","delete","set"].forEach(function(n){var i=t[n];t[n]=function(){i.apply(t,arguments),e.search=t.toString()}}),t},enumerable:!0}}),e.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},e.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},window.URL=e}(),!("origin"in window.location))try{Object.defineProperty(window.location,"origin",{get:function(){return window.location.protocol+"//"+window.location.hostname},enumerable:!0})}catch(t){setInterval(function(){window.location.origin=window.location.protocol+"//"+window.location.hostname},100)}}()},function(t,e,n){var i,r,o;
/*!
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */r=[n(12)],void 0===(o="function"==typeof(i=function(t){var e=/\+/g;function n(t){return o.raw?t:encodeURIComponent(t)}function i(t){return n(o.json?JSON.stringify(t):String(t))}function r(n,i){var r=o.raw?n:function(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(e," ")),o.json?JSON.parse(t):t}catch(t){}}(n);return t.isFunction(i)?i(r):r}var o=t.cookie=function(e,a,s){if(void 0!==a&&!t.isFunction(a)){if("number"==typeof(s=t.extend({},o.defaults,s)).expires){var c=s.expires,l=s.expires=new Date;l.setTime(+l+864e5*c)}return document.cookie=[n(e),"=",i(a),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var u,d=e?void 0:{},p=document.cookie?document.cookie.split("; "):[],f=0,_=p.length;f<_;f++){var h=p[f].split("="),m=(u=h.shift(),o.raw?u:decodeURIComponent(u)),g=h.join("=");if(e&&e===m){d=r(g,a);break}e||void 0===(g=r(g))||(d[m]=g)}return d};o.defaults={},t.removeCookie=function(e,n){return void 0!==t.cookie(e)&&(t.cookie(e,"",t.extend({},n,{expires:-1})),!t.cookie(e))}})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){(function(e){t.exports=e.FastClick=n(255)}).call(this,n(1))},function(t,e,n){var i;!function(){"use strict";
/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */function r(t,e){var n;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=t,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!r.notNeeded(t)){for(var i=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=0,s=i.length;o<s;o++)this[i[o]]=c(this[i[o]],this);a&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(n=t.onclick,t.addEventListener("click",function(t){n(t)},!1),t.onclick=null)}function c(t,e){return function(){return t.apply(e,arguments)}}}var o=navigator.userAgent.indexOf("Windows Phone")>=0,a=navigator.userAgent.indexOf("Android")>0&&!o,s=/iP(ad|hone|od)/.test(navigator.userAgent)&&!o,c=s&&/OS 4_\d(_\d)?/.test(navigator.userAgent),l=s&&/OS [6-7]_\d/.test(navigator.userAgent),u=navigator.userAgent.indexOf("BB10")>0;r.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(s&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},r.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!a;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},r.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},r.prototype.determineEventType=function(t){return a&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},r.prototype.focus=function(t){var e;s&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},r.prototype.updateScrollParent=function(t){var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},r.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},r.prototype.onTouchStart=function(t){var e,n,i;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],s){if((i=window.getSelection()).rangeCount&&!i.isCollapsed)return!0;if(!c){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},r.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},r.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},r.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},r.prototype.onTouchEnd=function(t){var e,n,i,r,o,u=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,l&&(o=t.changedTouches[0],(u=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||u).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(i=u.tagName.toLowerCase())){if(e=this.findControl(u)){if(this.focus(u),a)return!1;u=e}}else if(this.needsFocus(u))return t.timeStamp-n>100||s&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),s&&"select"===i||(this.targetElement=null,t.preventDefault()),!1);return!(!s||c||!(r=u.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},r.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},r.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},r.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},r.prototype.destroy=function(){var t=this.layer;a&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},r.notNeeded=function(t){var e,n,i;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!a)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(u&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]"))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(e=document.querySelector("meta[name=viewport]"))&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===t.style.touchAction||"manipulation"===t.style.touchAction))},r.attach=function(t,e){return new r(t,e)},void 0===(i=function(){return r}.call(e,n,e,t))||(t.exports=i)}()},function(t,e){
/**
 * @license AngularJS v1.6.6
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t,e){"use strict";var n,i,r,o,a,s,c,l,u,d=e.$$minErr("$sanitize");e.module("ngSanitize",[]).provider("$sanitize",function(){var p=!1;this.$get=["$$sanitizeUri",function(t){return p&&i(x,w),function(e){var n=[];return l(e,u(n,function(e,n){return!/^unsafe:/.test(t(e,n))})),n.join("")}}],this.enableSvg=function(t){return o(t)?(p=t,this):p},n=e.bind,i=e.extend,r=e.forEach,o=e.isDefined,a=e.lowercase,s=e.noop,l=function(t,e){null==t?t="":"string"!=typeof t&&(t=""+t);var n=j(t);if(!n)return"";var i=5;do{if(0===i)throw d("uinput","Failed to sanitize html because the input is unstable");i--,t=n.innerHTML,n=j(t)}while(t!==n.innerHTML);for(var r=n.firstChild;r;){switch(r.nodeType){case 1:e.start(r.nodeName.toLowerCase(),O(r.attributes));break;case 3:e.chars(r.textContent)}var o;if(!((o=r.firstChild)||(1===r.nodeType&&e.end(r.nodeName.toLowerCase()),o=M("nextSibling",r))))for(;null==o&&(r=M("parentNode",r))!==n;)o=M("nextSibling",r),1===r.nodeType&&e.end(r.nodeName.toLowerCase());r=o}for(;r=n.firstChild;)n.removeChild(r)},u=function(t,e){var i=!1,o=n(t,t.push);return{start:function(t,n){t=a(t),!i&&$[t]&&(i=t),i||!0!==x[t]||(o("<"),o(t),r(n,function(n,i){var r=a(i),s="img"===t&&"src"===r||"background"===r;!0!==A[r]||!0===k[r]&&!e(n,s)||(o(" "),o(i),o('="'),o(T(n)),o('"'))}),o(">"))},end:function(t){t=a(t),i||!0!==x[t]||!0===h[t]||(o("</"),o(t),o(">")),t==i&&(i=!1)},chars:function(t){i||o(T(t))}}},c=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};var f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_=/([^#-~ |!])/g,h=E("area,br,col,hr,img,wbr"),m=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),g=E("rp,rt"),v=i({},g,m),b=i({},m,E("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),y=i({},g,E("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),w=E("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),$=E("script,style"),x=i({},h,b,y,v),k=E("background,cite,href,longdesc,src,xlink:href"),C=E("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),S=E("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),A=i({},k,S,C);function E(t,e){var n,i={},r=t.split(",");for(n=0;n<r.length;n++)i[e?a(r[n]):r[n]]=!0;return i}var j=function(t,e){var n;if(!e||!e.implementation)throw d("noinert","Can't create an inert html document");var i=((n=e.implementation.createHTMLDocument("inert")).documentElement||n.getDocumentElement()).querySelector("body");return i.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',i.querySelector("svg")?(i.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',i.querySelector("svg img")?function(e){e="<remove></remove>"+e;try{var n=(new t.DOMParser).parseFromString(e,"text/html").body;return n.firstChild.remove(),n}catch(t){return}}:function(t){return i.innerHTML=t,e.documentMode&&q(i),i}):function(e){e="<remove></remove>"+e;try{e=encodeURI(e)}catch(t){return}var n=new t.XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+e,!1),n.send(null);var i=n.response.body;return i.firstChild.remove(),i}}(t,t.document);function O(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n];e[r.name]=r.value}return e}function T(t){return t.replace(/&/g,"&amp;").replace(f,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(_,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function q(e){for(;e;){if(e.nodeType===t.Node.ELEMENT_NODE)for(var n=e.attributes,i=0,r=n.length;i<r;i++){var o=n[i],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(e.removeAttributeNode(o),i--,r--)}var s=e.firstChild;s&&q(s),e=M("nextSibling",e)}}function M(t,e){var n=e[t];if(n&&c.call(e,n))throw d("elclob","Failed to sanitize html because the element is clobbered: {0}",e.outerHTML||e.outerText);return n}}).info({angularVersion:"1.6.6"}),e.module("ngSanitize").filter("linky",["$sanitize",function(t){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,r=e.$$minErr("linky"),o=e.isDefined,a=e.isFunction,c=e.isObject,l=e.isString;return function(e,d,p){if(null==e||""===e)return e;if(!l(e))throw r("notstring","Expected string but received: {0}",e);for(var f,_,h,m=a(p)?p:c(p)?function(){return p}:function(){return{}},g=e,v=[];f=g.match(n);)_=f[0],f[2]||f[4]||(_=(f[3]?"http://":"mailto:")+_),h=f.index,b(g.substr(0,h)),y(_,f[0].replace(i,"")),g=g.substring(h+f[0].length);return b(g),t(v.join(""));function b(t){var e,n;t&&v.push((e=t,u(n=[],s).chars(e),n.join("")))}function y(t,e){var n,i=m(t);for(n in v.push("<a "),i)v.push(n+'="'+i[n]+'" ');!o(d)||"target"in i||v.push('target="',d,'" '),v.push('href="',t.replace(/"/g,"&quot;"),'">'),b(e),v.push("</a>")}}}])}(window,window.angular)},function(t,e){
/**
 * @license AngularJS v1.6.6
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t,e){"use strict";var n,i,r,o,a=1,s="-add",c="-remove",l="ng-",u="ng-animate",d="$$ngAnimateChildren";void 0===t.ontransitionend&&void 0!==t.onwebkittransitionend?("-webkit-",n="WebkitTransition",i="webkitTransitionEnd transitionend"):(n="transition",i="transitionend"),void 0===t.onanimationend&&void 0!==t.onwebkitanimationend?("-webkit-",r="WebkitAnimation",o="webkitAnimationEnd animationend"):(r="animation",o="animationend");var p="Duration",f="TimingFunction",_="PlayState",h=r+"Delay",m=r+p,g=n+"Delay",v=n+p,b=e.$$minErr("ng");function y(t,e,n){if(!t)throw b("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function w(t,e){return t||e?t?e?(X(t)&&(t=t.join(" ")),X(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function $(t,e,n){var i="";return t=X(t)?t:t&&it(t)&&t.length?t.split(/\s+/):[],Q(t,function(t,r){t&&t.length>0&&(i+=r>0?" ":"",i+=n?e+t:t+e)}),i}function x(t){if(t instanceof ot)switch(t.length){case 0:return t;case 1:if(t[0].nodeType===a)return t;break;default:return ot(k(t))}if(t.nodeType===a)return ot(t)}function k(t){if(!t[0])return t;for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===a)return n}}function C(t){return function(e,n){n.addClass&&(!function(t,e,n){Q(e,function(e){t.addClass(e,n)})}(t,e,n.addClass),n.addClass=null),n.removeClass&&(!function(t,e,n){Q(e,function(e){t.removeClass(e,n)})}(t,e,n.removeClass),n.removeClass=null)}}function S(t){if(!(t=t||{}).$$prepared){var e=t.domOperation||at;t.domOperation=function(){t.$$domOperationFired=!0,e(),e=at},t.$$prepared=!0}return t}function A(t,e){E(t,e),j(t,e)}function E(t,e){e.from&&(t.css(e.from),e.from=null)}function j(t,e){e.to&&(t.css(e.to),e.to=null)}function O(t,e,n){var i=e.options||{},r=n.options||{},o=(i.addClass||"")+" "+(r.addClass||""),a=(i.removeClass||"")+" "+(r.removeClass||""),l=function(t,e,n){var i={};t=o(t),e=o(e),Q(e,function(t,e){i[e]=1}),n=o(n),Q(n,function(t,e){i[e]=1===i[e]?null:-1});var r={addClass:"",removeClass:""};function o(t){it(t)&&(t=t.split(" "));var e={};return Q(t,function(t){t.length&&(e[t]=!0)}),e}return Q(i,function(e,n){var i,o;1===e?(i="addClass",o=!t[n]||t[n+c]):-1===e&&(i="removeClass",o=t[n]||t[n+s]),o&&(r[i].length&&(r[i]+=" "),r[i]+=n)}),r}(t.attr("class"),o,a);r.preparationClasses&&(i.preparationClasses=I(r.preparationClasses,i.preparationClasses),delete r.preparationClasses);var u=i.domOperation!==at?i.domOperation:null;return J(i,r),u&&(i.domOperation=u),l.addClass?i.addClass=l.addClass:i.addClass=null,l.removeClass?i.removeClass=l.removeClass:i.removeClass=null,e.addClass=i.addClass,e.removeClass=i.removeClass,i}function T(t){return t instanceof ot?t[0]:t}function q(t,e){var n=e?"-"+e+"s":"";return P(t,[g,n]),[g,n]}function M(t,e){var n=e?"paused":"",i=r+_;return P(t,[i,n]),[i,n]}function P(t,e){var n=e[0],i=e[1];t.style[n]=i}function I(t,e){return t?e?t+" "+e:t:e}var R=["$interpolate",function(t){return{link:function(e,n,i){var r=i.ngAnimateChildren;function o(t){t="on"===t||"true"===t,n.data(d,t)}it(r)&&0===r.length?n.data(d,!0):(o(t(r)(e)),i.$observe("ngAnimateChildren",o))}}}],D="$$animateCss",z=1e3,L=3,N=1.5,F={transitionDuration:v,transitionDelay:g,transitionProperty:n+"Property",animationDuration:m,animationDelay:h,animationIterationCount:r+"IterationCount"},U={transitionDuration:v,transitionDelay:g,animationDuration:m,animationDelay:h};function V(t,e){return[e?h:g,t+"s"]}function B(t,e,n){var i=Object.create(null),r=t.getComputedStyle(e)||{};return Q(n,function(t,e){var n,o,a=r[t];if(a){var s=a.charAt(0);("-"===s||"+"===s||s>=0)&&(n=0,o=a.split(/\s*,\s*/),Q(o,function(t){"s"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t=parseFloat(t)||0,n=n?Math.max(t,n):t}),a=n),0===a&&(a=null),i[e]=a}}),i}function H(t){return 0===t||null!=t}function W(t,e){var i=n,r=t+"s";return e?i+=p:r+=" linear all",[i,r]}function G(){var t=Object.create(null);return{flush:function(){t=Object.create(null)},count:function(e){var n=t[e];return n?n.total:0},get:function(e){var n=t[e];return n&&n.value},put:function(e,n){t[e]?t[e].total++:t[e]={total:1,value:n}}}}function Y(t,e,n){Q(n,function(n){t[n]=Z(t[n])?t[n]:e.style.getPropertyValue(n)})}var K,J,Q,X,Z,tt,et,nt,it,rt,ot,at,st=["$animateProvider",function(t){var e=G(),a=G();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(t,u,d,p,_,h,g,v){var b=C(u),y=0;function w(t,e){var n="$$ngAnimateParentKey",i=t.parentNode;return(i[n]||(i[n]=++y))+"-"+t.getAttribute("class")+"-"+e}var x=[];function k(t){x.push(t),g.waitUntilQuiet(function(){e.flush(),a.flush();for(var t=_(),n=0;n<x.length;n++)x[n](t);x.length=0})}function O(n,i,r){var o=function(n,i,r,o){var a=e.get(r);return a||"infinite"===(a=B(t,n,o)).animationIterationCount&&(a.animationIterationCount=1),e.put(r,a),a}(n,0,r,F),a=o.animationDelay,s=o.transitionDelay;return o.maxDelay=a&&s?Math.max(a,s):a||s,o.maxDuration=Math.max(o.animationDuration*o.animationIterationCount,o.transitionDuration),o}return function(_,g){var y=g||{};y.$$prepared||(y=S(K(y)));var x={},C=T(_);if(!C||!C.parentNode||!v.enabled())return Mt();var I,R,F,G,J,Z,tt,et,nt,it,rt=[],ot=_.attr("class"),st=function(t){var e={};return t&&(t.to||t.from)&&(e.to=t.to,e.from=t.from),e}(y),ct=[];if(0===y.duration||!h.animations&&!h.transitions)return Mt();var lt=y.event&&X(y.event)?y.event.join(" "):y.event,ut="",dt="";lt&&y.structural?ut=$(lt,l,!0):lt&&(ut=lt),y.addClass&&(dt+=$(y.addClass,s)),y.removeClass&&(dt.length&&(dt+=" "),dt+=$(y.removeClass,c)),y.applyClassesEarly&&dt.length&&b(_,y);var pt,ft,_t,ht=[ut,dt].join(" ").trim(),mt=ot+" "+ht,gt=$(ht,"-active"),vt=st.to&&Object.keys(st.to).length>0;if(!((y.keyframeStyle||"").length>0)&&!vt&&!ht)return Mt();if(y.stagger>0){var bt=parseFloat(y.stagger);ft={transitionDelay:bt,animationDelay:bt,transitionDuration:0,animationDuration:0}}else pt=w(C,mt),ft=function(n,i,r,o){var s;if(e.count(r)>0&&!(s=a.get(r))){var c=$(i,"-stagger");u.addClass(n,c),(s=B(t,n,o)).animationDuration=Math.max(s.animationDuration,0),s.transitionDuration=Math.max(s.transitionDuration,0),u.removeClass(n,c),a.put(r,s)}return s||{}}(C,ht,pt,U);if(y.$$skipPreparationClasses||u.addClass(_,ht),y.transitionStyle){var yt=[n,y.transitionStyle];P(C,yt),rt.push(yt)}if(y.duration>=0){_t=C.style[n].length>0;var wt=W(y.duration,_t);P(C,wt),rt.push(wt)}if(y.keyframeStyle){var $t=[r,y.keyframeStyle];P(C,$t),rt.push($t)}var xt=ft?y.staggerIndex>=0?y.staggerIndex:e.count(pt):0,kt=0===xt;kt&&!y.skipBlocking&&q(C,9999);var Ct=O(C,0,pt),St=Ct.maxDelay;Z=Math.max(St,0),et=Ct.maxDuration;var At,Et={};if(Et.hasTransitions=Ct.transitionDuration>0,Et.hasAnimations=Ct.animationDuration>0,Et.hasTransitionAll=Et.hasTransitions&&"all"===Ct.transitionProperty,Et.applyTransitionDuration=vt&&(Et.hasTransitions&&!Et.hasTransitionAll||Et.hasAnimations&&!Et.hasTransitions),Et.applyAnimationDuration=y.duration&&Et.hasAnimations,Et.applyTransitionDelay=H(y.delay)&&(Et.applyTransitionDuration||Et.hasTransitions),Et.applyAnimationDelay=H(y.delay)&&Et.hasAnimations,Et.recalculateTimingStyles=dt.length>0,(Et.applyTransitionDuration||Et.applyAnimationDuration)&&(et=y.duration?parseFloat(y.duration):et,Et.applyTransitionDuration&&(Et.hasTransitions=!0,Ct.transitionDuration=et,_t=C.style[n+"Property"].length>0,rt.push(W(et,_t))),Et.applyAnimationDuration&&(Et.hasAnimations=!0,Ct.animationDuration=et,rt.push([m,et+"s"]))),0===et&&!Et.recalculateTimingStyles)return Mt();null!=y.delay&&("boolean"!=typeof y.delay&&(At=parseFloat(y.delay),Z=Math.max(At,0)),Et.applyTransitionDelay&&rt.push(V(At)),Et.applyAnimationDelay&&rt.push(V(At,!0)));return null==y.duration&&Ct.transitionDuration>0&&(Et.recalculateTimingStyles=Et.recalculateTimingStyles||kt),tt=Z*z,nt=et*z,y.skipBlocking||(Et.blockTransition=Ct.transitionDuration>0,Et.blockKeyframeAnimation=Ct.animationDuration>0&&ft.animationDelay>0&&0===ft.animationDuration),y.from&&(y.cleanupStyles&&Y(x,C,Object.keys(y.from)),E(_,y)),Et.blockTransition||Et.blockKeyframeAnimation?qt(et):y.skipBlocking||q(C,!1),{$$willAnimate:!0,end:jt,start:function(){if(!I)return G=new d(J={end:jt,cancel:Ot,resume:null,pause:null}),k(It),G}};function jt(){Tt()}function Ot(){Tt(!0)}function Tt(t){if(!(I||F&&R)){I=!0,R=!1,y.$$skipPreparationClasses||u.removeClass(_,ht),u.removeClass(_,gt),M(C,!1),q(C,!1),Q(rt,function(t){C.style[t[0]]=""}),b(_,y),A(_,y),Object.keys(x).length&&Q(x,function(t,e){t?C.style.setProperty(e,t):C.style.removeProperty(e)}),y.onDone&&y.onDone(),ct&&ct.length&&_.off(ct.join(" "),Pt);var e=_.data(D);e&&(p.cancel(e[0].timer),_.removeData(D)),G&&G.complete(!t)}}function qt(t){Et.blockTransition&&q(C,t),Et.blockKeyframeAnimation&&M(C,!!t)}function Mt(){return G=new d({end:jt,cancel:Ot}),k(at),Tt(),{$$willAnimate:!1,start:function(){return G},end:jt}}function Pt(t){t.stopPropagation();var e=t.originalEvent||t,n=e.$manualTimeStamp||Date.now(),i=parseFloat(e.elapsedTime.toFixed(L));Math.max(n-it,0)>=tt&&i>=et&&(F=!0,Tt())}function It(){if(!I)if(C.parentNode){var t=function(t){if(F)R&&t&&(R=!1,Tt());else if(R=!t,Ct.animationDuration){var e=M(C,R);R?rt.push(e):(i=e,r=(n=rt).indexOf(i),i>=0&&n.splice(r,1))}var n,i,r},e=xt>0&&(Ct.transitionDuration&&0===ft.transitionDuration||Ct.animationDuration&&0===ft.animationDuration)&&Math.max(ft.animationDelay,ft.transitionDelay);e?p(a,Math.floor(e*xt*z),!1):a(),J.resume=function(){t(!0)},J.pause=function(){t(!1)}}else Tt();function a(){if(!I){if(qt(!1),Q(rt,function(t){var e=t[0],n=t[1];C.style[e]=n}),b(_,y),u.addClass(_,gt),Et.recalculateTimingStyles){if(mt=C.getAttribute("class")+" "+ht,pt=w(C,mt),Ct=O(C,0,pt),St=Ct.maxDelay,Z=Math.max(St,0),0===(et=Ct.maxDuration))return void Tt();Et.hasTransitions=Ct.transitionDuration>0,Et.hasAnimations=Ct.animationDuration>0}if(Et.applyAnimationDelay&&(St="boolean"!=typeof y.delay&&H(y.delay)?parseFloat(y.delay):St,Z=Math.max(St,0),Ct.animationDelay=St,At=V(St,!0),rt.push(At),C.style[At[0]]=At[1]),tt=Z*z,nt=et*z,y.easing){var t,e=y.easing;Et.hasTransitions&&(t=n+f,rt.push([t,e]),C.style[t]=e),Et.hasAnimations&&(t=r+f,rt.push([t,e]),C.style[t]=e)}Ct.transitionDuration&&ct.push(i),Ct.animationDuration&&ct.push(o),it=Date.now();var a=tt+N*nt,c=it+a,l=_.data(D)||[],d=!0;if(l.length){var h=l[0];(d=c>h.expectedEndTime)?p.cancel(h.timer):l.push(Tt)}if(d){var m=p(s,a,!1);l[0]={timer:m,expectedEndTime:c},l.push(Tt),_.data(D,l)}ct.length&&_.on(ct.join(" "),Pt),y.to&&(y.cleanupStyles&&Y(x,C,Object.keys(y.to)),j(_,y))}}function s(){var t=_.data(D);if(t){for(var e=1;e<t.length;e++)t[e]();_.removeData(D)}}}}}]}],ct=["$$animationProvider",function(t){t.drivers.push("$$animateCssDriver");var e="ng-animate-shim",n="ng-anchor",i="ng-anchor-out",r="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(t,o,a,s,c,l,u){if(!c.animations&&!c.transitions)return at;var d,p=u[0].body,f=T(s),_=ot((d=f).parentNode&&11===d.parentNode.nodeType||p.contains(f)?f:p);return function(o){return o.from&&o.to?function(o,s,c,l){var u=g(o),d=g(s),f=[];if(Q(l,function(o){var s=function(o,s,c){var l=ot(T(s).cloneNode(!0)),u=h(y(l));s.addClass(e),c.addClass(e),l.addClass(n),_.append(l);var d,f,g=(f=t(l,{addClass:i,delay:!0,from:b(s)})).$$willAnimate?f:null;if(!g&&!(d=w()))return $();var v=g||d;return{start:function(){var t,e=v.start();return e.done(function(){if(e=null,!d&&(d=w()))return(e=d.start()).done(function(){e=null,$(),t.complete()}),e;$(),t.complete()}),t=new a({end:n,cancel:n});function n(){e&&e.end()}}};function b(t){var e={},n=T(t).getBoundingClientRect();return Q(["width","height","top","left"],function(t){var i=n[t];switch(t){case"top":i+=p.scrollTop;break;case"left":i+=p.scrollLeft}e[t]=Math.floor(i)+"px"}),e}function y(t){return t.attr("class")||""}function w(){var e=h(y(c)),n=m(e,u),o=m(u,e),a=t(l,{to:b(c),addClass:r+" "+n,removeClass:i+" "+o,delay:!0});return a.$$willAnimate?a:null}function $(){l.remove(),s.removeClass(e),c.removeClass(e)}}(0,o.out,o.in);s&&f.push(s)}),!u&&!d&&0===f.length)return;return{start:function(){var t=[];u&&t.push(u.start()),d&&t.push(d.start()),Q(f,function(e){t.push(e.start())});var e=new a({end:n,cancel:n});return a.all(t,function(t){e.complete(t)}),e;function n(){Q(t,function(t){t.end()})}}}}(o.from,o.to,o.classes,o.anchors):g(o)};function h(t){return t.replace(/\bng-\S+\b/g,"")}function m(t,e){return it(t)&&(t=t.split(" ")),it(e)&&(e=e.split(" ")),t.filter(function(t){return-1===e.indexOf(t)}).join(" ")}function g(e){var n=e.element,i=e.options||{};e.structural&&(i.event=e.event,i.structural=!0,i.applyClassesEarly=!0,"leave"===e.event&&(i.onDone=i.domOperation)),i.preparationClasses&&(i.event=I(i.event,i.preparationClasses));var r=t(n,i);return r.$$willAnimate?r:null}}]}],lt=["$animateProvider",function(t){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(e,n,i){var r=C(i);return function(i,o,a,s){var c=!1;3===arguments.length&&nt(a)&&(s=a,a=null),s=S(s),a||(a=i.attr("class")||"",s.addClass&&(a+=" "+s.addClass),s.removeClass&&(a+=" "+s.removeClass));var l,u,d,p,f,_=s.addClass,h=s.removeClass,m=function(n){n=X(n)?n:n.split(" ");for(var i=[],r={},o=0;o<n.length;o++){var a=n[o],s=t.$$registeredAnimations[a];s&&!r[a]&&(i.push(e.get(s)),r[a]=!0)}return i}(a);m.length&&("leave"===o?(p="leave",d="afterLeave"):(p="before"+o.charAt(0).toUpperCase()+o.substr(1),d=o),"enter"!==o&&"move"!==o&&(l=y(i,o,s,m,p)),u=y(i,o,s,m,d));if(l||u)return{$$willAnimate:!0,end:function(){return f?f.end():(v(),(f=new n).complete(!0)),f},start:function(){if(f)return f;var t;f=new n;var e=[];return l&&e.push(function(e){t=l(e)}),e.length?e.push(function(t){g(),t(!0)}):g(),u&&e.push(function(e){t=u(e)}),f.setHost({end:function(){r()},cancel:function(){r(!0)}}),n.chain(e,i),f;function i(t){v(),f.complete(t)}function r(e){c||((t||at)(e),i(e))}}};function g(){s.domOperation(),r(i,s)}function v(){c=!0,g(),A(i,s)}function b(t,e,i,r,o){var a=[];return Q(r,function(r){var s=r[o];s&&a.push(function(){var r,o,a=!1,c=function(t){a||(a=!0,(o||at)(t),r.complete(!t))};return r=new n({end:function(){c()},cancel:function(){c(!0)}}),o=function(t,e,i,r,o){var a;switch(i){case"animate":a=[e,r.from,r.to,o];break;case"setClass":a=[e,_,h,o];break;case"addClass":a=[e,_,o];break;case"removeClass":a=[e,h,o];break;default:a=[e,o]}a.push(r);var s=t.apply(t,a);if(s)if(et(s.start)&&(s=s.start()),s instanceof n)s.done(o);else if(et(s))return s;return at}(s,t,e,i,function(t){c(!1===t)}),r})}),a}function y(t,e,i,r,o){var a,s,c=b(t,e,i,r,o);0===c.length&&("beforeSetClass"===o?(a=b(t,"removeClass",i,r,"beforeRemoveClass"),s=b(t,"addClass",i,r,"beforeAddClass")):"setClass"===o&&(a=b(t,"removeClass",i,r,"removeClass"),s=b(t,"addClass",i,r,"addClass")),a&&(c=c.concat(a)),s&&(c=c.concat(s)));if(0!==c.length)return function(t){var e=[];return c.length&&Q(c,function(t){e.push(t())}),e.length?n.all(e,t):t(),function(t){Q(e,function(e){t?e.cancel():e.end()})}}}}}]}],ut=["$$animationProvider",function(t){t.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(t,e){return function(t){if(t.from&&t.to){var i=n(t.from),r=n(t.to);if(!i&&!r)return;return{start:function(){var t=[];i&&t.push(i.start()),r&&t.push(r.start()),e.all(t,function(t){n.complete(t)});var n=new e({end:o(),cancel:o()});return n;function o(){return function(){Q(t,function(t){t.end()})}}}}}return n(t)};function n(e){var n=e.element,i=e.event,r=e.options,o=e.classes;return t(n,i,o,r)}}]}],dt="data-ng-animate",pt="$ngAnimatePin",ft=["$animateProvider",function(e){var n=1,i=2,r=" ",o=this.rules={skip:[],cancel:[],join:[]};function u(t,e){if(t&&e){var n=function(t){if(!t)return null;var e=t.split(r),n=Object.create(null);return Q(e,function(t){n[t]=!0}),n}(e);return t.split(r).some(function(t){return n[t]})}}function p(t,e,n){return o[t].some(function(t){return t(e,n)})}function f(t,e){var n=(t.addClass||"").length>0,i=(t.removeClass||"").length>0;return e?n&&i:n||i}o.join.push(function(t,e){return!t.structural&&f(t)}),o.skip.push(function(t,e){return!t.structural&&!f(t)}),o.skip.push(function(t,e){return"leave"===e.event&&t.structural}),o.skip.push(function(t,e){return e.structural&&e.state===i&&!t.structural}),o.cancel.push(function(t,e){return e.structural&&t.structural}),o.cancel.push(function(t,e){return e.state===i&&t.structural}),o.cancel.push(function(t,e){if(e.structural)return!1;var n=t.addClass,i=t.removeClass,r=e.addClass,o=e.removeClass;return!(rt(n)&&rt(i)||rt(r)&&rt(o))&&(u(n,o)||u(i,r))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(r,o,u,_,h,m,g,v,b,w,E){var j=new h,q=new h,M=null;var P=o.$watch(function(){return 0===v.totalPendingRequests},function(t){t&&(P(),o.$$postDigest(function(){o.$$postDigest(function(){null===M&&(M=!0)})}))}),R=Object.create(null),D=e.customFilter(),z=e.classNameFilter(),L=function(){return!0},N=D||L,F=z?function(t,e){var n=[t.getAttribute("class"),e.addClass,e.removeClass].join(" ");return z.test(n)}:L,U=C(b);function V(t,e){return O(t,e,{})}var B=t.Node.prototype.contains||function(t){return this===t||!!(16&this.compareDocumentPosition(t))};function H(t,e,n){var i=k(e);return t.filter(function(t){return!(t.node===i&&(!n||t.callback===n))})}function W(t,e){"close"!==t||e.parentNode||G.off(e)}var G={on:function(t,e,n){var i=k(e);R[t]=R[t]||[],R[t].push({node:i,callback:n}),ot(e).on("$destroy",function(){j.get(i)||G.off(t,e,n)})},off:function(t,e,n){if(1!==arguments.length||it(arguments[0])){var i=R[t];i&&(R[t]=1===arguments.length?null:H(i,e,n))}else for(var r in e=arguments[0],R)R[r]=H(R[r],e)},pin:function(t,e){y(tt(t),"element","not an element"),y(tt(e),"parentElement","not an element"),t.data(pt,e)},push:function(t,e,h,v){return(h=h||{}).domOperation=v,function(t,e,h){var v=K(h),b=x(t),y=T(b),w=y&&y.parentNode;v=S(v);var k=new g,C=(P=!1,function(t){P?t():o.$$postDigest(function(){P=!0,t()})});var P;X(v.addClass)&&(v.addClass=v.addClass.join(" "));v.addClass&&!it(v.addClass)&&(v.addClass=null);X(v.removeClass)&&(v.removeClass=v.removeClass.join(" "));v.removeClass&&!it(v.removeClass)&&(v.removeClass=null);v.from&&!nt(v.from)&&(v.from=null);v.to&&!nt(v.to)&&(v.to=null);if(!(M&&y&&N(y,e,h)&&F(y,v)))return ft(),k;var D=["enter","move","leave"].indexOf(e)>=0,z=E(),L=z||q.get(y),H=!L&&j.get(y)||{},G=!!H.state;L||G&&H.state===n||(L=!function(t,e,n){var i,r=_[0].body,o=T(u),s=t===r||"HTML"===t.nodeName,c=t===o,l=!1,p=q.get(t),f=ot.data(t,pt);f&&(e=T(f));for(;e&&(c||(c=e===o),e.nodeType===a);){var h=j.get(e)||{};if(!l){var m=q.get(e);if(!0===m&&!1!==p){p=!0;break}!1===m&&(p=!1),l=h.structural}if(rt(i)||!0===i){var g=ot.data(e,d);Z(g)&&(i=g)}if(l&&!1===i)break;if(s||(s=e===r),s&&c)break;e=c||!(f=ot.data(e,pt))?e.parentNode:T(f)}return(!l||i)&&!0!==p&&c&&s}(y,w));if(L)return z&&ut(k,e,"start"),ft(),z&&ut(k,e,"close"),k;D&&function(t){var e=t.querySelectorAll("["+dt+"]");Q(e,function(t){var e=parseInt(t.getAttribute(dt),10),r=j.get(t);if(r)switch(e){case i:r.runner.end();case n:j.delete(t)}})}(y);var J={structural:D,element:b,event:e,addClass:v.addClass,removeClass:v.removeClass,close:ft,options:v,runner:k};if(G){var tt=p("skip",J,H);if(tt)return H.state===i?(ft(),k):(O(b,H,J),H.runner);var at=p("cancel",J,H);if(at)if(H.state===i)H.runner.end();else{if(!H.structural)return O(b,H,J),H.runner;H.close()}else{var st=p("join",J,H);if(st){if(H.state!==i)return function(t,e,n){var i="";e&&(i=$(e,l,!0)),n.addClass&&(i=I(i,$(n.addClass,s))),n.removeClass&&(i=I(i,$(n.removeClass,c))),i.length&&(n.preparationClasses=i,t.addClass(i))}(b,D?e:null,v),e=J.event=H.event,v=O(b,H,J),H.runner;V(b,J)}}}else V(b,J);var ct=J.structural;ct||(ct="animate"===J.event&&Object.keys(J.options.to||{}).length>0||f(J));if(!ct)return ft(),Y(y),k;var lt=(H.counter||0)+1;return J.counter=lt,et(y,n,J),o.$$postDigest(function(){b=x(t);var n=j.get(y),r=!n;n=n||{};var o=(b.parent()||[]).length>0&&("animate"===n.event||n.structural||f(n));if(r||n.counter!==lt||!o)return r&&(U(b,v),A(b,v)),(r||D&&n.event!==e)&&(v.domOperation(),k.end()),void(o||Y(y));e=!n.structural&&f(n,!0)?"setClass":n.event,et(y,i);var a=m(b,e,n.options);k.setHost(a),ut(k,e,"start",{}),a.done(function(t){ft(!t);var n=j.get(y);n&&n.counter===lt&&Y(y),ut(k,e,"close",{})})}),k;function ut(t,e,n,i){C(function(){var t=function(t,e,n){var i=[],r=R[n];return r&&Q(r,function(r){B.call(r.node,e)?i.push(r.callback):"leave"===n&&B.call(r.node,t)&&i.push(r.callback)}),i}(w,y,e);t.length?r(function(){Q(t,function(t){t(b,n,i)}),W(n,y)}):W(n,y)}),t.progress(e,n,i)}function ft(t){!function(t,e){e.preparationClasses&&(t.removeClass(e.preparationClasses),e.preparationClasses=null),e.activeClasses&&(t.removeClass(e.activeClasses),e.activeClasses=null)}(b,v),U(b,v),A(b,v),v.domOperation(),k.complete(!t)}}(t,e,h)},enabled:function(t,e){var n=arguments.length;if(0===n)e=!!M;else if(tt(t)){var i=T(t);1===n?e=!q.get(i):q.set(i,!e)}else e=M=!!t;return e}};return G;function Y(t){t.removeAttribute(dt),j.delete(t)}function et(t,e,n){(n=n||{}).state=e,t.setAttribute(dt,e);var i=j.get(t),r=i?J(i,n):n;j.set(t,r)}}]}],_t=["$animateProvider",function(t){var e="ng-animate-ref",n=this.drivers=[],i="$$animationRunner";function r(t){return t.data(i)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(t,o,a,s,c,l){var d=[],p=C(t);return function(f,_,h){h=S(h);var m=["enter","move","leave"].indexOf(_)>=0,g=new s({end:function(){k()},cancel:function(){k(!0)}});if(!n.length)return k(),g;!function(t,e){t.data(i,e)}(f,g);var v,b=w(f.attr("class"),w(h.addClass,h.removeClass)),y=h.tempClasses;return y&&(b+=" "+y,h.tempClasses=null),m&&(v="ng-"+_+"-prepare",t.addClass(f,v)),d.push({element:f,classes:b,event:_,structural:m,options:h,beforeStart:function(){f.addClass(u),y&&t.addClass(f,y);v&&(t.removeClass(f,v),v=null)},close:k}),f.on("$destroy",x),d.length>1?g:(o.$$postDigest(function(){var t=[];Q(d,function(e){r(e.element)?t.push(e):e.close()}),d.length=0;var i=function(t){var n=[],i={};Q(t,function(t,r){var o=t.element,a=T(o),s=t.event,c=["enter","move"].indexOf(s)>=0,l=t.structural?function(t){var n="["+e+"]",i=t.hasAttribute(e)?[t]:t.querySelectorAll(n),r=[];return Q(i,function(t){var n=t.getAttribute(e);n&&n.length&&r.push(t)}),r}(a):[];if(l.length){var u=c?"to":"from";Q(l,function(t){var n=t.getAttribute(e);i[n]=i[n]||{},i[n][u]={animationID:r,element:ot(t)}})}else n.push(t)});var r={},o={};return Q(i,function(e,i){var a=e.from,s=e.to;if(a&&s){var c=t[a.animationID],l=t[s.animationID],u=a.animationID.toString();if(!o[u]){var d=o[u]={structural:!0,beforeStart:function(){c.beforeStart(),l.beforeStart()},close:function(){c.close(),l.close()},classes:$(c.classes,l.classes),from:c,to:l,anchors:[]};d.classes.length?n.push(d):(n.push(c),n.push(l))}o[u].anchors.push({out:a.element,in:s.element})}else{var p=a?a.animationID:s.animationID,f=p.toString();r[f]||(r[f]=!0,n.push(t[p]))}}),n}(t),o=[];Q(i,function(t){o.push({domNode:T(t.from?t.from.element:t.element),fn:function(){t.beforeStart();var e,i=t.close;if(r(t.anchors?t.from.element||t.to.element:t.element)){var o=function(t){for(var e=n.length-1;e>=0;e--){var i=n[e],r=a.get(i),o=r(t);if(o)return o}}(t);o&&(e=o.start)}if(e){var s=e();s.done(function(t){i(!t)}),function(t,e){t.from&&t.to?(n(t.from.element),n(t.to.element)):n(t.element);function n(t){var n=r(t);n&&n.setHost(e)}}(t,s)}else i()}})}),l(function(t){var e,n={children:[]},i=new c;for(e=0;e<t.length;e++){var r=t[e];i.set(r.domNode,t[e]={domNode:r.domNode,fn:r.fn,children:[]})}for(e=0;e<t.length;e++)o(t[e]);return function(t){var e,n=[],i=[];for(e=0;e<t.children.length;e++)i.push(t.children[e]);var r=i.length,o=0,a=[];for(e=0;e<i.length;e++){var s=i[e];r<=0&&(r=o,o=0,n.push(a),a=[]),a.push(s.fn),s.children.forEach(function(t){o++,i.push(t)}),r--}return a.length&&n.push(a),n}(n);function o(t){if(t.processed)return t;t.processed=!0;var e,r=t.domNode,a=r.parentNode;for(i.set(r,t);a;){if(e=i.get(a)){e.processed||(e=o(e));break}a=a.parentNode}return(e||n).children.push(t),t}}(o))}),g);function $(t,e){t=t.split(" "),e=e.split(" ");for(var n=[],i=0;i<t.length;i++){var r=t[i];if("ng-"!==r.substring(0,3))for(var o=0;o<e.length;o++)if(r===e[o]){n.push(r);break}}return n.join(" ")}function x(){var t=r(f);!t||"leave"===_&&h.$$domOperationFired||t.end()}function k(e){f.off("$destroy",x),function(t){t.removeData(i)}(f),p(f,h),A(f,h),h.domOperation(),y&&t.removeClass(f,y),f.removeClass(u),g.complete(!e)}}}]}];e.module("ngAnimate",[],function(){at=e.noop,K=e.copy,J=e.extend,ot=e.element,Q=e.forEach,X=e.isArray,it=e.isString,nt=e.isObject,rt=e.isUndefined,Z=e.isDefined,et=e.isFunction,tt=e.isElement}).info({angularVersion:"1.6.6"}).directive("ngAnimateSwap",["$animate","$rootScope",function(t,e){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(e,n,i,r,o){var a,s;e.$watchCollection(i.ngAnimateSwap||i.for,function(i){a&&t.leave(a),s&&(s.$destroy(),s=null),(i||0===i)&&(s=e.$new(),o(s,function(e){a=e,t.enter(e,null,n)}))})}}}]).directive("ngAnimateChildren",R).factory("$$rAFScheduler",["$$rAF",function(t){var e,n;function i(t){e=e.concat(t),r()}return e=i.queue=[],i.waitUntilQuiet=function(e){n&&n(),n=t(function(){n=null,e(),r()})},i;function r(){if(e.length){for(var i=e.shift(),o=0;o<i.length;o++)i[o]();n||t(function(){n||r()})}}}]).provider("$$animateQueue",ft).provider("$$animation",_t).provider("$animateCss",st).provider("$$animateCssDriver",ct).provider("$$animateJs",lt).provider("$$animateJsDriver",ut)}(window,window.angular)},function(t,e){!function(){"use strict";!function(){for(var t=0,e=["webkit","moz"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),r=window.setTimeout(function(){e(n+i)},i);return t=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){window.clearTimeout(t)})}(),angular.module("angular-svg-round-progressbar",[]),angular.module("angular-svg-round-progressbar").constant("roundProgressConfig",{max:50,semi:!1,rounded:!1,responsive:!1,clockwise:!0,radius:100,color:"#45ccce",bgcolor:"#eaeaea",stroke:15,duration:800,animation:"easeOutCubic",animationDelay:0,offset:0}),angular.module("angular-svg-round-progressbar").service("roundProgressService",["$window",function(t){var e={},n=angular.isNumber,i=document.head.querySelector("base");function r(t,e,n,i){var r=(i-90)*Math.PI/180;return t+n*Math.cos(r)+" "+(e+n*Math.sin(r))}return e.isSupported=!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),e.resolveColor=i&&i.href?function(t){var e=t.indexOf("#");return e>-1&&t.indexOf("url")>-1?t.slice(0,e)+window.location.href+t.slice(e):t}:function(t){return t},e.toNumber=function(t){return n(t)?t:parseFloat((t+"").replace(",","."))},e.getOffset=function(t,e){var n=+e.offset||0;if("inherit"===e.offset)for(var i=t.$parent;i;){if(i.hasOwnProperty("$$getRoundProgressOptions")){var r=i.$$getRoundProgressOptions();n+=(+r.offset||0)+(+r.stroke||0)}i=i.$parent}return n},e.getTimestamp=t.performance&&t.performance.now&&angular.isNumber(t.performance.now())?function(){return t.performance.now()}:function(){return(new t.Date).getTime()},e.updateState=function(t,e,n,i,o,a){if(!o)return i;var s=t>0?Math.min(t,e):0,c=0===e?0:s/e*(a?180:359.9999),l="M "+r(o,o,n,c)+" A "+n+" "+n+" 0 "+(c<=180?0:1)+" 0 "+r(o,o,n,0);return i.attr("d",l)},e.animations={linearEase:function(t,e,n,i){return n*t/i+e},easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0==t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t==i?e+n:n*(1-Math.pow(2,-10*t/i))+e},easeInOutExpo:function(t,e,n,i){return 0==t?e:t==i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,i){var r=1.70158,o=0,a=n;return 0==t?e:1==(t/=i)?e+n:(o||(o=.3*i),a<Math.abs(n)?(a=n,r=o/4):r=o/(2*Math.PI)*Math.asin(n/a),-a*Math.pow(2,10*(t-=1))*Math.sin((t*i-r)*(2*Math.PI)/o)+e)},easeOutElastic:function(t,e,n,i){var r=1.70158,o=0,a=n;return 0==t?e:1==(t/=i)?e+n:(o||(o=.3*i),a<Math.abs(n)?(a=n,r=o/4):r=o/(2*Math.PI)*Math.asin(n/a),a*Math.pow(2,-10*t)*Math.sin((t*i-r)*(2*Math.PI)/o)+n+e)},easeInOutElastic:function(t,e,n,i){var r=1.70158,o=0,a=n;return 0==t?e:2==(t/=i/2)?e+n:(o||(o=i*(.3*1.5)),a<Math.abs(n)?(a=n,r=o/4):r=o/(2*Math.PI)*Math.asin(n/a),t<1?a*Math.pow(2,10*(t-=1))*Math.sin((t*i-r)*(2*Math.PI)/o)*-.5+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*i-r)*(2*Math.PI)/o)*.5+n+e)},easeInBack:function(t,e,n,i,r){return null==r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){return null==r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){return null==r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:function(t,n,i,r){return i-e.animations.easeOutBounce(r-t,0,i,r)+n},easeOutBounce:function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,n,i,r){return t<r/2?.5*e.animations.easeInBounce(2*t,0,i,r)+n:.5*e.animations.easeOutBounce(2*t-r,0,i,r)+.5*i+n}},e}]),angular.module("angular-svg-round-progressbar").directive("roundProgress",["$window","roundProgressService","roundProgressConfig",function(t,e,n){var i={restrict:"EA",replace:!0,transclude:!0,scope:{current:"=",max:"=",semi:"=",rounded:"=",clockwise:"=",responsive:"=",onRender:"=",radius:"@",color:"@",bgcolor:"@",stroke:"@",duration:"@",animation:"@",offset:"@",animationDelay:"@"}};return e.isSupported?angular.extend(i,{link:function(r,o,a){var s,c=!o.hasClass("round-progress-wrapper"),l=c?o:o.find("svg").eq(0),u=l.find("path").eq(0),d=l.find("circle").eq(0),p=angular.copy(n),f=0;r.$$getRoundProgressOptions=function(){return p};var _=function(){var t=p.semi,n=p.responsive,i=+p.radius||0,a=+p.stroke,s=2*i,f=i-a/2-e.getOffset(r,p);l.css({top:0,left:0,position:n?"absolute":"static",width:n?"100%":s+"px",height:n?"100%":(t?i:s)+"px",overflow:"hidden"}),c||l[0].setAttribute("viewBox","0 0 "+s+" "+(t?i:s)),o.css({width:n?"100%":"auto",position:"relative",paddingBottom:n?t?"50%":"100%":0}),u.css({stroke:e.resolveColor(p.color),strokeWidth:a,strokeLinecap:p.rounded?"round":"butt"}),t?u.attr("transform",p.clockwise?"translate(0, "+s+") rotate(-90)":"translate("+s+", "+s+") rotate(90) scale(-1, 1)"):u.attr("transform",p.clockwise?"":"scale(-1, 1) translate("+-s+" 0)"),d.attr({cx:i,cy:i,r:f>=0?f:0}).css({stroke:e.resolveColor(p.bgcolor),strokeWidth:a})},h=function(n,i,a){var s=e.toNumber(p.max||0),c=n>0?t.Math.min(n,s):0,d=i===c||i<0?0:i||0,_=c-d,h=e.animations[p.animation],m=+p.duration||0,g=a||n>s&&i>s||n<0&&i<0||m<25,v=e.toNumber(p.radius),b=v-p.stroke/2-e.getOffset(r,p),y=p.semi;l.attr({"aria-valuemax":s,"aria-valuenow":c});var w=function(){if(g)e.updateState(c,s,b,u,v,y),p.onRender&&p.onRender(c,p,o);else{var n=e.getTimestamp(),i=++f;t.requestAnimationFrame(function r(){var a=t.Math.min(e.getTimestamp()-n,m),c=h(a,d,_,m);e.updateState(c,s,b,u,v,y),p.onRender&&p.onRender(c,p,o),i===f&&a<m&&t.requestAnimationFrame(r)})}};p.animationDelay>0?(t.clearTimeout(void 0),t.setTimeout(w,p.animationDelay)):w()},m=Object.keys(i.scope).filter(function(t){return g(t)&&"current"!==t});function g(t){return a.hasOwnProperty(t)}r.$watchGroup(m,function(t){for(var e=0;e<t.length;e++)void 0!==t[e]&&(p[m[e]]=t[e]);_(),r.$broadcast("$parentOffsetChanged"),"inherit"!==p.offset||s?"inherit"!==p.offset&&s&&s():s=r.$on("$parentOffsetChanged",function(){h(r.current,r.current,!0),_()})}),r.$watchGroup(["current","max","radius","stroke","semi","offset"].filter(g),function(t,n){h(e.toNumber(t[0]),e.toNumber(n[0]))})},template:function(t){for(var e=t.parent(),n=['<svg class="round-progress" xmlns="http://www.w3.org/2000/svg" role="progressbar" aria-valuemin="0">','<circle fill="none"/>','<path fill="none"/>',"<g ng-transclude></g>","</svg>"];e.length&&"round-progress"!==e[0].nodeName.toLowerCase()&&void 0===e.attr("round-progress");)e=e.parent();return e&&e.length||(n.unshift('<div class="round-progress-wrapper">'),n.push("</div>")),n.join("\n")}}):angular.extend(i,{template:'<div class="round-progress" ng-transclude></div>'})}])}()},function(t,e){!function(){function t(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}angular.module("ngComponentRouter",[]).directive("ngOutlet",["$animate","$q","$rootRouter",function(e,n,i){var r=i;return{restrict:"AE",transclude:"element",terminal:!0,priority:400,require:["?^^ngOutlet","ngOutlet"],link:function(i,o,a,s,c){var l=function(){function r(t,e){this.controller=t,this.router=e}return r.prototype.cleanupLastView=function(){var t=this;this.previousLeaveAnimation&&(e.cancel(this.previousLeaveAnimation),this.previousLeaveAnimation=null),this.currentScope&&(this.currentScope.$destroy(),this.currentScope=null),this.currentElement&&(this.previousLeaveAnimation=e.leave(this.currentElement),this.previousLeaveAnimation.then(function(){return t.previousLeaveAnimation=null}),this.currentElement=null)},r.prototype.reuse=function(t){var e=n.when(!0),i=this.currentInstruction;return this.currentInstruction=t,this.currentController&&this.currentController.$routerOnReuse&&(e=n.when(this.currentController.$routerOnReuse(this.currentInstruction,i))),e},r.prototype.routerCanReuse=function(t){var e;return e=!(!this.currentInstruction||this.currentInstruction.componentType!==t.componentType)&&(this.currentController&&this.currentController.$routerCanReuse?this.currentController.$routerCanReuse(t,this.currentInstruction):t===this.currentInstruction||angular.equals(t.params,this.currentInstruction.params)),n.when(e)},r.prototype.routerCanDeactivate=function(t){return this.currentController&&this.currentController.$routerCanDeactivate?n.when(this.currentController.$routerCanDeactivate(t,this.currentInstruction)):n.when(!0)},r.prototype.deactivate=function(t){return this.currentController&&this.currentController.$routerOnDeactivate?n.when(this.currentController.$routerOnDeactivate(t,this.currentInstruction)):n.when()},r.prototype.activate=function(r){var a=this;this.previousInstruction=this.currentInstruction,this.currentInstruction=r;var s=this.controller.$$componentName=r.componentType;if("string"!=typeof s)throw new Error("Component is not a string for "+r.urlPath);this.controller.$$template="<"+t(s)+' $router="::$$router"></'+t(s)+">",this.controller.$$router=this.router.childRouter(r.componentType),this.controller.$$outlet=this;var l=i.$new();l.$$router=this.controller.$$router,this.deferredActivation=n.defer();var u=c(l,function(t){e.enter(t,null,a.currentElement||o),a.cleanupLastView()});return this.currentElement=u,this.currentScope=l,this.deferredActivation.promise},r}(),u=s[0],d=s[1],p=u&&u.$$router||r;d.$$currentComponent=null,p.registerPrimaryOutlet(new l(d,p))},controller:function(){},controllerAs:"$$ngOutlet"}}]).directive("ngOutlet",["$compile",function(t){return{restrict:"EA",priority:-400,require:"ngOutlet",link:function(e,n,i,r){var o=r.$$template;n.html(o),t(n.contents())(e)}}}]).directive("ngLink",["$rootRouter","$parse",function(t,e){return{require:"?^^ngOutlet",restrict:"A",link:function(n,i,r,o){var a=o&&o.$$router||t;if(a){var s=null,c=r.ngLink||"",l=e(c);if(l.constant){var u=l();i.attr("href",d(u))}else n.$watch(function(){return l(n)},function(t){return i.attr("href",d(t))},!0);i.on("click",function(e){1===e.which&&s&&(t.navigateByInstruction(s),e.preventDefault())})}function d(e){s=a.generate(e),n.$watch(function(){return a.isRouteActive(s)},function(t){t?i.addClass("ng-link-active"):i.removeClass("ng-link-active")});var r=s.toLinkUrl();return t._location.prepareExternalUrl(r)}}}}]).directive("$router",["$q",function(t){return{require:"^ngOutlet",priority:-1e3,link:function(e,n,i,r){var o=t.when(),a=r.$$outlet,s=a.currentController=n.controller(r.$$componentName);s.$routerOnActivate&&(o=t.when(s.$routerOnActivate(a.currentInstruction,a.previousInstruction))),o.then(a.deferredActivation.resolve,a.deferredActivation.reject)}}}]),angular.module("ngComponentRouter").value("$route",null).value("$routerRootComponent",new Object).provider("$locationHashPrefix",["$locationProvider",function(t){var e=t.hashPrefix.bind(t),n=e();t.hashPrefix=function(t){return angular.isDefined(t)&&(n=t),e(t)},this.$get=function(){return n}}]).factory("$rootRouter",["$q","$location","$browser","$rootScope","$injector","$routerRootComponent","$locationHashPrefix",function(t,e,n,i,r,o,a){function s(t){return t}function c(t){return!!t}function l(t){return!t}function u(t){return"string"==typeof t}function d(t){return"function"==typeof t}function p(t){return Array.isArray(t)}function f(t){return t.name||"Root"}var _={resolve:function(e){return t.when(e)},reject:function(e){return t.reject(e)},catchError:function(t,e){return t.then(null,e)},all:function(e){return t.all(e)}},h={create:function(t,e){return e=e?e.replace(/g/g,""):"",new RegExp(t,e+"g")},firstMatch:function(t,e){return t.lastIndex=0,t.exec(e)},matcher:function(t,e){return t.lastIndex=0,{re:t,input:e}}},m={next:function(t){return t.re.exec(t.input)}},g={annotations:function(t){return t.annotations||[]}},v={create:function(){return{}},set:function(t,e,n){return t[e]=n},get:function(t,e){return t.hasOwnProperty(e)?t[e]:void 0},contains:function(t,e){return t.hasOwnProperty(e)},keys:function(t){return Object.keys(t)},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},delete:function(t,e){delete t[e]},forEach:function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},equals:function(t,e){var n,i=Object.keys(t),r=Object.keys(e);if(i.length!=r.length)return!1;for(var o=0;o<i.length;o++)if(n=i[o],t[n]!==e[n])return!1;return!0},merge:function(t,e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}},b=(Array,{toJSON:function(t){return JSON.stringify(t)},clear:function(t){t.length=0},create:function(){return[]},push:function(t,e){return t.push(e)},forEach:function(t,e){return t.forEach(e)},first:function(t){return t?t[0]:null},last:function(t){return(t&&t.length)>0?t[t.length-1]:null},map:function(t,e){return t.map(e)},join:function(t,e){return t.join(e)},reduce:function(t,e,n){return t.reduce(e,n)},filter:function(t,e){return t.filter(e)},concat:function(t,e){return t.concat(e)},slice:function(t){var e=void 0!==arguments[1]?arguments[1]:0,n=void 0!==arguments[2]?arguments[2]:null;return t.slice(e,null===n?void 0:n)},maximum:function(t,e){if(0==t.length)return null;for(var n=null,i=-1/0,r=0;r<t.length;r++){var o=t[r];if(!l(o)){var a=e(o);a>i&&(n=o,i=a)}}return n}}),y={charCodeAt:function(t,e){return t.charCodeAt(e)},equals:function(t,e){return t===e},split:function(t,e){return t.split(e)},replaceAll:function(t,e,n){return t.replace(e,n)},replaceAllMapped:function(t,e,n){return t.replace(e,function(t){return t.splice(-2,2),n.apply(null,t)})},contains:function(t,e){return-1!=t.indexOf(e)}};function w(){}var $=Error,x={callNext:function(t,e){t.fn(e)},callEmit:function(t,e){t.fn(e)},subscribe:function(t,e){t.fn=e}};function k(){}k.prototype.subscribe=function(){},k.prototype.path=function(){return e.url()},k.prototype.go=function(t,n){return e.url(t+n)},k.prototype.prepareExternalUrl=function(t){return t.length>0&&!t.startsWith("/")&&(t="/"+t),e.$$html5?"."+t:"#"+a+t};var C={Injectable:function(){},OpaqueToken:function(){},Inject:function(){}},S=function(){return C},A=function(){function t(t){var e=this;this.map={},this.keys={},c(t)&&v.forEach(t,function(t,n){e.map[n]=c(t)?t.toString():null,e.keys[n]=!0})}return t.prototype.get=function(t){return v.delete(this.keys,t),this.map[t]},t.prototype.getUnused=function(){var t=this,e={},n=v.keys(this.keys);return n.forEach(function(n){return e[n]=v.get(t.map,n)}),e},t}();C.TouchMap=A,C.normalizeString=function(t){return l(t)?null:t.toString()};var E=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};function j(t){var e=[];return l(t)?[]:(v.forEach(t,function(t,n){e.push(!0===t?n:n+"="+t)}),e)}function O(t,e){return void 0===e&&(e="&"),j(t).join(e)}C.convertUrlParamsToArray=j,C.serializeParams=O;var T=function(){function t(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=s([])),void 0===i&&(i=s({})),this.path=t,this.child=e,this.auxiliary=n,this.params=i}return t.prototype.toString=function(){return this.path+this._matrixParamsToString()+this._auxToString()+this._childString()},t.prototype.segmentToString=function(){return this.path+this._matrixParamsToString()},t.prototype._auxToString=function(){return this.auxiliary.length>0?"("+this.auxiliary.map(function(t){return t.toString()}).join("//")+")":""},t.prototype._matrixParamsToString=function(){var t=O(this.params,";");return t.length>0?";"+t:""},t.prototype._childString=function(){return c(this.child)?"/"+this.child.toString():""},t}();C.Url=T;var q=function(t){function e(e,n,i,r,o){void 0===n&&(n=null),void 0===i&&(i=s([])),void 0===r&&(r=null),t.call(this,e,n,i,r),this.hash=o}return E(e,t),e.prototype.toString=function(){return this.path+this._auxToString()+this._childString()+this._queryParamsToString()+this._hashToString()},e.prototype.segmentToString=function(){return this.path+this._queryParamsToString()},e.prototype._queryParamsToString=function(){return l(this.params)?"":"?"+O(this.params)},e.prototype._hashToString=function(){return l(this.hash)?"":"#"+encodeURI(this.hash)},e}(T);C.RootUrl=q,C.pathSegmentsToUrl=function(t){for(var e=new T(t[t.length-1]),n=t.length-2;n>=0;n-=1)e=new T(t[n],e);return e};var M=h.create("^[^\\/\\(\\)\\?;=&#]+");function P(t){var e=h.firstMatch(M,t);return c(e)?e[0]:""}var I=h.create("^[^\\(\\)\\?;&#]+");var R=function(){function t(){}return t.prototype.peekStartsWith=function(t){return this._remaining.startsWith(t)},t.prototype.capture=function(t){if(!this._remaining.startsWith(t))throw new $('Expected "'+t+'".');this._remaining=this._remaining.substring(t.length)},t.prototype.parse=function(t){return this._remaining=t,""==t||"/"==t?new T(""):this.parseRoot()},t.prototype.parseRoot=function(){this.peekStartsWith("/")&&this.capture("/");var t=P(this._remaining);this.capture(t);var e=[];this.peekStartsWith("(")&&(e=this.parseAuxiliaryRoutes()),this.peekStartsWith(";")&&this.parseMatrixParams();var n=null;this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),n=this.parseSegment());var i=null;this.peekStartsWith("?")&&(i=this.parseQueryParams());var r=null;return this.peekStartsWith("#")&&(this.capture("#"),r=decodeURI(this._remaining),this.capture(this._remaining)),new q(t,n,e,i,r)},t.prototype.parseSegment=function(){if(0==this._remaining.length)return null;this.peekStartsWith("/")&&this.capture("/");var t=P(this._remaining);this.capture(t);var e=null;this.peekStartsWith(";")&&(e=this.parseMatrixParams());var n=[];this.peekStartsWith("(")&&(n=this.parseAuxiliaryRoutes());var i=null;return this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),i=this.parseSegment()),new T(t,i,n,e)},t.prototype.parseQueryParams=function(){var t={};for(this.capture("?"),this.parseQueryParam(t);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseQueryParam(t);return t},t.prototype.parseMatrixParams=function(){for(var t={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=P(this._remaining);if(!l(e)){this.capture(e);var n=!0;if(this.peekStartsWith("=")){this.capture("=");var i=P(this._remaining);c(i)&&(n=i,this.capture(n))}t[e]=n}},t.prototype.parseQueryParam=function(t){var e=P(this._remaining);if(!l(e)){this.capture(e);var n,i,r=!0;if(this.peekStartsWith("=")){this.capture("=");var o=(n=this._remaining,c(i=h.firstMatch(I,n))?i[0]:"");c(o)&&(r=o,this.capture(r))}t[e]=r}},t.prototype.parseAuxiliaryRoutes=function(){var t=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)t.push(this.parseSegment()),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),t},t}();C.UrlParser=R,C.parser=new R;var D=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},z=function(){function t(t){this.name=t}return t=D([function(t){return t}],t)}();C.RouteLifecycleHook=z;var L=function(){function t(t){this.fn=t}return t=D([function(t){return t}],t)}();C.CanActivate=L,C.routerCanReuse=s(new z("routerCanReuse")),C.routerCanDeactivate=s(new z("routerCanDeactivate")),C.routerOnActivate=s(new z("routerOnActivate")),C.routerOnReuse=s(new z("routerOnReuse")),C.routerOnDeactivate=s(new z("routerOnDeactivate"));var N=S();C.hasLifecycleHook=function(t,e){return e instanceof Type&&t.name in e.prototype},C.getCanActivateHook=function(t){for(var e=g.annotations(t),n=0;n<e.length;n+=1){var i=e[n];if(i instanceof N.CanActivate)return i.fn}return null};var E=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},D=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},F=S();C.RouteDefinition=F.RouteDefinition;var U=function(){function t(t){this.configs=t}return t=D([function(t){return t}],t)}();C.RouteConfig=U;var V=function(){function t(t){var e=t.name,n=t.useAsDefault,i=t.path,r=t.regex,o=t.serializer,a=t.data;this.name=e,this.useAsDefault=n,this.path=i,this.regex=r,this.serializer=o,this.data=a}return t=D([function(t){return t}],t)}();C.AbstractRoute=V;var B=function(t){function e(e){var n=e.name,i=e.useAsDefault,r=e.path,o=e.regex,a=e.serializer,s=e.data,c=e.component;t.call(this,{name:n,useAsDefault:i,path:r,regex:o,serializer:a,data:s}),this.aux=null,this.component=c}return E(e,t),e=D([function(t){return t}],e)}(V);C.Route=B;var H=function(t){function e(e){var n=e.name,i=e.useAsDefault,r=e.path,o=e.regex,a=e.serializer,s=e.data,c=e.component;t.call(this,{name:n,useAsDefault:i,path:r,regex:o,serializer:a,data:s}),this.component=c}return E(e,t),e=D([function(t){return t}],e)}(V);C.AuxRoute=H;var W=function(t){function e(e){var n=e.name,i=e.useAsDefault,r=e.path,o=e.regex,a=e.serializer,s=e.data,c=e.loader;t.call(this,{name:n,useAsDefault:i,path:r,regex:o,serializer:a,data:s}),this.aux=null,this.loader=c}return E(e,t),e=D([function(t){return t}],e)}(V);C.AsyncRoute=W;var G=function(t){function e(e){var n=e.name,i=e.useAsDefault,r=e.path,o=e.regex,a=e.serializer,s=e.data,c=e.redirectTo;t.call(this,{name:n,useAsDefault:i,path:r,regex:o,serializer:a,data:s}),this.redirectTo=c}return E(e,t),e=D([function(t){return t}],e)}(V);C.Redirect=G;var Y=S();function K(t,e){return function(){return t().then(function(t){return e.configFromComponent(t),t})}}C.normalizeRouteConfig=function(t,e){if(t instanceof Y.AsyncRoute){var n=K(t.loader,e);return new Y.AsyncRoute({path:t.path,loader:n,name:t.name,data:t.data,useAsDefault:t.useAsDefault})}if(t instanceof Y.Route||t instanceof Y.Redirect||t instanceof Y.AuxRoute)return t;if(+!!t.component+ +!!t.redirectTo+ +!!t.loader!=1)throw new $('Route config should contain exactly one "component", "loader", or "redirectTo" property.');if(t.as&&t.name)throw new $('Route config should contain exactly one "as" or "name" property.');t.as&&(t.name=t.as);if(t.loader){var n=K(t.loader,e);return new Y.AsyncRoute({path:t.path,loader:n,name:t.name,data:t.data,useAsDefault:t.useAsDefault})}if(t.aux)return new Y.AuxRoute({path:t.aux,component:t.component,name:t.name});if(t.component){if("object"==typeof t.component){var i=t.component;if("constructor"==i.type)return new Y.Route({path:t.path,component:i.constructor,name:t.name,data:t.data,useAsDefault:t.useAsDefault});if("loader"==i.type)return new Y.AsyncRoute({path:t.path,loader:i.loader,name:t.name,data:t.data,useAsDefault:t.useAsDefault});throw new $('Invalid component type "'+i.type+'". Valid types are "constructor" and "loader".')}return new Y.Route(t)}if(t.redirectTo)return new Y.Redirect({path:t.path,redirectTo:t.redirectTo});return t},C.assertComponentExists=function(t,e){if(!d(t))throw new $('Component for route "'+e+'" is not defined, or is not a class.')};var J=S(),Q=function(){function t(t,e){void 0===e&&(e=null),this._loader=t,this._resolvedComponent=null,this.data=c(e)?new J.RouteData(e):J.BLANK_ROUTE_DATA}return t.prototype.resolveComponentType=function(){var t=this;return c(this._resolvedComponent)?this._resolvedComponent:this._resolvedComponent=this._loader().then(function(e){return t.componentType=e,e})},t}();C.AsyncRouteHandler=Q;var J=S(),X=function(){function t(t,e){this.componentType=t,this._resolvedComponent=null,this._resolvedComponent=_.resolve(t),this.data=c(e)?new J.RouteData(e):J.BLANK_ROUTE_DATA}return t.prototype.resolveComponentType=function(){return this._resolvedComponent},t}();C.SyncRouteHandler=X;var E=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Z=S(),J=S(),tt=function(){return function(){}}();C.RouteMatch=tt;var et=function(t){function e(e,n,i){t.call(this),this.instruction=e,this.remaining=n,this.remainingAux=i}return E(e,t),e}(tt);C.PathMatch=et;var nt=function(t){function e(e,n){t.call(this),this.redirectTo=e,this.specificity=n}return E(e,t),e}(tt);C.RedirectMatch=nt;var it=function(){function t(t,e){this._pathRecognizer=t,this.redirectTo=e,this.hash=this._pathRecognizer.hash}return Object.defineProperty(t.prototype,"path",{get:function(){return this._pathRecognizer.toString()},set:function(t){throw new $("you cannot set the path of a RedirectRule directly")},enumerable:!0,configurable:!0}),t.prototype.recognize=function(t){var e=null;return c(this._pathRecognizer.matchUrl(t))&&(e=new nt(this.redirectTo,this._pathRecognizer.specificity)),_.resolve(e)},t.prototype.generate=function(t){throw new $("Tried to generate a redirect.")},t}();C.RedirectRule=it;var rt=function(){function t(t,e,n){this._routePath=t,this.handler=e,this._routeName=n,this._cache=new Map,this.specificity=this._routePath.specificity,this.hash=this._routePath.hash,this.terminal=this._routePath.terminal}return Object.defineProperty(t.prototype,"path",{get:function(){return this._routePath.toString()},set:function(t){throw new $("you cannot set the path of a RouteRule directly")},enumerable:!0,configurable:!0}),t.prototype.recognize=function(t){var e=this,n=this._routePath.matchUrl(t);return l(n)?null:this.handler.resolveComponentType().then(function(t){var i=e._getInstruction(n.urlPath,n.urlParams,n.allParams);return new et(i,n.rest,n.auxiliary)})},t.prototype.generate=function(t){var e=this._routePath.generateUrl(t),n=e.urlPath,i=e.urlParams;return this._getInstruction(n,Z.convertUrlParamsToArray(i),t)},t.prototype.generateComponentPathValues=function(t){return this._routePath.generateUrl(t)},t.prototype._getInstruction=function(t,e,n){if(l(this.handler.componentType))throw new $("Tried to get instruction before the type was loaded.");var i=t+"?"+e.join("&");if(this._cache.has(i))return this._cache.get(i);var r=new J.ComponentInstruction(t,e,this.handler.data,this.handler.componentType,this.terminal,this.specificity,n,this._routeName);return this._cache.set(i,r),r},t}();C.RouteRule=rt;var ot=S(),at=S(),st=S(),ct=S(),lt=S(),ut=S(),dt=function(){function t(){this.rulesByName=new Map,this.auxRulesByName=new Map,this.auxRulesByPath=new Map,this.rules=[],this.defaultRule=null}return t.prototype.config=function(t){var e;if(c(t.name)&&t.name[0].toUpperCase()!=t.name[0]){var n=t.name[0].toUpperCase()+t.name.substring(1);throw new $('Route "'+t.path+'" with name "'+t.name+'" does not begin with an uppercase letter. Route names should be CamelCase like "'+n+'".')}if(t instanceof at.AuxRoute){e=new ct.SyncRouteHandler(t.component,t.data);var i=this._getRoutePath(t),r=new ot.RouteRule(i,e,t.name);return this.auxRulesByPath.set(i.toString(),r),c(t.name)&&this.auxRulesByName.set(t.name,r),r.terminal}var o=!1;if(t instanceof at.Redirect){var a=this._getRoutePath(t),s=new ot.RedirectRule(a,t.redirectTo);return this._assertNoHashCollision(s.hash,t.path),this.rules.push(s),!0}t instanceof at.Route?(e=new ct.SyncRouteHandler(t.component,t.data),o=c(t.useAsDefault)&&t.useAsDefault):t instanceof at.AsyncRoute&&(e=new st.AsyncRouteHandler(t.loader,t.data),o=c(t.useAsDefault)&&t.useAsDefault);var l=this._getRoutePath(t),u=new ot.RouteRule(l,e,t.name);if(this._assertNoHashCollision(u.hash,t.path),o){if(c(this.defaultRule))throw new $("Only one route can be default");this.defaultRule=u}return this.rules.push(u),c(t.name)&&this.rulesByName.set(t.name,u),u.terminal},t.prototype.recognize=function(t){var e=[];return this.rules.forEach(function(n){var i=n.recognize(t);c(i)&&e.push(i)}),0==e.length&&c(t)&&t.auxiliary.length>0?[_.resolve(new ot.PathMatch(null,null,t.auxiliary))]:e},t.prototype.recognizeAuxiliary=function(t){var e=this.auxRulesByPath.get(t.path);return c(e)?[e.recognize(t)]:[_.resolve(null)]},t.prototype.hasRoute=function(t){return this.rulesByName.has(t)},t.prototype.componentLoaded=function(t){return this.hasRoute(t)&&c(this.rulesByName.get(t).handler.componentType)},t.prototype.loadComponent=function(t){return this.rulesByName.get(t).handler.resolveComponentType()},t.prototype.generate=function(t,e){var n=this.rulesByName.get(t);return l(n)?null:n.generate(e)},t.prototype.generateAuxiliary=function(t,e){var n=this.auxRulesByName.get(t);return l(n)?null:n.generate(e)},t.prototype._assertNoHashCollision=function(t,e){this.rules.forEach(function(n){if(t==n.hash)throw new $("Configuration '"+e+"' conflicts with existing route '"+n.path+"'")})},t.prototype._getRoutePath=function(t){if(c(t.regex)){if("function"==typeof t.serializer)return new ut.RegexRoutePath(t.regex,t.serializer);throw new $("Route provides a regex property, '"+t.regex+"', but no serializer property")}if(c(t.path)){var e=t instanceof at.AuxRoute&&t.path.startsWith("/")?t.path.substring(1):t.path;return new lt.ParamRoutePath(e)}throw new $("Route must provide either a path or regex property")},t}();C.RuleSet=dt;var pt=function(){return function(t,e,n,i,r){this.urlPath=t,this.urlParams=e,this.allParams=n,this.auxiliary=i,this.rest=r}}();C.MatchedUrl=pt;var ft=function(){return function(t,e){this.urlPath=t,this.urlParams=e}}();C.GeneratedUrl=ft;var _t=S(),Z=S(),ht=S(),mt=function(){function t(){this.name="",this.specificity="",this.hash="..."}return t.prototype.generate=function(t){return""},t.prototype.match=function(t){return!0},t}(),gt=function(){function t(t){this.path=t,this.name="",this.specificity="2",this.hash=t}return t.prototype.match=function(t){return t==this.path},t.prototype.generate=function(t){return this.path},t}(),vt=function(){function t(t){this.name=t,this.specificity="1",this.hash=":"}return t.prototype.match=function(t){return t.length>0},t.prototype.generate=function(t){if(!v.contains(t.map,this.name))throw new $("Route generator for '"+this.name+"' was not included in parameters passed.");return function(t){if(l(t))return null;return t=y.replaceAll(t,wt,"%25"),t=y.replaceAll(t,$t,"%2F"),t=y.replaceAll(t,xt,"%28"),t=y.replaceAll(t,kt,"%29"),t=y.replaceAll(t,Ct,"%3B")}(_t.normalizeString(t.get(this.name)))},t.paramMatcher=/^:([^\/]+)$/g,t}(),bt=function(){function t(t){this.name=t,this.specificity="0",this.hash="*"}return t.prototype.match=function(t){return!0},t.prototype.generate=function(t){return _t.normalizeString(t.get(this.name))},t.wildcardMatcher=/^\*([^\/]+)$/g,t}(),yt=function(){function t(t){this.routePath=t,this.terminal=!0,this._assertValidPath(t),this._parsePathString(t),this.specificity=this._calculateSpecificity(),this.hash=this._calculateHash();var e=this._segments[this._segments.length-1];this.terminal=!(e instanceof mt)}return t.prototype.matchUrl=function(t){for(var e,n=t,i={},r=[],o=0;o<this._segments.length;o+=1){var a=this._segments[o];if(e=n,a instanceof mt)break;if(c(e)){if(a instanceof bt){i[a.name]=e.toString(),r.push(e.toString()),n=null;break}if(r.push(e.path),a instanceof vt)i[a.name]=Tt(e.path);else if(!a.match(e.path))return null;n=e.child}else if(!a.match(""))return null}if(this.terminal&&c(n))return null;var s=r.join("/"),l=[],u=[],d=i;if(c(e)){var p=t instanceof Z.RootUrl?t:e;c(p.params)?(d=v.merge(p.params,i),u=Z.convertUrlParamsToArray(p.params)):d=i,l=e.auxiliary}return new ht.MatchedUrl(s,u,d,l,n)},t.prototype.generateUrl=function(t){for(var e=new _t.TouchMap(t),n=[],i=0;i<this._segments.length;i++){var r=this._segments[i];r instanceof mt||n.push(r.generate(e))}var o=n.join("/"),a=e.getUnused(),s=a;return new ht.GeneratedUrl(o,s)},t.prototype.toString=function(){return this.routePath},t.prototype._parsePathString=function(t){t.startsWith("/")&&(t=t.substring(1));var e=t.split("/");this._segments=[];for(var n=e.length-1,i=0;i<=n;i++){var r,o=e[i];if(c(r=h.firstMatch(vt.paramMatcher,o)))this._segments.push(new vt(r[1]));else if(c(r=h.firstMatch(bt.wildcardMatcher,o)))this._segments.push(new bt(r[1]));else if("..."==o){if(i<n)throw new $('Unexpected "..." before the end of the path for "'+t+'".');this._segments.push(new mt)}else this._segments.push(new gt(o))}},t.prototype._calculateSpecificity=function(){var t,e,n=this._segments.length;if(0==n)e+="2";else for(e="",t=0;t<n;t++)e+=this._segments[t].specificity;return e},t.prototype._calculateHash=function(){var t,e=this._segments.length,n=[];for(t=0;t<e;t++)n.push(this._segments[t].hash);return n.join("/")},t.prototype._assertValidPath=function(e){if(y.contains(e,"#"))throw new $('Path "'+e+'" should not include "#". Use "HashLocationStrategy" instead.');var n=h.firstMatch(t.RESERVED_CHARS,e);if(c(n))throw new $('Path "'+e+'" contains "'+n[0]+'" which is not allowed in a route config.')},t.RESERVED_CHARS=h.create("//|\\(|\\)|;|\\?|="),t}();C.ParamRoutePath=yt;var wt=/%/g,$t=/\//g,xt=/\(/g,kt=/\)/g,Ct=/;/g;var St=/%3B/gi,At=/%29/gi,Et=/%28/gi,jt=/%2F/gi,Ot=/%25/gi;function Tt(t){return l(t)?null:(t=y.replaceAll(t,St,";"),t=y.replaceAll(t,At,")"),t=y.replaceAll(t,Et,"("),t=y.replaceAll(t,jt,"/"),t=y.replaceAll(t,Ot,"%"))}var ht=S(),qt=function(){function t(t,e){this._reString=t,this._serializer=e,this.terminal=!0,this.specificity="2",this.hash=this._reString,this._regex=h.create(this._reString)}return t.prototype.matchUrl=function(t){var e=t.toString(),n={},i=h.matcher(this._regex,e),r=m.next(i);if(l(r))return null;for(var o=0;o<r.length;o+=1)n[o.toString()]=r[o];return new ht.MatchedUrl(e,[],n,[],null)},t.prototype.generateUrl=function(t){return this._serializer(t)},t.prototype.toString=function(){return this._reString},t}();C.RegexRoutePath=qt;var E=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Mt=function(){function t(t){this.params=t}return t.prototype.get=function(t){return normalizeBlank(v.get(this.params,t))},t}();C.RouteParams=Mt;var Pt=function(){function t(t){void 0===t&&(t=s({})),this.data=t}return t.prototype.get=function(t){return normalizeBlank(v.get(this.data,t))},t}();C.RouteData=Pt,C.BLANK_ROUTE_DATA=new Pt;var It=function(){function t(t,e,n){this.component=t,this.child=e,this.auxInstruction=n}return Object.defineProperty(t.prototype,"urlPath",{get:function(){return c(this.component)?this.component.urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"urlParams",{get:function(){return c(this.component)?this.component.urlParams:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"specificity",{get:function(){var t="";return c(this.component)&&(t+=this.component.specificity),c(this.child)&&(t+=this.child.specificity),t},enumerable:!0,configurable:!0}),t.prototype.toRootUrl=function(){return this.toUrlPath()+this.toUrlQuery()},t.prototype._toNonRootUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(c(this.child)?this.child._toNonRootUrl():"")},t.prototype.toUrlQuery=function(){return this.urlParams.length>0?"?"+this.urlParams.join("&"):""},t.prototype.replaceChild=function(t){return new Rt(this.component,t,this.auxInstruction)},t.prototype.toUrlPath=function(){return this.urlPath+this._stringifyAux()+(c(this.child)?this.child._toNonRootUrl():"")},t.prototype.toLinkUrl=function(){return this.urlPath+this._stringifyAux()+(c(this.child)?this.child._toLinkUrl():"")+this.toUrlQuery()},t.prototype._toLinkUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(c(this.child)?this.child._toLinkUrl():"")},t.prototype._stringifyPathMatrixAuxPrefixed=function(){var t=this._stringifyPathMatrixAux();return t.length>0&&(t="/"+t),t},t.prototype._stringifyMatrixParams=function(){return this.urlParams.length>0?";"+this.urlParams.join(";"):""},t.prototype._stringifyPathMatrixAux=function(){return l(this.component)?"":this.urlPath+this._stringifyMatrixParams()+this._stringifyAux()},t.prototype._stringifyAux=function(){var t=[];return v.forEach(this.auxInstruction,function(e,n){t.push(e._stringifyPathMatrixAux())}),t.length>0?"("+t.join("//")+")":""},t}();C.Instruction=It;var Rt=function(t){function e(e,n,i){t.call(this,e,n,i)}return E(e,t),e.prototype.resolveComponent=function(){return _.resolve(this.component)},e}(It);C.ResolvedInstruction=Rt;var Dt=function(t){function e(e,n){t.call(this,e,n,{})}return E(e,t),e.prototype.toLinkUrl=function(){return""},e.prototype._toLinkUrl=function(){return""},e}(Rt);C.DefaultInstruction=Dt;var zt=function(t){function e(e,n,i){void 0===n&&(n=""),void 0===i&&(i=s([])),t.call(this,null,null,{}),this._resolver=e,this._urlPath=n,this._urlParams=i}return E(e,t),Object.defineProperty(e.prototype,"urlPath",{get:function(){return c(this.component)?this.component.urlPath:c(this._urlPath)?this._urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlParams",{get:function(){return c(this.component)?this.component.urlParams:c(this._urlParams)?this._urlParams:[]},enumerable:!0,configurable:!0}),e.prototype.resolveComponent=function(){var t=this;return c(this.component)?_.resolve(this.component):this._resolver().then(function(e){return t.child=c(e)?e.child:null,t.component=c(e)?e.component:null})},e}(It);C.UnresolvedInstruction=zt;var Lt=function(t){function e(e,n,i,r){t.call(this,e,n,i),this._specificity=r}return E(e,t),Object.defineProperty(e.prototype,"specificity",{get:function(){return this._specificity},enumerable:!0,configurable:!0}),e}(Rt);C.RedirectInstruction=Lt;var Nt=function(){return function(t,e,n,i,r,o,a,s){void 0===a&&(a=null);this.urlPath=t,this.urlParams=e,this.componentType=i,this.terminal=r,this.specificity=o,this.params=a,this.routeName=s,this.reuse=!1,this.routeData=c(n)?n:C.BLANK_ROUTE_DATA}}();C.ComponentInstruction=Nt;var Ft=S(),at=S(),ot=S(),Ut=S(),J=S(),Vt=S(),Z=S(),Bt=_.resolve(null);C.ROUTER_PRIMARY_COMPONENT=s(new Ft.OpaqueToken("RouterPrimaryComponent"));var Ht=function(){function t(t){this._rootComponent=t,this._rules=new Map}return t.prototype.config=function(t,e){(e=Vt.normalizeRouteConfig(e,this))instanceof at.Route?Vt.assertComponentExists(e.component,e.path):e instanceof at.AuxRoute&&Vt.assertComponentExists(e.component,e.path);var n=this._rules.get(t);l(n)&&(n=new Ut.RuleSet,this._rules.set(t,n));var i=n.config(e);e instanceof at.Route&&(i?function(t,e){if(!d(t))return;var n=g.annotations(t);if(c(n))for(var i=0;i<n.length;i++){var r=n[i];if(r instanceof at.RouteConfig)throw new $('Child routes are not allowed for "'+e+'". Use "..." on the parent\'s route path.')}}(e.component,e.path):this.configFromComponent(e.component))},t.prototype.configFromComponent=function(t){var e=this;if(d(t)&&!this._rules.has(t)){var n=g.annotations(t);if(c(n))for(var i=0;i<n.length;i++){var r=n[i];if(r instanceof at.RouteConfig){var o=r.configs;o.forEach(function(n){return e.config(t,n)})}}}},t.prototype.recognize=function(t,e){var n=Z.parser.parse(t);return this._recognize(n,[])},t.prototype._recognize=function(t,e,n){var i=this;void 0===n&&(n=!1);var r=b.last(e),o=c(r)?r.component.componentType:this._rootComponent,a=this._rules.get(o);if(l(a))return Bt;var s=n?a.recognizeAuxiliary(t):a.recognize(t),u=s.map(function(t){return t.then(function(t){if(t instanceof ot.PathMatch){var n=e.length>0?[b.last(e)]:[],r=i._auxRoutesToUnresolved(t.remainingAux,n),o=new J.ResolvedInstruction(t.instruction,null,r);if(l(t.instruction)||t.instruction.terminal)return o;var a=e.concat([o]);return i._recognize(t.remaining,a).then(function(t){return l(t)?null:t instanceof J.RedirectInstruction?t:(o.child=t,o)})}if(t instanceof ot.RedirectMatch){var o=i.generate(t.redirectTo,e.concat([null]));return new J.RedirectInstruction(o.component,o.child,o.auxInstruction,t.specificity)}})});return!l(t)&&""!=t.path||0!=s.length?_.all(u).then(Wt):_.resolve(this.generateDefault(o))},t.prototype._auxRoutesToUnresolved=function(t,e){var n=this,i={};return t.forEach(function(t){i[t.path]=new J.UnresolvedInstruction(function(){return n._recognize(t,e,!0)})}),i},t.prototype.generate=function(t,e,n){void 0===n&&(n=!1);var i,r=function(t){var e=[];return t.forEach(function(t){if(u(t)){var n=t;e=e.concat(n.split("/"))}else e.push(t)}),e}(t);if(""==b.first(r))r.shift(),i=b.first(e),e=[];else if(i=e.length>0?e.pop():null,"."==b.first(r))r.shift();else if(".."==b.first(r))for(;".."==b.first(r);){if(e.length<=0)throw new $('Link "'+b.toJSON(t)+'" has too many "../" segments.');i=e.pop(),r=b.slice(r,1)}else{var o=b.first(r),a=this._rootComponent,s=null;if(e.length>1){var d=e[e.length-1],p=e[e.length-2];a=d.component.componentType,s=p.component.componentType}else 1==e.length&&(a=e[0].component.componentType,s=this._rootComponent);var f=this.hasRoute(o,a),_=c(s)&&this.hasRoute(o,s);if(_&&f){var h='Link "'+b.toJSON(t)+'" is ambiguous, use "./" or "../" to disambiguate.';throw new $(h)}_&&(i=e.pop())}if(""==r[r.length-1]&&r.pop(),r.length>0&&""==r[0]&&r.shift(),r.length<1){var h='Link "'+b.toJSON(t)+'" must include a route name.';throw new $(h)}for(var m=this._generate(r,e,i,n,t),g=e.length-1;g>=0;g--){var v=e[g];if(l(v))break;m=v.replaceChild(m)}return m},t.prototype._generate=function(t,e,n,i,r){var o=this;void 0===i&&(i=!1);var a=this._rootComponent,s=null,d={},_=b.last(e);if(c(_)&&c(_.component)&&(a=_.component.componentType),0==t.length){var h=this.generateDefault(a);if(l(h))throw new $('Link "'+b.toJSON(r)+'" does not resolve to a terminal instruction.');return h}c(n)&&!i&&(d=v.merge(n.auxInstruction,d),s=n.component);var m=this._rules.get(a);if(l(m))throw new $('Component "'+f(a)+'" has no route config.');var g,y=0,w={};if(y<t.length&&u(t[y])){var x=t[y];if(""==x||"."==x||".."==x)throw new $('"'+x+'/" is only allowed at the beginning of a link DSL.');if((y+=1)<t.length){var k=t[y];"object"!=typeof(g=k)||null===g||p(k)||(w=k,y+=1)}var C=(i?m.auxRulesByName:m.rulesByName).get(x);if(l(C))throw new $('Component "'+f(a)+'" has no route named "'+x+'".');if(l(C.handler.componentType)){var S=C.generateComponentPathValues(w);return new J.UnresolvedInstruction(function(){return C.handler.resolveComponentType().then(function(a){return o._generate(t,e,n,i,r)})},S.urlPath,Z.convertUrlParamsToArray(S.urlParams))}s=i?m.generateAuxiliary(x,w):m.generate(x,w)}for(;y<t.length&&p(t[y]);){var A=[_],E=this._generate(t[y],A,null,!0,r);d[E.component.urlPath]=E,y+=1}var j=new J.ResolvedInstruction(s,null,d);if(c(s)&&c(s.componentType)){var O=null;if(s.terminal)t.length;else{var T=e.concat([j]),q=t.slice(y);O=this._generate(q,T,null,!1,r)}j.child=O}return j},t.prototype.hasRoute=function(t,e){var n=this._rules.get(e);return!l(n)&&n.hasRoute(t)},t.prototype.generateDefault=function(t){var e=this;if(l(t))return null;var n=this._rules.get(t);if(l(n)||l(n.defaultRule))return null;var i=null;if(c(n.defaultRule.handler.componentType)){var r=n.defaultRule.generate({});return n.defaultRule.terminal||(i=this.generateDefault(n.defaultRule.handler.componentType)),new J.DefaultInstruction(r,i)}return new J.UnresolvedInstruction(function(){return n.defaultRule.handler.resolveComponentType().then(function(n){return e.generateDefault(t)})})},t}();function Wt(t){if(0==(t=t.filter(function(t){return c(t)})).length)return null;if(1==t.length)return t[0];var e=t[0],n=t.slice(1);return n.reduce(function(t,e){return-1==function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i+=1){var r=y.charCodeAt(t,i),o=y.charCodeAt(e,i),a=o-r;if(0!=a)return a}return t.length-e.length}(e.specificity,t.specificity)?e:t},e)}C.RouteRegistry=Ht;var E=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Gt=S(),Yt=_.resolve(!0),Kt=_.resolve(!1),Jt=function(){function t(t,e,n,i){this.registry=t,this.parent=e,this.hostComponent=n,this.root=i,this.navigating=!1,this.currentInstruction=null,this._currentNavigation=Yt,this._outlet=null,this._auxRouters=new Map,this._subject=new w}return t.prototype.childRouter=function(t){return this._childRouter=new Xt(this,t)},t.prototype.auxRouter=function(t){return new Xt(this,t)},t.prototype.registerPrimaryOutlet=function(t){if(c(t.name))throw new $("registerPrimaryOutlet expects to be called with an unnamed outlet.");if(c(this._outlet))throw new $("Primary outlet is already registered.");return this._outlet=t,c(this.currentInstruction)?this.commit(this.currentInstruction,!1):Yt},t.prototype.unregisterPrimaryOutlet=function(t){if(c(t.name))throw new $("registerPrimaryOutlet expects to be called with an unnamed outlet.");this._outlet=null},t.prototype.registerAuxOutlet=function(t){var e=t.name;if(l(e))throw new $("registerAuxOutlet expects to be called with an outlet with a name.");var n,i=this.auxRouter(this.hostComponent);return this._auxRouters.set(e,i),i._outlet=t,c(this.currentInstruction)&&c(n=this.currentInstruction.auxInstruction[e])?i.commit(n):Yt},t.prototype.isRouteActive=function(t){var e=this,n=this;if(l(this.currentInstruction))return!1;for(;c(n.parent)&&c(t.child);)n=n.parent,t=t.child;if(l(t.component)||l(this.currentInstruction.component)||this.currentInstruction.component.routeName!=t.component.routeName)return!1;var i=!0;return c(this.currentInstruction.component.params)&&v.forEach(t.component.params,function(t,n){e.currentInstruction.component.params[n]!==t&&(i=!1)}),i},t.prototype.config=function(t){var e=this;return t.forEach(function(t){e.registry.config(e.hostComponent,t)}),this.renavigate()},t.prototype.navigate=function(t){var e=this.generate(t);return this.navigateByInstruction(e,!1)},t.prototype.navigateByUrl=function(t,e){var n=this;return void 0===e&&(e=!1),this._currentNavigation=this._currentNavigation.then(function(i){return n.lastNavigationAttempt=t,n._startNavigating(),n._afterPromiseFinishNavigating(n.recognize(t).then(function(t){return!l(t)&&n._navigate(t,e)}))})},t.prototype.navigateByInstruction=function(t,e){var n=this;return void 0===e&&(e=!1),l(t)?Kt:this._currentNavigation=this._currentNavigation.then(function(i){return n._startNavigating(),n._afterPromiseFinishNavigating(n._navigate(t,e))})},t.prototype._settleInstruction=function(t){var e=this;return t.resolveComponent().then(function(n){var i=[];return c(t.component)&&(t.component.reuse=!1),c(t.child)&&i.push(e._settleInstruction(t.child)),v.forEach(t.auxInstruction,function(t,n){i.push(e._settleInstruction(t))}),_.all(i)})},t.prototype._navigate=function(t,e){var n=this;return this._settleInstruction(t).then(function(e){return n._routerCanReuse(t)}).then(function(e){return n._canActivate(t)}).then(function(i){return!!i&&n._routerCanDeactivate(t).then(function(i){if(i)return n.commit(t,e).then(function(e){return n._emitNavigationFinish(t.toRootUrl()),!0})})})},t.prototype._emitNavigationFinish=function(t){x.callEmit(this._subject,t)},t.prototype._emitNavigationFail=function(t){x.callError(this._subject,t)},t.prototype._afterPromiseFinishNavigating=function(t){var e=this;return _.catchError(t.then(function(t){return e._finishNavigating()}),function(t){throw e._finishNavigating(),t})},t.prototype._routerCanReuse=function(t){var e=this;return l(this._outlet)?Kt:l(t.component)?Yt:this._outlet.routerCanReuse(t.component).then(function(n){if(t.component.reuse=n,n&&c(e._childRouter)&&c(t.child))return e._childRouter._routerCanReuse(t.child)})},t.prototype._canActivate=function(t){return function t(e,n){var i=Yt;if(l(e.component))return i;c(e.child)&&(i=t(e.child,c(n)?n.child:null));return i.then(function(t){if(0==t)return!1;if(e.component.reuse)return!0;var i=Gt.getCanActivateHook(e.component.componentType);return!c(i)||i(e.component,c(n)?n.component:null)})}(t,this.currentInstruction)},t.prototype._routerCanDeactivate=function(t){var e=this;if(l(this._outlet))return Yt;var n=null,i=!1,r=null;return c(t)&&(n=t.child,r=t.component,i=l(t.component)||t.component.reuse),(i?Yt:this._outlet.routerCanDeactivate(r)).then(function(t){return 0!=t&&(!c(e._childRouter)||e._childRouter._routerCanDeactivate(n))})},t.prototype.commit=function(t,e){var n=this;void 0===e&&(e=!1),this.currentInstruction=t;var i=Yt;if(c(this._outlet)&&c(t.component)){var r=t.component;i=r.reuse?this._outlet.reuse(r):this.deactivate(t).then(function(t){return n._outlet.activate(r)}),c(t.child)&&(i=i.then(function(e){if(c(n._childRouter))return n._childRouter.commit(t.child)}))}var o=[];return this._auxRouters.forEach(function(e,n){c(t.auxInstruction[n])&&o.push(e.commit(t.auxInstruction[n]))}),i.then(function(t){return _.all(o)})},t.prototype._startNavigating=function(){this.navigating=!0},t.prototype._finishNavigating=function(){this.navigating=!1},t.prototype.subscribe=function(t,e){return x.subscribe(this._subject,t,e)},t.prototype.deactivate=function(t){var e=this,n=null,i=null;c(t)&&(n=t.child,i=t.component);var r=Yt;return c(this._childRouter)&&(r=this._childRouter.deactivate(n)),c(this._outlet)&&(r=r.then(function(t){return e._outlet.deactivate(i)})),r},t.prototype.recognize=function(t){var e=this._getAncestorInstructions();return this.registry.recognize(t,e)},t.prototype._getAncestorInstructions=function(){for(var t=[this.currentInstruction],e=this;c(e=e.parent);)t.unshift(e.currentInstruction);return t},t.prototype.renavigate=function(){return l(this.lastNavigationAttempt)?this._currentNavigation:this.navigateByUrl(this.lastNavigationAttempt)},t.prototype.generate=function(t){var e=this._getAncestorInstructions();return this.registry.generate(t,e)},t}();C.Router=Jt;var Qt=function(t){function e(e,n,i){var r=this;t.call(this,e,null,i),this.root=this,this._location=n,this._locationSub=this._location.subscribe(function(t){r.recognize(t.url).then(function(e){c(e)?r.navigateByInstruction(e,c(t.pop)).then(function(n){if(!c(t.pop)||"hashchange"==t.type){var i=e.toUrlPath(),o=e.toUrlQuery();i.length>0&&"/"!=i[0]&&(i="/"+i),"hashchange"==t.type?e.toRootUrl()!=r._location.path()&&r._location.replaceState(i,o):r._location.go(i,o)}}):r._emitNavigationFail(t.url)})}),this.registry.configFromComponent(i),this.navigateByUrl(n.path())}return E(e,t),e.prototype.commit=function(e,n){var i=this;void 0===n&&(n=!1);var r=e.toUrlPath(),o=e.toUrlQuery();r.length>0&&"/"!=r[0]&&(r="/"+r);var a=t.prototype.commit.call(this,e);return n||(a=a.then(function(t){i._location.go(r,o)})),a},e.prototype.dispose=function(){c(this._locationSub)&&(x.dispose(this._locationSub),this._locationSub=null)},e}(Jt);C.RootRouter=Qt;var Xt=function(t){function e(e,n){t.call(this,e.registry,e,n,e.root),this.parent=e}return E(e,t),e.prototype.navigateByUrl=function(t,e){return void 0===e&&(e=!1),this.parent.navigateByUrl(t,e)},e.prototype.navigateByInstruction=function(t,e){return void 0===e&&(e=!1),this.parent.navigateByInstruction(t,e)},e}(Jt);function Zt(t){var e=t+"Directive";if(r.has(e)){var n=r.get(e);if(n.length>1)throw new $('too many directives named "'+t+'"');return n[0].controller}throw new $('directive "'+t+'" is not registered')}C.getCanActivateHook=function(t){var e=Zt(t);return e.$canActivate&&function(t,n){return r.invoke(e.$canActivate,null,{$nextInstruction:t,$prevInstruction:n})}},C.assertComponentExists=function(){},angular.stringifyInstruction=function(t){return t.toRootUrl()};var Ht=C.RouteRegistry,Qt=C.RootRouter;Ht.prototype.configFromComponent=function(t){var e=this;if(u(t)){if(this._rules.has(t))return;var n=Zt(t);angular.isArray(n.$routeConfig)&&n.$routeConfig.forEach(function(n){var i=n.loader;c(i)&&(n=angular.extend({},n,{loader:function(){return r.invoke(i)}})),e.config(t,n)})}};var te=new Ht(o),ee=new k,ne=new Qt(te,ee,o);return i.$watch(function(){return e.url()},function(t){ne.lastNavigationAttempt!==t&&ne.navigateByUrl(t)}),ne.subscribe(function(){i.$broadcast("$routeChangeSuccess",{})}),ne}])}()},function(t,e,n){var i,r,o;(function(){"use strict";var a,s,c,l,u,d,p,f,_,h,m,g,v,b,y,w,x,k,C,S=[].slice;u=angular.module("angular-inview",[]).directive("inView",["$parse",function(t){return{restrict:"A",require:"?^inViewContainer",link:function(e,n,i,r){var o,a,s,c,u,d;if(i.inView)return o=t(i.inView),a={element:n,wasInView:!1,offset:0,customDebouncedCheck:null,callback:function(t,i,r){return null==t&&(t={}),e.$evalAsync(function(){return t.inViewTarget=n[0],o(e,{$event:t,$inview:i,$inviewpart:r})})}},null!=i.inViewOptions&&(s=e.$eval(i.inViewOptions))&&(a.offset=s.offset||[s.offsetTop||0,s.offsetBottom||0],s.debounce&&(a.customDebouncedCheck=f(function(t){return p([a],n[0],t)},s.debounce))),c=null!=(u=null!=(d=a.customDebouncedCheck)?d:null!=r?r.checkInView:void 0)?u:k,null!=r?r.addItem(a):l(a),setTimeout(c),e.$on("$destroy",function(){return null!=r&&r.removeItem(a),v(a)})}}}]).directive("inViewContainer",function(){return{restrict:"AC",controller:["$element",function(t){var e;return this.items=[],this.addItem=function(t){return this.items.push(t)},this.removeItem=function(t){var e;return this.items=function(){var n,i,r,o;for(o=[],n=0,i=(r=this.items).length;n<i;n++)(e=r[n])!==t&&o.push(e);return o}.call(this)},this.checkInView=(e=this,function(n){var i,r,o,a;for(r=0,o=(a=e.items).length;r<o;r++)null!=(i=a[r]).customDebouncedCheck&&i.customDebouncedCheck();return p(function(){var t,e,n,r;for(r=[],t=0,e=(n=this.items).length;t<e;t++)null==(i=n[t]).customDebouncedCheck&&r.push(i);return r}.call(e),t[0],n)}),this}],link:function(t,e,n,i){return e.bind("scroll",i.checkInView),b(i),t.$on("$destroy",function(){return e.unbind("scroll",i.checkInView),x(i)})}}}),c=[],l=function(t){return c.push(t),d()},v=function(t){var e;return c=function(){var n,i,r;for(r=[],n=0,i=c.length;n<i;n++)(e=c[n])!==t&&r.push(e);return r}(),w()},a=[],b=function(t){return a.push(t),d()},x=function(t){var e;return a=function(){var n,i,r;for(r=[],n=0,i=a.length;n<i;n++)(e=a[n])!==t&&r.push(e);return r}(),w()},s=!1,C=function(t){var e,n;for(e=0,n=a.length;e<n;e++)a[e].checkInView(t);if(c.length)return k(t)},d=function(){if(!s)return s=!0,angular.element(window).bind("checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup",C)},w=function(){if(s&&!c.length&&!a.length)return s=!1,angular.element(window).unbind("checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup",C)},y=function(t,e,n,i,r){var o,a;if(n){if(o=_(e.element[0]).top+window.pageYOffset,a=(i&&r?"neither":i&&"top")||r&&"bottom"||"both",!e.wasInView||e.wasInView!==a||o!==e.lastOffsetTop)return e.lastOffsetTop=o,e.wasInView=a,e.callback(t,!0,a)}else if(e.wasInView)return e.wasInView=!1,e.callback(t,!1)},p=function(t,e,n){var i,r,o,a,s,c,l,u,d,p,f,v,b,w,$;if($={top:0,bottom:m()},e&&e!==window){if((i=_(e)).top>$.bottom||i.bottom<$.top){for(c=0,u=t.length;c<u;c++)s=t[c],y(n,s,!1);return}i.top>$.top&&($.top=i.top),i.bottom<$.bottom&&($.bottom=i.bottom)}for(w=[],l=0,d=t.length;l<d;l++)a=(s=t[l]).element[0],o=(i=_(a)).top+(g(s.offset)?h(i,s.offset):parseInt(null!=(p=null!=(f=s.offset)?f[0]:void 0)?p:s.offset)),r=i.bottom+(g(s.offset)?h(i,s.offset):parseInt(null!=(v=null!=(b=s.offset)?b[1]:void 0)?v:s.offset)),o<$.bottom&&r>=$.top?w.push(y(n,s,!0,r>$.bottom,o<$.top)):w.push(y(n,s,!1));return w},g=function(t){return"string"==typeof t&&"%"===t.slice(-1)},h=function(t,e){var n;return n=e.substring(0,e.length-1),(t.bottom-t.top)*(n/100)},m=function(){var t,e,n;return(t=window.innerHeight)?t:(!(e=document.compatMode)&&("undefined"!=typeof $&&null!==$&&null!=(n=$.support)?n.boxModel:void 0)||(t="CSS1Compat"===e?document.documentElement.clientHeight:document.body.clientHeight),t)},_=function(t){var e,n,i;if(null!=t.getBoundingClientRect)return t.getBoundingClientRect();for(i=0,e=t;e;)i+=e.offsetTop,e=e.offsetParent;for(n=t.parentElement;n;)null!=n.scrollTop&&(i-=n.scrollTop),n=n.parentElement;return{top:i,bottom:i+t.offsetHeight}},f=function(t,e){var n;return n=null,function(){var i;return i=1<=arguments.length?S.call(arguments,0):[],null!=n&&clearTimeout(n),n=setTimeout(function(){return t.apply(null,i)},null!=e?e:100)}},k=function(t){var e,n,i;for(n=0,i=c.length;n<i;n++)null!=(e=c[n]).customDebouncedCheck&&e.customDebouncedCheck();return p(function(){var t,n,i;for(i=[],t=0,n=c.length;t<n;t++)null==(e=c[t]).customDebouncedCheck&&i.push(e);return i}(),null,t)},r=[n(60)],void 0===(o="function"==typeof(i=u)?i.apply(e,r):i)||(t.exports=o)}).call(this)},function(t,e){
/*! 
 * angular-loading-bar v0.9.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2016 Wes Cruver
 * License: MIT
 */
!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(t){var e=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(e,n,i,r,o,a){var s,c=0,l=0,u=a.latencyThreshold;function d(){i.cancel(s),a.complete(),l=0,c=0}function p(e){var i,r=n.get("$http"),o=t.defaults;!e.cache&&!o.cache||!1===e.cache||"GET"!==e.method&&"JSONP"!==e.method||(i=angular.isObject(e.cache)?e.cache:angular.isObject(o.cache)?o.cache:r);var a=void 0!==i&&void 0!==i.get(e.url);return void 0!==e.cached&&a!==e.cached?e.cached:(e.cached=a,a)}return{request:function(t){return t.ignoreLoadingBar||p(t)||(r.$broadcast("cfpLoadingBar:loading",{url:t.url}),0===c&&(s=i(function(){a.start()},u)),c++,a.set(l/c)),t},response:function(t){return t&&t.config?(t.config.ignoreLoadingBar||p(t.config)||(l++,r.$broadcast("cfpLoadingBar:loaded",{url:t.config.url,result:t}),l>=c?d():a.set(l/c)),t):(o.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),t)},responseError:function(t){return t&&t.config?(t.config.ignoreLoadingBar||p(t.config)||(l++,r.$broadcast("cfpLoadingBar:loaded",{url:t.config.url,result:t}),l>=c?d():a.set(l/c)),e.reject(t)):(o.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e.reject(t))}}}];t.interceptors.push(e)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(t,e,n,i){var r,o,a,s=this.parentSelector,c=angular.element(this.loadingBarTemplate),l=c.find("div").eq(0),u=angular.element(this.spinnerTemplate),d=!1,p=0,f=this.autoIncrement,_=this.includeSpinner,h=this.includeBar,m=this.startSize;function g(t){if(d){var e=100*t+"%";l.css("width",e),p=t,f&&(n.cancel(o),o=n(function(){v()},250))}}function v(){if(!(b()>=1)){var t=0,e=b();t=e>=0&&e<.25?(3*Math.random()+3)/100:e>=.25&&e<.65?3*Math.random()/100:e>=.65&&e<.9?2*Math.random()/100:e>=.9&&e<.99?.005:0,g(b()+t)}}function b(){return p}function y(){p=0,d=!1}return{start:function(){if(r||(r=t.get("$animate")),n.cancel(a),!d){var o=e[0],l=o.querySelector?o.querySelector(s):e.find(s)[0];l||(l=o.getElementsByTagName("body")[0]);var p=angular.element(l),f=l.lastChild&&angular.element(l.lastChild);i.$broadcast("cfpLoadingBar:started"),d=!0,h&&r.enter(c,p,f),_&&r.enter(u,p,c),g(m)}},set:g,status:b,inc:v,complete:function(){r||(r=t.get("$animate")),i.$broadcast("cfpLoadingBar:completed"),g(1),n.cancel(a),a=n(function(){var t=r.leave(c,y);t&&t.then&&t.then(y),r.leave(u)},500)},autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}()},function(t,e){angular.module("youtube-embed",[]).service("youtubeEmbedUtils",["$window","$rootScope",function(t,e){function n(t,e){return t.indexOf(e)>-1}function i(){e.$apply(function(){r.ready=!0})}var r={},o=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,a=/t=(\d+)[ms]?(\d+)?s?/;return r.getIdFromURL=function(t){var e=t.replace(o,"$1");if(n(e,";")){var i=e.split(";");if(n(i[1],"%"))e=("http://youtube.com"+decodeURIComponent(i[1])).replace(o,"$1");else e=i[0]}else n(e,"#")&&(e=e.split("#")[0]);return e},r.getTimeFromURL=function(t){var e=(t=t||"").match(a);if(!e)return 0;var i=e[0],r=e[1],o=e[2];return void 0!==o?(o=parseInt(o,10),r=parseInt(r,10)):n(i,"m")?(r=parseInt(r,10),o=0):(o=parseInt(r,10),r=0),o+60*r},r.ready=!1,"undefined"==typeof YT?(t.onYouTubeIframeAPIReady=i,console.log("Unable to find YouTube iframe library on this page.")):YT.loaded?r.ready=!0:YT.ready(i),r}]).directive("youtubeVideo",["$window","youtubeEmbedUtils",function(t,e){var n=1,i={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"queued"},r="youtube.player.";return t.YTConfig={host:"https://www.youtube.com"},{restrict:"EA",scope:{videoId:"=?",videoUrl:"=?",player:"=?",playerVars:"=?",playerHeight:"=?",playerWidth:"=?"},link:function(t,o,a){function s(){var e=Array.prototype.slice.call(arguments);t.$apply(function(){t.$emit.apply(t,e)})}function c(e){var n=i[e.data];void 0!==n&&s(r+n,t.player,e),t.$apply(function(){t.player.currentState=n})}function l(e){s(r+"ready",t.player,e)}function u(e){s(r+"error",t.player,e)}function d(){(t.videoId||t.playerVars.list)&&(t.player&&"function"==typeof t.player.destroy&&t.player.destroy(),t.player=function(){var e=angular.copy(t.playerVars);e.start=e.start||t.urlStartTime;var n=new YT.Player(p,{height:t.playerHeight,width:t.playerWidth,videoId:t.videoId,playerVars:e,events:{onReady:l,onStateChange:c,onError:u}});return n.id=p,n}())}t.utils=e;var p=a.playerId||o[0].id||"unique-youtube-embed-id-"+n++;o[0].id=p,t.playerHeight=t.playerHeight||390,t.playerWidth=t.playerWidth||640,t.playerVars=t.playerVars||{};var f=t.$watch(function(){return t.utils.ready&&(void 0!==t.videoUrl||void 0!==t.videoId||void 0!==t.playerVars.list)},function(e){e&&(f(),void 0!==t.videoUrl?t.$watch("videoUrl",function(e){t.videoId=t.utils.getIdFromURL(e),t.urlStartTime=t.utils.getTimeFromURL(e),d()}):void 0!==t.videoId?t.$watch("videoId",function(){t.urlStartTime=null,d()}):t.$watch("playerVars.list",function(){t.urlStartTime=null,d()}))});t.$watchCollection(["playerHeight","playerWidth"],function(){t.player&&t.player.setSize(t.playerWidth,t.playerHeight)}),t.$on("$destroy",function(){t.player&&t.player.destroy()})}}}])},function(t,e){
/*!
 * ngTagsInput v3.0.0
 * http://mbenford.github.io/ngTagsInput
 *
 * Copyright (c) 2013-2015 Michael Benford
 * License: MIT
 *
 * Generated at 2015-07-13 02:08:11 -0300
 */
!function(){"use strict";var t=8,e=9,n=13,i=27,r=32,o=38,a=40,s=37,c=39,l=46,u=188,d=["text","email","url"],p=angular.module("ngTagsInput",[]);p.directive("tagsInput",["$timeout","$document","$window","tagsInputConfig","tiUtil",function(e,i,o,a,p){function f(t,e,n,i){var r,o,a,s={};return r=function(e){return p.safeToString(e[t.displayProperty])},o=function(e,n){e[t.displayProperty]=n},a=function(e){var i=r(e);return i&&i.length>=t.minLength&&i.length<=t.maxLength&&t.allowedTagsPattern.test(i)&&!p.findInObjectArray(s.items,e,t.keyProperty||t.displayProperty)&&n({$tag:e})},s.items=[],s.addText=function(t){var e={};return o(e,t),s.add(e)},s.add=function(n){var i=r(n);return t.replaceSpacesWithDashes&&(i=p.replaceSpacesWithDashes(i)),o(n,i),a(n)?(s.items.push(n),e.trigger("tag-added",{$tag:n})):i&&e.trigger("invalid-tag",{$tag:n}),n},s.remove=function(t){var n=s.items[t];if(i({$tag:n}))return s.items.splice(t,1),s.clearSelection(),e.trigger("tag-removed",{$tag:n}),n},s.select=function(t){t<0?t=s.items.length-1:t>=s.items.length&&(t=0),s.index=t,s.selected=s.items[t]},s.selectPrior=function(){s.select(--s.index)},s.selectNext=function(){s.select(++s.index)},s.removeSelected=function(){return s.remove(s.index)},s.clearSelection=function(){s.selected=null,s.index=-1},s.clearSelection(),s}function _(t){return-1!==d.indexOf(t)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(t,e,n){t.events=p.simplePubSub(),a.load("tagsInput",t,e,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",_],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,9007199254740991],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,9007199254740991],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),t.tagList=new f(t.options,t.events,p.handleUndefinedResult(t.onTagAdding,!0),p.handleUndefinedResult(t.onTagRemoving,!0)),this.registerAutocomplete=function(){var e=n.find("input");return{addTag:function(e){return t.tagList.add(e)},focusInput:function(){e[0].focus()},getTags:function(){return t.tagList.items},getCurrentTagText:function(){return t.newTag.text()},getOptions:function(){return t.options},on:function(e,n){return t.events.on(e,n),this}}},this.registerTagItem=function(){return{getOptions:function(){return t.options},removeTag:function(e){t.disabled||t.tagList.remove(e)}}}}],link:function(a,d,f,_){var h,m=[n,u,r,t,l,s,c],g=a.tagList,v=a.events,b=a.options,y=d.find("input"),w=["minTags","maxTags","allowLeftoverText"];h=function(){_.$setValidity("maxTags",g.items.length<=b.maxTags),_.$setValidity("minTags",g.items.length>=b.minTags),_.$setValidity("leftoverText",!(!a.hasFocus&&!b.allowLeftoverText)||!a.newTag.text())},_.$isEmpty=function(t){return!t||!t.length},a.newTag={text:function(t){if(!angular.isDefined(t))return a.text||"";a.text=t,v.trigger("input-change",t)},invalid:null},a.track=function(t){return t[b.keyProperty||b.displayProperty]},a.$watch("tags",function(t){t?(g.items=p.makeObjectArray(t,b.displayProperty),a.tags=g.items):g.items=[]}),a.$watch("tags.length",function(){h(),_.$validate()}),f.$observe("disabled",function(t){a.disabled=t}),a.eventHandlers={input:{keydown:function(t){v.trigger("input-keydown",t)},focus:function(){a.hasFocus||(a.hasFocus=!0,v.trigger("input-focus"))},blur:function(){e(function(){var t=i.prop("activeElement"),e=t===y[0],n=d[0].contains(t);!e&&n||(a.hasFocus=!1,v.trigger("input-blur"))})},paste:function(t){t.getTextData=function(){var e=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData;return e?e.getData("text/plain"):o.clipboardData.getData("Text")},v.trigger("input-paste",t)}},host:{click:function(){a.disabled||y[0].focus()}},tag:{click:function(t){v.trigger("tag-clicked",{$tag:t})}}},v.on("tag-added",a.onTagAdded).on("invalid-tag",a.onInvalidTag).on("tag-removed",a.onTagRemoved).on("tag-clicked",a.onTagClicked).on("tag-added",function(){a.newTag.text("")}).on("tag-added tag-removed",function(){a.tags=g.items,_.$setDirty()}).on("invalid-tag",function(){a.newTag.invalid=!0}).on("option-change",function(t){-1!==w.indexOf(t.name)&&h()}).on("input-change",function(){g.clearSelection(),a.newTag.invalid=null}).on("input-focus",function(){d.triggerHandler("focus"),_.$setValidity("leftoverText",!0)}).on("input-blur",function(){b.addOnBlur&&!b.addFromAutocompleteOnly&&g.addText(a.newTag.text()),d.triggerHandler("blur"),h()}).on("input-keydown",function(e){var i,o,d,f,_=e.keyCode,h={};if(!p.isModifierOn(e)&&-1!==m.indexOf(_)){if(h[n]=b.addOnEnter,h[u]=b.addOnComma,h[r]=b.addOnSpace,i=!b.addFromAutocompleteOnly&&h[_],o=(_===t||_===l)&&g.selected,f=_===t&&0===a.newTag.text().length&&b.enableEditingLastTag,d=(_===t||_===s||_===c)&&0===a.newTag.text().length&&!b.enableEditingLastTag,i)g.addText(a.newTag.text());else if(f){var v;g.selectPrior(),(v=g.removeSelected())&&a.newTag.text(v[b.displayProperty])}else o?g.removeSelected():d&&(_===s||_===t?g.selectPrior():_===c&&g.selectNext());(i||d||o||f)&&e.preventDefault()}}).on("input-paste",function(t){if(b.addOnPaste){var e=t.getTextData().split(b.pasteSplitPattern);e.length>1&&(e.forEach(function(t){g.addText(t)}),t.preventDefault())}})}}}]),p.directive("tiTagItem",["tiUtil",function(t){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(e,n,i,r){var o=r.registerTagItem(),a=o.getOptions();e.$$template=a.template,e.$$removeTagSymbol=a.removeTagSymbol,e.$getDisplayText=function(){return t.safeToString(e.data[a.displayProperty])},e.$removeTag=function(){o.removeTag(e.$index)},e.$watch("$parent.$index",function(t){e.$index=t})}}}]),p.directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function(t,r,s,c,l,u){function d(t,e,n){var i,r,o,a={};return o=function(){return e.tagsInput.keyProperty||e.tagsInput.displayProperty},i=function(t,n){return t.filter(function(t){return!u.findInObjectArray(n,t,o(),function(t,n){return e.tagsInput.replaceSpacesWithDashes&&(t=u.replaceSpacesWithDashes(t),n=u.replaceSpacesWithDashes(n)),u.defaultComparer(t,n)})})},a.reset=function(){r=null,a.items=[],a.visible=!1,a.index=-1,a.selected=null,a.query=null},a.show=function(){e.selectFirstMatch?a.select(0):a.selected=null,a.visible=!0},a.load=u.debounce(function(n,s){a.query=n;var l=c.when(t({$query:n}));r=l,l.then(function(t){l===r&&(t=u.makeObjectArray(t.data||t,o()),t=i(t,s),a.items=t.slice(0,e.maxResultsToShow),a.items.length>0?a.show():a.reset())})},e.debounceDelay),a.selectNext=function(){a.select(++a.index)},a.selectPrior=function(){a.select(--a.index)},a.select=function(t){t<0?t=a.items.length-1:t>=a.items.length&&(t=0),a.index=t,a.selected=a.items[t],n.trigger("suggestion-selected",t)},a.reset(),a}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function(t,e,n){t.events=u.simplePubSub(),l.load("autoComplete",t,n,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),t.suggestionList=new d(t.source,t.options,t.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return t.options},getQuery:function(){return t.suggestionList.query}}}}],link:function(t,r,s,c){var l,d=[n,e,i,o,a],p=t.suggestionList,f=c.registerAutocomplete(),_=t.options,h=t.events;_.tagsInput=f.getOptions(),l=function(t){return t&&t.length>=_.minLength||!t&&_.loadOnEmpty},t.addSuggestionByIndex=function(e){p.select(e),t.addSuggestion()},t.addSuggestion=function(){var t=!1;return p.selected&&(f.addTag(angular.copy(p.selected)),p.reset(),f.focusInput(),t=!0),t},t.track=function(t){return t[_.tagsInput.keyProperty||_.tagsInput.displayProperty]},f.on("tag-added tag-removed invalid-tag input-blur",function(){p.reset()}).on("input-change",function(t){l(t)?p.load(t,f.getTags()):p.reset()}).on("input-focus",function(){var t=f.getCurrentTagText();_.loadOnFocus&&l(t)&&p.load(t,f.getTags())}).on("input-keydown",function(r){var s=r.keyCode,c=!1;if(!u.isModifierOn(r)&&-1!==d.indexOf(s))return p.visible?s===a?(p.selectNext(),c=!0):s===o?(p.selectPrior(),c=!0):s===i?(p.reset(),c=!0):s!==n&&s!==e||(c=t.addSuggestion()):s===a&&t.options.loadOnDownArrow&&(p.load(f.getCurrentTagText(),f.getTags()),c=!0),c?(r.preventDefault(),r.stopImmediatePropagation(),!1):void 0}),h.on("suggestion-selected",function(t){!function(t,e){var n=t.find("li").eq(e),i=n.parent(),r=n.prop("offsetTop"),o=n.prop("offsetHeight"),a=i.prop("clientHeight"),s=i.prop("scrollTop");r<s?i.prop("scrollTop",r):r+o>a+s&&i.prop("scrollTop",r+o-a)}(r,t)})}}}]),p.directive("tiAutocompleteMatch",["$sce","tiUtil",function(t,e){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(n,i,r,o){var a=o.registerAutocompleteMatch(),s=a.getOptions();n.$$template=s.template,n.$index=n.$parent.$index,n.$highlight=function(n){return s.highlightMatchedText&&(n=e.safeHighlight(n,a.getQuery())),t.trustAsHtml(n)},n.$getDisplayText=function(){return e.safeToString(n.data[s.displayProperty||s.tagsInput.displayProperty])}}}}]),p.directive("tiTranscludeAppend",function(){return function(t,e,n,i,r){r(function(t){e.append(t)})}}),p.directive("tiAutosize",["tagsInputConfig",function(t){return{restrict:"A",require:"ngModel",link:function(e,n,i,r){var o,a,s=t.getTextAutosizeThreshold();(o=angular.element('<span class="input"></span>')).css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),n.parent().append(o),a=function(t){var e,r=t;return angular.isString(r)&&0===r.length&&(r=i.placeholder),r&&(o.text(r),o.css("display",""),e=o.prop("offsetWidth"),o.css("display","none")),n.css("width",e?e+s+"px":""),t},r.$parsers.unshift(a),r.$formatters.unshift(a),i.$observe("placeholder",function(t){r.$modelValue||a(t)})}}}]),p.directive("tiBindAttrs",function(){return function(t,e,n){t.$watch(n.tiBindAttrs,function(t){angular.forEach(t,function(t,e){n.$set(e,t)})},!0)}}),p.provider("tagsInputConfig",function(){var t={},e={},n=3;this.setDefaults=function(e,n){return t[e]=n,this},this.setActiveInterpolation=function(t,n){return e[t]=n,this},this.setTextAutosizeThreshold=function(t){return n=t,this},this.$get=["$interpolate",function(i){var r={};return r[String]=function(t){return t},r[Number]=function(t){return parseInt(t,10)},r[Boolean]=function(t){return"true"===t.toLowerCase()},r[RegExp]=function(t){return new RegExp(t)},{load:function(n,o,a,s){var c=function(){return!0};o.options={},angular.forEach(s,function(s,l){var u,d,p,f,_,h;u=s[0],d=s[1],p=s[2]||c,f=r[u],_=function(){var e=t[n]&&t[n][l];return angular.isDefined(e)?e:d},h=function(t){o.options[l]=t&&p(t)?f(t):_()},e[n]&&e[n][l]?a.$observe(l,function(t){h(t),o.events.trigger("option-change",{name:l,newValue:t})}):h(a[l]&&i(a[l])(o.$parent))})},getTextAutosizeThreshold:function(){return n}}}]}),p.factory("tiUtil",["$timeout",function(t){var e={debounce:function(e,n){var i;return function(){var r=arguments;t.cancel(i),i=t(function(){e.apply(null,r)},n)}},makeObjectArray:function(t,e){if(!angular.isArray(t)||0===t.length||angular.isObject(t[0]))return t;var n=[];return t.forEach(function(t){var i={};i[e]=t,n.push(i)}),n},findInObjectArray:function(t,n,i,r){var o=null;return r=r||e.defaultComparer,t.some(function(t){if(r(t[i],n[i]))return o=t,!0}),o},defaultComparer:function(t,n){return e.safeToString(t).toLowerCase()===e.safeToString(n).toLowerCase()},safeHighlight:function(t,n){if(!n)return t;t=e.encodeHTML(t),n=e.encodeHTML(n);var i=new RegExp("&[^;]+;|"+function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}(n),"gi");return t.replace(i,function(t){return t.toLowerCase()===n.toLowerCase()?"<em>"+t+"</em>":t})},safeToString:function(t){return angular.isUndefined(t)||null==t?"":t.toString().trim()},encodeHTML:function(t){return e.safeToString(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},handleUndefinedResult:function(t,e){return function(){var n=t.apply(null,arguments);return angular.isUndefined(n)?e:n}},replaceSpacesWithDashes:function(t){return e.safeToString(t).replace(/\s/g,"-")},isModifierOn:function(t){return t.shiftKey||t.ctrlKey||t.altKey||t.metaKey},simplePubSub:function(){var t={};return{on:function(e,n){return e.split(" ").forEach(function(e){t[e]||(t[e]=[]),t[e].push(n)}),this},trigger:function(n,i){return(t[n]||[]).every(function(t){return e.handleUndefinedResult(t,!0)(i)}),this}}}};return e}]),p.run(["$templateCache",function(t){t.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item data="::tag"></ti-tag-item></li></ul><input class="input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),t.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),t.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match data="::item"></ti-autocomplete-match></li></ul></div>'),t.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}])}()},function(t,e,n){var i,r;
/*! jquery.atwho - v1.4.0 %>
* Copyright (c) 2015 chord.luo <chord.luo@gmail.com>;
* homepage: http://ichord.github.com/At.js
* Licensed MIT
*/i=[n(12)],void 0===(r=function(t){return d=[].slice,p=function(t,e){for(var n in e)f.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},f={}.hasOwnProperty,e=t,i=function(){function t(t){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=e(t),this.setupRootElement(),this.listen()}return t.prototype.createContainer=function(t){var n;return null!=(n=this.$el)&&n.remove(),e(t.body).append(this.$el=e("<div class='atwho-container'></div>"))},t.prototype.setupRootElement=function(t,n){var i;if(null==n&&(n=!1),t)this.window=t.contentWindow,this.document=t.contentDocument||this.window.document,this.iframe=t;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(t){if(i=t,this.iframe=null,e.fn.atwho.debug)throw new Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+i)}}return this.createContainer((this.iframeAsRoot=n)?this.document:document)},t.prototype.controller=function(t){var e,n,i,r;if(this.aliasMaps[t])n=this.controllers[this.aliasMaps[t]];else for(i in r=this.controllers)if(e=r[i],i===t){n=e;break}return n||this.controllers[this.currentFlag]},t.prototype.setContextFor=function(t){return this.currentFlag=t,this},t.prototype.reg=function(t,e){var n,i;return i=(n=this.controllers)[t]||(n[t]=this.$inputor.is("[contentEditable]")?new a(this,t):new l(this,t)),e.alias&&(this.aliasMaps[e.alias]=t),i.init(e),this},t.prototype.listen=function(){return this.$inputor.on("compositionstart",(t=this,function(e){var n;return null!=(n=t.controller())&&n.view.hide(),t.isComposing=!0,null})).on("compositionend",function(t){return function(e){return t.isComposing=!1,null}}(this)).on("keyup.atwhoInner",function(t){return function(e){return t.onKeyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.onKeydown(e)}}(this)).on("blur.atwhoInner",function(t){return function(e){var n;if(n=t.controller())return n.expectedQueryCBId=null,n.view.hide(e,n.getOpt("displayTimeout"))}}(this)).on("click.atwhoInner",function(t){return function(e){return t.dispatch(e)}}(this)).on("scroll.atwhoInner",function(t){return function(){var e;return e=t.$inputor.scrollTop(),function(n){var i,r;return i=n.target.scrollTop,e!==i&&null!=(r=t.controller())&&r.view.hide(n),e=i,!0}}}(this)());var t},t.prototype.shutdown=function(){var t,e;for(t in e=this.controllers)e[t].destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner"),this.$el.remove()},t.prototype.dispatch=function(t){var e,n,i,r;for(e in i=this.controllers,r=[],i)n=i[e],r.push(n.lookUp(t));return r},t.prototype.onKeyup=function(t){var n;switch(t.keyCode){case s.ESC:t.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case s.DOWN:case s.UP:case s.CTRL:case s.ENTER:e.noop();break;case s.P:case s.N:t.ctrlKey||this.dispatch(t);break;default:this.dispatch(t)}},t.prototype.onKeydown=function(t){var n,i;if((i=null!=(n=this.controller())?n.view:void 0)&&i.visible())switch(t.keyCode){case s.ESC:t.preventDefault(),i.hide(t);break;case s.UP:t.preventDefault(),i.prev();break;case s.DOWN:t.preventDefault(),i.next();break;case s.P:if(!t.ctrlKey)return;t.preventDefault(),i.prev();break;case s.N:if(!t.ctrlKey)return;t.preventDefault(),i.next();break;case s.TAB:case s.ENTER:case s.SPACE:if(!i.visible())return;if(!this.controller().getOpt("spaceSelectsMatch")&&t.keyCode===s.SPACE)return;if(!this.controller().getOpt("tabSelectsMatch")&&t.keyCode===s.TAB)return;i.highlighted()?(t.preventDefault(),i.choose(t)):i.hide(t);break;default:e.noop()}},t}(),r=function(){function t(t,n){this.app=t,this.at=n,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.expectedQueryCBId=null,this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=e("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=e("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new c(this),this.view=new u(this)}return t.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},t.prototype.init=function(t){return this.setting=e.extend({},this.setting||e.fn.atwho.default,t),this.view.init(),this.model.reload(this.setting.data)},t.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},t.prototype.callDefault=function(){var t,n,i;i=arguments[0],t=2<=arguments.length?d.call(arguments,1):[];try{return o[i].apply(this,t)}catch(t){return n=t,e.error(n+" Or maybe At.js doesn't have function "+i)}},t.prototype.trigger=function(t,e){var n,i;return null==e&&(e=[]),e.push(this),n=this.getOpt("alias"),i=n?t+"-"+n+".atwho":t+".atwho",this.$inputor.trigger(i,e)},t.prototype.callbacks=function(t){return this.getOpt("callbacks")[t]||o[t]},t.prototype.getOpt=function(t,e){try{return this.setting[t]}catch(t){return null}},t.prototype.insertContentFor=function(t){var n,i;return i=this.getOpt("insertTpl"),n=e.extend({},t.data("item-data"),{"atwho-at":this.at}),this.callbacks("tplEval").call(this,i,n,"onInsert")},t.prototype.renderView=function(t){var e;return e=this.getOpt("searchKey"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.getOpt("limit")))},t.arrayToDefaultHash=function(t){var n,i,r,o;if(!e.isArray(t))return t;for(o=[],n=0,r=t.length;n<r;n++)i=t[n],e.isPlainObject(i)?o.push(i):o.push({name:i});return o},t.prototype.lookUp=function(t){var e,n;if((!t||"click"!==t.type||this.getOpt("lookUpOnClick"))&&(!this.getOpt("suspendOnComposing")||!this.app.isComposing))return(e=this.catchQuery(t))?(this.app.setContextFor(this.at),(n=this.getOpt("delay"))?this._delayLookUp(e,n):this._lookUp(e),e):(this.expectedQueryCBId=null,e)},t.prototype._delayLookUp=function(t,e){var n,i,r;return n=Date.now?Date.now():(new Date).getTime(),this.previousCallTime||(this.previousCallTime=n),0<(i=e-(n-this.previousCallTime))&&i<e?(this.previousCallTime=n,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout((r=this,function(){return r.previousCallTime=0,r.delayedCallTimeout=null,r._lookUp(t)}),e)):(this._stopDelayedCall(),this.previousCallTime!==n&&(this.previousCallTime=0),this._lookUp(t))},t.prototype._stopDelayedCall=function(){if(this.delayedCallTimeout)return clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null},t.prototype._generateQueryCBId=function(){return{}},t.prototype._lookUp=function(t){var n;return n=function(t,e){if(t===this.expectedQueryCBId)return e&&e.length>0?this.renderView(this.constructor.arrayToDefaultHash(e)):this.view.hide()},this.expectedQueryCBId=this._generateQueryCBId(),this.model.query(t.text,e.proxy(n,this,this.expectedQueryCBId))},t}(),l=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return p(n,t),n.prototype.catchQuery=function(){var t,e,n,i,r,o,a;if(e=this.$inputor.val(),t=this.$inputor.caret("pos",{iframe:this.app.iframe}),a=e.slice(0,t),r=this.callbacks("matcher").call(this,this.at,a,this.getOpt("startWithSpace")),!((i="string"==typeof r)&&r.length<this.getOpt("minLen",0)))return i&&r.length<=this.getOpt("maxLen",20)?(o=t-r.length,n=o+r.length,this.pos=o,r={text:r,headPos:o,endPos:n},this.trigger("matched",[this.at,r.text])):(r=null,this.view.hide()),this.query=r},n.prototype.rect=function(){var t,n,i;if(t=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&(n=e(this.app.iframe).offset(),t.left+=n.left,t.top+=n.top),i=this.app.document.selection?0:2,{left:t.left,top:t.top,bottom:t.top+t.height+i}},n.prototype.insert=function(t,e){var n,i,r,o,a;return n=this.$inputor,i=n.val(),r=i.slice(0,Math.max(this.query.headPos-this.at.length,0)),o=""===(o=this.getOpt("suffix"))?o:o||" ",a=""+r+(t+=o)+i.slice(this.query.endPos||0),n.val(a),n.caret("pos",r.length+t.length,{iframe:this.app.iframe}),n.is(":focus")||n.focus(),n.change()},n}(r),a=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return p(n,t),n.prototype._getRange=function(){var t;if((t=this.app.window.getSelection()).rangeCount>0)return t.getRangeAt(0)},n.prototype._setRange=function(t,n,i){if(null==i&&(i=this._getRange()),i)return n=e(n)[0],"after"===t?(i.setEndAfter(n),i.setStartAfter(n)):(i.setEndBefore(n),i.setStartBefore(n)),i.collapse(!1),this._clearRange(i)},n.prototype._clearRange=function(t){var e;if(null==t&&(t=this._getRange()),e=this.app.window.getSelection(),null==this.ctrl_a_pressed)return e.removeAllRanges(),e.addRange(t)},n.prototype._movingEvent=function(t){var e;return"click"===t.type||(e=t.which)===s.RIGHT||e===s.LEFT||e===s.UP||e===s.DOWN},n.prototype._unwrap=function(t){var n;return t=e(t).unwrap().get(0),(n=t.nextSibling)&&n.nodeValue&&(t.nodeValue+=n.nodeValue,e(n).remove()),t},n.prototype.catchQuery=function(t){var n,i,r,o,a,c,l,u,d,p,f,_;if((_=this._getRange())&&_.collapsed){if(t.which===s.ENTER)return(i=e(_.startContainer).closest(".atwho-query")).contents().unwrap(),i.is(":empty")&&i.remove(),(i=e(".atwho-query",this.app.document)).text(i.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)){if(e(_.startContainer).is(this.$inputor))return void this._clearRange();t.which===s.BACKSPACE&&_.startContainer.nodeType===document.ELEMENT_NODE&&(d=_.startOffset-1)>=0?((r=_.cloneRange()).setStart(_.startContainer,d),e(r.cloneContents()).contents().last().is(".atwho-inserted")&&(a=e(_.startContainer).contents().get(d),this._setRange("after",e(a).contents().last()))):t.which===s.LEFT&&_.startContainer.nodeType===document.TEXT_NODE&&(n=e(_.startContainer.previousSibling)).is(".atwho-inserted")&&0===_.startOffset&&this._setRange("after",n.contents().last())}if(e(_.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query"),(i=e(".atwho-query",this.app.document)).length>0&&i.is(":empty")&&0===i.text().length&&i.remove(),this._movingEvent(t)||i.removeClass("atwho-inserted"),i.length>0)switch(t.which){case s.LEFT:return this._setRange("before",i.get(0),_),void i.removeClass("atwho-query");case s.RIGHT:return this._setRange("after",i.get(0).nextSibling,_),void i.removeClass("atwho-query")}if(i.length>0&&(f=i.attr("data-atwho-at-query"))&&(i.empty().html(f).attr("data-atwho-at-query",null),this._setRange("after",i.get(0),_)),(r=_.cloneRange()).setStart(_.startContainer,0),u=this.callbacks("matcher").call(this,this.at,r.toString(),this.getOpt("startWithSpace")),c="string"==typeof u,0===i.length&&c&&(o=_.startOffset-this.at.length-u.length)>=0&&(_.setStart(_.startContainer,o),i=e("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),_.surroundContents(i.get(0)),l=i.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(_.setStart(l,l.length),_.setEnd(l,l.length),this._clearRange(_)):this._setRange("after",l,_)),!(c&&u.length<this.getOpt("minLen",0)))return c&&u.length<=this.getOpt("maxLen",20)?(p={text:u,el:i},this.trigger("matched",[this.at,p.text]),this.query=p):(this.view.hide(),this.query={el:i},i.text().indexOf(this.at)>=0&&(this._movingEvent(t)&&i.hasClass("atwho-inserted")?i.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,i)&&this._setRange("after",this._unwrap(i.text(i.text()).contents().first()))),null)}},n.prototype.rect=function(){var t,n;return n=this.query.el.offset(),this.app.iframe&&!this.app.iframeAsRoot&&(t=e(this.app.iframe).offset(),n.left+=t.left-this.$inputor.scrollLeft(),n.top+=t.top-this.$inputor.scrollTop()),n.bottom=n.top+this.query.el.height(),n},n.prototype.insert=function(t,e){var n,i,r,o;return r=""===(r=this.getOpt("suffix"))?r:r||"",n=e.data("item-data"),this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(t).attr("data-atwho-at-query",""+n["atwho-at"]+this.query.text),(i=this._getRange())&&(i.setEndAfter(this.query.el[0]),i.collapse(!1),i.insertNode(o=this.app.document.createTextNode(""+r)),this._setRange("after",o,i)),this.$inputor.is(":focus")||this.$inputor.focus(),this.$inputor.change()},n}(r),c=function(){function t(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return t.prototype.destroy=function(){return this.storage.data(this.at,null)},t.prototype.saved=function(){return this.fetch()>0},t.prototype.query=function(t,e){var n,i,r;return i=this.fetch(),r=this.context.getOpt("searchKey"),i=this.context.callbacks("filter").call(this.context,t,i,r)||[],n=this.context.callbacks("remoteFilter"),i.length>0||!n&&0===i.length?e(i):n.call(this.context,t,e)},t.prototype.fetch=function(){return this.storage.data(this.at)||[]},t.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,t||[]))},t.prototype.load=function(t){if(!this.saved()&&t)return this._load(t)},t.prototype.reload=function(t){return this._load(t)},t.prototype._load=function(t){return"string"==typeof t?e.ajax(t,{dataType:"json"}).done((n=this,function(t){return n.save(t)})):this.save(t);var n},t}(),u=function(){function t(t){this.context=t,this.$el=e("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeoutID=null,this.context.$el.append(this.$el),this.bindEvent()}return t.prototype.init=function(){var t;return t=this.context.getOpt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+t})},t.prototype.destroy=function(){return this.$el.remove()},t.prototype.bindEvent=function(){var t,n;return(t=this.$el.find("ul")).on("mouseenter.atwho-view","li",function(n){return t.find(".cur").removeClass("cur"),e(n.currentTarget).addClass("cur")}).on("click.atwho-view","li",(n=this,function(i){return t.find(".cur").removeClass("cur"),e(i.currentTarget).addClass("cur"),n.choose(i),i.preventDefault()}))},t.prototype.visible=function(){return this.$el.is(":visible")},t.prototype.highlighted=function(){return this.$el.find(".cur").length>0},t.prototype.choose=function(t){var e,n;if((e=this.$el.find(".cur")).length&&(n=this.context.insertContentFor(e),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,n,e),e),this.context.trigger("inserted",[e,t]),this.hide(t)),this.context.getOpt("hideWithoutSuffix"))return this.stopShowing=!0},t.prototype.reposition=function(t){var n,i,r,o;return n=this.context.app.iframeAsRoot?this.context.app.window:window,t.bottom+this.$el.height()-e(n).scrollTop()>e(n).height()&&(t.bottom=t.top-this.$el.height()),t.left>(r=e(n).width()-this.$el.width()-5)&&(t.left=r),i={left:t.left,top:t.bottom},null!=(o=this.context.callbacks("beforeReposition"))&&o.call(this.context,i),this.$el.offset(i),this.context.trigger("reposition",[i])},t.prototype.next=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),(e=t.next()).length||(e=this.$el.find("li:first")),e.addClass("cur"),this.scrollTop(Math.max(0,t.innerHeight()*(e.index()+2)-this.$el.height()))},t.prototype.prev=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),(e=t.prev()).length||(e=this.$el.find("li:last")),e.addClass("cur"),this.scrollTop(Math.max(0,t.innerHeight()*(e.index()+2)-this.$el.height()))},t.prototype.scrollTop=function(t){var e;return(e=this.context.getOpt("scrollDuration"))?this.$el.animate({scrollTop:t},e):this.$el.scrollTop(t)},t.prototype.show=function(){var t;if(!this.stopShowing)return this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0;this.stopShowing=!1},t.prototype.hide=function(t,e){var n,i;if(this.visible())return isNaN(e)?(this.$el.hide(),this.context.trigger("hidden",[t])):(i=this,n=function(){return i.hide()},clearTimeout(this.timeoutID),this.timeoutID=setTimeout(n,e))},t.prototype.render=function(t){var n,i,r,o,a,s,c;if(e.isArray(t)&&t.length>0){for(this.$el.find("ul").empty(),i=this.$el.find("ul"),c=this.context.getOpt("displayTpl"),r=0,a=t.length;r<a;r++)o=t[r],o=e.extend({},o,{"atwho-at":this.context.at}),s=this.context.callbacks("tplEval").call(this.context,c,o,"onDisplay"),(n=e(this.context.callbacks("highlighter").call(this.context,s,this.context.query.text))).data("item-data",o),i.append(n);return this.show(),this.context.getOpt("highlightFirst")?i.find("li:first").addClass("cur"):void 0}this.hide()},t}(),s={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},o={beforeSave:function(t){return r.arrayToDefaultHash(t)},matcher:function(t,e,n,i){var r,o,a,s;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),r=decodeURI("%C3%80"),o=decodeURI("%C3%BF"),s=new RegExp(t+"([A-Za-z"+r+"-"+o+"0-9_"+(i?" ":"")+"'.+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),(a=s.exec(e))?a[2]||a[1]:null},filter:function(t,e,n){var i,r,o,a;for(i=[],r=0,a=e.length;r<a;r++)o=e[r],~new String(o[n]).toLowerCase().indexOf(t.toLowerCase())&&i.push(o);return i},remoteFilter:null,sorter:function(t,e,n){var i,r,o,a;if(!t)return e;for(i=[],r=0,a=e.length;r<a;r++)(o=e[r]).atwho_order=new String(o[n]).toLowerCase().indexOf(t.toLowerCase()),o.atwho_order>-1&&i.push(o);return i.sort(function(t,e){return t.atwho_order-e.atwho_order})},tplEval:function(t,e){var n;n=t;try{return"string"!=typeof t&&(n=t(e)),n.replace(/\$\{([^\}]*)\}/g,function(t,n,i){return e[n]})}catch(t){return""}},highlighter:function(t,e){var n;return e?(n=new RegExp(">\\s*(\\w*?)("+e.replace("+","\\+")+")(\\w*)\\s*<","ig"),t.replace(n,function(t,e,n,i){return"> "+e+"<strong>"+n+"</strong>"+i+" <"})):t},beforeInsert:function(t,e){return t},beforeReposition:function(t){return t},afterMatchFailed:function(t,e){}},n={load:function(t,e){var n;if(n=this.controller(t))return n.model.load(e)},isSelecting:function(){var t;return!!(null!=(t=this.controller())?t.view.visible():void 0)},hide:function(){var t;return null!=(t=this.controller())?t.view.hide():void 0},reposition:function(){var t;if(t=this.controller())return t.view.reposition(t.rect())},setIframe:function(t,e){return this.setupRootElement(t,e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},e.fn.atwho=function(t){var r,o;return r=arguments,o=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var a,s;return(s=(a=e(this)).data("atwho"))||a.data("atwho",s=new i(this)),"object"!=typeof t&&t?n[t]&&s?o=n[t].apply(s,Array.prototype.slice.call(r,1)):e.error("Method "+t+" does not exist on jQuery.atwho"):s.reg(t.at,t)}),null!=o?o:this},e.fn.atwho.default={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",callbacks:o,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0},void(e.fn.atwho.debug=!1);var e,n,i,r,o,a,s,c,l,u,d,p,f}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o;o=this,i=[n(12)],void 0===(r=function(t){return o.returnExportsGlobal=function(t){"use strict";var e,n,i,r,o,a,s,c;e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(t){return this.domInputor},e.prototype.getIEPosition=function(){return this.getPosition()},e.prototype.getPosition=function(){var t,e;return e=this.getOffset(),t=this.$inputor.offset(),e.left-=t.left,e.top-=t.top,e},e.prototype.getOldIEPos=function(){var t,e;return e=a.selection.createRange(),(t=a.body.createTextRange()).moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,n;return(n=this.range())?((t=n.cloneRange()).selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e):a.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return(t=a.selection.createRange().duplicate()).moveStart("character",-1),{height:(e=t.getBoundingClientRect()).bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(e){var n,i,r,o,c;return s.getSelection&&(r=this.range())?(r.endOffset-1>0&&r.endContainer===!this.domInputor&&((n=r.cloneRange()).setStart(r.endContainer,r.endOffset-1),n.setEnd(r.endContainer,r.endOffset),o=n.getBoundingClientRect(),i={height:o.height,left:o.left+o.width,top:o.top},n.detach()),i&&0!==(null!=i?i.height:void 0)||(n=r.cloneRange(),c=t(a.createTextNode("|")),n.insertNode(c[0]),n.selectNode(c[0]),o=n.getBoundingClientRect(),i={height:o.height,left:o.left,top:o.top},c.remove(),n.detach())):a.selection&&(i=this.getOldIEOffset()),i&&(i.top+=t(s).scrollTop(),i.left+=t(s).scrollLeft()),i},e.prototype.range=function(){var t;if(s.getSelection)return(t=s.getSelection()).rangeCount>0?t.getRangeAt(0):null},e}(),n=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,n,i,r,o,s;return e=this.domInputor,o=a.selection.createRange(),r=0,o&&o.parentElement()===e&&(i=e.value.replace(/\r\n/g,"\n"),n=i.length,(s=e.createTextRange()).moveToBookmark(o.getBookmark()),(t=e.createTextRange()).collapse(!1),r=s.compareEndPoints("StartToEnd",t)>-1?n:-s.moveStart("character",-n)),r},e.prototype.getPos=function(){return a.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,n;return e=this.domInputor,a.selection?((n=e.createTextRange()).move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e,n,i,r;return n=this.domInputor.createTextRange(),t||(t=this.getPos()),n.move("character",t),i=n.boundingLeft,r=n.boundingTop,e=n.boundingHeight,{left:i,top:r,height:e}},e.prototype.getOffset=function(e){var n,i,r;return n=this.$inputor,a.selection?((i=this.getIEOffset(e)).top+=t(s).scrollTop()+n.scrollTop(),i.left+=t(s).scrollLeft()+n.scrollLeft(),i):(i=n.offset(),r=this.getPosition(e),i={left:i.left+r.left-n.scrollLeft(),top:i.top+r.top-n.scrollTop(),height:r.height})},e.prototype.getPosition=function(t){var e,n,r,o,a;return e=this.$inputor,r=function(t){return t=t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(t=t.replace(/\s/g,"&nbsp;")),t},void 0===t&&(t=this.getPos()),a=e.val().slice(0,t),n=e.val().slice(t),o="<span style='position: relative; display: inline;'>"+r(a)+"</span>",o+="<span id='caret' style='position: relative; display: inline;'>|</span>",o+="<span style='position: relative; display: inline;'>"+r(n)+"</span>",new i(e).create(o).rect()},e.prototype.getIEPosition=function(t){var e,n,i,r,o;return i=this.getIEOffset(t),n=this.$inputor.offset(),r=i.left-n.left,o=i.top-n.top,e=i.height,{left:r,top:o,height:e}},e}(),i=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],e.prototype.mirrorCss=function(){var e,n=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),t.each(this.css_attr,function(t,i){return e[i]=n.$inputor.css(i)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,n;return t=this.$mirror.find("#caret"),e=t.position(),n={left:e.left,top:e.top,height:t.height()},this.$mirror.remove(),n},e}(),r={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},o={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return a.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(t){return this.getOffset(t)}},a=null,s=null,c=function(t){var e;return(e=null!=t?t.iframe:void 0)?(s=e.contentWindow,a=e.contentDocument||s.document):(s=window,a=document)},t.fn.caret=function(i,a,s){var l;return o[i]?(t.isPlainObject(a)?(c(a),a=void 0):c(s),l=r.contentEditable(this)?new e(this):new n(this),o[i].apply(l,[a])):t.error("Method "+i+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=n,t.fn.caret.Utils=r,t.fn.caret.apis=o}(t)}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o;r=[n(12)],void 0===(o="function"==typeof(i=function(t){t.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},t.expr[":"]["has-src"]=function(e){return t(e).is('img[src][src!=""]')},t.expr[":"].uncached=function(e){return!!t(e).is(":has-src")&&!e.complete},t.fn.waitForImages=function(){var e,n,i,r=0,o=0,a=t.Deferred();if(t.isPlainObject(arguments[0])?(i=arguments[0].waitForAll,n=arguments[0].each,e=arguments[0].finished):1===arguments.length&&"boolean"===t.type(arguments[0])?i=arguments[0]:(e=arguments[0],n=arguments[1],i=arguments[2]),e=e||t.noop,n=n||t.noop,i=!!i,!t.isFunction(e)||!t.isFunction(n))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var s=t(this),c=[],l=t.waitForImages.hasImageProperties||[],u=t.waitForImages.hasImageAttributes||[],d=/url\(\s*(['"]?)(.*?)\1\s*\)/g;i?s.find("*").addBack().each(function(){var e=t(this);e.is("img:has-src")&&c.push({src:e.attr("src"),element:e[0]}),t.each(l,function(t,n){var i,r=e.css(n);if(!r)return!0;for(;i=d.exec(r);)c.push({src:i[2],element:e[0]})}),t.each(u,function(n,i){var r,o=e.attr(i);if(!o)return!0;r=o.split(","),t.each(r,function(n,i){i=t.trim(i).split(" ")[0],c.push({src:i,element:e[0]})})})}):s.find("img:has-src").each(function(){c.push({src:this.src,element:this})}),r=c.length,o=0,0===r&&(e.call(s[0]),a.resolveWith(s[0])),t.each(c,function(i,c){var l=new Image,u="load.waitForImages error.waitForImages";t(l).one(u,function i(l){var d=[o,r,"load"==l.type];if(o++,n.apply(c.element,d),a.notifyWith(c.element,d),t(this).off(u,i),o==r)return e.call(s[0]),a.resolveWith(s[0]),!1}),l.src=c.src})}),a.promise()}})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){(function(e){t.exports=e._=n(268)}).call(this,n(1))},function(t,e,n){(function(t,i){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o,a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",l="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",p=1,f=2,_=4,h=1,m=2,g=1,v=2,b=4,y=8,w=16,$=32,x=64,k=128,C=256,S=512,A=30,E="...",j=800,O=16,T=1,q=2,M=1/0,P=9007199254740991,I=1.7976931348623157e308,R=NaN,D=4294967295,z=D-1,L=D>>>1,N=[["ary",k],["bind",g],["bindKey",v],["curry",y],["curryRight",w],["flip",S],["partial",$],["partialRight",x],["rearg",C]],F="[object Arguments]",U="[object Array]",V="[object AsyncFunction]",B="[object Boolean]",H="[object Date]",W="[object DOMException]",G="[object Error]",Y="[object Function]",K="[object GeneratorFunction]",J="[object Map]",Q="[object Number]",X="[object Null]",Z="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",it="[object String]",rt="[object Symbol]",ot="[object Undefined]",at="[object WeakMap]",st="[object WeakSet]",ct="[object ArrayBuffer]",lt="[object DataView]",ut="[object Float32Array]",dt="[object Float64Array]",pt="[object Int8Array]",ft="[object Int16Array]",_t="[object Int32Array]",ht="[object Uint8Array]",mt="[object Uint8ClampedArray]",gt="[object Uint16Array]",vt="[object Uint32Array]",bt=/\b__p \+= '';/g,yt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$t=/&(?:amp|lt|gt|quot|#39);/g,xt=/[&<>"']/g,kt=RegExp($t.source),Ct=RegExp(xt.source),St=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,Et=/<%=([\s\S]+?)%>/g,jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ot=/^\w*$/,Tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qt=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(qt.source),Pt=/^\s+|\s+$/g,It=/^\s+/,Rt=/\s+$/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,zt=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,Nt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ft=/\\(\\)?/g,Ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vt=/\w*$/,Bt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,Gt=/^0o[0-7]+$/i,Yt=/^(?:0|[1-9]\d*)$/,Kt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jt=/($^)/,Qt=/['\n\r\u2028\u2029\\]/g,Xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Zt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Zt+"]",ne="["+Xt+"]",ie="\\d+",re="[\\u2700-\\u27bf]",oe="[a-z\\xdf-\\xf6\\xf8-\\xff]",ae="[^\\ud800-\\udfff"+Zt+ie+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",se="\\ud83c[\\udffb-\\udfff]",ce="[^\\ud800-\\udfff]",le="(?:\\ud83c[\\udde6-\\uddff]){2}",ue="[\\ud800-\\udbff][\\udc00-\\udfff]",de="[A-Z\\xc0-\\xd6\\xd8-\\xde]",pe="(?:"+oe+"|"+ae+")",fe="(?:"+de+"|"+ae+")",_e="(?:"+ne+"|"+se+")"+"?",he="[\\ufe0e\\ufe0f]?"+_e+("(?:\\u200d(?:"+[ce,le,ue].join("|")+")[\\ufe0e\\ufe0f]?"+_e+")*"),me="(?:"+[re,le,ue].join("|")+")"+he,ge="(?:"+[ce+ne+"?",ne,le,ue,te].join("|")+")",ve=RegExp("[']","g"),be=RegExp(ne,"g"),ye=RegExp(se+"(?="+se+")|"+ge+he,"g"),we=RegExp([de+"?"+oe+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[ee,de,"$"].join("|")+")",fe+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[ee,de+pe,"$"].join("|")+")",de+"?"+pe+"+(?:['](?:d|ll|m|re|s|t|ve))?",de+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ie,me].join("|"),"g"),$e=RegExp("[\\u200d\\ud800-\\udfff"+Xt+"\\ufe0e\\ufe0f]"),xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ke=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ce=-1,Se={};Se[ut]=Se[dt]=Se[pt]=Se[ft]=Se[_t]=Se[ht]=Se[mt]=Se[gt]=Se[vt]=!0,Se[F]=Se[U]=Se[ct]=Se[B]=Se[lt]=Se[H]=Se[G]=Se[Y]=Se[J]=Se[Q]=Se[Z]=Se[et]=Se[nt]=Se[it]=Se[at]=!1;var Ae={};Ae[F]=Ae[U]=Ae[ct]=Ae[lt]=Ae[B]=Ae[H]=Ae[ut]=Ae[dt]=Ae[pt]=Ae[ft]=Ae[_t]=Ae[J]=Ae[Q]=Ae[Z]=Ae[et]=Ae[nt]=Ae[it]=Ae[rt]=Ae[ht]=Ae[mt]=Ae[gt]=Ae[vt]=!0,Ae[G]=Ae[Y]=Ae[at]=!1;var Ee={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},je=parseFloat,Oe=parseInt,Te="object"==typeof t&&t&&t.Object===Object&&t,qe="object"==typeof self&&self&&self.Object===Object&&self,Me=Te||qe||Function("return this")(),Pe=e&&!e.nodeType&&e,Ie=Pe&&"object"==typeof i&&i&&!i.nodeType&&i,Re=Ie&&Ie.exports===Pe,De=Re&&Te.process,ze=function(){try{var t=Ie&&Ie.require&&Ie.require("util").types;return t||De&&De.binding&&De.binding("util")}catch(t){}}(),Le=ze&&ze.isArrayBuffer,Ne=ze&&ze.isDate,Fe=ze&&ze.isMap,Ue=ze&&ze.isRegExp,Ve=ze&&ze.isSet,Be=ze&&ze.isTypedArray;function He(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function We(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function Ge(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Ye(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ke(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Je(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function Qe(t,e){return!!(null==t?0:t.length)&&cn(t,e,0)>-1}function Xe(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Ze(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function tn(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function en(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function nn(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function rn(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var on=pn("length");function an(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function sn(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function cn(t,e,n){return e==e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):sn(t,un,n)}function ln(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function un(t){return t!=t}function dn(t,e){var n=null==t?0:t.length;return n?hn(t,e)/n:R}function pn(t){return function(e){return null==e?o:e[t]}}function fn(t){return function(e){return null==t?o:t[e]}}function _n(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function hn(t,e){for(var n,i=-1,r=t.length;++i<r;){var a=e(t[i]);a!==o&&(n=n===o?a:n+a)}return n}function mn(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function gn(t){return function(e){return t(e)}}function vn(t,e){return Ze(e,function(e){return t[e]})}function bn(t,e){return t.has(e)}function yn(t,e){for(var n=-1,i=t.length;++n<i&&cn(e,t[n],0)>-1;);return n}function wn(t,e){for(var n=t.length;n--&&cn(e,t[n],0)>-1;);return n}var $n=fn({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),xn=fn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function kn(t){return"\\"+Ee[t]}function Cn(t){return $e.test(t)}function Sn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function An(t,e){return function(n){return t(e(n))}}function En(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n];a!==e&&a!==d||(t[n]=d,o[r++]=n)}return o}function jn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function On(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Tn(t){return Cn(t)?function(t){var e=ye.lastIndex=0;for(;ye.test(t);)++e;return e}(t):on(t)}function qn(t){return Cn(t)?function(t){return t.match(ye)||[]}(t):function(t){return t.split("")}(t)}var Mn=fn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Pn=function t(e){var n,i=(e=null==e?Me:Pn.defaults(Me.Object(),e,Pn.pick(Me,ke))).Array,r=e.Date,Xt=e.Error,Zt=e.Function,te=e.Math,ee=e.Object,ne=e.RegExp,ie=e.String,re=e.TypeError,oe=i.prototype,ae=Zt.prototype,se=ee.prototype,ce=e["__core-js_shared__"],le=ae.toString,ue=se.hasOwnProperty,de=0,pe=(n=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",fe=se.toString,_e=le.call(ee),he=Me._,me=ne("^"+le.call(ue).replace(qt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=Re?e.Buffer:o,ye=e.Symbol,$e=e.Uint8Array,Ee=ge?ge.allocUnsafe:o,Te=An(ee.getPrototypeOf,ee),qe=ee.create,Pe=se.propertyIsEnumerable,Ie=oe.splice,De=ye?ye.isConcatSpreadable:o,ze=ye?ye.iterator:o,on=ye?ye.toStringTag:o,fn=function(){try{var t=Lo(ee,"defineProperty");return t({},"",{}),t}catch(t){}}(),In=e.clearTimeout!==Me.clearTimeout&&e.clearTimeout,Rn=r&&r.now!==Me.Date.now&&r.now,Dn=e.setTimeout!==Me.setTimeout&&e.setTimeout,zn=te.ceil,Ln=te.floor,Nn=ee.getOwnPropertySymbols,Fn=ge?ge.isBuffer:o,Un=e.isFinite,Vn=oe.join,Bn=An(ee.keys,ee),Hn=te.max,Wn=te.min,Gn=r.now,Yn=e.parseInt,Kn=te.random,Jn=oe.reverse,Qn=Lo(e,"DataView"),Xn=Lo(e,"Map"),Zn=Lo(e,"Promise"),ti=Lo(e,"Set"),ei=Lo(e,"WeakMap"),ni=Lo(ee,"create"),ii=ei&&new ei,ri={},oi=da(Qn),ai=da(Xn),si=da(Zn),ci=da(ti),li=da(ei),ui=ye?ye.prototype:o,di=ui?ui.valueOf:o,pi=ui?ui.toString:o;function fi(t){if(Es(t)&&!gs(t)&&!(t instanceof gi)){if(t instanceof mi)return t;if(ue.call(t,"__wrapped__"))return pa(t)}return new mi(t)}var _i=function(){function t(){}return function(e){if(!As(e))return{};if(qe)return qe(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function hi(){}function mi(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function gi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=D,this.__views__=[]}function vi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function bi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function yi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function wi(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new yi;++e<n;)this.add(t[e])}function $i(t){var e=this.__data__=new bi(t);this.size=e.size}function xi(t,e){var n=gs(t),i=!n&&ms(t),r=!n&&!i&&ws(t),o=!n&&!i&&!r&&Rs(t),a=n||i||r||o,s=a?mn(t.length,ie):[],c=s.length;for(var l in t)!e&&!ue.call(t,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Wo(l,c))||s.push(l);return s}function ki(t){var e=t.length;return e?t[wr(0,e-1)]:o}function Ci(t,e){return ca(no(t),Pi(e,0,t.length))}function Si(t){return ca(no(t))}function Ai(t,e,n){(n===o||fs(t[e],n))&&(n!==o||e in t)||qi(t,e,n)}function Ei(t,e,n){var i=t[e];ue.call(t,e)&&fs(i,n)&&(n!==o||e in t)||qi(t,e,n)}function ji(t,e){for(var n=t.length;n--;)if(fs(t[n][0],e))return n;return-1}function Oi(t,e,n,i){return Li(t,function(t,r,o){e(i,t,n(t),o)}),i}function Ti(t,e){return t&&io(e,rc(e),t)}function qi(t,e,n){"__proto__"==e&&fn?fn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Mi(t,e){for(var n=-1,r=e.length,a=i(r),s=null==t;++n<r;)a[n]=s?o:Zs(t,e[n]);return a}function Pi(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function Ii(t,e,n,i,r,a){var s,c=e&p,l=e&f,u=e&_;if(n&&(s=r?n(t,i,r,a):n(t)),s!==o)return s;if(!As(t))return t;var d=gs(t);if(d){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ue.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!c)return no(t,s)}else{var h=Uo(t),m=h==Y||h==K;if(ws(t))return Jr(t,c);if(h==Z||h==F||m&&!r){if(s=l||m?{}:Bo(t),!c)return l?function(t,e){return io(t,Fo(t),e)}(t,function(t,e){return t&&io(e,oc(e),t)}(s,t)):function(t,e){return io(t,No(t),e)}(t,Ti(s,t))}else{if(!Ae[h])return r?t:{};s=function(t,e,n){var i,r,o,a=t.constructor;switch(e){case ct:return Qr(t);case B:case H:return new a(+t);case lt:return function(t,e){var n=e?Qr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ut:case dt:case pt:case ft:case _t:case ht:case mt:case gt:case vt:return Xr(t,n);case J:return new a;case Q:case it:return new a(t);case et:return(o=new(r=t).constructor(r.source,Vt.exec(r))).lastIndex=r.lastIndex,o;case nt:return new a;case rt:return i=t,di?ee(di.call(i)):{}}}(t,h,c)}}a||(a=new $i);var g=a.get(t);if(g)return g;a.set(t,s),Ms(t)?t.forEach(function(i){s.add(Ii(i,e,n,i,t,a))}):js(t)&&t.forEach(function(i,r){s.set(r,Ii(i,e,n,r,t,a))});var v=d?o:(u?l?qo:To:l?oc:rc)(t);return Ge(v||t,function(i,r){v&&(i=t[r=i]),Ei(s,r,Ii(i,e,n,r,t,a))}),s}function Ri(t,e,n){var i=n.length;if(null==t)return!i;for(t=ee(t);i--;){var r=n[i],a=e[r],s=t[r];if(s===o&&!(r in t)||!a(s))return!1}return!0}function Di(t,e,n){if("function"!=typeof t)throw new re(c);return ra(function(){t.apply(o,n)},e)}function zi(t,e,n,i){var r=-1,o=Qe,s=!0,c=t.length,l=[],u=e.length;if(!c)return l;n&&(e=Ze(e,gn(n))),i?(o=Xe,s=!1):e.length>=a&&(o=bn,s=!1,e=new wi(e));t:for(;++r<c;){var d=t[r],p=null==n?d:n(d);if(d=i||0!==d?d:0,s&&p==p){for(var f=u;f--;)if(e[f]===p)continue t;l.push(d)}else o(e,p,i)||l.push(d)}return l}fi.templateSettings={escape:St,evaluate:At,interpolate:Et,variable:"",imports:{_:fi}},fi.prototype=hi.prototype,fi.prototype.constructor=fi,mi.prototype=_i(hi.prototype),mi.prototype.constructor=mi,gi.prototype=_i(hi.prototype),gi.prototype.constructor=gi,vi.prototype.clear=function(){this.__data__=ni?ni(null):{},this.size=0},vi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},vi.prototype.get=function(t){var e=this.__data__;if(ni){var n=e[t];return n===l?o:n}return ue.call(e,t)?e[t]:o},vi.prototype.has=function(t){var e=this.__data__;return ni?e[t]!==o:ue.call(e,t)},vi.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ni&&e===o?l:e,this},bi.prototype.clear=function(){this.__data__=[],this.size=0},bi.prototype.delete=function(t){var e=this.__data__,n=ji(e,t);return!(n<0||(n==e.length-1?e.pop():Ie.call(e,n,1),--this.size,0))},bi.prototype.get=function(t){var e=this.__data__,n=ji(e,t);return n<0?o:e[n][1]},bi.prototype.has=function(t){return ji(this.__data__,t)>-1},bi.prototype.set=function(t,e){var n=this.__data__,i=ji(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},yi.prototype.clear=function(){this.size=0,this.__data__={hash:new vi,map:new(Xn||bi),string:new vi}},yi.prototype.delete=function(t){var e=Do(this,t).delete(t);return this.size-=e?1:0,e},yi.prototype.get=function(t){return Do(this,t).get(t)},yi.prototype.has=function(t){return Do(this,t).has(t)},yi.prototype.set=function(t,e){var n=Do(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},wi.prototype.add=wi.prototype.push=function(t){return this.__data__.set(t,l),this},wi.prototype.has=function(t){return this.__data__.has(t)},$i.prototype.clear=function(){this.__data__=new bi,this.size=0},$i.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},$i.prototype.get=function(t){return this.__data__.get(t)},$i.prototype.has=function(t){return this.__data__.has(t)},$i.prototype.set=function(t,e){var n=this.__data__;if(n instanceof bi){var i=n.__data__;if(!Xn||i.length<a-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new yi(i)}return n.set(t,e),this.size=n.size,this};var Li=ao(Gi),Ni=ao(Yi,!0);function Fi(t,e){var n=!0;return Li(t,function(t,i,r){return n=!!e(t,i,r)}),n}function Ui(t,e,n){for(var i=-1,r=t.length;++i<r;){var a=t[i],s=e(a);if(null!=s&&(c===o?s==s&&!Is(s):n(s,c)))var c=s,l=a}return l}function Vi(t,e){var n=[];return Li(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Bi(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=Ho),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Bi(s,e-1,n,i,r):tn(r,s):i||(r[r.length]=s)}return r}var Hi=so(),Wi=so(!0);function Gi(t,e){return t&&Hi(t,e,rc)}function Yi(t,e){return t&&Wi(t,e,rc)}function Ki(t,e){return Je(e,function(e){return ks(t[e])})}function Ji(t,e){for(var n=0,i=(e=Wr(e,t)).length;null!=t&&n<i;)t=t[ua(e[n++])];return n&&n==i?t:o}function Qi(t,e,n){var i=e(t);return gs(t)?i:tn(i,n(t))}function Xi(t){return null==t?t===o?ot:X:on&&on in ee(t)?function(t){var e=ue.call(t,on),n=t[on];try{t[on]=o;var i=!0}catch(t){}var r=fe.call(t);return i&&(e?t[on]=n:delete t[on]),r}(t):function(t){return fe.call(t)}(t)}function Zi(t,e){return t>e}function tr(t,e){return null!=t&&ue.call(t,e)}function er(t,e){return null!=t&&e in ee(t)}function nr(t,e,n){for(var r=n?Xe:Qe,a=t[0].length,s=t.length,c=s,l=i(s),u=1/0,d=[];c--;){var p=t[c];c&&e&&(p=Ze(p,gn(e))),u=Wn(p.length,u),l[c]=!n&&(e||a>=120&&p.length>=120)?new wi(c&&p):o}p=t[0];var f=-1,_=l[0];t:for(;++f<a&&d.length<u;){var h=p[f],m=e?e(h):h;if(h=n||0!==h?h:0,!(_?bn(_,m):r(d,m,n))){for(c=s;--c;){var g=l[c];if(!(g?bn(g,m):r(t[c],m,n)))continue t}_&&_.push(m),d.push(h)}}return d}function ir(t,e,n){var i=null==(t=ea(t,e=Wr(e,t)))?t:t[ua(xa(e))];return null==i?o:He(i,t,n)}function rr(t){return Es(t)&&Xi(t)==F}function or(t,e,n,i,r){return t===e||(null==t||null==e||!Es(t)&&!Es(e)?t!=t&&e!=e:function(t,e,n,i,r,a){var s=gs(t),c=gs(e),l=s?U:Uo(t),u=c?U:Uo(e),d=(l=l==F?Z:l)==Z,p=(u=u==F?Z:u)==Z,f=l==u;if(f&&ws(t)){if(!ws(e))return!1;s=!0,d=!1}if(f&&!d)return a||(a=new $i),s||Rs(t)?jo(t,e,n,i,r,a):function(t,e,n,i,r,o,a){switch(n){case lt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ct:return!(t.byteLength!=e.byteLength||!o(new $e(t),new $e(e)));case B:case H:case Q:return fs(+t,+e);case G:return t.name==e.name&&t.message==e.message;case et:case it:return t==e+"";case J:var s=Sn;case nt:var c=i&h;if(s||(s=jn),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;i|=m,a.set(t,e);var u=jo(s(t),s(e),i,r,o,a);return a.delete(t),u;case rt:if(di)return di.call(t)==di.call(e)}return!1}(t,e,l,n,i,r,a);if(!(n&h)){var _=d&&ue.call(t,"__wrapped__"),g=p&&ue.call(e,"__wrapped__");if(_||g){var v=_?t.value():t,b=g?e.value():e;return a||(a=new $i),r(v,b,n,i,a)}}return!!f&&(a||(a=new $i),function(t,e,n,i,r,a){var s=n&h,c=To(t),l=c.length,u=To(e).length;if(l!=u&&!s)return!1;for(var d=l;d--;){var p=c[d];if(!(s?p in e:ue.call(e,p)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var _=!0;a.set(t,e),a.set(e,t);for(var m=s;++d<l;){p=c[d];var g=t[p],v=e[p];if(i)var b=s?i(v,g,p,e,t,a):i(g,v,p,t,e,a);if(!(b===o?g===v||r(g,v,n,i,a):b)){_=!1;break}m||(m="constructor"==p)}if(_&&!m){var y=t.constructor,w=e.constructor;y!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w)&&(_=!1)}return a.delete(t),a.delete(e),_}(t,e,n,i,r,a))}(t,e,n,i,or,r))}function ar(t,e,n,i){var r=n.length,a=r,s=!i;if(null==t)return!a;for(t=ee(t);r--;){var c=n[r];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++r<a;){var l=(c=n[r])[0],u=t[l],d=c[1];if(s&&c[2]){if(u===o&&!(l in t))return!1}else{var p=new $i;if(i)var f=i(u,d,l,t,e,p);if(!(f===o?or(d,u,h|m,i,p):f))return!1}}return!0}function sr(t){return!(!As(t)||(e=t,pe&&pe in e))&&(ks(t)?me:Wt).test(da(t));var e}function cr(t){return"function"==typeof t?t:null==t?Oc:"object"==typeof t?gs(t)?_r(t[0],t[1]):fr(t):Lc(t)}function lr(t){if(!Qo(t))return Bn(t);var e=[];for(var n in ee(t))ue.call(t,n)&&"constructor"!=n&&e.push(n);return e}function ur(t){if(!As(t))return function(t){var e=[];if(null!=t)for(var n in ee(t))e.push(n);return e}(t);var e=Qo(t),n=[];for(var i in t)("constructor"!=i||!e&&ue.call(t,i))&&n.push(i);return n}function dr(t,e){return t<e}function pr(t,e){var n=-1,r=bs(t)?i(t.length):[];return Li(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function fr(t){var e=zo(t);return 1==e.length&&e[0][2]?Zo(e[0][0],e[0][1]):function(n){return n===t||ar(n,t,e)}}function _r(t,e){return Yo(t)&&Xo(e)?Zo(ua(t),e):function(n){var i=Zs(n,t);return i===o&&i===e?tc(n,t):or(e,i,h|m)}}function hr(t,e,n,i,r){t!==e&&Hi(e,function(a,s){if(r||(r=new $i),As(a))!function(t,e,n,i,r,a,s){var c=na(t,n),l=na(e,n),u=s.get(l);if(u)Ai(t,n,u);else{var d=a?a(c,l,n+"",t,e,s):o,p=d===o;if(p){var f=gs(l),_=!f&&ws(l),h=!f&&!_&&Rs(l);d=l,f||_||h?gs(c)?d=c:ys(c)?d=no(c):_?(p=!1,d=Jr(l,!0)):h?(p=!1,d=Xr(l,!0)):d=[]:Ts(l)||ms(l)?(d=c,ms(c)?d=Bs(c):As(c)&&!ks(c)||(d=Bo(l))):p=!1}p&&(s.set(l,d),r(d,l,i,a,s),s.delete(l)),Ai(t,n,d)}}(t,e,s,n,hr,i,r);else{var c=i?i(na(t,s),a,s+"",t,e,r):o;c===o&&(c=a),Ai(t,s,c)}},oc)}function mr(t,e){var n=t.length;if(n)return Wo(e+=e<0?n:0,n)?t[e]:o}function gr(t,e,n){var i=-1;return e=Ze(e.length?e:[Oc],gn(Ro())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(pr(t,function(t,n,r){return{criteria:Ze(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var c=Zr(r[i],o[i]);if(c){if(i>=s)return c;var l=n[i];return c*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)})}function vr(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=Ji(t,a);n(s,a)&&Sr(o,Wr(a,t),s)}return o}function br(t,e,n,i){var r=i?ln:cn,o=-1,a=e.length,s=t;for(t===e&&(e=no(e)),n&&(s=Ze(t,gn(n)));++o<a;)for(var c=0,l=e[o],u=n?n(l):l;(c=r(s,u,c,i))>-1;)s!==t&&Ie.call(s,c,1),Ie.call(t,c,1);return t}function yr(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;Wo(r)?Ie.call(t,r,1):zr(t,r)}}return t}function wr(t,e){return t+Ln(Kn()*(e-t+1))}function $r(t,e){var n="";if(!t||e<1||e>P)return n;do{e%2&&(n+=t),(e=Ln(e/2))&&(t+=t)}while(e);return n}function xr(t,e){return oa(ta(t,e,Oc),t+"")}function kr(t){return ki(fc(t))}function Cr(t,e){var n=fc(t);return ca(n,Pi(e,0,n.length))}function Sr(t,e,n,i){if(!As(t))return t;for(var r=-1,a=(e=Wr(e,t)).length,s=a-1,c=t;null!=c&&++r<a;){var l=ua(e[r]),u=n;if(r!=s){var d=c[l];(u=i?i(d,l,c):o)===o&&(u=As(d)?d:Wo(e[r+1])?[]:{})}Ei(c,l,u),c=c[l]}return t}var Ar=ii?function(t,e){return ii.set(t,e),t}:Oc,Er=fn?function(t,e){return fn(t,"toString",{configurable:!0,enumerable:!1,value:Ac(e),writable:!0})}:Oc;function jr(t){return ca(fc(t))}function Or(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=i(o);++r<o;)a[r]=t[r+e];return a}function Tr(t,e){var n;return Li(t,function(t,i,r){return!(n=e(t,i,r))}),!!n}function qr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=L){for(;i<r;){var o=i+r>>>1,a=t[o];null!==a&&!Is(a)&&(n?a<=e:a<e)?i=o+1:r=o}return r}return Mr(t,e,Oc,n)}function Mr(t,e,n,i){e=n(e);for(var r=0,a=null==t?0:t.length,s=e!=e,c=null===e,l=Is(e),u=e===o;r<a;){var d=Ln((r+a)/2),p=n(t[d]),f=p!==o,_=null===p,h=p==p,m=Is(p);if(s)var g=i||h;else g=u?h&&(i||f):c?h&&f&&(i||!_):l?h&&f&&!_&&(i||!m):!_&&!m&&(i?p<=e:p<e);g?r=d+1:a=d}return Wn(a,z)}function Pr(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!fs(s,c)){var c=s;o[r++]=0===a?0:a}}return o}function Ir(t){return"number"==typeof t?t:Is(t)?R:+t}function Rr(t){if("string"==typeof t)return t;if(gs(t))return Ze(t,Rr)+"";if(Is(t))return pi?pi.call(t):"";var e=t+"";return"0"==e&&1/t==-M?"-0":e}function Dr(t,e,n){var i=-1,r=Qe,o=t.length,s=!0,c=[],l=c;if(n)s=!1,r=Xe;else if(o>=a){var u=e?null:xo(t);if(u)return jn(u);s=!1,r=bn,l=new wi}else l=e?[]:c;t:for(;++i<o;){var d=t[i],p=e?e(d):d;if(d=n||0!==d?d:0,s&&p==p){for(var f=l.length;f--;)if(l[f]===p)continue t;e&&l.push(p),c.push(d)}else r(l,p,n)||(l!==c&&l.push(p),c.push(d))}return c}function zr(t,e){return null==(t=ea(t,e=Wr(e,t)))||delete t[ua(xa(e))]}function Lr(t,e,n,i){return Sr(t,e,n(Ji(t,e)),i)}function Nr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?Or(t,i?0:o,i?o+1:r):Or(t,i?o+1:0,i?r:o)}function Fr(t,e){var n=t;return n instanceof gi&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function Ur(t,e,n){var r=t.length;if(r<2)return r?Dr(t[0]):[];for(var o=-1,a=i(r);++o<r;)for(var s=t[o],c=-1;++c<r;)c!=o&&(a[o]=zi(a[o]||s,t[c],e,n));return Dr(Bi(a,1),e,n)}function Vr(t,e,n){for(var i=-1,r=t.length,a=e.length,s={};++i<r;){var c=i<a?e[i]:o;n(s,t[i],c)}return s}function Br(t){return ys(t)?t:[]}function Hr(t){return"function"==typeof t?t:Oc}function Wr(t,e){return gs(t)?t:Yo(t,e)?[t]:la(Hs(t))}var Gr=xr;function Yr(t,e,n){var i=t.length;return n=n===o?i:n,!e&&n>=i?t:Or(t,e,n)}var Kr=In||function(t){return Me.clearTimeout(t)};function Jr(t,e){if(e)return t.slice();var n=t.length,i=Ee?Ee(n):new t.constructor(n);return t.copy(i),i}function Qr(t){var e=new t.constructor(t.byteLength);return new $e(e).set(new $e(t)),e}function Xr(t,e){var n=e?Qr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Zr(t,e){if(t!==e){var n=t!==o,i=null===t,r=t==t,a=Is(t),s=e!==o,c=null===e,l=e==e,u=Is(e);if(!c&&!u&&!a&&t>e||a&&s&&l&&!c&&!u||i&&s&&l||!n&&l||!r)return 1;if(!i&&!a&&!u&&t<e||u&&n&&r&&!i&&!a||c&&n&&r||!s&&r||!l)return-1}return 0}function to(t,e,n,r){for(var o=-1,a=t.length,s=n.length,c=-1,l=e.length,u=Hn(a-s,0),d=i(l+u),p=!r;++c<l;)d[c]=e[c];for(;++o<s;)(p||o<a)&&(d[n[o]]=t[o]);for(;u--;)d[c++]=t[o++];return d}function eo(t,e,n,r){for(var o=-1,a=t.length,s=-1,c=n.length,l=-1,u=e.length,d=Hn(a-c,0),p=i(d+u),f=!r;++o<d;)p[o]=t[o];for(var _=o;++l<u;)p[_+l]=e[l];for(;++s<c;)(f||o<a)&&(p[_+n[s]]=t[o++]);return p}function no(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function io(t,e,n,i){var r=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var c=e[a],l=i?i(n[c],t[c],c,n,t):o;l===o&&(l=t[c]),r?qi(n,c,l):Ei(n,c,l)}return n}function ro(t,e){return function(n,i){var r=gs(n)?We:Oi,o=e?e():{};return r(n,t,Ro(i,2),o)}}function oo(t){return xr(function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:o,s=r>2?n[2]:o;for(a=t.length>3&&"function"==typeof a?(r--,a):o,s&&Go(n[0],n[1],s)&&(a=r<3?o:a,r=1),e=ee(e);++i<r;){var c=n[i];c&&t(e,c,i,a)}return e})}function ao(t,e){return function(n,i){if(null==n)return n;if(!bs(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=ee(n);(e?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function so(t){return function(e,n,i){for(var r=-1,o=ee(e),a=i(e),s=a.length;s--;){var c=a[t?s:++r];if(!1===n(o[c],c,o))break}return e}}function co(t){return function(e){var n=Cn(e=Hs(e))?qn(e):o,i=n?n[0]:e.charAt(0),r=n?Yr(n,1).join(""):e.slice(1);return i[t]()+r}}function lo(t){return function(e){return en(kc(mc(e).replace(ve,"")),t,"")}}function uo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=_i(t.prototype),i=t.apply(n,e);return As(i)?i:n}}function po(t){return function(e,n,i){var r=ee(e);if(!bs(e)){var a=Ro(n,3);e=rc(e),n=function(t){return a(r[t],t,r)}}var s=t(e,n,i);return s>-1?r[a?e[s]:s]:o}}function fo(t){return Oo(function(e){var n=e.length,i=n,r=mi.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new re(c);if(r&&!s&&"wrapper"==Po(a))var s=new mi([],!0)}for(i=s?i:n;++i<n;){var l=Po(a=e[i]),u="wrapper"==l?Mo(a):o;s=u&&Ko(u[0])&&u[1]==(k|y|$|C)&&!u[4].length&&1==u[9]?s[Po(u[0])].apply(s,u[3]):1==a.length&&Ko(a)?s[l]():s.thru(a)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&gs(i))return s.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}})}function _o(t,e,n,r,a,s,c,l,u,d){var p=e&k,f=e&g,_=e&v,h=e&(y|w),m=e&S,b=_?o:uo(t);return function g(){for(var v=arguments.length,y=i(v),w=v;w--;)y[w]=arguments[w];if(h)var $=Io(g),x=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(y,$);if(r&&(y=to(y,r,a,h)),s&&(y=eo(y,s,c,h)),v-=x,h&&v<d){var k=En(y,$);return wo(t,e,_o,g.placeholder,n,y,k,l,u,d-v)}var C=f?n:this,S=_?C[t]:t;return v=y.length,l?y=function(t,e){for(var n=t.length,i=Wn(e.length,n),r=no(t);i--;){var a=e[i];t[i]=Wo(a,n)?r[a]:o}return t}(y,l):m&&v>1&&y.reverse(),p&&u<v&&(y.length=u),this&&this!==Me&&this instanceof g&&(S=b||uo(S)),S.apply(C,y)}}function ho(t,e){return function(n,i){return function(t,e,n,i){return Gi(t,function(t,r,o){e(i,n(t),r,o)}),i}(n,t,e(i),{})}}function mo(t,e){return function(n,i){var r;if(n===o&&i===o)return e;if(n!==o&&(r=n),i!==o){if(r===o)return i;"string"==typeof n||"string"==typeof i?(n=Rr(n),i=Rr(i)):(n=Ir(n),i=Ir(i)),r=t(n,i)}return r}}function go(t){return Oo(function(e){return e=Ze(e,gn(Ro())),xr(function(n){var i=this;return t(e,function(t){return He(t,i,n)})})})}function vo(t,e){var n=(e=e===o?" ":Rr(e)).length;if(n<2)return n?$r(e,t):e;var i=$r(e,zn(t/Tn(e)));return Cn(e)?Yr(qn(i),0,t).join(""):i.slice(0,t)}function bo(t){return function(e,n,r){return r&&"number"!=typeof r&&Go(e,n,r)&&(n=r=o),e=Ns(e),n===o?(n=e,e=0):n=Ns(n),function(t,e,n,r){for(var o=-1,a=Hn(zn((e-t)/(n||1)),0),s=i(a);a--;)s[r?a:++o]=t,t+=n;return s}(e,n,r=r===o?e<n?1:-1:Ns(r),t)}}function yo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Vs(e),n=Vs(n)),t(e,n)}}function wo(t,e,n,i,r,a,s,c,l,u){var d=e&y;e|=d?$:x,(e&=~(d?x:$))&b||(e&=~(g|v));var p=[t,e,r,d?a:o,d?s:o,d?o:a,d?o:s,c,l,u],f=n.apply(o,p);return Ko(t)&&ia(f,p),f.placeholder=i,aa(f,t,e)}function $o(t){var e=te[t];return function(t,n){if(t=Vs(t),(n=null==n?0:Wn(Fs(n),292))&&Un(t)){var i=(Hs(t)+"e").split("e");return+((i=(Hs(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var xo=ti&&1/jn(new ti([,-0]))[1]==M?function(t){return new ti(t)}:Ic;function ko(t){return function(e){var n=Uo(e);return n==J?Sn(e):n==nt?On(e):function(t,e){return Ze(e,function(e){return[e,t[e]]})}(e,t(e))}}function Co(t,e,n,r,a,s,l,u){var p=e&v;if(!p&&"function"!=typeof t)throw new re(c);var f=r?r.length:0;if(f||(e&=~($|x),r=a=o),l=l===o?l:Hn(Fs(l),0),u=u===o?u:Fs(u),f-=a?a.length:0,e&x){var _=r,h=a;r=a=o}var m=p?o:Mo(t),S=[t,e,n,r,a,_,h,s,l,u];if(m&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<(g|v|k),a=i==k&&n==y||i==k&&n==C&&t[7].length<=e[8]||i==(k|C)&&e[7].length<=e[8]&&n==y;if(!o&&!a)return t;i&g&&(t[2]=e[2],r|=n&g?0:b);var s=e[3];if(s){var c=t[3];t[3]=c?to(c,s,e[4]):s,t[4]=c?En(t[3],d):e[4]}(s=e[5])&&(c=t[5],t[5]=c?eo(c,s,e[6]):s,t[6]=c?En(t[5],d):e[6]),(s=e[7])&&(t[7]=s),i&k&&(t[8]=null==t[8]?e[8]:Wn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(S,m),t=S[0],e=S[1],n=S[2],r=S[3],a=S[4],!(u=S[9]=S[9]===o?p?0:t.length:Hn(S[9]-f,0))&&e&(y|w)&&(e&=~(y|w)),e&&e!=g)A=e==y||e==w?function(t,e,n){var r=uo(t);return function a(){for(var s=arguments.length,c=i(s),l=s,u=Io(a);l--;)c[l]=arguments[l];var d=s<3&&c[0]!==u&&c[s-1]!==u?[]:En(c,u);return(s-=d.length)<n?wo(t,e,_o,a.placeholder,o,c,d,o,o,n-s):He(this&&this!==Me&&this instanceof a?r:t,this,c)}}(t,e,u):e!=$&&e!=(g|$)||a.length?_o.apply(o,S):function(t,e,n,r){var o=e&g,a=uo(t);return function e(){for(var s=-1,c=arguments.length,l=-1,u=r.length,d=i(u+c),p=this&&this!==Me&&this instanceof e?a:t;++l<u;)d[l]=r[l];for(;c--;)d[l++]=arguments[++s];return He(p,o?n:this,d)}}(t,e,n,r);else var A=function(t,e,n){var i=e&g,r=uo(t);return function e(){return(this&&this!==Me&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return aa((m?Ar:ia)(A,S),t,e)}function So(t,e,n,i){return t===o||fs(t,se[n])&&!ue.call(i,n)?e:t}function Ao(t,e,n,i,r,a){return As(t)&&As(e)&&(a.set(e,t),hr(t,e,o,Ao,a),a.delete(e)),t}function Eo(t){return Ts(t)?o:t}function jo(t,e,n,i,r,a){var s=n&h,c=t.length,l=e.length;if(c!=l&&!(s&&l>c))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var d=-1,p=!0,f=n&m?new wi:o;for(a.set(t,e),a.set(e,t);++d<c;){var _=t[d],g=e[d];if(i)var v=s?i(g,_,d,e,t,a):i(_,g,d,t,e,a);if(v!==o){if(v)continue;p=!1;break}if(f){if(!rn(e,function(t,e){if(!bn(f,e)&&(_===t||r(_,t,n,i,a)))return f.push(e)})){p=!1;break}}else if(_!==g&&!r(_,g,n,i,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function Oo(t){return oa(ta(t,o,va),t+"")}function To(t){return Qi(t,rc,No)}function qo(t){return Qi(t,oc,Fo)}var Mo=ii?function(t){return ii.get(t)}:Ic;function Po(t){for(var e=t.name+"",n=ri[e],i=ue.call(ri,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Io(t){return(ue.call(fi,"placeholder")?fi:t).placeholder}function Ro(){var t=fi.iteratee||Tc;return t=t===Tc?cr:t,arguments.length?t(arguments[0],arguments[1]):t}function Do(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function zo(t){for(var e=rc(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Xo(r)]}return e}function Lo(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return sr(n)?n:o}var No=Nn?function(t){return null==t?[]:(t=ee(t),Je(Nn(t),function(e){return Pe.call(t,e)}))}:Uc,Fo=Nn?function(t){for(var e=[];t;)tn(e,No(t)),t=Te(t);return e}:Uc,Uo=Xi;function Vo(t,e,n){for(var i=-1,r=(e=Wr(e,t)).length,o=!1;++i<r;){var a=ua(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&Ss(r)&&Wo(a,r)&&(gs(t)||ms(t))}function Bo(t){return"function"!=typeof t.constructor||Qo(t)?{}:_i(Te(t))}function Ho(t){return gs(t)||ms(t)||!!(De&&t&&t[De])}function Wo(t,e){var n=typeof t;return!!(e=null==e?P:e)&&("number"==n||"symbol"!=n&&Yt.test(t))&&t>-1&&t%1==0&&t<e}function Go(t,e,n){if(!As(n))return!1;var i=typeof e;return!!("number"==i?bs(n)&&Wo(e,n.length):"string"==i&&e in n)&&fs(n[e],t)}function Yo(t,e){if(gs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Is(t))||Ot.test(t)||!jt.test(t)||null!=e&&t in ee(e)}function Ko(t){var e=Po(t),n=fi[e];if("function"!=typeof n||!(e in gi.prototype))return!1;if(t===n)return!0;var i=Mo(n);return!!i&&t===i[0]}(Qn&&Uo(new Qn(new ArrayBuffer(1)))!=lt||Xn&&Uo(new Xn)!=J||Zn&&"[object Promise]"!=Uo(Zn.resolve())||ti&&Uo(new ti)!=nt||ei&&Uo(new ei)!=at)&&(Uo=function(t){var e=Xi(t),n=e==Z?t.constructor:o,i=n?da(n):"";if(i)switch(i){case oi:return lt;case ai:return J;case si:return"[object Promise]";case ci:return nt;case li:return at}return e});var Jo=ce?ks:Vc;function Qo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||se)}function Xo(t){return t==t&&!As(t)}function Zo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==o||t in ee(n))}}function ta(t,e,n){return e=Hn(e===o?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=Hn(r.length-e,0),s=i(a);++o<a;)s[o]=r[e+o];o=-1;for(var c=i(e+1);++o<e;)c[o]=r[o];return c[e]=n(s),He(t,this,c)}}function ea(t,e){return e.length<2?t:Ji(t,Or(e,0,-1))}function na(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ia=sa(Ar),ra=Dn||function(t,e){return Me.setTimeout(t,e)},oa=sa(Er);function aa(t,e,n){var i=e+"";return oa(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Dt,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Ge(N,function(n){var i="_."+n[0];e&n[1]&&!Qe(t,i)&&t.push(i)}),t.sort()}(function(t){var e=t.match(zt);return e?e[1].split(Lt):[]}(i),n)))}function sa(t){var e=0,n=0;return function(){var i=Gn(),r=O-(i-n);if(n=i,r>0){if(++e>=j)return arguments[0]}else e=0;return t.apply(o,arguments)}}function ca(t,e){var n=-1,i=t.length,r=i-1;for(e=e===o?i:e;++n<e;){var a=wr(n,r),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var la=function(t){var e=ss(t,function(t){return n.size===u&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Tt,function(t,n,i,r){e.push(i?r.replace(Ft,"$1"):n||t)}),e});function ua(t){if("string"==typeof t||Is(t))return t;var e=t+"";return"0"==e&&1/t==-M?"-0":e}function da(t){if(null!=t){try{return le.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function pa(t){if(t instanceof gi)return t.clone();var e=new mi(t.__wrapped__,t.__chain__);return e.__actions__=no(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var fa=xr(function(t,e){return ys(t)?zi(t,Bi(e,1,ys,!0)):[]}),_a=xr(function(t,e){var n=xa(e);return ys(n)&&(n=o),ys(t)?zi(t,Bi(e,1,ys,!0),Ro(n,2)):[]}),ha=xr(function(t,e){var n=xa(e);return ys(n)&&(n=o),ys(t)?zi(t,Bi(e,1,ys,!0),o,n):[]});function ma(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Fs(n);return r<0&&(r=Hn(i+r,0)),sn(t,Ro(e,3),r)}function ga(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==o&&(r=Fs(n),r=n<0?Hn(i+r,0):Wn(r,i-1)),sn(t,Ro(e,3),r,!0)}function va(t){return null!=t&&t.length?Bi(t,1):[]}function ba(t){return t&&t.length?t[0]:o}var ya=xr(function(t){var e=Ze(t,Br);return e.length&&e[0]===t[0]?nr(e):[]}),wa=xr(function(t){var e=xa(t),n=Ze(t,Br);return e===xa(n)?e=o:n.pop(),n.length&&n[0]===t[0]?nr(n,Ro(e,2)):[]}),$a=xr(function(t){var e=xa(t),n=Ze(t,Br);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?nr(n,o,e):[]});function xa(t){var e=null==t?0:t.length;return e?t[e-1]:o}var ka=xr(Ca);function Ca(t,e){return t&&t.length&&e&&e.length?br(t,e):t}var Sa=Oo(function(t,e){var n=null==t?0:t.length,i=Mi(t,e);return yr(t,Ze(e,function(t){return Wo(t,n)?+t:t}).sort(Zr)),i});function Aa(t){return null==t?t:Jn.call(t)}var Ea=xr(function(t){return Dr(Bi(t,1,ys,!0))}),ja=xr(function(t){var e=xa(t);return ys(e)&&(e=o),Dr(Bi(t,1,ys,!0),Ro(e,2))}),Oa=xr(function(t){var e=xa(t);return e="function"==typeof e?e:o,Dr(Bi(t,1,ys,!0),o,e)});function Ta(t){if(!t||!t.length)return[];var e=0;return t=Je(t,function(t){if(ys(t))return e=Hn(t.length,e),!0}),mn(e,function(e){return Ze(t,pn(e))})}function qa(t,e){if(!t||!t.length)return[];var n=Ta(t);return null==e?n:Ze(n,function(t){return He(e,o,t)})}var Ma=xr(function(t,e){return ys(t)?zi(t,e):[]}),Pa=xr(function(t){return Ur(Je(t,ys))}),Ia=xr(function(t){var e=xa(t);return ys(e)&&(e=o),Ur(Je(t,ys),Ro(e,2))}),Ra=xr(function(t){var e=xa(t);return e="function"==typeof e?e:o,Ur(Je(t,ys),o,e)}),Da=xr(Ta);var za=xr(function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,qa(t,n)});function La(t){var e=fi(t);return e.__chain__=!0,e}function Na(t,e){return e(t)}var Fa=Oo(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Mi(e,t)};return!(e>1||this.__actions__.length)&&i instanceof gi&&Wo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:Na,args:[r],thisArg:o}),new mi(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(o),t})):this.thru(r)});var Ua=ro(function(t,e,n){ue.call(t,n)?++t[n]:qi(t,n,1)});var Va=po(ma),Ba=po(ga);function Ha(t,e){return(gs(t)?Ge:Li)(t,Ro(e,3))}function Wa(t,e){return(gs(t)?Ye:Ni)(t,Ro(e,3))}var Ga=ro(function(t,e,n){ue.call(t,n)?t[n].push(e):qi(t,n,[e])});var Ya=xr(function(t,e,n){var r=-1,o="function"==typeof e,a=bs(t)?i(t.length):[];return Li(t,function(t){a[++r]=o?He(e,t,n):ir(t,e,n)}),a}),Ka=ro(function(t,e,n){qi(t,n,e)});function Ja(t,e){return(gs(t)?Ze:pr)(t,Ro(e,3))}var Qa=ro(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Xa=xr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Go(t,e[0],e[1])?e=[]:n>2&&Go(e[0],e[1],e[2])&&(e=[e[0]]),gr(t,Bi(e,1),[])}),Za=Rn||function(){return Me.Date.now()};function ts(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Co(t,k,o,o,o,o,e)}function es(t,e){var n;if("function"!=typeof e)throw new re(c);return t=Fs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var ns=xr(function(t,e,n){var i=g;if(n.length){var r=En(n,Io(ns));i|=$}return Co(t,i,e,n,r)}),is=xr(function(t,e,n){var i=g|v;if(n.length){var r=En(n,Io(is));i|=$}return Co(e,i,t,n,r)});function rs(t,e,n){var i,r,a,s,l,u,d=0,p=!1,f=!1,_=!0;if("function"!=typeof t)throw new re(c);function h(e){var n=i,a=r;return i=r=o,d=e,s=t.apply(a,n)}function m(t){var n=t-u;return u===o||n>=e||n<0||f&&t-d>=a}function g(){var t=Za();if(m(t))return v(t);l=ra(g,function(t){var n=e-(t-u);return f?Wn(n,a-(t-d)):n}(t))}function v(t){return l=o,_&&i?h(t):(i=r=o,s)}function b(){var t=Za(),n=m(t);if(i=arguments,r=this,u=t,n){if(l===o)return function(t){return d=t,l=ra(g,e),p?h(t):s}(u);if(f)return Kr(l),l=ra(g,e),h(u)}return l===o&&(l=ra(g,e)),s}return e=Vs(e)||0,As(n)&&(p=!!n.leading,a=(f="maxWait"in n)?Hn(Vs(n.maxWait)||0,e):a,_="trailing"in n?!!n.trailing:_),b.cancel=function(){l!==o&&Kr(l),d=0,i=u=r=l=o},b.flush=function(){return l===o?s:v(Za())},b}var os=xr(function(t,e){return Di(t,1,e)}),as=xr(function(t,e,n){return Di(t,Vs(e)||0,n)});function ss(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new re(c);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(ss.Cache||yi),n}function cs(t){if("function"!=typeof t)throw new re(c);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ss.Cache=yi;var ls=Gr(function(t,e){var n=(e=1==e.length&&gs(e[0])?Ze(e[0],gn(Ro())):Ze(Bi(e,1),gn(Ro()))).length;return xr(function(i){for(var r=-1,o=Wn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return He(t,this,i)})}),us=xr(function(t,e){var n=En(e,Io(us));return Co(t,$,o,e,n)}),ds=xr(function(t,e){var n=En(e,Io(ds));return Co(t,x,o,e,n)}),ps=Oo(function(t,e){return Co(t,C,o,o,o,e)});function fs(t,e){return t===e||t!=t&&e!=e}var _s=yo(Zi),hs=yo(function(t,e){return t>=e}),ms=rr(function(){return arguments}())?rr:function(t){return Es(t)&&ue.call(t,"callee")&&!Pe.call(t,"callee")},gs=i.isArray,vs=Le?gn(Le):function(t){return Es(t)&&Xi(t)==ct};function bs(t){return null!=t&&Ss(t.length)&&!ks(t)}function ys(t){return Es(t)&&bs(t)}var ws=Fn||Vc,$s=Ne?gn(Ne):function(t){return Es(t)&&Xi(t)==H};function xs(t){if(!Es(t))return!1;var e=Xi(t);return e==G||e==W||"string"==typeof t.message&&"string"==typeof t.name&&!Ts(t)}function ks(t){if(!As(t))return!1;var e=Xi(t);return e==Y||e==K||e==V||e==tt}function Cs(t){return"number"==typeof t&&t==Fs(t)}function Ss(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=P}function As(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Es(t){return null!=t&&"object"==typeof t}var js=Fe?gn(Fe):function(t){return Es(t)&&Uo(t)==J};function Os(t){return"number"==typeof t||Es(t)&&Xi(t)==Q}function Ts(t){if(!Es(t)||Xi(t)!=Z)return!1;var e=Te(t);if(null===e)return!0;var n=ue.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&le.call(n)==_e}var qs=Ue?gn(Ue):function(t){return Es(t)&&Xi(t)==et};var Ms=Ve?gn(Ve):function(t){return Es(t)&&Uo(t)==nt};function Ps(t){return"string"==typeof t||!gs(t)&&Es(t)&&Xi(t)==it}function Is(t){return"symbol"==typeof t||Es(t)&&Xi(t)==rt}var Rs=Be?gn(Be):function(t){return Es(t)&&Ss(t.length)&&!!Se[Xi(t)]};var Ds=yo(dr),zs=yo(function(t,e){return t<=e});function Ls(t){if(!t)return[];if(bs(t))return Ps(t)?qn(t):no(t);if(ze&&t[ze])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ze]());var e=Uo(t);return(e==J?Sn:e==nt?jn:fc)(t)}function Ns(t){return t?(t=Vs(t))===M||t===-M?(t<0?-1:1)*I:t==t?t:0:0===t?t:0}function Fs(t){var e=Ns(t),n=e%1;return e==e?n?e-n:e:0}function Us(t){return t?Pi(Fs(t),0,D):0}function Vs(t){if("number"==typeof t)return t;if(Is(t))return R;if(As(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=As(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Pt,"");var n=Ht.test(t);return n||Gt.test(t)?Oe(t.slice(2),n?2:8):Bt.test(t)?R:+t}function Bs(t){return io(t,oc(t))}function Hs(t){return null==t?"":Rr(t)}var Ws=oo(function(t,e){if(Qo(e)||bs(e))io(e,rc(e),t);else for(var n in e)ue.call(e,n)&&Ei(t,n,e[n])}),Gs=oo(function(t,e){io(e,oc(e),t)}),Ys=oo(function(t,e,n,i){io(e,oc(e),t,i)}),Ks=oo(function(t,e,n,i){io(e,rc(e),t,i)}),Js=Oo(Mi);var Qs=xr(function(t,e){t=ee(t);var n=-1,i=e.length,r=i>2?e[2]:o;for(r&&Go(e[0],e[1],r)&&(i=1);++n<i;)for(var a=e[n],s=oc(a),c=-1,l=s.length;++c<l;){var u=s[c],d=t[u];(d===o||fs(d,se[u])&&!ue.call(t,u))&&(t[u]=a[u])}return t}),Xs=xr(function(t){return t.push(o,Ao),He(sc,o,t)});function Zs(t,e,n){var i=null==t?o:Ji(t,e);return i===o?n:i}function tc(t,e){return null!=t&&Vo(t,e,er)}var ec=ho(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),t[e]=n},Ac(Oc)),nc=ho(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),ue.call(t,e)?t[e].push(n):t[e]=[n]},Ro),ic=xr(ir);function rc(t){return bs(t)?xi(t):lr(t)}function oc(t){return bs(t)?xi(t,!0):ur(t)}var ac=oo(function(t,e,n){hr(t,e,n)}),sc=oo(function(t,e,n,i){hr(t,e,n,i)}),cc=Oo(function(t,e){var n={};if(null==t)return n;var i=!1;e=Ze(e,function(e){return e=Wr(e,t),i||(i=e.length>1),e}),io(t,qo(t),n),i&&(n=Ii(n,p|f|_,Eo));for(var r=e.length;r--;)zr(n,e[r]);return n});var lc=Oo(function(t,e){return null==t?{}:function(t,e){return vr(t,e,function(e,n){return tc(t,n)})}(t,e)});function uc(t,e){if(null==t)return{};var n=Ze(qo(t),function(t){return[t]});return e=Ro(e),vr(t,n,function(t,n){return e(t,n[0])})}var dc=ko(rc),pc=ko(oc);function fc(t){return null==t?[]:vn(t,rc(t))}var _c=lo(function(t,e,n){return e=e.toLowerCase(),t+(n?hc(e):e)});function hc(t){return xc(Hs(t).toLowerCase())}function mc(t){return(t=Hs(t))&&t.replace(Kt,$n).replace(be,"")}var gc=lo(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),vc=lo(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),bc=co("toLowerCase");var yc=lo(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var wc=lo(function(t,e,n){return t+(n?" ":"")+xc(e)});var $c=lo(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),xc=co("toUpperCase");function kc(t,e,n){return t=Hs(t),(e=n?o:e)===o?function(t){return xe.test(t)}(t)?function(t){return t.match(we)||[]}(t):function(t){return t.match(Nt)||[]}(t):t.match(e)||[]}var Cc=xr(function(t,e){try{return He(t,o,e)}catch(t){return xs(t)?t:new Xt(t)}}),Sc=Oo(function(t,e){return Ge(e,function(e){e=ua(e),qi(t,e,ns(t[e],t))}),t});function Ac(t){return function(){return t}}var Ec=fo(),jc=fo(!0);function Oc(t){return t}function Tc(t){return cr("function"==typeof t?t:Ii(t,p))}var qc=xr(function(t,e){return function(n){return ir(n,t,e)}}),Mc=xr(function(t,e){return function(n){return ir(t,n,e)}});function Pc(t,e,n){var i=rc(e),r=Ki(e,i);null!=n||As(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Ki(e,rc(e)));var o=!(As(n)&&"chain"in n&&!n.chain),a=ks(t);return Ge(r,function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=no(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,tn([this.value()],arguments))})}),t}function Ic(){}var Rc=go(Ze),Dc=go(Ke),zc=go(rn);function Lc(t){return Yo(t)?pn(ua(t)):function(t){return function(e){return Ji(e,t)}}(t)}var Nc=bo(),Fc=bo(!0);function Uc(){return[]}function Vc(){return!1}var Bc=mo(function(t,e){return t+e},0),Hc=$o("ceil"),Wc=mo(function(t,e){return t/e},1),Gc=$o("floor");var Yc,Kc=mo(function(t,e){return t*e},1),Jc=$o("round"),Qc=mo(function(t,e){return t-e},0);return fi.after=function(t,e){if("function"!=typeof e)throw new re(c);return t=Fs(t),function(){if(--t<1)return e.apply(this,arguments)}},fi.ary=ts,fi.assign=Ws,fi.assignIn=Gs,fi.assignInWith=Ys,fi.assignWith=Ks,fi.at=Js,fi.before=es,fi.bind=ns,fi.bindAll=Sc,fi.bindKey=is,fi.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return gs(t)?t:[t]},fi.chain=La,fi.chunk=function(t,e,n){e=(n?Go(t,e,n):e===o)?1:Hn(Fs(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var a=0,s=0,c=i(zn(r/e));a<r;)c[s++]=Or(t,a,a+=e);return c},fi.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},fi.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return tn(gs(n)?no(n):[n],Bi(e,1))},fi.cond=function(t){var e=null==t?0:t.length,n=Ro();return t=e?Ze(t,function(t){if("function"!=typeof t[1])throw new re(c);return[n(t[0]),t[1]]}):[],xr(function(n){for(var i=-1;++i<e;){var r=t[i];if(He(r[0],this,n))return He(r[1],this,n)}})},fi.conforms=function(t){return function(t){var e=rc(t);return function(n){return Ri(n,t,e)}}(Ii(t,p))},fi.constant=Ac,fi.countBy=Ua,fi.create=function(t,e){var n=_i(t);return null==e?n:Ti(n,e)},fi.curry=function t(e,n,i){var r=Co(e,y,o,o,o,o,o,n=i?o:n);return r.placeholder=t.placeholder,r},fi.curryRight=function t(e,n,i){var r=Co(e,w,o,o,o,o,o,n=i?o:n);return r.placeholder=t.placeholder,r},fi.debounce=rs,fi.defaults=Qs,fi.defaultsDeep=Xs,fi.defer=os,fi.delay=as,fi.difference=fa,fi.differenceBy=_a,fi.differenceWith=ha,fi.drop=function(t,e,n){var i=null==t?0:t.length;return i?Or(t,(e=n||e===o?1:Fs(e))<0?0:e,i):[]},fi.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Or(t,0,(e=i-(e=n||e===o?1:Fs(e)))<0?0:e):[]},fi.dropRightWhile=function(t,e){return t&&t.length?Nr(t,Ro(e,3),!0,!0):[]},fi.dropWhile=function(t,e){return t&&t.length?Nr(t,Ro(e,3),!0):[]},fi.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Go(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=Fs(n))<0&&(n=-n>r?0:r+n),(i=i===o||i>r?r:Fs(i))<0&&(i+=r),i=n>i?0:Us(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},fi.filter=function(t,e){return(gs(t)?Je:Vi)(t,Ro(e,3))},fi.flatMap=function(t,e){return Bi(Ja(t,e),1)},fi.flatMapDeep=function(t,e){return Bi(Ja(t,e),M)},fi.flatMapDepth=function(t,e,n){return n=n===o?1:Fs(n),Bi(Ja(t,e),n)},fi.flatten=va,fi.flattenDeep=function(t){return null!=t&&t.length?Bi(t,M):[]},fi.flattenDepth=function(t,e){return null!=t&&t.length?Bi(t,e=e===o?1:Fs(e)):[]},fi.flip=function(t){return Co(t,S)},fi.flow=Ec,fi.flowRight=jc,fi.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},fi.functions=function(t){return null==t?[]:Ki(t,rc(t))},fi.functionsIn=function(t){return null==t?[]:Ki(t,oc(t))},fi.groupBy=Ga,fi.initial=function(t){return null!=t&&t.length?Or(t,0,-1):[]},fi.intersection=ya,fi.intersectionBy=wa,fi.intersectionWith=$a,fi.invert=ec,fi.invertBy=nc,fi.invokeMap=Ya,fi.iteratee=Tc,fi.keyBy=Ka,fi.keys=rc,fi.keysIn=oc,fi.map=Ja,fi.mapKeys=function(t,e){var n={};return e=Ro(e,3),Gi(t,function(t,i,r){qi(n,e(t,i,r),t)}),n},fi.mapValues=function(t,e){var n={};return e=Ro(e,3),Gi(t,function(t,i,r){qi(n,i,e(t,i,r))}),n},fi.matches=function(t){return fr(Ii(t,p))},fi.matchesProperty=function(t,e){return _r(t,Ii(e,p))},fi.memoize=ss,fi.merge=ac,fi.mergeWith=sc,fi.method=qc,fi.methodOf=Mc,fi.mixin=Pc,fi.negate=cs,fi.nthArg=function(t){return t=Fs(t),xr(function(e){return mr(e,t)})},fi.omit=cc,fi.omitBy=function(t,e){return uc(t,cs(Ro(e)))},fi.once=function(t){return es(2,t)},fi.orderBy=function(t,e,n,i){return null==t?[]:(gs(e)||(e=null==e?[]:[e]),gs(n=i?o:n)||(n=null==n?[]:[n]),gr(t,e,n))},fi.over=Rc,fi.overArgs=ls,fi.overEvery=Dc,fi.overSome=zc,fi.partial=us,fi.partialRight=ds,fi.partition=Qa,fi.pick=lc,fi.pickBy=uc,fi.property=Lc,fi.propertyOf=function(t){return function(e){return null==t?o:Ji(t,e)}},fi.pull=ka,fi.pullAll=Ca,fi.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?br(t,e,Ro(n,2)):t},fi.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?br(t,e,o,n):t},fi.pullAt=Sa,fi.range=Nc,fi.rangeRight=Fc,fi.rearg=ps,fi.reject=function(t,e){return(gs(t)?Je:Vi)(t,cs(Ro(e,3)))},fi.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Ro(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return yr(t,r),n},fi.rest=function(t,e){if("function"!=typeof t)throw new re(c);return xr(t,e=e===o?e:Fs(e))},fi.reverse=Aa,fi.sampleSize=function(t,e,n){return e=(n?Go(t,e,n):e===o)?1:Fs(e),(gs(t)?Ci:Cr)(t,e)},fi.set=function(t,e,n){return null==t?t:Sr(t,e,n)},fi.setWith=function(t,e,n,i){return i="function"==typeof i?i:o,null==t?t:Sr(t,e,n,i)},fi.shuffle=function(t){return(gs(t)?Si:jr)(t)},fi.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Go(t,e,n)?(e=0,n=i):(e=null==e?0:Fs(e),n=n===o?i:Fs(n)),Or(t,e,n)):[]},fi.sortBy=Xa,fi.sortedUniq=function(t){return t&&t.length?Pr(t):[]},fi.sortedUniqBy=function(t,e){return t&&t.length?Pr(t,Ro(e,2)):[]},fi.split=function(t,e,n){return n&&"number"!=typeof n&&Go(t,e,n)&&(e=n=o),(n=n===o?D:n>>>0)?(t=Hs(t))&&("string"==typeof e||null!=e&&!qs(e))&&!(e=Rr(e))&&Cn(t)?Yr(qn(t),0,n):t.split(e,n):[]},fi.spread=function(t,e){if("function"!=typeof t)throw new re(c);return e=null==e?0:Hn(Fs(e),0),xr(function(n){var i=n[e],r=Yr(n,0,e);return i&&tn(r,i),He(t,this,r)})},fi.tail=function(t){var e=null==t?0:t.length;return e?Or(t,1,e):[]},fi.take=function(t,e,n){return t&&t.length?Or(t,0,(e=n||e===o?1:Fs(e))<0?0:e):[]},fi.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Or(t,(e=i-(e=n||e===o?1:Fs(e)))<0?0:e,i):[]},fi.takeRightWhile=function(t,e){return t&&t.length?Nr(t,Ro(e,3),!1,!0):[]},fi.takeWhile=function(t,e){return t&&t.length?Nr(t,Ro(e,3)):[]},fi.tap=function(t,e){return e(t),t},fi.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new re(c);return As(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),rs(t,e,{leading:i,maxWait:e,trailing:r})},fi.thru=Na,fi.toArray=Ls,fi.toPairs=dc,fi.toPairsIn=pc,fi.toPath=function(t){return gs(t)?Ze(t,ua):Is(t)?[t]:no(la(Hs(t)))},fi.toPlainObject=Bs,fi.transform=function(t,e,n){var i=gs(t),r=i||ws(t)||Rs(t);if(e=Ro(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:As(t)&&ks(o)?_i(Te(t)):{}}return(r?Ge:Gi)(t,function(t,i,r){return e(n,t,i,r)}),n},fi.unary=function(t){return ts(t,1)},fi.union=Ea,fi.unionBy=ja,fi.unionWith=Oa,fi.uniq=function(t){return t&&t.length?Dr(t):[]},fi.uniqBy=function(t,e){return t&&t.length?Dr(t,Ro(e,2)):[]},fi.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?Dr(t,o,e):[]},fi.unset=function(t,e){return null==t||zr(t,e)},fi.unzip=Ta,fi.unzipWith=qa,fi.update=function(t,e,n){return null==t?t:Lr(t,e,Hr(n))},fi.updateWith=function(t,e,n,i){return i="function"==typeof i?i:o,null==t?t:Lr(t,e,Hr(n),i)},fi.values=fc,fi.valuesIn=function(t){return null==t?[]:vn(t,oc(t))},fi.without=Ma,fi.words=kc,fi.wrap=function(t,e){return us(Hr(e),t)},fi.xor=Pa,fi.xorBy=Ia,fi.xorWith=Ra,fi.zip=Da,fi.zipObject=function(t,e){return Vr(t||[],e||[],Ei)},fi.zipObjectDeep=function(t,e){return Vr(t||[],e||[],Sr)},fi.zipWith=za,fi.entries=dc,fi.entriesIn=pc,fi.extend=Gs,fi.extendWith=Ys,Pc(fi,fi),fi.add=Bc,fi.attempt=Cc,fi.camelCase=_c,fi.capitalize=hc,fi.ceil=Hc,fi.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=Vs(n))==n?n:0),e!==o&&(e=(e=Vs(e))==e?e:0),Pi(Vs(t),e,n)},fi.clone=function(t){return Ii(t,_)},fi.cloneDeep=function(t){return Ii(t,p|_)},fi.cloneDeepWith=function(t,e){return Ii(t,p|_,e="function"==typeof e?e:o)},fi.cloneWith=function(t,e){return Ii(t,_,e="function"==typeof e?e:o)},fi.conformsTo=function(t,e){return null==e||Ri(t,e,rc(e))},fi.deburr=mc,fi.defaultTo=function(t,e){return null==t||t!=t?e:t},fi.divide=Wc,fi.endsWith=function(t,e,n){t=Hs(t),e=Rr(e);var i=t.length,r=n=n===o?i:Pi(Fs(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},fi.eq=fs,fi.escape=function(t){return(t=Hs(t))&&Ct.test(t)?t.replace(xt,xn):t},fi.escapeRegExp=function(t){return(t=Hs(t))&&Mt.test(t)?t.replace(qt,"\\$&"):t},fi.every=function(t,e,n){var i=gs(t)?Ke:Fi;return n&&Go(t,e,n)&&(e=o),i(t,Ro(e,3))},fi.find=Va,fi.findIndex=ma,fi.findKey=function(t,e){return an(t,Ro(e,3),Gi)},fi.findLast=Ba,fi.findLastIndex=ga,fi.findLastKey=function(t,e){return an(t,Ro(e,3),Yi)},fi.floor=Gc,fi.forEach=Ha,fi.forEachRight=Wa,fi.forIn=function(t,e){return null==t?t:Hi(t,Ro(e,3),oc)},fi.forInRight=function(t,e){return null==t?t:Wi(t,Ro(e,3),oc)},fi.forOwn=function(t,e){return t&&Gi(t,Ro(e,3))},fi.forOwnRight=function(t,e){return t&&Yi(t,Ro(e,3))},fi.get=Zs,fi.gt=_s,fi.gte=hs,fi.has=function(t,e){return null!=t&&Vo(t,e,tr)},fi.hasIn=tc,fi.head=ba,fi.identity=Oc,fi.includes=function(t,e,n,i){t=bs(t)?t:fc(t),n=n&&!i?Fs(n):0;var r=t.length;return n<0&&(n=Hn(r+n,0)),Ps(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&cn(t,e,n)>-1},fi.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Fs(n);return r<0&&(r=Hn(i+r,0)),cn(t,e,r)},fi.inRange=function(t,e,n){return e=Ns(e),n===o?(n=e,e=0):n=Ns(n),function(t,e,n){return t>=Wn(e,n)&&t<Hn(e,n)}(t=Vs(t),e,n)},fi.invoke=ic,fi.isArguments=ms,fi.isArray=gs,fi.isArrayBuffer=vs,fi.isArrayLike=bs,fi.isArrayLikeObject=ys,fi.isBoolean=function(t){return!0===t||!1===t||Es(t)&&Xi(t)==B},fi.isBuffer=ws,fi.isDate=$s,fi.isElement=function(t){return Es(t)&&1===t.nodeType&&!Ts(t)},fi.isEmpty=function(t){if(null==t)return!0;if(bs(t)&&(gs(t)||"string"==typeof t||"function"==typeof t.splice||ws(t)||Rs(t)||ms(t)))return!t.length;var e=Uo(t);if(e==J||e==nt)return!t.size;if(Qo(t))return!lr(t).length;for(var n in t)if(ue.call(t,n))return!1;return!0},fi.isEqual=function(t,e){return or(t,e)},fi.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:o)?n(t,e):o;return i===o?or(t,e,o,n):!!i},fi.isError=xs,fi.isFinite=function(t){return"number"==typeof t&&Un(t)},fi.isFunction=ks,fi.isInteger=Cs,fi.isLength=Ss,fi.isMap=js,fi.isMatch=function(t,e){return t===e||ar(t,e,zo(e))},fi.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,ar(t,e,zo(e),n)},fi.isNaN=function(t){return Os(t)&&t!=+t},fi.isNative=function(t){if(Jo(t))throw new Xt(s);return sr(t)},fi.isNil=function(t){return null==t},fi.isNull=function(t){return null===t},fi.isNumber=Os,fi.isObject=As,fi.isObjectLike=Es,fi.isPlainObject=Ts,fi.isRegExp=qs,fi.isSafeInteger=function(t){return Cs(t)&&t>=-P&&t<=P},fi.isSet=Ms,fi.isString=Ps,fi.isSymbol=Is,fi.isTypedArray=Rs,fi.isUndefined=function(t){return t===o},fi.isWeakMap=function(t){return Es(t)&&Uo(t)==at},fi.isWeakSet=function(t){return Es(t)&&Xi(t)==st},fi.join=function(t,e){return null==t?"":Vn.call(t,e)},fi.kebabCase=gc,fi.last=xa,fi.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==o&&(r=(r=Fs(n))<0?Hn(i+r,0):Wn(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):sn(t,un,r,!0)},fi.lowerCase=vc,fi.lowerFirst=bc,fi.lt=Ds,fi.lte=zs,fi.max=function(t){return t&&t.length?Ui(t,Oc,Zi):o},fi.maxBy=function(t,e){return t&&t.length?Ui(t,Ro(e,2),Zi):o},fi.mean=function(t){return dn(t,Oc)},fi.meanBy=function(t,e){return dn(t,Ro(e,2))},fi.min=function(t){return t&&t.length?Ui(t,Oc,dr):o},fi.minBy=function(t,e){return t&&t.length?Ui(t,Ro(e,2),dr):o},fi.stubArray=Uc,fi.stubFalse=Vc,fi.stubObject=function(){return{}},fi.stubString=function(){return""},fi.stubTrue=function(){return!0},fi.multiply=Kc,fi.nth=function(t,e){return t&&t.length?mr(t,Fs(e)):o},fi.noConflict=function(){return Me._===this&&(Me._=he),this},fi.noop=Ic,fi.now=Za,fi.pad=function(t,e,n){t=Hs(t);var i=(e=Fs(e))?Tn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return vo(Ln(r),n)+t+vo(zn(r),n)},fi.padEnd=function(t,e,n){t=Hs(t);var i=(e=Fs(e))?Tn(t):0;return e&&i<e?t+vo(e-i,n):t},fi.padStart=function(t,e,n){t=Hs(t);var i=(e=Fs(e))?Tn(t):0;return e&&i<e?vo(e-i,n)+t:t},fi.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Yn(Hs(t).replace(It,""),e||0)},fi.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Go(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=Ns(t),e===o?(e=t,t=0):e=Ns(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Kn();return Wn(t+r*(e-t+je("1e-"+((r+"").length-1))),e)}return wr(t,e)},fi.reduce=function(t,e,n){var i=gs(t)?en:_n,r=arguments.length<3;return i(t,Ro(e,4),n,r,Li)},fi.reduceRight=function(t,e,n){var i=gs(t)?nn:_n,r=arguments.length<3;return i(t,Ro(e,4),n,r,Ni)},fi.repeat=function(t,e,n){return e=(n?Go(t,e,n):e===o)?1:Fs(e),$r(Hs(t),e)},fi.replace=function(){var t=arguments,e=Hs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},fi.result=function(t,e,n){var i=-1,r=(e=Wr(e,t)).length;for(r||(r=1,t=o);++i<r;){var a=null==t?o:t[ua(e[i])];a===o&&(i=r,a=n),t=ks(a)?a.call(t):a}return t},fi.round=Jc,fi.runInContext=t,fi.sample=function(t){return(gs(t)?ki:kr)(t)},fi.size=function(t){if(null==t)return 0;if(bs(t))return Ps(t)?Tn(t):t.length;var e=Uo(t);return e==J||e==nt?t.size:lr(t).length},fi.snakeCase=yc,fi.some=function(t,e,n){var i=gs(t)?rn:Tr;return n&&Go(t,e,n)&&(e=o),i(t,Ro(e,3))},fi.sortedIndex=function(t,e){return qr(t,e)},fi.sortedIndexBy=function(t,e,n){return Mr(t,e,Ro(n,2))},fi.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=qr(t,e);if(i<n&&fs(t[i],e))return i}return-1},fi.sortedLastIndex=function(t,e){return qr(t,e,!0)},fi.sortedLastIndexBy=function(t,e,n){return Mr(t,e,Ro(n,2),!0)},fi.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=qr(t,e,!0)-1;if(fs(t[n],e))return n}return-1},fi.startCase=wc,fi.startsWith=function(t,e,n){return t=Hs(t),n=null==n?0:Pi(Fs(n),0,t.length),e=Rr(e),t.slice(n,n+e.length)==e},fi.subtract=Qc,fi.sum=function(t){return t&&t.length?hn(t,Oc):0},fi.sumBy=function(t,e){return t&&t.length?hn(t,Ro(e,2)):0},fi.template=function(t,e,n){var i=fi.templateSettings;n&&Go(t,e,n)&&(e=o),t=Hs(t),e=Ys({},e,i,So);var r,a,s=Ys({},e.imports,i.imports,So),c=rc(s),l=vn(s,c),u=0,d=e.interpolate||Jt,p="__p += '",f=ne((e.escape||Jt).source+"|"+d.source+"|"+(d===Et?Ut:Jt).source+"|"+(e.evaluate||Jt).source+"|$","g"),_="//# sourceURL="+(ue.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Ce+"]")+"\n";t.replace(f,function(e,n,i,o,s,c){return i||(i=o),p+=t.slice(u,c).replace(Qt,kn),n&&(r=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),i&&(p+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=c+e.length,e}),p+="';\n";var h=ue.call(e,"variable")&&e.variable;h||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(bt,""):p).replace(yt,"$1").replace(wt,"$1;"),p="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Cc(function(){return Zt(c,_+"return "+p).apply(o,l)});if(m.source=p,xs(m))throw m;return m},fi.times=function(t,e){if((t=Fs(t))<1||t>P)return[];var n=D,i=Wn(t,D);e=Ro(e),t-=D;for(var r=mn(i,e);++n<t;)e(n);return r},fi.toFinite=Ns,fi.toInteger=Fs,fi.toLength=Us,fi.toLower=function(t){return Hs(t).toLowerCase()},fi.toNumber=Vs,fi.toSafeInteger=function(t){return t?Pi(Fs(t),-P,P):0===t?t:0},fi.toString=Hs,fi.toUpper=function(t){return Hs(t).toUpperCase()},fi.trim=function(t,e,n){if((t=Hs(t))&&(n||e===o))return t.replace(Pt,"");if(!t||!(e=Rr(e)))return t;var i=qn(t),r=qn(e);return Yr(i,yn(i,r),wn(i,r)+1).join("")},fi.trimEnd=function(t,e,n){if((t=Hs(t))&&(n||e===o))return t.replace(Rt,"");if(!t||!(e=Rr(e)))return t;var i=qn(t);return Yr(i,0,wn(i,qn(e))+1).join("")},fi.trimStart=function(t,e,n){if((t=Hs(t))&&(n||e===o))return t.replace(It,"");if(!t||!(e=Rr(e)))return t;var i=qn(t);return Yr(i,yn(i,qn(e))).join("")},fi.truncate=function(t,e){var n=A,i=E;if(As(e)){var r="separator"in e?e.separator:r;n="length"in e?Fs(e.length):n,i="omission"in e?Rr(e.omission):i}var a=(t=Hs(t)).length;if(Cn(t)){var s=qn(t);a=s.length}if(n>=a)return t;var c=n-Tn(i);if(c<1)return i;var l=s?Yr(s,0,c).join(""):t.slice(0,c);if(r===o)return l+i;if(s&&(c+=l.length-c),qs(r)){if(t.slice(c).search(r)){var u,d=l;for(r.global||(r=ne(r.source,Hs(Vt.exec(r))+"g")),r.lastIndex=0;u=r.exec(d);)var p=u.index;l=l.slice(0,p===o?c:p)}}else if(t.indexOf(Rr(r),c)!=c){var f=l.lastIndexOf(r);f>-1&&(l=l.slice(0,f))}return l+i},fi.unescape=function(t){return(t=Hs(t))&&kt.test(t)?t.replace($t,Mn):t},fi.uniqueId=function(t){var e=++de;return Hs(t)+e},fi.upperCase=$c,fi.upperFirst=xc,fi.each=Ha,fi.eachRight=Wa,fi.first=ba,Pc(fi,(Yc={},Gi(fi,function(t,e){ue.call(fi.prototype,e)||(Yc[e]=t)}),Yc),{chain:!1}),fi.VERSION="4.17.13",Ge(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){fi[t].placeholder=fi}),Ge(["drop","take"],function(t,e){gi.prototype[t]=function(n){n=n===o?1:Hn(Fs(n),0);var i=this.__filtered__&&!e?new gi(this):this.clone();return i.__filtered__?i.__takeCount__=Wn(n,i.__takeCount__):i.__views__.push({size:Wn(n,D),type:t+(i.__dir__<0?"Right":"")}),i},gi.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ge(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==T||3==n;gi.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ro(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),Ge(["head","last"],function(t,e){var n="take"+(e?"Right":"");gi.prototype[t]=function(){return this[n](1).value()[0]}}),Ge(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");gi.prototype[t]=function(){return this.__filtered__?new gi(this):this[n](1)}}),gi.prototype.compact=function(){return this.filter(Oc)},gi.prototype.find=function(t){return this.filter(t).head()},gi.prototype.findLast=function(t){return this.reverse().find(t)},gi.prototype.invokeMap=xr(function(t,e){return"function"==typeof t?new gi(this):this.map(function(n){return ir(n,t,e)})}),gi.prototype.reject=function(t){return this.filter(cs(Ro(t)))},gi.prototype.slice=function(t,e){t=Fs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new gi(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=Fs(e))<0?n.dropRight(-e):n.take(e-t)),n)},gi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},gi.prototype.toArray=function(){return this.take(D)},Gi(gi.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=fi[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);r&&(fi.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,c=e instanceof gi,l=s[0],u=c||gs(e),d=function(t){var e=r.apply(fi,tn([t],s));return i&&p?e[0]:e};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var p=this.__chain__,f=!!this.__actions__.length,_=a&&!p,h=c&&!f;if(!a&&u){e=h?e:new gi(this);var m=t.apply(e,s);return m.__actions__.push({func:Na,args:[d],thisArg:o}),new mi(m,p)}return _&&h?t.apply(this,s):(m=this.thru(d),_?i?m.value()[0]:m.value():m)})}),Ge(["pop","push","shift","sort","splice","unshift"],function(t){var e=oe[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);fi.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(gs(r)?r:[],t)}return this[n](function(n){return e.apply(gs(n)?n:[],t)})}}),Gi(gi.prototype,function(t,e){var n=fi[e];if(n){var i=n.name+"";ue.call(ri,i)||(ri[i]=[]),ri[i].push({name:e,func:n})}}),ri[_o(o,v).name]=[{name:"wrapper",func:o}],gi.prototype.clone=function(){var t=new gi(this.__wrapped__);return t.__actions__=no(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=no(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=no(this.__views__),t},gi.prototype.reverse=function(){if(this.__filtered__){var t=new gi(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},gi.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=gs(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Wn(e,t+a);break;case"takeRight":t=Hn(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,c=s-a,l=i?s:a-1,u=this.__iteratees__,d=u.length,p=0,f=Wn(c,this.__takeCount__);if(!n||!i&&r==c&&f==c)return Fr(t,this.__actions__);var _=[];t:for(;c--&&p<f;){for(var h=-1,m=t[l+=e];++h<d;){var g=u[h],v=g.iteratee,b=g.type,y=v(m);if(b==q)m=y;else if(!y){if(b==T)continue t;break t}}_[p++]=m}return _},fi.prototype.at=Fa,fi.prototype.chain=function(){return La(this)},fi.prototype.commit=function(){return new mi(this.value(),this.__chain__)},fi.prototype.next=function(){this.__values__===o&&(this.__values__=Ls(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},fi.prototype.plant=function(t){for(var e,n=this;n instanceof hi;){var i=pa(n);i.__index__=0,i.__values__=o,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},fi.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof gi){var e=t;return this.__actions__.length&&(e=new gi(this)),(e=e.reverse()).__actions__.push({func:Na,args:[Aa],thisArg:o}),new mi(e,this.__chain__)}return this.thru(Aa)},fi.prototype.toJSON=fi.prototype.valueOf=fi.prototype.value=function(){return Fr(this.__wrapped__,this.__actions__)},fi.prototype.first=fi.prototype.head,ze&&(fi.prototype[ze]=function(){return this}),fi}();Me._=Pn,(r=function(){return Pn}.call(e,n,e,i))===o||(i.exports=r)}).call(this)}).call(this,n(1),n(17)(t))},function(module,exports,__webpack_require__){"use strict";!function(){var t,e,n,i=(t={},e=function(e,n,i){for(var r=e.split("."),o=0;o<r.length-1;o++)i[r[o]]||(i[r[o]]={}),i=i[r[o]];"function"==typeof n?n.isClass?i[r[o]]=n:i[r[o]]=function(){return n.apply(t,arguments)}:i[r[o]]=n},n=function(n,i,r){e(n,i,t),r&&e(n,i,window.filepicker)},{extend:function(e,i,r){"function"==typeof e&&(r=i,i=e,e=""),e&&(e+=".");var o=i.call(t);for(var a in o)n(e+a,o[a],r)},internal:function(e){e.apply(t,arguments)}});if(window.filepicker)for(var r in i)window.filepicker[r]=i[r];else window.filepicker=i}(),filepicker.extend("comm",function(){var t=this,e=function(e){if(e.origin===t.urls.BASE||e.origin===t.urls.DIALOG_BASE){var n=t.json.parse(e.data);t.handlers.run(n)}},n=!1,i=function(){if(!n)if(n=!0,window.addEventListener)window.addEventListener("message",e,!1);else{if(!window.attachEvent)throw new t.FilepickerException("Unsupported browser");window.attachEvent("onmessage",e)}};return{openChannel:function(){var e,n;void 0===window.frames.filepicker_comm_iframe&&(i(),(e=document.createElement("iframe")).id=e.name="filepicker_comm_iframe",e.src=t.urls.COMM,e.style.display="none",document.body.appendChild(e));void 0===window.frames.fpapi_comm_iframe&&(i(),(n=document.createElement("iframe")).id=n.name="fpapi_comm_iframe",n.src=t.urls.API_COMM,n.style.display="none",document.body.appendChild(n))},closeChannel:function(){if(window.removeEventListener)window.removeEventListener("message",e,!1);else{if(!window.attachEvent)throw new t.FilepickerException("Unsupported browser");window.detachEvent("onmessage",e)}if(n){n=!1;for(var i=document.getElementsByName("filepicker_comm_iframe"),r=0;r<i.length;r++)i[r].parentNode.removeChild(i[r]);try{delete window.frames.filepicker_comm_iframe}catch(t){}for(var o=document.getElementsByName("fpapi_comm_iframe"),a=0;a<o.length;a++)o[a].parentNode.removeChild(o[a]);try{delete window.frames.fpapi_comm_iframe}catch(t){}}}}}),filepicker.extend("comm_fallback",function(){var t,e=this,n="",i=function(){r()},r=function(){if(void 0===window.frames.host_comm_iframe){var t;(t=document.createElement("iframe")).id=t.name="host_comm_iframe",n=t.src=e.urls.constructHostCommFallback(),t.style.display="none";var i=function(){n=t.contentWindow.location.href,o()};t.attachEvent?t.attachEvent("onload",i):t.onload=i,document.body.appendChild(t)}},o=function(){var t;void 0===window.frames.filepicker_comm_iframe&&((t=document.createElement("iframe")).id=t.name="filepicker_comm_iframe",t.src=e.urls.FP_COMM_FALLBACK+"?host_url="+encodeURIComponent(n),t.style.display="none",document.body.appendChild(t));l()},a=!1,s="",c=function(){var t=window.frames.filepicker_comm_iframe;if(t){var n=t.frames.host_comm_iframe;if(n){var i=n.location.hash;if(i&&"#"===i.charAt(0)&&(i=i.substr(1)),i!==s&&(s=i)){var r;try{r=e.json.parse(i)}catch(t){}r&&e.handlers.run(r)}}}},l=function(){a||(a=!0,t=window.setInterval(c,200))},u=function(){if(window.clearInterval(t),a){a=!1;for(var e=document.getElementsByName("filepicker_comm_iframe"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);try{delete window.frames.filepicker_comm_iframe}catch(t){}for(e=document.getElementsByName("host_comm_iframe"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);try{delete window.frames.host_comm_iframe}catch(t){}}},d=!("postMessage"in window),p=function(){e.comm,e.comm={openChannel:i,closeChannel:u}};return d&&p(),{openChannel:i,closeChannel:u,isEnabled:d}}),filepicker.extend("cookies",function(){var t=this;return{checkThirdParty:function(e){var n=function(e){return function(n){"ThirdPartyCookies"===n.type&&(t.cookies.THIRD_PARTY_COOKIES=!!n.payload,e&&"function"==typeof e&&e(!!n.payload))}}(e);t.handlers.attach("cookies",n),t.comm.openChannel()}}}),filepicker.extend("handlers",function(){var t={};return{attach:function(e,n){return t.hasOwnProperty(e)?t[e].push(n):t[e]=[n],n},detach:function(e,n){var i=t[e];if(i)if(n){for(var r=0;r<i.length;r++)if(i[r]===n){i.splice(r,1);break}0===i.length&&delete t[e]}else delete t[e]},run:function(e){var n=e.id;if(t.hasOwnProperty(n)){for(var i=t[n],r=0;r<i.length;r++)i[r](e);return!0}return!1}}}),filepicker.extend("exporter",function(){var t=this,e=function(n,i,r,o){!function(e){var n,i,r;if(e.mimetype&&e.extension)throw t.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the export function");if(n="service",e[i="services"]&&!t.util.isArray(e[i])?e[i]=[e[i]]:e[n]?e[i]=[e[n]]:r&&(e[i]=r),e.services)for(var o=0;o<e.services.length;o++){var a=(""+e.services[o]).replace(" ",""),s=t.services[a];e.services[o]=void 0===s?a:s}e.openTo&&(e.openTo=t.services[e.openTo]||e.openTo),t.util.setDefault(e,"container",t.browser.openInModal()?"modal":"window")}(i);var a={close:function(){t.modal.close()}};if(i.debug)return setTimeout(function(){r({id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",filename:"test.png",mimetype:"image/png",size:58979,client:"computer"})},1),a;if(void 0===t.cookies.THIRD_PARTY_COOKIES){var s=!1;return t.cookies.checkThirdParty(function(){s||(e(n,i,r,o),s=!0)}),a}var c=t.util.getId(),l=!1;return t.window.open(i.container,t.urls.constructExportUrl(n,i,c),function(){l||(l=!0,o(t.errors.FPError(131)))}),t.handlers.attach(c,function(e,n){return function(i){if("filepickerUrl"===i.type){if(i.error)t.util.console.error(i.error),n(t.errors.FPError(132));else{var r={};r.url=i.payload.url,r.filename=i.payload.data.filename,r.mimetype=i.payload.data.type,r.size=i.payload.data.size,r.client=i.payload.data.client,r.isWriteable=!0,e(r)}t.modal.close()}}}(function(t){l=!0,r(t)},function(t){l=!0,o(t)})),a};return{createExporter:e}}),filepicker.extend("modal",function(){var t=this,e="filepicker_shade",n="filepicker_dialog_container",i=u();if(i)var r=i.style.overflow;var o=function(t){var n=document.createElement("div");return n.id=e,n.className="fp__overlay",n.onclick=c(t),n},a=function(){var t=document.createElement("div");return t.id=n,t.className="fp__container",t},s=function(t){var e=document.createElement("div");e.className="fp__close";var n=document.createElement("a");return n.appendChild(document.createTextNode("X")),e.appendChild(n),n.onclick=c(t),document.onkeydown=function(e){27===(e=e||window.event).keyCode&&c(t)()},e},c=function(i,r){return r=!!r,function(){if(!t.uploading||r||window.confirm('You are currently uploading. If you choose "OK", the window will close and your upload will not finish. Do you want to stop uploading and close the window?')){t.uploading=!1,document.onkeydown=null,l();var o=document.getElementById(e);o&&document.body.removeChild(o);var a=document.getElementById(n);a&&document.body.removeChild(a);try{delete window.frames[t.window.WINDOW_NAME]}catch(t){}i&&i()}}};function l(){var t=u();t&&(t.style.overflow=r)}function u(){try{return document.getElementsByTagName("html")[0]}catch(t){return null}}return{generate:function(e,n){i=".fp__overlay {top: 0;right: 0;bottom: 0;left: 0;z-index: 1000;background: rgba(0, 0, 0, 0.8);}.fp__close {top: 104px; right: 108px; width: 35px; height: 35px; z-index: 20; cursor: pointer}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__close {top: 15px; right: 12px;}}.fp__close a {text-indent: -9999px; overflow: hidden; display: block; width: 100%; height: 100%; background: url(https://d1zyh3sbxittvg.cloudfront.net/close.png) 50% 50% no-repeat;}.fp__close a:hover {background-color: rgba(0,0,0, .02); opacity: .8;}@media screen and (max-width: 768px), screen and (max-height: 500px) {top: 14px; right: 14px;}.fp__copy {display: none;}.fp__container {-webkit-overflow-scrolling: touch; overflow: hidden; min-height: 300px; top: 100px;right: 100px;bottom: 100px;left: 100px;background: #eee; box-sizing:content-box; -webkit-box-sizing:content-box; -moz-box-sizing:content-box;}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy {bottom: 0; left: 0; right: 0; height: 20px; background: #333;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy a {margin-left: 5px;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__container {top: 0;right: 0;bottom: 0;left: 0;}}.fp__overlay, .fp__close, .fp__copy, .fp__container {position: fixed;}",r=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style"),c.type="text/css",c.styleSheet?c.styleSheet.cssText=i:c.appendChild(document.createTextNode(i)),r.appendChild(c);var i,r,c;var l=o(n),d=a(),p=s(n),f=document.createElement("iframe");f.name=t.window.WINDOW_NAME,f.id=t.window.WINDOW_NAME,f.style.width="100%",f.style.height="100%",f.style.border="none",f.style.position="relative",f.setAttribute("border",0),f.setAttribute("frameborder",0),f.setAttribute("frameBorder",0),f.setAttribute("marginwidth",0),f.setAttribute("marginheight",0),f.src=e,d.appendChild(f),l.appendChild(p),l.appendChild(d),document.body.appendChild(l);var _=u();return _&&(_.style.overflow="hidden"),f},close:c(function(){}),hide:function(){var t=document.getElementById(e);t&&(t.hidden=!0);var i=document.getElementById(n);i&&(i.hidden=!0),l()}}}),filepicker.extend("picker",function(){var t=this,e=function(e,n,r){return function(a){if(!o(a,r))if(t.uploading=!1,a.error)t.util.console.error(a.error),a.error.code?n(t.errors.FPError(a.error.code)):(n(t.errors.FPError(102)),t.modal.close());else{var s=i(a.payload);e(s),t.modal.close()}}},n=function(t,e,n){t[n]&&(e[n]=t[n])},i=function(t){var e={},i=t.url;i&&i.url&&(i=i.url),e.url=i;var r=t.url.data||t.data;return e.filename=r.filename,e.mimetype=r.type,e.size=r.size,void 0!==r.cropped&&(e.cropped=r.cropped),void 0!==r.rotated&&(e.rotated=r.rotated),void 0!==r.converted&&(e.converted=r.converted),n(r,e,"id"),n(r,e,"key"),n(r,e,"container"),n(r,e,"path"),n(r,e,"client"),e.isWriteable=!0,e},r=function(n,a,s,c,l,u,d){!function(e){var n=function(n,i,r){e[i]?t.util.isArray(e[i])||(e[i]=[e[i]]):e[n]?e[i]=[e[n]]:r&&(e[i]=r)};if(n("service","services"),n("mimetype","mimetypes"),n("extension","extensions"),e.services)for(var i=0;i<e.services.length;i++){var r=(""+e.services[i]).replace(" ","");void 0!==t.services[r]&&(r=t.services[r]),e.services[i]=r}if(e.mimetypes&&e.extensions)throw t.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the pick function");e.mimetypes||e.extensions||(e.mimetypes=["*/*"]),e.openTo&&(e.openTo=t.services[e.openTo]||e.openTo),t.util.setDefault(e,"container",t.browser.openInModal()?"modal":"window")}(n);var p={close:function(){t.modal.close()}};if(n.debug){var f,_={id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",filename:"test.png",mimetype:"image/png",size:58979,client:"computer"};return f=c||n.storeLocation?[_,_,_]:_,setTimeout(function(){a(f)},1),p}if(void 0===t.cookies.THIRD_PARTY_COOKIES){var h=!1;return t.cookies.checkThirdParty(function(){h||(r(n,a,s,!!c,l,u),h=!0)}),p}var m,g,v=t.util.getId(),b=!1,y=function(t){"window"===n.container&&(window.onbeforeunload=null),b=!0,a(t)},w=function(t){b=!0,s(t)};d?(m=t.urls.constructConvertUrl(n,v),g=e(y,w,u)):c?(m=t.urls.constructPickUrl(n,v,!0),g=function(e,n,r){return function(a){if(!o(a,r)){if(t.uploading=!1,a.error)t.util.console.error(a.error),n(t.errors.FPError(102));else{var s=[];t.util.isArray(a.payload)||(a.payload=[a.payload]);for(var c=0;c<a.payload.length;c++){var l=i(a.payload[c]);s.push(l)}e(s)}t.modal.close()}}}(y,w,u)):l?(m=t.urls.constructPickFolderUrl(n,v),g=function(e,n,i){return function(r){o(r,i)||(t.uploading=!1,r.error?(t.util.console.error(r.error),n(t.errors.FPError(102))):(r.payload.data.url=r.payload.url,e(r.payload.data)),t.modal.close())}}(y,w,u)):(m=t.urls.constructPickUrl(n,v,!1),g=e(y,w,u)),t.window.open(n.container,m,function(){b||(b=!0,s(t.errors.FPError(101)))}),t.handlers.attach(v,g);var $=v+"-upload";return t.handlers.attach($,function(e){e=e||function(){};return function(n){"uploading"===n.type&&(t.uploading=!!n.payload,e(t.uploading))}}(function(){t.handlers.detach($)})),p};function o(e,n){if("filepickerProgress"===e.type)t.uploading=!0,n&&n(e.payload.data);else if("notUploading"===e.type)t.uploading=!1;else if("closeModal"===e.type)t.modal.close();else if("hideModal"===e.type)t.modal.hide();else if("filepickerUrl"===e.type||"serverHttpError"===e.type)return!1;return!0}return{createPicker:r}}),filepicker.extend("window",function(){var t=this;return{open:function(e,n,i){if(i=i||function(){},!e&&t.browser.openInModal()?e="modal":e||(e="window"),"window"===e){var r="filepicker_dialog"+t.util.getId();window.onbeforeunload=function(){return"Filepicker upload does not complete."};var o=window.open(n,r,"left=100,top=100,height=600,width=800,menubar=no,toolbar=no,location=no,personalbar=no,status=no,resizable=yes,scrollbars=yes,dependent=yes,dialog=yes");o||(window.onbeforeunload=null,window.alert("Please disable your popup blocker to upload files."));var a=window.setInterval(function(){o&&!o.closed||(window.onbeforeunload=null,window.clearInterval(a),i())},100)}else if("modal"===e)t.modal.generate(n,i);else{var s=document.getElementById(e);if(!s)throw new t.FilepickerException('Container "'+e+'" not found. This should either be set to "window","modal", or the ID of an iframe that is currently in the document.');s.src=n}},WINDOW_NAME:"filepicker_dialog"}}),filepicker.extend("conversions",function(){var t=this,e={align:"string",blurAmount:"number",crop:"string or array",crop_first:"boolean",compress:"boolean",exif:"string or boolean",filter:"string",fit:"string",format:"string",height:"number",policy:"string",quality:"number",page:"number",rotate:"string or number",secure:"boolean",sharpenAmount:"number",signature:"string",storeAccess:"string",storeContainer:"string",storeRegion:"string",storeLocation:"string",storePath:"string",text:"string",text_align:"string",text_color:"string",text_font:"string",text_padding:"number",text_size:"number",watermark:"string",watermark_position:"string",watermark_size:"number",width:"number"},n={w:"width",h:"height"};return{convert:function(n,i,r,o,a){!function(n){var i;for(var r in n){for(var o in i=!1,e)if(r===o&&(i=!0,-1===e[o].indexOf(t.util.typeOf(n[r]))))throw new t.FilepickerException("Conversion parameter "+r+" is not the right type: "+n[r]+". Should be a "+e[o]);if(!i)throw new t.FilepickerException("Conversion parameter "+r+" is not a valid parameter.")}}(i),i.crop&&t.util.isArray(i.crop)&&(i.crop=i.crop.join(",")),t.ajax.post(n+"/convert",{data:i,json:!0,success:function(e){r(t.util.standardizeFPFile(e))},error:function(e,n,i){o("not_found"===e?new t.errors.FPError(141):"bad_params"===e?new t.errors.FPError(142):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(143))},progress:a})},mapRestParams:function(t){var i={};for(var r in t)i[n[r]||r]=t[r],"number"===e[n[r]||r]&&(i[n[r]||r]=Number(t[r]));return i}}}),filepicker.extend("errors",function(){var t=this,e=function(t){if(this===window)return new e(t);if(this.code=t,filepicker.debug){var n=filepicker.error_map[this.code];this.message=n.message,this.moreInfo=n.moreInfo,this.toString=function(){return"FPError "+this.code+": "+this.message+". For help, see "+this.moreInfo}}else this.toString=function(){return"FPError "+this.code+". Include filepicker_debug.js for more info"};return this};e.isClass=!0;return{FPError:e,handleError:function(e){filepicker.debug&&t.util.console.error(e.toString())}}},!0),filepicker.extend(function(){var t=this;t.API_VERSION="v2";var e=function(t){return this.text=t,this.toString=function(){return"FilepickerException: "+this.text},this};e.isClass=!0;var n=function(e,n,i,r,o){o(10),t.store(e,function(e){o(50),t.read(e,n,i,r,function(t){o(50+t/2)})},r)},i=function(e,n,i,r){var o;if(t.util.checkApiKey(),"function"==typeof n&&(r=i,i=n,n={}),n=n?t.util.clone(n):{},i=i||function(){},r=r||t.errors.handleError,"string"==typeof e&&t.util.isUrl(e))o=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to export: "+e+". Not a valid url or FPFile object. You may want to use filepicker.store() to get an FPFile to export");o=e.url,n.mimetype||n.extension||(n.mimetype=e.mimetype),n.suggestedFilename||(n.suggestedFilename=e.filename)}return n.suggestedFilename&&(n.suggestedFilename=encodeURI(n.suggestedFilename)),t.exporter.createExporter(o,n,i,r)},r=function(e,n,i,r){var o;if(t.util.checkApiKey(),"function"==typeof n&&(r=i,i=n,n={}),n=n||{},i=i||function(){},r=r||t.errors.handleError,t.util.isFPUrl(t.util.getFPUrl(e)))o=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to get metadata for: "+e+". Not a filepicker url or FPFile object.");o=e.url}o=t.util.getFPUrl(o),t.files.stat(t.util.trimConvert(o),n,i,r)};return{setKey:function(e){t.apikey=e},setResponsiveOptions:function(e){return t.responsiveImages.setResponsiveOptions(e)},pick:function(e,n,i,r){return t.util.checkApiKey(),"function"==typeof e&&(i=n,n=e,e={}),e=e||{},n=n||function(){},i=i||t.errors.handleError,t.picker.createPicker(e,n,i,!1,!1,r)},pickFolder:function(e,n,i,r){return t.util.checkApiKey(),"function"==typeof e&&(i=n,n=e,e={}),e=e||{},n=n||function(){},i=i||t.errors.handleError,t.picker.createPicker(e,n,i,!1,!0,r)},pickMultiple:function(e,n,i,r){return t.util.checkApiKey(),"function"==typeof e&&(r=i,i=n,n=e,e={}),e=e||{},n=n||function(){},i=i||t.errors.handleError,t.picker.createPicker(e,n,i,!0,!1,r)},pickAndStore:function(e,n,i,r,o){if(t.util.checkApiKey(),!e||!n||"function"==typeof e||"function"==typeof e)throw new t.FilepickerException("Not all required parameters given, missing picker or store options");r=r||t.errors.handleError;var a=!!e.multiple,s=e?t.util.clone(e):{};if(s.storeLocation=n.location||"S3",s.storePath=n.path,s.storeContainer=n.storeContainer||n.container,s.storeRegion=n.storeRegion,s.storeAccess=n.access||"private",a&&s.storePath&&"/"!==s.storePath.charAt(s.storePath.length-1))throw new t.FilepickerException(NaN);var c=i;return a||(c=function(t){i([t])}),t.picker.createPicker(s,c,r,a,!1,o)},read:function(e,i,r,o,a){if(t.util.checkApiKey(),!e)throw new t.FilepickerException("No input given - nothing to read!");if("function"==typeof i&&(a=o,o=r,r=i,i={}),i=i||{},r=r||function(){},o=o||t.errors.handleError,a=a||function(){},"string"==typeof e)t.util.isFPUrl(e)?t.files.readFromFPUrl(e,i,r,o,a):t.files.readFromUrl(e,i,r,o,a);else if(t.util.isFileInputElement(e))e.files?0===e.files.length?o(new t.errors.FPError(115)):t.files.readFromFile(e.files[0],i,r,o,a):n(e,i,r,o,a);else if(t.util.isFile(e))t.files.readFromFile(e,i,r,o,a);else{if(!e.url)throw new t.FilepickerException("Cannot read given input: "+e+". Not a url, file input, DOM File, or FPFile object.");t.files.readFromFPUrl(e.url,i,r,o,a)}},write:function(e,n,i,r,o,a){if(t.util.checkApiKey(),!e)throw new t.FilepickerException("No fpfile given - nothing to write to!");if(null==n)throw new t.FilepickerException("No input given - nothing to write!");var s;if("function"==typeof i&&(a=o,o=r,r=i,i={}),i=i||{},r=r||function(){},o=o||t.errors.handleError,a=a||function(){},t.util.isFPUrl(t.util.getFPUrl(e)))s=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to write to: "+e+". Not a filepicker url or FPFile object.");s=e.url}if(s=t.util.trimConvert(t.util.getFPUrl(s)),"string"==typeof n)t.files.writeDataToFPUrl(s,n,i,r,o,a);else if(t.util.isFileInputElement(n))n.files?0===n.files.length?o(new t.errors.FPError(115)):t.files.writeFileToFPUrl(s,n.files[0],i,r,o,a):t.files.writeFileInputToFPUrl(s,n,i,r,o,a);else if(t.util.isFile(n))t.files.writeFileToFPUrl(s,n,i,r,o,a);else{if(!n.url)throw new t.FilepickerException("Cannot read from given input: "+n+". Not a string, file input, DOM File, or FPFile object.");t.files.writeUrlToFPUrl(s,n.url,i,r,o,a)}},writeUrl:function(e,n,i,r,o,a){if(t.util.checkApiKey(),!e)throw new t.FilepickerException("No fpfile given - nothing to write to!");if(null==n)throw new t.FilepickerException("No input given - nothing to write!");var s;if("function"==typeof i&&(a=o,o=r,r=i,i={}),i=i||{},r=r||function(){},o=o||t.errors.handleError,a=a||function(){},t.util.isFPUrl(t.util.getFPUrl(e)))s=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to write to: "+e+". Not a filepicker url or FPFile object.");s=e.url}s=t.util.getFPUrl(s),t.files.writeUrlToFPUrl(t.util.trimConvert(s),n,i,r,o,a)},export:i,exportFile:i,processImage:function(e,n,i,r,o){var a;if(t.util.checkApiKey(),"function"==typeof n&&(r=i,i=n,n={}),n=n||{},i=i||function(){},r=r||t.errors.handleError,"string"==typeof e)a=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to convert: "+e+". Not a valid url or FPFile object or not filepicker url. You can convert only filepicker url images.");a=e.url,n.filename||(n.filename=e.filename)}return n.convertUrl=a,n.multiple=!1,n.services=["CONVERT","COMPUTER"],n.backgroundUpload=!0,n.hide=!1,t.picker.createPicker(n,i,r,!1,!1,o,!0)},store:function(e,n,i,r,o){if(t.util.checkApiKey(),"function"==typeof n&&(o=r,r=i,i=n,n={}),n=n?t.util.clone(n):{},i=i||function(){},r=r||t.errors.handleError,o=o||function(){},"string"==typeof e)t.files.storeData(e,n,i,r,o);else if(t.util.isFileInputElement(e))e.files?0===e.files.length?r(new t.errors.FPError(115)):t.files.storeFile(e.files[0],n,i,r,o):t.files.storeFileInput(e,n,i,r,o);else if(t.util.isFile(e))t.files.storeFile(e,n,i,r,o);else{if(!e.url)throw new t.FilepickerException("Cannot store given input: "+e+". Not a string, file input, DOM File, or FPFile object.");n.filename||(n.filename=e.filename),t.files.storeUrl(e.url,n,i,r,o)}},storeUrl:function(e,n,i,r,o){t.util.checkApiKey(),"function"==typeof n&&(o=r,r=i,i=n,n={}),n=n||{},i=i||function(){},r=r||t.errors.handleError,o=o||function(){},t.files.storeUrl(e,n,i,r,o)},stat:r,metadata:r,remove:function(e,n,i,r){var o;if(t.util.checkApiKey(),"function"==typeof n&&(r=i,i=n,n={}),n=n||{},i=i||function(){},r=r||t.errors.handleError,t.util.isFPUrl(t.util.getFPUrl(e)))o=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to remove: "+e+". Not a filepicker url or FPFile object.");o=e.url}o=t.util.getFPUrl(o),t.files.remove(t.util.trimConvert(o),n,i,r)},convert:function(e,n,i,r,o,a){if(t.util.checkApiKey(),!e)throw new t.FilepickerException("No fpfile given - nothing to convert!");"function"==typeof i&&(a=o,o=r,r=i,i={});var s,c=n?t.util.clone(n):{};if(i=i||{},r=r||function(){},o=o||t.errors.handleError,a=a||function(){},i.location&&(c.storeLocation=i.location),i.path&&(c.storePath=i.path),i.container&&(c.storeContainer=i.container),c.storeAccess=i.access||"private",t.util.isFPUrl(t.util.getFPUrl(e)))s=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to convert: "+e+". Not a filepicker url or FPFile object.");if(s=e.url,!t.mimetypes.matchesMimetype(e.mimetype,"image/*")&&!t.mimetypes.matchesMimetype(e.mimetype,"application/pdf"))return void o(new t.errors.FPError(142))}if((s=t.util.getFPUrl(s)).indexOf("/convert")>-1){var l=t.util.parseUrl(s).params;for(var u in(l=t.conversions.mapRestParams(l)).crop&&t.util.setDefault(l,"crop_first",!0),l)t.util.setDefault(c,u,l[u])}t.conversions.convert(t.util.trimConvert(s),c,r,o,a)},constructWidget:function(e){return t.widgets.constructWidget(e)},makeDropPane:function(e,n){return t.dragdrop.makeDropPane(e,n)},FilepickerException:e,responsive:function(){t.responsiveImages.update.apply(null,arguments)},version:"2.4.11"}},!0),filepicker.extend("mimetypes",function(){var t=this,e={".stl":"application/sla",".hbs":"text/html",".pdf":"application/pdf",".jpg":"image/jpeg",".jpeg":"image/jpeg",".jpe":"image/jpeg",".imp":"application/x-impressionist",".vob":"video/dvd"},n=["application/octet-stream","application/download","application/force-download","octet/stream","application/unknown","application/x-download","application/x-msdownload","application/x-secure-download"];return{getMimetype:function(t){if(t.type){var i=t.type;i=i.toLowerCase();for(var r=!1,o=0;o<n.length;o++)r=r||i===n[o];if(!r)return t.type}var a=(t.name||t.fileName).match(/\.\w*$/);return a?e[a[0].toLowerCase()]||"":t.type?t.type:""},matchesMimetype:function(e,i){if(!e)return"*/*"===i;e=t.util.trim(e).toLowerCase(),i=t.util.trim(i).toLowerCase();for(var r=0;r<n.length;r++)if(e===n[r])return!0;var o=e.split("/"),a=i.split("/");return"*"===a[0]||a[0]===o[0]&&("*"===a[1]||a[1]===o[1])}}}),filepicker.extend("services",function(){return{COMPUTER:1,DROPBOX:2,FACEBOOK:3,GITHUB:4,GMAIL:5,IMAGE_SEARCH:6,URL:7,WEBCAM:8,GOOGLE_DRIVE:9,SEND_EMAIL:10,INSTAGRAM:11,FLICKR:12,VIDEO:13,EVERNOTE:14,PICASA:15,WEBDAV:16,FTP:17,ALFRESCO:18,BOX:19,SKYDRIVE:20,GDRIVE:21,CUSTOMSOURCE:22,CLOUDDRIVE:23,GENERIC:24,CONVERT:25,AUDIO:26}},!0),filepicker.extend("urls",function(){var t=this,e="https://www.filepicker.io";window.filepicker.hostname&&(e=window.filepicker.hostname);var n=e.replace("www","dialog"),i=n+"/dialog/open/",r=n+"/dialog/save/",o=n+"/dialog/process/",a=n+"/dialog/folder/",s=e+"/api/store/",c=["crop","rotate","filter"];function l(e,n){return"?key="+t.apikey+"&id="+n+"&referrer="+window.location.hostname+"&iframe="+("window"!==e.container)+"&version="+t.API_VERSION+(e.services?"&s="+e.services.join(","):"")+(void 0!==e.container?"&container="+e.container:"modal")+(e.openTo?"&loc="+e.openTo:"")+"&language="+(e.language||t.browser.getLanguage())+(void 0!==e.mobile?"&mobile="+e.mobile:"")+(void 0!==e.backgroundUpload?"&bu="+e.backgroundUpload:"")+(e.cropRatio?"&cratio="+e.cropRatio:"")+(e.cropDim?"&cdim="+e.cropDim.join(","):"")+(e.cropMax?"&cmax="+e.cropMax.join(","):"")+(e.cropMin?"&cmin="+e.cropMin.join(","):"")+(void 0!==e.cropForce?"&cforce="+e.cropForce:"")+(void 0!==e.hide?"&hide="+e.hide:"")+(e.customCss?"&css="+encodeURIComponent(e.customCss):"")+(e.customText?"&text="+encodeURIComponent(e.customText):"")+(e.imageMin?"&imin="+e.imageMin.join(","):"")+(e.imageMax?"&imax="+e.imageMax.join(","):"")+(e.imageDim?"&idim="+e.imageDim.join(","):"")+(e.imageQuality?"&iq="+e.imageQuality:"")+(e.noFileReader?"&nfl="+e.noFileReader:"")+(t.util.isCanvasSupported()?"":"&canvas=false")+(e.redirectUrl?"&redirect_url="+e.redirectUrl:"")+(e.showClose&&"modal"!==e.container?"&showClose="+e.showClose:"")+u(e)+"&plugin="+d()}function u(t){return(t.signature?"&signature="+t.signature:"")+(t.policy?"&policy="+t.policy:"")}function d(){return filepicker.plugin||"js_lib"}function p(t){t=t||[];var e,n,i=[];for(e in t)for(n in c)t[e]===c[n]&&t.hasOwnProperty(e)&&i.push(t[e]);return i.length||i.push("crop"),"&co="+i.join(",")}return{BASE:e,DIALOG_BASE:n,API_COMM:e+"/dialog/comm_iframe/",COMM:n+"/dialog/comm_iframe/",FP_COMM_FALLBACK:n+"/dialog/comm_hash_iframe/",STORE:s,PICK:i,EXPORT:r,constructPickUrl:function(t,e,n){return i+l(t,e)+(n?"&multi="+!!n:"")+(void 0!==t.mimetypes?"&m="+t.mimetypes.join(","):"")+(void 0!==t.extensions?"&ext="+t.extensions.join(","):"")+(t.maxSize?"&maxSize="+t.maxSize:"")+(t.customSourceContainer?"&customSourceContainer="+t.customSourceContainer:"")+(t.customSourcePath?"&customSourcePath="+t.customSourcePath:"")+(t.maxFiles?"&maxFiles="+t.maxFiles:"")+(void 0!==t.folders?"&folders="+t.folders:"")+(t.storeLocation?"&storeLocation="+t.storeLocation:"")+(t.storePath?"&storePath="+t.storePath:"")+(t.storeContainer?"&storeContainer="+t.storeContainer:"")+(t.storeRegion?"&storeRegion="+t.storeRegion:"")+(t.storeAccess?"&storeAccess="+t.storeAccess:"")+(t.webcam&&t.webcam.webcamDim?"&wdim="+t.webcam.webcamDim.join(","):"")+(t.webcamDim?"&wdim="+t.webcamDim.join(","):"")+(t.webcam&&t.webcam.videoRes?"&videoRes="+t.webcam.videoRes:"")+(t.webcam&&t.webcam.videoLen?"&videoLen="+t.webcam.videoLen:"")+(t.webcam&&t.webcam.audioLen?"&audioLen="+t.webcam.audioLen:"")+p(t.conversions)},constructConvertUrl:function(t,e){var n=t.convertUrl;return(n.indexOf("&")>=0||n.indexOf("?")>=0)&&(n=encodeURIComponent(n)),o+l(t,e)+"&curl="+n+p(t.conversions)},constructPickFolderUrl:function(t,e){return a+l(t,e)},constructExportUrl:function(t,e,n){return(t.indexOf("&")>=0||t.indexOf("?")>=0)&&(t=encodeURIComponent(t)),r+l(e,n)+"&url="+t+(void 0!==e.mimetype?"&m="+e.mimetype:"")+(void 0!==e.extension?"&ext="+e.extension:"")+(e.suggestedFilename?"&defaultSaveasName="+e.suggestedFilename:"")},constructWriteUrl:function(t,e){return t+"?nonce=fp"+(e.base64decode?"&base64decode=true":"")+(e.mimetype?"&mimetype="+e.mimetype:"")+u(e)+"&plugin="+d()},constructStoreUrl:function(e){return s+e.location+"?key="+t.apikey+(e.base64decode?"&base64decode=true":"")+(e.mimetype?"&mimetype="+e.mimetype:"")+(e.filename?"&filename="+encodeURIComponent(e.filename):"")+(e.path?"&path="+e.path:"")+(e.container?"&container="+e.container:"")+(e.access?"&access="+e.access:"")+u(e)+"&plugin="+d()},constructHostCommFallback:function(){return t.util.parseUrl(window.location.href).origin+"/404"},getPlugin:d}}),filepicker.extend("ajax",function(){var t=this,e=function(n,i){var r=[];for(var o in n){var a,s=n[o];switch(i&&(o=i+". + key + "),t.util.typeOf(s)){case"object":a=e(s,o);break;case"array":for(var c={},l=0;l<s.length;l++)c[l]=s[l];a=e(c,o);break;default:a=o+"="+encodeURIComponent(s)}null!==s&&r.push(a)}return r.join("&")},n=function(n,r){n=n||"";var o,a=r.method?r.method.toUpperCase():"POST",s=r.success||function(){},c=r.error||function(){},l=void 0===r.async||r.async,u=r.data||null,d=void 0===r.processData||r.processData,p=r.headers||{},f=t.util.parseUrl(n),_=window.location.protocol+"//"+window.location.host!==f.origin,h=!1;if(n+=(n.indexOf("?")>=0?"&":"?")+"plugin="+t.urls.getPlugin(),u&&d&&(u=e(r.data)),r.xhr)o=r.xhr;else if(!(o=function(){try{return new window.XMLHttpRequest}catch(t){try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){return null}}}}()))return r.error("Ajax not allowed"),o;if(_&&window.XDomainRequest&&!("withCredentials"in o))return new i(n,r);r.progress&&o.upload&&o.upload.addEventListener("progress",function(t){t.lengthComputable&&r.progress(Math.round(95*t.loaded/t.total))},!1);o.onreadystatechange=function(){if(4==o.readyState&&!h)if(r.progress&&r.progress(100),o.status>=200&&o.status<300){var e=o.responseText;if(r.json)try{e=t.json.decode(e)}catch(t){return void m.call(o,"Invalid json: "+e)}s(e,o.status,o),h=!0}else m.call(o,o.responseText),h=!0};var m=function(t){if(!h)if(r.progress&&r.progress(100),h=!0,400!=this.status)if(403!=this.status){if(404!=this.status)return _?4==this.readyState&&0===this.status?void c("CORS_not_allowed",this.status,this):void c("CORS_error",this.status,this):void c(t,this.status,this);c("not_found",this.status,this)}else c("not_authorized",this.status,this);else c("bad_params",this.status,this)};o.onerror=m,u&&"GET"==a&&(n+=(-1!==n.indexOf("?")?"&":"?")+u,u=null),o.open(a,n,l),r.json?o.setRequestHeader("Accept","application/json, text/javascript"):o.setRequestHeader("Accept","text/javascript, text/html, application/xml, text/xml, */*");var g=p["Content-Type"]||p["content-type"];if(u&&d&&("POST"==a||"PUT"==a)&&void 0===g&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),p)for(var v in p)o.setRequestHeader(v,p[v]);return o.send(u),o},i=function(n,i){if(!window.XDomainRequest)return null;var r=i.method?i.method.toUpperCase():"POST",o=i.success||function(){},a=i.error||function(){},s=i.data||{};if("http:"==window.location.protocol?n=n.replace("https:","http:"):"https:"==window.location.protocol&&(n=n.replace("http:","https:")),i.async)throw new t.FilepickerException("Asyncronous Cross-domain requests are not supported");"GET"!==r&&"POST"!==r&&(s._method=r,r="POST"),!1!==i.processData&&(s=s?e(s):null),s&&"GET"==r&&(n+=(n.indexOf("?")>=0?"&":"?")+s,s=null),n+=(n.indexOf("?")>=0?"&":"?")+"_xdr=true&_cacheBust="+t.util.getId();var c=new window.XDomainRequest;return c.onload=function(){var e=c.responseText;if(i.progress&&i.progress(100),i.json)try{e=t.json.decode(e)}catch(t){return void a("Invalid json: "+e,200,c)}o(e,200,c)},c.onerror=function(){i.progress&&i.progress(100),a(c.responseText||"CORS_error",this.status||500,this)},c.onprogress=function(){},c.ontimeout=function(){},c.timeout=3e4,c.open(r,n,!0),c.send(s),c};return{get:function(t,e){e.method="GET",n(t,e)},post:function(e,i){i.method="POST",e+=(e.indexOf("?")>=0?"&":"?")+"_cacheBust="+t.util.getId(),n(e,i)},request:n}}),filepicker.extend("files",function(){var t=this,e=function(e,n,i,r,o){!0!==n.cache&&(n._cacheBust=t.util.getId()),t.ajax.get(e,{data:n,headers:{"X-NO-STREAM":!0},success:i,error:function(e,n,i){r("CORS_not_allowed"===e?new t.errors.FPError(113):"CORS_error"===e?new t.errors.FPError(114):"not_found"===e?new t.errors.FPError(115):"bad_params"===e?new t.errors.FPError(400):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(118))},progress:o})},n=function(e,n,r,o,a){t.util.setDefault(n,"location","S3");n.filename||(n.filename=e.name||e.fileName),i(e,t.urls.constructStoreUrl(n),function(e){r(t.util.standardizeFPFile(e))},function(e,n,i){"not_found"===e?o(new t.errors.FPError(121)):"bad_params"===e?o(new t.errors.FPError(122)):"not_authorized"===e?o(new t.errors.FPError(403)):(t.util.console.error(e),o(new t.errors.FPError(123)))},a)},i=function(e,n,i,r,o){if(e.files&&(e=e.files[0]),!!window.FormData&&!!window.XMLHttpRequest){var a=new window.FormData;a.append("fileUpload",e),t.ajax.post(n,{json:!0,processData:!1,data:a,success:i,error:r,progress:o})}else t.iframeAjax.post(n,{data:e,json:!0,success:i,error:r})};return{readFromUrl:e,readFromFile:function(e,n,i,r,o){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob))return o(10),void t.files.storeFile(e,{},function(e){o(50),t.files.readFromFPUrl(e.url,n,i,r,function(t){o(50+t/2)})},r,function(t){o(t/2)});var a=!!n.base64encode,s=!!n.asText,c=new FileReader;c.onprogress=function(t){t.lengthComputable&&o(Math.round(t.loaded/t.total*100))},c.onload=function(e){o(100),i(a?t.base64.encode(e.target.result,s):e.target.result)},c.onerror=function(e){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:r(new t.errors.FPError(115));break;case e.target.error.NOT_READABLE_ERR:r(new t.errors.FPError(116));break;case e.target.error.ABORT_ERR:r(new t.errors.FPError(117));break;default:r(new t.errors.FPError(118))}},s||!c.readAsBinaryString?c.readAsText(e):c.readAsBinaryString(e)},readFromFPUrl:function(n,i,r,o,a){var s=void 0===i.base64encode;s&&(i.base64encode=!0),i.base64encode=!1!==i.base64encode;e.call(this,n,i,function(e){s&&(e=t.base64.decode(e,!!i.asText)),r(e)},o,a)},writeDataToFPUrl:function(e,n,i,r,o,a){var s=i.mimetype||"text/plain";t.ajax.post(t.urls.constructWriteUrl(e,i),{headers:{"Content-Type":s},data:n,processData:!1,json:!0,success:function(e){r(t.util.standardizeFPFile(e))},error:function(e,n,i){o("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))},progress:a})},writeFileToFPUrl:function(e,n,r,o,a,s){r.mimetype=n.type,i(n,t.urls.constructWriteUrl(e,r),function(e){o(t.util.standardizeFPFile(e))},function(e,n,i){a("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))},s)},writeFileInputToFPUrl:function(e,n,r,o,a,s){i(n,t.urls.constructWriteUrl(e,r),function(e){o(t.util.standardizeFPFile(e))},function(e,n,i){a("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))},s)},writeUrlToFPUrl:function(e,n,i,r,o,a){t.ajax.post(t.urls.constructWriteUrl(e,i),{data:{url:n},json:!0,success:function(e){r(t.util.standardizeFPFile(e))},error:function(e,n,i){o("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))},progress:a})},storeFileInput:function(e,i,r,o,a){if(e.files)0===e.files.length?o(new t.errors.FPError(115)):n(e.files[0],i,r,o,a);else{t.util.setDefault(i,"location","S3"),i.filename||(i.filename=e.value.replace("C:\\fakepath\\","")||e.name);var s=e.name;e.name="fileUpload",t.iframeAjax.post(t.urls.constructStoreUrl(i),{data:e,processData:!1,json:!0,success:function(n){e.name=s,r(t.util.standardizeFPFile(n))},error:function(e,n,i){o("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))}})}},storeFile:n,storeUrl:function(e,n,i,r,o){t.util.setDefault(n,"location","S3"),t.ajax.post(t.urls.constructStoreUrl(n),{data:{url:t.util.getFPUrl(e)},json:!0,success:function(e){i(t.util.standardizeFPFile(e))},error:function(e,n,i){r("not_found"===e?new t.errors.FPError(151):"bad_params"===e?new t.errors.FPError(152):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(153))},progress:o})},storeData:function(e,n,i,r,o){t.util.setDefault(n,"location","S3"),t.util.setDefault(n,"mimetype","text/plain"),t.ajax.post(t.urls.constructStoreUrl(n),{headers:{"Content-Type":n.mimetype},data:e,processData:!1,json:!0,success:function(e){i(t.util.standardizeFPFile(e))},error:function(e,n,i){r("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))},progress:o})},stat:function(e,n,i,r){var o=["uploaded","modified","created"];!0!==n.cache&&(n._cacheBust=t.util.getId()),t.ajax.get(e+"/metadata",{json:!0,data:n,success:function(t){for(var e=0;e<o.length;e++)t[o[e]]&&(t[o[e]]=new Date(t[o[e]]));i(t)},error:function(e,n,i){r("not_found"===e?new t.errors.FPError(161):"bad_params"===e?new t.errors.FPError(400):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(162))}})},remove:function(e,n,i,r){n.key=t.apikey,t.ajax.post(e+"/remove",{data:n,success:function(t){i()},error:function(e,n,i){r("not_found"===e?new t.errors.FPError(171):"bad_params"===e?new t.errors.FPError(400):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(172))}})}}}),filepicker.extend("iframeAjax",function(){var t=this,e=[],n=!1,i=function(i,a){if(n)e.push({url:i,options:a});else{var s;i+=(i.indexOf("?")>=0?"&":"?")+"plugin="+t.urls.getPlugin()+"&_cacheBust="+t.util.getId(),i+="&Content-Type=text%2Fhtml",t.comm.openChannel();try{s=document.createElement('<iframe name="ajax_iframe">')}catch(t){s=document.createElement("iframe")}s.id=s.name="ajax_iframe",s.style.display="none";var c=function(){n=!1};s.attachEvent?(s.attachEvent("onload",c),s.attachEvent("onerror",c)):s.onerror=s.onload=c,s.id="ajax_iframe",s.name="ajax_iframe",s.style.display="none",s.onerror=s.onload=function(){n=!1},document.body.appendChild(s),t.handlers.attach("upload",r(a));var l=document.createElement("form");l.method=a.method||"GET",l.action=i,l.target="ajax_iframe";var u,d=a.data;if((t.util.isFileInputElement(d)||t.util.isFile(d))&&(l.encoding=l.enctype="multipart/form-data"),document.body.appendChild(l),t.util.isFile(d)){var p=o(d);if(!p)throw t.FilepickerException("Couldn't find corresponding file input.");d={fileUpload:p}}else t.util.isFileInputElement(d)?(u=d,(d={}).fileUpload=u):d&&t.util.isElement(d)&&"INPUT"===d.tagName?(u=d,(d={})[u.name]=u):!1!==a.processData&&(d={data:d});d.format="iframe";var f={};for(var _ in d){var h=d[_];if(t.util.isElement(h)&&"INPUT"===h.tagName)f[_]={par:h.parentNode,sib:h.nextSibling,name:h.name,input:h,focused:h===document.activeElement},h.name=_,l.appendChild(h);else{var m=document.createElement("input");m.name=_,m.value=h,l.appendChild(m)}}n=!0,window.setTimeout(function(){for(var t in l.submit(),f){var e=f[t];e.par.insertBefore(e.input,e.sib),e.input.name=e.name,e.focused&&e.input.focus()}l.parentNode.removeChild(l)},1)}},r=function(r){var o=r.success||function(){},a=r.error||function(){};return function(r){if("Upload"===r.type){n=!1;var s=r.payload;s.error?a(s.error):o(s),t.handlers.detach("upload"),function(){if(e.length>0){var t=e.shift();i(t.url,t.options)}}()}}},o=function(t){for(var e=document.getElementsByTagName("input"),n=0;n<e.length;n++){var i=e[0];if("file"===i.type&&i.files&&i.files.length)for(var r=0;r<i.files.length;r++)if(i.files[r]===t)return i}return null};return{get:function(t,e){e.method="GET",i(t,e)},post:function(e,n){n.method="POST",e+=(e.indexOf("?")>=0?"&":"?")+"_cacheBust="+t.util.getId(),i(e,n)},request:i}}),filepicker.extend("base64",function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},n=function(t){for(var e="",n=0,i=0,r=0;n<t.length;)(i=t.charCodeAt(n))<128?(e+=String.fromCharCode(i),n++):i>191&&i<224?(r=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&c3),n+=3);return e};return{encode:function(n,i){var r,o,a,s,c,l,u,d="",p=0;for((i=i||void 0===i)&&(n=e(n));p<n.length;)r=n.charCodeAt(p),o=n.charCodeAt(p+1),a=n.charCodeAt(p+2),p+=3,s=r>>2,c=(3&r)<<4|o>>4,l=(15&o)<<2|a>>6,u=63&a,isNaN(o)?l=u=64:isNaN(a)&&(u=64),d=d+t.charAt(s)+t.charAt(c)+t.charAt(l)+t.charAt(u);return d},decode:function(e,i){i=i||void 0===i;var r,o,a,s,c,l,u,d="",p=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");p<e.length;)s=t.indexOf(e.charAt(p)),c=t.indexOf(e.charAt(p+1)),l=t.indexOf(e.charAt(p+2)),u=t.indexOf(e.charAt(p+3)),p+=4,r=s<<2|c>>4,o=(15&c)<<4|l>>2,a=(3&l)<<6|u,d+=String.fromCharCode(r),64!=l&&(d+=String.fromCharCode(o)),64!=u&&(d+=String.fromCharCode(a));return i&&(d=n(d)),d}}},!0),filepicker.extend("browser",function(){var t=function(){return!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))},e=function(){return!!navigator.userAgent.match(/Android/i)};return{getLanguage:function(){var t=window.navigator.userLanguage||window.navigator.language;return void 0===t&&(t="en"),t=t.replace("-","_").toLowerCase()},openInModal:function(){return!(t()||e())||!!window.navigator.standalone},isMobile:function(){return t()||e()}}}),filepicker.extend("conversionsUtil",function(){var t=this,e=t.urls.BASE.replace("www","process")+"/";return{CONVERSION_DOMAIN:e,parseUrl:function(t){if(!t)return{url:null,optionsDict:{}};var n,i,r,o,a,s=(t=t.replace(e,"")).substring(t.indexOf("/http")+1),c=(t=t.replace("/"+s,"")).substring(0,t.indexOf("/")),l=(t=t.replace(c+"/","")).split("/"),u={};for(o in l)if((n=l[o].split("=")).length>1)for(a in u[n[0]]={},i=n[1].split(","))(r=i[a].split(":")).length>1&&(u[n[0]][r[0]]=r[1]);else l[o]&&(u[l[o]]=null);return{url:s,apikey:c,optionsDict:u}},buildUrl:function(n,i,r){var o,a,s,c=e+r;for(o in i=i||{})for(a in c+="/"+o,(s=t.util.objectKeys(i[o]||{}).length)&&(c+="="),i[o])c+=a+":"+i[o][a],0!=--s&&(c+=",");return c+="/"+n}}}),filepicker.extend("json",function(){var fp=this,special={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escape=function(t){return special[t]||"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},validate=function(t){return t=t.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(t)},encode=function(t){if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(t);t&&t.toJSON&&(t=t.toJSON());var e=[];switch(fp.util.typeOf(t)){case"string":return'"'+t.replace(/[\x00-\x1f\\"]/g,escape)+'"';case"array":for(var n=0;n<t.length;n++)e.push(encode(t[n]));return"["+e+"]";case"object":case"hash":var i,r;for(r in t)(i=encode(t[r]))&&e.push(encode(r)+":"+i),i=null;return"{"+e+"}";case"number":case"boolean":return""+t;case"null":default:return"null"}return null},decode=function(string,secure){if(!string||"string"!==fp.util.typeOf(string))return null;if(window.JSON&&window.JSON.parse)return window.JSON.parse(string);if(secure&&!validate(string))throw new Error("JSON could not decode the input; security is enabled and the value is not secure.");return eval("("+string+")")};return{validate:validate,encode:encode,stringify:encode,decode:decode,parse:decode}}),filepicker.extend("util",function(){var t=/^(http|https)\:.*\/\//i;return{trim:function(t){return t.replace(/^\s+|\s+$/g,"")},trimConvert:function(t){return t.replace(/\/convert\b.*/,"")},parseUrl:function(t){t&&"/"!==t.charAt(0)||(t=window.location.protocol+"//"+window.location.host+t);var e=document.createElement("a");e.href=t;var n=-1===e.hostname.indexOf(":")?e.hostname:e.host,i={source:t,protocol:e.protocol.replace(":",""),host:n,port:e.port,query:e.search,params:function(){for(var t,n={},i=e.search.replace(/^\?/,"").split("&"),r=i.length,o=0;o<r;o++)i[o]&&(n[(t=i[o].split("="))[0]]=t[1]);return n}(),file:(e.pathname.match(/\/([^\/?#]+)$/i)||[void 0,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||[void 0,""])[1],segments:e.pathname.replace(/^\//,"").split("/")};return i.origin=i.protocol+"://"+i.host+(i.port?":"+i.port:""),i.rawUrl=(i.origin+i.path).replace("/convert",""),i},isUrl:function(e){return!!e.match(t)},endsWith:function(t,e){return-1!==t.indexOf(e,t.length-e.length)},appendQueryToUrl:function(t,e,n){return t+(t.indexOf("?")>=0?"&":"?")+e+"="+n}}}),filepicker.extend("util",function(){var t=this,e=function(t){return t&&"[object Array]"===Object.prototype.toString.call(t)},n=function(t){return t&&"[object File]"===Object.prototype.toString.call(t)},i=function(t){return"object"==typeof window.HTMLElement?t instanceof window.HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},r=function(t){return function(){if(window.console&&"function"==typeof window.console[t])try{window.console[t].apply(window.console,arguments)}catch(t){window.alert(Array.prototype.join.call(arguments,","))}}},o={};o.log=r("log"),o.error=r("error");return{isArray:e,isFile:n,isElement:i,isFileInputElement:function(t){return i(t)&&"INPUT"===t.tagName&&"file"===t.type},getId:function(){return(new Date).getTime().toString()},setDefault:function(t,e,n){void 0===t[e]&&(t[e]=n)},typeOf:function(t){return null===t?"null":e(t)?"array":n(t)?"file":typeof t},addOnLoad:function(t){if(window.jQuery)window.jQuery(function(){t()});else if(window.addEventListener)window.addEventListener("load",t,!1);else if(window.attachEvent)window.attachEvent("onload",t);else if(window.onload){var e=window.onload;window.onload=function(){e(),t()}}else window.onload=t},isFPUrl:function(e){return"string"==typeof e&&e.match(t.urls.BASE+"/api/file/")},getFPUrl:function(e){if("string"==typeof e){var n=e.match(/(?:cdn.filestackcontent.com|cdn.filepicker.io)[\S]*\/([\S]{20,})/);if(n&&n.length>1)return t.urls.BASE+"/api/file/"+n[1]}return e},isFPUrlCdn:function(t){return"string"==typeof t&&t.match("/api/file/")},console:o,clone:function(t){var e={};for(var n in t)e[n]=t[n];return e},standardizeFPFile:function(t){var e={};return e.url=t.url,e.filename=t.filename||t.name,e.mimetype=t.mimetype||t.type,e.size=t.size,e.key=t.key||t.s3_key,e.isWriteable=!(!t.isWriteable&&!t.writeable),e},isCanvasSupported:function(){try{var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}catch(t){return!1}},extend:function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},checkApiKey:function(){if(!t.apikey)throw new t.FilepickerException("API Key not found")},objectKeys:function(t){return"function"!=typeof Object.keys?function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}:Object.keys(t)}}}),filepicker.extend("windowUtils",function(){return{getWidth:function(){return document.documentElement.clientWidth||document.body&&document.body.clientWidth||1024},getHeight:function(){return document.documentElement.clientHeight||document.body&&document.body.clientHeight||768}}}),filepicker.extend("dragdrop",function(){var t=this,e=function(){return(!!window.FileReader||navigator.userAgent.indexOf("Safari")>=0)&&"draggable"in document.createElement("span")};return{enabled:e,makeDropPane:function(n,i){var r="No DOM element found to create drop pane";if(!n)throw new t.FilepickerException(r);if(n.jquery){if(0===n.length)throw new t.FilepickerException(r);n=n[0]}if(!e())return t.util.console.error("Your browser doesn't support drag-drop functionality"),!1;var o=(i=i||{}).dragEnter||function(){},a=i.dragLeave||function(){},s=i.onStart||function(){},c=i.onSuccess||function(){},l=i.onError||function(){},u=i.onProgress||function(){},d=i.mimetypes;d||(d=i.mimetype?[i.mimetype]:["*/*"]),"string"===t.util.typeOf(d)&&(d=d.split(","));var p=i.extensions;if(p||i.extension&&(p=[i.extension]),"string"===t.util.typeOf(p)&&(p=p.replace(/ /g,"").split(",")),p)for(var f=0;f<p.length;f++)p[f]=p[f].toLowerCase();var _={location:i.location,path:i.path,container:i.container,access:i.access,policy:i.policy,signature:i.signature},h=function(){return n&&"disabled"!==(n.getAttribute("disabled")||"enabled")};n.addEventListener("dragenter",function(t){return h()&&o(),t.stopPropagation(),t.preventDefault(),!1},!1),n.addEventListener("dragleave",function(t){return h()&&a(),t.stopPropagation(),t.preventDefault(),!1},!1),n.addEventListener("dragover",function(t){return t.dataTransfer.dropEffect="copy",t.preventDefault(),!1},!1),n.addEventListener("drop",function(e){if(e.stopPropagation(),e.preventDefault(),!h())return!1;if(function(t){var e,n,i;if(t.dataTransfer.items)for(n=t.dataTransfer.items,i=0;i<n.length;i++)if((e=n[i]&&n[i].webkitGetAsEntry?n[i].webkitGetAsEntry():void 0)&&e.isDirectory)return l("WrongType","Uploading a folder is not allowed"),!0;return!1}(e))return!1;var i=e.dataTransfer.files,r=k(e.dataTransfer);return i.length?function(e){var i,r=e.length;if(x(e))for(s(e),n.setAttribute("disabled","disabled"),i=0;i<e.length;i++)t.store(e[i],_,b(i,r),y,w(i,r))}(i):r?function(e){var n=w(0,1);t.storeUrl(e,C,y,n)}(r):l("NoFilesFound","No files uploaded"),!1});var m=function(){n.setAttribute("disabled","enabled"),window.$&&window.$(n).prop("disabled",!1)},g={},v=[],b=function(t,e){return function(n){i.multiple?(v.push(n),v.length===e?(c(v),v=[],g={}):(g[t]=100,$(e))):c([n]),m()}},y=function(t){l("UploadError",t.toString()),m()},w=function(t,e){return function(n){g[t]=n,$(e)}},$=function(t){var e=0;for(var n in g)e+=g[n];u(e/t)},x=function(e){if(e.length>0){if(e.length>1&&!i.multiple)return l("TooManyFiles","Only one file at a time"),!1;if(i.maxFiles>0&&e.length>i.maxFiles)return l("TooManyFiles","Only "+i.maxFiles+" files at a time"),!1;for(var n,r,o,a=0;a<e.length;a++){n=!1,o=(r=e[a]).name||r.fileName||"Unknown file";for(var s=0;s<d.length;s++){var c=t.mimetypes.getMimetype(r);n=n||t.mimetypes.matchesMimetype(c,d[s])}if(!n)return l("WrongType",o+" isn't the right type of file"),!1;if(p){for(n=!1,s=0;s<p.length;s++)n=n||t.util.endsWith(o,p[s]);if(!n)return l("WrongType",o+" isn't the right type of file"),!1}if(r.size&&i.maxSize&&r.size>i.maxSize)return l("WrongSize",o+" is too large ("+r.size+" Bytes)"),!1}return!0}return l("NoFilesFound","No files uploaded"),!1},k=function(e){var n,i;if(e&&"function"==typeof e.getData){n=e.getData("text");try{n=n||e.getData("text/html")}catch(e){t.util.console.error(e)}n&&!t.util.isUrl(n)&&(i=n.match(/<img.*?src="(.*?)"/i),n=i&&i.length>1?i[1]:null)}return n};return!0;function C(e){var n=b(0,1),i=t.util.clone(e);i.name=i.filename,x([i])?n(e):t.files.remove(e.url,_,function(){},function(){})}}}}),filepicker.extend("responsiveImages",function(){var t,e,n,i=this,r=(t=function(){o()},e=200,function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout(function(){n=null,t.apply(i,r)},e)});return{activate:function(){o(),h(r)},deactivate:function(){m(r)},update:function(t){if(void 0!==t){if("IMG"!==t.nodeName)throw new i.FilepickerException("Passed object is not an image");f(t)}else o(!0)},setResponsiveOptions:function(t){if("object"!=typeof(t=t||{}))throw new i.FilepickerException("Responsive options must be an object.");i.responsiveOptions=t},getResponsiveOptions:g,getElementDims:s,replaceSrc:c,getCurrentResizeParams:p,construct:f,constructParams:_,shouldConstruct:a,roundWithStep:v,addWindowResizeEvent:h,removeWindowResizeEvent:m};function o(t){var e,n,i=document.querySelectorAll("img[data-fp-src]");for(n=0;n<i.length;n++)(a(e=i[n])||!0===t)&&f(e)}function a(t){var e=l(t),n=t.getAttribute("data-fp-on-resize")||g().onResize||"all";if(!e||"all"===n)return!0;if("none"===n)return!1;var i=p(e).width<s(t).width;return!!(i&&"up"===n||!i&&"down"===n)}function s(t){var e={};return null===t.parentNode?(e.width=i.windowUtils.getWidth(),e.height=i.windowUtils.getWidth(),e):t.alt&&!t.fpAltCheck?(t.parentNode.fpAltCheck=!0,s(t.parentNode)):(e.width=t.offsetWidth,e.height=t.offsetHeight,e.width?e:s(t.parentNode))}function c(t,e){var n=l(t)||u(t);n!==e&&(t.src=e,n&&(t.onerror=function(){t.src=n,t.onerror=null}))}function l(t){return t.getAttribute("src")}function u(t){return t.getAttribute("data-fp-src")}function d(t){return t.getAttribute("data-fp-policy")}function p(t){return i.conversionsUtil.parseUrl(t).optionsDict.resize||{}}function f(t){var e=u(t)||l(t),n=function(t){return t.getAttribute("data-fp-apikey")}(t)||i.apikey,r=g();i.apikey||(i.setKey(n),i.util.checkApiKey()),c(t,i.conversionsUtil.buildUrl(e,_(t,r),n))}function _(t,e){e=e||{};var n=s(t),i=function(t){return t.getAttribute("data-fp-pixel-round")}(t)||e.pixelRound||10,r={resize:{width:v(n.width,i)}},o=e.signature||function(t){return t.getAttribute("data-fp-signature")}(t);return o&&(r.security={signature:o,policy:e.policy||d(t)}),r}function h(t){window.addEventListener?window.addEventListener("resize",t,!1):window.attachEvent&&window.attachEvent("onresize",t)}function m(t){window.removeEventListener?window.removeEventListener("resize",t,!1):window.detachEvent&&window.detachEvent("onresize",t)}function g(){return i.responsiveOptions||{}}function v(t,e){var n=0===e?1:e;return Math.ceil(t/n)*n}}),filepicker.extend("widgets",function(){var t=this,e=function(t,e,n,i){var r=i.getAttribute(n);r&&(e[t]=r)},n=function(t,e){var n;document.createEvent?((n=document.createEvent("Event")).initEvent("change",!0,!1),n.fpfile=e?e[0]:void 0,n.fpfiles=e,t.dispatchEvent(n)):document.createEventObject?((n=document.createEventObject("Event")).eventPhase=2,n.currentTarget=n.srcElement=n.target=t,n.fpfile=e?e[0]:void 0,n.fpfiles=e,t.fireEvent("onchange",n)):t.onchange&&t.onchange(e)},i=function(t,e){e[t]&&(e[t]=e[t].split(","))},r=function(t,n,i){for(var r in i)e(i[r],t,r,n)},o=function(n,o){o=o||"pick";var a={};r(a,n,{"data-fp-container":"container","data-fp-mimetype":"mimetype","data-fp-extension":"extension","data-fp-openTo":"openTo","data-fp-debug":"debug","data-fp-signature":"signature","data-fp-policy":"policy","data-fp-language":"language","data-fp-background-upload":"backgroundUpload","data-fp-hide":"hide","data-fp-custom-css":"customCss","data-fp-crop-force":"cropForce","data-fp-crop-ratio":"cropRatio","data-fp-crop-dim":"cropDim","data-fp-crop-max":"cropMax","data-fp-crop-min":"cropMin","data-fp-show-close":"showClose","data-fp-conversions":"conversions","data-fp-custom-text":"customText","data-fp-custom-source-container":"customSourceContainer","data-fp-custom-source-path":"customSourcePath"}),"export"===o?e("suggestedFilename",a,"data-fp-suggestedFilename",n):"pick"===o&&(r(a,n,{"data-fp-mimetypes":"mimetypes","data-fp-extensions":"extensions","data-fp-maxSize":"maxSize","data-fp-maxFiles":"maxFiles","data-fp-store-location":"storeLocation","data-fp-store-path":"storePath","data-fp-store-container":"storeContainer","data-fp-store-region":"storeRegion","data-fp-store-access":"storeAccess","data-fp-image-quality":"imageQuality","data-fp-image-dim":"imageDim","data-fp-image-max":"imageMax","data-fp-image-min":"imageMin"}),a.webcam={},r(a.webcam,n,{"data-fp-video-recording-resolution":"videoRes","data-fp-webcam-dim":"webcamDim","data-fp-video-length":"videoLen","data-fp-audio-length":"audioLen"}));var s=n.getAttribute("data-fp-services");if(s){s=s.split(",");for(var c=0;c<s.length;c++)s[c]=t.services[s[c].replace(" ","")]||s[c];a.services=s}var l=n.getAttribute("data-fp-service");l&&(a.service=t.services[l.replace(" ","")]||l);var u=["extensions","mimetypes","imageDim","imageMin","imageMax","cropDim","cropMax","cropMin","webcamDim","conversions"];for(var d in u)i(u[d],a);var p=n.getAttribute("data-fp-apikey");return p&&t.setKey(p),a.folders="true"===n.getAttribute("data-fp-folders"),a},a=function(t){return"true"===t.getAttribute("data-fp-multiple")},s=function(e){var i=document.createElement("button");i.setAttribute("type","button"),i.innerHTML=e.getAttribute("data-fp-button-text")||"Pick File",i.className=e.getAttribute("data-fp-button-class")||e.className||"fp__btn",e.style.display="none";var r=o(e);a(e)?i.onclick=function(){return i.blur(),t.pickMultiple(r,function(t){for(var i=[],r=0;r<t.length;r++)i.push(t[r].url);e.value=i.join(),n(e,t)}),!1}:i.onclick=function(){return i.blur(),t.pick(r,function(t){e.value=t.url,n(e,[t])}),!1},e.parentNode.insertBefore(i,e.nextSibling)},c=function(e){var i=e.getAttribute("data-fp-url");if(!i)return!0;var r=document.createElement("button");r.setAttribute("type","button"),r.innerHTML=e.getAttribute("data-fp-button-text")||"Convert File",r.className=e.getAttribute("data-fp-button-class")||e.className||"fp__btn",e.style.display="none";var a=o(e,"convert");r.onclick=function(){return r.blur(),t.processImage(i,a,function(t){e.value=t.url,n(e,[t])}),!1},e.parentNode.insertBefore(r,e.nextSibling)},l=function(e){var i=document.createElement("div");i.className=e.getAttribute("data-fp-class")||e.className,i.style.padding="1px",e.style.display="none",e.parentNode.insertBefore(i,e.nextSibling);var r=document.createElement("button");r.setAttribute("type","button"),r.innerHTML=e.getAttribute("data-fp-button-text")||"Pick File",r.className=e.getAttribute("data-fp-button-class")||"fp__btn",i.appendChild(r);var s=document.createElement("div");d(s),s.innerHTML=e.getAttribute("data-fp-drag-text")||"Or drop files here",s.className=e.getAttribute("data-fp-drag-class")||"",i.appendChild(s);var c=o(e),l=a(e);t.dragdrop.enabled()?p(s,l,c,e):s.innerHTML="&nbsp;",s.onclick=r.onclick=l?function(){return r.blur(),t.pickMultiple(c,function(t){for(var i=[],r=[],o=0;o<t.length;o++)i.push(t[o].url),r.push(t[o].filename);e.value=i.join(),u(e,s,r.join(", ")),n(e,t)}),!1}:function(){return r.blur(),t.pick(c,function(t){e.value=t.url,u(e,s,t.filename),n(e,[t])}),!1}},u=function(e,i,r){i.innerHTML=r,i.style.padding="2px 4px",i.style.cursor="default",i.style.width="";var o=document.createElement("span");o.innerHTML="X",o.style.borderRadius="8px",o.style.fontSize="14px",o.style.cssFloat="right",o.style.padding="0 3px",o.style.color="#600",o.style.cursor="pointer";var a=function(r){return r||(r=window.event),r.cancelBubble=!0,r.stopPropagation&&r.stopPropagation(),d(i),t.dragdrop.enabled?i.innerHTML=e.getAttribute("data-fp-drag-text")||"Or drop files here":i.innerHTML="&nbsp;",e.value="",n(e),!1};o.addEventListener?o.addEventListener("click",a,!1):o.attachEvent&&o.attachEvent("onclick",a),i.appendChild(o)},d=function(t){t.style.border="1px dashed #AAA",t.style.display="inline-block",t.style.margin="0 0 0 4px",t.style.borderRadius="3px",t.style.backgroundColor="#F3F3F3",t.style.color="#333",t.style.fontSize="14px",t.style.lineHeight="22px",t.style.padding="2px 4px",t.style.verticalAlign="middle",t.style.cursor="pointer",t.style.overflow="hidden"},p=function(e,i,r,o){var a,s=e.innerHTML;t.dragdrop.makeDropPane(e,{multiple:i,maxSize:r.maxSize,mimetypes:r.mimetypes,mimetype:r.mimetype,extensions:r.extensions,extension:r.extension,location:r.storeLocation,path:r.storePath,container:r.storeContainer,region:r.storeRegion,access:r.storeAccess,policy:r.policy,signature:r.signature,dragEnter:function(){e.innerHTML="Drop to upload",e.style.backgroundColor="#E0E0E0",e.style.border="1px solid #000"},dragLeave:function(){e.innerHTML=s,e.style.backgroundColor="#F3F3F3",e.style.border="1px dashed #AAA"},onError:function(t,n){"TooManyFiles"===t?e.innerHTML=n:"WrongType"===t?e.innerHTML=n:"NoFilesFound"===t?e.innerHTML=n:"UploadError"===t&&(e.innerHTML="Oops! Had trouble uploading.")},onStart:function(t){a=f(e)},onProgress:function(t){a&&(a.style.width=t+"%")},onSuccess:function(t){for(var i=[],r=[],a=0;a<t.length;a++)i.push(t[a].url),r.push(t[a].filename);o.value=i.join(),u(o,e,r.join(", ")),n(o,t)}})},f=function(t){var e=document.createElement("div"),n=t.offsetHeight-2;return e.style.height=n+"px",e.style.backgroundColor="#0E90D2",e.style.width="2%",e.style.borderRadius="3px",t.style.width=t.offsetWidth+"px",t.style.padding="0",t.style.border="1px solid #AAA",t.style.backgroundColor="#F3F3F3",t.style.boxShadow="inset 0 1px 2px rgba(0, 0, 0, 0.1)",t.innerHTML="",t.appendChild(e),e},_=function(e){e.onclick=function(){var n=e.getAttribute("data-fp-url");if(!n)return!0;var i=o(e,"export");return t.exportFile(n,i),!1}},h=function(e){var n=e.getAttribute("data-fp-url"),i=e.getAttribute("data-fp-custom-css");if(!(n=t.util.getFPUrl(n))||!t.util.isFPUrl(n))return!0;n=n.replace("api/file/","api/preview/");var r=document.createElement("iframe");i&&(n=t.util.appendQueryToUrl(n,"css",i)),r.src=n,r.width="100%",r.height="100%",e.appendChild(r)};return{constructPickWidget:s,constructDragWidget:l,constructExportWidget:_,buildWidgets:function(){if(document.querySelectorAll){var t,e=document.querySelectorAll('input[type="filepicker"]');for(t=0;t<e.length;t++)s(e[t]);var n=document.querySelectorAll('input[type="filepicker-dragdrop"]');for(t=0;t<n.length;t++)l(n[t]);var i=document.querySelectorAll('input[type="filepicker-convert"]');for(t=0;t<i.length;t++)c(i[t]);var r=[],o=document.querySelectorAll("button[data-fp-url]");for(t=0;t<o.length;t++)r.push(o[t]);for(o=document.querySelectorAll("a[data-fp-url]"),t=0;t<o.length;t++)r.push(o[t]);for(o=document.querySelectorAll('input[type="button"][data-fp-url]'),t=0;t<o.length;t++)r.push(o[t]);for(t=0;t<r.length;t++)_(r[t]);var a=document.querySelectorAll('[type="filepicker-preview"][data-fp-url]');for(t=0;t<a.length;t++)h(a[t]);!function(){try{var t='.fp__btn{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;height:34px;padding:4px 30px 5px 40px;position:relative;margin-bottom:0;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Open Sans", sans-serif;font-size:12px;font-weight:600;line-height:1.42857143;color:#fff;text-align:center;white-space:nowrap;background:#ef4925;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAYAAABLy77vAAAABGdBTUEAALGPC/xhBQAAAJRJREFUOBHNUcEWgCAIy14fbl9egK5MRarHQS7ocANmOCgWh1gdNERig1CgwPlLxkZuE80ndHlU+4Lda1zz0m01dSKtcz0h7qpQb7WR+HyrqRPxahzwwMqqkEVs6qnv+86NQAbcJlK/X+vMeMe7XcBOYaRzcbItUR7/8QgcykmElQrQPErnmxNxl2yyiwcgEvQUocIJaE6yERwqXDIAAAAASUVORK5CYII=");background-repeat:no-repeat;background-position:15px 6px;border:1px solid transparent;border-radius:17px}.fp__btn:hover{background-color:#d64533}.fp__btn::after{position:absolute;content:"";top:15px;right:14px;width:7px;height:4px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAABGdBTUEAALGPC/xhBQAAAGlJREFUCB1j/P//vw4DA4MiEKOD+0xAkatA/AJNBsS/ysTIyPgfyDgHxO+hCkD0Oag4RAhoPDsQm4NoqCIGBiBnAhBjAxNAkkxAvBZNFsQHuQesmxPIOQZVAKI54UZDFYgABbcBsQhMAgDIVGYSqZsn6wAAAABJRU5ErkJggg==");}.fp__btn:hover::after{background-position:0 -4px;}.fp__btn:active,.fp__btn:focus{outline:none}@media only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2 / 1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2){.fp__btn{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAqCAYAAADbCvnoAAAABGdBTUEAALGPC/xhBQAAAQFJREFUWAntWEESwjAIbBwfHl+upNoRNjKUJhk5kIvZQGG7bHOwPGltgdYtEJedShKyJnLHhEILz1Zi9HCOzFI7FUqFLAWseDgPdfeQ9QZ4b1j53nstnEJJyBqx20NeT1gEMB5uZG6Fzn5lV5UMp1ASQhMjdnvoqjewsYbDjcytEH5lsxULp1AS0sx8nJfVnjganf3NkVlKhVPIfQ9Zb6jF0atK3mNriXwpicPHvIeyr3sTDA53VgpgH8BvMu1ZCCz7ew/7MPwlE4CQJPNnQj2ZX4SYlEPbVpsvKFZ5TOwhcRoUTQiwwhVjArPEqVvRhMCneMXzDk9lwYphIwrZZOihF32oehMAa1qSAAAAAElFTkSuQmCC");background-size:18px 21px}.fp__btn::after{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAABGdBTUEAALGPC/xhBQAAANpJREFUKBWVkU8KglAYxJ/u3HuBwmUX8BqepKN4ka4RguDOVYu2QVCrhIJ6/caekqLiGxi+PzPD58PAWrszxmygD84h7hpePFLy1mEQBJamgvcVYXkqZXTR0LwpJWw0z0Ba6bymDcrI4kkp4EvzCNoVztNKfVATwoOiyx/NDup1SVqPQVBbDDeK3txBb9JuHfhNW3HWjZhDX+SGRAgPHkl5f0+kieBxRVieaPD5LGJ4WghLiwehbkBI4HUirF3S+SYrhhQ2f2H16aR5vMSYwbdjNtYXZ0J7cc70BXnFMHIGznzEAAAAAElFTkSuQmCC");background-size:7px 8px;}}',e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n)}catch(t){}}()}},constructWidget:function(e){e.jquery&&(e=e[0]);var n=e.getAttribute("type");"filepicker"===n?s(e):"filepicker-dragdrop"===n?l(e):"filepicker-preview"===n?h(e):e.getAttribute("data-fp-src")?t.responsiveImages.construct(e):_(e)}}}),function(){filepicker.internal(function(){var t=this;t.util.addOnLoad(t.cookies.checkThirdParty),t.util.addOnLoad(t.widgets.buildWidgets),t.util.addOnLoad(t.responsiveImages.activate)}),delete filepicker.internal,delete filepicker.extend;var t,e=filepicker._queue||[],n=e.length;if(n)for(var i=0;i<n;i++)t=e[i],filepicker[t[0]].apply(filepicker,t[1]);filepicker._queue&&delete filepicker._queue}()},function(t,e,n){var i,r,o;!function(){"use strict";function a(t){return angular.isUndefined(t)||null===t}r=[n(60),n(45)],void 0===(o="function"==typeof(i=function(t,e){return void 0===e&&(e=function(){try{return n(45)}catch(t){throw new Error("Please install moment via npm. Please reference to: https://github.com/urish/angular-moment")}}()),t.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:null,format:null,statefulFilters:!0}).constant("moment",e).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null,fullDateThreshold:null,fullDateFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig",function(e,n,i,r){return function(o,s,c){var l,u,d=null,p=r.withoutSuffix,f=r.titleFormat,_=r.fullDateThreshold,h=r.fullDateFormat,m=(new Date).getTime(),g=c.amTimeAgo,v="TIME"===s[0].nodeName.toUpperCase(),b=!s.attr("title");function y(){var t;if(u)t=u;else if(r.serverTime){var e=(new Date).getTime()-m+r.serverTime;t=n(e)}else t=n();return t}function w(){d&&(e.clearTimeout(d),d=null)}function $(t){v&&s.attr("datetime",t)}function x(){if(w(),l){var t=i.preprocessDate(l);!function t(n){var i=y().diff(n,"day"),r=_&&i>=_;if(r?s.text(n.format(h)):s.text(n.from(y(),p)),f&&b&&s.attr("title",n.local().format(f)),!r){var o=Math.abs(y().diff(n,"minute")),a=3600;o<1?a=1:o<60?a=30:o<180&&(a=300),d=e.setTimeout(function(){t(n)},1e3*a)}}(t),$(t.toISOString())}}o.$watch(g,function(t){if(a(t)||""===t)return w(),void(l&&(s.text(""),$(""),l=null));l=t,x()}),t.isDefined(c.amFrom)&&o.$watch(c.amFrom,function(t){u=a(t)||""===t?null:n(t),x()}),t.isDefined(c.amWithoutSuffix)&&o.$watch(c.amWithoutSuffix,function(t){"boolean"==typeof t?(p=t,x()):p=r.withoutSuffix}),c.$observe("amFullDateThreshold",function(t){_=t,x()}),c.$observe("amFullDateFormat",function(t){h=t,x()}),o.$on("$destroy",function(){w()}),o.$on("amMoment:localeChanged",function(){x()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(e,n,i,r){var o=null;this.changeLocale=function(i,r){var o=e.locale(i,r);return t.isDefined(i)&&n.$broadcast("amMoment:localeChanged"),o},this.changeTimezone=function(t){e.tz&&e.tz.setDefault?(e.tz.setDefault(t),n.$broadcast("amMoment:timezoneChanged")):i.warn("angular-moment: changeTimezone() works only with moment-timezone.js v0.3.0 or greater."),r.timezone=t,o=t},this.preprocessDate=function(t){return o!==r.timezone&&this.changeTimezone(r.timezone),r.preprocess?r.preprocess(t):!isNaN(parseFloat(t))&&isFinite(t)?e(parseInt(t,10)):e(t)}}]).filter("amParse",["moment",function(t){return function(e,n){return t(e,n)}}]).filter("amFromUnix",["moment",function(t){return function(e){return t.unix(e)}}]).filter("amUtc",["moment",function(t){return function(e){return t.utc(e)}}]).filter("amUtcOffset",["amMoment",function(t){return function(e,n){return t.preprocessDate(e).utcOffset(n)}}]).filter("amLocal",["moment",function(t){return function(e){return t.isMoment(e)?e.local():null}}]).filter("amTimezone",["amMoment","angularMomentConfig","$log",function(t,e,n){return function(e,i){var r=t.preprocessDate(e);return i?r.tz?r.tz(i):(n.warn("angular-moment: named timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js ?"),r):r}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(t,e,n){function i(t){if(a(t))return"";var n=e.preprocessDate(t);return n.isValid()?n.calendar():""}return i.$stateful=n.statefulFilters,i}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(t,e,n){function i(n,i,r,o){if(a(n))return"";var s=e.preprocessDate(n),c=a(i)?t():e.preprocessDate(i);return s.isValid()&&c.isValid()?s.diff(c,r,o):""}return i.$stateful=n.statefulFilters,i}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(t,e,n){function i(t,n){if(a(t))return"";var i=e.preprocessDate(t);return i.isValid()?i.format(n):""}return i.$stateful=n.statefulFilters,i}]).filter("amDurationFormat",["moment","angularMomentConfig",function(t,e){function n(e,n,i){return a(e)?"":t.duration(e,n).humanize(i)}return n.$stateful=e.statefulFilters,n}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(t,e,n){function i(n,i,r){var o,s;return a(n)?"":(n=e.preprocessDate(n),(o=t(n)).isValid()?(s=t(r),!a(r)&&s.isValid()?o.from(s,i):o.fromNow(i)):"")}return i.$stateful=n.statefulFilters,i}]).filter("amSubtract",["moment","angularMomentConfig",function(t,e){function n(e,n,i){return a(e)?"":t(e).subtract(parseInt(n,10),i)}return n.$stateful=e.statefulFilters,n}]).filter("amAdd",["moment","angularMomentConfig",function(t,e){function n(e,n,i){return a(e)?"":t(e).add(parseInt(n,10),i)}return n.$stateful=e.statefulFilters,n}]).filter("amStartOf",["moment","angularMomentConfig",function(t,e){function n(e,n){return a(e)?"":t(e).startOf(n)}return n.$stateful=e.statefulFilters,n}]).filter("amEndOf",["moment","angularMomentConfig",function(t,e){function n(e,n){return a(e)?"":t(e).endOf(n)}return n.$stateful=e.statefulFilters,n}])})?i.apply(e,r):i)||(t.exports=o)}()},function(t,e){!function(){"use strict";var t,e=0,n=!0,i="message".length,r="[iFrameSizer]",o=r.length,a="",s=null,c=window.requestAnimationFrame,l={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},u={},d={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){}},p=[];function f(t,e,n){"addEventListener"in window?t.addEventListener(e,n,!1):"attachEvent"in window&&t.attachEvent("on"+e,n)}function _(t){u.log&&"object"==typeof console&&console.log(r+"[Host page"+a+"]"+t)}function h(){null===s&&_(" Get position: "+(s={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop}).x+","+s.y)}function m(){null!==s&&(window.scrollTo(s.x,s.y),_(" Set position: "+s.x+","+s.y),s=null)}function g(t){_(" Size reset requested by "+("init"===t.type?"host page":"iFrame")),h(),b(function(){v(t),y("reset","reset",t.iframe)},t,"init")}function v(t){function e(e){t.iframe.style[e]=t[e]+"px",_(" IFrame ("+t.iframe.id+") "+e+" set to "+t[e]+"px")}u.sizeHeight&&e("height"),u.sizeWidth&&e("width")}function b(t,e,n){n!==e.type&&c?(_(" Requesting animation frame"),c(t)):t()}function y(t,e,n){_("["+t+"] Sending msg to iframe ("+e+")"),n.contentWindow.postMessage(r+e,"*")}function w(){var t,i=this,r=function(t){return""===t&&(i.id=t="iFrameResizer"+e++,_(" Added missing iframe ID: "+t+" ("+i.src+")")),t}(i.id);_(" IFrame scrolling "+(u.scrolling?"enabled":"disabled")+" for "+r),i.style.overflow=!1===u.scrolling?"hidden":"auto",i.scrolling=!1===u.scrolling?"no":"yes",function(){function t(t){1/0!==u[t]&&0!==u[t]&&(i.style[t]=u[t]+"px",_(" Set "+t+" = "+u[t]+"px"))}t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}(),"number"!=typeof u.bodyMargin&&"0"!==u.bodyMargin||(u.bodyMarginV1=u.bodyMargin,u.bodyMargin=u.bodyMargin+"px"),p.push(i),t=r+":"+u.bodyMarginV1+":"+u.sizeWidth+":"+u.log+":"+u.interval+":"+u.enablePublicMethods+":"+u.autoResize+":"+u.bodyMargin+":"+u.heightCalculationMethod+":"+u.bodyBackground+":"+u.bodyPadding+":"+u.tolerance,f(i,"load",function(){var e=n;y("iFrame.onload",t,i),!e&&u.heightCalculationMethod in l&&g({iframe:i,height:0,width:0,type:"init"})}),y("init",t,i)}function $(t){if("object"!=typeof t)throw new TypeError("Options is not an object.")}!function(){var t,e=["moz","webkit","o","ms"];for(t=0;t<e.length&&!c;t+=1)c=window[e[t]+"RequestAnimationFrame"];c||_(" RequestAnimationFrame not supported")}(),f(window,"message",function(t){function e(){c("Height"),c("Width"),b(function(){v(w),m(),u.resizedCallback(w)},w,"resetPage")}function c(t){var e=Number(u["max"+t]),n=Number(u["min"+t]),i=t.toLowerCase(),r=Number(w[i]);if(n>e)throw new Error("Value for min"+t+" can not be greater than max"+t);_(" Checking "+i+" is in range "+n+"-"+e),r<n&&(r=n,_(" Set "+i+" to min value")),r>e&&(r=e,_(" Set "+i+" to max value")),w[i]=""+r}function l(t){var e,n=t?(e=w.iframe.getBoundingClientRect(),h(),{x:Number(e.left)+Number(s.x),y:Number(e.top)+Number(s.y)}):{x:0,y:0};_(" Reposition requested from iFrame (offset x:"+n.x+" y:"+n.y+")"),s={x:Number(w.width)+n.x,y:Number(w.height)+n.y},m()}var d,f,y=t.data,w={};r===(""+y).substr(0,o)&&(_(" Received: "+y),f=y.substr(o).split(":"),w={iframe:document.getElementById(f[0]),id:f[0],height:f[1],width:f[2],type:f[3]},(d=w.type in{true:1,false:1})&&_(" Ignoring init message from meta parent page"),!d&&function(){if(null===w.iframe)throw new Error("iFrame ("+w.id+") does not exist on "+a);return!0}()&&function(){var e=t.origin,n=w.iframe.src.split("/").slice(0,3).join("/");if(-1===p.indexOf(w.iframe))return!1;if(u.checkOrigin&&(_(" Checking connection is from: "+n),""+e!="null"&&e!==n))throw new Error("Unexpected message received from: "+e+" for "+w.iframe.id+". Message was: "+t.data+". This error can be disabled by adding the checkOrigin: false option.");return!0}()&&(function(){switch(w.type){case"close":n=w.iframe,_(" Removing iFrame: "+(r=n.id)),n.parentNode.removeChild(n),u.closedCallback(r),_(" --"),u.resizedCallback(w);break;case"message":t=y.substr(y.indexOf(":")+i+6),_(" MessageCallback passed: {iframe: "+w.iframe.id+", message: "+t+"}"),u.messageCallback({iframe:w.iframe,message:JSON.parse(t)}),_(" --");break;case"scrollTo":l(!1);break;case"scrollToOffset":l(!0);break;case"reset":g(w);break;case"init":e(),u.initCallback(w.iframe);break;default:e()}var t,n,r}(),n=!1))}),window.jQuery&&((t=jQuery).fn.iFrameResize=function(e){return $(e=e||{}),u=t.extend({},d,e),this.filter("iframe").each(w).end()})}()},function(t,e){var n;!function(t){"use strict";var e=function(){function t(t,e){var n=this;this.$scope=t,this.$sce=e,this.unicodeRangeStart=57344,t.$watch("left",function(){n.doDiff()}),t.$watch("right",function(){n.doDiff()}),this.tagMap={},this.mapLength=0;var i=String.fromCharCode(this.unicodeRangeStart+this.mapLength);this.tagMap["&nbsp;"]=i,this.tagMap[i]="&nbsp;",this.mapLength++,this.dmp=new diff_match_patch,this.doDiff()}return t.prototype.doDiff=function(){var t=this.convertHtmlToDiffableString(this.$scope.left),e=this.convertHtmlToDiffableString(this.$scope.right),n=this.dmp.diff_main(t,e);this.dmp.diff_cleanupSemantic(n);for(var i="",r=0;r<n.length;r++)n[r][1]=this.insertTagsForOperation(n[r][1],n[r][0]),i+=this.convertDiffableBackToHtml(n[r][1]);this.$scope.diffOutput=this.$sce.trustAsHtml(i)},t.prototype.insertTagsForOperation=function(t,e){var n=-1;do{n++}while(t.charCodeAt(n)>=this.unicodeRangeStart+1);if(n>=t.length)return t;var i="",r="";if(1===e)i="<ins>",r="</ins>";else{if(-1!==e)return t;i="<del>",r="</del>"}for(var o=i,a=!0,s=0;s<t.length;s++)t.charCodeAt(s)<this.unicodeRangeStart?(a||(o+=i,a=!0),o+=t[s]):(a&&(o+=r,a=!1),o+=t[s]);return a&&(o+=r),o},t.prototype.convertHtmlToDiffableString=function(t){t=t.replace(/&nbsp;/g,this.tagMap["&nbsp;"]);for(var e="",n=0;n<t.length;){var i=t.indexOf("<",n);if(i<0){e+=t.substr(n);break}var r=t.indexOf(">",i);if(r<0){console.log("Invalid HTML. String will be truncated."),e+=t.substr(n,i-n);break}var o=t.substr(i,r+1-i),a=this.tagMap[o];void 0===a&&(a=String.fromCharCode(this.unicodeRangeStart+this.mapLength),this.tagMap[o]=a,this.tagMap[a]=o,this.mapLength++),e+=t.substr(n,i-n),e+=a,n=r+1}return e},t.prototype.convertDiffableBackToHtml=function(t){for(var e="",n=0;n<t.length;n++){if(t.charCodeAt(n)<this.unicodeRangeStart)e+=t[n];else{var i=this.tagMap[t[n]];e+=void 0===i?t[n]:i}}return e},t.$inject=["$scope","$sce"],t}();angular.module("angular-rich-text-diff",["ngSanitize"]),angular.module("angular-rich-text-diff").directive("richTextDiff",function(){return{restrict:"E",scope:{left:"=left",right:"=right"},template:'<div ng-bind-html="diffOutput"></div>',controller:e}})}(n||(n={}))},function(t,e,n){(function(e){t.exports=e.diff_match_patch=n(274)}).call(this,n(1))},function(t,e){(function(){"use strict";function e(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}e.Diff,e.prototype.diff_main=function(t,e,n,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=i;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var o=n,a=this.diff_commonPrefix(t,e),s=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var c=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var l=this.diff_compute_(t,e,o,r);return s&&l.unshift([0,s]),c&&l.push([0,c]),this.diff_cleanupMerge(l),l},e.prototype.diff_compute_=function(t,e,n,i){var r;if(!t)return[[1,e]];if(!e)return[[-1,t]];var o=t.length>e.length?t:e,a=t.length>e.length?e:t,s=o.indexOf(a);if(-1!=s)return r=[[1,o.substring(0,s)],[0,a],[1,o.substring(s+a.length)]],t.length>e.length&&(r[0][0]=r[2][0]=-1),r;if(1==a.length)return[[-1,t],[1,e]];var c=this.diff_halfMatch_(t,e);if(c){var l=c[0],u=c[1],d=c[2],p=c[3],f=c[4],_=this.diff_main(l,d,n,i),h=this.diff_main(u,p,n,i);return _.concat([[0,f]],h)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,i):this.diff_bisect_(t,e,i)},e.prototype.diff_lineMode_=function(t,e,n){t=(u=this.diff_linesToChars_(t,e)).chars1,e=u.chars2;var i=u.lineArray,r=this.diff_main(t,e,!1,n);this.diff_charsToLines_(r,i),this.diff_cleanupSemantic(r),r.push([0,""]);for(var o=0,a=0,s=0,c="",l="";o<r.length;){switch(r[o][0]){case 1:s++,l+=r[o][1];break;case-1:a++,c+=r[o][1];break;case 0:if(a>=1&&s>=1){r.splice(o-a-s,a+s),o=o-a-s;for(var u,d=(u=this.diff_main(c,l,!1,n)).length-1;d>=0;d--)r.splice(o,0,u[d]);o+=u.length}s=0,a=0,c="",l=""}o++}return r.pop(),r},e.prototype.diff_bisect_=function(t,e,n){for(var i=t.length,r=e.length,o=Math.ceil((i+r)/2),a=o,s=2*o,c=new Array(s),l=new Array(s),u=0;u<s;u++)c[u]=-1,l[u]=-1;c[a+1]=0,l[a+1]=0;for(var d=i-r,p=d%2!=0,f=0,_=0,h=0,m=0,g=0;g<o&&!((new Date).getTime()>n);g++){for(var v=-g+f;v<=g-_;v+=2){for(var b=a+v,y=(C=v==-g||v!=g&&c[b-1]<c[b+1]?c[b+1]:c[b-1]+1)-v;C<i&&y<r&&t.charAt(C)==e.charAt(y);)C++,y++;if(c[b]=C,C>i)_+=2;else if(y>r)f+=2;else if(p){if((x=a+d-v)>=0&&x<s&&-1!=l[x])if(C>=($=i-l[x]))return this.diff_bisectSplit_(t,e,C,y,n)}}for(var w=-g+h;w<=g-m;w+=2){for(var $,x=a+w,k=($=w==-g||w!=g&&l[x-1]<l[x+1]?l[x+1]:l[x-1]+1)-w;$<i&&k<r&&t.charAt(i-$-1)==e.charAt(r-k-1);)$++,k++;if(l[x]=$,$>i)m+=2;else if(k>r)h+=2;else if(!p){if((b=a+d-w)>=0&&b<s&&-1!=c[b]){var C;y=a+(C=c[b])-b;if(C>=($=i-$))return this.diff_bisectSplit_(t,e,C,y,n)}}}}return[[-1,t],[1,e]]},e.prototype.diff_bisectSplit_=function(t,e,n,i,r){var o=t.substring(0,n),a=e.substring(0,i),s=t.substring(n),c=e.substring(i),l=this.diff_main(o,a,!1,r),u=this.diff_main(s,c,!1,r);return l.concat(u)},e.prototype.diff_linesToChars_=function(t,e){var n=[],i={};function r(t){for(var e="",r=0,o=-1,a=n.length;o<t.length-1;){-1==(o=t.indexOf("\n",r))&&(o=t.length-1);var s=t.substring(r,o+1);r=o+1,(i.hasOwnProperty?i.hasOwnProperty(s):void 0!==i[s])?e+=String.fromCharCode(i[s]):(e+=String.fromCharCode(a),i[s]=a,n[a++]=s)}return e}return n[0]="",{chars1:r(t),chars2:r(e),lineArray:n}},e.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],r=[],o=0;o<i.length;o++)r[o]=e[i.charCodeAt(o)];t[n][1]=r.join("")}},e.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},e.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},e.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var r=Math.min(n,i);if(t==e)return r;for(var o=0,a=1;;){var s=t.substring(r-a),c=e.indexOf(s);if(-1==c)return o;a+=c,0!=c&&t.substring(r-a)!=e.substring(0,a)||(o=a,a++)}},e.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;var r=this;function o(t,e,n){for(var i,o,a,s,c=t.substring(n,n+Math.floor(t.length/4)),l=-1,u="";-1!=(l=e.indexOf(c,l+1));){var d=r.diff_commonPrefix(t.substring(n),e.substring(l)),p=r.diff_commonSuffix(t.substring(0,n),e.substring(0,l));u.length<p+d&&(u=e.substring(l-p,l)+e.substring(l,l+d),i=t.substring(0,n-p),o=t.substring(n+d),a=e.substring(0,l-p),s=e.substring(l+d))}return 2*u.length>=t.length?[i,o,a,s,u]:null}var a,s,c,l,u,d=o(n,i,Math.ceil(n.length/4)),p=o(n,i,Math.ceil(n.length/2));return d||p?(a=p?d&&d[4].length>p[4].length?d:p:d,t.length>e.length?(s=a[0],c=a[1],l=a[2],u=a[3]):(l=a[0],u=a[1],s=a[2],c=a[3]),[s,c,l,u,a[4]]):null},e.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],i=0,r=null,o=0,a=0,s=0,c=0,l=0;o<t.length;)0==t[o][0]?(n[i++]=o,a=c,s=l,c=0,l=0,r=t[o][1]):(1==t[o][0]?c+=t[o][1].length:l+=t[o][1].length,r&&r.length<=Math.max(a,s)&&r.length<=Math.max(c,l)&&(t.splice(n[i-1],0,[-1,r]),t[n[i-1]+1][0]=1,i--,o=--i>0?n[i-1]:-1,a=0,s=0,c=0,l=0,r=null,e=!0)),o++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;){if(-1==t[o-1][0]&&1==t[o][0]){var u=t[o-1][1],d=t[o][1],p=this.diff_commonOverlap_(u,d),f=this.diff_commonOverlap_(d,u);p>=f?(p>=u.length/2||p>=d.length/2)&&(t.splice(o,0,[0,d.substring(0,p)]),t[o-1][1]=u.substring(0,u.length-p),t[o+1][1]=d.substring(p),o++):(f>=u.length/2||f>=d.length/2)&&(t.splice(o,0,[0,u.substring(0,f)]),t[o-1][0]=1,t[o-1][1]=d.substring(0,d.length-f),t[o+1][0]=-1,t[o+1][1]=u.substring(f),o++),o++}o++}},e.prototype.diff_cleanupSemanticLossless=function(t){function n(t,n){if(!t||!n)return 6;var i=t.charAt(t.length-1),r=n.charAt(0),o=i.match(e.nonAlphaNumericRegex_),a=r.match(e.nonAlphaNumericRegex_),s=o&&i.match(e.whitespaceRegex_),c=a&&r.match(e.whitespaceRegex_),l=s&&i.match(e.linebreakRegex_),u=c&&r.match(e.linebreakRegex_),d=l&&t.match(e.blanklineEndRegex_),p=u&&n.match(e.blanklineStartRegex_);return d||p?5:l||u?4:o&&!s&&c?3:s||c?2:o||a?1:0}for(var i=1;i<t.length-1;){if(0==t[i-1][0]&&0==t[i+1][0]){var r=t[i-1][1],o=t[i][1],a=t[i+1][1],s=this.diff_commonSuffix(r,o);if(s){var c=o.substring(o.length-s);r=r.substring(0,r.length-s),o=c+o.substring(0,o.length-s),a=c+a}for(var l=r,u=o,d=a,p=n(r,o)+n(o,a);o.charAt(0)===a.charAt(0);){r+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var f=n(r,o)+n(o,a);f>=p&&(p=f,l=r,u=o,d=a)}t[i-1][1]!=l&&(l?t[i-1][1]=l:(t.splice(i-1,1),i--),t[i][1]=u,d?t[i+1][1]=d:(t.splice(i+1,1),i--))}i++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],i=0,r=null,o=0,a=!1,s=!1,c=!1,l=!1;o<t.length;)0==t[o][0]?(t[o][1].length<this.Diff_EditCost&&(c||l)?(n[i++]=o,a=c,s=l,r=t[o][1]):(i=0,r=null),c=l=!1):(-1==t[o][0]?l=!0:c=!0,r&&(a&&s&&c&&l||r.length<this.Diff_EditCost/2&&a+s+c+l==3)&&(t.splice(n[i-1],0,[-1,r]),t[n[i-1]+1][0]=1,i--,r=null,a&&s?(c=l=!0,i=0):(o=--i>0?n[i-1]:-1,c=l=!1),e=!0)),o++;e&&this.diff_cleanupMerge(t)},e.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,i=0,r=0,o="",a="";n<t.length;)switch(t[n][0]){case 1:r++,a+=t[n][1],n++;break;case-1:i++,o+=t[n][1],n++;break;case 0:i+r>1?(0!==i&&0!==r&&(0!==(e=this.diff_commonPrefix(a,o))&&(n-i-r>0&&0==t[n-i-r-1][0]?t[n-i-r-1][1]+=a.substring(0,e):(t.splice(0,0,[0,a.substring(0,e)]),n++),a=a.substring(e),o=o.substring(e)),0!==(e=this.diff_commonSuffix(a,o))&&(t[n][1]=a.substring(a.length-e)+t[n][1],a=a.substring(0,a.length-e),o=o.substring(0,o.length-e))),0===i?t.splice(n-r,i+r,[1,a]):0===r?t.splice(n-i,i+r,[-1,o]):t.splice(n-i-r,i+r,[-1,o],[1,a]),n=n-i-r+(i?1:0)+(r?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,r=0,i=0,o="",a=""}""===t[t.length-1][1]&&t.pop();var s=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),s=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),s=!0)),n++;s&&this.diff_cleanupMerge(t)},e.prototype.diff_xIndex=function(t,e){var n,i=0,r=0,o=0,a=0;for(n=0;n<t.length&&(1!==t[n][0]&&(i+=t[n][1].length),-1!==t[n][0]&&(r+=t[n][1].length),!(i>e));n++)o=i,a=r;return t.length!=n&&-1===t[n][0]?a:a+(e-o)},e.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,i=/</g,r=/>/g,o=/\n/g,a=0;a<t.length;a++){var s=t[a][0],c=t[a][1].replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(s){case 1:e[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case-1:e[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:e[a]="<span>"+c+"</span>"}}return e.join("")},e.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},e.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},e.prototype.diff_levenshtein=function(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var o=t[r][0],a=t[r][1];switch(o){case 1:n+=a.length;break;case-1:i+=a.length;break;case 0:e+=Math.max(n,i),n=0,i=0}}return e+=Math.max(n,i)},e.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(t,e){for(var n=[],i=0,r=0,o=e.split(/\t/g),a=0;a<o.length;a++){var s=o[a].substring(1);switch(o[a].charAt(0)){case"+":try{n[i++]=[1,decodeURI(s)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var c=parseInt(s,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+s);var l=t.substring(r,r+=c);"="==o[a].charAt(0)?n[i++]=[0,l]:n[i++]=[-1,l];break;default:if(o[a])throw new Error("Invalid diff operation in diff_fromDelta: "+o[a])}}if(r!=t.length)throw new Error("Delta length ("+r+") does not equal source text length ("+t.length+").");return n},e.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},e.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),r=this;function o(t,i){var o=t/e.length,a=Math.abs(n-i);return r.Match_Distance?o+a/r.Match_Distance:a?1:o}var a=this.Match_Threshold,s=t.indexOf(e,n);-1!=s&&(a=Math.min(o(0,s),a),-1!=(s=t.lastIndexOf(e,n+e.length))&&(a=Math.min(o(0,s),a)));var c,l,u=1<<e.length-1;s=-1;for(var d,p=e.length+t.length,f=0;f<e.length;f++){for(c=0,l=p;c<l;)o(f,n+l)<=a?c=l:p=l,l=Math.floor((p-c)/2+c);p=l;var _=Math.max(1,n-l+1),h=Math.min(n+l,t.length)+e.length,m=Array(h+2);m[h+1]=(1<<f)-1;for(var g=h;g>=_;g--){var v=i[t.charAt(g-1)];if(m[g]=0===f?(m[g+1]<<1|1)&v:(m[g+1]<<1|1)&v|(d[g+1]|d[g])<<1|1|d[g+1],m[g]&u){var b=o(f,g-1);if(b<=a){if(a=b,!((s=g-1)>n))break;_=Math.max(1,2*n-s)}}}if(o(f+1,n)>a)break;d=m}return s},e.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},e.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var r=e.substring(t.start2-i,t.start2);r&&t.diffs.unshift([0,r]);var o=e.substring(t.start2+t.length1,t.start2+t.length1+i);o&&t.diffs.push([0,o]),t.start1-=r.length,t.start2-=r.length,t.length1+=r.length+o.length,t.length2+=r.length+o.length}},e.prototype.patch_make=function(t,n,i){var r,o;if("string"==typeof t&&"string"==typeof n&&void 0===i)r=t,(o=this.diff_main(r,n,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(t&&"object"==typeof t&&void 0===n&&void 0===i)o=t,r=this.diff_text1(o);else if("string"==typeof t&&n&&"object"==typeof n&&void 0===i)r=t,o=n;else{if("string"!=typeof t||"string"!=typeof n||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");r=t,o=i}if(0===o.length)return[];for(var a=[],s=new e.patch_obj,c=0,l=0,u=0,d=r,p=r,f=0;f<o.length;f++){var _=o[f][0],h=o[f][1];switch(c||0===_||(s.start1=l,s.start2=u),_){case 1:s.diffs[c++]=o[f],s.length2+=h.length,p=p.substring(0,u)+h+p.substring(u);break;case-1:s.length1+=h.length,s.diffs[c++]=o[f],p=p.substring(0,u)+p.substring(u+h.length);break;case 0:h.length<=2*this.Patch_Margin&&c&&o.length!=f+1?(s.diffs[c++]=o[f],s.length1+=h.length,s.length2+=h.length):h.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(s,d),a.push(s),s=new e.patch_obj,c=0,d=p,l=u)}1!==_&&(l+=h.length),-1!==_&&(u+=h.length)}return c&&(this.patch_addContext_(s,d),a.push(s)),a},e.prototype.patch_deepCopy=function(t){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=new e.patch_obj;o.diffs=[];for(var a=0;a<r.diffs.length;a++)o.diffs[a]=r.diffs[a].slice();o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,n[i]=o}return n},e.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var i=0,r=[],o=0;o<t.length;o++){var a,s,c=t[o].start2+i,l=this.diff_text1(t[o].diffs),u=-1;if(l.length>this.Match_MaxBits?-1!=(a=this.match_main(e,l.substring(0,this.Match_MaxBits),c))&&(-1==(u=this.match_main(e,l.substring(l.length-this.Match_MaxBits),c+l.length-this.Match_MaxBits))||a>=u)&&(a=-1):a=this.match_main(e,l,c),-1==a)r[o]=!1,i-=t[o].length2-t[o].length1;else if(r[o]=!0,i=a-c,l==(s=-1==u?e.substring(a,a+l.length):e.substring(a,u+this.Match_MaxBits)))e=e.substring(0,a)+this.diff_text2(t[o].diffs)+e.substring(a+l.length);else{var d=this.diff_main(l,s,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(d)/l.length>this.Patch_DeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(d);for(var p,f=0,_=0;_<t[o].diffs.length;_++){var h=t[o].diffs[_];0!==h[0]&&(p=this.diff_xIndex(d,f)),1===h[0]?e=e.substring(0,a+p)+h[1]+e.substring(a+p):-1===h[0]&&(e=e.substring(0,a+p)+e.substring(a+this.diff_xIndex(d,f+h[1].length))),-1!==h[0]&&(f+=h[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),r]},e.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",i=1;i<=e;i++)n+=String.fromCharCode(i);for(i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var r=t[0],o=r.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,n]),r.start1-=e,r.start2-=e,r.length1+=e,r.length2+=e;else if(e>o[0][1].length){var a=e-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],r.start1-=a,r.start2-=a,r.length1+=a,r.length2+=a}if(0==(o=(r=t[t.length-1]).diffs).length||0!=o[o.length-1][0])o.push([0,n]),r.length1+=e,r.length2+=e;else if(e>o[o.length-1][1].length){a=e-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,a),r.length1+=a,r.length2+=a}return n},e.prototype.patch_splitMax=function(t){for(var n=this.Match_MaxBits,i=0;i<t.length;i++)if(!(t[i].length1<=n)){var r=t[i];t.splice(i--,1);for(var o=r.start1,a=r.start2,s="";0!==r.diffs.length;){var c=new e.patch_obj,l=!0;for(c.start1=o-s.length,c.start2=a-s.length,""!==s&&(c.length1=c.length2=s.length,c.diffs.push([0,s]));0!==r.diffs.length&&c.length1<n-this.Patch_Margin;){var u=r.diffs[0][0],d=r.diffs[0][1];1===u?(c.length2+=d.length,a+=d.length,c.diffs.push(r.diffs.shift()),l=!1):-1===u&&1==c.diffs.length&&0==c.diffs[0][0]&&d.length>2*n?(c.length1+=d.length,o+=d.length,l=!1,c.diffs.push([u,d]),r.diffs.shift()):(d=d.substring(0,n-c.length1-this.Patch_Margin),c.length1+=d.length,o+=d.length,0===u?(c.length2+=d.length,a+=d.length):l=!1,c.diffs.push([u,d]),d==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(d.length))}s=(s=this.diff_text2(c.diffs)).substring(s.length-this.Patch_Margin);var p=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==p&&(c.length1+=p.length,c.length2+=p.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=p:c.diffs.push([0,p])),l||t.splice(++i,0,c)}}},e.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},e.prototype.patch_fromText=function(t){var n=[];if(!t)return n;for(var i=t.split("\n"),r=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<i.length;){var a=i[r].match(o);if(!a)throw new Error("Invalid patch string: "+i[r]);var s=new e.patch_obj;for(n.push(s),s.start1=parseInt(a[1],10),""===a[2]?(s.start1--,s.length1=1):"0"==a[2]?s.length1=0:(s.start1--,s.length1=parseInt(a[2],10)),s.start2=parseInt(a[3],10),""===a[4]?(s.start2--,s.length2=1):"0"==a[4]?s.length2=0:(s.start2--,s.length2=parseInt(a[4],10)),r++;r<i.length;){var c=i[r].charAt(0);try{var l=decodeURI(i[r].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==c)s.diffs.push([-1,l]);else if("+"==c)s.diffs.push([1,l]);else if(" "==c)s.diffs.push([0,l]);else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+l)}r++}}return n},e.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},e.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case-1:t="-";break;case 0:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},t.exports=e,t.exports.diff_match_patch=e,t.exports.DIFF_DELETE=-1,t.exports.DIFF_INSERT=1,t.exports.DIFF_EQUAL=0}).call({})},function(t,e,n){var i,r,o;o=function(){var t=!0;function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var i,r,o,a=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(e)&&/android/i.test(e),c=/CrOS/.test(e),l=/silk/i.test(e),u=/sailfish/i.test(e),d=/tizen/i.test(e),p=/(web|hpw)os/i.test(e),f=/windows phone/i.test(e),_=!f&&/windows/i.test(e),h=!a&&!l&&/macintosh/i.test(e),m=!s&&!u&&!d&&!p&&/linux/i.test(e),g=n(/edge\/(\d+(\.\d+)?)/i),v=n(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(e),y=!b&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?i={name:"Opera",opera:t,version:v||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?i={name:"Yandex Browser",yandexbrowser:t,version:v||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:f?(i={name:"Windows Phone",windowsphone:t},g?(i.msedge=t,i.version=g):(i.msie=t,i.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?i={name:"Chrome",chromeos:t,chromeBook:t,chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?i={name:"Microsoft Edge",msedge:t,version:g}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?(i={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},v&&(i.version=v)):u?i={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(i={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=t)):l?i={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:s?i={name:"Android",version:v}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",blackberry:t,version:v||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(i={name:"WebOS",webos:t,version:v||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=t)):i=/bada/i.test(e)?{name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:d?{name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||v}:/safari/i.test(e)?{name:"Safari",safari:t,version:v}:{name:n(/^(.*)\/(.*) /),version:(r=/^(.*)\/(.*) /,o=e.match(r),o&&o.length>1&&o[2]||"")},!i.msedge&&/(apple)?webkit/i.test(e)?(i.name=i.name||"Webkit",i.webkit=t,!i.version&&v&&(i.version=v)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=t,i.version=i.version||n(/gecko\/(\d+(\.\d+)?)/i)),i.msedge||!s&&!i.silk?a?(i[a]=t,i.ios=t):_?i.windows=t:h?i.mac=t:m&&(i.linux=t):i.android=t;var w="";i.windowsphone?w=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):a?w=(w=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?w=n(/android[ \/-](\d+(\.\d+)*)/i):i.webos?w=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?w=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?w=n(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(w=n(/tizen[\/\s](\d+(\.\d+)*)/i)),w&&(i.osversion=w);var $=w.split(".")[0];return b||"ipad"==a||s&&(3==$||4==$&&!y)||i.silk?i.tablet=t:(y||"iphone"==a||"ipod"==a||s||i.blackberry||i.webos||i.bada)&&(i.mobile=t),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.chrome&&i.version>=20||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1?i.a=t:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6?i.c=t:i.x=t,i}var n=e("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(t){for(var e=0;e<t.length;++e){var i=t[e];if("string"==typeof i&&i in n)return!0}return!1},n._detect=e,n},t.exports?t.exports=o():void 0===(r="function"==typeof(i=o)?i.call(e,n,e,t):i)||(t.exports=r)},function(t,e){window.GeniusShimInnerHtml=function(){var t=function(e,n){var i=e.nodeType;if(3==i)n.push(e.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"));else if(1==i){if(n.push("<",e.tagName),e.hasAttributes())for(var r=e.attributes,o=0,a=r.length;o<a;++o){var s=r.item(o);n.push(" ",s.name,"='",s.value,"'")}if(e.hasChildNodes()){n.push(">");var c=e.childNodes;for(o=0,a=c.length;o<a;++o)t(c.item(o),n);n.push("</",e.tagName,">")}else n.push("/>")}else{if(8!=i)throw"Error serializing XML. Unhandled node of type: "+i;n.push("\x3c!--",e.nodeValue,"--\x3e")}};Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function(){for(var e=[],n=this.firstChild;n;)t(n,e),n=n.nextSibling;return e.join("")},set:function(t){for(;this.firstChild;)this.removeChild(this.firstChild);try{var e=new DOMParser;e.async=!1,sXML="<svg xmlns='http://www.w3.org/2000/svg'>"+t+"</svg>";for(var n=e.parseFromString(sXML,"text/xml").documentElement.firstChild;n;)this.appendChild(this.ownerDocument.importNode(n,!0)),n=n.nextSibling}catch(t){throw new Error("Error parsing XML string")}}}),Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function(){return this.innerHTML},set:function(t){this.innerHTML=t}})}},function(t,e){
/**
 * @author GOHIN Maelig
 * @email mgohin@arca-compiuting.fr
 * @version 1.1.1
 * @license: MIT
 */
!function(t){"use strict";var e=["$compile","$timeout","$window",function(e,n,i){return{restrict:"A",scope:{scrollingElem:"=?",superSticky:"=?",css:"=?",listenResize:"=?"},link:function(e,r){n(function(){var n,o=!1,a=r.css("display"),s=r.css("position"),c=r.css("top"),l=r.css("left"),u=r.css("width"),d=e.scrollingElem||document;r.addClass("sticky"),e.superSticky&&r.addClass("sticky-keep-visible"),e.listenResize&&t.element(i).on("resize",function(){o&&(r.css("width",e.listenResize.offsetWidth+"px"),n.css("width",e.listenResize.offsetWidth+"px"),u&&(u=e.listenResize.offsetWidth+"px"))}),t.element(d).on("scroll",function(){var e=(o?n:r)[0].getBoundingClientRect().top,i=0;if(t.forEach(t.element(document.querySelectorAll(".sticky.sticky-is-visible.sticky-keep-visible")),function(t){t!==r[0]&&t.offsetWidth>0&&t.offsetHeight>0&&(i+=t.offsetHeight)}),e<=i)o||((n=t.element("<div></div>")).css("width",r[0].offsetWidth+"px"),n.css("height",r[0].offsetHeight+"px"),r.after(n),t.element(document.querySelectorAll(".sticky.sticky-is-visible:not(.sticky-keep-visible)")).css("display","none"),r.css("width",r[0].offsetWidth+"px"),r.css("position","fixed"),r.css("top",i+"px"),r.css("left","0px"),r.addClass("sticky-is-visible"),o=!0);else if(n){n.remove(),r.css("width",u),r.css("display",a),r.css("position",s),r.css("top",c),r.css("left",l),r.removeClass("sticky-is-visible"),o=!1;var d=t.element(document.querySelectorAll(".sticky.sticky-is-visible"));d.length>0&&t.element(d[d.length-1]).css("display",a)}})})}}}];t.module("ngSticky",[]).directive("ngSticky",e)}(window.angular)},function(t,e,n){(function(t){!function(){var e="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function i(){i=function(){},e.Symbol||(e.Symbol=o)}var r=0;function o(t){return"jscomp_symbol_"+(t||"")+r++}function a(){i();var t=e.Symbol.iterator;t||(t=e.Symbol.iterator=e.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&n(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return s(this)}}),a=function(){}}function s(t){var n=0;return function(t){return a(),(t={next:t})[e.Symbol.iterator]=function(){return this},t}(function(){return n<t.length?{done:!1,value:t[n++]}:{done:!0}})}function c(t){a();var e=t[Symbol.iterator];return e?e.call(t):s(t)}function l(t){if(!(t instanceof Array)){t=c(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}var u=0;var d="img script iframe link audio video source".split(" ");function p(t,e){for(var n=(t=c(t)).next();!n.done;n=t.next())if(n=n.value,e.includes(n.nodeName.toLowerCase())||p(n.children,e))return!0;return!1}function f(t,e){if(2<t.length)return performance.now();for(var n=[],i=(e=c(e)).next();!i.done;i=e.next())i=i.value,n.push({timestamp:i.start,type:"requestStart"}),n.push({timestamp:i.end,type:"requestEnd"});for(i=(e=c(t)).next();!i.done;i=e.next())n.push({timestamp:i.value,type:"requestStart"});for(n.sort(function(t,e){return t.timestamp-e.timestamp}),t=t.length,e=n.length-1;0<=e;e--)switch(i=n[e],i.type){case"requestStart":t--;break;case"requestEnd":if(2<++t)return i.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function _(t){t=t||{},this.w=!!t.useMutationObserver,this.u=t.minValue||null,t=window.__tti&&window.__tti.e;var e=window.__tti&&window.__tti.o;this.a=t?t.map(function(t){return{start:t.startTime,end:t.startTime+t.duration}}):[],e&&e.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,function(t,e){var n=XMLHttpRequest.prototype.send,i=u++;XMLHttpRequest.prototype.send=function(r){for(var o=[],a=0;a<arguments.length;++a)o[a-0]=arguments[a];var s=this;return t(i),this.addEventListener("readystatechange",function(){4===s.readyState&&e(i)}),n.apply(this,o)}}(this.m.bind(this),this.l.bind(this)),function(t,e){var n=fetch;fetch=function(i){for(var r=[],o=0;o<arguments.length;++o)r[o-0]=arguments[o];return new Promise(function(i,o){var a=u++;t(a),n.apply(null,[].concat(l(r))).then(function(t){e(a),i(t)},function(t){e(t),o(t)})})}}(this.m.bind(this),this.l.bind(this)),function(t){t.c=new PerformanceObserver(function(e){for(var n=(e=c(e.getEntries())).next();!n.done;n=e.next())if("resource"===(n=n.value).entryType&&(t.b.push({start:n.fetchStart,end:n.responseEnd}),m(t,f(t.g,t.b)+5e3)),"longtask"===n.entryType){var i=n.startTime+n.duration;t.a.push({start:n.startTime,end:i}),m(t,i+5e3)}}),t.c.observe({entryTypes:["longtask","resource"]})}(this),this.w&&(this.h=function(t){var e=new MutationObserver(function(e){for(var n=(e=c(e)).next();!n.done;n=e.next())"childList"==(n=n.value).type&&p(n.addedNodes,d)?t(n):"attributes"==n.type&&d.includes(n.target.tagName.toLowerCase())&&t(n)});return e.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),e}(this.B.bind(this)))}function h(t){t.i=!0;var e=0<t.a.length?t.a[t.a.length-1].end:0,n=f(t.g,t.b);m(t,Math.max(n+5e3,e))}function m(t,e){!t.i||t.v>e||(clearTimeout(t.j),t.j=setTimeout(function(){var e=performance.timing.navigationStart,n=f(t.g,t.b);e=(window.a&&window.a.A?1e3*window.a.A().C-e:0)||performance.timing.domContentLoadedEventEnd-e;if(t.u)var i=t.u;else performance.timing.domContentLoadedEventEnd?i=(i=performance.timing).domContentLoadedEventEnd-i.navigationStart:i=null;var r=performance.now();null===i&&m(t,Math.max(n+5e3,r+1e3));var o=t.a;5e3>r-n?n=null:n=5e3>r-(n=o.length?o[o.length-1].end:e)?null:Math.max(n,i),n&&(t.s(n),clearTimeout(t.j),t.i=!1,t.c&&t.c.disconnect(),t.h&&t.h.disconnect()),m(t,performance.now()+1e3)},e-performance.now()),t.v=e)}_.prototype.getFirstConsistentlyInteractive=function(){var t=this;return new Promise(function(e){t.s=e,"complete"==document.readyState?h(t):window.addEventListener("load",function(){h(t)})})},_.prototype.m=function(t){this.f.set(t,performance.now())},_.prototype.l=function(t){this.f.delete(t)},_.prototype.B=function(){m(this,performance.now()+5e3)},e.Object.defineProperties(_.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(l(this.f.values()))}}});var g={getFirstConsistentlyInteractive:function(t){return t=t||{},"PerformanceLongTaskTiming"in window?new _(t).getFirstConsistentlyInteractive():Promise.resolve(null)}};window.ttiPolyfill=g}()}).call(this,n(1))},function(t,e,n){var i={"./components/active_referent.js":280,"./components/ad_container_with_close_button.js":281,"./components/admin_task.js":282,"./components/admin_tasks_page.js":283,"./components/admin_user_info.js":284,"./components/adwords_ad_form.js":285,"./components/adwords_ad_group_form.js":286,"./components/adwords_ad_group_list.js":287,"./components/adwords_campaign_form.js":288,"./components/adwords_campaign_list.js":289,"./components/adwords_editor.js":290,"./components/album_admin_menu.js":291,"./components/album_grid.js":292,"./components/album_metadata_form.js":293,"./components/album_page.js":294,"./components/album_tracklist_row.js":295,"./components/android_banner.js":296,"./components/annotation_embed.js":297,"./components/annotation_preview.js":298,"./components/annotation_share_menu.js":299,"./components/answer.js":300,"./components/apple_match_evaluations_page.js":301,"./components/apple_music_player.js":302,"./components/article_admin_bar.js":303,"./components/article_authors.js":304,"./components/article_content_actions.js":305,"./components/article_contributor_badge.js":306,"./components/article_index_arrangeable.js":307,"./components/article_index_item.js":308,"./components/article_page.js":309,"./components/artist_badge.js":310,"./components/artist_opportunities.js":311,"./components/artist_songs.js":312,"./components/artist_songs_and_albums.js":313,"./components/artist_songs_modal.js":314,"./components/artist_tooltip.js":315,"./components/artist_verification.js":316,"./components/audio_source_label.js":317,"./components/breadcrumbs.js":318,"./components/collapsible_content.js":319,"./components/comment_list.js":320,"./components/comments.js":321,"./components/contact_button.js":322,"./components/contribution_opportunity.js":323,"./components/cover_art_form.js":324,"./components/cover_art_modal.js":325,"./components/defer_compile.js":326,"./components/deleted_answer.js":327,"./components/detailed_song_search.js":328,"./components/dfp_ad.js":329,"./components/edit_artist_profile.js":330,"./components/edit_user_email_preferences.js":331,"./components/edit_user_profile.js":332,"./components/editable_tracklist.js":333,"./components/editable_tracklist_number.js":334,"./components/embedly_embed.js":335,"./components/embedly_youtube.js":336,"./components/expandable_container.js":337,"./components/expandable_diff.js":338,"./components/facebook_share_button.js":339,"./components/hang_initial_quote.js":340,"./components/header_actions.js":341,"./components/header_admin.js":342,"./components/header_auth.js":343,"./components/header_with_cover_art.js":344,"./components/hidden_fields.js":345,"./components/image_upload_button.js":346,"./components/inbox.js":347,"./components/inbox_container.js":348,"./components/inbox_icon.js":349,"./components/inbox_line_item_detail_discussion.js":350,"./components/inbox_line_item_detail_discussion_header.js":351,"./components/inbox_line_item_detail_forum_post.js":352,"./components/inbox_line_item_detail_forum_post_single.js":353,"./components/inbox_line_item_detail_lyrics_diff.js":354,"./components/inbox_line_item_detail_object.js":355,"./components/inbox_line_item_message.js":356,"./components/iq_inbox.js":357,"./components/iq_notification_list.js":358,"./components/leaderboard_ad.js":359,"./components/lyrics_edit_proposal.js":360,"./components/lyrics_edit_proposal_form.js":361,"./components/lyrics_edit_proposal_moderation.js":362,"./components/lyrics_export_preview.js":363,"./components/lyrics_sync_editor.js":364,"./components/lyrics_sync_home.js":365,"./components/manage_chart_item.js":366,"./components/manage_roles.js":367,"./components/marquee_ad.js":368,"./components/media_player.js":369,"./components/merge_artist_form.js":370,"./components/messages_inbox.js":371,"./components/mini_album_card.js":372,"./components/mini_annotatable_card.js":373,"./components/mini_article_card.js":374,"./components/mini_artist_card.js":375,"./components/mini_song_card.js":376,"./components/mini_user_card.js":377,"./components/mini_video_card.js":378,"./components/missing_metadata_form.js":379,"./components/notification_inbox.js":380,"./components/other_users_with_ip.js":381,"./components/page_transition_overlay.js":382,"./components/paginated_accomplishments.js":383,"./components/paginated_leaderboard.js":384,"./components/profile_admin_pane.js":385,"./components/profile_all_activity.js":386,"./components/profile_annotation.js":387,"./components/profile_artist_description_preview.js":388,"./components/profile_artist_pane.js":389,"./components/profile_contributions_annotations.js":390,"./components/profile_contributions_answers.js":391,"./components/profile_contributions_articles.js":392,"./components/profile_contributions_comments.js":393,"./components/profile_contributions_group.js":394,"./components/profile_contributions_pyongs.js":395,"./components/profile_contributions_questions.js":396,"./components/profile_contributions_transcriptions.js":397,"./components/profile_followers.js":398,"./components/profile_identity.js":399,"./components/profile_page.js":400,"./components/profile_user_description_preview.js":401,"./components/profile_user_pane.js":402,"./components/question.js":403,"./components/question_form.js":404,"./components/question_list.js":405,"./components/reasons_toggle.js":406,"./components/recent_signups_page.js":407,"./components/recirculated_content.js":408,"./components/relevant_videos.js":409,"./components/routable_page.js":410,"./components/routable_profile_page.js":411,"./components/routable_user_page.js":412,"./components/routed_page.js":413,"./components/search_result_item.js":414,"./components/search_result_items.js":415,"./components/search_result_paginated_section.js":416,"./components/search_result_section.js":417,"./components/search_results.js":418,"./components/search_results_page.js":419,"./components/select_dropdown.js":420,"./components/song_album.js":421,"./components/song_albums.js":422,"./components/song_attribution_visualization.js":423,"./components/song_header_media_player_controls.js":424,"./components/song_metadata_song_relationships_input.js":425,"./components/song_missing_metadata.js":426,"./components/song_page.js":427,"./components/song_page_sidebar_multi_placement.js":428,"./components/song_preview.js":429,"./components/song_story_carousel.js":430,"./components/song_story_featured_story_placement.js":431,"./components/song_story_gallery_page.js":432,"./components/song_story_lead_story_placement.js":433,"./components/song_story_modal.js":434,"./components/song_story_sticky_placement.js":435,"./components/song_top_verified_artist.js":436,"./components/song_verified_artists.js":437,"./components/song_verified_artists_section.js":438,"./components/song_verified_artists_section_single.js":439,"./components/spam_status.js":440,"./components/square_item_and_iq.js":441,"./components/standalone_inbox.js":442,"./components/standalone_search.js":443,"./components/statistics_panel.js":444,"./components/statistics_panel_item.js":445,"./components/taboola.js":446,"./components/twitter_share_button.js":447,"./components/user_attribution.js":448,"./components/user_identities.js":449,"./components/user_info_with_actions.js":450,"./components/user_moderation.js":451,"./components/vertical_album_card.js":452,"./components/vertical_search_result_item.js":453,"./components/vertical_search_result_items.js":454,"./components/video_carousel.js":455,"./components/video_edit_form.js":456,"./components/video_list_edit_form.js":457,"./components/video_list_page.js":458,"./components/video_list_video.js":459,"./components/video_page.js":460,"./components/video_relevance_reason.js":461,"./components/videos_modal.js":462,"./components/web_annotator_manager.js":463,"./components/web_annotator_manager_errors.js":464,"./components/web_annotator_roles_table.js":465,"./components/youtube_subscribe_button.js":466,"./constants/ad_config.js":467,"./constants/analytics_config.js":468,"./constants/diff_match_patch.js":469,"./constants/mobile_device.js":470,"./controllers/article_form_ctrl.js":471,"./controllers/custom_app_notification_ctrl.js":472,"./controllers/dev_ctrl.js":473,"./controllers/fact_track_annotation_edit_ctrl.js":474,"./controllers/fact_track_song_edit_ctrl.js":475,"./controllers/header_ctrl.js":476,"./controllers/song_ctrl.js":477,"./directives/add_annotation.js":478,"./directives/always_dirty.js":479,"./directives/amp_iframe_resizable.js":480,"./directives/annotatable_image.js":481,"./directives/annotation.js":482,"./directives/annotation_edit.js":483,"./directives/annotation_edits.js":484,"./directives/annotation_fragment.js":485,"./directives/annotation_history.js":486,"./directives/annotation_placeholder.js":487,"./directives/annotation_sidebar.js":488,"./directives/apply_annotation_arrow_class.js":489,"./directives/authentication_form.js":490,"./directives/auto_resize_iframe.js":491,"./directives/autocomplete_tags_input.js":492,"./directives/autocomplete_with.js":493,"./directives/brightcove.js":494,"./directives/class_for_browser.js":495,"./directives/class_for_duration.js":496,"./directives/click_outside.js":497,"./directives/click_to_load.js":498,"./directives/clipped_background_image.js":499,"./directives/comment.js":500,"./directives/comment_form.js":501,"./directives/comments_placeholder.js":502,"./directives/component_date_input.js":503,"./directives/compose_message.js":504,"./directives/confirm.js":505,"./directives/conversation_messages.js":506,"./directives/conversation_with_user.js":507,"./directives/conversations.js":508,"./directives/copy_to_clipboard.js":509,"./directives/copy_value_to_scope.js":510,"./directives/cosigns.js":511,"./directives/delayed_href.js":512,"./directives/delimited_keys.js":513,"./directives/description_referent.js":514,"./directives/detect_image_diffs.js":515,"./directives/dirtyable.js":516,"./directives/display_unless_cookie.js":517,"./directives/drag_and_drop.js":518,"./directives/editable_markdown.js":520,"./directives/embedly.js":521,"./directives/embedly_player.js":525,"./directives/empty_copy_content.js":527,"./directives/expandable_accordion_section.js":528,"./directives/expandable_list.js":529,"./directives/exports_form_api.js":530,"./directives/fact_track_simulator.js":531,"./directives/filepicker_input.js":532,"./directives/flash_messages.js":533,"./directives/focus_on_change.js":534,"./directives/follow_button.js":535,"./directives/global_error_message.js":536,"./directives/global_message.js":537,"./directives/handle_intra_page_links.js":538,"./directives/handle_routable_links.js":539,"./directives/header_menu_item.js":540,"./directives/hide_song_form.js":541,"./directives/http_method.js":542,"./directives/inbox_line_item.js":543,"./directives/inbox_line_item_action_icon.js":544,"./directives/inbox_line_item_detail.js":545,"./directives/infinite_scroll.js":546,"./directives/insertable_at_cursor.js":548,"./directives/kb.js":549,"./directives/keep_in_view.js":551,"./directives/leaderboard.js":552,"./directives/links_navigable_by_arrow_keys.js":553,"./directives/local_referent_routing.js":554,"./directives/lock_scroll_position_on_ios.js":555,"./directives/lyric_sync_timestamp_input.js":556,"./directives/lyrics.js":557,"./directives/lyrics_sync_keyboard.js":558,"./directives/markdown_preview.js":559,"./directives/media_controls.js":560,"./directives/mentionable.js":561,"./directives/metadata_custom_performance_role_input.js":562,"./directives/metadata_input_and_label.js":563,"./directives/modal_window.js":564,"./directives/mousetrap_input.js":565,"./directives/mutually_exclusive_switches.js":566,"./directives/navigate_on_click.js":567,"./directives/new_conversation.js":568,"./directives/ng_autofocus.js":569,"./directives/ng_body_class.js":570,"./directives/ng_click_disabled.js":571,"./directives/odometer.js":572,"./directives/on_hover_with_no_digest.js":573,"./directives/on_iframe_load.js":574,"./directives/on_inner_height_change.js":575,"./directives/on_load.js":576,"./directives/open_links_in_new_window.js":577,"./directives/placeholder_spinner.js":578,"./directives/placeholder_text.js":579,"./directives/placeholder_user_badge.js":580,"./directives/play_pause_button.js":581,"./directives/position_beside.js":582,"./directives/preload.js":583,"./directives/prevent_default_click.js":584,"./directives/prevent_default_keydown.js":585,"./directives/proxied_image.js":586,"./directives/pusher.js":587,"./directives/pyong_button.js":588,"./directives/pyong_form.js":589,"./directives/quick_search.js":590,"./directives/referent_fragment_container.js":591,"./directives/release_date.js":592,"./directives/remove_class_on_angular_load.js":593,"./directives/role_icon.js":594,"./directives/role_selection_dialog.js":595,"./directives/scroll_from_bottom.js":596,"./directives/scroll_only_this_element.js":597,"./directives/scroll_point.js":598,"./directives/scroll_to_bottom_when.js":599,"./directives/scroll_to_top_on_change.js":600,"./directives/scrollable_data.js":601,"./directives/scrubber.js":602,"./directives/search_form.js":603,"./directives/select_all_on_click.js":684,"./directives/set_class_before_navigate.js":685,"./directives/set_cookie_and_close_on_click.js":686,"./directives/set_desired_location.js":687,"./directives/share_buttons.js":688,"./directives/show_arrow_at_offset.js":689,"./directives/show_if_browser.js":690,"./directives/simple_datetime_input.js":691,"./directives/sized_src.js":692,"./directives/slide_down.js":693,"./directives/slide_over_pane.js":694,"./directives/slide_up_on.js":695,"./directives/song_activity.js":696,"./directives/song_admin_menu.js":697,"./directives/song_metadata.js":698,"./directives/song_metadata_form.js":699,"./directives/song_metadata_preview.js":700,"./directives/song_primary_album.js":701,"./directives/soundcloud.js":702,"./directives/spotify_onboarding.js":703,"./directives/standalone_referent.js":704,"./directives/standard_rich_content.js":705,"./directives/sticky.js":706,"./directives/stop_propagation.js":707,"./directives/submit_on_cmd_enter.js":708,"./directives/svg.js":709,"./directives/tether_drop.js":710,"./directives/text_corrector.js":711,"./directives/text_selection_changed.js":712,"./directives/textarea.js":713,"./directives/time_ago.js":714,"./directives/timestamp_input.js":715,"./directives/tracking.js":716,"./directives/tracks_link_with_class.js":717,"./directives/transclude_injecting_local_scope.js":718,"./directives/upwards_infinite_scroll.js":719,"./directives/user_badge.js":720,"./directives/user_badge_and_timestamp.js":721,"./directives/user_tooltip.js":722,"./directives/voters.js":723,"./directives/voting.js":724,"./directives/watch_images_loaded.js":725,"./directives/web_annotator_role_row.js":726,"./directives/yields_bounding_box_height.js":727,"./directives/youtube_player.js":728,"./factories/$debounce.js":729,"./factories/$immediate.js":730,"./factories/$throttle.js":731,"./factories/ab_test.js":732,"./factories/ab_test_client.js":733,"./factories/accomplishment_client.js":734,"./factories/admin_task_client.js":735,"./factories/ads.js":736,"./factories/adwords_ad_client.js":737,"./factories/adwords_ad_group_client.js":738,"./factories/adwords_campaign_client.js":739,"./factories/adwords_network_client.js":740,"./factories/album_client.js":741,"./factories/annotation_client.js":742,"./factories/answer_client.js":743,"./factories/api_client.js":744,"./factories/app_config.js":745,"./factories/apple_audio_playback.js":746,"./factories/apple_match_evaluations_client.js":747,"./factories/application_bootstrap.js":748,"./factories/article_client.js":749,"./factories/artist_client.js":750,"./factories/asset_client.js":751,"./factories/async_analytics.js":752,"./factories/attempt.js":753,"./factories/authentication_client.js":754,"./factories/autosize.js":755,"./factories/before_unload_check.js":758,"./factories/bindings.js":759,"./factories/bowser.js":760,"./factories/branded_chart_client.js":761,"./factories/brightcove.js":762,"./factories/channel.js":763,"./factories/chart_client.js":764,"./factories/classnames.js":765,"./factories/clipboard.js":768,"./factories/comment_client.js":771,"./factories/contribution_opportunity_assignment_client.js":772,"./factories/conversation_client.js":773,"./factories/cookies.js":774,"./factories/cover_art_client.js":775,"./factories/cursored_data_feed.js":776,"./factories/custom_app_notification_client.js":777,"./factories/custom_performance_role_client.js":778,"./factories/date_tools.js":779,"./factories/discussion_client.js":780,"./factories/eager_loader.js":781,"./factories/event_emitter.js":782,"./factories/facebook.js":783,"./factories/feedback_client.js":784,"./factories/filepicker.js":785,"./factories/follow_client.js":786,"./factories/get_script.js":787,"./factories/global_error_bus.js":788,"./factories/global_error_interceptor.js":789,"./factories/global_page_state_bus.js":790,"./factories/global_refs.js":791,"./factories/google.js":792,"./factories/html_constants.js":793,"./factories/i18n.js":794,"./factories/identity_client.js":795,"./factories/image_transform.js":796,"./factories/inbox_client.js":797,"./factories/intersection_observer.js":798,"./factories/iq.js":799,"./factories/leaderboard_client.js":800,"./factories/librato.js":801,"./factories/link_events.js":802,"./factories/local_storage.js":803,"./factories/lookup_client.js":804,"./factories/lyrics.js":805,"./factories/lyrics_anchorer.js":806,"./factories/lyrics_edit_proposal.js":807,"./factories/lyrics_edit_proposal_client.js":808,"./factories/lyrics_editing.js":809,"./factories/lyrics_synchronization_client.js":811,"./factories/markdown.js":812,"./factories/markdown_helpers.js":815,"./factories/markdown_plaintext_finder_regex.js":816,"./factories/markdown_preview_client.js":817,"./factories/mention_client.js":818,"./factories/message_client.js":819,"./factories/meta_tag_data.js":820,"./factories/mixed_data_feed.js":821,"./factories/model_router.js":822,"./factories/moment.js":823,"./factories/mousetrap.js":824,"./factories/music_kit.js":827,"./factories/mutation_observer.js":829,"./factories/new_relic.js":830,"./factories/odometer.js":831,"./factories/on_within_visibility_range.js":834,"./factories/only_changes.js":835,"./factories/onsite_interceptor.js":836,"./factories/page_data_client.js":837,"./factories/page_transition.js":838,"./factories/page_visibility.js":839,"./factories/paged_data_feed.js":840,"./factories/parse_time_string.js":841,"./factories/patch_structured_text.js":842,"./factories/performance_mark.js":843,"./factories/player_js":133,"./factories/player_js.js":133,"./factories/preloader.js":844,"./factories/promise_queue.js":845,"./factories/pusher.js":846,"./factories/pyong_client.js":848,"./factories/querystring.js":849,"./factories/question_client.js":851,"./factories/referent_client.js":852,"./factories/referent_element_map.js":853,"./factories/referent_helper.js":854,"./factories/referent_locator.js":855,"./factories/referent_registry.js":856,"./factories/retry_failure_interceptor.js":857,"./factories/reversible.js":858,"./factories/scroll_focus.js":859,"./factories/scroll_point.js":860,"./factories/search_client.js":861,"./factories/session.js":862,"./factories/session_config.js":863,"./factories/shim_inner_html_prop.js":864,"./factories/signed_out_created_content.js":865,"./factories/smart_routing.js":866,"./factories/song_client.js":867,"./factories/soundcloud.js":868,"./factories/spotify_annotation_client.js":869,"./factories/spotify_client.js":870,"./factories/spotify_player.js":871,"./factories/spotify_player_client.js":872,"./factories/spotify_socket.js":873,"./factories/stop_watch.js":874,"./factories/story_client.js":875,"./factories/string_has_unmatched_parentheses.js":876,"./factories/string_to_symbol_array.js":877,"./factories/structured_text.js":878,"./factories/taboola.js":879,"./factories/tag_client.js":880,"./factories/tether_drop.js":881,"./factories/text_selection.js":884,"./factories/timestamped_data_feed.js":885,"./factories/top_bar_indicators_loader.js":886,"./factories/tracking.js":1035,"./factories/twitter.js":888,"./factories/user_client.js":889,"./factories/video_client.js":890,"./factories/video_list_client.js":891,"./factories/video_placement.js":892,"./factories/video_registry.js":893,"./factories/video_sources_client.js":894,"./factories/vote_client.js":895,"./factories/wait_for_global.js":896,"./factories/wait_until.js":897,"./factories/waypoint.js":898,"./factories/web_annotator_client.js":901,"./factories/web_audio_player.js":902,"./factories/window_title.js":903,"./factories/youtube.js":904,"./filters/abbreviate_big_number.js":905,"./filters/and_more.js":906,"./filters/bounded_count.js":907,"./filters/capitalize.js":908,"./filters/cast_to_date.js":909,"./filters/description_annotation_name.js":910,"./filters/drop.js":911,"./filters/generic_line_item_message.js":912,"./filters/highlight_braced.js":913,"./filters/human_readable_datetime.js":914,"./filters/i18n.js":915,"./filters/imprecise_date.js":916,"./filters/indefinitize.js":917,"./filters/millis_to_duration.js":918,"./filters/milliseconds_to_seconds.js":919,"./filters/min.js":920,"./filters/min_by.js":921,"./filters/minimum_readable_time.js":922,"./filters/minus_modulo.js":923,"./filters/model_human_name.js":924,"./filters/rich_content_preview.js":925,"./filters/role_human_name.js":926,"./filters/signed_number.js":927,"./filters/snake_case.js":928,"./filters/spotify_artist_metadata.js":929,"./filters/svg.js":930,"./filters/timestamp_for_display.js":931,"./filters/to_utc.js":932,"./filters/truncate_to_boundary.js":933,"./filters/with_indefinite_article.js":934,"./filters/without_zero_width_spaces.js":935,"./values/current_flash_messages.js":936,"./values/preload_cache.js":937,"./values/xpath_range.js":938};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=279},function(t,e){angular.module("genius").component("activeReferent",{bindings:{referent:"<",on_navigate:"&onNavigate",on_close:"&onClose"},templateUrl:"active_referent.html",controller:["Cookies",function(t){this.$onInit=function(){var e=this;this.session_referent_open_count=Number(t.get("referent_open_count_for_interstitial")||0),this.increment_session_referent_open_count=function(){this.session_referent_open_count+=1,this.session_referent_open_count<=2&&t.put("referent_open_count_for_interstitial",this.session_referent_open_count,{expires:.25})},this.should_show_interstitial=function(){return 2===e.session_referent_open_count}},this.$onChanges=function(t){t.referent&&t.referent.currentValue&&this.increment_session_referent_open_count()}}]})},function(t,e){angular.module("genius").component("adContainerWithCloseButton",{templateUrl:"ad_container_with_close_button.html",transclude:!0,controller:["$window","$element","$timeout",function(t,e,n){var i=this;t.googletag&&t.googletag.cmd.push(function(){t.googletag.pubads().addEventListener("slotRenderEnded",function(t){!t.isEmpty&&e.find("#".concat(t.slot.getSlotElementId())).length>0&&n(function(){return i.show_close_button=!0},1e4)})})}]})},function(t,e){angular.module("genius").component("adminTask",{bindings:{task:"<"},templateUrl:"admin_task.html",controller:["AdminTaskClient",function(t){var e=this;this.$onChanges=function(t){e.property_values=_.reduce(t.task.currentValue.task_properties,function(t,e){return t[e.name]=e.default,t},{})},this.is_url=function(t){return/^https?:\/\/\S+$/.test(t)},this.perform_task=function(){e.task.confirmation&&!confirm(e.task.confirmation)||(e.validation_errors=null,e.success_message=null,e.tabular_data=null,e.saving=!0,t.perform_task(e.task,e.property_values).then(function(t){e.success_message=t.admin_task_result.success_message,e.tabular_data=t.admin_task_result.tabular_data}).catch(function(t){t.response.validation_errors?e.validation_errors=t.response.validation_errors:e.validation_errors={base:["Something unexpected went wrong"]}}).finally(function(){return e.saving=!1}))}}]})},function(t,e){angular.module("genius").component("adminTasksPage",{templateUrl:"admin_tasks_page.html",controller:Object.assign(["$scope","AdminTaskClient",function(t,e){var n=this;this.no_task={name:"__default",label:"--Choose a task to run--"},this.$routerOnActivate=function(e){n.tasks=e.routeData.page_data.tasks,t.selected_task=n.no_task,n.select_tasks=[n.no_task].concat(_.sortBy(n.tasks.map(function(t){return{name:t.name,label:t.human_name}}),"label"))},t.$watch("selected_task",function(i){t.admin_task=null,i.name!==n.no_task.name&&e.get(i.name).then(function(e){t.admin_task=e.admin_task})})}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("adminUserInfo",{templateUrl:"admin_user_info.html",bindings:{user:"<"}})},function(t,e){angular.module("genius").component("adwordsAdForm",{templateUrl:"adwords_ad_form.html",bindings:{onSave:"&",onClose:"&",ad_group:"<adGroup"},controller:["AdwordsAdClient",function(t){var e=this;this.save=function(n){e.saving=!0,t.create(e.ad_group.id,n).then(function(){this.onSave(),this.onClose()}).finally(function(){Reflect.deleteProperty(e,"saving")})}}]})},function(t,e){angular.module("genius").component("adwordsAdGroupForm",{templateUrl:"adwords_ad_group_form.html",bindings:{onSave:"&",onClose:"&",campaign:"<"},controller:["AdwordsAdGroupClient",function(t){var e=this;this.save=function(n){e.saving=!0,t.create(e.campaign.id,n).then(function(){e.onSave(),e.onClose()}).finally(function(){Reflect.deleteProperty(e,"saving")})}}]})},function(t,e){angular.module("genius").component("adwordsAdGroupList",{templateUrl:"adwords_ad_group_list.html",bindings:{campaign:"<"},controller:["AdwordsAdGroupClient","AdwordsAdClient",function(t,e){var n=this;this.change_ad_status=function(t,n){e.update(t.id,{status:n}).then(function(e){_.assign(t,e)})},this.load_ad_groups=function(){n.loading=!0,t.all(n.campaign.id).then(function(t){n.ad_groups=t}).finally(function(){Reflect.deleteProperty(n,"loading")})},this.$onChanges=function(t){t.campaign&&n.load_ad_groups()}}]})},function(t,e){angular.module("genius").component("adwordsCampaignForm",{templateUrl:"adwords_campaign_form.html",bindings:{onSave:"&",onClose:"&"},controller:["AdwordsNetworkClient","AdwordsCampaignClient",function(t,e){var n=this;this.available_adwords_networks=[],this.save=function(t){return n.saving=!0,e.create(t).then(function(){this.onSave(),this.onClose()}).finally(function(){Reflect.deleteProperty(n,"saving")})},t.all().then(function(t){n.available_adwords_networks=t})}]})},function(t,e){angular.module("genius").component("adwordsCampaignList",{templateUrl:"adwords_campaign_list.html",bindings:{onSelect:"&",selected_campaign:"<selectedCampaign"},controller:["AdwordsCampaignClient",function(t){var e=this;this.select=function(t){return e.onSelect({campaign:t})},this.load_campaigns=function(){e.loading=!0,t.all().then(function(t){e.grouped_campaigns=_.values(_.groupBy(t,"network.id"))}).finally(function(){Reflect.deleteProperty(e,"loading")})},this.$onInit=this.load_campaigns}]})},function(t,e){angular.module("genius").component("adwordsEditor",{templateUrl:"adwords_editor.html"})},function(t,e){angular.module("genius").component("albumAdminMenu",{templateUrl:"album_admin_menu.html",bindings:{album:"<",album_appearances:"<albumAppearances"},controller:["Session","Attempt","AlbumClient","currentFlashMessages","$window",function(t,e,n,i,r){var o=this;this.actions=["destroy","unlock","lock","super_lock","sort_songs"];var a=["sort_songs"];this.can_perform=function(e){return t.has_permission(e,o.album)};var s=function(t){n.change_lock_state(o.album.id,t).then(function(e){i.push({type:"notice",message:"Successfully ".concat(t,"ed album")}),Object.assign(o.album,e)})},c={destroy:function(){n.delete(o.album.id).then(function(){i.push({type:"notice",message:"Successfully deleted album"}),r.location.href="/"})},lock:function(){return s("lock")},super_lock:function(){return s("super_lock")},unlock:function(){return s("unlock")},sort_songs:function(){return o.show_sorted_modal=!0}};this.attempt_admin_action=function(t){if(_.includes(a,t))return c[t]();e.admin_action(c[t],I18n.lookup("album.action_confirmations.".concat(t))||I18n.t("album.action_confirmations.admin_default"))},this.$onChanges=function(){o.has_admin_items=_(o.actions).some(function(t){return o.can_perform(t)})},this.tracklist_markup=function(){var t="[".concat(o.album.artist.name,"](").concat(o.album.artist.url,") - [*").concat(o.album.name,"*](").concat(o.album.url,")");return"<b>".concat(t," Lyrics and Tracklist</b>\n\n")+o.album_appearances.map(function(t){var e=t.song.featured_artists.map(function(t){return t.name}).join(", ");return"".concat(t.track_number||"?",". [").concat(t.song.title,"](").concat(t.song.url,")").concat(e?" ft. ".concat(e):"")}).join("\n")}}]})},function(t,e){angular.module("genius").component("albumGrid",{templateUrl:"album_grid.html",bindings:{albums:"<",artist:"<",count:"<",variants:"<"},controller:["PagedDataFeed","ArtistClient",function(t,e){var n=this;this.$onChanges=function(i){i.artist&&(n.artist_album_scrollable_data=new t(_.partial(e.load_albums,n.artist.id),"albums"))}}]})},function(t,e){angular.module("genius").component("albumMetadataForm",{templateUrl:"album_metadata_form.html",bindings:{album_was:"<album",on_save:"&onSave",close:"&",yields_is_dirty:"&yieldsIsDirty"},controller:[function(){var t=this;this.$onInit=function(){t.album=angular.copy(t.album_was)},this.save=function(){t.on_save({album:t.album}).catch(function(e){t.error=e})}}]})},function(t,e){angular.module("genius").component("albumPage",{templateUrl:"album_page.html",controller:Object.assign(["VideoRegistry","mobile_device","Tracking","AlbumClient","Session","Attempt","Reversible","SmartRouting","$q","$location","$immediate",function(t,e,n,i,r,o,a,s,c,l,u){var d=this;this.has_permission=function(t){return r.has_permission(t,d.page_data.album)},this.user_signed_in=r.user_signed_in,this.attempt_close=o.close_form,this.is_released=function(){var t=d.page_data.album.release_date_components,e=new Date;return e.getFullYear()===t.year&&t.month?e.getMonth()+1===t.month&&t.day?e.getDate()>=t.day:e.getMonth()+1>=t.month:e.getFullYear()>=t.year},this.close_form=function(){d.editing=!1,d.current_edit_panel=null},this.save=function(t){d.saving=!0;var e=a.modify(d.page_data.album,t);return i.update(d.page_data.album.id,t).then(function(t){Object.assign(d.page_data.album,t),d.close_form()}).catch(function(t){return e(),c.reject(t)}).finally(function(){d.saving=!1})},this.$routerCanReuse=function(t){return"album"===t.routeData.data.type?"/".concat(t.urlPath)===d.page_data.path:"album_cover_art"===t.routeData.data.type&&Boolean(p(t.params.cover_art_id))},this.$routerOnReuse=function(t){"album_cover_art"===t.routeData.data.type?d.focused_cover_art_id=parseInt(t.params.cover_art_id):d.focused_cover_art_id=null},this.$routerOnActivate=function(r){if(d.page_data=r.routeData.page_data,d.get_leaderboard_page=function(t){return i.load_leaderboard(d.page_data.album.id,t)},t.register_page(d.page_data.album,e?"mobile_album_page":"desktop_album_page"),n.delayed_track("Album Page Load",{"Album ID":d.page_data.album.id}),r.params.cover_art_id){var o=p(r.params.cover_art_id);o&&u(function(){return s.navigate_to_absolute_url(o.url)})}},this.unfocus_cover_art=function(){return l.url(d.page_data.path)};var p=function(t){var e=parseInt(t),n=_.get(d,["page_data","album","cover_arts"],[]);return _.find(n,function(t){return t.id===e})}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("albumTracklistRow",{bindings:{album_appearance:"<albumAppearance",show_artist:"<showArtist"},templateUrl:"album_tracklist_row.html",controller:["Session",function(t){var e=this;this.has_credits=function(){return e.album_appearance.song.featured_artists.length||e.album_appearance.song.producer_artists.length||e.album_appearance.song.writer_artists.length},this.can=function(n){return t.has_permission(n,e.album_appearance.song)}}]})},function(t,e){var n;n=["to identify songs on the go","to get lyrics to the songs you play","to read lyrics offline"],angular.module("genius").component("androidBanner",{templateUrl:"android_banner.html",bindings:{page:"@"},controller:["Bowser","AppConfig",function(t,e){this.benefit=_.sample(n),this.is_android=t.android,this.play_store_url=e.play_store_url}]})},function(t,e){angular.module("genius").component("annotationEmbed",{bindings:{referent:"<",simple:"<"},templateUrl:"annotation_embed.html",controller:["ReferentHelper",function(t){var e=this;this.$onChanges=function(n){n.referent&&(e.display_mode=t.display_mode_by_classification(e.referent.classification))}}]})},function(t,e){angular.module("genius").component("annotationPreview",{bindings:{annotation_preview:"<annotationPreview",click_handler:"&clickHandler",dismissal_handler:"&dismissalHandler",reactivation_handler:"&reactivationHandler",is_dismissed:"<isDismissed"},templateUrl:"annotation_preview.html",controller:["$scope","Tracking",function(t,e){var n=this;t.$watch("$ctrl.annotation_preview",function(){n.annotation_preview&&(n.annotation_content_switch=!n.annotation_content_switch)}),this.on_click=function(){e.track("Tap Annotation Teaser",n.tracking_params()),n.click_handler()},this.tracking_params=function(){return{"Annotation ID":_.get(n.annotation_preview,"id")}}}]})},function(t,e){angular.module("genius").component("annotationShareMenu",{templateUrl:"annotation_share_menu.html",bindings:{annotation:"<",variants:"<"}})},function(t,e){angular.module("genius").component("answer",{bindings:{answer:"<",question:"<",yieldsApi:"&",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",variants:"<"},templateUrl:"answer.html",controller:["$scope","Reversible","AnswerClient","Session",function(t,e,n,i){var r,o=this;this.user_signed_in=i.user_signed_in,this.source_form_open=this.answer&&this.answer.answer_source,this.can=function(t,e){return i.has_permission(t,e)},this.show_contributors=function(){return _.get(o,"answer.answer_source.source_name")?o.can("update_answer_source",o.question)?o.question.contributors_count:void 0:o.question.contributors_count},this.answer_is_unwritten=function(){return!_.get(o,"answer.body.html")},this.question_is_archived=function(){return"archived"===o.question.state},this.question_is_pinned=function(){return"pinned"===o.question.state},this.start_editing=function(){o.answer||(o.answer={body:{}}),o.answer._editing=_.defaults(o.answer._editing||{},{_form_active:!0,html:o.answer.body.html,markdown:o.answer.body.markdown})},this.cancel_editing=function(){Reflect.deleteProperty(o.answer,"_editing")},this.finish_editing=function(){if(!o.disable_saving_with){o.disable_saving_with="Saving",o.errors=null;var t=e.modify(o.answer,{"_editing._form_active":!1});!o.source_form_open&&o.answer.answer_source&&(o.answer.answer_source=null);var i=n.save(o.answer,{question:o.question}).then(o.cancel_editing);o.on_pending_event({event:"UserCreateAnswer",result:i}),i.catch(function(e){o.errors=e.errors,t()}).finally(function(){o.disable_saving_with=!1})}},this.destroy=function(){var t=o.answer;o.answer={body:{}},n.destroy(t,{question:o.question}).catch(function(){o.answer=t})},this.showing_contributors=!1,this.toggle_contributors=function(){o.showing_contributors=!o.showing_contributors},this.show_answer_form_by_default=function(){return o.can("add_answer",o.question)&&o.answer_is_unwritten()&&!o.question_is_archived()},this.show_answer_edit_form=function(){return _.get(o,"answer._editing._form_active")||o.show_answer_form_by_default()},this.show_answer=function(){return!o.answer_is_unwritten()&&!_.get(o,"answer._editing._form_active")},this.show_blank_answer_message=function(){return o.answer_is_unwritten()&&!o.show_answer_form_by_default()&&!_.get(o,"answer._editing._form_active")};var a=this;r={start_editing:function(){a.start_editing()},can_edit:function(){return a.can("edit",a.answer)},clear_answer:function(){a.destroy()},can_clear:function(){return a.can("destroy",a.answer)}},this.yieldsApi({answerApi:r}),i.user_signed_in&&(this.iq_api=_.cloneDeep(this.question.current_user_metadata.iq_by_action),t.$watch("$ctrl.question.votes_total",function(t){o.iq_api.answer.primary.multiplier=_.max([t,1])}),t.$watch("$ctrl.answer._editing.pin_question",function(t){o.iq_api.answer.pin.applicable=t||"pinned"===o.question.state}),t.$watch("$ctrl.question.state",function(t){o.iq_api.answer.pin.applicable="pinned"===t||_.get(o.answer,"_editing.pin_question")}),this.yields_iq({iq_api:this.iq_api}))}]})},function(t,e){angular.module("genius").component("appleMatchEvaluationsPage",{templateUrl:"apple_match_evaluations_page.html",controller:Object.assign(["$sce","AppleMatchEvaluationsClient","$timeout","$document",function(t,e,n,i){var r=this;this.$routerOnActivate=function(e){r.evaluation=e.routeData.page_data,r.model={notes:r.evaluation.notes},r.song=r.evaluation.song,r.apple_embed_url=t.trustAsResourceUrl(r.evaluation.apple_embed_url),r.apple_albums=r.evaluation.apple_albums},this.submit=function(t){r.saving=t;var o=_.merge({state:t},r.model);e.submit(r.evaluation.id,o).then(function(t){n(function(){return i[0].location="apple_match_evaluations/new"},200)})},this.skip=function(){r.saving="skip",e.skip(r.evaluation.id).then(function(t){n(function(){return i[0].location="apple_match_evaluations/new"},200)})}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("appleMusicPlayer",{templateUrl:"apple_music_player.html",bindings:{url:"<",apple_music_id:"<appleMusicId",position_from_top:"<positionFromTop",on_in_apple_music_deal:"&onInAppleMusicDeal",yields_api:"&yieldsApi",on_play_state_change:"&onPlayStateChange"},controller:["AppConfig","$window","$sce","$element","$scope","Tracking","$timeout","Channel","LocalStorage","Session",function(t,e,n,i,r,o,a,s,c,l){var u=this,d=[{model:"iPhone 8",min_expanded_viewport_height_difference:75,max_expanded_viewport_height_difference:85,toolbar_height:45},{model:"iPhone X",min_expanded_viewport_height_difference:113,max_expanded_viewport_height_difference:123,toolbar_height:84}];this.$onInit=function(){u.position_from_top&&(u.update_player_top_value(),e.addEventListener("resize",function(){return u.update_player_top_value()})),e.addEventListener("message",function(e){e.origin==="https://".concat(t.canonical_domain)&&"in_apple_music_deal"===e.data&&r.$applyAsync(function(){u.in_apple_music_deal=!0,u.on_in_apple_music_deal({in_apple_music_deal:!0}),u.position_from_top&&a(function(){return u.update_player_top_value()},0)})}),!u.apple_music_id&&c.safe_get_item("apple_musickit_authorized",!1)&&(u.dismissed=!0),c.safe_get_item("apple_music_player_dismissed",!1)&&l.user_signed_in&&(u.dismissed=!0)},this.$onChanges=function(t){t.url&&(u.src=n.trustAsUrl(u.url))},this.iframe_loaded=function(t){r.$applyAsync(function(){return u.loaded=!0});var e=s.build({window:t.contentWindow,origin:"*",scope:"com.genius.Genius"});e.bind("player_play_pause",function(t,e){return r.$applyAsync(function(){return u.on_play_state_change({play_state:e})})}),e.bind("player_auth",function(t,e){e&&!u.apple_music_id&&u.dismiss()});var n={toggle_play:function(){u.dismissed=!1,e.notify({method:"header_play_pause",params:{}})}};u.yields_api({api:n}),u.dismiss=function(){o.track("apple_player:player_dismissed",{provider:"apple",provider_id:u.apple_music_id}),u.dismissed=!0,e.notify({method:"dismiss",params:{}})}};var p=window.innerHeight;this.update_player_top_value=function(t){if(!u.position_from_top)return!1;var n,o,a=t||_.get(i.get(0),["children",0,"clientHeight"])||91,s=e.innerHeight,c=(n=s-p,o=_.find(d,function(t){var e=t.min_expanded_viewport_height_difference,i=t.max_expanded_viewport_height_difference;return _.inRange(n,e,i+1)}),_.get(o,["toolbar_height"],0)),l="".concat(s-a-(c>0?c-16:0),"px");u.top!==l&&r.$applyAsync(function(){return u.top=l})},this.on_resize=function(t){var e=t.width;u.dismissed=185===e,u.dismissed?c.safe_set_item("apple_music_player_dismissed",!0):c.safe_set_item("apple_music_player_dismissed",!1)}}]})},function(t,e){angular.module("genius").component("articleAdminBar",{bindings:{article:"<",video:"<"},templateUrl:"article_admin_bar.html",controller:["Session","Attempt","ArticleClient","currentFlashMessages","SmartRouting","$window",function(t,e,n,i,r,o){var a=this;this.current_user=t.current_user,this.can=function(e,n){return t.has_permission(e,n)},this.edit_article=function(){r.navigate_to_absolute_url("".concat(o.location.origin,"/articles/").concat(a.article.id,"/edit"))},this.manage_articles=function(){r.navigate_to_absolute_url("".concat(o.location.origin,"/articles"))},this.delete=function(){e.admin_action(function(){n.delete(a.article.id).then(function(){i.push({type:"notice",message:"Successfully deleted article"}),o.location.href="/"})},"Are you sure you want to delete this article?")}}]})},function(t,e){angular.module("genius").component("articleAuthors",{bindings:{authors:"<"},templateUrl:"article_authors.html"})},function(t,e){angular.module("genius").component("articleContentActions",{templateUrl:"article_content_actions.html",bindings:{object:"<",type:"@",variants:"<"},controller:["$scope",function(t){var e=this;this.toggle_voters=function(){return e.showing_voters=!e.showing_voters},t.$on("vote_saved",function(e){t.$broadcast("update_voters")})}]})},function(t,e){angular.module("genius").component("articleContributorBadge",{bindings:{contributor:"<object"},templateUrl:"article_contributor_badge.html"})},function(t,e){angular.module("genius").component("articleIndexArrangeable",{bindings:{articles:"<"},templateUrl:"article_index_arrangeable.html",controller:["ArticleClient","BeforeUnloadCheck","$scope",function(t,e,n){var i=this,r=["home_top_hero","home_mobile_desktop_first","home_promo_unit","home_desktop_second","home_desktop_third"],o=["home_video_hero"],a="locked",s="active",c="saving";this.$onInit=function(){i.slot_sections={top:{name:"Top Section",slots:r,error:null},video:{name:"Video Section",slots:o,error:null}},i.arrange_mode=a,i.dirty=!1};var l=function(){return i.dirty};e.add(l),n.$on("$destroy",function(){return e.remove(l)});var u=function(t){return _.find(i.slot_sections,function(e){return e.slots.includes(t)})},d=function(t,e){var n=e.indexOf(t)+1;n===e.indexOf("home_promo_unit")&&n++;var r=e[n]||null;return{next_slot:r,next_article:i.article_for_slot(r)}},p=function(t){return t.featured_slot=null};this.arrange_mode_locked=function(){return i.arrange_mode===a},this.arrange_mode_active=function(){return i.arrange_mode===s},this.arrange_mode_saving=function(){return i.arrange_mode===c};var f=function(){i.error=null,i.slot_sections.video.error=null,i.slot_sections.top.error=null};this.place_article_into_slot=function(t,e){var n=i.articles.find(function(e){return e.id===t});if(function(t,e){return f(),"home_video_hero"!==e||"video"===t.article_type||(i.slot_sections.video.error="only video articles can be placed in this slot",!1)}(n,e)){p(n);var r=i.article_for_slot(e);r&&r.id!==n.id&&function(t){for(var e=i.article_for_slot(t),n=u(t).slots;e;){var r=d(t,n),o=r.next_slot,a=r.next_article;e.featured_slot=o,e=a,t=o}}(e),n.featured_slot=e,i.dirty=!0}},this.clear_slot=function(t){p(i.article_for_slot(t)),i.dirty=!0},this.article_for_slot=function(t){return i.articles.find(function(e){return e.featured_slot&&e.featured_slot===t})},this.unfeatured_articles=function(){return i.articles.filter(function(t){return!t.featured_slot})},this.slot_holder_text=function(t,e){return"home_promo_unit"===e?"home promotional unit":"slot ".concat(t,", ").concat(u(e).name)},this.enable_rearranging=function(){i.previous_arrangement=_.cloneDeep(i.articles),i.arrange_mode=s},this.cancel_rearrange=function(){f(),i.articles=i.previous_arrangement,i.arrange_mode=a,i.dirty=!1};this.save_arrangement=function(){if(i.arrange_mode=c,f(),function(){for(var t=!1,e=0;e<r.length;e++){var n=r[e],o="home_promo_unit"===n||Boolean(i.article_for_slot(n));if(t&&o)return!0;o||(t=!0)}return!1}())return i.error="Saving cannot complete due to gaps in arrangement order",void(i.arrange_mode=s);t.update_featured_slots(i.articles.reduce(function(t,e){return e.featured_slot&&(t[e.id]=e.featured_slot),t},{})).then(function(){i.arrange_mode=a,i.dirty=!1}).catch(function(t){i.arrange_mode=s,i.error="".concat(t.message,": ").concat(_.join(t.response.errors,", "))})}}]})},function(t,e){angular.module("genius").component("articleIndexItem",{bindings:{article:"<",unfeature:"&?",disableGoToArticle:"=",feature:"&?",featureVideo:"&?"},templateUrl:"article_index_item.html",controller:["Session","$window",function(t,e){var n=this;this.can=function(e){return t.has_permission(e,n.article)},this.goToArticle=function(){n.disableGoToArticle||(e.location.href=n.article.path)},this.isVideoArticle=function(){return"video"===n.article.article_type},this.displayFeatureButton=function(){return n.can("change_featured_slot")&&n.feature},this.displayFeatureVideoButton=function(){return n.can("change_featured_slot")&&n.isVideoArticle()&&n.featureVideo},this.displayUnfeatureButton=function(){return n.can("change_featured_slot")&&n.article.featured_slot&&n.unfeature}}]})},function(t,e){angular.module("genius").component("articlePage",{templateUrl:"article_page.html",controller:Object.assign(["VideoRegistry","Tracking","MetaTagData","$sce",function(t,e,n,i){var r=this;this.$routerOnActivate=function(o){r.page_data=o.routeData.page_data,r.article_params=n.get("article_params"),r.article_update_url=i.trustAsUrl("/articles/".concat(r.page_data.article.id)),r.article_edit_url=i.trustAsUrl("/articles/".concat(r.page_data.article.id,"/edit_from_preview")),r.authenticity_token=n.get("authenticity_token"),t.register_page(r.page_data.article,"desktop_article_page"),e.delayed_track("Article Page View",{"Article ID":r.page_data.article.id,Title:r.page_data.article.title,Author:r.page_data.article.author.name,"Author ID":r.page_data.article.author.id,"Article Type":r.page_data.article.article_type,"Published At":new Date(1e3*r.page_data.article.published_at).toUTCString()}),r.video=_(r.page_data.article.media).find(function(t){return"video"===t.type||"video"===t._type})}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("artistBadge",{bindings:{artist:"<"},templateUrl:"artist_badge.html"})},function(t,e){angular.module("genius").component("artistOpportunities",{bindings:{artist:"<"},templateUrl:"artist_opportunities.html",controller:["CursoredDataFeed","ArtistClient",function(t,e){this.scrollable_data=new t(_.partial(e.contribution_opportunities,this.artist.id),"contribution_opportunities",{per_page:10})}]})},function(t,e){angular.module("genius").component("artistSongs",{templateUrl:"artist_songs.html",bindings:{artist:"<"},controller:["PagedDataFeed","SongClient","Session","$debounce",function(t,e,n,i){var r=this;this.search_text="",this.can=function(t,e){return n.has_permission(t,e)};var o=function(n){r.artist_song_infinite_scrollable_data=new t(_.partial(e.for_artist,r.artist.id),"songs",{sort:n})};this.sort_songs_by=function(t){r.sort_method!==t&&(r.search_text||o(t),r.sort_method=t)},this.search=function(){this.searching=!0,this.search_debounced()},this.search_debounced=i(function(){if(r.search_text){r.artist_song_infinite_scrollable_data=new t(_.partial(e.search_with_artist,r.artist.id),"songs",{sort:r.sort_method,q:r.search_text});var n=r.artist_song_infinite_scrollable_data.next;r.artist_song_infinite_scrollable_data.next=function(){return n().then(function(t){return r.searching=!1,t})}}else o(r.sort_method)},500),this.sort_songs_by("popularity")}]})},function(t,e){angular.module("genius").component("artistSongsAndAlbums",{templateUrl:"artist_songs_and_albums.html",bindings:{artist:"<",artist_songs:"<artistSongs",artist_albums:"<artistAlbums",artist_has_more_songs:"<artistHasMoreSongs",open_all_songs_pane:"&openAllSongsPane"}})},function(t,e){angular.module("genius").component("artistSongsModal",{templateUrl:"artist_songs_modal.html",bindings:{artist:"<",yields_open:"&yieldsOpen"},controller:[function(){var t=this;this.open=function(){return t.modal_open=!0},this.yields_open({open:this.open})}]})},function(t,e){angular.module("genius").component("artistTooltip",{bindings:{artist:"<"},templateUrl:"artist_tooltip.html",controller:["ArtistClient",function(t){var e=this;this.$onInit=function(){if(!e.artist.description){var n=e.artist;t.load(n.id).then(function(t){_.assign(n,t)})}}}]})},function(t,e){angular.module("genius").component("artistVerification",{templateUrl:"artist_verification.html",bindings:{user:"<",artist:"<",close:"&"},controller:["UserClient","AppConfig",function(t,e){var n=this;this.name=_.get(this.artist,"name"),this.role=this.user.verification_role,this.user_verification_roles=e.user_verification_roles,this.updating=function(){return n.verifying||n.unverifying},this.verify=function(){n.updating()||(n.verifying=!0,n.errors=null,t.associate_with_artist(n.user.id,{name:n.name,role:n.role}).then(function(t){_.assign(n.user,t.user),n.form.$setPristine(),window.location.href=n.user.url}).catch(function(t){n.errors=t.errors,n.verifying=!1}))},this.unverify=function(){n.updating()||(n.unverifying=!0,n.errors=null,t.dissociate_from_artist(n.user.id).then(function(t){_.assign(n.user,t.user),n.form.$setPristine(),window.location.href=n.user.url}).catch(function(t){n.errors=t.errors,n.unverifying=!1}))}}]})},function(t,e){angular.module("genius").component("audioSourceLabel",{templateUrl:"audio_source_label.html",bindings:{external_song:"<externalSong"}})},function(t,e){angular.module("genius").component("breadcrumbs",{templateUrl:"breadcrumbs.html",bindings:{order:"<"},controller:[function(){var t=this;this.rebuildHeirarchy=function(){t.heirarchy=[{url:"/",title:"Home"}],t.order.forEach(function(e){"artist"===e._type?(t.heirarchy.push({url:"/artists-index/".concat(e.index_character),title:e.index_character.toUpperCase()}),t.heirarchy.push({url:e.url,title:e.name})):"album"===e._type?t.heirarchy.push({url:e.url,title:e.name}):"song"===e._type&&t.heirarchy.push({url:e.url,title:e.title+(e.is_music?" Lyrics":"")})})},this.$onChanges=function(e){e.order&&t.rebuildHeirarchy()}}]})},function(t,e){angular.module("genius").component("collapsibleContent",{templateUrl:"collapsible_content.html",transclude:!0,bindings:{maxCollapsedHeight:"<",minExpansionHeight:"<",text:"@",auto_expand:"<autoExpand"},controller:[function(){var t=this;this.expand=function(){Reflect.deleteProperty(this,"max_height")},this.content_height_changed=function(e){e>t.maxCollapsedHeight+t.minExpansionHeight&&(t.max_height=t.maxCollapsedHeight),t.auto_expand&&t.expand()}}]})},function(t,e){angular.module("genius").component("commentList",{bindings:{comments:"<",commentable:"<",intersperse_ads:"@intersperseAds",variants:"<"},templateUrl:"comment_list.html"})},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").component("comments",{bindings:{type:"@",commentable:"<",allow_reasons:"<allowReasons",prevent_compose:"<preventCompose",are_suggestions:"<areSuggestions",context_updated_at:"<contextUpdatedAt",intersperse_ads:"@intersperseAds",on_dirty:"&onDirty",on_clean:"&onClean",variants:"<"},templateUrl:"comments.html",controller:["CommentClient","Session","PagedDataFeed",function(t,e,i){var r=this,o=[],a=function(t){var e,i=_.groupBy(r.comments,"id");t=_.reject(t,function(t){return i[t.id]}),(e=r.comments).push.apply(e,n(t))},s=function(){r.scrollable_data.reset(),r.comments=[],r.commentable.top_comment?a([r.commentable.top_comment]):(r._loading=!0,r.scrollable_data.next().then(function(t){a(function(t){return _.remove(t,function(t,e){return e<5&&(e<1||t.votes_total>=10)})}(t)),o=t}).finally(function(){return r._loading=!1})),r.commentable.comment_count-r.comments.length>0?r.has_next=function(){return!_.isEmpty(o)||r.scrollable_data.has_next()}:r.has_next=function(){return!1}};this.$onChanges=function(e){e.context_updated_at&&r.context_updated_at&&s(),(e.type||e.commentable)&&(r.scrollable_data=new i(_.partial(t.load,r.type,r.commentable.id),"comments",{text_format:"html,markdown"}),r.commentable.comment_count>0?s():r.comments=[])},this.load_more=function(){if(!_.isEmpty(o))return a(o),void(o=[]);r._loading=!0,r.scrollable_data.next().then(a).finally(function(){return r._loading=!1})},this.can_create_comment=function(){return e.has_permission("create_comment",r.commentable)&&!r.prevent_compose},this.visible_comments=function(){return _.reject(r.comments,"_deleted")},this.save_comment=function(e){return r.comments.unshift(e),t.create(r.type,r.commentable.id,e).then(function(){r.commentable.comment_count+=1})}}]})},function(t,e){angular.module("genius").component("contactButton",{templateUrl:"contact_button.html",controller:["FeedbackClient",function(t){var e=this;this.submit=function(){e.sending=!0,t.post_feedback(e.feedback_body).then(function(){return e.success=!0}).finally(function(){return e.sending=!1})},this.close=function(){e.open_contact_form=!1,e.success=!1}}]})},function(t,e){angular.module("genius").component("contributionOpportunity",{bindings:{assignment:"<?",contribution_opportunity:"<contributionOpportunity",on_dismiss:"&onDismiss",source:"@"},templateUrl:"contribution_opportunity.html",controller:["ContributionOpportunityAssignmentClient","Tracking","Session","$timeout",function(t,e,n,i){var r=this;this.can=function(t){return n.has_permission(t,r.contribution_opportunity.target)},this.track=function(t,n){var i="Contribution Opportunity Action",o={action:t,contribution_opportunity_id:r.contribution_opportunity.id,source:r.source};n?e.track_link_click(n,i,o):e.track(i,o)},this.track_open=function(t){r.track("open",t)},this.on_pending_event=function(t,e){if(_.includes(r.contribution_opportunity.complete_on_events,t)){r.submitted=!0;var n=i(function(){r.optimistically_removed=!0},200);e.then(function(){r.track("complete")}).catch(function(){r.submitted=!1,r.optimistically_removed=!1,i.cancel(n)})}},this.dismiss=function(){t.update(r.assignment.id,{dismissed:!0}).then(function(){r.track("dismiss"),r.on_dismiss({assignment:r.assignment})})}}]})},function(t,e){angular.module("genius").component("coverArtForm",{templateUrl:"cover_art_form.html",bindings:{cover_artable:"<coverArtable",cover_arts:"<coverArts",type:"@",close:"&",yields_is_dirty:"&yieldsIsDirty"},controller:["CoverArtClient","Reversible","Session",function(t,e,n){var i=this;this.can=function(t,e){return n.has_permission(t,e)},this.visible_cover_arts=function(){return _.reject(i.cover_arts,"_deleted")},this.create=function(e){if(_.some(i.cover_arts,{image_url:e}))i.error={response:{errors:["Image already exists"]}};else{i.error=null,i.autosaving=!0;var n={image_url:e};i.cover_arts.push(n);t.create(i.type,i.cover_artable.id,{image_url:e}).then(function(t){return Object.assign(i.cover_artable,t.cover_artable)}).catch(function(t){i.error=t,_.remove(i.cover_arts,{image_url:e})}).finally(function(){return i.autosaving=!1})}},this.update=function(n,r){if(_.some(i.cover_arts,{image_url:r}))i.error={response:{errors:["Image already exists"]}};else{i.error=null,i.autosaving=!0;var o=e.modify(n,{image_url:r});t.update(n.id,{image_url:r}).then(function(t){return Object.assign(i.cover_artable,t.cover_artable)}).catch(function(t){i.error=t,o()}).finally(function(){return i.autosaving=!1})}},this.destroy=function(n){i.error=null,i.autosaving=!0;var r=e.modify(n,{_deleted:!0});t.destroy(n.id).then(function(t){return Object.assign(i.cover_artable,t.cover_artable)}).catch(function(t){i.error=t,r()}).finally(function(){return i.autosaving=!1})},this.cant_drop=function(t){var e=_.map(i.visible_cover_arts(),"id"),n=_.indexOf(e,i.cover_art_being_dragged.id),r=_.indexOf(e,t.id);return n===r||n===r-1},this.move_before=function(e,n){i.error=null,i.saving=!0;var r=_.map(i.cover_arts,"id"),o=_.indexOf(r,n.id),a=e?_.indexOf(r,e.id):i.cover_arts.length-1;_.remove(i.cover_arts,{id:n.id}),i.cover_arts.splice(a,0,n);t.move_between(n.id,{above_id:_.get(i.cover_arts[a-1],"id"),below_id:_.get(e,"id")}).then(function(t){return Object.assign(i.cover_artable,t.cover_artable)}).catch(function(t){i.error=t,_.remove(i.cover_arts,{id:n.id}),i.cover_arts.splice(o,0,n)}).finally(function(){return i.saving=!1})}}]})},function(t,e){angular.module("genius").component("coverArtModal",{templateUrl:"cover_art_modal.html",bindings:{cover_artable:"<coverArtable",tiny_cover_arts:"<tinyCoverArts",focused_cover_art_id:"<focusedCoverArtId",type:"@",close:"&"},controller:["CoverArtClient","Tracking","Session","SmartRouting",function(t,e,n,i){var r=this;this.$onChanges=function(n){(n.type||n.cover_artable)&&(e.track("Cover Art View",{"Cover Artable Type":r.type,"Cover Artable ID":r.cover_artable.id,"Cover Art Count":r.tiny_cover_arts.length}),r.full_cover_arts=null,t.index(r.type,r.cover_artable.id).then(function(t){return r.full_cover_arts=t}))},this.cover_arts=function(){return r.full_cover_arts||r.tiny_cover_arts},this.focused_cover_art=function(){return _.find(r.cover_arts(),function(t){return t.id===r.focused_cover_art_id})},this.focused_cover_art_index=function(){return _.findIndex(r.cover_arts(),function(t){return t.id===r.focused_cover_art_id})},this.move_cover_art_focus=function(t){var e=r.focused_cover_art_index()+t,n=_.get(r.cover_arts(),[e,"url"]);i.navigate_to_absolute_url(n)},this.user_signed_in=n.user_signed_in}]})},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}angular.module("genius").component("deferCompile",{bindings:{timing_label:"@timingLabel",initial_content_key:"@useInitialContentWithKey",within_visibility_range:"@withinVisibilityRange",delay:"<"},transclude:!0,controller:["$element","$q","$timeout","$transclude","$window","application_bootstrap","initial_placeholder_content","on_within_visibility_range","performance_mark",function(t,e,i,r,o,a,s,c,l){var u=this;this.$onInit=function(){a.before(function(){var e=s.get(u.initial_content_key);e&&t.empty().append(e)});var n=_.isFinite(u.delay)?i(u.delay):e.when(),o=u.timing_label||u.initial_content_key;a.after(function(){return n.then(function(){(u.within_visibility_range?c(t,d(u.within_visibility_range)):e.when()).then(function(){o&&l.create("defer_compile_start:".concat(o)),t.empty().append(r()),o&&l.create("defer_compile_end:".concat(o))})})})};var d=function(t){var e=n(t.match(/^(\d+(?:\.\d+)?)(vh|px)$/)||[],3),i=e[1];switch(e[2]){case"px":return parseFloat(i);case"vh":return parseFloat(i)/100*$(o).height();default:throw new Error("within-visibility-range attribute must have units (either px or vh")}}}]})},function(t,e){angular.module("genius").component("deletedAnswer",{bindings:{answer:"<"},templateUrl:"deleted_answer.html"})},function(t,e){angular.module("genius").component("detailedSongSearch",{templateUrl:"detailed_song_search.html",bindings:{mode:"<",cancel:"&onCancel",select:"&onSelect",confirm:"&onConfirm"},controller:["$q","$scope","LookupClient","SongClient",function(t,e,n,i){var r=this;e.$watch("$ctrl.url",function(e){r.song_data=null,r.error=null,e&&n.lookup(e).then(function(e){if(r.autocompleted_song=null,"song"!==e._type)return t.reject(new Error("URL is for a non-song page"));r.song=e}).catch(function(t){r.error=t})}),e.$watch("$ctrl.autocompleted_song.id",function(t){r.url=null,r.song_data=null,r.error=null,t&&(r.song_data={id:r.autocompleted_song.id,title:r.autocompleted_song.title,artists:[r.autocompleted_song.primary_artist],albums:[]},i.load_song(t).then(function(t){r.song=t}))}),e.$watch("$ctrl.song.id",function(t){t&&(r.song_data={id:r.song.id,title:r.song.title,artists:[r.song.primary_artist].concat(r.song.featured_artists),albums:r.song.albums},r.select({song:r.song}))}),this.submit=function(){var e=this;this.saving=!0,t.when(this.confirm({song:this.song})).finally(function(){e.saving=null})}}]})},function(t,e){angular.module("genius").component("dfpAd",{templateUrl:"dfp_ad.html",bindings:{ad_classes:"@adClasses",name:"@",instance_id:"@?instanceId",on_filled:"&onFilled",on_no_ad:"&onNoAd"},controller:["$element","$immediate","$scope","Ads","querystring","AdConfig","SessionConfig","classnames",function(t,e,n,i,r,o,a,s){var c,l=this;this.$onInit=function(){if(!a.show_ads)return l.creative_size=[0,0],l.no_ad=!0,l.on_no_ad();c=l.instance_id||l.name,l.creative_size=_.get(o.ad_placements[l.name],"placeholder_size")||[0,0],i.id_for(l.name,c).then(function(t){return l.id=t}).then(function(){return e(function(){i.render(l.name,c).then(function(t){t.isEmpty?(l.no_ad=!0,l.on_no_ad({render_event:t})):(l.filled=!0,l.creative_size=t.size,l.on_filled({render_event:t,custom_values:u()})),n.$emit("layout_changed")})})})},this.$onDestroy=function(){i.dispose(l.name,c)},this.compiled_ad_unit_classes=function(){var t=n.$parent.$eval(l.ad_classes||"[]",{$width:l.creative_size[0],$height:l.creative_size[1]});return s(t)};var u=function(){return r.parse(t.find("iframe").prop("contentWindow").customValues||"")}}]})},function(t,e){angular.module("genius").component("editArtistProfile",{templateUrl:"edit_artist_profile.html",bindings:{artist:"<",close:"&"},controller:["ArtistClient","$location","Session","only_changes",function(t,e,n,i){var r=this;this.$onChanges=function(t){t.artist&&(r.editable_artist=angular.copy(r.artist))},this.can=function(t){return n.has_permission(t,r.artist)},this.update_artist=function(){r.errors=null,r.saving||(r.saving=!0,t.update(r.artist.id,i(r.editable_artist,r.artist)).then(function(n){_.assign(r.artist,n),r.close(),r.errors=null,e.path(t.get_path(n)),e.replace()}).catch(function(t){r.errors=t.data.response.errors}).finally(function(){r.saving=!1}))}}]})},function(t,e){angular.module("genius").component("editUserEmailPreferences",{templateUrl:"edit_user_email_preferences.html",bindings:{user:"<",close:"&"},controller:["UserClient",function(t){var e=this;this.editable_user=angular.copy(this.user),this.update_user=function(){e.saving||(e.saving=!0,Reflect.deleteProperty(e,"errors"),t.update(e.editable_user.id,{user:_.pick(e.editable_user,["preferences"])}).then(function(t){_.assign(e.user,t.user),e.close(),Reflect.deleteProperty(e,"errors")}).catch(function(t){e.errors=t.errors}).finally(function(){Reflect.deleteProperty(e,"saving")}))}}]})},function(t,e){angular.module("genius").component("editUserProfile",{templateUrl:"edit_user_profile.html",bindings:{user:"<",disable_image_edit:"<disableImageEdit",disable_user_bio_edit:"<disableUserBioEdit",close:"&"},controller:["UserClient","Session","$location","only_changes",function(t,e,n,i){var r=this;this.$onChanges=function(t){t.user&&(r.editable_user=angular.copy(r.user))},this.can=function(t){return e.has_permission(t,r.user)},this.update_user=function(){if(r.editable_user.password===r.editable_user.confirm_password){if(!r.saving){r.saving=!0,r.errors=null;var e=_.pick(r.editable_user,["login","about_me","email","password","photo_url","custom_header_image_url"]);e.about_me=e.about_me.markdown,t.update(r.editable_user.id,{user:i(e,r.user)}).then(function(e){_.assign(r.user,e.user),r.close(),r.errors=null,n.path(t.get_path(e.user)),n.replace()}).catch(function(t){r.errors=t.errors}).finally(function(){r.saving=!1})}}else r.errors=["Passwords do not match"]}}]})},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").component("editableTracklist",{bindings:{album:"<",album_appearances:"<albumAppearances",editing:"<",on_update:"&onUpdate",close:"&"},templateUrl:"editable_tracklist.html",controller:["AlbumClient","$timeout","I18n",function(t,e,i){var r,o=this;this.$onInit=function(){o.error=null;var t=_.groupBy(o.album_appearances,"track_number"),e=_.max(_.compact(_.map(_.keys(t),function(t){return Number(t)})));o.numbered_slots=[];for(var n=1;n<=e;n++)if(t[n]){var i=t[n][0];o.numbered_slots.push({track_number:n,song_id:i.song.id,title:i.song.title_with_featured})}else o.numbered_slots.push({track_number:n});o.unnumbered_slots=_.map(t.null,function(t){return{song_id:t.song.id,title:t.song.title_with_featured}})},this.remove_trailing_empty_slots=function(){var t=_.max(_.map(_.filter(o.numbered_slots,"song_id"),"track_number"))||0;o.numbered_slots=o.numbered_slots.slice(0,t)},this.make_unnumbered=function(t){Reflect.deleteProperty(t,"track_number"),o.unnumbered_slots.push(t)},this.clear_slot=function(t){t.track_number?o.numbered_slots[t.track_number-1]={track_number:t.track_number}:_.remove(o.unnumbered_slots,{song_id:t.song_id})},this.place_song_into_slot=function(t,e){var n=e.track_number;e.song_id&&(o.clear_slot(e),o.make_unnumbered(e)),o.clear_slot(t),t.track_number=n,o.numbered_slots[n-1]=t,o.remove_trailing_empty_slots()},this.update_slot_number=function(t,e){if(""===e)return o.clear_slot(t),o.make_unnumbered(t),void o.remove_trailing_empty_slots();var n=_.toNumber(e);if(!(_.isNaN(n)||n<=0)){for(;n>o.numbered_slots.length;)o.numbered_slots.push({track_number:o.numbered_slots.length+1});o.place_song_into_slot(t,o.numbered_slots[n-1])}},this.add_slot_after_delay=function(){r=e(function(){return o.numbered_slots.push({track_number:o.numbered_slots.length+1})},500)},this.cancel_add_slot=function(){e.cancel(r)},this.add_slot_and_fill=function(t){o.cancel_add_slot();var e={track_number:o.numbered_slots.length+1};o.numbered_slots.push(e),o.place_song_into_slot(t,e)},this.add_song=function(t){var e={song_id:t.id,title:t.title_with_featured};t.new&&(e.lyrics_state="incomplete"),o.unnumbered_slots.push(e)},this.create_result=function(t){return{id:_.uniqueId("new_"),title:t,title_with_featured:t,primary_artist:o.album.artist,new:!0}},this.toggle_unreleased=function(t){"incomplete"===t.lyrics_state&&confirm(i.t("song.lyrics_state.unreleased.confirm"))?t.lyrics_state="unreleased":t.lyrics_state="incomplete"},this.save=function(){o.saving=!0,o.error=null;var e=_.map(_.filter([].concat(n(o.numbered_slots),n(o.unnumbered_slots)),"song_id"),function(t){return _.pick(t,["track_number","song_id","title","lyrics_state"])});t.update_tracklist(o.album.id,e).then(function(t){o.on_update({album_appearances:t}),o.close()}).catch(function(t){o.error="".concat(t.message,": ").concat(_.join(t.response.errors,", "))}).finally(function(){o.saving=!1})}}]})},function(t,e){angular.module("genius").component("editableTracklistNumber",{bindings:{track_number:"<trackNumber",on_update:"&onUpdate"},templateUrl:"editable_tracklist_number.html",controller:function(){var t=this;this.$onChanges=function(e){e.track_number&&t.reset()},this.submit=function(){t.on_update({input:t.editable_track_number}),t.reset()},this.reset=function(){t.editing=!1,t.editable_track_number=t.track_number}}})},function(t,e){angular.module("genius").component("embedlyEmbed",{templateUrl:"embedly_embed.html",bindings:{embed:"<"},controller:["$sce",function(t){var e=this;this.trusted_html=function(){return t.trustAsHtml(e.embed.html)}}]})},function(t,e){angular.module("genius").component("embedlyYoutube",{templateUrl:"embedly_youtube.html",bindings:{video_id:"@videoId",start:"@"},controller:["$scope","Tracking",function(t,e){var n=this;this.started=!1,t.$on("youtube.player.playing",function(){n.started||(e.track("Play embedded video",{properties:{"Video provider":"youtube"}}),n.started=!0)})}]})},function(t,e){angular.module("genius").component("expandableContainer",{templateUrl:"expandable_container.html",transclude:{expandable_container_title:"?expandableContainerTitle"},bindings:{start_expanded:"<startExpanded",start_initialized:"<startInitialized",title:"@",variants:"<",yields_api:"&yieldsApi"},controller:[function(){var t=this;this.$onInit=function(){this.expanded=this.start_expanded,this.yields_api({api:this.api})},this.$onChanges=function(t){t.start_expanded&&(this.expanded=this.start_expanded)},this.toggle_expand=function(){t.expanded=!t.expanded},this.api=function(){return{expanded:function(){return t.expanded}}}}]})},function(t,e){angular.module("genius").component("expandableDiff",{bindings:{html:"<"},templateUrl:"expandable_diff.html",controller:function(){var t=this;this.$onInit=function(){t.expand_amount=10},this.$onChanges=function(r){r.html&&(t.lines=_.split(t.html,"<br>"),e(),n(),i())};var e=function(){t.ranges=[];var e=[],n=null;t.lines.forEach(function(i,r){var o=i.match(/(<ins|<del|<\/ins>|<\/del>)/g)||[],a=(e.length||o.length)&&!_.startsWith(i,"</ins>")&&!_.startsWith(i,"</del>");a&&_.isNull(n)?n=r:a||_.isNull(n)||(t.ranges.push({start:n,end:r}),n=null),o.forEach(function(t){"<ins"===t||"<del"===t?e.push(t):e.pop()})}),_.isNull(n)||t.ranges.push({start:n,end:t.lines.length})},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;t.ranges.forEach(function(n){n.start=Math.max(n.start-e,0),n.end=Math.min(n.end+e,t.lines.length)})},i=function(){for(var e=0;e<t.ranges.length-1;)t.ranges[e].end>=t.ranges[e+1].start?(t.ranges[e].end=t.ranges[e+1].end,_.pullAt(t.ranges,e+1)):e++};this.expand_range_start=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;t.ranges[e].start=Math.max(t.ranges[e].start-n,0),i()},this.expand_range_end=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;t.ranges[e].end=Math.min(t.ranges[e].end+n,t.lines.length),i()},this.render_lines=function(e,n){return _.join(_.slice(t.lines,e,n),"<br>")}}})},function(t,e){angular.module("genius").component("facebookShareButton",{templateUrl:"facebook_share_button.html",bindings:{url:"<",variants:"<"},controller:["Facebook","Tracking",function(t,e){var n=this;this.share_on_facebook=function(){e.track("Bagon Facebook Share"),t.share(n.url)}}]})},function(t,e){angular.module("genius").component("hangInitialQuote",{templateUrl:"hang_initial_quote.html",bindings:{content:"<"},controller:function(){this.hang_initial_double_quote=""===this.content[0],this.hang_initial_single_quote=""===this.content[0]}})},function(t,e){angular.module("genius").component("headerActions",{templateUrl:"header_actions.html",controller:["Session",function(t){var e=this;this.$onInit=function(){e.user_signed_in=t.user_signed_in,e.can=function(e){return t.has_permission(e,t.current_user)}}}]})},function(t,e){angular.module("genius").component("headerAdmin",{bindings:{open_header_menus:"<openHeaderMenus"},templateUrl:"header_admin.html",controller:["Session","UserClient","AssetClient","$window",function(t,e,n,i){var r=this;this.$onInit=function(){r.user=t.current_user,r.can=function(e){return t.has_permission(e,r.user)}},this.logout=function(){r.loading=!0,e.logout().then(function(){i.location.reload()})},this.impersonate_user=function(){var t=prompt("Enter the login of the user you want to sign in as");""!==_.trim(t)&&(r.impersonating=!0,e.impersonate(t).then(function(){i.location.reload()}))},this.search_user_aliases=function(){var t=prompt("Find all users who've ever had this login");""!==_.trim(t)&&(i.location.href="/users/aliases?alias=".concat(encodeURIComponent(t)))},this.remove_asset=function(){var t=prompt("Enter the url to remove");""!==_.trim(t)&&n.remove(t)}}]})},function(t,e){angular.module("genius").component("headerAuth",{templateUrl:"header_auth.html"})},function(t,e){angular.module("genius").component("headerWithCoverArt",{templateUrl:"header_with_cover_art.html",bindings:{type:"@",object:"<",header_image_url:"<headerImageUrl",cover_art_url:"<coverArtUrl",titleLabel:"<",artist:"<",can_edit:"<canEdit",on_edit:"&onEdit",verified_contributors:"<verifiedContributors",variants:"<",cover_arts:"<coverArts",focused_cover_art_id:"<focusedCoverArtId",close_cover_art_modal:"&onCloseCoverArtModal"},transclude:{metadata:"?metadata",secondary:"?secondary"},controller:function(){var t=this;this.cover_art_cta_text=function(){var e=t.cover_arts.length,n=e>1,i=_.filter(t.cover_arts,"annotated").length;return i?e===i?"".concat(e," Annotated Cover").concat(n?"s":""):"".concat(e," Cover").concat(n?"s":"",", ").concat(i," Annotated"):"".concat(e," Cover").concat(n?"s":"")}}})},function(t,e){angular.module("genius").component("hiddenFields",{bindings:{key:"@",value:"<"},templateUrl:"hidden_fields.html",controller:function(){_.isArray(this.value)?this.type="array":_.isObject(this.value)?this.type="object":this.type="constant"}})},function(t,e){angular.module("genius").component("imageUploadButton",{templateUrl:"image_upload_button.html",bindings:{default_image:"<defaultImage",on_file_picked:"&onFilePicked",allow_clear:"<allowClear",clear_confirm:"@clearConfirm",on_clear:"&onClear",allow_crop_to_square:"<allowCropToSquare",variants:"<"},controller:["Filepicker",function(t){var e=this,n=new t;this.pick_image_for_artist=function(t){var i={container:"modal",services:["COMPUTER","URL","FACEBOOK","INSTAGRAM","IMAGE_SEARCH"],openTo:t};e.allow_crop_to_square&&(i.services.unshift("CONVERT"),i.conversions=["crop"],i.cropRatio=1);var r={path:Math.random().toString(36).slice(2)};n.pick_and_store(i,r).then(function(t){e.on_file_picked({url:t})})}}]})},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").component("inbox",{bindings:{inbox_name:"@inboxName",opened:"<opened",clear_unread_count:"&clearUnreadCount"},templateUrl:"inbox.html",controller:["InboxClient","Tracking",function(t,e){var i,r,o,a=this;this.should_paginate=function(){return a.opened&&!o&&!a.done_loading},this.load_next_page=function(){o||(o=t.line_items(a.inbox_name,i).then(function(t){var e;(e=a.line_items).push.apply(e,n(t)),o=null,t.length?i=t.timestamp_for_next_page:a.done_loading=!0,a.opened&&l(t)}))};var s=function(){a.line_items=[],a.done_loading=!1,i=void 0,a.load_next_page()},c=function(){a.opened?r=Date.now():s()},l=function(e){t.mark_read(a.inbox_name,_(e).filter("unread").map("event_ids").value()),a.clear_unread_count()};this.$onInit=function(){s(),t.on_update(a.inbox_name,c)},this.$onChanges=function(t){if(t.opened){var n=t.opened.currentValue,i=t.opened.previousValue;!n||i&&!t.opened.isFirstChange()?i&&!n&&r&&r<Date.now()&&s():(l(a.line_items),e.track("Inbox Open",{inbox_name:a.inbox_name}))}}}]})},function(t,e){angular.module("genius").component("inboxContainer",{bindings:{inbox_name:"@inboxName",open_inboxes:"<openInboxes",sync_count_to_title:"<syncCountToTitle",abbreviate_after:"<abbreviateAfter",use_messages_inbox:"<useMessagesInbox",use_iq_inbox:"<useIqInbox"},templateUrl:"inbox_container.html"})},function(t,e){angular.module("genius").component("inboxIcon",{bindings:{inbox_name:"@inboxName",opened:"<",sync_count_to_title:"<syncCountToTitle",abbreviate_after:"<abbreviateAfter",yields_api:"&yieldsApi"},templateUrl:"inbox_icon.html",controller:["Session","TopBarIndicatorsLoader","WindowTitle","InboxClient",function(t,e,n,i){var r=this,o=function(t){r.unread_count=t,r.sync_count_to_title&&n.update_count(r.unread_count)};this.$onInit=function(){o(t.current_user["unread_".concat(r.inbox_name,"_count")]),e.listen_for(r.inbox_name,o),i.on_update(r.inbox_name,e.refresh),r.yields_api({api:{decrement:function(t){o(r.unread_count-t)},clear:function(){o(0)}}})}}]})},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").component("inboxLineItemDetailDiscussion",{bindings:{discussion:"<object"},templateUrl:"inbox_line_item_detail_discussion.html",controller:["DiscussionClient","PagedDataFeed",function(t,e){var i=this;this.$onChanges=function(n){n.discussion&&(i.paged_data=new e(_.partial(t.forum_posts,i.discussion.id),"forum_posts",{per_page:3},2),i.forum_posts=_.clone(i.discussion.latest_posts),i.discussion.forum_post_count>i.forum_posts.length?i.has_next=i.paged_data.has_next:i.has_next=function(){return!1})},this.load_more=function(){i.loading=!0,i.paged_data.next().then(function(t){var e;return(e=i.forum_posts).push.apply(e,n(t))}).finally(function(){return i.loading=!1})}}]})},function(t,e){angular.module("genius").component("inboxLineItemDetailDiscussionHeader",{bindings:{discussion:"<"},templateUrl:"inbox_line_item_detail_discussion_header.html"})},function(t,e){angular.module("genius").component("inboxLineItemDetailForumPost",{bindings:{forum_post:"<object"},templateUrl:"inbox_line_item_detail_forum_post.html"})},function(t,e){angular.module("genius").component("inboxLineItemDetailForumPostSingle",{bindings:{forum_post:"<forumPost"},templateUrl:"inbox_line_item_detail_forum_post_single.html"})},function(t,e){angular.module("genius").component("inboxLineItemDetailLyricsDiff",{bindings:{before:"<",after:"<",state:"<"},templateUrl:"inbox_line_item_detail_lyrics_diff.html",controller:["LyricsEditProposal",function(t){var e=this;this.$onChanges=function(n){if(n.before||n.after){var i=t.diff(e.before,e.after);e.diff_html=t.pretty_diff(i)}}}]})},function(t,e){angular.module("genius").component("inboxLineItemDetailObject",{templateUrl:"inbox_line_item_detail_object.html",bindings:{object:"<",variants:"<"}})},function(t,e){angular.module("genius").component("inboxLineItemMessage",{bindings:{template:"<",key:"<",params:"<",state:"<"},template:'<ng-include src="$ctrl.template"></ng-include>'})},function(t,e){angular.module("genius").component("iqInbox",{bindings:{opened:"<",clear_unread_count:"&clearUnreadCount"},templateUrl:"iq_inbox.html",controller:["Session","UserClient","Pusher","Tracking",function(t,e,n,i){var r=this;this.load=function(){e.contribution_opportunity_assignments(r.user.id).then(function(t){r.loaded=!0;var n=_.map(r.assignments,"id"),i=_.reject(t.contribution_opportunity_assignments,function(t){return _.includes(n,t.id)});r.assignments=r.assignments.concat(i),r.opened&&(e.mark_contribution_opportunity_assignments_read(r.user.id),r.clear_unread_count())})},this.remove=function(t){r.assignments=_.reject(r.assignments,{id:t.id}),r.load()},this.dismiss_explanation=function(){r.show_explanation=!1,e.dismiss_contribution_opportunities_explanation(r.user.id)},this.$onInit=function(){r.assignments=[],r.user=t.current_user,r.show_explanation=!r.user.dismissed_contribution_opportunities_explanation,r.load(),n.subscribe(t.current_user.pusher_channel,"contribution_opportunity_completion",function(t){_.find(r.assignments,function(e){return e.contribution_opportunity.id===t})&&(r.load(),r.assignments=_.reject(r.assignments,function(e){return e.contribution_opportunity.id===t}))}),n.subscribe(t.current_user.pusher_channel,"contribution_opportunities_refreshed",r.load)},this.$onChanges=function(t){if(t.opened){var e=t.opened.currentValue,n=t.opened.previousValue;!e||n&&!t.opened.isFirstChange()||(i.track("Inbox Open",{inbox_name:"iq_inbox"}),r.clear_unread_count())}}}]})},function(t,e){angular.module("genius").component("iqNotificationList",{templateUrl:"iq_notification_list.html",controller:["LocalStorage","PageVisibility","Session","Pusher","$timeout",function(t,e,n,i,r){this.user=n.current_user,this.notifications=[],this.line_item_count=0;var o=function(t){_.isEmpty(this.notifications)&&this.notifications.unshift(this.user),this.line_item_count++,r(function(){this.notifications.unshift(t),this.user.iq+=t.iq_gained,r(function(){_.pull(this.notifications,t),this.line_item_count--,0===this.line_item_count&&this.notifications.pop()}.bind(this),5e3)}.bind(this),200)}.bind(this);i.subscribe(n.current_user.pusher_channel,"iq_increment",function(n){e.when_visible(function(){if(t.is_available()){var e=t.get_item("newest_event_id",0),i=_.max(n.event_ids);i>e&&(o(n),t.set_item("newest_event_id",i))}else o(n)})}.bind(this))}]})},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}angular.module("genius").component("leaderboardAd",{templateUrl:"leaderboard_ad.html",bindings:{name:"@"},controller:["$timeout","$window","$element","$scope","wait_until",function(t,e,i,r,o){var a,s,c,l,u,d=this;this.$onInit=function(){e.addEventListener("scroll",p),c=e.innerHeight>=600,d.empty=!0};var p=_.throttle(function(){return r.$applyAsync(function(){return f()})},50),f=function(){d.bounding_client_rect=a?a.getBoundingClientRect():{height:0,width:0},l=i[0].getBoundingClientRect().top>=0};this.on_filled=function(r){var c,h,m,g;d.empty=(c=r.size,h=n(c,2),m=h[0],g=h[1],1===m&&1===g),d.has_banner_ad=!0,s=970===r.size[0],u="loading",a=i[0].querySelector(".dfp_unit--centered_billboard"),o(function(){return a.getBoundingClientRect().height>1}).then(function(){u="loaded",f(),d.loaded_when_not_naturally_in_view=!l,t(function(){e.removeEventListener("scroll",p),u="viewability_complete"},3e3)}).catch(_.noop)},this.can_stick=function(){return s&&c&&"loaded"===u},this.should_stick=function(){return d.can_stick()&&!l}}]})},function(t,e){angular.module("genius").component("lyricsEditProposal",{bindings:{edit_proposal:"<editProposal",editable:"<",accept_with:"&acceptWith"},templateUrl:"lyrics_edit_proposal.html",controller:["$scope","LyricsEditProposal","LyricsEditProposalClient","$immediate","$q","Tracking",function(t,e,n,i,r,o){var a=this;this.$onChanges=function(t){t.editable&&l()},this.accept=function(){var t={editable:_.extend({},a.editable,{markdown:a.patched}),lyrics_edit_id:a.edit_proposal.id};c("accepted",a.accept_with({params:t}),"accept_proposal")},this.reject=function(){c("rejected",n.reject(a.edit_proposal.id),"reject_proposal")};var s=function(t){return a.error=null,a.moderated_state=t,i(function(){return a.edit_proposal._moderated=!0})},c=function(t,e,n){var i=s(t);return r.all([e,i]).then(function(){o.track("lyrics_edit_proposals:".concat(n),{lyrics_edit_id:a.edit_proposal.id})}).catch(function(t){a.error=t.message,a.edit_proposal._moderated=!1,a.moderated_state=null})},l=function(){var t=e.make_patches(a.edit_proposal.diff),n=e.apply_patches(t,a.editable.markdown,{edit_format:a.edit_proposal.edit_format}),i=n.patched,r=n.success;if(_.some(r)){a.patched=i;var o=e.diff(a.editable.markdown,a.patched);a.diff_html=e.pretty_diff(o)}else s("inapplicable")};t.$watch("$ctrl.editable.markdown",function(t){t&&l()})}]})},function(t,e){angular.module("genius").component("lyricsEditProposalForm",{bindings:{lyrics:"<",song:"<"},templateUrl:"lyrics_edit_proposal_form.html",controller:["LyricsEditProposal","LyricsEditProposalClient","Tracking","$window",function(t,e,n,i){var r=this;this.$onInit=function(){n.track("lyrics_edit_proposals:start_proposal",{properties:{edit_format:"markdown"}})},this.$onChanges=function(t){t.lyrics&&(r.editable={markdown:r.lyrics.body.plain,before:r.lyrics.body.plain})},this.propose=function(){r.saving||(r.errors=null,r.editable.markdown!==r.editable.before?(r.saving=!0,e.create({song_id:r.song.id,version:r.lyrics.version,edited_lyrics:r.editable.markdown}).then(function(){r.proposed=!0,n.track("lyrics_edit_proposals:save_proposal",{properties:{edit_format:"plain_text"}})}).catch(function(t){r.errors=t.response.errors||[t.message]}).finally(function(){i.scrollTo(0,0),r.saving=!1})):r.proposed=!0)},this.back=function(){r.proposed||n.track("lyrics_edit_proposals:cancel_proposal",{properties:{edit_format:"plain_text"}}),i.history.back()},this.toggle_preview=function(){if(r.previewing=!r.previewing,r.previewing){var e=t.diff(r.editable.before,r.editable.markdown);r.diff_html=t.pretty_diff(e)}}}]})},function(t,e){angular.module("genius").component("lyricsEditProposalModeration",{bindings:{song:"<",lyrics_html:"<lyricsHtml",on_lyrics_update:"&onLyricsUpdate"},templateUrl:"lyrics_edit_proposal_moderation.html",controller:["LyricsEditProposalClient","LyricsEditing","SongClient","Tracking","Pusher","Session",function(t,e,n,i,r,o){var a=this;this.$onInit=function(){a.load(),r.subscribe(a.song.pusher_channel,"lyrics-edits-updated",function(t){t.updater_id!==o.current_user.id&&a.load()})},this.$onChanges=function(t){t.lyrics_html&&(a.editable=e.prepare_lyrics_for_editing(a.lyrics_html))},this.show=function(){i.track("lyrics_edit_proposals:view_proposals"),a.showing=!0},this.close=function(){a.showing=!1,_.some(a.lyrics_edit_proposals,"_moderated")&&a.load()},this.load=function(){t.pending({song_id:a.song.id}).then(function(t){return a.lyrics_edit_proposals=t})},this.accept=function(t){var i=t.editable,r=t.lyrics_edit_id,o=e.convert_editable_for_saving(i);return n.save_lyrics(a.song,o,{lyrics_edit_id:r}).then(function(t){a.on_lyrics_update({lyrics_data:t})})},this.pending_count=function(){return(a.lyrics_edit_proposals||[]).filter(function(t){return!t._moderated}).length}}]})},function(t,e){angular.module("genius").component("lyricsExportPreview",{bindings:{song:"<"},templateUrl:"lyrics_export_preview.html",controller:["SongClient","Session",function(t,e){var n=this;this.can_perform=function(t){return e.has_permission(t,n.song)},this.should_show_modal=function(){return n._show_modal},this.show_modal=function(){n._show_modal=!0,t.preview_lyrics_for_export(n.song.id).then(function(t){return n.preview_lyrics_for_export=t})},this.hide_modal=function(){n._show_modal=!1,n.preview_lyrics_for_export=null}}]})},function(t,e){angular.module("genius").component("lyricsSyncEditor",{bindings:{id:"<modelId",instructions_url:"@instructionsUrl",go_to_home:"&goToHome"},templateUrl:"lyrics_sync_editor.html",controller:["$scope","$q","$immediate","BeforeUnloadCheck","LyricsSynchronizationClient","AppleAudioPlayback","Session","MusicKit",function(t,e,n,i,r,o,a,s){var c=this;this.position=0,this.current_line_index=-1,this.$onInit=function(){r.get(c.id).then(function(t){c.lyrics_synchronization=t,c.auto_advance=!c.can("edit"),c.sync_and_staff_approve=c.can("sync_and_staff_approve")})};var l=_.noop;t.$watch("$ctrl.lyrics_synchronization.external_song.id",function(t){if(l(),t){var e=c.lyrics_synchronization.external_song;"apple"===e.provider&&s.load().then(function(t){var n=t.getInstance;c.media_player=new o({instance:n(),external_song:e}),l=c.media_player.$on("state",u)})}}),this.start_or_advance=function(){if(!c.media_player.state.is_playing)return c.media_player.api.play();if(!(c.current_line_index>=c.lyrics_synchronization.lines.length-1)){var t=c.current_line_index;if(c.current_line_index=c.lyrics_synchronization.next_visible_line_index_after_index(c.current_line_index),c.can("edit"))try{c.lyrics_synchronization.apply_timestamp_to_line_at_index(c.position,c.current_line_index)}catch(e){c.error=e,c.current_line_index=t}}},this.seek_to_index=function(t){var e=c.lyrics_synchronization.timestamp_for_line_at_index(t);(e||0===e)&&c.media_player.api.seek_to_position(e),c.auto_advance||(c.current_line_index=t)},this.seek_to_index_and_play=function(t){c.seek_to_index(t),c.media_player.api.play()},this.can=function(t){return c.lyrics_synchronization&&a.has_permission(t,c.lyrics_synchronization)},this.in_order_validator_for_index=function(t){return function(e){return!e&&0!==e||e>c.lyrics_synchronization.max_timestamp_before_index(t)&&e<c.lyrics_synchronization.min_timestamp_after_index(t)}},this.move_to_index_for_position=function(t){this.current_line_index=this.lyrics_synchronization.line_index_for_position(t)},this.current_line=function(){return c.lyrics_synchronization.lines[c.current_line_index]},this.edit_line_lyrics_at_index=function(t){c.media_player.api.pause(),c.lyrics_synchronization.lines[t]._editing_lyrics=c.can("edit")},this.after_edit_line_lyrics_at_index=function(t){c.lyrics_synchronization.lines[t]._editing_lyrics=!1,c.lyrics_synchronization.mark_dirty()},this.edit_line_timestamp_at_index=function(t){c.media_player.api.pause(),c.lyrics_synchronization.lines[t]._editing_time=c.can("edit")},this.after_edit_line_timestamp_at_index=function(t){c.lyrics_synchronization.lines[t]._editing_time=!1,c.lyrics_synchronization.mark_dirty(),c.seek_to_index_and_play(t)};var u=function(t,e){c.position=e.position,c.auto_advance&&c.move_to_index_for_position(c.position)};this.last_action=e.when();var d=function(t,i){return i=i||{},function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return c.saving=!0,c.last_action=c.last_action.finally(function(){return Reflect.apply(t,c,o).then(function(t){i.retain_error||(c.error=null),c.lyrics_synchronization._dirty=null,_.assign(c.lyrics_synchronization,_.omit(t,"lines")),t.lines&&c.lyrics_synchronization.lines?t.lines.forEach(function(t,e){_.assign(c.lyrics_synchronization.lines[e],t)},c):c.lyrics_synchronization.lines=t.lines}).catch(function(t){return c.error=t,n(c.load.bind(c)),e.reject(t)}).finally(function(){c.saving=!1})}),c.last_action}};this.load=d(function(){return r.get(c.id)},{retain_error:!0}),this.submit=d(function(t,e){return r.submit(t,c.lyrics_synchronization,e)}),this.submit_sync=d(function(){return r.submit_sync(c.lyrics_synchronization,{sync_and_staff_approve:c.sync_and_staff_approve})}),this.update_state=d(function(t){return r.update_state(t,c.lyrics_synchronization)}),this.save=d(function(){return r.save(c.lyrics_synchronization)}),this.autosave=_.debounce(this.save,1e3),this.revert_action=d(function(t){return r.revert_action(t,c.lyrics_synchronization)}),this.skip=d(function(t){return r.skip(t,c.lyrics_synchronization)}),this.change_song=d(function(t){return r.change_song({song_id:t.id,lyrics_synchronization_id:c.id}).then(function(t){return c.reassociating=null,t})}),this.preview_with_song=function(t){return r.preview({song_id:t.id,external_song_id:_.get(c.lyrics_synchronization,"external_song.id")}).then(function(t){c.error=null,c.lyrics_synchronization=t}).catch(function(t){return c.error=t,c.error})},this.cancel_reassociation=function(){c.reassociating=!1,c.load()};var p=function(){return c.lyrics_synchronization._dirty};i.add(p),t.$on("$destroy",function(){i.remove(p),c.media_player.api.pause()}),r.$on("edit",function(){c.error=null,c.can("edit")&&(c.can("approve")||c.can("staff_approve"))&&c.autosave()})}]})},function(t,e){angular.module("genius").component("lyricsSyncHome",{bindings:{instructions_url:"@instructionsUrl"},templateUrl:"lyrics_sync_home.html",controller:["$rootScope","$location","$window","LyricsSynchronizationClient",function(t,e,n,i){var r=this;t.$on("$locationChangeStart",function(){r.id=null,r.tasks=null,r.checked_out=null,r.navigating=!0}),t.$on("$locationChangeSuccess",function(){if("/lyrics_synchronizations/home"===e.path())r.load();else{if(r.id=parseInt(e.path().replace(/^\/lyrics_synchronizations\//,"")),!r.id)return e.path("/lyrics_synchronizations/home");r.navigating=null}}),this.load=function(){var t=this;i.home().then(function(e){_.assign(t,e),t.navigating=null})},this.start=function(t){i.start(t).then(o)},this.check_out=function(t){i.submit("check_out",t).then(o)},this.check_in=function(t){i.submit("check_in",t).then(this.load.bind(this))},this.navigate_to=function(t){e.path("/lyrics_synchronizations/".concat(t))};var o=function(t){"pristine"===t.state&&n.open("/songs/".concat(t.song_id)),e.path("/lyrics_synchronization/".concat(t.id))}}]})},function(t,e){angular.module("genius").component("manageChartItem",{bindings:{type:"<",id:"<"},templateUrl:"manage_chart_item.html",controller:["ChartClient",function(t){var e=this;this.$onInit=function(){e.loading=!0,t.state(e.type,e.id).then(function(t){e.excluded=t.excluded,e.loading=!1})},this.toggle_excluded=function(){e.loading=!0,(e.excluded?t.unexclude(e.type,e.id).then(function(){return e.excluded=!1}):t.exclude(e.type,e.id).then(function(){return e.excluded=!0})).finally(function(){return e.loading=!1})}}]})},function(t,e){angular.module("genius").component("manageRoles",{templateUrl:"manage_roles.html",bindings:{user:"<"},controller:["Session","UserClient","Reversible","AppConfig",function(t,e,n,i){var r=this;this.user_authority_roles=i.user_authority_roles,this.can_toggle=function(e){return t.has_permission("toggle_".concat(e,"_status"),r.user)},this.has_role=function(t){return _.includes(r.user.roles_for_display,t)},this.role_grant=function(t){return _.find(r.user.role_grants,function(e){return e.role===t})},this.errors={},this.grant=function(t,i){var o,a;r.errors={},i?(o=r.user.roles_for_display.concat(t),a=e.add_role(r.user.id,t)):(o=_.without(r.user.roles_for_display,t),a=e.remove_role(r.user.id,t));var s=n.modify(r.user,{roles_for_display:o});a.then(function(t){_.assign(r.user,t.user)}).catch(function(e){s(),r.errors[t]=e.errors})}}]})},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}angular.module("genius").component("marqueeAd",{templateUrl:"marquee_ad.html",bindings:{name:"@"},controller:["Cookies","$scope","$element","AppConfig","$window","IntersectionObserver",function(t,e,i,r,o,a){var s=this,c=function(t){return"marquee_seen_".concat(t)},l=function(t){i.find(".celtra-ad-inline-host iframe")[0].contentWindow.postMessage(t,"*")};this.$onInit=function(){s.permanently_collapsed=!1,s.marquee_ready=!1},this.$onDestroy=function(){return s.observer&&s.observer.disconnect()},this.on_filled=function(t){s.creative_id=t.creativeId;var e=function(t){t.origin==="https://".concat(r.canonical_domain)&&("marqueeLoaded"===t.data?s.on_marquee_loaded():"marqueeReady"===t.data&&s.on_marquee_ready())};return o.addEventListener("message",e),function(){return o.removeEventListener("message",e)}},this.on_marquee_loaded=function(){var e=Boolean(t.get(c(s.creative_id)));l({type:"userData",seen:e}),e?s.permanently_collapsed=!0:u()};var u=function(){t.put(c(s.creative_id),1,{expires:1});var i=_.debounce(function(){l({type:"permanentlyCollapse"}),e.$applyAsync(function(){return s.permanently_collapsed=!0})},1e3);s.observer=new a(function(t){n(t,1)[0].isIntersecting?i.cancel():i()},{threshold:.4+.01});var r=document.querySelector(".marquee_ad");s.observer.observe(r)};this.on_marquee_ready=function(){s.marquee_ready=!0,e.$apply()}}]})},function(t,e){angular.module("genius").component("mediaPlayer",{templateUrl:"media_player.html",bindings:{media_sources:"<mediaSources",sticky_offset:"<stickyOffset",on_edit:"&onEdit",can_edit:"<canEdit"},controller:["Tracking","mobile_device",function(t,e){var n=this;this.$onInit=function(){n.media_player={}},this.$onChanges=function(t){if(t.media_sources){for(var e,i=["youtube","soundcloud"],r=0;r<i.length;r++){var o=i[r];if(e=_.find(n.media_sources,{provider:o}))break}_.get(e,"url")!==_.get(n.media,"url")&&(n.played_once=!1,n.media=e,e||(n.media_player={}))}},this.play=function(){n.played_once?n.media_player.api.playpause():(n.media_player.api.load_media(),"youtube"===n.media.provider&&e||n.media_player.api.playpause(),"youtube"===n.media.provider?t.track("Play featured video",{properties:{"Video provider":n.media.provider}}):t.track("Play audio",{properties:{"Audio provider":n.media.provider}}),n.played_once=!0)}}]})},function(t,e){angular.module("genius").component("mergeArtistForm",{templateUrl:"merge_artist_form.html",bindings:{artist:"<"},controller:["Session","ArtistClient",function(t,e){this.artist_name_to_merge_with="",this.can=function(e,n){return t.has_permission(e,n)},this.merge_artist=function(){if(this.show_warning){if(delete this.errors,delete this.artist_merge_complete,this.saving)return;this.saving=!0,e.merge(this.artist.id,this.artist_name_to_merge_with).then(function(){this.artist_merge_complete=!0}.bind(this)).catch(function(t){this.errors=t.data.response.errors}.bind(this)).finally(function(){delete this.saving}.bind(this))}else this.show_warning=!0}.bind(this)}]})},function(t,e){angular.module("genius").component("messagesInbox",{bindings:{opened:"<",decrement_unread_count:"&decrementUnreadCount",embed:"<"},templateUrl:"messages_inbox.html",controller:["Attempt","InboxClient","Tracking","$window",function(t,e,n,i){var r=this;this.attempt_close=function(e){t.close_form(e,function(){r.composing=!1,r.on_modal_close()})};var o=function(){r.refresh_at=Date.now()};this.$onInit=function(){e.on_update("messages_inbox",o)},this.$onChanges=function(t){if(t.opened){var e=t.opened.currentValue,i=t.opened.previousValue;!e||i&&!t.opened.isFirstChange()||n.track("Inbox Open",{inbox_name:"messages_inbox"})}},this.on_conversation_read=function(t){r.decrement_unread_count({decrement:t}),r.embed&&i.parent.postMessage({type:"decrement_unread_messages_count",decrement:t},"*")},this.on_modal_open=function(){if(r.modal_open=!0,r.embed){var t=i.frameElement.parentElement;t.style.height="".concat(i.parent.innerHeight,"px");var e=t.offsetHeight;t.style.height="auto",r.modal_dimensions={top:t.scrollTop,height:Math.min(Math.max(t.offsetHeight,800),e)-32,width:t.offsetWidth-32}}},this.on_modal_close=function(){return r.modal_open=!1}}]})},function(t,e){angular.module("genius").component("miniAlbumCard",{bindings:{album:"<object",variants:"<"},templateUrl:"mini_album_card.html"})},function(t,e){angular.module("genius").component("miniAnnotatableCard",{bindings:{object:"<",variants:"<"},templateUrl:"mini_annotatable_card.html"})},function(t,e){angular.module("genius").component("miniArticleCard",{bindings:{article:"<object",variants:"<"},templateUrl:"mini_article_card.html"})},function(t,e){angular.module("genius").component("miniArtistCard",{bindings:{artist:"<object",variants:"<"},templateUrl:"mini_artist_card.html"})},function(t,e){angular.module("genius").component("miniSongCard",{bindings:{song:"<object",search_highlights:"<searchHighlights",artist:"<",number:"<",variants:"<"},templateUrl:"mini_song_card.html",controller:["string_to_symbol_array",function(t){var e=this,n=function(e,n,i){return t(e).slice(n,i).join("")};this.$onChanges=function(t){if((t.artist||t.song)&&(e.non_primary_artist_present=e.artist&&e.artist.id!==e.song.primary_artist.id),t.search_highlights){var i=_.keyBy(e.search_highlights,"property").lyrics;i&&(e.excerpt_with_markup=function(t){var e=t.value,i=t.ranges,r=[],o=0;i.forEach(function(t){var i=n(e,o,t.start),a=n(e,t.start,t.end),s="<span>".concat(a,"</span>");r.push(i),r.push(s),o=t.end});var a=e.split("").slice(o).join("");return r.push(a),r.join("")}(i))}}}]})},function(t,e){angular.module("genius").component("miniUserCard",{bindings:{user:"<object",variants:"<"},templateUrl:"mini_user_card.html"})},function(t,e){angular.module("genius").component("miniVideoCard",{templateUrl:"mini_video_card.html",bindings:{video:"<object"}})},function(t,e){angular.module("genius").component("missingMetadataForm",{templateUrl:"missing_metadata_form.html",bindings:{missing_params:"<missingParams",object:"<",type:"@",yields_api:"&yieldsApi",yields_iq:"&yieldsIq",on_pending_event:"&onPendingEvent",placeholder:"@",source:"@"},controller:["$scope","SongClient","Tracking","Reversible",function(t,e,n,i){var r=this,o=["autocomplete_artists","autocomplete_albums"],a=function(t,e){return o.includes(t)?{reset:function(){return r.changes[e]=[]},changes_count:function(){return r.changes[e].length}}:{reset:function(){return r.changes[e]=null},changes_count:function(){return Number(!_.isEmpty(r.changes[e]))}}};this.$onInit=function(){r.params=_.map(r.missing_params,a),r.changes={},r.reset_changes(),r.iq_api=_.cloneDeep(r.object.current_user_metadata.iq_by_action),r.yields_iq({iq_api:r.iq_api}),t.$watch(function(){return _.sum(_.invokeMap(r.params,"changes_count"))},function(t){return r.iq_api.edit_metadata.primary.multiplier=_.max([t,1])}),r.yields_api({api:{edit:function(){return r.show_full_form=!0}}})},this.submit=function(){r.errors=[],r.saving=!0;var t,o=i.modify(r.object,r.changes);switch(r.type){case"song":t=e.update(r.object.id,r.changes),r.on_pending_event({event:"UserEditMetadataSong",result:t})}t.then(function(){n.track("Metadata Edit",{Source:r.source})}).catch(function(t){o(),r.reset_changes(),r.errors=t.errors}).finally(function(){r.saving=!1})},this.cancel=function(){r.reset_changes(),r.show_full_form=!1,r.errors=[]},this.reset_changes=function(){_.invokeMap(r.params,"reset")}}]})},function(t,e){angular.module("genius").component("notificationInbox",{bindings:{inbox_name:"@inboxName",abbreviate_after:"@abbreviateAfter",sync_count_to_title:"<syncCountToTitle",open_inboxes:"<openInboxes"},templateUrl:"notification_inbox.html",controller:["$sce","Pusher","Session","$scope","$window","AppConfig","mobile_device",function(t,e,n,i,r,o,a){var s=this;this.$onInit=function(){s.src=t.trustAsResourceUrl("/inboxes/".concat(s.inbox_name,"?embed=true")),e.subscribe(n.current_user.pusher_channel,"inbox-marked-read",function(t){t.inbox===s.inbox_name&&"messages_inbox"!==s.inbox_name&&s.unread_count_api.clear()}),r.addEventListener("message",function(t){t.origin==="https://".concat(o.canonical_domain)&&"decrement_unread_messages_count"===_.get(t.data,"type")&&"messages_inbox"===s.inbox_name&&i.$applyAsync(function(){return s.unread_count_api.decrement(t.data.decrement)})})},this.toggle=function(t){a||(t.preventDefault(),s.open_inboxes[s.inbox_name]=!s.open_inboxes[s.inbox_name],s.open_inboxes[s.inbox_name]&&(s.loading=!0))}}]})},function(t,e){angular.module("genius").component("otherUsersWithIp",{templateUrl:"other_users_with_ip.html",bindings:{user:"<"},controller:["PagedDataFeed","UserClient",function(t,e){var n=this;this.$onChanges=function(i){i.user&&(n.infinite_scroll_data=new t(_.partial(e.other_users_with_ip,n.user.id),"other_users_with_ip"))}}]})},function(t,e){angular.module("genius").component("pageTransitionOverlay",{template:'\n    <div class="page_transition_overlay" ng-if="$ctrl.transitioning()"></div>\n  ',controller:["PageTransition",function(t){this.transitioning=function(){return t.transitioning}}]})},function(t,e){angular.module("genius").component("paginatedAccomplishments",{bindings:{user:"<"},templateUrl:"paginated_accomplishments.html",controller:["CursoredDataFeed","AccomplishmentClient","UserClient","Reversible","Session",function(t,e,n,i,r){var o=this;this.$onInit=function(){var t;Reflect.defineProperty(o,"visibility",{get:function(){return t},set:function(e){t=e,this.update_src()}}),o.visibility="visible",o.filter_options=[{i18n_key:"manage_accomplishments.all",value:"all"},{i18n_key:"manage_accomplishments.visible",value:"visible"},{i18n_key:"manage_accomplishments.hidden",value:"hidden"}]},this.can=function(t){return r.has_permission(t,o.user)},this.toggle_managing=function(){o.managing=!o.managing,o.managing?o.visibility="all":o.visibility="visible"},this.update_src=function(){o.scrollable_data=new t(_.partial(n.accomplishments,o.user.id),"accomplishments",{visibility:o.visibility,per_page:10})},this.toggle=function(t){var n=i.modify(t,{hidden:!t.hidden});e.update(t.id,{accomplishment:{hidden:t.hidden}}).then(function(e){_.assign(t,e.accomplishment)}).catch(function(){n()})}}]})},function(t,e){angular.module("genius").component("paginatedLeaderboard",{bindings:{source:"<",per_page:"<perPage",on_empty:"&onEmpty",extra_info:"@extraInfo"},templateUrl:"paginated_leaderboard.html",controller:["PagedDataFeed",function(t){var e=this;this.$onChanges=function(n){(n.source||n.per_page)&&(e.scrollable_data=new t(e.source,"leaderboard",{per_page:e.per_page}))}}]})},function(t,e){angular.module("genius").component("profileAdminPane",{bindings:{user:"<",view_errors_link:"<viewErrorsLink"},templateUrl:"profile_admin_pane.html",controller:["Session",function(t){var e=this;this.$onInit=function(){e.managing_accomplishments=!1},this.$onChanges=function(t){t.user&&(e.can_moderate=e.can("toggle_penalty_status")||e.can("mark_spam")||e.can("mark_ham")||e.can("mass_delete_unreviewed_activity")||e.can("mass_delete_votes"))},this.can=function(n){return t.has_permission(n,e.user)}}]})},function(t,e){angular.module("genius").component("profileAllActivity",{templateUrl:"profile_all_activity.html",bindings:{user:"<",artist:"<"},controller:["UserClient","ArtistClient","PagedDataFeed","Session",function(t,e,n,i){var r=this;this.$onChanges=function(o){r.activity_types=[],i.has_permission("view_activity_stream",r.user)&&r.activity_types.push({activity_type:"user",label:"".concat(r.user.name,"'s Activity"),profile_activity_scrollable_data:new n(_.partial(t.activity_line_items,r.user.id),"line_items",{text_format:"html"})}),i.has_permission("view_activity_stream",r.artist)&&r.activity_types.push({activity_type:"artist",label:"Activity on ".concat(r.artist.name,"'s songs"),profile_activity_scrollable_data:new n(_.partial(e.activity_line_items,r.artist.id),"line_items",{text_format:"html"})}),r.activity_type=r.activity_types[0]}}]})},function(t,e){angular.module("genius").component("profileAnnotation",{bindings:{annotation:"<",referent:"<",variants:"<"},templateUrl:"profile_annotation.html",controller:["$scope",function(t){t.$watchGroup(["$ctrl.annotation.community","$ctrl.annotation.cosigned_by"],function(){this.referent_display_mode=this.annotation.community&&0===this.annotation.cosigned_by.length?"default":"green"}.bind(this)),t.$on("annotation_deleted",function(t,e,n){e===this.annotation&&n.then(function(){this.deleted=!0}.bind(this))}.bind(this))}]})},function(t,e){angular.module("genius").component("profileArtistDescriptionPreview",{templateUrl:"profile_artist_description_preview.html",bindings:{artist:"<",top_scholar:"<topScholar"}})},function(t,e){angular.module("genius").component("profileArtistPane",{bindings:{artist:"<"},templateUrl:"profile_artist_pane.html",controller:["Session","ArtistClient",function(t,e){var n=this;this.$onInit=function(){n.user_signed_in=t.user_signed_in},this.$onChanges=function(t){t.artist&&(n.twitter_url="https://twitter.com/".concat(n.artist.twitter_name),n.facebook_url="http://www.facebook.com/".concat(n.artist.facebook_name),n.instagram_url="http://instagram.com/".concat(n.artist.instagram_name))},this.get_leaderboard_page=function(t){return e.load_leaderboard(n.artist.id,t)},this.can=function(e,n){return t.has_permission(e,n)},this.change_state=function(t){return n.state=t}}]})},function(t,e){angular.module("genius").component("profileContributionsAnnotations",{templateUrl:"profile_contributions_annotations.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onInit=function(){t.limit=1},this.$onChanges=function(e){e.contributions_group&&(t.annotations=t.contributions_group.contributions)}}})},function(t,e){angular.module("genius").component("profileContributionsAnswers",{templateUrl:"profile_contributions_answers.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onChanges=function(e){e.contributions_group&&(t.answers=t.contributions_group.contributions)}}})},function(t,e){angular.module("genius").component("profileContributionsArticles",{templateUrl:"profile_contributions_articles.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onChanges=function(e){e.contributions_group&&(t.article=t.contributions_group.contributions[0])}}})},function(t,e){angular.module("genius").component("profileContributionsComments",{templateUrl:"profile_contributions_comments.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onInit=function(){t.limit=1},this.$onChanges=function(e){e.contributions_group&&(t.comments=t.contributions_group.contributions,t.commentable=t.comments[0].commentable)}}})},function(t,e){angular.module("genius").component("profileContributionsGroup",{templateUrl:"profile_contributions_group.html",bindings:{user:"<",contributions_group:"<contributionsGroup"}})},function(t,e){angular.module("genius").component("profileContributionsPyongs",{templateUrl:"profile_contributions_pyongs.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onChanges=function(e){e.contributions_group&&(t.pyong=t.contributions_group.contributions[0])}}})},function(t,e){angular.module("genius").component("profileContributionsQuestions",{templateUrl:"profile_contributions_questions.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onChanges=function(e){e.contributions_group&&(t.questions=t.contributions_group.contributions)}}})},function(t,e){angular.module("genius").component("profileContributionsTranscriptions",{templateUrl:"profile_contributions_transcriptions.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onChanges=function(e){e.contributions_group&&(t.song=t.contributions_group.contributions[0])}}})},function(t,e){angular.module("genius").component("profileFollowers",{bindings:{artist:"<",user:"<",follows:"<"},templateUrl:"profile_followers.html",controller:["PagedDataFeed","UserClient",function(t,e){var n=this;this.$onChanges=function(t){t.user&&(n.scrollable_data=n.get_scrollable_data())},this.get_scrollable_data=function(){return n.user&&n.follows?new t(_.partial(e.load_followed_users,n.user.id),"followed_users"):n.user&&!n.follows?new t(_.partial(e.load_followers_by_user,n.user.id),"followers"):n.user?void 0:new t(_.partial(e.load_followers_by_artist,n.artist.id),"followers")}}]})},function(t,e){angular.module("genius").component("profileIdentity",{templateUrl:"profile_identity.html",bindings:{artist:"<",user:"<"},controller:[function(){var t=this;this.alternate_name_limit=2,this.user_has_more_than_one_role=function(){return t.user&&t.user.roles_for_display.length>1},this.more_alternate_names_to_show=function(){return t.artist.alternate_names.length>t.alternate_name_limit},this.show_all_alternate_names=function(){t.alternate_name_limit=1/0}}]})},function(t,e){var n=[{i18n_key:"contribution_type.all_activity.name",filter:null,sort:[]},{i18n_key:"contribution_type.annotations.name",filter:"annotations",sort:[{i18n_key:"contribution_type.annotations.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.annotations.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.pyongs.name",filter:"pyongs",sort:[]},{i18n_key:"contribution_type.transcriptions.name",filter:"transcriptions",sort:[{i18n_key:"contribution_type.transcriptions.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.transcriptions.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.comments.name",filter:"comments",sort:[]},{i18n_key:"contribution_type.questions_and_answers.name",filter:"questions_and_answers",sort:[]},{i18n_key:"contribution_type.articles.name",filter:"articles",sort:[{i18n_key:"contribution_type.articles.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.articles.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.unreviewed_annotations.name",filter:"unreviewed_annotations",sort:[{i18n_key:"contribution_type.unreviewed_annotations.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.unreviewed_annotations.sort.chronologically",value:"chronologically"}]}];angular.module("genius").component("profilePage",{templateUrl:"profile_page.html",bindings:{artist:"<",user:"<",artist_songs:"<artistSongs",artist_albums:"<artistAlbums",top_scholar:"<topScholar",top_accomplishment:"<topAccomplishment",pinned_annotations:"<pinnedAnnotations",artist_has_more_songs:"<artistHasMoreSongs",show_artist_pane:"<showArtistPane",preloaded_user_activity:"<preloadedUserActivity",initial_next_user_activity_timestamp:"<initialNextUserActivityTimestamp",$router:"<",current_user_metadata:"<currentUserMetadata"},controller:["CursoredDataFeed","UserClient","ArtistClient","$rootRouter","Session","ScrollPoint","Tracking","mobile_device","VideoRegistry","Attempt",function(t,e,i,r,o,a,s,c,l,u){var d=this;this.$onInit=function(){d.attempt_close=u.close_form,d.user_activity_sort_options_by_filter=n,d.logged_in=o.user_signed_in,d.user&&d.filter_activity_by(d.user_activity_sort_options_by_filter[0]);var t={};d.artist&&(t["Artist ID"]=d.artist.id),d.artist&&(l.register_page(d.artist,c?"mobile_artist_page":"desktop_artist_page"),s.delayed_track("Profile Page Load",t))},this.$onChanges=function(t){(t.user||t.artist)&&(d.community_artist=d.artist&&d.user&&!d.user.is_verified),t.user&&(d.can_message_user=d.can("send_message",d.user),d.can_view_activities_in_real_time=d.logged_in&&d.user,d.can_edit_artist_profile=d.can("edit_anything",d.artist),d.can_edit_user_profile=d.can("edit",d.user),d.can_edit_profile=d.can_edit_artist_profile||d.can_edit_user_profile,d.can_view_admin_info=d.can("view_admin_info",d.user),d.can_view_roles=d.can("view_roles",d.user),d.can_verify=d.can("toggle_verification_status",d.user),d.can_moderate_user=d.can("toggle_penalty_status",d.user)||d.can("mark_spam",d.user)||d.can("mark_ham",d.user)||d.can("mass_delete_unreviewed_activity",d.user)||d.can("mass_delete_votes",d.user),d.can_view_tracked_errors=d.can("view_tracked_errors",d.user),d.user&&(d.bugsnag_link="https://app.bugsnag.com/genius/genius/errors?"+"filters[event.since][0]=all&filters[user.id][0][value]=".concat(d.user.id,"&filters[user.id][0][type]=eq")))},this.scroll_to=a.scroll_to,this.can=function(t,e){return o.has_permission(t,e)},this.filter_activity_by=function(n,i){d.filter_by_contribution_type=n,n.filter?(d.filter_by_contribution_type_sort=i||n.sort[0],d.user_contributions_scrollable_data=new t(_.partial(e.load_contributions,d.user.id,n.filter),"contribution_groups",{text_format:"html,markdown",sort:d.filter_by_contribution_type_sort&&d.filter_by_contribution_type_sort.value,per_page:8})):d.user_contributions_scrollable_data=new t(_.partial(e.load_contributions,d.user.id,!1),"contribution_groups",{text_format:"html,markdown",per_page:8},d.initial_next_user_activity_timestamp)},this.filter_activity_by_type=function(t){d.filter_activity_by(_.find(d.user_activity_sort_options_by_filter,{filter:t})),d.scroll_to("user_activity")},this.display_as_artist=function(){return!(!d.artist||d.user&&!d.user.is_verified)},this.display_as_user=function(){return!d.display_as_artist()},this.header_url=function(){return d.display_as_artist()?d.artist.header_image_url:d.user.header_image_url},this.avatar_url=function(){return d.display_as_artist()?d.artist.image_url:d.user.avatar.medium.url};var p=function(t){d.display_as_artist()?r.navigate(["ArtistPage",{},t?"ProfileBioPage":"ProfilePage",{slug:i.get_slug(d.artist)}]):r.navigate([t?"UserBioPage":"UserPage",{slug:e.get_slug(d.user)}])};this.open_description=function(){p(!0)},this.close_description=function(){p(!1)},this.change_state=function(t){return d.state=t},this.close_conversation_modal=function(){return d.show_conversation_modal=!1}}]})},function(t,e){angular.module("genius").component("profileUserDescriptionPreview",{templateUrl:"profile_user_description_preview.html",bindings:{user:"<",top_accomplishment:"<topAccomplishment"}})},function(t,e){angular.module("genius").component("profileUserPane",{bindings:{user:"<",on_statistics_select:"&onStatisticsSelect"},templateUrl:"profile_user_pane.html",controller:["Tracking",function(t){var e=this;this.change_state=function(n){e.state=n,t.track("Profile Tab Open",{tab_name:n,display_as_artist:!1})}}]})},function(t,e){angular.module("genius").component("question",{bindings:{question:"<",variants:"<",move_question:"&?moveQuestion",featured:"<",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",yields_api:"&yieldsApi"},templateUrl:"question.html",controller:["Reversible","QuestionClient","Session",function(t,e,n){var i=this;this.$onInit=function(){i.yields_api({api:{answer:function(){i.answerApi.start_editing()},archive:i.archive}})},this.can=function(t,e){return n.has_permission(t,e)},this.is_pinned=function(){return"pinned"===i.question.state},this.is_verified=function(){return i.question.answer&&i.question.answer.answer_source},this.archive=function(){i.question._deleted=!0;var t=i.change_state("archive");return i.on_pending_event({event:"UserArchiveQuestion",result:t}),t.catch(function(){Reflect.deleteProperty(i.question,"_deleted")})},this.pin=function(){var e=t.modify(i.question,{state:"pinned"});return i.change_state("pin").catch(e)},this.unpin=function(){var e=t.modify(i.question,{state:"pending"});return i.change_state("unpin").catch(e)},this.change_state=function(t){return e.create_if_not_exists(i.question).then(function(){return e.change_state(i.question,t)})},this.start_editing=function(){i.question._editing=_.defaults(i.question._editing||{},{_form_visible:!0,body:i.question.body})},this.move=function(t){this.move_question({direction:t,question:this.question})},this.cancel_editing=function(){Reflect.deleteProperty(i.question,"_editing")},this.finish_editing=function(){if(!i.disable_saving_with){i.disable_saving_with="Saving";var n=t.modify(i.question,{"_editing._form_visible":!1});e.update(i.question,{question:i.question._editing}).then(i.cancel_editing.bind(i)).catch(n).finally(function(){i.disable_saving_with=!1})}}}]})},function(t,e){angular.module("genius").component("questionForm",{bindings:{questionable:"<",on_new_question:"&onNewQuestion"},templateUrl:"question_form.html",controller:["Session","$scope","QuestionClient",function(t,e,n){var i=this;this.user_signed_in=t.user_signed_in;var r=function(e){i.question={_new:!0,author:t.current_user,author_name:e&&e.author_name,author_email:e&&e.author_email,body:""}};this.save=function(){if(!i.saving){i.saving=!0,t.user_signed_in||(i.question.anonymous_user={name:i.question.name});var o=i.question;r(),e.question_form.$setPristine(),n.create(i.questionable._type,i.questionable.id,o).then(function(){i.saving=!1,e.question_form.$setPristine(),i.thank_you=!0,i.on_new_question({question:o}),r(o),i.error={}}).catch(function(t){i.error=t,i.question=o,i.saving=!1})}}}]})},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").component("questionList",{bindings:{pinned_questions:"<pinnedQuestions",default_questions:"<defaultQuestions",featured_question:"<featuredQuestion",pending_question_count:"<pendingQuestionCount",variants:"<",questionable:"<"},templateUrl:"question_list.html",controller:["QuestionClient","PagedDataFeed",function(t,e){var i=this,r={state:"pending"};this.$onChanges=function(n){(n.default_questions||n.pinned_questions)&&(i.questions=_([]).concat(i.default_questions,i.pinned_questions).compact().value(),i.monetized_question_ids=i.pinned_questions.map(function(t,e){return{id:t.id,index:e}}).filter(function(t){var e=t.index;return e%2==0&&e<i.pinned_questions.length-1}).map(function(t){return t.id})),n.featured_question&&i.featured_question&&"pinned"!==i.featured_question.state&&i.questions.push(i.featured_question),n.variants&&(i.variants&&i.variants.answered&&(r.answered=i.variants.answered),i.scrollable_data=new e(_.partial(t.index,i.questionable._type,i.questionable.id),"questions",r)),n.pending_question_count&&(i.pending_question_count?i.has_next=i.scrollable_data.has_next:i.has_next=function(){return!1})},this.sorting_predicates=[function(t){return["default","pinned","pending","archived"].indexOf(t.state)},"pin_order"],this.move_question=function(e,n){var r;"up"===e?r=_(i.questions).filter(function(t){return t.pin_order&&t.pin_order<n.pin_order}).sortBy("pin_order").reverse().take(2).thru(function(t){return[t[1],t[0]]}):"down"===e&&(r=_(i.questions).filter(function(t){return t.pin_order&&t.pin_order>n.pin_order}).sortBy("pin_order").take(2).thru(function(t){return[t[0],t[1]]}));var o=i.move_question_between(n,r.get(0),r.get(1));t.move(n,e).catch(o)},this.move_question_between=function(t,e,n){var i;e&&n?i=(e.pin_order+n.pin_order)/2:n?i=n.pin_order/2:e&&(i=e.pin_order+1);var r=t.pin_order;return t.pin_order=i,function(){t.pin_order=r}},this.load_more=function(){i._loading=!0,i.scrollable_data.next().then(function(t){var e;t=_.reject(t,i.is_featured_question,i),i.pending_question_count-=t.length,(e=i.questions).push.apply(e,n(t))}).finally(function(){i._loading=!1})},this.is_featured_question=function(t){return i.featured_question&&i.featured_question.id===t.id},this.is_monetized=function(t){return i.monetized_question_ids.includes(t.id)}}]})},function(t,e){angular.module("genius").component("reasonsToggle",{bindings:{reasonChanged:"&"},templateUrl:"reasons_toggle.html",controller:["AppConfig",function(t){this.comment_reasons=t.comment_reasons,this.comment_reasons_help_url=t.comment_reasons_help_url,this.selectedReason="",this.change_reason=function(t){this.selectedReason===t?delete this.selectedReason:this.selectedReason=t,this.reasonChanged({reason:this.selectedReason})}}]})},function(t,e){angular.module("genius").component("recentSignupsPage",{templateUrl:"recent_signups_page.html",controller:["UserClient","Attempt","TimestampedDataFeed","I18n",function(t,e,n,i){var r=function(e,n){n.marking_spam_state=!0,t.update_spam_state(n.user.id,{state:e}).then(function(){n.marked_spam_state=!0}.bind(this)).finally(function(){delete n.marking_spam_state})}.bind(this);this.mark=function(t,n){e.admin_action(function(){r(t,n)},i.t("mark_"+t+".confirm"))},this.filter_by_spam_state=function(e){this.filtering_spam_state!==e&&(this.filtering_spam_state=e,this.recent_signups_scrollable_data=new n(_.partial(t.load_recent_signups,"unclassified_spam_state"===e?"":e),"user_spam_evaluations"))},this.filter_by_spam_state("unclassified_spam_state")}]})},function(t,e){angular.module("genius").component("recirculatedContent",{templateUrl:"recirculated_content.html",bindings:{song:"<",stories:"<",placement:"@"},controller:["VideoPlacement","Session",function(t,e){var n=this;this.$onChanges=function(e){e.song&&n.song&&(n.video_placement=new t(n.song,n.placement))},this.can=function(t,n){return e.has_permission(t,n)}}]})},function(t,e){angular.module("genius").component("relevantVideos",{bindings:{object:"<",placement:"@",container_classes:"@containerClasses",on_filled:"&onFilled",on_no_video:"&onNoVideo",variants:"<"},templateUrl:"relevant_videos.html",controller:["VideoPlacement","Session",function(t,e){var n=this;this.$onChanges=function(e){e.object&&(n.video_placement=new t(n.object,n.placement,function(t){return t.length?n.on_filled({videos:t}):n.on_no_video()}))},this.can=function(t,n){return e.has_permission(t,n)}}]})},function(t,e){var n,i,r,o,a,s,c,l,u;n=window.angular,i=["artist","user","artist_songs","artist_albums","top_scholar","top_accomplishment","pinned_annotations","artist_has_more_songs","preloaded_user_activity","initial_next_user_activity_timestamp","current_user_metadata"],r=/(?:)/,o=/.*/,a=_.curry(function(t,e){return new RegExp("".concat(e.source).concat(t.source))}),s=_.curry(function(t,e){return new RegExp("(?:".concat(e.source).concat(t.source,")?"))}),c=function(t){return new RegExp("(".concat(t.source,")"))},l=s(o),u=function(t){var e=t.path,n=void 0===e?l:e,i=t.query,o=void 0===i?l:i,a=t.hash,s=void 0===a?l:a;return new RegExp(["^",n(r).source,o(/\?/).source,s(/#/).source,"$"].join(""))},n.module("genius").component("routablePage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/song-stories",name:"SongStoryGalleryPage",component:"songStoryGalleryPage",data:{type:"song_story_gallery"}},{path:"/albums/:artist_slug/:album_slug",name:"AlbumPage",component:"albumPage",data:{type:"album",clientRoutableOn:["desktop"]}},{path:"/album_cover_arts/:cover_art_id",name:"AlbumPageCoverArtFocus",component:"albumPage",data:{type:"album_cover_art",clientRoutableOn:["desktop"]}},{path:"/a/:article_slug",name:"ArticlePage",component:"articlePage",data:{type:"article",clientRoutableOn:["desktop"]}},{path:"/a/preview/:preview_key",name:"ArticleExternalPreviewPage",component:"articlePage",data:{type:"article",clientRoutableOn:["desktop"]}},{path:"/articles/:article_id/preview",name:"ArticlePreviewPage",component:"articlePage",data:{type:"article",clientRoutableOn:["desktop"]}},{path:"/shows/:slug",name:"VideoListPage",component:"videoListPage",data:{type:"video_list",clientRoutableOn:["desktop"]}},{path:"/shows/:slug/:page",name:"VideoListPage",component:"videoListPage",data:{type:"video_list",clientRoutableOn:["desktop"]}},{path:"/videos/:slug",name:"VideoPage",component:"videoPage",data:{type:"video",clientRoutableOn:["desktop"]}},{path:"/search",name:"SearchResultsPage",component:"searchResultsPage"},{path:"/artists/...",name:"ArtistPage",component:"routableProfilePage"},{regex:u({path:a(c(/[^/?]*-(?:annotated|lyrics)/)),query:s(c(o))}),serializer:function(t){return{urlPath:t.slug}},name:"SongPage",component:"songPage",data:{type:"song"}},{path:"/admin_tasks",name:"AdminTasksPage",component:"adminTasksPage"},{path:"/apple_match_evaluations/:evaluation_id",name:"AppleMatchEvaluationsPage",component:"appleMatchEvaluationsPage"},{regex:u({path:a(c(/\d+/))}),serializer:function(t){return{urlPath:t.referent_id}},name:"SongReferentFocus",component:"songPage",data:{type:"referent"}},{path:"/:slug",name:"UserPage",component:"routedPage",data:{includeFromCache:i,component:"profilePage",include:{show_artist_pane:!1}}},{path:"/:slug/bio",name:"UserBioPage",component:"routedPage",data:{includeFromCache:i,component:"profilePage",include:{show_artist_pane:!0}}},{path:"/users/...",name:"UserRouter",component:"routableUserPage"}]})},function(t,e){!function(t){var e=["artist","user","artist_songs","artist_albums","top_scholar","top_accomplishment","pinned_annotations","artist_has_more_songs","preloaded_user_activity","initial_next_user_activity_timestamp","current_user_metadata"];t.module("genius").component("routableProfilePage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/:slug",name:"ProfilePage",component:"routedPage",data:{component:"profilePage",includeFromCache:e,include:{show_artist_pane:!1}}},{path:"/:slug/bio",name:"ProfileBioPage",component:"routedPage",data:{component:"profilePage",includeFromCache:e,include:{show_artist_pane:!0}}}]})}(angular)},function(t,e){!function(t){t.module("genius").component("routableUserPage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/recent_signups",name:"RecentSignupsPage",component:"routedPage",data:{component:"recentSignupsPage"}}]})}(angular)},function(t,e){angular.module("genius").component("routedPage",{template:["$rootRouter",function(t){for(var e=function(t){return t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase().replace(/_/g,"-")},n=t.currentInstruction;null!=n.child;)n=n.child;var i=n.component.routeData.data,r=e(i.component),o=t.currentInstruction.component.params;return"<"+r+" "+_(i.includeFromCache).map(function(t){return e(t)+'="$ctrl.preloadedData.'+t+'"'}).join(" ")+" "+_(i.includeFromUrlParams).map(function(t){return e(t)+'="'+o[t]+'"'}).join(" ")+" "+_(i.include||{}).map(function(t,n){return e(n)+'="'+t+'"'}).join(" ")+' $router="$ctrl.$router"></'+r+">"}],bindings:{$router:"<"},controller:["PreloadCache",function(t){this.preloadedData=t,this.$routerCanReuse=function(){return!1}}]})},function(t,e){angular.module("genius").component("searchResultItem",{bindings:{hit:"<"},templateUrl:"search_result_item.html"})},function(t,e){angular.module("genius").component("searchResultItems",{bindings:{results:"<",limit_to:"<limitTo"},templateUrl:"search_result_items.html"})},function(t,e){angular.module("genius").component("searchResultPaginatedSection",{bindings:{section_type:"@sectionType",search_text:"@searchText",on_load_next:"&onLoadNext"},templateUrl:"search_result_paginated_section.html",controller:["PagedDataFeed","SearchClient",function(t,e){var n=this;this.$onChanges=function(i){(i.section_type||i.search_text)&&(n.infinite_scroll_data=new t(_.partial(e.section,n.section_type,n.search_text),"hits",{},1,n.on_load_next))}}]})},function(t,e){angular.module("genius").component("searchResultSection",{bindings:{section:"<",on_show_more:"&onShowMore",limit_to:"<limitTo",variants:"<"},templateUrl:"search_result_section.html"})},function(t,e){angular.module("genius").component("searchResults",{bindings:{sections:"<",search_text:"<searchText",scroll_container_selector:"@scrollContainerSelector",on_filter:"&onFilter",on_sections_change:"&onSectionsChange",on_load_next:"&onLoadNext",on_animation_end:"&onAnimationEnd"},templateUrl:"search_results.html",controller:["$element","$immediate",function(t,e){var n=this;this.$onChanges=function(t){t.sections&&n.on_sections_change()},this.has_results=function(){return _.flatMap(n.sections,"hits").length>0};var i=t.find(this.scroll_container_selector);i.length||(i=$(t).closest(this.scroll_container_selector));var r,o,a=t.find(".global_search-search_results"),s=t.find(".global_search-search_results-sections");this.save_scroll_and_scroll_top=function(){e(function(){var e=t.find(".global_search-search_results-show_more");r=i.scrollTop(),o=a.height(),a.css({minHeight:o}),s.css({position:"absolute",top:-r}),e.css({position:"relative",top:0}),i.scrollTop(0)})},this.restore_scroll=function(){var e=t.find(".global_search-search_results-show_more"),n=i.scrollTop();e.css({position:"absolute",top:r-n}),s.css({position:"relative",top:0}),i.scrollTop(r)},s.on("animationend",function(){n.on_animation_end()})}]})},function(t,e){angular.module("genius").component("searchResultsPage",{bindings:{$router:"<"},templateUrl:"search_results_page.html",controller:["mobile_device","SearchClient","Tracking",function(t,e,n){var i=this;this.$routerOnActivate=function(r){if(n.track("Search Standalone Page View"),!_.isEmpty(r.params.q)){i.q=decodeURIComponent(r.params.q);var o=t?3:5;return e.multi(i.q,{per_page:o}).then(function(t){i.sections=t,i.has_results=_.flatMap(i.sections,"hits").length>0})}i.sections=[]}}]})},function(t,e){angular.module("genius").component("selectDropdown",{templateUrl:"select_dropdown.html",require:{ngModel:"?ngModel"},bindings:{options:"<",on_select:"&onSelect",variants:"<",selection:"<"},controller:["$scope",function(t){t.$watch("$ctrl.options",function(){this.selected=this.options[0]}.bind(this)),t.$watch("$ctrl.selected",function(){this.ngModel&&this.ngModel.$setViewValue(arguments[0])}.bind(this)),t.$watch("$ctrl.selection",function(t){t&&(this.selected=t)}.bind(this)),this.is_clickable=function(){return this.options.length>1}}]})},function(t,e){angular.module("genius").component("songAlbum",{templateUrl:"song_album.html",bindings:{album:"<",tracks:"<",current_song:"<currentSong"},controller:["Session",function(t){var e=this;this.can=function(e,n){return t.has_permission(e,n)},this.is_current_song=function(t){return t.id===e.current_song.id},this.should_link_to_track=function(t){return e.can("view_song",t)&&!e.is_current_song(t.song)}}]})},function(t,e){angular.module("genius").component("songAlbums",{bindings:{song:"<",primary_album_tracks:"<primaryAlbumTracks"},templateUrl:"song_albums.html",controller:function(){var t=!1;this.primary_album=function(){return this.song.album},this.other_albums=function(){return this.primary_album()?_.reject(this.song.albums,{id:this.primary_album().id}):this.song.albums},this.hidden_album_count=function(){return t?0:Math.max(0,this.other_albums().length-2)},this.show_all=function(){t=!0}}})},function(t,e){angular.module("genius").component("songAttributionVisualization",{bindings:{id:"<"},templateUrl:"song_attribution_visualization.html",controller:["SongClient",function(t){var e=this,n=["#FF574B","#87A6FD","#7FFA95","#FFA0E8","#80FDFB","#FEF498","#E5A0AC","#A0CDA8"];this.$onInit=function(){e.users={},e.user_colors={},t.attribution_visualization(e.id).then(function(t){e.words=t.words,e.change_times=_.uniq(e.words.map(function(t){return t.changed_at})).sort(function(t,e){return t-e}),e.current_time_index=e.change_times.length-1,t.users.forEach(function(t,i){e.users[t.id]=t,e.user_colors[t.id]=n[i]||"#CCCCCC"})}),e.color=function(t){if(t.user_id)return e.user_colors[t.user_id]},e.words_to_show=function(){return e.words?e.words.filter(function(t){return t.changed_at<=e.change_times[e.current_time_index]}):[]},e.adjust_current_time_index=function(t){var n=e.current_time_index+t;n<0||n>e.change_times.length-1||(e.current_time_index=n)}}}]})},function(t,e){angular.module("genius").component("songHeaderMediaPlayerControls",{templateUrl:"song_header_media_player_controls.html",bindings:{media_api:"<mediaApi",play_state:"<playState"},controller:function(){var t=this;this.$onInit=function(){return t.play_state="paused"}}})},function(t,e){angular.module("genius").component("songMetadataSongRelationshipsInput",{templateUrl:"song_metadata_song_relationships_input.html",bindings:{song_relationships:"<songRelationships",isDisabled:"<"},controller:function(){var t=this;this.$onChanges=function(e){e.song_relationships&&(t.visible_relationships=_.filter(t.song_relationships,function(t){return t.songs.length}))},this.available_relationships=function(){return _.difference(t.song_relationships,t.visible_relationships)},this.change_relationship_to=function(e,n){n.songs=e.songs,e.songs=[],t.visible_relationships[t.visible_relationships.indexOf(e)]=n},this.remove_song_relationship=function(e){e.songs=[],t.visible_relationships=_.without(t.visible_relationships,e)},this.add_new_song_relationship=function(){var e=t.available_relationships();e.length&&t.visible_relationships.push(e[0])}}})},function(t,e){angular.module("genius").component("songMissingMetadata",{templateUrl:"song_missing_metadata.html",bindings:{song:"<",possible_missing_info:"<possibleMissingInfo"},controller:function(){var t=this;this.has_missing_info=function(){return _.some(t.possible_missing_info,t.missing_info)},this.missing_info=function(e){return _.isEmpty(t.song[e])&&_.includes(t.possible_missing_info,e)}}})},function(t,e){angular.module("genius").component("songPage",{templateUrl:"song_page.html",controller:Object.assign(["$document","$window","$scope","$location","$q","Tracking","ReferentElementMap","ReferentRegistry","querystring","performance_mark","Bowser","mobile_device","$element",function(t,e,n,i,r,o,a,s,c,l,u,d,p){var f,h=this,m=function(t,e){switch(t.routeData.data.type){case"song":return e.song({slug:(n=t.params)[1],query:c.parse(n[2]||"")});case"referent":return e.referent(function(t){return{referent_id:parseInt(t[1])}}(t.params));default:throw Error("Unknown song page instruction type: ".concat(t.routeData.data.type))}var n};this.$onInit=function(){h.lyrics_compiled=r.defer(),h.is_ios=u.ios,d&&e.addEventListener("scroll",_.throttle(function(){if(f||(f=p[0].querySelector(".song_story_header_cta")),f){var t=f.getBoundingClientRect();n.$apply(function(){return h.show_song_story_sticky_placement=t.top+t.height<0})}},100))},this.$routerCanReuse=function(t){return m(t,{song:function(t){return t.slug===b()},referent:function(t){return Boolean(s.peek(t.referent_id))}})},this.$routerOnActivate=function(t){h.page_data=t.routeData.page_data,Object.assign(n,h.page_data),m(t,{song:function(t){var n=parseInt(t.query.referent_id||_.get(i.hash().match(/^note-(\d+)$/),1));_.isFinite(n)?(o.set_annotation_opened_from_permalink(n),h.scroll_to_referent(n).then(function(){return i.url("/".concat(n))})):e.scrollTo(0,0)},referent:function(t){h.scroll_to_referent(t.referent_id).then(function(){return h.display_referent(t.referent_id)})}}),l.create_once("first_router_on_activate")},this.$routerOnReuse=function(t){m(t,{song:_.noop,referent:function(t){h.display_referent(t.referent_id)}})},this.$routerOnDeactivate=function(){o.reset_counters(),s.clear()},this.scroll_to_referent=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return h.lyrics_compiled.promise.then(function(){return r(function(r){var o=a.get(n),s=o.offset().top+o.height()/2-$(e).height()/2;t.find("html, body").animate({scrollTop:s},i).promise().then(r)})})},this.display_referent=function(t){o.track("Open Annotation",{annotation_id:t}),s.preload_around(t,10),n.highlighted_fragment_id=t;var i=s.get(t);r(function(n){var r=g(i);r.bottom<0||r.top>$(e).height()?h.scroll_to_referent(t,150).then(function(){return n(g(i))}):n(r)}).then(function(t){h.lyrics_positioning_target=t,n.current_referent=i})},this.display_description_annotation=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).tracking_name;t&&o.track(t),h.clear_current_referent(),n.current_referent=h.page_data.song.description_annotation},this.clear_current_referent=function(){n.highlighted_fragment_id=null,n.current_referent=null,i.url(h.page_data.song.path)},this.on_lyrics_compiled=function(){h.lyrics_compiled.resolve()},this.update_lyrics_selection_range=function(t){t?(h.clear_current_referent(),h.lyrics_selection_range=t,h.lyrics_positioning_target=t.getBoundingClientRect()):(h.lyrics_selection_range=null,n.current_referent?v():h.lyrics_positioning_target=null)};var g=function(t){if(t)return t.precomputed_client_rect||a.get(t.id).get(0).getBoundingClientRect()},v=function(){_.get(n.current_referent,"is_description")||(h.lyrics_positioning_target=g(n.current_referent))},b=function(){var t=_.get(h,"page_data.song.url");if(t)return _.last(t.split("/"))};this.youtube_media=function(){return _.find(n.song.media,{provider:"youtube"})},this.track_youtube_play=function(){o.track("Song Page Youtube Embed Played")},n.$on("layout_changed",_.throttle(v,300))}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition","performance_mark",function(t,e,n,i){return i.create_once("first_router_can_activate"),n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("songPageSidebarMultiPlacement",{templateUrl:"song_page_sidebar_multi_placement.html",bindings:{song:"<",show_song_story:"&showSongStory"},controller:function(){var t,e,n,i=this;this.video_did_fill=function(e){var n=_.get(e,"0.relevance");t="high"===n||"medium"===n},this.no_video=function(){return e=!0},this.no_ad=function(){return n=!0},this.is_empty=function(){return!i.song.song_story&&e&&n},this.should_render_video_component=function(){return!i.song.song_story&&(t||n)},this.should_show_ad=function(){return!i.song.song_story&&(!t||_.isUndefined(t))}}})},function(t,e){angular.module("genius").component("songPreview",{templateUrl:"song_preview.html",bindings:{song:"<"}})},function(t,e){angular.module("genius").component("songStoryCarousel",{bindings:{stories:"<"},templateUrl:"song_story_carousel.html"})},function(t,e){angular.module("genius").component("songStoryFeaturedStoryPlacement",{bindings:{story:"<",label:"@",variants:"<"},templateUrl:"song_story_featured_story_placement.html"})},function(t,e){angular.module("genius").component("songStoryGalleryPage",{templateUrl:"song_story_gallery_page.html",controller:Object.assign(["Tracking","Session",function(t){var e=this;this.$routerOnActivate=function(n){e.page_data=n.routeData.page_data,t.track("song_stories:gallery_page_view")}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("songStoryLeadStoryPlacement",{bindings:{story:"<",show_story:"&showStory"},transclude:!0,templateUrl:"song_story_lead_story_placement.html"})},function(t,e){angular.module("genius").component("songStoryModal",{templateUrl:"song_story_modal.html",bindings:{story:"<story",song:"<",on_close:"&onClose"},controller:["$window","$scope","$sce","Session","AppConfig",function(t,e,n,i,r){var o=this;this.$onChanges=function(t){if(t.story||t.song){var e=o.song?"".concat(o.story.url,"#context=song:").concat(o.song.id):o.story.url;o.src=n.trustAsUrl(e),o.title=o.story.title}},this.$onInit=function(){o.can=function(t,e){return i.has_permission(t,e)},t.addEventListener("message",function(t){t.origin==="https://".concat(r.canonical_domain)&&e.$apply(function(){o.title=t.data.title,o.title_url=t.data.url})})}}]})},function(t,e){angular.module("genius").component("songStoryStickyPlacement",{bindings:{story:"<",show:"<",song_id:"<songId"},templateUrl:"song_story_sticky_placement.html"})},function(t,e){angular.module("genius").component("songTopVerifiedArtist",{bindings:{contributors:"<verifiedContributors",on_clicked_verified_annotator:"&onClickedVerifiedAnnotator",on_clicked_verified_answer:"&onClickedVerifiedAnswer"},templateUrl:"song_top_verified_artist.html",controller:function(){var t=this;this.$onChanges=function(e){if(e.contributors){var n=_.sortBy(t.contributors,function(t){return t.contributions.length});t.contributor=_.last(n)}},this.on_clicked=function(e){_.includes(t.contributor.contributions,"annotations")?(t.on_clicked_verified_annotator({user:t.contributor.user}),e.preventDefault()):_.includes(t.contributor.contributions,"answers")&&(t.on_clicked_verified_answer({artist:t.contributor.artist}),e.preventDefault())}}})},function(t,e){angular.module("genius").component("songVerifiedArtists",{bindings:{verified_contributors:"<verifiedContributors"},templateUrl:"song_verified_artists.html",controller:["$scope",function(t){t.$watch("$ctrl.verified_contributors",function(t){1===t.length&&(this.featured=!0),this.commentary_and_lyrics_by=_.filter(t,function(t){return _.includes(t.contributions,"lyrics")&&(_.includes(t.contributions,"annotations")||_.includes(t.contributions,"answers"))}),this.commentary_by=_.filter(t,function(t){return!_.includes(t.contributions,"lyrics")&&(_.includes(t.contributions,"annotations")||_.includes(t.contributions,"answers"))}),this.lyrics_by=_.filter(t,function(t){return _.includes(t.contributions,"lyrics")&&!(_.includes(t.contributions,"annotations")||_.includes(t.contributions,"answers"))}),this.lyrics_only=this.lyrics_by.length&&!(this.commentary_and_lyrics_by.length||this.commentary_by.length)}.bind(this))}]})},function(t,e){angular.module("genius").component("songVerifiedArtistsSection",{bindings:{contributors:"<",featured:"<",label:"@",lyrics_only:"<lyricsOnly"},templateUrl:"song_verified_artists_section.html"})},function(t,e){angular.module("genius").component("songVerifiedArtistsSectionSingle",{bindings:{contributor:"<",featured:"<",label:"@",variants:"<"},templateUrl:"song_verified_artists_section_single.html",controller:function(){var t=this;this.$onChanges=function(e){e.contributor&&(t.url=t.contributor.artist.url,t.image_url=t.contributor.artist.image_url,t.is_meme_verified=t.contributor.artist.is_meme_verified,t.name=t.contributor.artist.name)}}})},function(t,e){angular.module("genius").component("spamStatus",{templateUrl:"spam_status.html",bindings:{user:"<"},controller:["UserClient",function(t){var e=this;this.$onChanges=function(n){n.user&&t.spam_status(e.user.id).then(function(t){e.user_spam_evaluation=t.user_spam_evaluation})}}]})},function(t,e){angular.module("genius").component("squareItemAndIq",{bindings:{event_type:"@eventType",iq_params:"<iqParams",show_pill_initial:"<showPill",variants:"<"},templateUrl:"square_item_and_iq.html",transclude:!0,controller:["Iq","Session",function(t,e){var n=this;this.show_pill=function(){return!!e.user_signed_in&&(!!_.isUndefined(n.show_pill_initial)||n.show_pill_initial)},this.iq=function(){return n.iq_params?_.sum(_.map(_.filter(n.iq_params,"applicable"),function(t){return t.multiplier*t.base})):t.for(n.event_type)}}]})},function(t,e){angular.module("genius").component("standaloneInbox",{templateUrl:"standalone_inbox.html",transclude:!0,bindings:{embed:"<"},controller:["$window",function(t){var e=this;this.$onChanges=function(n){if(n.embed)if(e.embed){var i=t.frameElement.parentElement;i.style.height="".concat(t.parent.innerHeight,"px"),e.max_height=i.offsetHeight,i.style.height="auto"}else e.max_height=0}}]})},function(t,e){angular.module("genius").component("standaloneSearch",{templateUrl:"standalone_search.html",transclude:!0,controller:["$window","SearchClient","AppConfig",function(t,e,n){var i=this;this.$onInit=function(){var r=t.frameElement.parentElement;r.style.height="".concat(t.parent.innerHeight,"px"),i.max_height=r.offsetHeight,r.style.height="auto";t.addEventListener("message",function(t){t.origin==="https://".concat(n.canonical_domain)&&"standalone-search-query"===_.get(t.data,"type")&&(i.search_text=t.data.query,e.multi(i.search_text).then(function(t){i.sections=t}))})}}]})},function(t,e){angular.module("genius").component("statisticsPanel",{bindings:{user:"<",on_select:"&onSelect"},templateUrl:"statistics_panel.html"})},function(t,e){angular.module("genius").component("statisticsPanelItem",{bindings:{label:"@",value:"<",icon:"@"},templateUrl:"statistics_panel_item.html"})},function(t,e){angular.module("genius").component("taboola",{template:'\n    <div\n      ng-if="$ctrl.enabled"\n      class="{{$ctrl.container_classes}}"\n    >\n      <div id="{{$ctrl.container_id}}"></div>\n    </div>\n  ',bindings:{mode:"@",placement:"@",container_classes:"@containerClasses"},controller:["taboola",function(t){var e=this;this.$onInit=function(){e.enabled=t.enabled,e.container_id=_.uniqueId("taboola-")},this.$postLink=function(){t.push_and_flush({container:e.container_id,mode:e.mode,placement:e.placement,target_type:"mix"})}}]})},function(t,e){angular.module("genius").component("twitterShareButton",{templateUrl:"twitter_share_button.html",bindings:{url:"<",message:"<",variants:"<"},controller:["Twitter","Tracking",function(t,e){var n=this;this.share_on_twitter=function(){e.track("Bagon Twitter Share"),t.share({url:n.url,message:n.message})}}]})},function(t,e){angular.module("genius").component("userAttribution",{bindings:{object:"<",rank:"<"},templateUrl:"user_attribution.html"})},function(t,e){angular.module("genius").component("userIdentities",{templateUrl:"user_identities.html",bindings:{user:"<",editable:"<"},controller:["IdentityClient","Session",function(t,e){this.can=function(t){return e.has_permission(t,this.user)},this.can_edit=function(){return this.editable&&this.can("manage_identities")},this.saving_identity={},this.unlink_identity=function(e){this.saving_identity[e.provider]||(this.saving_identity[e.provider]=!0,delete this.errors,t.destroy(e.id).then(function(t){_.assign(this.user,t.user),delete this.errors}.bind(this)).catch(function(t){this.errors=t.errors}.bind(this)).finally(function(){delete this.saving_identity[e.provider]}.bind(this)))},this.identity_auth_path=function(t){return"/auth/"+t}}]})},function(t,e){angular.module("genius").component("userInfoWithActions",{bindings:{user:"<object",variants:"<"},templateUrl:"user_info_with_actions.html",controller:["$scope","Session","UserClient","Attempt",function(t,e,n,i){var r=this;this.attempt_close=i.close_form,this.user_signed_in=e.user_signed_in,this.current_user=e.current_user,t.$watch("$ctrl.user",function(t){if(!t.current_user_metadata){var e=this.user;n.load(e.id).then(function(t){_.assign(e,t)})}}.bind(this)),this.close_conversation_modal=function(){return r.sending_message=!1}}]})},function(t,e){angular.module("genius").component("userModeration",{templateUrl:"user_moderation.html",bindings:{user:"<"},controller:["Session","UserClient","Attempt","AppConfig",function(t,e,n,i){var r=this;this.can=function(e){return t.has_permission(e,r.user)},this.clear=function(){r.errors=null,r.messages=null},this.toggle_penalty_status=function(){r.updating||(r.clear(),r.updating=!0,(r.user.penalty_box_until?e.unpenalty_box(r.user.id):e.penalty_box(r.user.id)).then(function(t){_.assign(r.user,t.user)}).catch(function(t){r.errors=t.errors}).finally(function(){r.updating=!1}))},this.update_spam_state=function(t){r.updating||n.admin_action(function(){r.clear(),r.updating=!0,e.update_spam_state(r.user.id,{state:t}).then(function(t){_.assign(r.user,t.user),r.messages=["Done! (But it'll take a few minutes to finish)"]}).catch(function(t){r.errors=t.errors}).finally(function(){r.updating=!1})},I18n.t("mark_".concat(t,".confirm")))},this.mass_delete_unreviewed_activity=function(){r.updating||n.admin_action(function(){r.clear(),r.updating=!0,e.mass_delete_unreviewed_activity(r.user.id).then(function(t){_.assign(r.user,t.user),r.messages=["Done! (But it'll take a few minutes to finish)"]}).catch(function(t){r.errors=t.errors}).finally(function(){r.updating=!1})},I18n.t("mass_delete_unreviewed_activity.confirm"))},this.vote_types=i.user_vote_types_for_delete,this.mass_delete_votes=function(t){r.updating||n.admin_action(function(){r.clear(),r.updating=!0,e.delete_votes(r.user.id,t).then(function(t){_.assign(r.user,t.user),r.messages=["Done! (But it'll take a few minutes to finish)"]}).catch(function(t){r.errors=t.errors}).finally(function(){r.updating=!1})},I18n.t("mass_delete_votes.".concat(t,".confirm")))}}]})},function(t,e){angular.module("genius").component("verticalAlbumCard",{bindings:{album:"<object"},templateUrl:"vertical_album_card.html"})},function(t,e){angular.module("genius").component("verticalSearchResultItem",{bindings:{hit:"<"},templateUrl:"vertical_search_result_item.html"})},function(t,e){angular.module("genius").component("verticalSearchResultItems",{bindings:{results:"<",limit_to:"<limitTo"},templateUrl:"vertical_search_result_items.html"})},function(t,e){angular.module("genius").component("videoCarousel",{bindings:{object:"<",placement:"@",variants:"<",title:"@",active_video:"<activeVideo",on_load:"&onLoad",video_list:"<videoList"},templateUrl:"video_carousel.html",controller:["VideoPlacement","$templateCache",function(t,e){var n=this;this.$onChanges=function(i){i.object&&(n.video_placement=new t(n.object,n.placement,function(t){n.loaded=!0,n.on_load({videos:t})})),n.logo_name=function(){return n.video_list?"".concat(n.video_list.slug,".svg"):null},n.has_logo=function(){return!!e.get(n.logo_name())},n.logo_variants=function(){var t;switch(n.logo_name()){case"news.svg":t=["medium"];break;case"bts.svg":case"for-the-record.svg":t=["large"];break;case"irl.svg":t=["medium"];break;default:t=["small"]}return _.map(t,function(t){return"video_carousel-video-card-logo--".concat(t)}).join(" ")}}}]})},function(t,e){angular.module("genius").component("videoEditForm",{templateUrl:"video_edit_form.html",bindings:{video:"<object"},controller:["Session","VideoSourcesClient",function(t,e){var n=this;this.$onChanges=function(t){t.video&&(n.loaded=!1,e.index(n.video.id).then(function(t){n.video_sources=t,n.loaded=!0}))},this.add_video_source=function(){n.error=null,e.create(n.video.id,n.new_source).then(function(t){n.video_sources.push(t),n.new_source={}}).catch(function(t){n.error=t})},this.remove_video_source=function(t){n.error=null,e.destroy(t.id).then(function(){_.remove(n.video_sources,t)}).catch(function(t){n.error=t})},this.has_permission=t.has_permission}]})},function(t,e){angular.module("genius").component("videoListEditForm",{templateUrl:"video_list_edit_form.html",bindings:{video_list:"<object",on_updated:"&onUpdated"},controller:["VideoListClient",function(t){var e=this;this.save=function(){Reflect.deleteProperty(e,"errors"),t.update(e.editable_video_list.id,{title_image_url:e.editable_video_list.title_image_url,mobile_title_image_url:e.editable_video_list.mobile_title_image_url}).then(function(t){e.video_list=t,e.on_updated({video_list:e.video_list})}).catch(function(t){e.errors=t.response.errors})},this.$onChanges=function(t){t.video_list&&(e.editable_video_list=_.cloneDeep(e.video_list))}}]})},function(t,e){angular.module("genius").component("videoListPage",{templateUrl:"video_list_page.html",controller:Object.assign(["Tracking","Session","PagedDataFeed","VideoListClient",function(t,e,n,i){var r=this;this.$routerOnActivate=function(e){r.page_data=e.routeData.page_data,t.track("Video List Page Load",{"Video List ID":r.page_data.video_list.id}),r.scrollable_videos_data=new n(_.partial(i.videos,r.page_data.video_list.slug),"videos",{per_page:60},r.page_data.next_page)},this.can_perform=function(t){return e.has_permission(t,r.page_data.video_list)}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("videoListVideo",{templateUrl:"video_list_video.html",bindings:{video:"<",video_list:"<videoList",position:"<",variants:"<"},controller:["Session",function(t){var e=this;this.$onChanges=function(t){t.video&&(e.tracking_data={"Page Type":"desktop_video_list_page",Placement:"list",Position:e.position,"Video ID":e.video.id,"Object Type":"video_list","Object ID":e.video_list.id})},this.has_permission=t.has_permission}]})},function(t,e){angular.module("genius").component("videoPage",{templateUrl:"video_page.html",controller:Object.assign(["Tracking","$interval","SmartRouting","Session","$location","VideoRegistry","ArticleClient","Attempt","currentFlashMessages","$window",function(t,e,n,i,r,o,a,s,c,l){var u,d=this;this.navigate_to_next_video=function(){n.navigate_to_absolute_url("".concat(d.next_video.url,"?utm_source=autoplay"))},this.countdown_to_next_video=function(){d.next_video&&(d.seconds_until_next_video=5,u=e(function(){d.seconds_until_next_video-=1,0===d.seconds_until_next_video&&(d.stop_countdown_to_next_video(),d.navigate_to_next_video())},1e3))},this.stop_countdown_to_next_video=function(){d.seconds_until_next_video=void 0,e.cancel(u)},this.delete_article=function(){s.admin_action(function(){a.delete(d.page_data.article.id).then(function(){c.push({type:"notice",message:"Successfully deleted article"}),l.location.href=d.page_data.video.url})},"Are you sure you want to delete this article?")},this.$routerOnActivate=function(e){d.page_data=e.routeData.page_data,o.register_page(d.page_data.video,"desktop_video_page"),d.tracking_data={"Page Type":"desktop_video_page",Placement:"main",Position:1,"Video ID":d.page_data.video.id,"Object Type":"video","Object ID":d.page_data.video.id},t.track("Video Page Load",{"Video ID":d.page_data.video.id,Source:r.search().utm_source})},this.can=function(t){return i.has_permission(t,d.page_data.video)}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("videoRelevanceReason",{bindings:{video:"<"},templateUrl:"video_relevance_reason.html"})},function(t,e){angular.module("genius").component("videosModal",{bindings:{initial_video:"<initialVideo",build_tracking_data:"&buildTrackingData",on_close:"&onClose",object:"<"},templateUrl:"videos_modal.html",controller:["VideoRegistry",function(t){var e=this;this.$onInit=function(){e.players={},e.carousel_videos=t.videos_for(e.object),e.initial_video&&(_.remove(e.carousel_videos,e.initial_video),e.carousel_videos.unshift(e.initial_video))},this.$onChanges=function(t){t.initial_video&&e.initial_video&&(e.active_video=e.initial_video)},this.select_video=function(t){if(t&&t!==e.active_video){var n=e.players[e.active_video.id];n&&n.pause(),e.play_pct=0,e.active_video=t,e.video_can_play=!1}},this.next_video=function(){var t=_.findIndex(e.carousel_videos,function(t){return t.id===e.active_video.id}),n=e.carousel_videos[t+1];n&&e.select_video(n)},this.update_progress=function(t,n){e.play_pct=Math.ceil(n?t/n*100:0)},this.add_video_api=function(t,n){return e.players[t]=n},this.tracking_data=function(t){return _.assign(e.build_tracking_data({video:t}),{"Modal Position":_.indexOf(e.carousel_videos,t)+1})}}]})},function(t,e){angular.module("genius").component("webAnnotatorManager",{bindings:{web_page_id:"@webPageId"},templateUrl:"web_annotator_manager.html",controller:["WebAnnotatorClient",function(t){var e=this;this.$onInit=function(){e.errors=[],t.load_web_page(e.web_page_id).then(function(t){return e.web_page=t})},this.protect=function(n){t["".concat(n?"protect":"unprotect","_web_page")](e.web_page_id).then(function(t){return e.web_page=t}).catch(e.on_error)},this.publish_drafts=function(){t.publish_web_page_drafts(e.web_page_id).then(function(t){return e.web_page=t}).catch(e.on_error)}}]})},function(t,e){angular.module("genius").component("webAnnotatorManagerErrors",{bindings:{yields_on_error:"&yieldsOnError"},templateUrl:"web_annotator_manager_errors.html",controller:["$timeout",function(t){var e=this;this.$onInit=function(){e.errors=[],e.yields_on_error({on_error:e.on_error})},this.on_error=function(n){e.errors.unshift(n),t(function(){return _.remove(e.errors,n)},5e3)}}]})},function(t,e){angular.module("genius").component("webAnnotatorRolesTable",{templateUrl:"web_annotator_roles_table.html",bindings:{header:"@",web_location_id:"<webLocationId",web_location_type:"@webLocationType"},controller:["WebAnnotatorClient",function(t){var e=this;this.$onInit=function(){e.errors=[],e.load()},this.load=function(){return t.load_user_roles("".concat(e.web_location_type,"s"),e.web_location_id).then(function(t){return e.user_roles=t})},this.create=function(n){return t.create_user_role("".concat(e.web_location_type,"s"),e.web_location_id,n).then(e.load)}}]})},function(t,e){angular.module("genius").component("youtubeSubscribeButton",{templateUrl:"youtube_subscribe_button.html",controller:["Google","$element",function(t,e){this.$postLink=function(){t.setup().then(function(){t.refresh_youtube_subscribe_in(e[0])})}}]})},function(t,e){angular.module("genius").constant("AdConfig",window.AD_CONFIG)},function(t,e){angular.module("genius").constant("AnalyticsConfig",window.ANALYTICS_CONFIG)},function(t,e){angular.module("genius").constant("diff_match_patch",window.diff_match_patch)},function(t,e){angular.module("genius").constant("mobile_device",window.MOBILE_DEVICE)},function(t,e){angular.module("genius").controller("ArticleFormCtrl",["Filepicker","$element","$immediate",function(t,e,n){var i,r=this;this.$onInit=function(){r.snippets={Lyrics:{before:"<g-lyrics>",after:"</g-lyrics>"},"Outlined Title":{before:"<g-outlined-title>",after:"</g-outlined-title>"},Pullquote:{before:"<g-pullquote>\n  ",after:"\n  <cite>Attribution</cite>\n</g-pullquote>\n"},"Image With Caption":{before:'<g-image src="https://example.com/image.png">',after:"</g-image>",default_body:"\n  Caption\n"},"Fullbleed Image With Caption":{before:'<g-fullbleed-image src="https://example.com/image.png">',after:"</g-fullbleed-image>",default_body:"\n  Caption\n"},List:{before:"<g-list>\n  <g-list-item>\n    <g-list-item-title>",after:'</g-list-item-title>\n    <g-list-item-media src=""></g-list-item-media>\n    <g-list-item-body></g-list-item-body>\n  </g-list-item>\n</g-list>'},Knotch:{before:"<g-knotch>",after:"</g-knotch>",default_body:"knotch_class_here"}},r.formatting={"Header (Primary)":{before:"# "},"Header (Secondary)":{before:"## "},"Header (Tertiary)":{before:"### "},Link:{before:"[",after:"](url)"},Italic:{before:"*",after:"*"},Bold:{before:"**",after:"**"},Strikethrough:{before:"~~",after:"~~"},Superscript:{before:"<sup>",after:"</sup>"},Subscript:{before:"<sub>",after:"</sub>"},Small:{before:"<small>",after:"</small>"},Center:{before:"<center>",after:"</center>"},"Bulleted List":{before:"- ",each_line:!0},"Numbered List":{before:"1. ",each_line:!0},Blockquote:{before:"> "},"En Dash":{before:"--"},"Em Dash":{before:"---"},"Horizontal Line":{before:"***"}},i=new t({services:"COMPUTER"})},this.pick_image=function(){return i.pick_and_store().then(function(t){r.insert_at_body_markdown_cursor({before:'<g-image src="'.concat(t,'">'),after:"</g-image>",default_body:"Caption"})})},this.preview=function(){r.previewing=!0,n(function(){var t=e.find("form.edit_article");t.find('input[name="_method"]').attr("value","post"),t.submit()})}}])},function(t,e){angular.module("genius").controller("CustomAppNotificationCtrl",["$scope","CustomAppNotificationClient",function(t,e){t.send_preview_notification=function(){e.send_preview_notification(t.notification).then(function(){alert("sent a preview notification to your devices, take a look")})}}])},function(t,e){angular.module("genius").controller("DevCtrl",["$window","$scope","$http","AppConfig",function(t,e,n,i){e.search={query:""},e.saving=!1,e.build_scenario=function(){if(!e.saving){e.saving=!0;var r=e.current_scenario.traits.filter(function(t){return t.enabled}).map(function(t){return t.name});n.post(i.api_root_url+"/scenarios?id="+e.current_scenario.id,{scenario:{traits:r}}).then(function(n){t.location.href=n.data.url,e.saving=!1})}},e.configure_scenario=function(t){e.current_scenario=t},e.clear_scenario=function(){e.current_scenario=void 0};var r=_.once(function(){n.get(i.api_root_url+"/scenarios").then(function(t){e.results=t.data.scenarios})});e.open_search=function(){r(),e.open=!0},e.close_search=function(){e.open=!1}}])},function(t,e){angular.module("genius").controller("FactTrackAnnotationEditCtrl",["$scope",function(t){t.set_timestamp_to_now=function(){t.annotation.timestamp_in_ms=t.ctrl.time},t.annotation_duration=function(){var e=t.annotations.indexOf(t.annotation),n=t.annotations[e+1];return(n?n.timestamp_in_ms:t.duration)-t.annotation.timestamp_in_ms}}])},function(t,e){angular.module("genius").controller("FactTrackSongEditCtrl",["$scope","$debounce","SpotifyAnnotationClient","orderByFilter","ScrollPoint",function(t,e,n,i,r){t.scroll_to=r.scroll_to,t.song_id=$("[data-song-id]").attr("data-song-id"),this.toggle_fullscreen=function(){this.alt_mode=!1,this.fullscreen=!this.fullscreen},this.toggle_alt_mode=function(){this.alt_mode=!this.alt_mode},t.remove_annotation=function(e){var n=t.annotations.indexOf(e);t.annotations.splice(n,1)},t.add_annotation=function(){t.annotations.push({content_type:"iq",timestamp_in_ms:this.time})}.bind(this),n.load_song(t.song_id).then(function(e){if(t.spotify_song=e.spotify_song,t.annotations=e.spotify_annotations,t.spotify_song.track_url&&(t.is_ready=!0),!_.some(t.annotations,{content_type:"credits"})){var n=_.get(t.spotify_song,["metadata","duration_ms"],18e4);t.annotations.push({content_type:"credits",content:"Check out the full lyrics and annotations on Genius for contributors, sources, and even more knowledge.",timestamp_in_ms:n-3e3})}s()});var o=!1,a=function e(){t.saving_disabled?o=!0:(t.saving_disabled=!0,n.save_song(t.song_id,t.spotify_song,t.annotations).then(function(e){t.spotify_song.lock_version=e.spotify_song.lock_version,t.save_error=void 0}).catch(function(e){var n=e.data;t.save_error=n.message||"Failed to save",t.conflicted="conflict"===n.error,$.facebox("<div><img src='https://images.genius.com/5f38d92d0b29722104abd09aa01b1585.200x200x4.gif'></div><br><h1>Something went wrong!</h1><h2>Consider copy/pasting your work somewhere else before reloading the page</h2>")}).finally(function(){t.saving_disabled=!1,o&&(o=!1,e())}))},s=function(){t.$watch("annotations",function(){t.annotations=i(t.annotations,["timestamp_in_ms","id"])},!0);var n=e(a,1e3);t.$watchGroup(["annotations","spotify_song.note","spotify_song.finalized"],function(){n()},!0)}}])},function(t,e){angular.module("genius").controller("HeaderCtrl",["$scope","GlobalRefs",function(t,e){this.$onInit=function(){this.cloudflare_error=Boolean(e.get_element("cloudflare_unavailable_alert").length)},t.toggle_mobile_subnav_menu=function(){t.mobile_subnav_menu_open=!t.mobile_subnav_menu_open},t.close_mobile_subnav_menu=function(){t.mobile_subnav_menu_open=!1}}])},function(t,e){angular.module("genius").controller("SongCtrl",["$scope","$window","$q","$location","$immediate","ReferentRegistry","ReferentElementMap","ReferentClient","SongClient","Tracking","Session","currentFlashMessages","Reversible","Attempt","Pusher","I18n","ScrollPoint","only_changes","VideoRegistry","mobile_device","AbTest","Librato",function(t,e,n,i,r,o,a,s,c,l,u,d,p,f,h,m,g,v,b,y,w,x){var k=this;t.$ctrl&&(t.$ctrl.song_ctrl=this),this.$onInit=function(){k.variants={},w.get_ab_tests().then(function(t){return k.variants=t}),e.performance&&setTimeout(function(){window.performance.getEntriesByName("first-contentful-paint","paint").forEach(function(t){return x.measure("first_contentful_paint",t.startTime)})},0),e.ttiPolyfill.getFirstConsistentlyInteractive().then(function(t){t&&x.measure("first_consistently_interactive",t)})},t.attempt_close=f.close_form,t.$watch("song.id",function(e){e&&(b.register_page(t.song,y?"mobile_song_page":"desktop_song_page"),l.delayed_track("Song Page Load",{}))});var C=i.search().from_question_email;C&&l.track("Question email question clicked",{question_id:C});t.user_signed_in=u.user_signed_in,a.clear();var S=function(e){return _.find(t.annotation_previews,{referent_id:e})};this.update_focused_referent_anchor=function(e){k.focused_fragement_element_id=$(e).data("fragment_element_id"),t.annotation_preview=function(t){var e=Number($(t).data("id"));return S(e)}(e),t.$digest()},this.is_active_element=function(t){return k.focused_fragement_element_id===t},this.dismiss_annotation_preview=function(){t.annotation_preview_dismissed=!0,l.track("Dismiss Annotation Teaser")},this.reactivate_annotation_preview=function(){t.annotation_preview_dismissed=!1,l.track("Reactivate Annotation Teaser")},this.referent_has_preview=function(t){return!!S(t)},this.highlight_preview_referent=function(e){return k.is_active_element(e)&&!t.annotation_preview_dismissed},this.show_preview_referent_indicator=function(e){return k.is_active_element(e)&&t.annotation_preview_dismissed},o.register(t.song.description_annotation),t.preloaded_referents&&_.each(t.preloaded_referents,function(t){o.register(_.assign({fragments:[]},t))}),r(function(){c.count_view(t.song.id),o.preload_from_start(5)},!1),t.sidebar={signing_up:!1},t.initial_sidebar_content_showing=function(){return!(t.current_referent||t.$ctrl.lyrics_selection_range||t.sidebar.signing_up||t.$ctrl.creating_referent)},t.delete_song=function(){c.delete(t.song.id).then(function(){d.push({type:"notice",message:"Successfully deleted Song"}),e.location.href="/"})},t.next_track=function(){var e=!1;return _.find(t.primary_album_tracks,function(n){if(e)return!0;e=n.song.id===t.song.id})},t.open_first_verified_annotation=function(t){l.track("Tap Verified Callout");var e=o.first(function(e){return"verified"===e.classification&&_.includes(e.verified_annotator_ids,t.id)});k.open_referent_by_id(e.id)},t.open_next_referent=function(t){l.track("Tap Next Verified"),k.open_referent_by_id(t)},t.$watch("next_up_clicked",function(t){t&&l.track("Next Song Tap")}),this.update_url_for_open_referent=function(t){i.url()!=="/".concat(t)&&i.url("/".concat(t))};t.can_perform=function(e){return u.has_permission(e,t.song)};var A={hide:function(){k.hiding_prompt_visible=!0},destroy:function(){t.delete_song()},view_annotation_engagement_data:function(){t.toggle_engagement_data()},edit_spotify_annotations_for:function(){e.open("/songs/".concat(t.song.id,"/edit-fact-track"))},view_lyrics_synchronization:function(){e.open("/songs/".concat(t.song.id,"/lyrics_sync"))}},E={view_annotation_engagement_data:!0,edit_spotify_annotations_for:!0,view_lyrics_synchronization:!0};t.attempt_admin_action=function(e,n){if(E[e])return t.perform_admin_action(e,n);f.admin_action(_.partial(t.perform_admin_action,e,n),m.lookup("song.action_confirmations.".concat(e))||m.t("song.action_confirmations.admin_default"))},t.perform_admin_action=function(e,n){if(A[e])return A[e]();!function(e,n){c.perform_action(t.song.id,e,n).then(function(e){t.song=e}).catch(function(t){var e=t.message;d.push({type:"error",message:e})})}(e,n)},t.$on("editorial_action_count_changed",function(t,e){if(e.commentable.referent_id){var n=o.get(e.commentable.referent_id);if(n){var i=_.chain(n.annotations).filter(function(t){return!t.verified}).sumBy(function(t){return t.comment_count+t.proposed_edit_count});n.pending_editorial_actions_count=i}}}),t.$on("annotation_deleted",function(e,n,i){t.$ctrl.lyrics_compiled.promise.then(function(){var e=o.get(n.referent_id);t.$ctrl.lyrics_interface.block_edit(!0),e._deleted=_(e.annotations).every(function(t){return t._deleted||t.new}),i.then(function(){e._deleted?t.$ctrl.lyrics_interface.remove_referent(n.referent_id):(Reflect.deleteProperty(e,"_deleted"),s.refresh(e))}).catch(function(){Reflect.deleteProperty(e,"_deleted")}).finally(function(){t.$ctrl.lyrics_interface.block_edit(!1)})})}),t.$watch("current_referent._deleted",function(e){e&&t.$ctrl.clear_current_referent()});var j=_.once(function(){c.load_annotation_open_data(t.song.id).then(function(e){t.open_data=e})});t.toggle_engagement_data=function(){t.showing_annotation_engagement_data=!t.showing_annotation_engagement_data,j()},t.set_current_hover_and_digest=function(e){t.hover_referent_id=e,t.$digest()},t.$on("referent_created",function(e,n){o.register(n),_.assign(t.song,n.annotatable.client_timestamps),k.update_url_for_open_referent(n.id)}),this.save=function(e){k.saving=!0;var i=v(e,t.song),r=p.modify(t.song,e);return c.update(t.song.id,i).then(function(e){return angular.extend(t.song,e)}).catch(function(t){return r(),n.reject(t)}).finally(function(){k.saving=!1})},this.show_metadata_form=function(t,e){var n,i,r;k.show_metadata_form_sections=(r=!0,(i=t)in(n={})?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,n),l.track("Song Page Open Edit Form",{section:t,keyboard_shortcut:!!e})},this.has_track_info=function(){for(var e=t.song,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return _(i).filter(function(t){return _.isNumber(e[t])||_.some(e[t])}).some()},this.has_song_relationships=function(){return _(t.song.song_relationships).map(function(t){return t.songs}).flatten().some()},this.close=function(){k.show_metadata_form_sections=!1},this.open_referent_by_id=function(t){i.path("/".concat(t))},this.featured_annotation_in_view=_.once(function(t){t&&l.track("Featured Annotation In View")}),this.reload_song=function(){return k.edit_blocked=!0,c.load_song(t.song.id).then(function(e){k.edit_blocked=!1,_.assign(t.song,_.omit(e,"description","description_annotation"))})},this.is_apple_music_player_enabled=function(){return u.has_permission("view_apple_music_player",t.song)},this.should_load_apple_music_player=function(){return k.is_apple_music_player_enabled()&&t.song.is_music&&(t.song.apple_music_id||"enabled"===k.variants.apple_mobile_unmatched_cta&&y)},u.user_signed_in&&h.subscribe(t.song.pusher_channel,"song-updated",function(e){t.song.updated_by_human_at<e.updated_by_human_at&&k.reload_song(),t.song.lyrics_updated_at<e.lyrics_updated_at&&t.$ctrl.lyrics_interface.refresh_lyrics()}),t.open_first_verified_answer=function(e){var n=_.find(t.pinned_questions,function(t){return _.get(t,"answer.answer_source.artist.id")===e.id});n?g.scroll_to("question_".concat(n.id)):g.scroll_to("questions")},r(function(){$(".song_media_controls").offset()&&(k.media_player_sticky_offset=-($(".song_body").offset().top-$(".song_media_controls").offset().top))})}])},function(t,e){angular.module("genius").directive("addAnnotation",[function(){return{restrict:"E",templateUrl:"add_annotation.html",scope:{start_new_community_referent:"&startNewCommunityReferent",start_new_referent:"&startNewReferent",creating_referent:"<creatingReferent",can_add_community_annotation:"<canAddCommunityAnnotation",can_add_pinned_annotation:"<canAddPinnedAnnotation",annotation:"<",song:"<",enable_waiting_class:"<enableWaitingClass"},controllerAs:"ctrl",controller:["Session",function(t){this.user_signed_in=t.user_signed_in}]}}])},function(t,e){angular.module("genius").directive("alwaysDirty",function(){return{restrict:"A",controller:["BeforeUnloadCheck",function(t){var e=function(){return!0};this.$onInit=function(){return t.add(e)},this.$onDestroy=function(){return t.remove(e)}}]}})},function(t,e){angular.module("genius").directive("ampIframeResizable",["Bindings","$window","AppConfig",function(t,e,n){var i=t.resolver({on_amp_iframe_resize:"&onAmpIframeResize"});return{restrict:"A",link:function(t,r,o){var a=i(t,o);e.addEventListener("message",function(e){e.origin==="https://".concat(n.canonical_domain)&&e.source===r[0].contentWindow&&"amp"===e.data.sentinel&&"embed-size"===e.data.type&&(t.$applyAsync(function(){return a.on_amp_iframe_resize({width:e.data.width,height:e.data.height})}),e.data.height?r.css("height","".concat(e.data.height,"px")):r.css("height",""),e.data.width?r.css("width","".concat(e.data.width,"px")):r.css("width",""))})}}}])},function(t,e){angular.module("genius").directive("annotatableImage",["$document",function(t){return{templateUrl:"annotatable_image.html",restrict:"E",scope:{src:"@",song:"<",on_image_referent_creation_started:"&onImageReferentCreationStarted",on_image_referent_created:"&onImageReferentCreated",on_image_referent_creation_failed:"&onImageReferentCreationFailed",can_perform:"<canPerform",lyrics_anchorer:"<lyricsAnchorer"},controller:["$scope",function(e){var n=this;this.create_image_referent=function(i){var r=n.getImage(),o=t[0].createRange();o.selectNodeContents(r),o.precomputed_client_rect=o.getBoundingClientRect(),e.creating_image_referent=!0,e.on_image_referent_creation_started({selection_range:o}),e.image_referent_creation_failed=!1,e.lyrics_anchorer.create_image_referent(r,o,i).then(function(t){e.creating_image_referent=!1,e.on_image_referent_created({referent:t,selection_range:o}),e.image_referent_created=!0},function(t){e.creating_image_referent=!1,e.on_image_referent_creation_failed({error:t}),e.image_referent_creation_failed=!0})},this.set_current_hover_and_digest=function(t){e.hovering_over_image=t,e.$digest()}}],controllerAs:"ctrl",link:{pre:function(t,e,n,i){i.getImage=function(){return e.find("img")[0]}}}}}])},function(t,e){angular.module("genius").directive("annotation",["Session","Reversible","AnnotationClient","ReferentRegistry","ReferentClient","$immediate","$q","Bowser","I18n","AppConfig",function(t,e,n,i,r,o,a,s,c,l){return{restrict:"E",templateUrl:"annotation.html",scope:{annotation:"=object",referent:"<referent",variants:"<",annotatable_title:"<annotatableTitle",on_seek_to_next_card:"&onSeekToNextCard",yields_api:"&yieldsApi",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",on_dirty:"&onDirty",on_clean:"&onClean",focused_comments:"<focusedComments"},controllerAs:"ctrl",controller:["$scope","$filter",function(o,a){var u=this;this.hiding_comments=o.variants&&o.variants.hideComments,this.user_signed_in=t.user_signed_in,this.is_android=s.android,this.truncation_length=600,this.content_is_truncated=_.get(o,"variants.truncate_content")&&o.annotation.body.html.length>this.truncation_length,this.unreviewed_annotation_tooltip_info_url=l.unreviewed_annotation_tooltip_info_url,this.integrate_comment=function(t){o.start_editing({integration_body:t.body})},this.update_editorial_action_count=function(){o.annotation.proposed_edit_count=u.edits_to_show_count(),o.$emit("editorial_action_count_changed",{commentable:o.annotation})},o.$watch("annotation.comment_count",this.update_editorial_action_count),this.comment_removed=function(){return e.modify(o.annotation,{comment_count:o.annotation.comment_count-1})},this.edits_to_show_count=function(){return o.annotation.edits?o.annotation.edits.filter(function(t){return!t._deleted&&!t._merged}).length:o.annotation.proposed_edit_count},o.next_referent=function(t){var e={after_referent_id:o.annotation.referent_id};i.first(function(e){return"verified"===e.classification&&_.includes(e.verified_annotator_ids,t.id)},e)},this.seek_to_next_card=function(t){o.on_seek_to_next_card({referent_id:o.next_referent(t).id})},this.has_more_by_user=function(t){return!!o.next_referent(t)},o.finish_editing=function(){if(!o.disable_saving_with){var t;o.disable_saving_with="Saving",t=_.get(o,"annotation._editing.proposed_edit")?n.propose_edit(o.annotation).then(function(t){o.annotation.edits=o.annotation.edits||[],o.annotation.edits.unshift(t),u.showing_edits=!0}):n.save(o.annotation,{referent:o.referent}).then(function(){r.refresh(o.referent)});var i=e.modify(o.annotation,{"_editing._form_visible":!o.annotation.referent_id});t.then(o.dismiss_editing).catch(i).finally(function(){o.disable_saving_with=null})}},o.cancel_editing=function(){if(o.dismiss_editing(),Reflect.deleteProperty(o.referent,"temporary_classification"),o.annotation.new&&_.remove(o.referent.annotations,o.annotation),!o.referent.annotations.length){var t=n.safe_delete(o.annotation);o.$emit("annotation_deleted",o.annotation,t)}},o.dismiss_editing=function(){Reflect.deleteProperty(o.annotation,"_editing"),o.$emit("layout_changed")},this.initialize_annotation_custom_preview=function(){o.annotation._editing._creating_custom_preview=!0},this.clear_annotation_custom_preview=function(){o.annotation._editing.custom_preview=null,o.annotation._editing._creating_custom_preview=!1},this.show_annotation_custom_preview_form=function(){return o.annotation._editing.custom_preview||o.annotation._editing._creating_custom_preview},this.report_as_abusive=function(){return u.reported_abuse=!0,n.report_as_abusive(o.annotation.id).catch(function(){u.reported_abuse=!1})},this.should_show_comments=function(){return!o.rejecting&&!u.hiding_comments&&!o.annotation.new&&!o.annotation._editing&&(o.annotation.body.html||o.annotation.needs_exegesis)},this.annotation_is_unwritten=function(){return o.annotation.new||o.annotation.needs_exegesis||!_.get(o,"annotation.body.html")},this.show_annotation_label=function(){if(!t.user_signed_in&&"needs_exegesis"===_.get(o,"referent.classification"))return!1;var e=_.get(o,"annotation._editing._form_visible"),n=o.annotation.being_created||e;return o.annotation.community&&!n&&!u.annotation_is_being_created_by_someone_else()},this.show_placeholder_annotation_label=function(){var t=_.get(o,"annotation._editing._form_visible");return o.annotation.being_created&&!t&&!u.annotation_is_being_created_by_someone_else()},this.annotation_is_being_created_by_someone_else=function(){return o.annotation.being_created&&(!t.user_signed_in||t.current_user.id!==o.annotation.created_by.id)},this.annotation_title=function(){var t=o.variants&&o.variants.isDescription&&!o.variants.force_genius_annotation_title,e="pending"===o.annotation.state?"Unreviewed ":"",n="accepted"!==o.annotation.state||t?"":"Genius ",i=c.t(t?"sle.prependable_to_name":"annotation.singular_noun_capitalized",{type_name:a("modelHumanName")(o.referent.annotatable._type)}),r=a("truncateToBoundary")(o.annotatable_title,100);return e+n+i+(t?" ".concat(r,""):"")},this.is_authored_by_current_user=function(){return _(o.annotation.authors).some(function(e){return e.user.id===t.current_user.id})};var d={reject:function(){o.begin_rejection()},accept:function(){o.accept()}};o.yields_api({api:d}),_.has(o.annotation,"current_user_metadata.iq_by_action")&&o.yields_iq({iq_api:o.annotation.current_user_metadata.iq_by_action})}],link:function(i){i.annotation_directive=i,i.can=function(e){return t.has_permission(e,i.annotation)};var r=function(){i.annotation.cosigned_by.push(t.current_user)},s=function(){_.remove(i.annotation.cosigned_by,function(e){return e.id===t.current_user.id})};i.toggle_cosign=function(t){t?r():s(),i.saving_cosign=!0,n.toggle_cosign(i.annotation.id,t).then(function(t){_.assign(i.annotation,t.annotation),_.assign(i.referent,t.referent)}).catch(t?s:r).finally(function(){i.saving_cosign=!1})},i.showing_contributors=!1,i.clear_votes=function(){i.showing_voters=!1;var t=e.modify(i,{"annotation.votes_total":0,"annotation.current_user_metadata.interactions.vote":void 0});n.clear_votes(i.annotation.id).catch(t)},i.toggle_voters=function(){i.showing_voters=!i.showing_voters},i.$on("images_loaded",function(){i.loaded=!0,i.$emit("layout_changed")}),i.toggle_contributors=function(){i.showing_contributors=!i.showing_contributors},i.toggle_ellipsis_menu=function(){i.showing_ellipsis_menu=!i.showing_ellipsis_menu},i.start_editing=function(t){t=t||{},i.annotation._editing=_.defaults(i.annotation._editing||{},{_form_visible:!0,_has_source:!!i.annotation.source,source:angular.copy(i.annotation.source||{}),proposed_edit:t.proposed_edit,html:i.annotation.body.html,markdown:i.annotation.body.markdown,_creating_custom_preview:!1,custom_preview:i.annotation.custom_preview}),t.integration_body&&(i.annotation._editing.html=_.compact([i.annotation._editing.html,"PROPOSED SUGGESTION: ".concat(t.integration_body.html)]).join("<br>"),i.annotation._editing.markdown=_.compact([i.annotation._editing.markdown,"PROPOSED SUGGESTION: ".concat(t.integration_body.markdown)]).join("\n\n")),i.annotation.verified&&(i.referent.temporary_classification="verified")},i.accept=function(){var t=n.accept(i.annotation,{referent:i.referent});i.on_pending_event({event:"UserAcceptAnnotation",result:t}),t.then(function(){i.context_updated_at=Date.now()})},i.focus_comment_textarea=function(){i.$broadcast("focus_comment_textarea",i.annotation)},i.begin_rejection=function(){i.rejecting=!0,o(i.focus_comment_textarea)},i.reject_with_comment=function(t){i.rejecting=!1,i.disable_saving_with="Saving";var e=n.safe_reject(i.annotation,{comment:t,referent:i.referent});return i.on_pending_event({event:"UserRejectAnnotation",result:e}),e.then(function(){i.context_updated_at=Date.now()}).catch(function(){return i.rejecting=!0,a.reject()}).finally(function(){return i.disable_saving_with=null}),i.$emit("annotation_deleted",i.annotation,e),e},i.delete=function(){var t=n.safe_delete(i.annotation);i.$emit("annotation_deleted",i.annotation,t)},i.toggle_pin_status=function(){if(!i.toggling_pin_status){i.toggling_pin_status=!0;var t=i.can("pin_to_profile")?"pin_to_profile":"unpin_from_profile";n[t](i.annotation.id).then(function(t){_.assign(i.annotation,t.annotation)}).finally(function(){i.toggling_pin_status=!1})}},i.$on("vote_submitted",function(t,e,n){"down"===n&&"annotation"===e&&i.focus_comment_textarea()}),i.$on("vote_saved",function(t){i.$broadcast("update_voters")})}}}])},function(t,e){angular.module("genius").directive("annotationEdit",["Session","AnnotationClient",function(t,e){return{restrict:"E",templateUrl:"annotation_edit.html",scope:{edit:"<object",before_html:"<beforeHtml",on_merge:"&onMerge",on_resolution:"&onResolution"},controllerAs:"ctrl",controller:["$scope",function(n){var i=this;this.can_moderate=t.has_permission("moderate",n.edit),this.merge=function(){i.working=!0,n.edit._merged=!0,e.merge_edit(n.edit.id).then(function(t){_.assign(n.edit,t),n.on_merge({edit:n.edit}),n.on_resolution()}).catch(function(){n.edit._merged=!1}).finally(function(){i.working=!1})},this.reject=function(){i.working=!0,n.edit._deleted=!0,e.reject_edit(n.edit.id).then(n.on_resolution).catch(function(){n.edit._deleted=!1}).finally(function(){i.working=!1})}}]}}])},function(t,e){angular.module("genius").directive("annotationEdits",["AnnotationClient","ReferentClient","ReferentRegistry",function(t,e,n){return{scope:{annotation:"<object",context_updated_at:"<contextUpdatedAt",on_resolution:"&onResolution"},restrict:"E",templateUrl:"annotation_edits.html",controllerAs:"ctrl",controller:["$scope",function(i){var r=this;this.on_merge=function(t){_.assign(i.annotation,t.annotation_after),o()};var o=function(){r.loading_edits||(r.loading_edits=!0,t.proposed_edits(i.annotation.id).then(function(t){i.annotation.edits=t}).finally(function(){Reflect.deleteProperty(r,"loading_edits")}))};i.$watch("annotation.edits.length",function(t,r){if(t||r){var o=n.peek(i.annotation.referent_id);e.refresh(o)}}),i.$watch("context_updated_at",function(t){t&&o()}),o()}]}}])},function(t,e,n){angular.module("genius").directive("annotationFragment",["ReferentHelper","ReferentRegistry","ReferentElementMap","$compile","$templateCache","$location",function(t,e,n,i,r,o){return{restrict:"A",scope:!0,link:function(a,s,c){a.fragment_id=Number(a.$eval(c.annotationFragment)),a.fragment_element_id=a.$id,a.image=a.$eval(c.image),s.data("fragment_element_id",a.fragment_element_id);var l,u=function(){a.referent.display_mode=t.display_mode_by_classification(a.referent.temporary_classification||a.referent.classification)};(a.$watch("referent.classification",u),a.$watch("referent.temporary_classification",u),a.referent=e.register({id:a.fragment_id,classification:a.classification,stub:!0,fragments:[],is_image:a.image,pending_editorial_actions_count:Number(c.pendingEditorialActionsCount)}),n.has(a.referent.id)||n.set(a.referent.id,s),c.verifiedAnnotatorIds&&(a.referent.verified_annotator_ids=_.map(c.verifiedAnnotatorIds.split(" "),Number)),a.referent.classification=c.classification,a.referent.fragments.push(s[0].innerText||s.text()),a.referent.fragment=_.uniq(a.referent.fragments).join("\n"),a.referent.fragment_from_lyrics=a.referent.fragment,a.open=function(){n.set(a.fragment_id,s),o.url("/".concat(a.fragment_id))},a.$watch("referent.id",function(t){a.fragment_id=t||a.fragment_id}),a.$watch("referent._deleted",function(t){if(t&&!l){var e=s.find("img")[0];l=e?$("<annotatable-image>").attr({src:e.src,song:"song","on-image-referent-created":"lyrics_ctrl.on_image_referent_created(selection_range, referent);","on-image-referent-creation-failed":"lyrics_ctrl.on_image_referent_creation_failed(error)","on-image-referent-creation-started":"lyrics_ctrl.on_image_referent_creation_started(selection_range)","can-perform":"can_perform",lyrics_anchorer:"lyrics_ctrl.lyrics_anchorer"}):$("<span>").html(s.html()),s.before(l).detach(),i(l.parent())(a)}else!t&&l&&(l.replaceWith(s),l=void 0)}),a.$watch("referent.display_mode",function(t,e){s.removeClass("referent--".concat(e)||!1),s.addClass("referent--".concat(t)||!1)}),a.$watchGroup(["highlighted_fragment_id","hover_referent_id"],function(){s.toggleClass("referent--highlighted",a.highlighted_fragment_id===a.fragment_id||a.hover_referent_id===a.fragment_id)}),a.$watchGroup(["showing_annotation_engagement_data","open_data"],function(){a.showing_annotation_engagement_data&&a.open_data?s.attr("data-annotation-views",a.open_data[a.fragment_id]?a.open_data[a.fragment_id]:"N/A"):s.removeAttr("data-annotation-views")}),a.can_perform("see_editorial_indicators"))&&i(r.get("referent_editorial_indicator.html"))(a).insertBefore(s)}}}])},function(t,e){angular.module("genius").directive("annotationHistory",[function(){return{restrict:"E",templateUrl:"annotation_history.html",scope:{annotation:"<",onRevert:"&"},controllerAs:"ctrl",controller:["$scope","AnnotationClient","Session",function(t,e,n){this.can_revert=n.has_permission("edit",t.annotation),e.load_versions(t.annotation.id).then(function(e){t.versions=e}),this.revert_to=function(n){t.reverting_to=n,e.revert_to_version(t.annotation.id,n).then(function(e){_.assign(t.annotation,e),t.onRevert()}).finally(function(){Reflect.deleteProperty(t,"reverting_to")})}}]}}])},function(t,e){angular.module("genius").directive("annotationPlaceholder",[function(){return{restrict:"E",templateUrl:"annotation_placeholder.html",scope:{showCondition:"<",noLabel:"<",placeholder_title:"<placeholderTitle"}}}])},function(t,e){angular.module("genius").directive("annotationSidebar",[function(){var t={verified:"add_pinned_annotation_to",community:"add_community_annotation_to"};return{templateUrl:"annotation_sidebar.html",controllerAs:"ctrl",scope:!0,link:function(t,e,n){t.$watch(n.referent,function(e){t.referent=e})},controller:["$scope","Session","ReferentHelper","Attempt",function(e,n,i,r){var o=this;this.user_signed_in=n.user_signed_in,this.can_create_referent_from_selection=function(){return!!e.$ctrl.lyrics_selection_range},this.start_new_referent_annotation=function(t){var n=this;e.$ctrl.creating_referent=!0,e.$ctrl.lyrics_compiled.promise.then(function(){return e.$ctrl.lyrics_interface.block_edit(!0),e.$ctrl.lyrics_interface.anchorer.create_referent(e.$ctrl.lyrics_selection_range,t).then(function(t){e.$emit("referent_created",t),e.referent=t})}).then(function(){n.referent_creation_failed=!0}).finally(function(){e.$ctrl.creating_referent=!1,e.$ctrl.lyrics_interface.block_edit(!1)})},this.add_pinned_annotation=function(){var t=i.create_verified_annotation_placeholder(e.referent);e.referent.annotations.unshift(t)},this.add_community_annotation=function(){var t=i.create_community_annotation_placeholder(e.referent);e.referent.annotations.push(t)},this.can_create_annotation_type_on_referent=function(i){if(!e.referent)return!1;if(_.some(e.referent.annotations,"new"))return!1;var r=t[i];return n.has_permission(r,e.referent)},this.can_create_community_annotation_on_referent=function(){return this.can_create_annotation_type_on_referent("community")&&!_.some(e.referent.annotations,"needs_exegesis")},e.$watch("referent.id",function(t,e){t&&e&&t.id===e.id||(o.referent_creation_failed=!1)}),this.close=function(){r.close_form(!o.annotation_dirty,function(){o.annotation_dirty=!1,e.$ctrl.clear_current_referent(),e.sidebar.signing_up=!1})}}]}}])},function(t,e){angular.module("genius").directive("applyAnnotationArrowClass",["$immediate","MutationObserver",function(t,e){return{restrict:"A",link:function(n,i){var r=new e(function(e){t(function(){for(var t=0;t<e.length;t++){var n=e[t];if("style"===n.attributeName){var r=n.target.getBoundingClientRect(),o=!!$(document.elementFromPoint(r.right+1,r.top-1)).closest(".annotation_sidebar_unit--verified").length;i.toggleClass("annotation_sidebar_arrow--verified",o)}}},!0)});r.observe(i[0],{attributes:!0}),n.$on("destroy",r.disconnect.bind(r))}}}])},function(t,e){angular.module("genius").directive("authenticationForm",["$window","AuthenticationClient","AbTest",function(t,e,n){return{scope:{variants:"<?",on_cancel:"&onCancel",user_session:"=?userSession",include_sign_in:"<?signIn",include_social:"<?social",show_email_fields:"=?showEmail",header_text:"<headerText",preamble_text:"<preambleText",init_signing_in:"<signingIn"},templateUrl:"authentication_form.html",controllerAs:"ctrl",controller:["$scope",function(i){var r=this;this.show_email_fields=i.show_email_fields,this.signing_in=i.init_signing_in,i.user_session=i.user_session||{},this.submit=function(){if(!r.saving){r.saving=!0,r.errors=null;var o=r.signing_in?"sign_in":"sign_up";e[o](i.user_session).then(function(e){n.clear(),"sign_up"===o&&"/"===t.location.pathname?t.location=e.user.url:t.location.reload()}).catch(function(t){r.errors=t.response.errors}).finally(function(){r.saving=!1})}},this.toggle_signup_signin=function(){r.show_email_fields=!0,r.signing_in=!r.signing_in,r.errors=null}}]}}])},function(t,e){angular.module("genius").directive("autoResizeIframe",function(){return{restrict:"A",link:function(t,e,n){var i;n.autoResizeIframe&&(i=t.$eval(n.autoResizeIframe)),e.iFrameResize(i)}}})},function(t,e){angular.module("genius").directive("autocompleteTagsInput",["AlbumClient","ArtistClient","TagClient","SongClient",function(t,e,n,i){var r={album:{autocomplete:t.autocomplete,persistence_property:"name",display_property:"name_with_artist"},artist:{autocomplete:e.autocomplete,display_property:"name"},tag:{autocomplete:n.autocomplete,display_property:"name"},song:{autocomplete:i.autocomplete,persistence_property:"id",display_property:"full_title"}};return{restrict:"E",scope:{bindTo:"=",disabled:"<ngDisabled",name:"@",inputClasses:"@",autocompleteModel:"@",autocompleteOptions:"<?",requireExisting:"<",excludeIf:"&"},templateUrl:"autocomplete_tags_input.html",link:{pre:function(t){var e=r[t.autocompleteModel];t.max_results=10,t.display_property=e.display_property,t.autocomplete=function(n){return e.autocomplete(n,t.autocompleteOptions).then(function(i){if(i=_.reject(i,function(e){return t.excludeIf({result:e})}),t.requireExisting)return i;if(_.some(i,function(e){return e[t.display_property].toLowerCase()===n.toLowerCase()}))return i;var r={_new:!0};return r[e.display_property]=n,e.persistence_property&&(r[e.persistence_property]=n),i=_.take(i,t.max_results-1).concat(r)})}},post:function(t,e,n){t.placeholder=function(){return t.bindTo&&0===t.bindTo.length?n.placeholder:""}}}}}])},function(t,e,n){"use strict";n.r(e);n(121);angular.module("genius").directive("autocompleteWith",["ArtistClient","UserClient","CustomPerformanceRoleClient","SongClient","Bindings",function(t,e,n,i,r){var o={delay:250,scroll:!1,matchSubset:!1,max:20,minChars:4,dataType:"json",selectFirst:!1,resultsClass:"autocomplete-results"},a={user:e,customPerformanceRole:n,artist:t,song:i},s=r.resolver({on_select:"&?onSelect",create_result:"&?createResult",display_field:"@displayField",autocomplete_with:"@autocompleteWith"});return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){var r=s(t,n),c=r.display_field,l=a[r.autocomplete_with],u={};c&&(i.$formatters.push(function(t){return t?_.get(t[0],c,""):""}),i.$parsers.push(function(t){return u[t]=u[t]||_.set({},c,t),u[t]}));var d=_.assign({},o,l.autocomplete_options),p=d.parse;d.parse=function(t,e){var n=p(t);if(_.each(n,function(t){u[t.data[0]]=t.value}),r.create_result){var i=r.create_result({term:e});n.unshift({data:[e,i],result:i,value:i})}return n},e.autocomplete(l.autocomplete_api_endpoint,d).result(function(n,o){_.isUndefined(r.on_select)?(i.$setViewValue(o[0]),i.$render()):(t.$apply(function(){return r.on_select({data:o[1]})}),e.val(""))})}}}])},function(t,e){angular.module("genius").directive("brightcove",["$window","Ads","AppConfig","Bindings","Brightcove","Bowser","querystring","$q","Session","$timeout","mobile_device",function(t,e,n,i,r,o,a,s,c,l,u){var d=i.resolver({video:"<object",on_ready:"&onReady",can_play:"&canPlay",on_time_change:"&onTimeChange",on_finish:"&onFinish",yields_api:"&yieldsApi",player_name:"@playerName",tracking_data:"<trackingData",autoplays_on_page_load:"<autoplaysOnPageLoad"}),p=Date.now();return{restrict:"A",link:function(i,f,h){var m=this,g=f[0];if(g.constructor!==t.HTMLVideoElement)throw new Error("The 'brightcove' directive can only be used as an attribute on a <video> element");var v=d(i,h),b=r["".concat(v.player_name,"_player_id")];if(!b)throw new Error("The 'brightcove' slot is not configured!");var y=s(function(t){return i.$on("$destroy",t)});i.player=r.load_api(b).then(function(t){var n,s=t.bc,d=t.videojs,p=Object.assign({"Logged In":c.user_signed_in,"Mobile Site":u},v.tracking_data);if(f.attr({"data-video-id":v.video.provider_id,"data-account":r.account_id,"data-player":b,"data-embed":"default","data-param-tracking-data":JSON.stringify(p),controls:!0}),(n=/(?:^|\s)vjs-tech(?:\s|$)/.test(g.className)?d(g):s(g)).play=_.wrap(n.play,function(t){_.each(d.players,function(t){t&&t.pause()});for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];if(Reflect.apply(t,n,i),o.android){var a=g.requestFullScreen||g.webkitRequestFullScreen||g.mozRequestFullScreen;a&&Reflect.apply(a,g,[])}}),n.ima3&&(n.ima3.adMacroReplacement=_.wrap(n.ima3.adMacroReplacement,function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return w(Reflect.apply(t,n.ima3,i))})),n.ready(function(){i.$apply(v.on_ready),v.yields_api({api:n}),$(n.el_).find(".vjs-control").addClass("needsclick")}),n.on("timeupdate",_.throttle(function(){var t=n.duration(),e=n.currentTime();i.$apply(function(){v.on_time_change({duration:t,current:e}),t&&e>=t&&v.on_finish()})}),250),f.on("canplay",function(){i.$apply(v.can_play),v.autoplays_on_page_load&&l(function(){return f.css("opacity",1)},0)}),y.then(function(){return n.dispose()}),n.ima3){var h=_.last(a.parse(new URL(n.ima3.settings.serverUrl).search).iu.split("/"));return e.ensure_targeting_for_placements([[h,h]]).then(function(t){return m._ad_targeting=_.get(_.values(t),[0,"targeting"],{}),n})}return n});var w=function(e){if(!window["Genius.ads"])return null;var i=m._ad_targeting,r=new URL(e),o=a.parse(r.search.slice(1));_.assign(o,{url:t.location.href,description_url:v.video.article_url,hl:(t.navigator.language||"en").split("-")[0],correlator:p}),v.autoplays_on_page_load&&(o.vpa=1);var s,c={};v.video.dfp_kv.forEach(function(t){var e=t.name,n=t.values;c[e]=n.join(",")}),s="null"===o.cust_params?{}:a.parse(o.cust_params||"");var l=_.defaults({},i,c,s,{platform:"web",environment:n.env,campaign_id:a.parse(t.location.search.slice(1)).campaign});return o.cust_params=a.stringify(l),r.search=a.stringify(o),r.toString()}}}}])},function(t,e){angular.module("genius").directive("classForBrowser",["Bowser","Bindings",function(t,e){var n=e.resolver({browsers_and_classes:"<classForBrowser"});return{restrict:"A",link:function(e,i,r){var o=n(e,r),a=!1;_.each(o.browsers_and_classes,function(e,n){_.has(t,n)&&(i.addClass(e),a=!0)}),a||i.addClass(o.browsers_and_classes._default)}}}])},function(t,e){angular.module("genius").directive("classForDuration",["$timeout",function(t){return{restrict:"A",link:function(e,n,i){_.forIn(e.$eval(i.classForDuration),function(e,i){e&&(n.addClass(i),t(function(){n.removeClass(i)},e))})}}}])},function(t,e){angular.module("genius").directive("clickOutside",["$document",function(t){return{restrict:"A",link:function(e,n,i){var r=i.hasOwnProperty("suppressClickOutsideIfHandled"),o=function(t){r&&t.originalEvent.defaultPrevented||document.body.contains(t.target)&&(n[0].contains(t.target)||e.$apply(function(){e.$eval(i.clickOutside,{$event:t})}))},a=n.closest("[click-outside-target]").length?n.closest("[click-outside-target]"):t;a.on("click",o),e.$on("$destroy",function(){a.off("click",o)})}}}])},function(t,e){angular.module("genius").directive("clickToLoad",[function(){return{scope:{message:"@"},restrict:"E",transclude:!0,templateUrl:"click_to_load.html",link:function(t){t.load=function(){t.loading=!0}}}}])},function(t,e){angular.module("genius").directive("clippedBackgroundImage",["$window","ImageTransform",function(t,e){return{link:function(n,i,r){var o=function(t,e){return Math.ceil(t/e)*e};n.$watch(r.clippedBackgroundImage,function(a){n.$applyAsync(function(){i.addClass("clipped_background_image");var n="",s=parseInt(r.clippedBackgroundImageWidthIncrement);if(_.isFinite(s)||(s=1),a){var c,l=t.devicePixelRatio||1,u=o(i.outerWidth(),s)*l,d=o(i.outerHeight(),s)*l;_.has(r,"clippedBackgroundImageFitHeight")&&u>d?(c=e.resize(a,{height:d}),i.addClass("clipped_background_image--tiled_horizontally")):c=e.resize(a,{width:u,height:i.height()*l}),n="url('".concat(c,"')")}i.css("background-image",n)})})}}}])},function(t,e){var n=["accepted","integrated","rejected","marked_spam","archived"];angular.module("genius").directive("comment",["Session","CommentClient","Reversible",function(t,e,i){return{restrict:"E",templateUrl:"comment.html",scope:{comment:"<object",variants:"<"},require:"?^^annotation",controllerAs:"ctrl",controller:function(){},link:function(r,o,a,s){var c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s?s.comment_removed():void 0,o=i.modify(r.comment,Object.assign(e,{_deleted:!0}));t.catch(function(){n&&n(),o()})};r.destroy=function(){c(e.destroy(r.comment.id),{deleted_at:(new Date).getTime()})},r.integrate=function(){s.integrate_comment(r.comment),r.perform_action("integrate","integrated")},r.perform_action=function(t,n){c(e.change_state(r.comment.id,t),{state:n})},r.can_perform=function(e){return t.has_permission(e,r.comment)},r.toggle_voters=function(){r.showing_voters=!r.showing_voters},r.$on("vote_saved",function(t){r.$broadcast("update_voters")}),r.is_removed=function(){return r.comment.deleted_at||_.includes(n,r.comment.state)}}}}])},function(t,e){angular.module("genius").directive("commentForm",[function(){return{restrict:"E",templateUrl:"comment_form.html",scope:{commentable:"<",onSave:"&",allowReasons:"<",saveText:"@",savingText:"@",textareaPlaceholder:"@",showFullFormByDefault:"<",showReasonsByDefault:"<",on_dirty:"&onDirty",on_clean:"&onClean"},controllerAs:"ctrl",controller:["Session","$scope","Reversible",function(t,e,n){var i=this;this.user_signed_in=t.user_signed_in,this.show_full_form_by_default=e.showFullFormByDefault,this.show_reasons_by_default=e.showReasonsByDefault,this.showing_full_form=this.show_full_form_by_default||!1,this.current_user=t.current_user,this.show_full_form=function(){return i.showing_full_form=!0},this.show_reasons_form=function(){return i.showing_full_form||i.show_reasons_by_default};var r=function(){e.comment={_new:!0,author:t.current_user,body:{}}};r(),this.body_is_required=function(){return!e.comment.reason||e.comment.reason.requires_body},this.save=function(){if(!i.saving){t.user_signed_in||(e.comment.anonymous_user={name:e.comment.name});var o=e.comment,a=n.modify(i,{showing_full_form:!1,saving:!1});r(),e.form.$setPristine(),e.onSave({comment:o}).catch(function(){e.comment=o,a()})}},e.$watch("comment.body.markdown",function(t){_.isEmpty(t)?e.on_clean():e.on_dirty()})}],link:function(t,e){t.$on("focus_comment_textarea",function(n,i){i===t.commentable&&e.find('textarea[ng-model="comment.body.markdown"]').focus()})}}}])},function(t,e){angular.module("genius").directive("commentsPlaceholder",[function(){return{restrict:"E",templateUrl:"comments_placeholder.html",scope:{}}}])},function(t,e){angular.module("genius").directive("componentDateInput",function(){return{scope:{ngModel:"=",disabled:"<"},restrict:"E",templateUrl:"component_date_input.html",controllerAs:"ctrl",controller:[function(){_.assign(this,{years:_.range(1,(new Date).getFullYear()+2).reverse(),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map(function(t,e){return{name:t,number:e+1}}),days:_.range(1,32)})}]}})},function(t,e){angular.module("genius").directive("composeMessage",[function(){return{restrict:"E",scope:{recipient:"<",on_sent:"&onSent",yields_is_dirty:"&yieldsIsDirty"},templateUrl:"compose_message.html",controller:["$scope","MessageClient","Session",function(t,e,n){var i,r=this;t.recipient&&(i=t.recipient.id);var o=function(){t.message={recipient_id:i,body:""},t.ctrl.form&&t.ctrl.form.$setPristine()};o(),this.new_message=!t.message.recipient_id,this.current_user=n.current_user,this.showing_markdown_preview=!1,this.markdown_preview_initialized=!1,this.show_markdown_preview=function(){r.showing_markdown_preview=!0,r.markdown_preview_initialized=!0},this.hide_markdown_preview=function(){r.showing_markdown_preview=!1},this.send=function(){t.sending=!0,t.error=null;var n=t.message;e.create(n).then(function(e){o(),t.on_sent({message:e})}).catch(function(e){t.error=e}).finally(function(){t.sending=!1})}}],controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("confirm",["$window",function(t){return{priority:-1,restrict:"A",scope:{message:"@confirm"},link:function(e,n){n.on("click",function(n){e.message&&(t.confirm(e.message)||(n.stopImmediatePropagation(),n.preventDefault()))})}}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").directive("conversationMessages",[function(){return{templateUrl:"conversation_messages.html",scope:{conversation:"<",yields_is_dirty:"&yieldsIsDirty"},controller:["$scope","MessageClient","ConversationClient",function(t,e,i){var r,o=1;t.finished_paginating=!1,t.messages=[],this.message_sent=function(e){t.messages.push(e),t.conversation.latest_message=e,t.conversation.latest_message_preview=e.body_preview},this.should_paginate=function(){return!r&&!t.finished_paginating},this.load_next_page=function(){r||(r=e.for_conversation(t.conversation.id,{page:o}).then(function(e){var a;(a=t.messages).unshift.apply(a,n(e.reverse())),r=null,1===o&&i.mark_read(t.conversation.id),++o,t.finished_paginating=0===e.length}))},this.load_next_page()}],controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("conversationWithUser",["ConversationClient",function(t){return{restrict:"E",scope:{user:"<",yields_is_dirty:"&yieldsIsDirty"},template:'\n      <conversation-messages\n        conversation="conversation"\n        ng-if="conversation"\n        yields-is-dirty="yields_is_dirty({is_dirty: is_dirty})"\n      ></conversation-messages>\n    ',controller:["$scope",function(e){t.with_user(e.user.id).then(function(t){e.conversation=t})}]}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").directive("conversations",["ConversationClient","Attempt",function(t,e){return{restrict:"E",scope:{visible:"<",refresh_at:"<refreshAt",on_conversation_read:"&onConversationRead",on_modal_open:"&onModalOpen",on_modal_close:"&onModalClose",embed:"<",modal_dimensions:"<modalDimensions"},templateUrl:"conversations.html",controller:["$scope",function(i){var r,o,a,s=this;i.attempt_close=e.close_form;var c=function(){r=Date.now(),i.conversations=[],s.all_pages_loaded=!1,o=1};c(),this.should_paginate=function(){return!!i.visible&&!s.all_pages_loaded&&!a},this.load_page=function(){a||(a=t.latest({page:o}).then(function(t){var e;(e=i.conversations).push.apply(e,n(t)),s.all_pages_loaded=!t.length,++o,a=null}))},i.$watchGroup(["visible","refresh_at"],function(){!i.visible&&i.refresh_at&&i.refresh_at>r&&c()}),this.open=function(t,e){e.preventDefault(),i.open_conversation_id=t;var n=_.find(i.conversations,{id:t}),r=n.unread,o=n.unread_messages_count;n.unread=!1,n.unread_messages_count=0,i.on_modal_open(),r&&i.on_conversation_read({conversation:n,unread_messages_count:o})},this.close=function(){i.on_modal_close(),i.open_conversation_id=null}}],controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("copyToClipboard",["Clipboard","$timeout",function(t,e){return{restrict:"A",link:function(n,i,r){var o=new t(i[0],{text:function(){return n.$eval(r.copyToClipboard)}});o.on("success",function(){r.textToShowAfterCopy&&function(t,n){var i=t.text();t.text(n),e(function(){t.text(i)},750)}(i,r.textToShowAfterCopy)}),o.on("error",i.remove),n.$on("$destroy",o.destroy.bind(o))}}}])},function(t,e){angular.module("genius").directive("copyValueToScope",[function(){return{restrict:"A",link:{pre:function(t,e,n){var i=t.$eval(n.copyValueToScope);t[i.key]=i.value}}}}])},function(t,e){angular.module("genius").directive("cosigns",function(){return{restrict:"E",templateUrl:"cosigns.html"}})},function(t,e){angular.module("genius").directive("delayedHref",["$window","$immediate",function(t,e){return{restrict:"A",link:function(n,i,r){var o=r.delayedHref;i.on("click",function(n){n.preventDefault(),e(function(){t.location.href=o},!1)})}}}])},function(t,e){angular.module("genius").directive("delimitedKeys",function(){return{scope:{key:"@delimitedKeys"},restrict:"A",require:"ngModel",link:function(t,e,n,i){var r={};t.$watch(n.ngModel,function(e){e&&e.forEach(function(e){r[e[t.key]]=e})}),i.$formatters.push(function(e){return _.map(e,t.key).join(", ")}),i.$parsers.push(function(e){return e.split(/\s?,\s/).map(function(e){return r[e]||_.set({},t.key,e)})})}}})},function(t,e){angular.module("genius").directive("descriptionReferent",[function(){return{scope:{referent:"<object",variants:"<"},templateUrl:"description_annotation.html"}}])},function(t,e){angular.module("genius").directive("detectImageDiffs",["$immediate",function(t){return{link:function(e,n,i){t(function(){n.find("img").each(function(){var t=-1!==e.$eval(i.left).indexOf(this.src),n=-1!==e.$eval(i.right).indexOf(this.src);t&&!n&&this.classList.add("del"),!t&&n&&this.classList.add("ins")})},!1)}}}])},function(t,e){angular.module("genius").directive("dirtyable",["BeforeUnloadCheck",function(t){return{restrict:"A",require:"form",link:function(e,n,i,r){var o=function(){return e.$apply(function(){return r.$commitViewValue()}),r.$dirty};e.$eval(i.yieldsIsDirty,{is_dirty:function(){return r.$commitViewValue(),r.$dirty}}),t.add(o),e.$on("$destroy",function(){return t.remove(o)})}}}])},function(t,e){angular.module("genius").directive("displayUnlessCookie",["Cookies","DateTools",function(t,e){var n=function(n,i){t.put(n,1,{expires:e.days_to_ms(i),path:"/"})};return{transclude:!0,scope:{name:"@",expiresInDays:"<",setCookieOnDisplay:"<"},template:'<ng-transclude ng-if="!hidden"></ng-transclude>',link:function(e){e.hidden=t.get(e.name),e.setCookieOnDisplay&&!t.get(e.name)&&n(e.name,e.expiresInDays)},controller:["$scope",function(t){this.set_cookie_and_close=function(){n(t.name,t.expiresInDays),t.hidden=!0}}]}}])},function(t,e,n){"use strict";n.r(e);n(519);angular.module("genius").directive("dragAndDrop",["Bindings",function(t){var e=t.resolver({data:"<dragAndDrop",draggable:"<",on_dragstart:"&onDragstart",on_dragend:"&onDragend",on_dragenter:"&onDragenter",on_dragleave:"&onDragleave",on_drop:"&?onDrop",cant_drop:"<cantDrop"});return{restrict:"A",link:function(t,n,i){var r=e(t,i);r.draggable&&(n.addClass("draggable_item"),n[0].addEventListener("dragstart",function(e){e.dataTransfer.setData("text",JSON.stringify(r.data)),n.addClass("draggable_item--dragging"),t.$apply(r.on_dragstart)}),n[0].addEventListener("dragend",function(){n.removeClass("draggable_item--dragging"),t.$apply(r.on_dragend)})),r.on_drop&&(new Dragster(n[0]),n[0].addEventListener("dragster:enter",function(){r.cant_drop||(n.addClass("droppable_item"),t.$apply(r.on_dragenter))}),n[0].addEventListener("dragster:leave",function(){r.cant_drop||(n.removeClass("droppable_item"),t.$apply(r.on_dragleave))}),n[0].addEventListener("dragover",function(t){t.preventDefault()}),n[0].addEventListener("drop",function(e){if(e.stopPropagation(),e.preventDefault(),n.removeClass("droppable_item"),!r.cant_drop){var i=JSON.parse(e.dataTransfer.getData("text"));return t.$apply(function(){return r.on_drop({data:i})}),!1}}))}}}])},function(t,e){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.el=t,this.dragleave=e(this.dragleave,this),this.dragenter=e(this.dragenter,this),this.supportsEventConstructors()&&(this.first=!1,this.second=!1,this.el.addEventListener("dragenter",this.dragenter,!1),this.el.addEventListener("dragleave",this.dragleave,!1))}return t.prototype.dragenter=function(t){return this.first?this.second=!0:(this.first=!0,this.el.dispatchEvent(new CustomEvent("dragster:enter",{bubbles:!0,cancelable:!0,detail:{dataTransfer:t.dataTransfer}})))},t.prototype.dragleave=function(t){if(this.second?this.second=!1:this.first&&(this.first=!1),!this.first&&!this.second)return this.el.dispatchEvent(new CustomEvent("dragster:leave",{bubbles:!0,cancelable:!0,detail:{dataTransfer:t.dataTransfer}}))},t.prototype.removeListeners=function(){return this.el.removeEventListener("dragenter",this.dragenter,!1),this.el.removeEventListener("dragleave",this.dragleave,!1)},t.prototype.supportsEventConstructors=function(){try{new CustomEvent("z")}catch(t){return!1}return!0},t.prototype.reset=function(){return this.first=!1,this.second=!1},t}(),window.Dragster=t}).call(this)},function(t,e){angular.module("genius").directive("editableMarkdown",["$immediate","Filepicker","Autosize",function(t,e,n){return{restrict:"E",replace:!0,templateUrl:"editable_markdown.html",scope:{html:"=",markdown:"=",is_required:"<?isRequired",placeholder:"@"},controller:function(){var t=new e;this.pick_image=function(){t.pick_and_store().then(function(t){this.insert_at_markdown_cursor({before:t})}.bind(this))}},controllerAs:"ctrl",link:function(e,i){e.editable=e,e.resize_textarea=function(){e.$evalAsync(function(){var e=i.find("textarea");n(e),t(e.focus.bind(e),!1)})}}}}])},function(t,e,n){"use strict";n.r(e);n(522),n(523),n(524);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}angular.module("genius").directive("embedly",["getScript","querystring","$compile",function(t,e,n){var r=new RegExp("^https?://","i"),o=function(t){return t.find("a").filter(function(){return r.test($.trim($(this).text()))})},a=_.template('\n    <blockquote class="twitter-tweet">\n      <a href="<%- tweet_url %>"></a>\n    </blockquote>\n  '),s=_.template('\n    <blockquote\n      class="rg_standalone_container"\n      data-src="//'.concat(CANONICAL_DOMAIN,'/annotations/<%- annotation_id %>/standalone_embed"\n    ></blockquote>\n  ')),c=_.template('\n    <embedly-embed\n      embed=":: <%- JSON.stringify(embed) %>"\n    ></embedly-embed>\n  '),l=_.template('\n    <embedly-youtube\n      video-id="<%- video_id %>"\n      start="<%- start %>"\n    ></embedly-youtube>\n  '),u=/^https?:\/\/tidal\.com\/(track|album|video)\/(\d+)$/,d=_.template('\n    <div class="tidal-embed" data-type="<%- type %>" data-id="<%- id %>"></div>\n  '),p=function(t,e){var i=$(t||".embedly_pro:visible");o(i).each(function(){if(app.embedlyURLre.test(this.href))return!0;var t=$(this);t.embedly({secure:!0,query:{secure:"true"},display:function(i){i.description&&_.trim(t.parent().text())===_.trim(t.text())?("Wikipedia"===i.provider_name&&(i.html=null),t.replaceWith(n(c({embed:i}))(e))):t.text(i.title)}}),t.text("Loading embed...")})};return{restrict:"A",link:function(r,f,h){r.$watch(h.embedly||h.ngBindHtml,function(h){h&&function(r,f){var h=$(r||".embedly:visible");o(h).each(function(){var r=$(this);if(app.youtubeURLre.test(this.href)){var o=new URL(this.href),p=e.parse(o.search.slice(1)),h=e.parse(o.hash.slice(1)),m=p.t||h.t||0;/\d+m|\d+s|\d+m\d+s/.test(m)&&(m=_(m.match(/^(\d+m)?(\d+s)?$/)).slice(1,3).values().map(function(t){return t?parseInt(t):0}).thru(function(t){return 60*t[0]+t[1]}).value());var g=p.v||o.pathname.slice(1);r.replaceWith(n(l({video_id:g,start:m}))(f))}else if(app.twitterURLre.test(this.href))r.replaceWith(a({tweet_url:this.href})),t("//platform.twitter.com/widgets.js",{cache:!0});else if(app.rgURLre.test(this.href)&&this.href===r.text()&&!r.closest(".cont-annotations.act-standalone_embed").length){var v=app.rgURLre.exec(this.href).pop();r.replaceWith(s({annotation_id:v})),t("//".concat(CANONICAL_DOMAIN,"/annotations/load_standalone_embeds.js"),{cache:!0})}else if(this.href.match(/https?:\/\/embed\.vidyard\.com\/(landingpage|share)\/(.*)/i))r.embedly({addImageStyles:!1,className:"embedly_preview",secure:!0,query:{secure:"true"}});else if(u.test(this.href)){var b=i(this.href.match(u).slice(1),2),y=b[0],w=b[1];r.replaceWith(d({type:y[0],id:w})),t("//embed.tidal.com/tidal-embed.js",{cache:!0})}else{if(!app.embedlyURLre.test(this.href))return;var x={addImageStyles:!1,className:"embedly_preview",secure:!0,query:{luxe:!MOBILE_DEVICE,secure:"true"},display:function(t){var e=t.html;/soundcloud\.com/.test(e)?(t.html=e.replace("visual%3Dtrue","visual%3Dfalse").replace(/height="\d+"/,'height="'.concat(165,'"')),t.height=165):("video"===t.type||"photo"!==t.type&&"rich"!==t.type)&&r.replaceWith(n(c({embed:t}))(f)),t.display()}};r.embedly(x)}r.text("Loading embed...")}),p(r,f)}(f,r)})}}}])},function(t,e){
/*! Embedly jQuery - v3.1.1 - 2013-06-05
 * https://github.com/embedly/embedly-jquery
 * Copyright (c) 2013 Sean Creeley
 * Licensed BSD
 */
!function(t){var e={key:null,endpoint:"oembed",secure:null,query:{},method:"replace",addImageStyles:!0,wrapElement:"div",className:"embed",batch:20,urlRe:null},n=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,i=function(t){return null==t},r=function(t,e,n){this.init(t,e,n)};r.prototype={init:function(e){this.urls=e,this.count=0,this.results={},this._deferred=t.Deferred()},notify:function(e){if(this.results[e.original_url]=e,this.count++,this._deferred.notify.apply(this._deferred,[e]),this.count===this.urls.length){var n=this,i=t.map(this.urls,function(t){return n.results[t]});this._deferred.resolve(i)}return this},state:function(){return this._deferred.state.apply(this._deferred,arguments)}},window.Keeper=r;var o=function(){};o.prototype={defaults:{},log:function(t,e){i(window.console)||i(window.console[t])||window.console[t].apply(window.console,[e])},build:function(e,n,r){var o=(r=i(r)?{}:r).secure;i(o)&&(o="https:"===window.location.protocol);var a=(o?"https":"http")+"://api.embed.ly/"+("objectify"===e?"2/":"1/")+e,s=i(r.query)?{}:r.query;return s.key=r.key,a+="?"+t.param(s),a+="&urls="+t.map(n,encodeURIComponent).join(",")},ajax:function(o,a,s){if(s=t.extend({},e,t.embedly.defaults,"object"==typeof s&&s),i(s.key))return this.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),null;var c;a=i(c=a)?[]:t.isArray(c)?c:[c];var l,u=new r(a),d=[],p=[];t.each(a,function(t,e){l=!1,n.test(e)&&(l=!0,null!==s.urlRe&&s.urlRe.test&&!s.urlRe.test(e)&&(l=!1)),!0===l?d.push(e):p.push({url:e,original_url:e,error:!0,invalid:!0,type:"error",error_message:'Invalid URL "'+e+'"'})});var f=function(e,n){var i=[],r=[];return t.each(e,function(t,e){r.push(e),r.length===n&&(i.push(r),r=[])}),0!==r.length&&i.push(r),i}(d,s.batch),_=this;return t.each(f,function(e,n){t.ajax({url:_.build(o,n,s),dataType:"jsonp",success:function(e){var i;t.each((i=[n,e],t.map(i[0],function(e,n){return[t.map(i,function(t){return t[n]})]})),function(t,e){var n=e[1];n.original_url=e[0],n.invalid=!1,u.notify(n)})}})}),p.length&&setTimeout(function(){t.each(p,function(t,e){u.notify(e)})},1),u._deferred},oembed:function(t,e){return this.ajax("oembed",t,e)},preview:function(t,e){return this.ajax("preview",t,e)},objectify:function(t,e){return this.ajax("objectify",t,e)},extract:function(t,e){return this.ajax("extract",t,e)}};var a=function(){};a.prototype={build:function(e,n,r){var o=(r=t.extend({},t.embedly.defaults,"object"==typeof r&&r)).secure;i(o)&&(o="https:"===window.location.protocol);var a=(o?"https":"http")+"://i.embed.ly/"+("display"===e?"1/":"1/display/")+e,s=i(r.query)?{}:r.query;return s.key=r.key,a+="?"+t.param(s),a+="&url="+encodeURIComponent(n)},display:function(t,e){return this.build("display",t,e)},resize:function(t,e){return this.build("resize",t,e)},fill:function(t,e){return this.build("fill",t,e)},crop:function(t,e){return this.build("crop",t,e)}};var s=function(t,e,n){this.init(t,e,n)};s.prototype={init:function(e,n,i){this.elem=e,this.$elem=t(e),this.original_url=n,this.options=i,this.loaded=t.Deferred();var r=this;this.loaded.done(function(){r.$elem.trigger("loaded",[r])}),this.$elem.trigger("initialized",[this])},progress:function(e){t.extend(this,e),this.options.display?this.options.display.apply(this.elem,[this,this.elem]):"oembed"===this.options.endpoint&&this.display(),this.loaded.resolve(this)},imageStyle:function(){var t,e=[];return this.options.addImageStyles&&(this.options.query.maxwidth&&(t=isNaN(parseInt(this.options.query.maxwidth,10))?"":"px",e.push("max-width: "+this.options.query.maxwidth+t)),this.options.query.maxheight&&(t=isNaN(parseInt(this.options.query.maxheight,10))?"":"px",e.push("max-height: "+this.options.query.maxheight+t))),e.join(";")},display:function(){if("error"===this.type)return!1;var t;this.style=this.imageStyle(),"photo"===this.type?(t="<a href='"+this.original_url+"' target='_blank'>",t+="<img style='"+this.style+"' src='"+this.url+"' alt='"+this.title+"' /></a>"):"video"===this.type||"rich"===this.type?t=this.html:(this.title=this.title||this.url,t=this.thumbnail_url?"<img src='"+this.thumbnail_url+"' class='thumb' style='"+this.style+"'/>":"",t+="<a href='"+this.original_url+"'>"+this.title+"</a>",t+=this.provider_name?"<a href='"+this.provider_url+"' class='provider'>"+this.provider_name+"</a>":"",t+=this.description?'<div class="description">'+this.description+"</div>":""),this.options.wrapElement&&(t="<"+this.options.wrapElement+' class="'+this.options.className+'">'+t+"</"+this.options.wrapElement+">"),this.code=t,"replace"===this.options.method?this.$elem.replaceWith(this.code):"after"===this.options.method?this.$elem.after(this.code):"afterParent"===this.options.method?this.$elem.parent().after(this.code):"replaceParent"===this.options.method&&this.$elem.parent().replaceWith(this.code),this.$elem.trigger("displayed",[this])}},t.embedly=new o,t.embedly.display=new a,t.fn.embedly=function(n){if(void 0===n||"object"==typeof n){if(n=t.extend({},e,t.embedly.defaults,"object"==typeof n&&n),i(n.key))return t.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),this.each(t.noop);var r={},o=function(e){if(!t.data(t(e),"embedly")){var i=t(e).attr("href"),o=new s(e,i,n);t.data(e,"embedly",o),r.hasOwnProperty(i)?r[i].push(o):r[i]=[o]}},a=this.each(function(){i(t(this).attr("href"))?t(this).find("a").each(function(){i(t(this).attr("href"))||o(this)}):o(this)}),c=t.embedly.ajax(n.endpoint,t.map(r,function(t,e){return e}),n).progress(function(e){t.each(r[e.original_url],function(t,n){n.progress(e)})});return n.progress&&c.progress(n.progress),n.done&&c.done(n.done),a}},t.expr[":"].embedly=function(e){return!i(t(e).data("embedly"))},t.fn.display=function(n,r){if(i(n)&&(n="display"),void 0===r||"object"==typeof r){if(r=t.extend({},e,t.embedly.defaults,"object"==typeof r&&r),i(r.key))return t.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly/display"),this.each(t.noop);var o=function(e){var i=t(e);if(!i.data("display")){var o=i.data("src")||i.attr("href"),a={original_url:o,url:t.embedly.display.build(n,o,r)};i.data("display",a),i.trigger("initialized",[e]);var s="<img src='"+a.url+"' />";i.is("a")?i.append(s):i.replaceWith(s)}},a=function(e){return!i(t(e).data("src"))||!i(t(e).attr("href"))};return this.each(function(){a(this)?o(this):t(this).find("img,a").each(function(){a(this)&&o(this)})})}},t.expr[":"].display=function(e){return!i(t(e).data("display"))}}(jQuery,window)},function(t,e){window.app=window.app||{},window.app.youtubeURLre=new RegExp("https?://youtube.com/watch|https?://www.youtube.com/watch|https?://youtu.be/"),window.app.twitterURLre=/((http:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo|pic\.twitter\.com\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*))|(https:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo\/.*|www\.twitter\.com\/.*\/status\/.*\/photo\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*)))/i,window.app.rgURLre=new RegExp("^(https?:\\/\\/(.+\\.)?((?:rap)?genius\\.com|"+CANONICAL_DOMAIN.replace(/\.|\-/g,"\\$&")+")\\/(\\d+)(?:\\/|\\?|$))","i"),window.app.embedlyURLre=/((https?:\/\/(.*yfrog\..*\/.*|www\.flickr\.com\/photos\/.*|flic\.kr\/.*|twitpic\.com\/.*|www\.twitpic\.com\/.*|twitpic\.com\/photos\/.*|www\.twitpic\.com\/photos\/.*|.*imgur\.com\/.*|.*\.posterous\.com\/.*|post\.ly\/.*|twitgoo\.com\/.*|i.*\.photobucket\.com\/albums\/.*|s.*\.photobucket\.com\/albums\/.*|phodroid\.com\/.*\/.*\/.*|www\.mobypicture\.com\/user\/.*\/view\/.*|moby\.to\/.*|xkcd\.com\/.*|www\.xkcd\.com\/.*|imgs\.xkcd\.com\/.*|www\.asofterworld\.com\/index\.php\?id=.*|www\.asofterworld\.com\/.*\.jpg|asofterworld\.com\/.*\.jpg|www\.qwantz\.com\/index\.php\?comic=.*|23hq\.com\/.*\/photo\/.*|www\.23hq\.com\/.*\/photo\/.*|.*dribbble\.com\/shots\/.*|drbl\.in\/.*|.*\.smugmug\.com\/.*|.*\.smugmug\.com\/.*#.*|emberapp\.com\/.*\/images\/.*|emberapp\.com\/.*\/images\/.*\/sizes\/.*|emberapp\.com\/.*\/collections\/.*\/.*|emberapp\.com\/.*\/categories\/.*\/.*\/.*|embr\.it\/.*|picasaweb\.google\.com.*\/.*\/.*#.*|picasaweb\.google\.com.*\/lh\/photo\/.*|picasaweb\.google\.com.*\/.*\/.*|dailybooth\.com\/.*\/.*|brizzly\.com\/pic\/.*|pics\.brizzly\.com\/.*\.jpg|img\.ly\/.*|www\.tinypic\.com\/view\.php.*|tinypic\.com\/view\.php.*|www\.tinypic\.com\/player\.php.*|tinypic\.com\/player\.php.*|www\.tinypic\.com\/r\/.*\/.*|tinypic\.com\/r\/.*\/.*|.*\.tinypic\.com\/.*\.jpg|.*\.tinypic\.com\/.*\.png|meadd\.com\/.*\/.*|meadd\.com\/.*|.*\.deviantart\.com\/art\/.*|.*\.deviantart\.com\/gallery\/.*|.*\.deviantart\.com\/#\/.*|fav\.me\/.*|.*\.deviantart\.com|.*\.deviantart\.com\/gallery|.*\.deviantart\.com\/.*\/.*\.jpg|.*\.deviantart\.com\/.*\/.*\.gif|.*\.deviantart\.net\/.*\/.*\.jpg|.*\.deviantart\.net\/.*\/.*\.gif|www\.fotopedia\.com\/.*\/.*|fotopedia\.com\/.*\/.*|photozou\.jp\/photo\/show\/.*\/.*|photozou\.jp\/photo\/photo_only\/.*\/.*|instagr\.am\/p\/.*|instagram\.com\/p\/.*|www\.instagram\.com\/p\/.*|skitch\.com\/.*\/.*\/.*|img\.skitch\.com\/.*|share\.ovi\.com\/media\/.*\/.*|www\.questionablecontent\.net\/|questionablecontent\.net\/|www\.questionablecontent\.net\/view\.php.*|questionablecontent\.net\/view\.php.*|questionablecontent\.net\/comics\/.*\.png|www\.questionablecontent\.net\/comics\/.*\.png|picplz\.com\/user\/.*\/pic\/.*\/|twitrpix\.com\/.*|.*\.twitrpix\.com\/.*|www\.someecards\.com\/.*\/.*|someecards\.com\/.*\/.*|some\.ly\/.*|www\.some\.ly\/.*|pikchur\.com\/.*|achewood\.com\/.*|www\.achewood\.com\/.*|achewood\.com\/index\.php.*|www\.achewood\.com\/index\.php.*|www\.whosay\.com\/content\/.*|www\.whosay\.com\/photos\/.*|www\.whosay\.com\/videos\/.*|say\.ly\/.*|ow\.ly\/i\/.*|color\.com\/s\/.*|bnter\.com\/convo\/.*|mlkshk\.com\/p\/.*|lockerz\.com\/s\/.*|soundcloud\.com\/.*|soundcloud\.com\/.*\/.*|soundcloud\.com\/.*\/sets\/.*|soundcloud\.com\/groups\/.*|snd\.sc\/.*|www\.last\.fm\/music\/.*|www\.last\.fm\/music\/+videos\/.*|www\.last\.fm\/music\/+images\/.*|www\.last\.fm\/music\/.*\/_\/.*|www\.last\.fm\/music\/.*\/.*|www\.mixcloud\.com\/.*\/.*\/|www\.radionomy\.com\/.*\/radio\/.*|radionomy\.com\/.*\/radio\/.*|www\.hark\.com\/clips\/.*|www\.rdio\.com\/#\/artist\/.*\/album\/.*|www\.rdio\.com\/artist\/.*\/album\/.*|www\.zero-inch\.com\/.*|.*\.bandcamp\.com\/|.*\.bandcamp\.com\/track\/.*|.*\.bandcamp\.com\/album\/.*|freemusicarchive\.org\/music\/.*|www\.freemusicarchive\.org\/music\/.*|freemusicarchive\.org\/curator\/.*|www\.freemusicarchive\.org\/curator\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/templates\/story\/story\.php.*|huffduffer\.com\/.*\/.*|www\.audioboo\.fm\/boos\/.*|audioboo\.fm\/boos\/.*|boo\.fm\/b.*|www\.xiami\.com\/song\/.*|xiami\.com\/song\/.*|www\.saynow\.com\/playMsg\.html.*|www\.saynow\.com\/playMsg\.html.*|grooveshark\.com\/s\/.*|listen\.grooveshark\.com\/s\/.*|radioreddit\.com\/songs.*|www\.radioreddit\.com\/songs.*|radioreddit\.com\/\?q=songs.*|www\.radioreddit\.com\/\?q=songs.*|www\.gogoyoko\.com\/song\/.*|.*amazon\..*\/gp\/product\/.*|.*amazon\..*\/.*\/dp\/.*|.*amazon\..*\/dp\/.*|.*amazon\..*\/o\/ASIN\/.*|.*amazon\..*\/gp\/offer-listing\/.*|.*amazon\..*\/.*\/ASIN\/.*|.*amazon\..*\/gp\/product\/images\/.*|.*amazon\..*\/gp\/aw\/d\/.*|www\.amzn\.com\/.*|amzn\.com\/.*|www\.shopstyle\.com\/browse.*|www\.shopstyle\.com\/action\/apiVisitRetailer.*|api\.shopstyle\.com\/action\/apiVisitRetailer.*|www\.shopstyle\.com\/action\/viewLook.*|gist\.github\.com\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*|www\.crunchbase\.com\/.*\/.*|crunchbase\.com\/.*\/.*|www\.slideshare\.net\/.*\/.*|www\.slideshare\.net\/mobile\/.*\/.*|slidesha\.re\/.*|scribd\.com\/doc\/.*|www\.scribd\.com\/doc\/.*|scribd\.com\/mobile\/documents\/.*|www\.scribd\.com\/mobile\/documents\/.*|screenr\.com\/.*|polldaddy\.com\/community\/poll\/.*|polldaddy\.com\/poll\/.*|answers\.polldaddy\.com\/poll\/.*|www\.5min\.com\/Video\/.*|www\.howcast\.com\/videos\/.*|www\.screencast\.com\/.*\/media\/.*|screencast\.com\/.*\/media\/.*|www\.screencast\.com\/t\/.*|screencast\.com\/t\/.*|issuu\.com\/.*\/docs\/.*|www\.kickstarter\.com\/projects\/.*\/.*|www\.scrapblog\.com\/viewer\/viewer\.aspx.*|ping\.fm\/p\/.*|chart\.ly\/symbols\/.*|chart\.ly\/.*|maps\.google\.com\/maps\?.*|maps\.google\.com\/\?.*|maps\.google\.com\/maps\/ms\?.*|.*\.craigslist\.org\/.*\/.*|my\.opera\.com\/.*\/albums\/show\.dml\?id=.*|my\.opera\.com\/.*\/albums\/showpic\.dml\?album=.*&picture=.*|tumblr\.com\/.*|.*\.tumblr\.com\/post\/.*|www\.polleverywhere\.com\/polls\/.*|www\.polleverywhere\.com\/multiple_choice_polls\/.*|www\.polleverywhere\.com\/free_text_polls\/.*|www\.quantcast\.com\/wd:.*|www\.quantcast\.com\/.*|siteanalytics\.compete\.com\/.*|statsheet\.com\/statplot\/charts\/.*\/.*\/.*\/.*|statsheet\.com\/statplot\/charts\/e\/.*|statsheet\.com\/.*\/teams\/.*\/.*|statsheet\.com\/tools\/chartlets\?chart=.*|.*\.status\.net\/notice\/.*|identi\.ca\/notice\/.*|brainbird\.net\/notice\/.*|shitmydadsays\.com\/notice\/.*|www\.studivz\.net\/Profile\/.*|www\.studivz\.net\/l\/.*|www\.studivz\.net\/Groups\/Overview\/.*|www\.studivz\.net\/Gadgets\/Info\/.*|www\.studivz\.net\/Gadgets\/Install\/.*|www\.studivz\.net\/.*|www\.meinvz\.net\/Profile\/.*|www\.meinvz\.net\/l\/.*|www\.meinvz\.net\/Groups\/Overview\/.*|www\.meinvz\.net\/Gadgets\/Info\/.*|www\.meinvz\.net\/Gadgets\/Install\/.*|www\.meinvz\.net\/.*|www\.schuelervz\.net\/Profile\/.*|www\.schuelervz\.net\/l\/.*|www\.schuelervz\.net\/Groups\/Overview\/.*|www\.schuelervz\.net\/Gadgets\/Info\/.*|www\.schuelervz\.net\/Gadgets\/Install\/.*|www\.schuelervz\.net\/.*|myloc\.me\/.*|pastebin\.com\/.*|pastie\.org\/.*|www\.pastie\.org\/.*|redux\.com\/stream\/item\/.*\/.*|redux\.com\/f\/.*\/.*|www\.redux\.com\/stream\/item\/.*\/.*|www\.redux\.com\/f\/.*\/.*|cl\.ly\/.*|cl\.ly\/.*\/content|speakerdeck\.com\/u\/.*\/p\/.*|www\.kiva\.org\/lend\/.*|www\.timetoast\.com\/timelines\/.*|storify\.com\/.*\/.*|.*meetup\.com\/.*|meetu\.ps\/.*|www\.dailymile\.com\/people\/.*\/entries\/.*|.*\.kinomap\.com\/.*|www\.metacdn\.com\/api\/users\/.*\/content\/.*|www\.metacdn\.com\/api\/users\/.*\/media\/.*|prezi\.com\/.*\/.*|.*\.uservoice\.com\/.*\/suggestions\/.*|formspring\.me\/.*|www\.formspring\.me\/.*|formspring\.me\/.*\/q\/.*|www\.formspring\.me\/.*\/q\/.*|twitlonger\.com\/show\/.*|www\.twitlonger\.com\/show\/.*|tl\.gd\/.*|www\.qwiki\.com\/q\/.*|crocodoc\.com\/.*|.*\.crocodoc\.com\/.*|.*youtube\.com\/watch.*|.*\.youtube\.com\/v\/.*|youtu\.be\/.*|.*\.youtube\.com\/user\/.*|.*\.youtube\.com\/.*#.*\/.*|m\.youtube\.com\/watch.*|m\.youtube\.com\/index.*|.*\.youtube\.com\/profile.*|.*\.youtube\.com\/view_play_list.*|.*\.youtube\.com\/playlist.*|www\.vevo\.com\/watch\/.*|www\.vevo\.com\/video\/.*|.*justin\.tv\/.*|.*justin\.tv\/.*\/b\/.*|.*justin\.tv\/.*\/w\/.*|www\.ustream\.tv\/recorded\/.*|www\.ustream\.tv\/channel\/.*|www\.ustream\.tv\/.*|qik\.com\/video\/.*|qik\.com\/.*|qik\.ly\/.*|.*revision3\.com\/.*|.*\.dailymotion\.com\/video\/.*|.*\.dailymotion\.com\/.*\/video\/.*|collegehumor\.com\/video:.*|collegehumor\.com\/video\/.*|www\.collegehumor\.com\/video:.*|www\.collegehumor\.com\/video\/.*|.*twitvid\.com\/.*|www\.break\.com\/.*\/.*|vids\.myspace\.com\/index\.cfm\?fuseaction=vids\.individual&videoid.*|www\.myspace\.com\/index\.cfm\?fuseaction=.*&videoid.*|www\.metacafe\.com\/watch\/.*|www\.metacafe\.com\/w\/.*|blip\.tv\/file\/.*|.*\.blip\.tv\/file\/.*|video\.google\.com\/videoplay\?.*|.*revver\.com\/video\/.*|video\.yahoo\.com\/watch\/.*\/.*|video\.yahoo\.com\/network\/.*|.*viddler\.com\/explore\/.*\/videos\/.*|liveleak\.com\/view\?.*|www\.liveleak\.com\/view\?.*|animoto\.com\/play\/.*|dotsub\.com\/view\/.*|www\.overstream\.net\/view\.php\?oid=.*|www\.livestream\.com\/.*|www\.worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|teachertube\.com\/viewVideo\.php.*|www\.teachertube\.com\/viewVideo\.php.*|www1\.teachertube\.com\/viewVideo\.php.*|www2\.teachertube\.com\/viewVideo\.php.*|bambuser\.com\/v\/.*|bambuser\.com\/channel\/.*|bambuser\.com\/channel\/.*\/broadcast\/.*|www\.schooltube\.com\/video\/.*\/.*|bigthink\.com\/ideas\/.*|bigthink\.com\/series\/.*|sendables\.jibjab\.com\/view\/.*|sendables\.jibjab\.com\/originals\/.*|www\.xtranormal\.com\/watch\/.*|socialcam\.com\/v\/.*|www\.socialcam\.com\/v\/.*|dipdive\.com\/media\/.*|dipdive\.com\/member\/.*\/media\/.*|dipdive\.com\/v\/.*|.*\.dipdive\.com\/media\/.*|.*\.dipdive\.com\/v\/.*|v\.youku\.com\/v_show\/.*\.html|v\.youku\.com\/v_playlist\/.*\.html|www\.snotr\.com\/video\/.*|snotr\.com\/video\/.*|video\.jardenberg\.se\/.*|www\.clipfish\.de\/.*\/.*\/video\/.*|www\.myvideo\.de\/watch\/.*|www\.whitehouse\.gov\/photos-and-video\/video\/.*|www\.whitehouse\.gov\/video\/.*|wh\.gov\/photos-and-video\/video\/.*|wh\.gov\/video\/.*|www\.hulu\.com\/watch.*|www\.hulu\.com\/w\/.*|hulu\.com\/watch.*|hulu\.com\/w\/.*|.*crackle\.com\/c\/.*|www\.fancast\.com\/.*\/videos|www\.funnyordie\.com\/videos\/.*|www\.funnyordie\.com\/m\/.*|funnyordie\.com\/videos\/.*|funnyordie\.com\/m\/.*|www\.vimeo\.com\/groups\/.*\/videos\/.*|www\.vimeo\.com\/.*|vimeo\.com\/groups\/.*\/videos\/.*|vimeo\.com\/.*|vimeo\.com\/m\/#\/.*|www\.ted\.com\/talks\/.*\.html.*|www\.ted\.com\/talks\/lang\/.*\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/lang\/.*\/.*\.html.*|.*nfb\.ca\/film\/.*|www\.thedailyshow\.com\/watch\/.*|www\.thedailyshow\.com\/full-episodes\/.*|www\.thedailyshow\.com\/collection\/.*\/.*\/.*|movies\.yahoo\.com\/movie\/.*\/video\/.*|movies\.yahoo\.com\/movie\/.*\/trailer|movies\.yahoo\.com\/movie\/.*\/video|www\.colbertnation\.com\/the-colbert-report-collections\/.*|www\.colbertnation\.com\/full-episodes\/.*|www\.colbertnation\.com\/the-colbert-report-videos\/.*|www\.comedycentral\.com\/videos\/index\.jhtml\?.*|www\.theonion\.com\/video\/.*|theonion\.com\/video\/.*|wordpress\.tv\/.*\/.*\/.*\/.*\/|www\.traileraddict\.com\/trailer\/.*|www\.traileraddict\.com\/clip\/.*|www\.traileraddict\.com\/poster\/.*|www\.escapistmagazine\.com\/videos\/.*|www\.trailerspy\.com\/trailer\/.*\/.*|www\.trailerspy\.com\/trailer\/.*|www\.trailerspy\.com\/view_video\.php.*|www\.atom\.com\/.*\/.*\/|fora\.tv\/.*\/.*\/.*\/.*|www\.spike\.com\/video\/.*|www\.gametrailers\.com\/video\/.*|gametrailers\.com\/video\/.*|www\.koldcast\.tv\/video\/.*|www\.koldcast\.tv\/#video:.*|techcrunch\.tv\/watch.*|techcrunch\.tv\/.*\/watch.*|mixergy\.com\/.*|video\.pbs\.org\/video\/.*|www\.zapiks\.com\/.*|tv\.digg\.com\/diggnation\/.*|tv\.digg\.com\/diggreel\/.*|tv\.digg\.com\/diggdialogg\/.*|www\.trutv\.com\/video\/.*|www\.nzonscreen\.com\/title\/.*|nzonscreen\.com\/title\/.*|app\.wistia\.com\/embed\/medias\/.*|hungrynation\.tv\/.*\/episode\/.*|www\.hungrynation\.tv\/.*\/episode\/.*|hungrynation\.tv\/episode\/.*|www\.hungrynation\.tv\/episode\/.*|indymogul\.com\/.*\/episode\/.*|www\.indymogul\.com\/.*\/episode\/.*|indymogul\.com\/episode\/.*|www\.indymogul\.com\/episode\/.*|channelfrederator\.com\/.*\/episode\/.*|www\.channelfrederator\.com\/.*\/episode\/.*|channelfrederator\.com\/episode\/.*|www\.channelfrederator\.com\/episode\/.*|tmiweekly\.com\/.*\/episode\/.*|www\.tmiweekly\.com\/.*\/episode\/.*|tmiweekly\.com\/episode\/.*|www\.tmiweekly\.com\/episode\/.*|99dollarmusicvideos\.com\/.*\/episode\/.*|www\.99dollarmusicvideos\.com\/.*\/episode\/.*|99dollarmusicvideos\.com\/episode\/.*|www\.99dollarmusicvideos\.com\/episode\/.*|ultrakawaii\.com\/.*\/episode\/.*|www\.ultrakawaii\.com\/.*\/episode\/.*|ultrakawaii\.com\/episode\/.*|www\.ultrakawaii\.com\/episode\/.*|barelypolitical\.com\/.*\/episode\/.*|www\.barelypolitical\.com\/.*\/episode\/.*|barelypolitical\.com\/episode\/.*|www\.barelypolitical\.com\/episode\/.*|barelydigital\.com\/.*\/episode\/.*|www\.barelydigital\.com\/.*\/episode\/.*|barelydigital\.com\/episode\/.*|www\.barelydigital\.com\/episode\/.*|threadbanger\.com\/.*\/episode\/.*|www\.threadbanger\.com\/.*\/episode\/.*|threadbanger\.com\/episode\/.*|www\.threadbanger\.com\/episode\/.*|vodcars\.com\/.*\/episode\/.*|www\.vodcars\.com\/.*\/episode\/.*|vodcars\.com\/episode\/.*|www\.vodcars\.com\/episode\/.*|confreaks\.net\/videos\/.*|www\.confreaks\.net\/videos\/.*|video\.allthingsd\.com\/video\/.*|videos\.nymag\.com\/.*|aniboom\.com\/animation-video\/.*|www\.aniboom\.com\/animation-video\/.*|clipshack\.com\/Clip\.aspx\?.*|www\.clipshack\.com\/Clip\.aspx\?.*|grindtv\.com\/.*\/video\/.*|www\.grindtv\.com\/.*\/video\/.*|ifood\.tv\/recipe\/.*|ifood\.tv\/video\/.*|ifood\.tv\/channel\/user\/.*|www\.ifood\.tv\/recipe\/.*|www\.ifood\.tv\/video\/.*|www\.ifood\.tv\/channel\/user\/.*|logotv\.com\/video\/.*|www\.logotv\.com\/video\/.*|lonelyplanet\.com\/Clip\.aspx\?.*|www\.lonelyplanet\.com\/Clip\.aspx\?.*|streetfire\.net\/video\/.*\.htm.*|www\.streetfire\.net\/video\/.*\.htm.*|trooptube\.tv\/videos\/.*|www\.trooptube\.tv\/videos\/.*|sciencestage\.com\/v\/.*\.html|sciencestage\.com\/a\/.*\.html|www\.sciencestage\.com\/v\/.*\.html|www\.sciencestage\.com\/a\/.*\.html|www\.godtube\.com\/featured\/video\/.*|godtube\.com\/featured\/video\/.*|www\.godtube\.com\/watch\/.*|godtube\.com\/watch\/.*|www\.tangle\.com\/view_video.*|mediamatters\.org\/mmtv\/.*|www\.clikthrough\.com\/theater\/video\/.*|espn\.go\.com\/video\/clip.*|espn\.go\.com\/.*\/story.*|abcnews\.com\/.*\/video\/.*|abcnews\.com\/video\/playerIndex.*|abcnews\.go\.com\/.*\/video\/.*|abcnews\.go\.com\/video\/playerIndex.*|washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.boston\.com\/video.*|boston\.com\/video.*|www\.facebook\.com\/photo\.php.*|www\.facebook\.com\/video\/video\.php.*|www\.facebook\.com\/v\/.*|www\.facebook\.com\/.*\/videos\/.*|cnbc\.com\/id\/.*\?.*video.*|www\.cnbc\.com\/id\/.*\?.*video.*|cnbc\.com\/id\/.*\/play\/1\/video\/.*|www\.cnbc\.com\/id\/.*\/play\/1\/video\/.*|cbsnews\.com\/video\/watch\/.*|www\.google\.com\/buzz\/.*\/.*\/.*|www\.google\.com\/buzz\/.*|www\.google\.com\/profiles\/.*|google\.com\/buzz\/.*\/.*\/.*|google\.com\/buzz\/.*|google\.com\/profiles\/.*|www\.cnn\.com\/video\/.*|edition\.cnn\.com\/video\/.*|money\.cnn\.com\/video\/.*|today\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/ns\/.*|today\.msnbc\.msn\.com\/id\/.*\/ns\/.*|multimedia\.foxsports\.com\/m\/video\/.*\/.*|msn\.foxsports\.com\/video.*|www\.globalpost\.com\/video\/.*|www\.globalpost\.com\/dispatch\/.*|guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|www\.guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|bravotv\.com\/.*\/.*\/videos\/.*|www\.bravotv\.com\/.*\/.*\/videos\/.*|video\.nationalgeographic\.com\/.*\/.*\/.*\.html|dsc\.discovery\.com\/videos\/.*|animal\.discovery\.com\/videos\/.*|health\.discovery\.com\/videos\/.*|investigation\.discovery\.com\/videos\/.*|military\.discovery\.com\/videos\/.*|planetgreen\.discovery\.com\/videos\/.*|science\.discovery\.com\/videos\/.*|tlc\.discovery\.com\/videos\/.*|video\.forbes\.com\/fvn\/.*|vine\.co\/v\/.*|www\.vine\.co\/v\/.*|video\.foxnews\.com\/v\/.*|thinglink\.com\/.*|www\.thinglink\.com\/.*|nbcnews\.com\/.*|www\.nbcnews\.com\/.*|itunes\.apple\.com\/.*)))|((http:\/\/(link\.brightcove\.com\/services\/player\/bcpid.*|bcove\.me\/.*|players\.brightcove\.net\/.*))|(https:\/\/(players\.brightcove\.net\/.*)))/i},function(t,e){window.app=window.app||{},$.extend(window.app,{load_vidyard_players:function(t,e,n){var i,r;"function"==typeof t?(r=t,i=$("body")):(i=$(t||"body"),r=n||$.noop);var o=i.find(".vidyard_container[data-vidyard-id]");e||(o=o.filter(":visible")),o.each(function(){var t=$(this),e=t.attr("data-vidyard-id"),n=$("#vidyard_"+e+":first");if(n.length)t.replaceWith(n.remove()),r();else{t.attr("id","vidyard_"+e).removeAttr("data-vidyard-id");var i=MOBILE_DEVICE||window.RG_EMBEDDED_PAGE?"?width="+t.parent().width():"";$.getScript("//embed.vidyard.com/embed/"+e+"/iframe/"+i,function(){t.removeClass("loading_with_indicator"),r()})}})}})},function(t,e,n){"use strict";n.r(e);n(526);angular.module("genius").directive("embedlyPlayer",["$sce","$immediate","$q","Tracking","PlayerJS",function(t,e,n,i,r){return{restrict:"E",templateUrl:"embedly_player.html",transclude:!0,scope:{yieldsApi:"&",yieldsState:"&",media:"<",controls:"<?",playerClass:"@",preload:"<",allowFullScreen:"<?"},link:function(o,a){var s,c,l,u=function(){l.has_errored=!0},d=function(){var t=r.Player(a.find("iframe")[0]);t.on("ready",function(){t.setVolume(100),s.resolve(t),o.$apply(function(){l.is_loaded=!0,l.is_loading=!1})}),t.on("play",function(){i.track("play_song_media",{playing:!0,first_interaction:!1}),o.$apply(function(){l.is_playing=!0})}),t.on("pause",function(){o.$apply(function(){l.is_playing=!1})}),t.on("ended",function(){o.$apply(function(){l.is_playing=!1})}),t.on("timeupdate",_.throttle(function(t){o.$apply(function(){l.percentage=t.seconds/t.duration,l.time_remaining=1e3*(t.duration-t.seconds)})},1e3)),t.on("error",function(){o.$apply(u)})};o.load_media=function(){l.is_loading||l.is_loaded||(i.track("play_song_media",{playing:!1,first_interaction:!0}),l.is_loading=!0,o.is_initialized=!0,e(d,!1))};var p={load_media:o.load_media,playpause:function(){l.is_playing?this.pause():this.play()},play:function(){c.then(function(t){t.play()})},pause:function(){c.then(function(t){t.pause()})},seek_to:function(t){c.then(function(e){e.getDuration(function(n){e.setCurrentTime(n*t)})})}};o.yieldsApi({api:p});var f={youtube:{youtube_controls:o.controls?2:0,youtube_modestbranding:1,youtube_showinfo:0,youtube_rel:0,youtube_iv_load_policy:3,youtube_start:o.media?o.media.start:void 0,youtube_fs:o.allowFullScreen?1:0}}[o.media?o.media.provider:void 0],h=function t(e){var i=_.assign({},f,e);return n.resolve($.embedly.oembed(o.media.url,{query:i})).then(function(e){var r=e[0];return function(t){return"youtube"===o.media.provider&&!t.author_name}(r)||function(t){return t.invalid||"error"===t.type||"link"===t.type}(r)?i.force?n.reject(Error("No embed found")):t({force:!0}):r})};o.$watch("state.is_playing",function(t){t&&(o.state.has_played=!0)}),o.$watch("media.url",function(e){o.is_initialized=!1,s=n.defer(),c=s.promise,l=o.state={},o.yieldsState({state:l}),e?(o.media_html=null,h().then(function(e){l.placeholder=e.thumbnail_url,l.is_ready=!0,o.media_html=t.trustAsHtml(e.html),o.preload&&o.load_media()}).catch(u)):l.is_ready=!0}),o.$on("$destroy",function(){o.yieldsState({state:void 0})})}}}])},function(t,e){!function(t,e){function n(t){return function(){var e={method:t},n=Array.prototype.slice.call(arguments);/^get/.test(t)?(i.assert(n.length>0,"Get methods require a callback."),n.unshift(e)):(/^set/.test(t)&&(i.assert(0!==n.length,"Set methods require a value."),e.value=n[0]),n=[e]),this.send.apply(this,n)}}var i={DEBUG:!1,VERSION:"0.0.10",CONTEXT:"player.js"};i.POST_MESSAGE=!!t.postMessage,i.ENABLE_CONTEXT=!1,i.origin=function(e){return"//"===e.substr(0,2)&&(e=t.location.protocol+e),e.split("/").slice(0,3).join("/")},i.addEvent=function(t,e,n){t&&(t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n)},i.log=function(){i.log.history=i.log.history||[],i.log.history.push(arguments),t.console&&i.DEBUG&&t.console.log(Array.prototype.slice.call(arguments))},i.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},i.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},i.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isNone=function(t){return null==t},i.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.indexOf=function(t,e){if(null==t)return-1;var n=0,i=t.length;if(Array.prototype.IndexOf&&t.indexOf===Array.prototype.IndexOf)return t.indexOf(e);for(;i>n;n++)if(t[n]===e)return n;return-1},i.assert=function(t,e){if(!t)throw e||"Player.js Assert Failed"},i.Keeper=function(){this.init()},i.Keeper.prototype.init=function(){this.data={}},i.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},i.Keeper.prototype.has=function(t,e){if(!this.data.hasOwnProperty(t))return!1;if(i.isNone(e))return!0;for(var n=this.data[t],r=0;r<n.length;r++)if(n[r].id===e)return!0;return!1},i.Keeper.prototype.add=function(t,e,n,i,r){var o={id:t,event:e,cb:n,ctx:i,one:r};this.has(e)?this.data[e].push(o):this.data[e]=[o]},i.Keeper.prototype.execute=function(t,e,n,r){if(!this.has(t,e))return!1;for(var o=[],a=[],s=0;s<this.data[t].length;s++){var c=this.data[t][s];i.isNone(e)||!i.isNone(e)&&c.id===e?(a.push({cb:c.cb,ctx:c.ctx?c.ctx:r,data:n}),!1===c.one&&o.push(c)):o.push(c)}0===o.length?delete this.data[t]:this.data[t]=o;for(var l=0;l<a.length;l++){var u=a[l];u.cb.call(u.ctx,u.data)}},i.Keeper.prototype.on=function(t,e,n,i){this.add(t,e,n,i,!1)},i.Keeper.prototype.one=function(t,e,n,i){this.add(t,e,n,i,!0)},i.Keeper.prototype.off=function(t,e){var n=[];if(!this.data.hasOwnProperty(t))return n;for(var r=[],o=0;o<this.data[t].length;o++){var a=this.data[t][o];i.isNone(e)||a.cb===e?i.isNone(a.id)||n.push(a.id):r.push(a)}return 0===r.length?delete this.data[t]:this.data[t]=r,n},i.Player=function(t,e){return this instanceof i.Player?void this.init(t,e):new i.Player(t,e)},i.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},i.EVENTS.all=function(){var t=[];for(var e in i.EVENTS)i.has(i.EVENTS,e)&&i.isString(i.EVENTS[e])&&t.push(i.EVENTS[e]);return t},i.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},i.METHODS.all=function(){var t=[];for(var e in i.METHODS)i.has(i.METHODS,e)&&i.isString(i.METHODS[e])&&t.push(i.METHODS[e]);return t},i.READIED=[],i.Player.prototype.init=function(n){var r=this;i.isString(n)&&(n=e.getElementById(n)),this.elem=n,this.origin=i.origin(n.src),this.keeper=new i.Keeper,this.isReady=!1,this.queue=[],this.events=i.EVENTS.all(),this.methods=i.METHODS.all(),i.POST_MESSAGE?i.addEvent(t,"message",function(t){r.receive(t)}):i.log("Post Message is not Available."),i.indexOf(i.READIED,n.src)>-1?r.loaded=!0:this.elem.onload=function(){r.loaded=!0}},i.Player.prototype.send=function(t,e,n){if(t.context=i.CONTEXT,t.version=i.VERSION,e){var r=this.keeper.getUUID();t.listener=r,this.keeper.one(r,t.method,e,n)}return this.isReady||"ready"===t.value?(i.log("Player.send",t,this.origin),!0===this.loaded&&this.elem.contentWindow.postMessage(JSON.stringify(t),this.origin),!0):(i.log("Player.queue",t),this.queue.push(t),!1)},i.Player.prototype.receive=function(t){if(i.log("Player.receive",t),t.origin!==this.origin)return!1;var e;try{e=JSON.parse(t.data)}catch(t){return!1}return(!i.ENABLE_CONTEXT||e.context===i.CONTEXT)&&("ready"===e.event&&e.value&&e.value.src===this.elem.src&&this.ready(e),void(this.keeper.has(e.event,e.listener)&&this.keeper.execute(e.event,e.listener,e.value,this)))},i.Player.prototype.ready=function(t){if(!0===this.isReady)return!1;t.value.events&&(this.events=t.value.events),t.value.methods&&(this.methods=t.value.methods),this.isReady=!0,this.loaded=!0;for(var e=0;e<this.queue.length;e++){var n=this.queue[e];i.log("Player.dequeue",n),"ready"===t.event&&this.keeper.execute(n.event,n.listener,!0,this),this.send(n)}this.queue=[]},i.Player.prototype.on=function(t,e,n){var i=this.keeper.getUUID();return"ready"===t?this.keeper.one(i,t,e,n):this.keeper.on(i,t,e,n),this.send({method:"addEventListener",value:t,listener:i}),!0},i.Player.prototype.off=function(t,e){var n=this.keeper.off(t,e);if(i.log("Player.off",n),n.length>0)for(var r in n)return this.send({method:"removeEventListener",value:t,listener:n[r]}),!0;return!1},i.Player.prototype.supports=function(t,e){i.assert(i.indexOf(["method","event"],t)>-1,'evtOrMethod needs to be either "event" or "method" got '+t),e=i.isArray(e)?e:[e];for(var n="event"===t?this.events:this.methods,r=0;r<e.length;r++)if(-1===i.indexOf(n,e[r]))return!1;return!0};for(var r=0,o=i.METHODS.all().length;o>r;r++){var a=i.METHODS.all()[r];i.Player.prototype.hasOwnProperty(a)||(i.Player.prototype[a]=n(a))}t.playerjs=i,i.addEvent(t,"message",function(t){var e;try{e=JSON.parse(t.data)}catch(t){return!1}return(!i.ENABLE_CONTEXT||e.context===i.CONTEXT)&&void("ready"===e.event&&e.value&&e.value.src&&i.READIED.push(e.value.src))}),i.Receiver=function(t,e){this.init(t,e)},i.Receiver.prototype.init=function(n,r){var o=this;this.isReady=!1,this.origin=i.origin(e.referrer),this.methods={},this.supported={events:n||i.EVENTS.all(),methods:r||i.METHODS.all()},this.eventListeners={},this.reject=!(t.self!==t.top&&i.POST_MESSAGE),this.reject||i.addEvent(t,"message",function(t){o.receive(t)})},i.Receiver.prototype.receive=function(e){if(e.origin!==this.origin)return!1;var n={};if(i.isObject(e.data))n=e.data;else try{n=t.JSON.parse(e.data)}catch(t){i.log("JSON Parse Error",t)}if(i.log("Receiver.receive",e,n),!n.method)return!1;if(i.ENABLE_CONTEXT&&n.context!==i.CONTEXT)return!1;if(-1===i.indexOf(i.METHODS.all(),n.method))return this.emit("error",{code:2,msg:'Invalid Method "'+n.method+'"'}),!1;var r=i.isNone(n.listener)?null:n.listener;if("addEventListener"===n.method)this.eventListeners.hasOwnProperty(n.value)?-1===i.indexOf(this.eventListeners[n.value],r)&&this.eventListeners[n.value].push(r):this.eventListeners[n.value]=[r],"ready"===n.value&&this.isReady&&this.ready();else if("removeEventListener"===n.method){if(this.eventListeners.hasOwnProperty(n.value)){var o=i.indexOf(this.eventListeners[n.value],r);o>-1&&this.eventListeners[n.value].splice(o,1),0===this.eventListeners[n.value].length&&delete this.eventListeners[n.value]}}else this.get(n.method,n.value,r)},i.Receiver.prototype.get=function(t,e,n){var i=this;if(!this.methods.hasOwnProperty(t))return this.emit("error",{code:3,msg:'Method Not Supported"'+t+'"'}),!1;var r=this.methods[t];if("get"===t.substr(0,3)){r.call(this,function(e){i.send(t,e,n)})}else r.call(this,e)},i.Receiver.prototype.on=function(t,e){this.methods[t]=e},i.Receiver.prototype.send=function(e,n,r){if(i.log("Receiver.send",e,n,r),this.reject)return i.log("Receiver.send.reject",e,n,r),!1;var o={context:i.CONTEXT,version:i.VERSION,event:e};i.isNone(n)||(o.value=n),i.isNone(r)||(o.listener=r);var a=JSON.stringify(o);t.parent.postMessage(a,""===this.origin?"*":this.origin)},i.Receiver.prototype.emit=function(t,e){if(!this.eventListeners.hasOwnProperty(t))return!1;i.log("Instance.emit",t,e,this.eventListeners[t]);for(var n=0;n<this.eventListeners[t].length;n++){var r=this.eventListeners[t][n];this.send(t,e,r)}return!0},i.Receiver.prototype.ready=function(){i.log("Receiver.ready"),this.isReady=!0;var e={src:t.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",e)||this.send("ready",e)},i.HTML5Adapter=function(t){return this instanceof i.HTML5Adapter?void this.init(t):new i.HTML5Adapter(t)},i.HTML5Adapter.prototype.init=function(t){i.assert(t,"playerjs.VideoJSReceiver requires a video element");var e=this.receiver=new i.Receiver;t.addEventListener("playing",function(){e.emit("play")}),t.addEventListener("pause",function(){e.emit("pause")}),t.addEventListener("ended",function(){e.emit("ended")}),t.addEventListener("timeupdate",function(){e.emit("timeupdate",{seconds:t.currentTime,duration:t.duration})}),t.addEventListener("progress",function(){e.emit("buffered",{percent:t.buffered.length})}),e.on("play",function(){t.play()}),e.on("pause",function(){t.pause()}),e.on("getPaused",function(e){e(t.paused)}),e.on("getCurrentTime",function(e){e(t.currentTime)}),e.on("setCurrentTime",function(e){t.currentTime=e}),e.on("getDuration",function(e){e(t.duration)}),e.on("getVolume",function(e){e(100*t.volume)}),e.on("setVolume",function(e){t.volume=e/100}),e.on("mute",function(){t.muted=!0}),e.on("unmute",function(){t.muted=!1}),e.on("getMuted",function(e){e(t.muted)}),e.on("getLoop",function(e){e(t.loop)}),e.on("setLoop",function(e){t.loop=e})},i.HTML5Adapter.prototype.ready=function(){this.receiver.ready()},i.JWPlayerAdapter=function(t){return this instanceof i.JWPlayerAdapter?void this.init(t):new i.JWPlayerAdapter(t)},i.JWPlayerAdapter.prototype.init=function(t){i.assert(t,"playerjs.JWPlayerAdapter requires a player object");var e=this.receiver=new i.Receiver;this.looped=!1,t.onPause(function(){e.emit("pause")}),t.onPlay(function(){e.emit("play")}),t.onTime(function(t){var n=t.position,i=t.duration;if(!n||!i)return!1;var r={seconds:n,duration:i};e.emit("timeupdate",r)});var n=this;t.onComplete(function(){!0===n.looped?t.seek(0):e.emit("ended")}),t.onError(function(){e.emit("error")}),e.on("play",function(){t.play(!0)}),e.on("pause",function(){t.pause(!0)}),e.on("getPaused",function(e){e("PLAYING"!==t.getState())}),e.on("getCurrentTime",function(e){e(t.getPosition())}),e.on("setCurrentTime",function(e){t.seek(e)}),e.on("getDuration",function(e){e(t.getDuration())}),e.on("getVolume",function(e){e(t.getVolume())}),e.on("setVolume",function(e){t.setVolume(e)}),e.on("mute",function(){t.setMute(!0)}),e.on("unmute",function(){t.setMute(!1)}),e.on("getMuted",function(e){e(!0===t.getMute())}),e.on("getLoop",function(t){t(this.looped)},this),e.on("setLoop",function(t){this.looped=t},this)},i.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()},i.MockAdapter=function(){return this instanceof i.MockAdapter?void this.init():new i.MockAdapter},i.MockAdapter.prototype.init=function(){var t={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){t.interval=setInterval(function(){t.currentTime+=.25,t.timeupdate({seconds:t.currentTime,duration:t.duration})},250),t.playing=!0},pause:function(){clearInterval(t.interval),t.playing=!1}},e=this.receiver=new i.Receiver;e.on("play",function(){var e=this;t.play(),this.emit("play"),t.timeupdate=function(t){e.emit("timeupdate",t)}}),e.on("pause",function(){t.pause(),this.emit("pause")}),e.on("getPaused",function(e){e(!t.playing)}),e.on("getCurrentTime",function(e){e(t.currentTime)}),e.on("setCurrentTime",function(e){t.currentTime=e}),e.on("getDuration",function(e){e(t.duration)}),e.on("getVolume",function(e){e(t.volume)}),e.on("setVolume",function(e){t.volume=e}),e.on("mute",function(){t.mute=!0}),e.on("unmute",function(){t.mute=!1}),e.on("getMuted",function(e){e(t.mute)}),e.on("getLoop",function(e){e(t.loop)}),e.on("setLoop",function(e){t.loop=e})},i.MockAdapter.prototype.ready=function(){this.receiver.ready()},i.SublimeAdapter=function(t){return this instanceof i.SublimeAdapter?void this.init(t):new i.SublimeAdapter(t)},i.SublimeAdapter.prototype.events=[i.EVENTS.READY,i.EVENTS.PLAY,i.EVENTS.PAUSE,i.EVENTS.ENDED,i.EVENTS.TIMEUPDATE,i.EVENTS.ERROR],i.SublimeAdapter.prototype.methods=[i.METHODS.PLAY,i.METHODS.PAUSE,i.METHODS.GETDURATION,i.METHODS.SETCURRENTTIME,i.METHODS.GETCURRENTTIME,i.METHODS.REMOVEEVENTLISTENER,i.METHODS.ADDEVENTLISTENER],i.SublimeAdapter.prototype.init=function(t){i.assert(t,"playerjs.SublimeAdapter requires a player object");var e=this.receiver=new i.Receiver(this.events,this.methods);t.on("pause",function(){e.emit("pause")}),t.on("play",function(){e.emit("play")}),t.on("timeUpdate",function(t,n){var i=t.duration();if(!n||!i)return!1;var r={seconds:n,duration:i};e.emit("timeupdate",r)}),t.on("end",function(){e.emit("ended")}),e.on("play",function(){t.play()}),e.on("pause",function(){t.pause()}),e.on("getCurrentTime",function(e){e(t.playbackTime())}),e.on("setCurrentTime",function(e){t.seekTo(e)}),e.on("getDuration",function(e){e(t.duration())})},i.SublimeAdapter.prototype.ready=function(){this.receiver.ready()},i.VideoJSAdapter=function(t){return this instanceof i.VideoJSAdapter?void this.init(t):new i.VideoJSAdapter(t)},i.VideoJSAdapter.prototype.init=function(t){i.assert(t,"playerjs.VideoJSReceiver requires a player object");var e=this.receiver=new i.Receiver;t.on("pause",function(){e.emit("pause")}),t.on("play",function(){e.emit("play")}),t.on("timeupdate",function(){var n=t.currentTime(),i=t.duration();if(!n||!i)return!1;var r={seconds:n,duration:i};e.emit("timeupdate",r)}),t.on("ended",function(){e.emit("ended")}),t.on("error",function(){e.emit("error")}),e.on("play",function(){t.play()}),e.on("pause",function(){t.pause()}),e.on("getPaused",function(e){e(t.paused())}),e.on("getCurrentTime",function(e){e(t.currentTime())}),e.on("setCurrentTime",function(e){t.currentTime(e)}),e.on("getDuration",function(e){e(t.duration())}),e.on("getVolume",function(e){e(100*t.volume())}),e.on("setVolume",function(e){t.volume(e/100)}),e.on("mute",function(){t.volume(0)}),e.on("unmute",function(){t.volume(1)}),e.on("getMuted",function(e){e(0===t.volume())}),e.on("getLoop",function(e){e(t.loop())}),e.on("setLoop",function(e){t.loop(e)})},i.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()}}(window,document)},function(t,e){angular.module("genius").directive("emptyCopyContent",["$immediate","$window","$document",function(t,e,n){return{link:function(i,r,o){r.on("copy",function(){var r=i.$eval(o.emptyCopyContent),a=e.getSelection();if(!a.toString()){var s=$("<div>").html(r).css({position:"absolute",height:0,width:0}).appendTo(n.prop("body"));a.removeAllRanges();var c=n[0].createRange();c.selectNodeContents(s[0]),a.addRange(c),t(function(){s.remove()},!1)}})}}}])},function(t,e){angular.module("genius").directive("expandableAccordionSection",[function(){return{restrict:"E",scope:{label:"@",expanded:"=",shortcut:"@"},templateUrl:"expandable_accordion_section.html",replace:!0,transclude:!0,link:function(t){t.expand_content=function(){t.expanded=!t.expanded}}}}])},function(t,e){angular.module("genius").directive("expandableList",[function(){return{restrict:"E",scope:{collection:"<",template:"<",limit:"<",label:"@",variants:"<"},templateUrl:function(t,e){return"".concat(e.template,".html")},controllerAs:"ctrl",controller:["$scope",function(t){this.more_to_show=function(){return t.collection.length>t.limit},this.show_more=function(){Reflect.deleteProperty(t,"limit")}}]}}])},function(t,e){angular.module("genius").directive("exportsFormApi",["$immediate",function(t){return{restrct:"A",require:"form",link:function(e,n,i,r){e.$eval(i.exportsFormApi,{api:_.assign(r,{submit:function(){t(function(){r.$commitViewValue(),n.triggerHandler("submit")},!1)}})})}}}])},function(t,e){angular.module("genius").directive("factTrackSimulator",[function(){return{restrict:"E",templateUrl:"fact_track_simulator.html",scope:{annotations:"<",track_uuid:"<trackUuid",time:"=?",spotify_song:"<song",yields_api:"&yieldsApi",variants:"<",current_annotation_index:"=?currentAnnotationIndex",annotation_clicked:"&annotationClicked",autoplay:"<"},controllerAs:"ctrl",controller:["$scope","SpotifyPlayer","WebAudioPlayer",function(t,e,n){var i=t.spotify_song.track_url?"web_audio":"spotify",r="spotify:track:".concat(t.track_uuid),o={},a=function(){return o[i]};o.spotify=new e(function(e){"spotify"===i&&(t.time=e.position,t.playing=e.is_playing,t.track_uri=e.track_uri)}),t.spotify_song.track_url&&(o.web_audio=new n(function(e){"web_audio"===i&&(t.time=e.position,t.playing=e.is_playing,t.duration=e.duration)})),this.annotation_percentage=function(){if(!t.current_annotation)return 0;var e=t.current_annotation.timestamp_in_ms,n=t.annotations[t.current_annotation_index+1],i=n?n.timestamp_in_ms:t.duration;return(i-t.time)/(i-e)},this.seek_to=function(t){a().seek(t)},this.seek_to_percentage=function(e){a().seek(Math.round(e*t.duration))},this.toggle_play_pause=function(){t.playing?a().pause():"spotify"===i?o.spotify.play(r):o.web_audio.play(t.spotify_song.track_url)},this.card_clicked=function(){t.annotation_clicked({current_annotation:t.current_annotation})};var s={playback_type:function(){return a().playback_type},playback_label:function(){return a().playback_label},set_playback_options:function(t){var e=t.type;i=e},other_track_playing:function(){},use_current_track:function(){},pause:function(){t.playing&&a().pause()},seek_to:function(t,e){a().seek(t,e)},print_player_log:function(){a().print_log_entries()},download_player_log:function(){a().download_log_entries()}};t.time=0,t.duration=_.get(t.spotify_song,["metadata","duration_ms"],0),t.album=_.get(t.spotify_song,["metadata","album"],{}),t.yields_api({api:s});var c={content_type:"intro",timestamp_in_ms:0};t.$watch("time",function(){var e=t.annotations.filter(function(e){return e.timestamp_in_ms<=t.time});t.current_annotation_index=e.length-1,t.current_annotation=t.annotations[t.current_annotation_index]||c})}]}}])},function(t,e){angular.module("genius").directive("filepickerInput",["Filepicker",function(t){return{link:function(e,n,i){var r=new t({services:"COMPUTER"}),o=e.$eval(i.minWidth);n.on("click",function(){return n.attr("value",""),e.$eval(i.onFilepickerError,{error:null}),e.$eval(i.onFilepickerProgress,{uploading:!0}),r.pick_and_store().then(function(t){if(o){var r=new Image;r.onload=function(){r.width<o?e.$applyAsync(function(){return e.$eval(i.onFilepickerError,{error:"must be wider than ".concat(o,"px")})}):n.attr("value",t)},r.src=t}else n.attr("value",t)}).catch(function(t){101!==t.code&&e.$eval(i.onFilepickerError,{error:t.toString()})}).finally(function(){return e.$eval(i.onFilepickerProgress,{uploading:null})}),!1})}}}])},function(t,e){angular.module("genius").directive("flashMessages",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"flash_messages.html",controllerAs:"ctrl",controller:["$scope","$sce","Cookies","currentFlashMessages",function(t,e,n,i){var r=n.getObject("flash")||{};_.each(r,function(t,n){i.push({message:e.trustAsHtml(t),type:n})}),n.remove("flash",{path:"/"}),t.flash_messages=i,this.close_message=function(e){_.pull(t.flash_messages,e)}}]}})},function(t,e){angular.module("genius").directive("focusOnChange",function(){return{restrict:"A",link:function(t,e,n){var i=!0;t.$watch(n.focusOnChange,function(){i?i=!1:e.focus()})}}})},function(t,e){angular.module("genius").directive("followButton",["FollowClient","Session","Tracking","Reversible",function(t,e,n,i){return{restrict:"E",scope:{onUnauthorized:"&",object:"<",type:"@",variants:"<",disabled:"<"},templateUrl:"follow_button.html",link:function(r){var o;r.user_signed_in=e.user_signed_in,r.$watch("object.current_user_metadata.interactions.following",function(t){r.following=!!t}),r.label=function(){return r.hoverLabel||(r.following?"Following":"Follow")},r.toggle_following=function(){if(!e.user_signed_in)return r.onUnauthorized();if(!o){o=!0;var a={};a["object.current_user_metadata.interactions.following"]=!r.following;var s=i.modify(r,a);n.track(r.following?"Follow Button":"Unfollow Button"),t.set_following(r.type,r.object.id,!r.following).catch(s).finally(function(){r.hoverLabel=null,o=!1})}},r.can_follow=function(){return e.has_permission("follow",r.object)}}}}])},function(t,e){angular.module("genius").directive("globalErrorMessage",[function(){return{scope:{},templateUrl:"global_error_message.html",controllerAs:"ctrl",controller:["GlobalErrorBus","$sce",function(t,e){var n=this;t.$on("global_error",function(t,i){n.message_html=e.trustAsHtml(i)})}]}}])},function(t,e){angular.module("genius").directive("globalMessage",["$compile","$templateCache","GlobalRefs",function(t,e,n){var i=e.get("global_message.html"),r=n.get_element("global_message");return{scope:!0,restrict:"E",transclude:!0,link:function(e,n,o,a,s){var c=t(i);c(e,function(t){r.append(t),e.$on("$destroy",function(){t.remove()})},{parentBoundTranscludeFn:s,futureParentElement:r})}}}])},function(t,e){angular.module("genius").directive("handleIntraPageLinks",["ReferentRegistry","ModelRouter","$location",function(t,e,n){return{restrict:"A",link:function(i,r){r.on("click","a",function(){var r=$(this).attr("data-api_path");if(r){var o=e.lookup(r);if(o&&"referent"===o.type){var a=t.peek(o.id);if(a)return i.$apply(function(){return n.url("/".concat(a.id))}),!1}}})}}}])},function(t,e){angular.module("genius").directive("handleRoutableLinks",["LinkEvents","SmartRouting",function(t,e){return{restrict:"A",link:function(n,i){i.on("click","a",function(n){var i=$(n.target).closest("a"),r=i.attr("href");n.isDefaultPrevented()||t.should_open_in_new_window_or_tab(n,i[0])||r&&"#"!==r&&(n.preventDefault(),e.navigate_to_absolute_url(i[0].href))})}}}])},function(t,e){angular.module("genius").directive("headerMenuItem",[function(){return{restrict:"E",transclude:!0,scope:{name:"@",url:"@"},templateUrl:"header_menu_item.html"}}])},function(t,e){angular.module("genius").directive("hideSongForm",[function(){return{restrict:"E",scope:{song:"<",on_close:"&onClose"},templateUrl:"hide_song_form.html",controllerAs:"ctrl",controller:["$scope","SongClient",function(t,e){this.save=function(n){var i=this;this.saving=!0,e.perform_action(t.song.id,"hide",{viewable_by_roles:n}).then(function(e){_.assign(t.song,e),t.error=null,t.on_close()}).catch(function(e){return t.error=e.message}).finally(function(){return i.saving=!1})}}]}}])},function(t,e){angular.module("genius").directive("httpMethod",function(){return{restrict:"A",link:function(t,e,n){var i=!1,r=n.action||n.href,o=n.httpMethod.toUpperCase();e.click(function(){if(!i)return i=!0,$("<form>",{action:r,method:o}).append($("<input>",{type:"hidden",name:"authenticity_token",value:$.cookie("_csrf_token")})).appendTo($("body")).submit(),!1})}}})},function(t,e){angular.module("genius").directive("inboxLineItem",["Tracking",function(t){for(var e=[{formation:["targets","actors"],strategies:["user_upvoted_annotation","user_downvoted_annotation","user_accepted_annotation","user_created_annotation","user_deleted_annotation","user_pyonged_annotation","user_pyonged_song","user_pyonged_video","user_pyonged_album","user_pyonged_article","user_upvoted_forum_post","user_downvoted_forum_post","user_upvoted_video","user_downvoted_video","user_hit_pageview_threshold_song","user_created_cover_art","user_edited_cover_art","user_deleted_cover_art","user_locked_album","user_unlocked_album","user_recognized_song","user_upvoted_article","user_downvoted_article","user_moved_discussion","user_followed_discussion","user_followed_song","user_followed_artist","user_hid_song","user_unhid_song","user_cosigned_annotation","user_verified_the_lyrics_of_song","user_unverified_the_lyrics_of_song","user_pinned_discussion","user_unpinned_discussion","user_deleted_discussion","user_deleted_song","user_created_song","user_wrote_article","user_locked_song","user_unlocked_song","user_followed_group","user_followed_web_page"]},{formation:["targets","context","actors"],strategies:["user_created_question","user_archived_question","user_edited_question","user_pinned_question","user_unpinned_question","user_created_answer","user_deleted_answer","user_edited_answer","user_upvoted_question","user_downvoted_question","user_upvoted_answer","user_downvoted_answer"]},{formation:["targets","actions"],strategies:["user_edited_annotation","user_proposed_an_edit_to_annotation","user_added_a_suggestion_to_song","user_marked_annotation","user_commented_on_album","user_commented_on_article","user_commented_on_video","user_replied_to_annotation"]},{formation:["context","targets","actors"],strategies:["user_upvoted_comment","user_downvoted_comment","user_merged_annotation_edit","user_rejected_annotation_edit","user_integrated_comment","user_archived_comment","user_accepted_comment","user_rejected_comment"]},{formation:["context","actors"],strategies:["user_invited_user"]},{formation:["user_acted_on_user"],strategies:["user_followed_user","user_de_modded_user","user_marked_as_spam_user","user_made_an_editor_out_of_user","user_made_a_moderator_out_of_user","user_mediatored_user"]},{formation:["context_commentable","context"],strategies:["user_mentioned_user","user_mentioned_group"]},{formation:["actors"],strategies:["user_created_identity","user_added_a_photo_user"]},{formation:["merged_artist","context","actors"],strategies:["user_merged_artist"]},{formation:["metadata_changes","targets","actors"],strategies:["user_edited_the_metadata_of_song","user_edited_the_metadata_of_artist","user_edited_the_metadata_of_album"]},{formation:["lyrics_diffs","targets","actors","lyrics_edit_acceptor"],strategies:["user_edited_the_lyrics_of_song"]},{formation:["lyrics_diffs","context","actors"],strategies:["user_created_lyrics_edit","user_accepted_lyrics_edit","user_rejected_lyrics_edit"]},{formation:["lyrics_edit_archive_info","lyrics_diffs","context","actors"],strategies:["user_archived_lyrics_edit"]},{formation:["annotations_with_comments"],strategies:["user_added_a_suggestion_to_annotation"]},{formation:["annotations_with_rejection_comments"],strategies:["user_rejected_annotation"]},{formation:["targets"],strategies:["user_posted_in_discussion"]}],n={},i=0;i<e.length;i++){var r=e[i],o=!0,a=!1,s=void 0;try{for(var c,l=r.strategies[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;n[u]=r.formation}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}}var d={"user.Pyong.song":"inbox_line_items/pyong.html","user.Pyong.annotation":"inbox_line_items/pyong.html","user.Pyong.video":"inbox_line_items/pyong.html","user.Pyong.album":"inbox_line_items/pyong.html","user.Pyong.article":"inbox_line_items/pyong.html"};return{scope:{inbox_name:"<inboxName",line_item:"<object",eager_load_details:"<eagerLoadDetails",variants:"<"},templateUrl:"inbox_line_item.html",controller:["$scope","querystring","InboxClient","AppConfig",function(e,i,r,o){var a=this;this.state={load_details:!1,show_details:!1},e.details_url="/activity_stream/show_details?".concat(i.stringify({id:e.line_item.event_ids})),this.formation=n[e.line_item.strategy],e.$watch("ctrl.state.load_details",function(t,n){a.formation&&t&&!n&&r.get_line_item(e.inbox_name,e.line_item.event_ids.join(",")).then(function(t){a.line_item_detail=t})}),e.$watch("eager_load_details",function(t){a.state.load_details=!(!a.state.load_details&&!t)}),this.message_components=e.line_item.message_components,this.message_template=d[this.message_components.key]||"inbox_line_items/generic.html";var s=_.once(function(){t.track("Line Item Open",{action_name:e.line_item.action_name,inbox_name:e.inbox_name,strategy_name:e.line_item.strategy,bagon:!0,iframe:!a.formation})});this.toggle_visible=function(){a.state.load_details=!0,a.state.show_details=!a.state.show_details,a.state.show_details&&s(),a.state.show_details&&e.line_item.unread&&(e.line_item.unread=!1,r.mark_read(e.inbox_name,[e.line_item.event_ids]))},this.truncate_line_item_event_count="user_posted_in_discussion"===e.line_item.strategy,this.max_line_item_event_count=o.max_line_item_event_count}],controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("inboxLineItemActionIcon",[function(){return{scope:{action_name:"<actionName"},templateUrl:"inbox_line_item_action_icon.html"}}])},function(t,e){angular.module("genius").directive("inboxLineItemDetail",["Bindings","$compile","$templateCache","LyricsEditProposal",function(t,e,n,i){var r=t.resolver({detail:"<lineItemDetail"}),o=t.resolver({formation:"<"});return{restrict:"E",template:"",link:function(t,i,r){var a=o(t,r).formation,s='\n        <div\n          class="inbox_line_item_detail"\n          ng-class="{\'inbox_line_item_detail--dark_background\': $ctrl.use_dark_background}"\n        >\n      ',c=!0,l=!1,u=void 0;try{for(var d,p=a[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value;s+='<div class="inbox_line_item_detail-section">',s+=n.get("inbox_line_item_detail/".concat(f,".html")),s+="</div>"}}catch(t){l=!0,u=t}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}s+="</div>",i.append(e(s)(t))},controller:["$scope","$attrs","ReferentRegistry",function(t,e,n){var o=this;r(t,e).assign_to(this),t.$watch("$ctrl.detail",function(){o.detail.targets=_.map(o.detail.targets,function(t){return"referent"===t._type?(t.rejection_comments=_.map(t.annotations,"rejection_comment"),n.update_if_present(t)):t}),o.use_dark_background=_.includes(["forum_post","discussion"],_.get(o.detail,"context._type"))||_.includes(["forum_post","discussion"],_.get(o.detail,"target._type")),o.lyrics_diffs=i.lyrics_diffs_for_line_item_detail(o.detail)})}],controllerAs:"$ctrl"}}])},function(t,e,n){"use strict";n.r(e);n(547);angular.module("genius").directive("infiniteScroll",["$window","$document","$immediate",function(t,e,n){return{link:function(i,r,o){var a=!1,s=$(t);"infiniteScrollDisabled"in o&&i.$watch(o.infiniteScrollDisabled,function(t){(a=t)||n(c,!1)});var c=function(t){if(!a){var n=e[0].documentElement.clientHeight;if(t){var s=t.target;s.getBoundingClientRect&&(n=s.getBoundingClientRect().top+s.offsetHeight)}n>=r[0].getBoundingClientRect().top+r[0].offsetHeight&&i.$apply(function(){i.$eval(o.infiniteScroll)})}};s.on("scroll",c),s.on("resize",c),r.parents().on("scroll",c),i.$on("$destroy",function(){return r.parents().off("scroll",c),s.off("scroll",c)}),o.yieldsOnLoadMore&&i.$eval(o.yieldsOnLoadMore,{callback:function(){return n(c,!1)}})}}}])},function(t,e,n){var i,r,o;
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */r=[n(12)],void 0===(o="function"==typeof(i=function(t){var e,n,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(t.event.fixHooks)for(var a=i.length;a;)t.event.fixHooks[i[--a]]=t.event.mouseHooks;var s=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=r.length;e;)this.addEventListener(r[--e],c,!1);else this.onmousewheel=c;t.data(this,"mousewheel-line-height",s.getLineHeight(this)),t.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=r.length;e;)this.removeEventListener(r[--e],c,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function c(i){var r=i||window.event,a=o.call(arguments,1),c=0,d=0,p=0,f=0,_=0,h=0;if((i=t.event.fix(r)).type="mousewheel","detail"in r&&(p=-1*r.detail),"wheelDelta"in r&&(p=r.wheelDelta),"wheelDeltaY"in r&&(p=r.wheelDeltaY),"wheelDeltaX"in r&&(d=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(d=-1*p,p=0),c=0===p?d:p,"deltaY"in r&&(p=-1*r.deltaY,c=p),"deltaX"in r&&(d=r.deltaX,0===p&&(c=-1*d)),0!==p||0!==d){if(1===r.deltaMode){var m=t.data(this,"mousewheel-line-height");c*=m,p*=m,d*=m}else if(2===r.deltaMode){var g=t.data(this,"mousewheel-page-height");c*=g,p*=g,d*=g}if(f=Math.max(Math.abs(p),Math.abs(d)),(!n||f<n)&&(n=f,u(r,f)&&(n/=40)),u(r,f)&&(c/=40,d/=40,p/=40),c=Math[c>=1?"floor":"ceil"](c/n),d=Math[d>=1?"floor":"ceil"](d/n),p=Math[p>=1?"floor":"ceil"](p/n),s.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();_=i.clientX-v.left,h=i.clientY-v.top}return i.deltaX=d,i.deltaY=p,i.deltaFactor=n,i.offsetX=_,i.offsetY=h,i.deltaMode=0,a.unshift(i,c,d,p),e&&clearTimeout(e),e=setTimeout(l,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function l(){n=null}function u(t,e){return s.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})})?i.apply(e,r):i)||(t.exports=o)},function(t,e){angular.module("genius").directive("insertableAtCursor",["$window",function(t){return{restrict:"A",link:function(e,n,i){e.$eval(i.insertableAtCursor,{insertFn:function(e){var i=e.before,r=void 0===i?"":i,o=e.after,a=void 0===o?"":o,s=e.default_body,c=void 0===s?"":s,l=e.each_line,u=void 0!==l&&l;_.toArray(n).forEach(function(e){var n,i=pageYOffset,o=e.selectionStart,s=e.selectionEnd,l=e.scrollTop,d=e.value.substring(o,s);n=d&&u?_.map(d.split("\n"),function(t){return r+t+a}).join("\n"):d?r+d+a:r+c+a,e.value=e.value.substring(0,o)+n+e.value.substring(s,e.value.length),e.focus(),e.selectionStart=o,e.selectionEnd=e.selectionStart+n.length,e.scrollTop=l,t.scrollTo(0,i),$(e).trigger("input")})}})}}}])},function(t,e,n){"use strict";n.r(e);n(550);angular.module("genius").directive("kb",["$window",function(t){return{restrict:"E",link:function(e,n,i){var r=$(t),o=function(t){return e.$apply(function(){return e.$eval(i.action,{$event:t})}),!1};r.bind("keydown",i.shortcut,o),e.$on("$destroy",function(){return r.unbind("keydown",o)})}}}])},function(t,e){(function(){!function(t){function e(e){if("string"==typeof e.data&&(e.data={keys:e.data}),e.data&&e.data.keys&&"string"==typeof e.data.keys){var n=e.handler,i=e.data.keys.toLowerCase().split(" "),r=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];e.handler=function(o){if(e.data.allowInTextInputField||this===o.target||!(/textarea|select/i.test(o.target.nodeName)||t.inArray(o.target.type,r)>-1||t(o.target).prop("isContentEditable"))){var a=t.hotkeys.specialKeys[o.keyCode],s=o.which>0&&String.fromCharCode(o.which).toLowerCase(),c="",l={};o.altKey&&"alt"!==a&&(c+="alt+"),o.ctrlKey&&"ctrl"!==a&&(c+="ctrl+"),o.metaKey&&!o.ctrlKey&&"meta"!==a&&(c+="meta+"),o.shiftKey&&"shift"!==a&&(c+="shift+"),a&&(l[c+a]=!0),s&&(l[c+s]=!0,l[c+t.hotkeys.shiftNums[s]]=!0,"shift+"===c&&(l[t.hotkeys.shiftNums[s]]=!0));for(var u=0,d=i.length;u<d;u++)if(l[i[u]])return n.apply(this,arguments)}}}}t.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},t.each(["keydown","keyup","keypress"],function(){t.event.special[this]={add:e}})}(this.jQuery)}).call(window)},function(t,e){angular.module("genius").directive("keepInView",["$document","$window",function(t,e){return{link:function(n,i,r){var o=0;n.$watch(r.keepInView,function(n){if(n){var r=i[0].getBoundingClientRect(),a=e.innerHeight;if(r.bottom>.95*a||r.top<.05*a){var s=o-Date.now()<200?100:300;o=Date.now(),$(t.prop("body")).animate({scrollTop:$(i).offset().top-.05*a},s)}}})}}}])},function(t,e){angular.module("genius").directive("leaderboard",[function(){return{restrict:"E",templateUrl:"leaderboard.html",scope:{leaderboard_rows:"<collection"}}}])},function(t,e){angular.module("genius").directive("linksNavigableByArrowKeys",["$immediate","Mousetrap","Bindings",function(t,e,n){var i=n.resolver({yields_refresh:"&linksNavigableByArrowKeys"});return{restrict:"A",link:function(n,r,o){var a,s=i(n,o),c=null,l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t(function(){a=r.find("a:visible"),e&&(c=null)},!1)};l(),s.yields_refresh({refresh:l});e.bindGlobal("down",function(){if(a.length&&!(c>=a.length-1))return _.isNull(c)?c=0:c++,a[c].focus(),!1}),n.$on("$destroy",function(){return e.unbind("down")});e.bindGlobal("up",function(){if(a.length&&!_.isNull(c)&&0!==c)return a[--c].focus(),!1}),n.$on("$destroy",function(){return e.unbind("up")})}}}])},function(t,e){angular.module("genius").directive("localReferentRouting",function(){return{controller:["$scope","$location","Tracking",function(t,e,n){t.$on("$locationChangeSuccess",function(){var i=Number(e.search().referent_id);if(!i){var r=e.hash().match(/^note-(\d+)$/);r&&(i=r[1])}var o=e.path();if(i)n.set_annotation_opened_from_permalink(i),t.song_ctrl.scroll_to_referent(i).then(function(){t.song_ctrl.update_url_for_open_referent(i),e.replace()});else if(o===t.song.path)t.current_referent=null;else{var a=Number(o.slice(1));t.song_ctrl.display_referent(a)}})}]}})},function(t,e){angular.module("genius").directive("lockScrollPositionOnIos",["$window","Bowser",function(t,e){return{link:function(n){if(e.ios){var i=$("body"),r=$(t).scrollTop();i.css("top",-r),n.$on("$destroy",function(){i.css("top",""),$(t).scrollTop(r)})}}}}])},function(t,e){angular.module("genius").directive("lyricSyncTimestampInput",["timestamp_for_displayFilter","parse_time_string","Mousetrap","$immediate",function(t,e,n,i){return{require:"ngModel",link:function(r,o,a,s){var c,l=new n(o[0],{stop_propagation:!0,prevent_default:!0});l.$bind("up",function(){u(e(s.$viewValue)-50)}),l.$bind("down",function(){u(e(s.$viewValue)+50)}),l.$bind("esc",function(){u(e(c)),o.blur()}),i(function(){c=s.$viewValue});var u=function(e){var n=s.$viewValue,i=t(Math.round(e),{always_millis:!0});s.$setViewValue(i),s.$valid?s.$render():s.$setViewValue(n)};o.bind("keyup",function(){s.$commitViewValue(),r.$apply()}),s.$parsers.push(e),s.$formatters.push(function(e){if(e||0===e)return t(e,{always_millis:!0})}),r.$watch(a.ngModel,function(e,n){_.isUndefined(e)&&!_.isUndefined(n)&&(""!==s.$viewValue?s.$setViewValue(t(n,{always_millis:!0})):s.$setViewValue(null),s.$commitViewValue())}),"validators"in a&&_.assign(s.$validators,r.$eval(a.validators))}}}])},function(t,e){angular.module("genius").directive("lyrics",["$q","$compile","SongClient","LyricsEditing","LyricsAnchorer","Lyrics","LyricsEditProposalClient","ReferentHelper","ReferentElementMap","ReferentRegistry","TextSelection","Tracking","Bindings","ScrollFocus","mobile_device","Session","StructuredText","LyricsEditProposal",function(t,e,n,i,r,o,a,s,c,l,u,d,p,f,h,m,g,v){var b=p.resolver({yields_api:"&yieldsApi",on_selection_range_updated:"&onSelectionRangeUpdated",canonical_lyrics_html:"<canonicalLyricsHtml",on_focused_referent_anchor_changed:"&onFocusedReferentAnchorChanged"});return{restrict:"E",templateUrl:"lyrics.html",controller:["$scope",function(e){var r=this;this.user_signed_in=m.user_signed_in,this.react_song_page_link=_.tap(new URL(window.location),function(t){return t.searchParams.append("react","1")}).toString(),this.set_editable=function(t){e.editable=t,r.editable_lyrics_stale=!1},this.build_correction=function(){var t,e,n=r.lyrics_anchorer.get_state();if(n.referent){var o=r.lyrics_anchorer.get_occurrence_in_container_among("[annotation-fragment=".concat(n.referent.id,"]"),n.reference_element);t=n.reference_element,e={id:n.referent.id,occurrence:o}}else t=$("<span>").attr("class","line-correction"),e=r.lyrics_anchorer.calculate_referent_location(n.range),t.html(n.range.extractContents()),n.range.insertNode(t[0]);var a=t.html(),s=i.prepare_lyrics_for_editing(a),c=s.markdown;return r.proposing_edit&&(s.markdown=new g(c).plain),{anchor:t,rect:t.get(0).getBoundingClientRect(),referent:e,replacement:s,original:{html:a,markdown:c}}},this.should_show_full_lyrics_save_cancel_buttons=function(){return(r.proposing_edit||r.editing)&&!r.correcting},this.should_show_full_lyrics_start_propose_button=function(){return!(!r.correcting||!r.proposing_edit)||e.can_perform("propose_lyrics_edit")&&!r.editing&&!r.proposing_edit},this.should_show_full_lyrics_start_edit_button=function(){return!(!r.correcting||!r.editing)||e.can_perform("edit_lyrics")&&!r.editing},this.should_show_edit_annotation_brackets_button=function(){return e.can_perform("edit_annotation_brackets")&&!r.proposing_edit&&!r.editing&&!r.saving},this.should_show_lyrics_edit_form=function(){return r.editing&&!r.correcting},this.should_show_lyrics_edit_proposal_form=function(){return r.proposing_edit&&!r.correcting},this.should_show_lyrics_form_cancel_button=function(){return r.editing&&!r.saving&&!r.correcting},this.should_show_lyrics_sync_warning=function(){return e.can_perform("view_lyrics_synchronization")&&r.should_show_lyrics_edit_form()&&e.song.lyrics_marked_complete_by};this.start_editing=function(){r.set_editable(i.prepare_lyrics_for_editing(e.canonical_lyrics_html)),r.editing=!0,r.correcting?d.track("lyrics_edits:start_by_line_edit"):d.track("lyrics_edits:start_full_edit")},this.start_proposing_edit=function(){r.edit_blocked=!0,r.correcting?d.track("lyrics_edit_proposals:start_by_line_proposal",{properties:{edit_format:"plain_text"}}):d.track("lyrics_edit_proposals:start_proposal",{properties:{edit_format:"plain_text"}}),a.lyrics_for_edit_proposal({song_id:e.song.id}).then(function(t){var e=t.body,n=t.version;r.proposing_edit=!0,r.lyrics_for_edit_proposal={version:n,before:e.plain,markdown:e.plain,attr_hash:{}}}).finally(function(){r.edit_blocked=!1})},this.start_correcting=function(){r.correcting=!0,e.can_perform("propose_lyrics_edit")?(r.proposing_edit=!0,r.editing=!1,r.correction=r.build_correction(),r.start_proposing_edit()):(r.proposing_edit=!1,r.editing=!0,r.correction=r.build_correction(),r.start_editing())},this.cancel_edit_or_proposal=function(){r.editing&&r.correcting?d.track("lyrics_edits:cancel_by_line_edit"):r.editing&&!r.correcting?d.track("lyrics_edits:cancel_full_edit"):r.proposing_edit&&r.correcting?d.track("lyrics_edit_proposals:cancel_by_line_proposal",{properties:{edit_format:"markdown"}}):r.proposing_edit&&!r.correcting&&d.track("lyrics_edit_proposals:cancel_proposal",{properties:{edit_format:"markdown"}}),r.errors=null,r.editing=null,r.correcting=null,r.correction=null,r.proposing_edit=null,r.edit_blocked=!1,r.reset_lyrics_form()},this.reset_lyrics_form=function(){r.errors=null,r.lyrics_form.$rollbackViewValue(),r.lyrics_form.$setPristine()},this.finish_editing=function(){if(!r.saving){var t=i.validate_pseudo_markdown_lyrics(e.canonical_lyrics_html,(r.proposing_edit?r.lyrics_for_edit_proposal:e.editable).markdown,{is_music:e.song.is_music});if(!t.length)return r.editing?r.saving="saving_edit":r.proposing_edit&&(r.saving="saving_proposal"),r.edit_blocked=!0,r.errors=null,(r.proposing_edit?r.save_edit_proposal():r.save_edit()).finally(function(){r.saving=!1});r.errors=t}},this.save_edit_proposal=function(){return r.proposing_edit=!1,r.lyrics_for_edit_proposal.markdown===r.lyrics_for_edit_proposal.before?(r.cancel_edit_or_proposal(),t.when()):a.create({song_id:e.song.id,version:r.lyrics_for_edit_proposal.version,edited_lyrics:r.lyrics_for_edit_proposal.markdown}).then(function(){r.correcting?d.track("lyrics_edit_proposals:save_by_line_proposal",{properties:{edit_format:"markdown"}}):d.track("lyrics_edit_proposals:save_proposal",{properties:{edit_format:"markdown"}}),r.lyrics_form.$setPristine(),r.edit_proposal_submitted=!0,r.correction=null,r.correcting=null}).catch(function(t){r.errors=t.response.errors||[t.message],r.proposing_edit=!0}).finally(function(){r.edit_blocked=!1})},this.save_edit=function(){r.editing=!1;var t=e.lyrics_section_html();return e.lyrics_section_html(c()),n.save_lyrics(e.song,s()).then(function(t){var e=r.correction?"lyrics_edits:save_by_line_edit":"lyrics_edits:save_full_edit";d.track(e),r.apply_lyrics_update(t),r.editing=!1,r.edit_blocked=!1,r.correction=null,r.correcting=null,r.lyrics_form.$setPristine()}).catch(function(n){r.correction||(r.editing=!0),e.lyrics_section_html(t),409===n.meta.status?r.refresh_lyrics():(r.errors=n.response.errors,r.errors&&r.errors.length||(r.errors=[n.meta.message||"Unexpected error"]),r.edit_blocked=!1)})},this.refresh_lyrics=function(){return r.edit_blocked=!0,n.load_lyrics(e.song.id).then(function(t){r.edit_blocked=!1,r.apply_lyrics_update(t)})},this.remove_referent=function(t){e.canonical_lyrics_html=i.lyrics_html_without_referent(e.canonical_lyrics_html,t)},this.on_image_referent_created=function(t,n){r.edit_blocked=!1,n.precomputed_client_rect=t.precomputed_client_rect,e.current_referent=n,e.$emit("referent_created",n)},this.on_image_referent_creation_failed=function(){r.edit_blocked=!1},this.on_image_referent_creation_started=function(){r.edit_blocked=!0},this.can_correct_line=function(){return!r.has_block_level_markup()&&(e.current_referent&&!e.current_referent.is_image||r.selection_range||r.correction)},this.submit_line_correction=function(t){if(r.edit_blocked=!0,r.errors=null,r.proposing_edit){var n=new g(r.correction.original.markdown).plain,o=v.diff(n,t),a=v.make_patches(o);t=v.apply_patches(a,r.correction.original.markdown,{edit_format:"plain_text"}).patched}return r.correction.replacement={markdown:t,html:i.convert_editable_for_saving({markdown:t,attr_hash:{}})},r.set_editable(i.prepare_lyrics_with_correction(e.canonical_lyrics_html,r.correction)),r.proposing_edit&&(r.lyrics_for_edit_proposal.markdown=new g(e.editable.markdown).plain),r.finish_editing()},this.has_block_level_markup=function(){return i.html_has_block_level_markup(e.canonical_lyrics_html)},this.apply_lyrics_update=function(t){return _.assign(e.song,t.client_timestamps),r.update_lyrics_selection_safe(t.body.html),o(e.canonical_lyrics_html)!==o(t.body.html)&&(e.canonical_lyrics_html=t.body.html,r.editable_lyrics_stale=!0),t};var o=function(t){return $("<div>").append($(t)).html()},s=function(){return i.convert_editable_for_saving(e.editable)},c=function(){return i.backfill_angular_link_properties(i.lyrics_pseudo_markdown_to_html__deprecated(e.editable.markdown,e.editable.attr_hash))};e.$watch("lyrics_ctrl.correction",function(t,e){e&&e.anchor.hasClass("line-correction")&&e.anchor.replaceWith(e.original.html)}),e.$watch("current_referent",function(t){t&&(r.correcting=null,r.correction=null)}),e.$watch("lyrics_data",function(t){t&&r.apply_lyrics_update(t)})}],controllerAs:"lyrics_ctrl",link:function(t,n,i,a){var d=b(t,i),p=n.find("section");a.lyrics_anchorer=new r({container:p,get_state:function(){var e=t.current_referent?c.get(t.current_referent.id):null;return{range:a.selection_range,referent:t.current_referent,reference_element:e}},scope:t,song:t.song}),a.update_selection_range=function(t){t!==this.selection_range&&(t&&!s.range_or_contents_intersects_links_or_contains_images(t)?this.selection_range=t:this.selection_range=null,d.on_selection_range_updated({range:this.selection_range}))},d.yields_api({api:{anchorer:a.lyrics_anchorer,remove_referent:a.remove_referent,refresh_lyrics:a.refresh_lyrics.bind(a),block_edit:function(t){a.edit_blocked=t}}}),a.update_lyrics_selection_safe=function(e){u.restore_selection_if_clobbered(p[0],function(){t.lyrics_section_html(e)})};var m={replace:function(){}};h&&(m=new f([],{container:p.get(0)}).on("update",function(t){d.on_focused_referent_anchor_changed({referent_anchor:t})}));var g;t.lyrics_section_html=function(n){if(g&&g.$destroy(),!n)return p.html();c.clear(),l.reset_fragments(),g=t.$new(),function(e){p.empty(),p.append(e);var n=p.find("a[annotation-fragment]").toArray(),i=_.chain(n).uniqBy(function(t){return $(t).data("id")}).filter(function(e){var n=Number($(e).data("id"));return t.song_ctrl.referent_has_preview(n)}).value();m.replace(i),t.$emit("content_change")}(e(o.prepare_for_display(n))(g)),t.$ctrl.on_lyrics_compiled()},t.canonical_lyrics_html=d.canonical_lyrics_html}}}])},function(t,e){angular.module("genius").directive("lyricsSyncKeyboard",["Mousetrap",function(t){return{scope:{showing:"<"},restrict:"E",require:"^lyricsSyncEditor",templateUrl:"lyrics_sync_keyboard.html",link:function(e,n,i,r){e.definitions=[{key:"?",label:"?",description:"Show/Hide Keyboard Shortcuts",action:function(){r.showing_keyboard_shortcuts=!r.showing_keyboard_shortcuts}},{key:"space",label:"Space",description:"Advance Line Selection and Set to Current Time",action:function(){r.can("edit")&&r.can("sync")&&r.start_or_advance()}},{key:"enter",label:"&#x23ce;",description:"Seek to Current Line",action:function(){r.seek_to_index(r.current_line_index)}},{key:"up",label:"&darr;, &uarr;",description:"Move Line Selection, Adjust Time While Editing",action:function(){if(0!==r.current_line_index)do{--r.current_line_index}while(r.current_line()&&r.current_line().hidden)}},{key:"down",action:function(){if(r.current_line_index!==r.lyrics_synchronization.lines.length-1)do{++r.current_line_index}while(r.current_line()&&r.current_line().hidden)}},{key:"left",label:"&larr;, &rarr;",description:"Seek Forwards and Backwards",action:function(){r.media_player.api.seek_to_position(r.position-200)}},{key:"right",action:function(){r.media_player.api.seek_to_position(r.position+150)}},{key:"e",label:"e",description:"Pause And Edit Timestamp",action:function(){r.can("edit")&&(r.media_player.api.pause(),r.current_line()._editing_time=!0)}}],_.each(e.definitions,function(e){t.$bind(e.key,e.action,{prevent_default:!0,stop_propagation:!0})}),e.$on("$destroy",function(){_.each(e.definitions,function(e){t.unbind(e.key)})})}}}])},function(t,e){angular.module("genius").directive("markdownPreview",[function(){return{restrict:"E",scope:{markdown_content:"<markdownContent"},templateUrl:"markdown_preview.html",controller:["$scope","MarkdownPreviewClient",function(t,e){t.$watch("markdown_content",_.throttle(function(){e.create_preview(t.markdown_content).then(function(e){t.html_content=e})},500,{leading:!0,trailing:!0}))}]}}])},function(t,e){angular.module("genius").directive("mediaControls",[function(){return{restrict:"E",scope:{media:"<mediaPlayer",hide_playpause:"<?hidePlaypause",variants:"<?"},templateUrl:"media_controls.html"}}])},function(t,e){angular.module("genius").directive("mentionable",["MentionClient",function(t){return{restrict:"A",link:function(e,n){n.atwho({at:"@",displayTpl:"<li>${name}</li>",insertTpl:"@${value}",searchKey:"name",callbacks:{remoteFilter:function(e,n){t.autocomplete(e).then(function(t){n(t)})},sorter:function(t,e){return e}}})}}}])},function(t,e){angular.module("genius").directive("metadataCustomPerformanceRoleInput",[function(){return{restrict:"E",templateUrl:"metadata_custom_performance_role_input.html",scope:{role_field_placeholder:"@roleFieldPlaceholder",artist_field_placeholder:"@artistFieldPlaceholder",customPerformanceRoles:"<",isDisabled:"<",validation_errors:"<validationErrors"},controllerAs:"ctrl",controller:["$scope",function(t){this.remove_custom_performance=function(e){_.pull(t.customPerformanceRoles,e)},this.add_new_custom_performance=function(){t.customPerformanceRoles.push({label:"",artists:[]})},this.errors_for_label=function(e){return _.get(t.validation_errors,"custom_performances:".concat(e.toLowerCase()))}}]}}])},function(t,e){angular.module("genius").directive("metadataInputAndLabel",function(){return{restrict:"E",templateUrl:"metadata_input_and_label.html",replace:!0,transclude:!0,scope:{label:"@",errors:"<",full:"<",is_disabled:"<isDisabled"}}})},function(t,e){angular.module("genius").directive("modalWindow",["$compile","$document","$templateCache","Bowser",function(t,e,n,i){var r=n.get("modal_window.html");return{scope:{on_close:"&onClose",variants:"<",hidden:"<",media:"<",content_dimensions:"<contentDimensions"},transclude:!0,link:function(n,o,a,s,c){var l=t(r),u=e.prop("body");n.is_ios=i.ios,l(n,function(t){$(u).append(t),n.close=function(t){n.on_close({reason:t})},n.$on("$destroy",function(){return t.remove()})},{parentBoundTranscludeFn:c,futureParentElement:u})}}}])},function(t,e){angular.module("genius").directive("mousetrapInput",function(){return{restrict:"A",link:function(t,e){e.addClass("mousetrap")}}})},function(t,e){angular.module("genius").directive("mutuallyExclusiveSwitches",[function(){return{restrict:"E",scope:!0,link:function(t,e,n){var i=n.property;t[i]={},t.$watch(i,function(e,n){_(e).values().compact().size()<=1||_.forEach(e,function(e,r){var o=n[r];e&&!o&&(t[i]=_.pick(t[i],r))})},!0)}}}])},function(t,e){angular.module("genius").directive("navigateOnClick",["$window",function(t){return{restrict:"A",link:function(e,n,i){n.on("click",function(){t.location.href=i.navigateOnClick})}}}])},function(t,e){angular.module("genius").directive("newConversation",[function(){return{scope:{on_sent:"&onSent",yields_is_dirty:"&yieldsIsDirty"},templateUrl:"new_conversation.html",controller:["$scope","ConversationClient",function(t,e){this.did_send=function(n){e.get(n.conversation_id).then(function(e){t.conversation=e})}}],controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("ngAutofocus",["$immediate",function(t){return{restrict:"A",link:function(e,n,i){var r=function(){t(n.focus.bind(n),!1)};i.ngAutofocus?e.$watch(i.ngAutofocus,function(t){t&&r()}):r()}}}])},function(t,e){angular.module("genius").directive("ngBodyClass",[function(){var t=$("body");return{restrict:"A",link:function(e,n,i){e.$watch(i.ngBodyClass,function(e){for(var n in e)t.toggleClass(n,!!e[n])},!0),e.$on("$destroy",function(){for(var n in e.$eval(i.ngBodyClass))t.removeClass(n)})}}}])},function(t,e){angular.module("genius").directive("ngClickDisabled",function(){return{priority:-2,restrict:"A",link:function(t,e,n){e.on("click",function(e){if(t.$eval(n.ngClickDisabled))return e.stopImmediatePropagation(),!1})}}})},function(t,e){angular.module("genius").directive("odometer",["Odometer",function(t){return{restrict:"E",scope:{value:"<",options:"<"},link:function(e,n){var i=new t(_.merge({el:n[0],value:e.value},e.options));e.$watch("value",function(t){i.update(t)})}}}])},function(t,e){angular.module("genius").directive("onHoverWithNoDigest",[function(){return{restrict:"A",link:function(t,e,n){e.hover(function(){t.$eval(n.onHoverWithNoDigest,{hover:!0})},function(){t.$eval(n.onHoverWithNoDigest,{hover:!1})})}}}])},function(t,e){angular.module("genius").directive("onIframeLoad",["Bindings",function(t){var e=t.resolver({on_iframe_load:"&onIframeLoad"});return{restrict:"A",link:function(t,n,i){var r=e(t,i);n.get(0).addEventListener("load",function(e){var n=e.target;t.$applyAsync(function(){return r.on_iframe_load({target:n})})})}}}])},function(t,e){angular.module("genius").directive("onInnerHeightChange",[function(){return{restrict:"A",link:function(t,e,n){t.$watch(function(){return e.innerHeight()},function(e){t.$eval(n.onInnerHeightChange,{height:e})})}}}])},function(t,e){angular.module("genius").directive("onLoad",[function(){return{restrict:"A",link:function(t,e,n){e.on("load",function(){t.$apply(function(){t.$eval(n.onLoad)})})}}}])},function(t,e){angular.module("genius").directive("openLinksInNewWindow",[function(){return{restrict:"A",link:function(t,e){e.on("click","a:not([target])",function(t){t.target.target="_blank"})}}}])},function(t,e){angular.module("genius").directive("placeholderSpinner",[function(){return{restrict:"E",scope:{placeholderClasses:"@",variants:"<variants"},templateUrl:"placeholder_spinner.html"}}])},function(t,e){angular.module("genius").directive("placeholderText",[function(){return{restrict:"E",templateUrl:"placeholder_text.html"}}])},function(t,e){angular.module("genius").directive("placeholderUserBadge",[function(){return{restrict:"E",scope:{size:"@"},templateUrl:"user_badge.html",link:function(t){t.user={name:"username",iq:"1738",avatar:{thumb:{url:""}}}}}}])},function(t,e){angular.module("genius").directive("playPauseButton",function(){return{restrict:"E",templateUrl:"play_pause_button.html",scope:{playing:"<",loading:"<"}}})},function(t,e){angular.module("genius").directive("positionBeside",["$window",function(t){var e=function t(e,n,i){var r=e[0].getBoundingClientRect().left+e.width()/2,o=$(document.elementFromPoint(r,n));if(!o.length||e.is(o)||e.find(o).length)return n;var a=o[0].getBoundingClientRect();return t(e,i?a.top-1:a.bottom+1,i)};return{restrict:"A",link:function(n,i,r){n.$watch(r.positionBeside,function(o){var a=function(n,i,r){if(!i)return 0;var o=n.offsetParent(),a=o[0].getBoundingClientRect(),s=n.height(),c=a.top,l=a.bottom;r.maximum_visibility&&(c=e(o,Math.max(c,0)),l=e(o,Math.min(l,t.innerHeight-1),!0));var u=i.top+(i.height-s)/2,d=u+s-l;d>0&&(u-=d);var p=c-u;return p>0&&(u+=p),u}(i,o,{maximum_visibility:!!n.$eval(r.positionForMaximumVisibility)});i.offset({top:a+$(t).scrollTop()})})}}}])},function(t,e){angular.module("genius").directive("preload",["PreloadCache",function(t){return{restrict:"E",priority:1e4,link:function(e,n){var i=JSON.parse(n.find("preload-content").attr("data-preload_data"));angular.forEach(i,function(n,i){t[i]=e[i]=n}),n.remove()}}}])},function(t,e){angular.module("genius").directive("preventDefaultClick",function(){return{priority:-1,restrict:"A",link:function(t,e){e.on("click",function(t){t.preventDefault(),t.stopPropagation()})}}})},function(t,e){angular.module("genius").directive("preventDefaultKeydown",function(){return{restrict:"A",link:function(t,e,n){var i=_.map(n.preventDefaultKeydown.split(" "),Number);e.on("keydown",function(t){_.includes(i,t.which)&&t.preventDefault()})}}})},function(t,e){angular.module("genius").directive("proxiedImage",function(){return{restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$formatters.push(function(t){if(!t)return"";var e={};try{var n=new URL(t);return n.hostname.match(/\.embed\.ly$/)&&_.each(n.search.substr(1).split("&"),function(t){var n=t.split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}),e.url||t}catch(e){return t}})}}})},function(t,e){angular.module("genius").directive("pusher",["Pusher",function(t){return{scope:{channel:"@pusherChannel",event_name:"@pusherEventName",updateCallback:"&pusherUpdate",enabled:"="},link:function(e){var n=function(){t.subscribe(e.channel,e.event_name,function(t){e.updateCallback({value:t.value})})};void 0===e.enabled&&(e.enabled=!0),e.enabled&&n(),e.$watch("enabled",function(t,e){t&&!e&&n()})}}}])},function(t,e){angular.module("genius").directive("pyongButton",[function(){return{restrict:"E",scope:{pyongable:"<object",type:"@",onUnauthorized:"&",variants:"<"},templateUrl:function(t,e){return"forHeader"in e?"pyong_button_for_header.html":"pyong_button_square_button.html"},controllerAs:"ctrl",controller:["$scope","PyongClient","Session",function(t,e,n){var i=this,r=t.pyongable;this.pyonged=function(){return!!n.user_signed_in&&r.current_user_metadata.interactions.pyong},this.pyong=function(){if(!n.user_signed_in)return t.onUnauthorized();i.pyonged()||(i.show_pyong_form=!0,r.pyonged=i.clicked_pyong=!0,r.pyongs_count+=1,e.pyong(t.type,r.id).then(function(t){r.current_user_metadata.interactions.pyong=t.current_user_metadata.interactions.pyong,r.pyongs_count=t.pyongs_count}).catch(function(){r.pyongs_count-=1,r.pyonged=!1}))}}]}}])},function(t,e){angular.module("genius").directive("pyongForm",["PyongClient",function(t){return{restrict:"E",scope:{id:"<",type:"<",onComplete:"&"},templateUrl:"pyong_form.html",link:function(e){e.submit=function(n){e.disabled=!0,t.finalizePyong(e.type,e.id,n).then(e.onComplete).finally(function(){return e.disabled=!1})}}}}])},function(t,e,n){"use strict";n.r(e);n(121);$.browser={},angular.module("genius").directive("quickSearch",["Tracking",function(t){return{restrict:"A",link:function(e,n){n.autocomplete("/search/quick.js",{delay:250,scrollHeight:500,matchSubset:!1,max:20,minChars:4,selectFirst:!1,resultsClass:"ac_results quick_search-results",formatResult:function(t){return t[1]?"Loading...":" "}}).result(function(e,n){n&&n[1]&&($("form.global_search :submit").attr("disabled","disabled"),t.track_with_timeout("Search Result Tap",function(){window.location.href=n[1]}))})}}}])},function(t,e){angular.module("genius").directive("referentFragmentContainer",["ReferentHelper",function(t){return{templateUrl:"referent_fragment_container.html",restrict:"E",transclude:{referentHeader:"?referentHeader",referentFragment:"referentFragment"},scope:{referent:"<object",variants:"<"},link:function(e){e.$watch("referent.classification",function(n){e.referent.display_mode=t.display_mode_by_classification(n)})}}}])},function(t,e){angular.module("genius").directive("releaseDate",[function(){return{templateUrl:"release_date.html",restrict:"E",scope:{date_components:"<dateComponents",variants:"<"}}}])},function(t,e){angular.module("genius").directive("removeClassOnAngularLoad",[function(){return{restrict:"A",link:function(t,e,n){e.removeClass(n.removeClassOnAngularLoad)}}}])},function(t,e){angular.module("genius").directive("roleIcon",[function(){return{scope:{role:"<",hasChecky:"<"},templateUrl:"role_icon.html"}}])},function(t,e){angular.module("genius").directive("roleSelectionDialog",["AppConfig",function(t){return{restrict:"E",templateUrl:"role_selection_dialog.html",scope:{prompt:"@",save:"&",saving:"<",error:"<"},link:function(e){e.available_roles=t.available_roles,e.backing={},e.submit=function(){var t=_(e.backing).map(function(t,e){if(t)return e}).compact().value();e.save({selected_roles:t})}}}}])},function(t,e){angular.module("genius").directive("scrollFromBottom",function(){return{restrict:"A",link:function(t,e){var n=new MutationObserver(function(){var t=e.prop("scrollHeight");e.scrollTop(e.scrollTop()+t-i),i=t}),i=e.prop("scrollHeight");n.observe(e[0],{childList:!0,subtree:!0}),t.$on("$destroy",function(){n.disconnect()})}}})},function(t,e){angular.module("genius").directive("scrollOnlyThisElement",[function(){return{restrict:"A",link:function(t,e){e.on("mousewheel",function(t){t.preventDefault();var n=t.detail<0||t.wheelDelta>0?1:-1;e.scrollTop(e.scrollTop()+n*t.deltaFactor*t.deltaY)})}}}])},function(t,e){angular.module("genius").directive("scrollPoint",["ScrollPoint",function(t){return{restrict:"A",link:function(e,n,i){var r=i.scrollPoint;t.register(r,n),e.$on("$destroy",function(){t.unregister(r,n)})}}}])},function(t,e){angular.module("genius").directive("scrollToBottomWhen",["$immediate",function(t){return{restrict:"A",link:function(e,n,i){e.$watch(i.scrollToBottomWhen,function(e,i){e&&!i&&t(function(){n.scrollTop(n.prop("scrollHeight"))},!1)})}}}])},function(t,e){angular.module("genius").directive("scrollToTopOnChange",function(){return{restrict:"A",scope:{scrollToTopOnChange:"<"},link:function(t,e){t.$watch("scrollToTopOnChange",function(){e.scrollTop(0)})}}})},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").directive("scrollableData",["Bindings",function(t){var e=t.resolver({src:"<",preload:"&",empty_message:"@emptyMessage",scroll_mechanism:"@scrollMechanism",repeat_with:"@repeatWith",button_classes:"@buttonClasses",container_classes:"@containerClasses",item_classes:"@itemClasses",unique_by:"@uniqueBy",start_collapsed:"<startCollapsed",on_show_more:"&onShowMore",on_scroll_complete:"&onScrollComplete",on_empty:"&onEmpty"});return{restrict:"E",templateUrl:"scrollable_data.html",transclude:{empty:"?empty",show_more:"?showMore"},scope:!0,controller:["$scope","$attrs",function(t,i){var r=this;e(t,i).assign_to(this),t.$watch("$scrollable_data_ctrl.src",function(){r.auto_reset&&r.src.reset(),r.reset()}),this.get_preloaded_data=function(){return r.preload()||[]},this.reset=function(){var t=r.get_preloaded_data();r.models=_.clone(t),r.current_loading_page=null,r.loading=!1,!r.has_next()||t.length||r.start_collapsed||r.load_next()},this.has_next=function(){return void 0===r.src.next_page?r.src.has_next():r.src.next_page>r.current_loading_page},this.load_next=function(){if(!r.loading&&r.has_next()){r.loading=!0,r.current_loading_page=r.src.next_page,r.on_show_more();var t=r.models;return r.src.next().then(function(e){t.push.apply(t,n(e))}).then(function(){r.unique_by&&(r.models=_.uniqBy(r.models,r.unique_by)),r.loading=!1,0!==r.models.length||r.has_next()||r.on_empty(),r.more_loaded_callback&&r.more_loaded_callback()})}},t.$watch("$scrollable_data_ctrl.src.has_next()",function(t){t||r.on_scroll_complete()})}],controllerAs:"$scrollable_data_ctrl"}}])},function(t,e){angular.module("genius").directive("scrubber",["$document","$timeout",function(t,e){var n="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;return{scope:{scrubPercentage:"=",scrubbed:"&",scale:"@"},link:function(i,r){var o=parseFloat(i.scale||"1"),a=function(t){var e=r.width()*o,n=Math.max(0,Math.min(e,t-r.offset().left));i.scrubbed({percentage:n/e})};r.on("click",function(t){return a(t.pageX),!1});var s=n?{start:"touchstart",end:"touchend",move:"touchmove"}:{start:"mousedown",end:"mouseup",move:"mousemove"},c=function(t){if(t.pageX)return t.pageX;var e=t.originalEvent;return"touchend"===e.type?e.changedTouches[0].pageX:e.touches[0].pageX};r.on(s.start,function(){var n=r.width()*o,l=function(t){var e=Math.max(0,Math.min(n,c(t)-r.offset().left));i.$apply(function(){i.scrubPercentage=e/n})};t.on(s.move,l),t.one(s.end,function(n){n.originalEvent.defaultPrevented||(a(c(n)),t.off(s.move,l),e(function(){Reflect.deleteProperty(i,"scrubPercentage")},500,!1))})})}}}])},function(t,e,n){(function(t){angular.module("genius").directive("searchForm",["Tracking","$location","SearchClient","$immediate","PageTransition",function(e,n,i,r,o){return{restrict:"E",templateUrl:"search_form.html",scope:{style:"@searchStyle"},link:function(a,s){var c=s.find("input.quick_search");a.unfocus=function(){a.focused&&(e.track("Search Cancel"),a.focused=!1,a.search_text="")},a.focus=function(){a.focused||(e.track("Search Page View"),a.focused=!0,c.focus())},o.on_client_transition_complete(function(){a.focused=!1,a.search_text=""}),t.Observable.$watch(a,"search_text").auditTime(500).switchMap(function(e){return e?t.Observable.fromPromise(i.multi(e)):t.Observable.of(null)}).subscribe(function(t){r(function(){return a.sections=t})}),a.submit_form=function(){a.focused&&a.search_text&&s.find("form").submit()},"/gastly"===n.path()&&(a.search_text=n.search().q)}}}])}).call(this,n(122))},function(t,e,n){"use strict";var i=n(5),r=n(73),o=n(124);e.toSubscriber=function(t,e,n){if(t){if(t instanceof i.Subscriber)return t;if(t[r.rxSubscriber])return t[r.rxSubscriber]()}return t||e||n?new i.Subscriber(t,e,n):new i.Subscriber(o.empty)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return i(e,t),e}(Error);e.UnsubscriptionError=r},function(t,e,n){"use strict";var i=n(125);function r(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:i.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r(t)},e.pipeFromArray=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(18).Subscription);e.SubjectSubscription=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(5);e.refCount=function(){return function(t){return t.lift(new o(t))}};var o=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new a(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r},t}(),a=function(t){function e(e,n){t.call(this,e),this.connectable=n}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null},e}(r.Subscriber)},function(t,e,n){"use strict";var i=n(0),r=n(610);i.Observable.combineLatest=r.combineLatest},function(t,e,n){"use strict";var i=n(19),r=n(33),o=n(20),a=n(611);e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null,s=null;return i.isScheduler(t[t.length-1])&&(s=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&r.isArray(t[0])&&(t=t[0]),new o.ArrayObservable(t,s).lift(new a.CombineLatestOperator(n))}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(20),o=n(33),a=n(21),s=n(22),c={};e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&o.isArray(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(new r.ArrayObservable([e].concat(t)),new l(n))}};var l=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project))},t}();e.CombineLatestOperator=l;var u=function(t){function e(e,n){t.call(this,e),this.project=n,this.active=0,this.values=[],this.observables=[]}return i(e,t),e.prototype._next=function(t){this.values.push(c),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var i=t[n];this.add(s.subscribeToResult(this,i,i,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,r){var o=this.values,a=o[n],s=this.toRespond?a===c?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.OuterSubscriber);e.CombineLatestSubscriber=u},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(e,n,i){t.call(this),this.parent=e,this.outerValue=n,this.outerIndex=i,this.index=0}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(5).Subscriber);e.InnerSubscriber=r},function(t,e,n){"use strict";var i=n(0),r=n(614);i.Observable.fromEvent=r.fromEvent},function(t,e,n){"use strict";var i=n(615);e.fromEvent=i.FromEventObservable.create},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(0),o=n(72),a=n(71),s=n(46),c=n(18),l=Object.prototype.toString;var u=function(t){function e(e,n,i,r){t.call(this),this.sourceObj=e,this.eventName=n,this.selector=i,this.options=r}return i(e,t),e.create=function(t,n,i,r){return a.isFunction(i)&&(r=i,i=void 0),new e(t,n,r,i)},e.setupSubscription=function(t,n,i,r,o){var a;if(function(t){return!!t&&"[object NodeList]"===l.call(t)}(t)||function(t){return!!t&&"[object HTMLCollection]"===l.call(t)}(t))for(var s=0,u=t.length;s<u;s++)e.setupSubscription(t[s],n,i,r,o);else if(function(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var d=t;t.addEventListener(n,i,o),a=function(){return d.removeEventListener(n,i,o)}}else if(function(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var p=t;t.on(n,i),a=function(){return p.off(n,i)}}else{if(!function(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t))throw new TypeError("Invalid event target");var f=t;t.addListener(n,i),a=function(){return f.removeListener(n,i)}}r.add(new c.Subscription(a))},e.prototype._subscribe=function(t){var n=this.sourceObj,i=this.eventName,r=this.options,a=this.selector,c=a?function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=o.tryCatch(a).apply(void 0,e);i===s.errorObject?t.error(s.errorObject.e):t.next(i)}:function(e){return t.next(e)};e.setupSubscription(n,i,c,t,r)},e}(r.Observable);e.FromEventObservable=u},function(t,e,n){"use strict";var i=n(0),r=n(617);i.Observable.fromPromise=r.fromPromise},function(t,e,n){"use strict";var i=n(129);e.fromPromise=i.PromiseObservable.create},function(t,e,n){"use strict";var i=n(0),r=n(619);i.Observable.merge=r.merge},function(t,e,n){"use strict";var i=n(0),r=n(20),o=n(19),a=n(130);e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,c=t[t.length-1];return o.isScheduler(c)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof c&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof i.Observable?t[0]:a.mergeAll(n)(new r.ArrayObservable(t,s))}},function(t,e,n){"use strict";e.identity=function(t){return t}},function(t,e,n){"use strict";var i=n(0),r=n(622);i.Observable.never=r.never},function(t,e,n){"use strict";var i=n(623);e.never=i.NeverObservable.create},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(0),o=n(125),a=function(t){function e(){t.call(this)}return i(e,t),e.create=function(){return new e},e.prototype._subscribe=function(t){o.noop()},e}(r.Observable);e.NeverObservable=a},function(t,e,n){"use strict";var i=n(0),r=n(132);i.Observable.of=r.of},function(t,e,n){"use strict";var i=n(0),r=n(626);i.Observable.prototype.auditTime=r.auditTime},function(t,e,n){"use strict";var i=n(78),r=n(631);e.auditTime=function(t,e){return void 0===e&&(e=i.async),r.auditTime(t,e)(this)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(11),o=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),r.root.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;r.root.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,i=void 0;try{this.work(t)}catch(t){n=!0,i=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),i},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(n(628).Action);e.AsyncAction=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(e,n){t.call(this)}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(18).Subscription);e.Action=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return i(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(n(630).Scheduler);e.AsyncScheduler=r},function(t,e,n){"use strict";var i=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=i},function(t,e,n){"use strict";var i=n(78),r=n(632),o=n(633);e.auditTime=function(t,e){return void 0===e&&(e=i.async),r.audit(function(){return o.timer(t,e)})}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(72),o=n(46),a=n(21),s=n(22);e.audit=function(t){return function(e){return e.lift(new c(t))}};var c=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.durationSelector))},t}(),l=function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1}return i(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=r.tryCatch(this.durationSelector)(t);if(e===o.errorObject)this.destination.error(o.errorObject.e);else{var n=s.subscribeToResult(this,e);n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,i){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(a.OuterSubscriber)},function(t,e,n){"use strict";var i=n(634);e.timer=i.TimerObservable.create},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(635),o=n(0),a=n(78),s=n(19),c=n(636),l=function(t){function e(e,n,i){void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,r.isNumeric(n)?this.period=Number(n)<1?1:Number(n):s.isScheduler(n)&&(i=n),s.isScheduler(i)||(i=a.async),this.scheduler=i,this.dueTime=c.isDate(e)?+e-this.scheduler.now():e}return i(e,t),e.create=function(t,n,i){return void 0===t&&(t=0),new e(t,n,i)},e.dispatch=function(t){var e=t.index,n=t.period,i=t.subscriber;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}},e.prototype._subscribe=function(t){var n=this.period,i=this.dueTime;return this.scheduler.schedule(e.dispatch,i,{index:0,period:n,subscriber:t})},e}(o.Observable);e.TimerObservable=l},function(t,e,n){"use strict";var i=n(33);e.isNumeric=function(t){return!i.isArray(t)&&t-parseFloat(t)+1>=0}},function(t,e,n){"use strict";e.isDate=function(t){return t instanceof Date&&!isNaN(+t)}},function(t,e,n){"use strict";var i=n(0),r=n(638);i.Observable.prototype.catch=r._catch,i.Observable.prototype._catch=r._catch},function(t,e,n){"use strict";var i=n(639);e._catch=function(t){return i.catchError(t)(this)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(21),o=n(22);e.catchError=function(t){return function(e){var n=new a(t),i=e.lift(n);return n.caught=i}};var a=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.selector,this.caught))},t}(),s=function(t){function e(e,n,i){t.call(this,e),this.selector=n,this.caught=i}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(o.subscribeToResult(this,n))}},e}(r.OuterSubscriber)},function(t,e,n){"use strict";var i=n(0),r=n(641);i.Observable.prototype.concatMap=r.concatMap},function(t,e,n){"use strict";var i=n(642);e.concatMap=function(t,e){return i.concatMap(t,e)(this)}},function(t,e,n){"use strict";var i=n(131);e.concatMap=function(t,e){return i.mergeMap(t,e,1)}},function(t,e,n){"use strict";var i=n(0),r=n(644);i.Observable.prototype.do=r._do,i.Observable.prototype._do=r._do},function(t,e,n){"use strict";var i=n(645);e._do=function(t,e,n){return i.tap(t,e,n)(this)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(5);e.tap=function(t,e,n){return function(i){return i.lift(new o(t,e,n))}};var o=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.nextOrObserver,this.error,this.complete))},t}(),a=function(t){function e(e,n,i,o){t.call(this,e);var a=new r.Subscriber(n,i,o);a.syncErrorThrowable=!0,this.add(a),this.safeSubscriber=a}return i(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(r.Subscriber)},function(t,e,n){"use strict";var i=n(0),r=n(647);i.Observable.prototype.first=r.first},function(t,e,n){"use strict";var i=n(648);e.first=function(t,e,n){return i.first(t,e,n)(this)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(5),o=n(649);e.first=function(t,e,n){return function(i){return i.lift(new a(t,e,n,i))}};var a=function(){function t(t,e,n,i){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=i}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),s=function(t){function e(e,n,i,r,o){t.call(this,e),this.predicate=n,this.resultSelector=i,this.defaultValue=r,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return i(e,t),e.prototype._next=function(t){var e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}n&&this._emit(t,e)},e.prototype._emit=function(t,e){this.resultSelector?this._tryResultSelector(t,e):this._emitFinal(t)},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this._emitFinal(n)},e.prototype._emitFinal=function(t){var e=this.destination;this._emitted||(this._emitted=!0,e.next(t),e.complete(),this.hasCompleted=!0)},e.prototype._complete=function(){var t=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||t.error(new o.EmptyError):(t.next(this.defaultValue),t.complete())},e}(r.Subscriber)},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(){var e=t.call(this,"no elements in sequence");this.name=e.name="EmptyError",this.stack=e.stack,this.message=e.message}return i(e,t),e}(Error);e.EmptyError=r},function(t,e,n){"use strict";var i=n(0),r=n(651);i.Observable.prototype.map=r.map},function(t,e,n){"use strict";var i=n(652);e.map=function(t,e){return i.map(t,e)(this)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(5);e.map=function(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}};var o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))},t}();e.MapOperator=o;var a=function(t){function e(e,n,i){t.call(this,e),this.project=n,this.count=0,this.thisArg=i||this}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(r.Subscriber)},function(t,e,n){"use strict";var i=n(0),r=n(654);i.Observable.prototype.mapTo=r.mapTo},function(t,e,n){"use strict";var i=n(655);e.mapTo=function(t){return i.mapTo(t)(this)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(5);e.mapTo=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.value))},t}(),a=function(t){function e(e,n){t.call(this,e),this.value=n}return i(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(r.Subscriber)},function(t,e,n){"use strict";var i=n(0),r=n(657);i.Observable.prototype.publishBehavior=r.publishBehavior},function(t,e,n){"use strict";var i=n(658);e.publishBehavior=function(t){return i.publishBehavior(t)(this)}},function(t,e,n){"use strict";var i=n(659),r=n(660);e.publishBehavior=function(t){return function(e){return r.multicast(new i.BehaviorSubject(t))(e)}}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(47),o=n(126),a=function(t){function e(e){t.call(this),this._value=e}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(r.Subject);e.BehaviorSubject=a},function(t,e,n){"use strict";var i=n(48);e.multicast=function(t,e){return function(n){var o;if(o="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new r(o,e));var a=Object.create(n,i.connectableObservableDescriptor);return a.source=n,a.subjectFactory=o,a}};var r=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,i=this.subjectFactory(),r=n(i).subscribe(t);return r.add(e.subscribe(i)),r},t}();e.MulticastOperator=r},function(t,e,n){"use strict";var i=n(0),r=n(662);i.Observable.prototype.scan=r.scan},function(t,e,n){"use strict";var i=n(663);e.scan=function(t,e){return arguments.length>=2?i.scan(t,e)(this):i.scan(t)(this)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(5);e.scan=function(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new o(t,e,n))}};var o=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.accumulator,this.seed,this.hasSeed))},t}(),a=function(t){function e(e,n,i,r){t.call(this,e),this.accumulator=n,this._seed=i,this.hasSeed=r,this.index=0}return i(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(r.Subscriber)},function(t,e,n){"use strict";var i=n(0),r=n(665);i.Observable.prototype.skip=r.skip},function(t,e,n){"use strict";var i=n(666);e.skip=function(t){return i.skip(t)(this)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(5);e.skip=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.total))},t}(),a=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return i(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(r.Subscriber)},function(t,e,n){"use strict";var i=n(0),r=n(668);i.Observable.prototype.startWith=r.startWith},function(t,e,n){"use strict";var i=n(669);e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i.startWith.apply(void 0,t)(this)}},function(t,e,n){"use strict";var i=n(20),r=n(75),o=n(76),a=n(670),s=n(19);e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var n=t[t.length-1];s.isScheduler(n)?t.pop():n=null;var c=t.length;return 1===c?a.concat(new r.ScalarObservable(t[0],n),e):c>1?a.concat(new i.ArrayObservable(t,n),e):a.concat(new o.EmptyObservable(n),e)}}},function(t,e,n){"use strict";var i=n(19),r=n(132),o=n(671),a=n(677);e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length||2===t.length&&i.isScheduler(t[1])?o.from(t[0]):a.concatAll()(r.of.apply(void 0,t))}},function(t,e,n){"use strict";var i=n(672);e.from=i.FromObservable.create},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(33),o=n(127),a=n(128),s=n(129),c=n(673),l=n(20),u=n(674),d=n(77),p=n(0),f=n(675),_=n(74),h=function(t){function e(e,n){t.call(this,null),this.ish=e,this.scheduler=n}return i(e,t),e.create=function(t,n){if(null!=t){if("function"==typeof t[_.observable])return t instanceof p.Observable&&!n?t:new e(t,n);if(r.isArray(t))return new l.ArrayObservable(t,n);if(a.isPromise(t))return new s.PromiseObservable(t,n);if("function"==typeof t[d.iterator]||"string"==typeof t)return new c.IteratorObservable(t,n);if(o.isArrayLike(t))return new u.ArrayLikeObservable(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,n=this.scheduler;return null==n?e[_.observable]().subscribe(t):e[_.observable]().subscribe(new f.ObserveOnSubscriber(t,n,0))},e}(p.Observable);e.FromObservable=h},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(11),o=n(0),a=n(77),s=function(t){function e(e,n){if(t.call(this),this.scheduler=n,null==e)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[a.iterator];if(!e&&"string"==typeof t)return new c(t);if(!e&&void 0!==t.length)return new l(t);if(!e)throw new TypeError("object is not iterable");return t[a.iterator]()}(e)}return i(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.hasError,i=t.iterator,r=t.subscriber;if(n)r.error(t.error);else{var o=i.next();o.done?r.complete():(r.next(o.value),t.index=e+1,r.closed?"function"==typeof i.return&&i.return():this.schedule(t))}},e.prototype._subscribe=function(t){var n=this.iterator,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{index:0,iterator:n,subscriber:t});for(;;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed){"function"==typeof n.return&&n.return();break}}},e}(o.Observable);e.IteratorObservable=s;var c=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length),this.str=t,this.idx=e,this.len=n}return t.prototype[a.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),l=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(n=e,"number"!=typeof n||!r.root.isFinite(n)))return e;var n;if((e=function(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}(e)*Math.floor(Math.abs(e)))<=0)return 0;if(e>u)return u;return e}(t)),this.arr=t,this.idx=e,this.len=n}return t.prototype[a.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();var u=Math.pow(2,53)-1},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(0),o=n(75),a=n(76),s=function(t){function e(e,n){t.call(this),this.arrayLike=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return i(e,t),e.create=function(t,n){var i=t.length;return 0===i?new a.EmptyObservable:1===i?new o.ScalarObservable(t[0],n):new e(t,n)},e.dispatch=function(t){var e=t.arrayLike,n=t.index,i=t.length,r=t.subscriber;r.closed||(n>=i?r.complete():(r.next(e[n]),t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.arrayLike,i=this.scheduler,r=n.length;if(i)return i.schedule(e.dispatch,0,{arrayLike:n,index:0,length:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(n[o]);t.complete()},e}(r.Observable);e.ArrayLikeObservable=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(5),o=n(676);e.observeOn=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new a(t,e))}};var a=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=a;var s=function(t){function e(e,n,i){void 0===i&&(i=0),t.call(this,e),this.scheduler=n,this.delay=i}return i(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},e}(r.Subscriber);e.ObserveOnSubscriber=s;var c=function(){return function(t,e){this.notification=t,this.destination=e}}();e.ObserveOnMessage=c},function(t,e,n){"use strict";var i=n(0),r=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return i.Observable.of(this.value);case"E":return i.Observable.throw(this.error);case"C":return i.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();e.Notification=r},function(t,e,n){"use strict";var i=n(130);e.concatAll=function(){return i.mergeAll(1)}},function(t,e,n){"use strict";var i=n(0),r=n(679);i.Observable.prototype.switchMap=r.switchMap},function(t,e,n){"use strict";var i=n(680);e.switchMap=function(t,e){return i.switchMap(t,e)(this)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(21),o=n(22);e.switchMap=function(t,e){return function(n){return n.lift(new a(t,e))}};var a=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.resultSelector))},t}(),s=function(t){function e(e,n,i){t.call(this,e),this.project=n,this.resultSelector=i,this.index=0}return i(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var i=this.innerSubscription;i&&i.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,i,r){this.resultSelector?this._tryNotifyNext(t,e,n,i):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,n,i){var r;try{r=this.resultSelector(t,e,n,i)}catch(t){return void this.destination.error(t)}this.destination.next(r)},e}(r.OuterSubscriber)},function(t,e,n){"use strict";var i=n(0),r=n(682);i.Observable.prototype.withLatestFrom=r.withLatestFrom},function(t,e,n){"use strict";var i=n(683);e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i.withLatestFrom.apply(void 0,t)(this)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(21),o=n(22);e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var i=t;return e.lift(new a(i,n))}};var a=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.observables,this.project))},t}(),s=function(t){function e(e,n,i){t.call(this,e),this.observables=n,this.project=i,this.toRespond=[];var r=n.length;this.values=new Array(r);for(var a=0;a<r;a++)this.toRespond.push(a);for(a=0;a<r;a++){var s=n[a];this.add(o.subscribeToResult(this,s,s,a))}}return i(e,t),e.prototype.notifyNext=function(t,e,n,i,r){this.values[n]=e;var o=this.toRespond;if(o.length>0){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(r.OuterSubscriber)},function(t,e){angular.module("genius").directive("selectAllOnClick",[function(){return{restrict:"A",link:function(t,e){e.on("click",function(t){t.target.select()})}}}])},function(t,e){angular.module("genius").directive("setClassBeforeNavigate",["$immediate","LinkEvents","SmartRouting",function(t,e,n){return{restrict:"A",link:function(i,r,o){r.on("click",function(i){e.should_open_in_new_window_or_tab(i,r)||o.href&&(i.preventDefault(),r.addClass(o.setClassBeforeNavigate),t(function(){return n.navigate_to_absolute_url(o.href)}))})}}}])},function(t,e){angular.module("genius").directive("setCookieAndCloseOnClick",[function(){return{require:"^displayUnlessCookie",link:function(t,e,n,i){e.on("click",function(){i.set_cookie_and_close(),t.$apply()})}}}])},function(t,e){angular.module("genius").directive("setDesiredLocation",["$window","Cookies",function(t,e){return{restrict:"A",link:function(n,i,r){i.click(function(){e.put("desired_location",t.location.href,{path:"/"})})}}}])},function(t,e){angular.module("genius").directive("shareButtons",[function(){return{scope:{song:"<"},templateUrl:"share_buttons.html",controllerAs:"ctrl",controller:[function(){return{}}]}}])},function(t,e){angular.module("genius").directive("showArrowAtOffset",[function(){return{restrict:"A",link:function(t,e){t.show_arrow_at_offset=function(t){return t>e.position().top}}}}])},function(t,e){angular.module("genius").directive("showIfBrowser",["Bowser",function(t){return{restrict:"A",link:function(e,n,i){t[i.showIfBrowser]||n.hide()}}}])},function(t,e){angular.module("genius").directive("simpleDatetimeInput",["$filter",function(t){return{restrict:"E",scope:{},require:"ngModel",templateUrl:"simple_datetime_input.html",controller:["$scope",function(t){t.datetime={};var e=(new Date).getFullYear();_.assign(t,{years:_.range(1900,e+100).reverse(),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map(function(t,e){return{name:t,number:e+1}}),days:_.range(1,32),hours:_.range(0,24),minutes:_.range(0,60)})}],link:function(e,n,i,r){var o=t("cast_to_date");r.$render=function(){var t=o(r.$modelValue)||new Date;e.datetime={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes()}},r.$render(),e.$watch(function(){if(e.datetime&&!_.some(e.datetime,function(t){return void 0===t}))return e.datetime.year+"/"+e.datetime.month+"/"+e.datetime.day+" "+e.datetime.hour+":"+e.datetime.minute},function(t){t&&r.$setViewValue(t)})}}}])},function(t,e){angular.module("genius").directive("sizedSrc",["ImageTransform","$window",function(t,e){return{restrict:"A",scope:{sizedSrc:"<"},link:function(n,i){n.$watch("sizedSrc",function(n){i.css("width","100%");var r=i.width()*(e.devicePixelRatio||1);i.attr("src",t.resize(n,{width:r}))})}}}])},function(t,e){angular.module("genius").directive("slideDown",["$immediate","Bindings",function(t,e){var n=e.resolver({no_slide_when:"<noSlideWhen",slide_down_callback:"&slideDownCallback"});return{restrict:"A",link:function(e,i,r){var o=n(e,r);if(!o.no_slide_when){i.hide();t(function(){i.slideDown(200,function(){o.slide_down_callback()})},!1)}}}}])},function(t,e){angular.module("genius").directive("slideOverPane",[function(){return{restrict:"E",templateUrl:"slide_over_pane.html",transclude:!0,scope:{condition:"<",closeOn:"&",scrollToTopTrigger:"<"},controller:["$scope","Bowser",function(t,e){e.ios&&(t.is_ios=!0)}]}}])},function(t,e){angular.module("genius").directive("slideUpOn",["$immediate",function(t){return{restrict:"A",link:function(e,n,i){e.$watch(i.slideUpOn,function(e){e&&t(function(){n.slideUp(200)},!1)})}}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").directive("songActivity",["SongClient",function(t){return{templateUrl:"song_activity.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl",controller:["$scope",function(e){var i,r,o=this,a=0,s=0;this.loading_contributors=!0,this.loading_iq_earners=!0,this.load_contributors=function(){t.load_contributor_data(e.song.id).then(function(t){s+=t.iq_earners.length,e.contributors=t,e.has_more_iq_earners=s<t.iq_earners_total,a+=1}).finally(function(){e.ctrl.loading_contributors=!1,e.ctrl.loading_iq_earners=!1})},this.load_more_iq_earners=function(){e.loading_contributors||(o.loading_iq_earners=!0,t.load_iq_earners(e.song.id,{page:a}).then(function(t){s+=t.iq_earners.length,e.contributors.iq_earners=_.uniqBy(e.contributors.iq_earners.concat(t.iq_earners),"user.id"),e.has_more_iq_earners=s<t.iq_earners_total,a+=1}).finally(function(){e.ctrl.loading_iq_earners=!1}))},this.load_contributors();this.load_next_page=function(){r||(r=t.line_items(e.song.id,i).then(function(t){var o,a=t.line_items;(o=e.line_items).push.apply(o,n(a)),r=void 0,a.length&&(i=t.next_page)||(e.done_loading=!0)}))},this.should_paginate=function(){return!r&&!e.done_loading},e.line_items=[],e.done_loading=!1,i=1,o.load_next_page()}]}}])},function(t,e){angular.module("genius").directive("songAdminMenu",[function(){return{restrict:"E",templateUrl:"song_admin_menu.html",transclude:{additional_buttons:"?additionalButtons"},controller:["$scope",function(t){t.actions=["publish","unpublish","hide","unhide","award_transcription_iq","remove_transcription_iq","reindex","view_annotation_engagement_data","edit_spotify_annotations_for","view_lyrics_synchronization","destroy","verify_lyrics","unverify_lyrics","disable_media","enable_media","hide_apple_player","unhide_apple_player","trigger_apple_match","mark_lyrics_evaluation_as_approved","mark_lyrics_evaluation_as_staff_approved","mark_lyrics_evaluation_as_unapproved","mark_lyrics_evaluation_as_un_staff_approved"]}],link:function(t){t.$watch("song.current_user_metadata",function(){t.has_admin_items=_(t.actions).some(function(e){return t.can_perform(e)})})}}}])},function(t,e){angular.module("genius").directive("songMetadata",[function(){return{templateUrl:"song_metadata.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl",controller:["$scope","Session",function(t,e){this.has_permission=function(n){return e.has_permission(n,t.song)}}]}}])},function(t,e){angular.module("genius").directive("songMetadataForm",["$window","Session","TagClient","I18n",function(t,e,n,i){return{scope:{save:"&onSave",song_was:"<object",expanded_sections:"=expandedSections",yields_is_dirty:"&yieldsIsDirty"},restrict:"E",templateUrl:"song_metadata_form.html",controllerAs:"ctrl",controller:["Tracking","$scope","AppConfig",function(r,o,a){var s=this;this.apple_purposes=a.external_song_match_purposes,this.close=function(){!o.expanded_sections||s.song_form.$dirty&&!t.confirm(i.t("song.action_confirmations.dismiss_dirty"))||(o.expanded_sections=null)},this.has_permission=function(t){return e.has_permission(t,o.song)},this.submit=function(){o.save({song:o.song}).then(function(){r.track("Metadata Edit",{Source:"Edit"}),o.expanded_sections=null}).catch(function(t){s.error=t})},o.song=angular.copy(o.song_was),o.$watch("song_was.updated_by_human_at",function(t,e){t>e&&(s.editable_metadata_stale=!0)}),o.available_primary_tags=[],n.primary().then(function(t){o.available_primary_tags=t.map(function(t){return t.id===o.song.primary_tag.id?o.song.primary_tag:t})})}]}}])},function(t,e){angular.module("genius").directive("songMetadataPreview",[function(){return{templateUrl:"song_metadata_preview.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("songPrimaryAlbum",function(){return{restrict:"E",templateUrl:"song_primary_album.html",scope:{album:"<"}}})},function(t,e){angular.module("genius").directive("soundcloud",["$q","Tracking","getScript","Soundcloud",function(t,e,n,i){return{restrict:"E",templateUrl:"soundcloud.html",replace:!0,scope:{yieldsApi:"&",yieldsState:"&",soundcloud_src:"<soundcloudSrc"},link:function(r,o){r.$watch("soundcloud_src",function(a){if(a){var s=t.defer(),c=s.promise;t.all([i.player_url_for_src(r.soundcloud_src),n("https://w.soundcloud.com/player/api.js",{cache:!0})]).then(function(t){var e,n,i=t[0];e=o,n=i.$$unwrapTrustedValue(),e.attr("src",n);var a=SC.Widget(o[0]);a.bind(SC.Widget.Events.READY,function(){a.getDuration(function(t){t?(s.resolve(a),r.duration=t):l.has_errored=!0,r.$apply()})})});var l={};r.yieldsState({state:l});var u=function(t,e,n){t.bind(e,function(){r.$apply(n)})},d=_.once(function(){e.track("Soundcloud play")});c.then(function(t){l.is_loaded=!0,u(t,SC.Widget.Events.ERROR,function(){l.has_errored=!0}),u(t,SC.Widget.Events.PAUSE,function(){l.is_loaded=!0,l.is_playing=!1}),u(t,SC.Widget.Events.PLAY,function(){d(),l.is_loaded=!1,l.is_playing=!0}),t.bind(SC.Widget.Events.PLAY_PROGRESS,_.throttle(function(t){r.$apply(function(){l.is_loaded=!0,l.percentage=t.relativePosition,l.time_remaining=r.duration-t.currentPosition})},100))}),r.yieldsApi({api:{load_media:function(){},playpause:function(){c.then(function(t){l.is_playing?t.pause():t.play()})},pause:function(){c.then(function(t){t.pause()})},seek_to:function(t){l.percentage=t,c.then(function(e){e.seekTo(r.duration*t)})}}}),c.then(function(t){i.oembed_url_for_src(a).then(t.load.bind(t))})}})}}}])},function(t,e){angular.module("genius").directive("spotifyOnboarding",["AppConfig",function(t){return{link:function(e,n){e.app_store_url=t.app_store_url,e.jump_below_onboarding=function(){var t=n.position().top+n.outerHeight();$("html, body").animate({scrollTop:t},150)}}}}])},function(t,e){angular.module("genius").directive("standaloneReferent",function(){return{templateUrl:"standalone_referent.html",restrict:"E",scope:{referent:"<object",variants:"<",yields_api:"&yieldsApi",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",focused_comments:"<focusedComments"},controller:["$scope","$window","$immediate",function(t,e,n){n(function(){e.parent.postMessage({sentinel:"amp",type:"embed-size",height:e.document.body.scrollHeight},"*")}),this.disables_user_tooltips=_.get(t,"variants.disableTooltips")}]}})},function(t,e){angular.module("genius").directive("standardRichContent",function(){return{restrict:"E",scope:{html:"<",variants:"<"},templateUrl:"standard_rich_content.html",controller:["$element","$scope","$sce","Facebook",function(t,e,n,i){e.$watch("html",function(r){r?(e.trusted_html=n.trustAsHtml(r),e.$applyAsync(function(){return i.process_embeds(t[0])})):Reflect.deleteProperty(e,"trusted_html")})}]}})},function(t,e){angular.module("genius").directive("sticky",["Waypoint","$immediate","Bindings",function(t,e,n){var i=n.resolver({sticky:"<"});return{restrict:"A",link:function(n,r,o){var a,s=i(n,o),c=o.stickyClass;if("stickyUseParentAsWrapper"in o)a=!1;else{var l=o.stickyWrapperClass||"sticky_wrapper";a='<div class="'.concat(l,'">')}var u=!1;e(function(){var e=void 0!==s.sticky,i=new t.Sticky({element:r,wrapper:a,stuckClass:c,offset:function(){return o.stickyOffset||"0"},handler:function(){return u=!u},enabled:!e});e&&n.$watch(function(){return s.sticky},function(){s.sticky?i.waypoint.enable():i.waypoint.disable()})},!1)}}}])},function(t,e){angular.module("genius").directive("stopPropagation",function(){return{restrict:"A",link:function(t,e,n){e.on(n.stopPropagation,function(t){t.stopPropagation()})}}})},function(t,e){angular.module("genius").directive("submitOnCmdEnter",function(){return{restrict:"A",require:"form",link:function(t,e,n,i){e.on("keydown",function(n){13===n.keyCode&&(n.metaKey||n.shiftKey)&&(t.$apply(function(){i.$commitViewValue()}),e.triggerHandler("submit"),n.preventDefault())})}}})},function(t,e){angular.module("genius").directive("svg",["Bowser","ShimInnerHtmlProp","$templateCache","$immediate",function(t,e,n,i){var r=function(e,r){var o=$(n.get(r));e.html(o[0].innerHTML),_.each(o[0].attributes,function(t){e[0].setAttribute(t.name,t.value)});var a=e.get(0).getAttribute("viewBox");(t.msie||t.msedge)&&a&&i(function(){var t=a.split(" ");t.length>3&&e.width(e.height()*(parseInt(t[2])/parseInt(t[3])))},!1)};return{link:function(t,n,i){e(),"src"in i&&r(n,i.src),"ngSrc"in i&&t.$watch(i.ngSrc,function(t){t&&r(n,t)})}}}])},function(t,e){angular.module("genius").directive("tetherDrop",["$immediate","TetherDrop",function(t,e){return{restrict:"E",scope:{containerClasses:"@",position:"@",showOn:"@",visible:"<?",onClose:"&",yieldsApi:"&?"},transclude:"true",link:function(n,i,r,o,a){var s,c=new e({content:s||"",target:i.closest("[tether-drop-target]")[0],position:n.position||"right middle",openOn:n.showOn,remove:!0,loadContentOnDemand:!0,hoverOpenDelay:250,tetherOptions:{constraints:[{to:"window",attachment:"together element",pin:!0}],classes:{element:n.containerClasses}}});c.once("open",function(){a(function(e){var n=$(c.content);n.hide(),s=$("<div>").append(e)[0],n.append(s),t(function(){n.show(),c.position()})})}),c.on("close",n.onClose),"visible"in r&&n.$watch("!!visible",function(t){t?c.open():c.close()}),n.$watch(function(){return c.position}),n.$on("$destroy",function(){return c.destroy()});var l={hide:c.close.bind(c),show:c.open.bind(c)};"yieldsApi"in r&&n.yieldsApi({tetherApi:l})}}}])},function(t,e){angular.module("genius").component("textCorrector",{bindings:{text:"<",proposing_edit:"<proposingEdit",cancel:"&",submit:"&",yields_text_corrector:"&yieldsTextCorrector"},templateUrl:"text_corrector.html",controller:["$q","$window","I18n",function(t,e,n){this.submit_form=function(){return this.saving=!0,t.when(this.submit({corrected:this.text})).finally(function(){delete this.saving,this.correction_form.$setPristine()}.bind(this))},this.cancel_correction=function(){this.is_dirty()&&!e.confirm(n.t("editing.dirty_unload_confirm_box"))||(this.correction_form.$rollbackViewValue(),this.correction_form.$setPristine(),this.cancel())},this.yields_text_corrector({text_corrector:{cancel:this.cancel_correction.bind(this)}})}]})},function(t,e){angular.module("genius").directive("textSelectionChanged",["TextSelection",function(t){return{restrict:"A",scope:{textSelectionChanged:"&"},link:function(e,n){t.$on("selection",function(t,i){var r=i.ranges.filter(function(t){return n[0].contains(function(t){for(var e=t.commonAncestorContainer;e.nodeType!==Node.ELEMENT_NODE;)e=e.parentNode;return e}(t))});e.textSelectionChanged({ranges:r})})}}}])},function(t,e){angular.module("genius").directive("textarea",["Autosize","$immediate",function(t,e){return{restrict:"E",link:function(n,i,r){if(!("autosizeOff"in r)){var o=function(){t.update(i)},a=function(){t(i)};"autosizeInitOnFocus"in r?i.on("focus",a):e(a,!1),i.on("change",o),n.$watch(r.ngModel,function(t){t!==i.val()&&e(o,!1)}),r.ngShow&&n.$watch(r.ngShow,function(t){t&&e(o,!1)})}}}}])},function(t,e){angular.module("genius").directive("timeAgo",[function(){return{restrict:"E",templateUrl:"time_ago.html",scope:{time:"<"}}}])},function(t,e){angular.module("genius").directive("timestampInput",["timestamp_for_displayFilter",function(t){return{scope:{timestamp:"=ngModel",ngDisabled:"<"},template:'<input ng-model="string" ng-disabled="ngDisabled" type="text"/>',link:function(e,n){e.$watch("timestamp",function(n){e.string=t(n)}),n.find("input").on("blur",function(){e.timestamp=function(t){if(!t)return null;var e=t.split(":");return Math.floor(1e3*(60*parseInt(e[0]||"0",10)+parseFloat(e[1]||"0")))}(e.string),e.$apply()})}}}])},function(t,e){angular.module("genius").directive("tracking",["Tracking","Waypoint","$immediate",function(t,e,n){return{restrict:"A",link:function(i,r,o){var a=function(){t.track(o.trackingEvent,i.$eval(o.trackingOptions))};switch(o.tracking){case"scroll_into_view":n(function(){new e({element:r,handler:function(){a(),this.destroy()},offset:"100%"})});break;default:r.bind(o.tracking,a)}}}}])},function(t,e){angular.module("genius").directive("tracksLinkWithClass",["$document",function(t){return{restrict:"A",link:function(e,n,i){if(void 0!==window.mixpanel){n.addClass(i.tracksLinkWithClass);var r=i.withEventName||"clicked_"+i.tracksLinkWithClass;mixpanel.track_links("."+i.tracksLinkWithClass,r,{"from url":t[0].location.href})}}}}])},function(t,e){angular.module("genius").directive("transcludeInjectingLocalScope",function(){return{restrict:"E",link:function(t,e,n,i,r){if(!r)throw{message:"Illegal use of transcludeInjectingLocalScope directive in the template! No parent directive that requires a transclusion found.",element:e};var o=t.$new();r(o,function(t){e.empty(),e.append(t),e.on("$destroy",function(){o.$destroy()})})}}})},function(t,e){angular.module("genius").directive("upwardsInfiniteScroll",["$throttle",function(t){return{restrict:"A",link:function(e,n,i){var r=i.upwardsInfiniteScroll,o=!1;i.infiniteScrollDisabled&&e.$watch(i.infiniteScrollDisabled,function(t){o=t,a()});var a=function(){o||n.scrollTop()<.1*n.height()&&e.$eval(r)};a(),n.on("scroll",t(a,250,{leading:!1}))}}}])},function(t,e){angular.module("genius").directive("userBadge",function(){return{restrict:"E",templateUrl:"user_badge.html",scope:{user:"<object",size:"@",pinned_role:"<pinnedRole",anonymous_user:"<anonymousUser",sponsor:"<",variants:"<"},require:"^?standaloneAnnotation",link:function(t,e,n,i){t.disables_user_tooltips=i&&i.disables_user_tooltips;var r=!_.includes(["small","x_small"],t.size);t.is_two_lines=r,t.user&&(t.avatar_url=r?t.user.avatar.small.url:t.user.avatar.thumb.url)}}})},function(t,e){angular.module("genius").directive("userBadgeAndTimestamp",function(){return{restrict:"E",templateUrl:"user_badge_and_timestamp.html",scope:{size:"@",user:"<",pinned_role:"<pinnedRole",anonymous_user:"<anonymousUser",time:"<",sponsor:"<",variants:"<"}}})},function(t,e){angular.module("genius").directive("userTooltip",function(){return{restrict:"E",templateUrl:"user_tooltip.html",scope:{user:"<"}}})},function(t,e){angular.module("genius").directive("voters",["VoteClient",function(t){return{restrict:"E",templateUrl:"voters.html",scope:{type:"@",object:"<"},link:function(e){e.load=function(){t.load_voters(e.type,e.object.id).then(function(t){e.loaded_voters=!0,e.voters=t,e.object.votes_total=t.votes_total})},e.$on("update_voters",function(t){e.loaded_voters=!1,e.load()}),e.load()}}}])},function(t,e){angular.module("genius").directive("voting",[function(){var t={down:-1,up:1};return{restrict:"E",templateUrl:"voting.html",scope:{voteTotalClicked:"&",voteable:"<object",type:"@",onUnauthorized:"&",variants:"<"},controllerAs:"ctrl",controller:["$scope","Session","Tracking","VoteClient","Reversible",function(e,n,i,r,o){this.submit_vote=function(a){var s=e.voteable.current_user_metadata.interactions.vote;if(a===s&&(a=void 0),!n.user_signed_in)return i.track("Logged out vote attempt"),e.onUnauthorized({vote:a});n.has_permission("vote",e.voteable)&&(e.voteable.current_user_metadata.interactions.vote=a,function(n,i){var a=(t[n]||0)-(t[i]||0),s={votes_total:e.voteable.votes_total+a};e.voteable.has_voters||(s.has_voters=!0);var c=o.modify(e.voteable,s);r.submit_vote(e.type,e.voteable.id,n).then(function(){e.$emit("vote_saved")}).catch(function(){c(),e.voteable.current_user_metadata.interactions.vote=i})}(a,s),e.$emit("vote_submitted",e.type,a))}}]}}])},function(t,e){angular.module("genius").directive("watchImagesLoaded",["$immediate","$q",function(t,e){return{restrict:"A",link:function(n,i,r){var o=r.watchImagesLoaded||"ngBindHtml";n.$watch(o,function(r){r?t(function(){e(function(t){i.waitForImages(t)}).then(function(){n.$emit("images_loaded")})},!1):n.$emit("images_loaded")})}}}])},function(t,e){angular.module("genius").directive("webAnnotatorRoleRow",[function(){return{templateUrl:"web_annotator_role_row.html",scope:{on_create:"&onCreate",on_error:"&onError",user_role:"<userRole"},bindToController:!0,controllerAs:"$ctrl",controller:["WebAnnotatorClient","$q",function(t,e){var n=this,i=function(){return _.pick(n.user_role,["user_login","role","page_moderator","auto_feature"])};this.$onInit=function(){this.editing=!this.user_role.id},this.create=function(){n.saving=!0,e.when(n.on_create({params:i()})).then(function(){n.user_role={auto_feature:!0}}).catch(function(t){n.on_error({error:t})}).finally(function(){n.saving=!1})},this.save=function(){n.saving=!0,t.update_user_role(n.user_role.id,i()).then(function(t){n.user_role=t,n.editing=!1}).catch(function(t){n.on_error({error:t})}).finally(function(){n.saving=!1})},this.destroy=function(){n.user_role._deleted=!0,t.destroy_user_role(n.user_role.id).catch(function(t){n.on_error({error:t}),n.user_role._deleted=!1})}}]}}])},function(t,e){angular.module("genius").directive("yieldsBoundingBoxHeight",["$immediate",function(t){return{restrict:"A",scope:{yieldsBoundingBoxHeight:"&"},link:function(e,n){t(function(){var t=n[0].getBoundingClientRect().height;e.yieldsBoundingBoxHeight({height:t})})}}}])},function(t,e){angular.module("genius").directive("youtubePlayer",["$document","Youtube",function(t,e){var n=/http:\/\/www\.youtube\.com\/watch\?v=(.*)/i;return{restrict:"E",scope:{src:"<?",start:"<?",controls:"<?",fullscreen:"<?",yields_api:"&yieldsApi",yields_state:"&yieldsState",eager_load:"<?eagerLoad",autoplay:"<?",playsinline:"<?",on_playing:"&onPlaying"},link:function(i,r){i.state={};var o=t[0].createElement("div");r[0].appendChild(o);var a=new e(o,{controls:i.controls,fullscreen:i.fullscreen,playsinline:i.playsinline});i.$watch("src",function(t){var e=t.match(n)[1];a.cue_video_by_id(e,i.start||0),i.eager_load&&(a.api.load_media(),i.autoplay&&(a.api.mute(),a.api.playpause())),i.yields_api({api:a.api}),i.yields_state({state:a.state})}),a.state.$watch("is_playing",function(t){t&&i.on_playing()})}}}])},function(t,e){angular.module("genius").factory("$debounce",["$timeout",function(t){return function(e,n){var i;return function(){t.cancel(i),i=t(e,n)}}}])},function(t,e){angular.module("genius").factory("$immediate",["$timeout",function(t){return function(e,n){return t(e,0,n)}}])},function(t,e){angular.module("genius").factory("$throttle",["$rootScope",function(t){return function(e,n,i){return _.throttle(function(){var n=arguments;t.$apply(function(){e.apply(null,n)})},n,i)}}])},function(t,e){angular.module("genius").factory("AbTest",["AbTestClient","LocalStorage","$q","AppConfig",function(t,e,n,i){return{get_variant_for:function(t){return this.get_ab_tests().then(function(e){return e[t]})},get_ab_tests:_.once(function(){var r=e.safe_get_item("ab_tests",null);return r&&_.every(i.ab_tests,function(t){return _.has(r,t)})?n.resolve(r):t.get().then(function(t){var n=t.ab_tests;return e.safe_set_item("ab_tests",n),n})}),clear:function(){e.safe_remove_item("ab_tests")}}}])},function(t,e){angular.module("genius").factory("AbTestClient",["ApiClient",function(t){return{get:function(){return t.get("/ab_tests")}}}])},function(t,e){angular.module("genius").factory("AccomplishmentClient",["ApiClient",function(t){return{update:function(e,n){return t.put("/accomplishments/:accomplishment_id",_.merge({accomplishment_id:e},n))}}}])},function(t,e){angular.module("genius").factory("AdminTaskClient",["ApiClient",function(t){return{get:function(e){return t.get("/admin_tasks/".concat(e))},perform_task:function(e,n){return t.post("/admin_tasks/".concat(e.name,"/perform"),{property_values:n})}}}])},function(t,e){angular.module("genius").factory("Ads",["$location","$q","$window","ApiClient","application_bootstrap",function(t,e,n,i,r){n["Genius.ads"]=n["Genius.ads"]||[];var o=e(function(t){return n["Genius.ads"].push(t)});return o.then(function(t){r.after(t.trigger_user_syncs.bind(t))}),{ensure_targeting_for_placements:function(t){return o.then(function(e){return e.ensure_targeting_for_placements(t)})},id_for:function(t,e){return o.then(function(n){return n.id_for(t,e)})},reset_for_new_page_view:function(t){var e=t.targeting;return o.then(function(t){t.reset_for_new_page_view({targeting:e})})},render:function(n,r,a){return o.then(function(o){return e(function(e){o.render(n,r,a).then(function(o){t.search().log_ads&&function(e,n,r){i.post("/client_logs/gpt_slot_rendered/".concat(t.search().log_ads),Object.assign({name:e,instance:n,url:t.url(),hb_bidder:_.get(r.slot.getTargetingMap(),["hb_bidder",0]),hb_adid:_.get(r.slot.getTargetingMap(),["hb_adid",0])},r.slot.getResponseInformation()))}(n,r,o),e(o)})})})},dispose:function(t,n){return o.then(function(i){return e(function(e){i.dispose(t,n).then(e)})})}}}])},function(t,e){angular.module("genius").factory("AdwordsAdClient",["AppConfig","$http",function(t,e){return{all:function(n){return e.get("".concat(t.api_root_url,"/adwords_ads?adwords_ad_group_id=").concat(n)).then(function(t){return t.data.response.ads})},create:function(n,i){return e.post("".concat(t.api_root_url,"/adwords_ads"),{ad:i,adwords_ad_group_id:n}).then(function(t){return t.data.response.ad})},update:function(n,i){return e.put("".concat(t.api_root_url,"/adwords_ads/").concat(n),{ad:i}).then(function(t){return t.data.response.ad})}}}])},function(t,e){angular.module("genius").factory("AdwordsAdGroupClient",["AppConfig","$http",function(t,e){return{all:function(n){return e.get("".concat(t.api_root_url,"/adwords_ad_groups?adwords_campaign_id=").concat(n)).then(function(t){return t.data.response.ad_groups})},create:function(n,i){return e.post("".concat(t.api_root_url,"/adwords_ad_groups"),{ad_group:i,adwords_campaign_id:n}).then(function(t){return t.data.response.ad_group})}}}])},function(t,e){angular.module("genius").factory("AdwordsCampaignClient",["AppConfig","$http",function(t,e){return{all:function(){return e.get("".concat(t.api_root_url,"/adwords_campaigns")).then(function(t){return t.data.response.campaigns})},create:function(n){return e.post("".concat(t.api_root_url,"/adwords_campaigns"),{campaign:n}).then(function(t){return t.data.response.campaign})}}}])},function(t,e){angular.module("genius").factory("AdwordsNetworkClient",["$http","AppConfig",function(t,e){return{all:function(){return t.get("".concat(e.api_root_url,"/adwords_networks")).then(function(t){return t.data.response.networks})}}}])},function(t,e){angular.module("genius").factory("AlbumClient",["ApiClient",function(t){return{autocomplete:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.returning("albums").get("/albums/autocomplete",Object.assign({q:e},n))},load_leaderboard:function(e,n){return t.get("/albums/".concat(e,"/leaderboard"),n)},update:function(e,n){return t.returning("album").put("/albums/".concat(e),{album:n,text_format:"html,markdown"})},update_tracklist:function(e,n){return t.returning("album_appearances").put("/albums/".concat(e,"/tracklist"),{tracklist:n})},delete:function(e){return t.delete("/albums/".concat(e))},change_lock_state:function(e,n){return t.returning("album").put("/albums/".concat(e,"/change_lock_state"),{state_event:n})}}}])},function(t,e){angular.module("genius").factory("AnnotationClient",["$q","ApiClient","Session","Reversible","Markdown",function(t,e,n,i,r){var o=function(t){var e=n.user_signed_in?"html,markdown":"html";return t.extend({params:{text_format:e}})},a=function(t,n){return e.use(o).returning("annotation_edit").post("/annotation_edits/:edit_id/:action",{edit_id:n,action:t})};return{save:function(n,a){var s,c,l,u={body:{markdown:n._editing.markdown},edit_note:n._editing.edit_note};n._editing._has_source&&(u.source=n._editing.source),n._editing.custom_preview!==n.custom_preview&&(u.custom_preview=n._editing.custom_preview),n.id?(c=n.id,l={annotation:u},s=e.use(o).put("/annotations/:annotation_id",_.merge(l,{annotation_id:c}))):s=function(t,n){return e.use(o).post("/referents/:referent_id/annotations",_.merge(n,{referent_id:t}))}(a.referent.id,{annotation:u});var d=i.modify(n,{"body.html":r.to_html(n._editing.markdown),new:!1,source:u.source});return s.then(function(t){return _.assign(a.referent,t.referent),_.assign(n,t.annotation)}).catch(function(){return d(),t.reject()})},safe_delete:function(t){return function(t,e){return t._deleted=!0,e.catch(function(){Reflect.deleteProperty(t,"_deleted")})}(t,this.delete(t.id))},delete:function(t){return e.delete("/annotations/:annotation_id",{annotation_id:t})},accept:function(r,a){var s=a.referent,c=i.modify(s,{classification:"unreviewed"===s.classification?"accepted":s.classification}),l=i.modify(r,{state:"accepted",accepted_by:n.current_user,"current_user_metadata.permissions":["edit"]});return e.use(o).returning("annotation").post("/annotations/:annotation_id/accept",{annotation_id:r.id}).then(function(t){return _.assign(r,t)}).catch(function(){return c(),l(),t.reject()})},safe_reject:function(e,n){var r,o=n.comment,a=_.assign({},o,{body:o.body.markdown,reason:o.reason?o.reason.raw_name:void 0});return r=function(t){return 0===t.comment_count}(e)?i.modify(e,{_deleted:!0}):i.modify(e,{needs_exegesis:!0}),this.reject(e.id,{comment:a}).then(function(t){var i=t||{};_.assign(e,i.annotation||{_deleted:!0}),_.assign(n.referent,i.referent||{_deleted:!0})}).catch(function(){return r(),t.reject()})},reject:function(t,n){return e.use(o).post("/annotations/:annotation_id/reject",_.merge(n,{annotation_id:t}))},pin_to_profile:function(t){return e.use(o).put("/annotations/:annotation_id/pin_to_profile",{annotation_id:t})},unpin_from_profile:function(t){return e.use(o).put("/annotations/:annotation_id/unpin_from_profile",{annotation_id:t})},toggle_cosign:function(t,n){return e.use(o).put("/annotations/:annotation_id/".concat(n?"":"un","cosign"),{annotation_id:t})},clear_votes:function(t){return e.delete("/votes",{annotation_id:t})},report_as_abusive:function(t){return e.post("/annotations/:annotation_id/report_as_abusive",{annotation_id:t})},load_versions:function(t){return e.use(o).returning("versions").get("/annotations/:annotation_id/versions",{annotation_id:t})},revert_to_version:function(t,n){return e.use(o).returning("annotation").put("/annotations/:annotation_id/version",{annotation_id:t,version_id:n})},propose_edit:function(t){var n={body:{markdown:t._editing.markdown},edit_note:t._editing.edit_note};return e.use(o).returning("annotation_edit").post("/annotations/:annotation_id/edits",{annotation_id:t.id,annotation:n})},proposed_edits:function(t){return e.use(o).returning("annotation_edits").get("/annotations/:annotation_id/edits",{annotation_id:t})},merge_edit:function(t){return a("merge",t)},reject_edit:function(t){return a("reject",t)}}}])},function(t,e){angular.module("genius").factory("AnswerClient",["$http","$q","AppConfig","Session","Reversible","Markdown",function(t,e,n,i,r,o){var a=function(t){var n=new Error(t.data.meta.message);return _.assign(n,_.pick(t,"status","statusText")),e.reject(_.assign(n,t.data.response))};return{save:function(s,c){var l,u,d,p,f={body:{markdown:s._editing.markdown},pin_question:s._editing.pin_question};i.has_permission("update_answer_source",c.question)&&(f.answer_source=s.answer_source),s.id?(u=s.id,d={answer:f},p={text_format:i.user_signed_in?"html,markdown":"html"},l=t.put("".concat(n.api_root_url,"/answers/").concat(u),d,{params:p}).then(function(t){return t.data.response}).catch(function(t){return a(t)})):l=c.question.id?function(e,r){var o={text_format:i.user_signed_in?"html,markdown":"html"};return t.post("".concat(n.api_root_url,"/questions/").concat(e,"/answers"),r,{params:o}).then(function(t){return t.data.response}).catch(function(t){return a(t)})}(c.question.id,{answer:f}):function(e,r){var o={text_format:i.user_signed_in?"html,markdown":"html"};return r=_.assign({},r,{question:_.pick(e,["body","questionable_id","questionable_type","default_key","state"])}),t.post("".concat(n.api_root_url,"/answers"),r,{params:o}).then(function(t){return t.data.response}).catch(function(t){return a(t)})}(c.question,{answer:f});var h=r.modify(s,{"body.html":o.to_html(s._editing.markdown),new:!1}),m={};f.pin_question&&(m.state="pinned");var g=r.modify(c.question,m);return l.then(function(t){return _.assign(c.question,_.omit(t.question,"answer")),_.assign(s,t.answer)}).catch(function(t){return h(),g(),e.reject(t)})},destroy:function(i,o){var s=i.id;if(!s)return e.reject(new Error("Answer hasn't been saved yet."));var c=r.modify(o.question.current_user_metadata,{permissions:o.question.current_user_metadata.permissions.concat("add_answer")});return t.delete("".concat(n.api_root_url,"/answers/").concat(s)).then(function(t){return _.assign(o.question,_.omit(t.question,"answer")),t.data.response}).catch(function(t){return c(),a(t)})}}}])},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return c(t,arguments,u(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),l(i,t)})(t)}function c(t,e,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&l(r,n.prototype),r}).apply(null,arguments)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}angular.module("genius").factory("ApiClient",["$http","AppConfig","PromiseQueue","BeforeUnloadCheck",function(t,e,n,r){var c=new n;r.add(function(){return!c.is_empty()});var p=function(t){var e=_.isObject(t)&&_.isObject(t.data)&&_.has(t.data,"meta")&&_.has(t.data,"response"),n=_.isObject(t)&&204===t.status&&""===t.data;return e||n},f=function t(e){d(this,t),_.assign(this,e.data.response)},h=function(t){function e(t,n){var i;return d(this,e),(i=a(this,u(e).call(this,t))).status=n.status,i.response=n.data,i.stack=Error().stack,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,s(Error)),o(e,[{key:"name",get:function(){return"ApiError"}}]),e}(),m=function(t){return function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!_.startsWith(n,"/"))throw Error("Path must start with /");i=_.clone(i),n=function(t,e){return t.split("/").map(function(n){return n.replace(/^:(\w+)$/,function(n,i){if(_.has(e,i)&&null!=e[i]){var r=e[i];return Reflect.deleteProperty(e,i),r}throw Error("Missing param '".concat(i,"' for API path '").concat(t,"'"))})}).join("/")}(e.api_root_url+n,i);var r="get"===t||"delete"===t?{params:i}:{data:i};return this.extend({method:t,url:n}).merge(r).send()}};return function(){function e(t,n){d(this,e),this._config=t,this._transform=n}return o(e,[{key:"_update",value:function(t){var n=_.assign({config:this._config,transform:this._transform},t);return new e(n.config,n.transform)}},{key:"_is_get",value:function(){return"get"===this._config.method}},{key:"extend",value:function(t){return this._update({config:_.assign({},this._config,t)})}},{key:"merge",value:function(t){return this._update({config:_.merge({},this._config,t)})}},{key:"use",value:function(t){return _.tap(t(this),function(t){if(!(t instanceof e))throw TypeError("Result of ApiRequest#use() must be an ApiRequest")})}},{key:"set_param",value:function(t,e){return this.merge({params:i({},t,e)})}},{key:"transform",value:function(t){return this._update({transform:_.flow(this._transform,t)})}},{key:"returning",value:function(t){return this.transform(_.property(t))}},{key:"send",value:function(){var e=this;return(this._is_get()?t(this._config):c.add(function(){return t(e._config)})).catch(function(t){var e=_.isObject(t.data)?function(t){if(p(t)){var e=t.data.meta.message||t.statusText,n=new h(e,t);return _.assign(n,{response:t.data.response})}return new h(t.statusText,t)}(t):new h(t.statusText,t);return Promise.reject(e)}).then(function(t){return p(t)?Promise.resolve(new f(t)):Promise.reject(new h("Invalid response",t))}).then(this._transform)}},{key:"then",value:function(t,e){return this._response=this._response||this.send(),this._response.then(t,e)}},{key:"get",get:function(){return m("get")}},{key:"post",get:function(){return m("post")}},{key:"put",get:function(){return m("put")}},{key:"delete",get:function(){return m("delete")}}],[{key:"empty",value:function(){return new e({},_.identity)}}]),e}().empty()}])},function(t,e){angular.module("genius").constant("AppConfig",window.APP_CONFIG)},function(t,e,n){"use strict";n.r(e);var i=n(15),r=n.n(i);function o(t,e,n,i,r,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,r)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){o(a,i,r,s,c,"next",t)}function c(t){o(a,i,r,s,c,"throw",t)}s(void 0)})}}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("AppleAudioPlayback",["$interval","$rootScope",function(t,e){return function(){function n(i){var o=this,s=i.instance,c=i.external_song,l=c.provider_id,u=c.duration_ms;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.instance=s,this.apple_id=l,this.duration=u,this.player=s.player,this.type="apple_audio",this.label="Apple Music",this.userHasRequestedPlayback=!1,this.emitter=e.$new(),t(function(){return o.emitter.$emit("state",o.state)},50),this.instance.addEventListener("playbackTimeDidChange",a(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o.player.currentPlaybackTime!==o.player.currentPlaybackDuration){t.next=5;break}return t.next=3,o.player.pause();case 3:return t.next=5,o.player.seekToTime(0);case 5:case"end":return t.stop()}},t)}))),this.instance.setQueue({song:this.apple_id}).then(function(){return o.preloadAudio()})}var i,o,c;return i=n,(o=[{key:"$on",value:function(t,e){return this.emitter.$on(t,e)}},{key:"preloadAudio",value:function(){var t=this;if(this.instance.isAuthorized){return this.player._currentPlayer.audio.addEventListener("playing",function e(){t.userHasRequestedPlayback||t.player.pause(),t.player._currentPlayer.audio.removeEventListener("playing",e)}),this.player.play()}}},{key:"playing",get:function(){return this.player.isPlaying}},{key:"position",get:function(){return 1e3*this.player._currentPlayer.audio.currentTime}},{key:"loading",get:function(){return!(this.player.nowPlayingItem&&isFinite(this.player._currentPlayer.audio.duration))}},{key:"state",get:function(){return{position:this.position,percentage:this.position/this.duration,time_elapsed:this.position,time_remaining:this.duration-this.position,is_loading:this.loading,is_playing:this.playing}}},{key:"api",get:function(){var t=this;return{play:function(){return t.userHasRequestedPlayback=!0,t.instance.isAuthorized?t.player.play():t.instance.authorize().then(t.player.play)},pause:function(){return t.player.pause()},playpause:function(){return t.playing?t.api.pause():t.api.play()},seek_to:function(e){return t.api.seek_to_position(t.duration*e)},seek_to_position:function(e){return t.playing?t.player.seekToTime(e/1e3):t.api.play().then(function(){return t.player.seekToTime(e/1e3)})}}}}])&&s(i.prototype,o),c&&s(i,c),n}()}])},function(t,e){angular.module("genius").factory("AppleMatchEvaluationsClient",["ApiClient",function(t){return{submit:function(e,n){return t.put("/apple_match_evaluations/".concat(e),{evaluation:n})},skip:function(e){return t.put("/apple_match_evaluations/".concat(e),{evaluation:{checked_out_at:null}})}}}])},function(t,e){angular.module("genius").factory("application_bootstrap",["$q",function(t){var e=!1,n=t.defer(),i=[];return{before:function(t){e||t()},after:function(t){if(e)return t();i.push(n.promise.then(t))},done:function(){return e=!0,n.resolve(),t.all(i)}}}])},function(t,e){angular.module("genius").factory("ArticleClient",["$http","AppConfig","ApiClient",function(t,e,n){return{index:function(n){return t.get("".concat(e.api_root_url,"/articles"),{params:n}).then(function(t){return t.data.response})},delete:function(t){return n.delete("/articles/".concat(t))},update_featured_slots:function(t){return n.put("/articles/featured_slots",{featured_articles:t})}}}])},function(t,e){angular.module("genius").factory("ArtistClient",["$http","AppConfig","ApiClient",function(t,e,n){var i={autocomplete_api_endpoint:"".concat(e.api_root_url,"/artists/autocomplete"),autocomplete:function(e){return t.get(i.autocomplete_api_endpoint,{params:{q:e}}).then(function(t){return t.data.response.artists})},autocomplete_options:{minChars:2,parse:function(t){return _.map(t.response.artists,function(t){return{data:[t.name,t],value:t,result:t}})}},load:function(n){return t.get("".concat(e.api_root_url,"/artists/").concat(n)).then(function(t){return t.data.response.artist})},update:function(n,i){return t.put("".concat(e.api_root_url,"/artists/").concat(n),{artist:_.pick(i,["name","alternate_names","image_url","header_image_url","instagram_name","twitter_name","facebook_name","translation_artist"]),text_format:"html,markdown"}).then(function(t){return t.data.response.artist})},load_albums:function(n,i){return t.get("".concat(e.api_root_url,"/artists/").concat(n,"/albums"),{params:i}).then(function(t){return t.data.response})},load_leaderboard:function(n,i){return t.get("".concat(e.api_root_url,"/artists/").concat(n,"/leaderboard"),{params:i}).then(function(t){return t.data.response})},merge:function(n,i){return t.put("".concat(e.api_root_url,"/artists/").concat(n,"/merge"),{target:{name:i}}).then(function(t){return t.data.response})},get_slug:function(t){return _(this.get_path(t).split("/")).last()},get_path:function(t){return new URL(t.url).pathname},activity_line_items:function(n,i){return t.get("".concat(e.api_root_url,"/artists/").concat(n,"/activity_stream/line_items"),{params:i}).then(function(t){return t.data.response})},contribution_opportunities:function(t,e){return n.get("/artists/:id/contribution_opportunities",_.merge(e,{id:t,text_format:"html,markdown"}))}};return i}])},function(t,e){angular.module("genius").factory("AssetClient",["$http",function(t){return{remove:function(e){return t.post("/assets/remove",{asset_url:e})}}}])},function(t,e){angular.module("genius").factory("AsyncAnalytics",["$document","$q","$immediate","AnalyticsConfig","Librato","Tracking","wait_for_global",function(t,e,n,i,r,o,a){var s="dimension2",c="dimension3",l="dimension4",u="dimension5",d=function(t){return a("_sf_async_config").then(function(e){return Object.assign(e,t.chartbeat),a("pSUPERFLY")}).then(function(e){e.virtualPage(t.path,t.title)})},p=function(t){return a("ga").then(function(e){return e(function(){e("set","page",t.path),e("set",s,t.controller_and_action),e("set",c,t.tracking_data["Primary Tag"]),e("set",l,String(t.tracking_data["Music?"])),e("set",u,"true"),e("send","pageview")})})},f=function(t){r.set_page_type(t.page_type)},h=function(t){o.reset_counters(),o.register({fast_navigating:!0}),o.set_tacking_data(t.tracking_data.reduce(function(t,e){var n=e.key,i=e.value;return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,i))},{}))};return{on_navigation:function(t){if(this.remove_social_metadata(),!i.enabled)return e.when();var r=[d(t),a("COMSCORE").then(function(t){t.beacon({c1:"2",c2:i.comscore_client_id})}),p(t),f(t),e.all({__qc:a("__qc"),_qevents:a("_qevents"),quantserve:a("quantserve")}).then(function(t){var e=t.__qc,r=t._qevents,o=t.quantserve;e.qpixelsent=[],o(),n(function(){return r.push({qacct:i.quantcast_account})})})];return i.mixpanel_enabled&&r.push(h(t)),e.all(r)},remove_social_metadata:_.once(function(){return _.filter(t.prop("head").querySelectorAll("meta"),function(t){return(t.getAttribute("property")||"").match(/^(og|fb|twitter):/)}).forEach(function(t){return t.remove()})})}}])},function(t,e){angular.module("genius").factory("Attempt",["$window","I18n",function(t,e){return{close_form:function(n,i){n?i():t.confirm(e.t("editing.dirty_unload_confirm_box"))&&i()},admin_action:function(e,n){t.confirm(n)&&e()}}}])},function(t,e){angular.module("genius").factory("AuthenticationClient",["ApiClient","signed_out_created_content",function(t,e){return{sign_in:function(e){return t.post("/sessions",{user:e})},sign_up:function(n){return t.post("/users",{user:n,signed_out_created_content:e.get()}).then(function(t){return e.clear(),t})}}}])},function(t,e,n){"use strict";n.r(e);n(756);angular.module("genius").factory("Autosize",["$window",function(t){return t.autosize}])},function(t,e,n){(function(e){t.exports=e.autosize=n(757)}).call(this,n(1))},function(t,e,n){var i,r,o;
/*!
	Autosize 3.0.15
	license: MIT
	http://www.jacklmoore.com/autosize
*/r=[e,t],void 0===(o="function"==typeof(i=function(t,e){"use strict";var n,i="function"==typeof Set?new Set:(n=[],{has:function(t){return Boolean(n.indexOf(t)>-1)},add:function(t){n.push(t)},delete:function(t){n.splice(n.indexOf(t),1)}}),r=function(t){return new Event(t)};try{new Event("test")}catch(t){r=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function o(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=r("autosize:destroy");t.dispatchEvent(e)}}function a(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=r("autosize:update");t.dispatchEvent(e)}}var s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((s=function(t){return t}).destroy=function(t){return t},s.update=function(t){return t}):((s=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return function(t){var e=void 0===arguments[1]?{}:arguments[1],n=e.setOverflowX,o=void 0===n||n,a=e.setOverflowY,s=void 0===a||a;if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!i.has(t)){var c,l=null,u=null,d=t.clientWidth,p=function(){t.clientWidth!==d&&m()},f=function(e){window.removeEventListener("resize",p,!1),t.removeEventListener("input",m,!1),t.removeEventListener("keyup",m,!1),t.removeEventListener("autosize:destroy",f,!1),t.removeEventListener("autosize:update",m,!1),i.delete(t),Object.keys(e).forEach(function(n){t.style[n]=e[n]})}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",f,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",m,!1),window.addEventListener("resize",p,!1),t.addEventListener("input",m,!1),t.addEventListener("autosize:update",m,!1),i.add(t),o&&(t.style.overflowX="hidden",t.style.wordWrap="break-word"),c=window.getComputedStyle(t,null),u=c.overflowY,"vertical"===c.resize?t.style.resize="none":"both"===c.resize&&(t.style.resize="horizontal"),l="content-box"===c.boxSizing?-(parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)):parseFloat(c.borderTopWidth)+parseFloat(c.borderBottomWidth),isNaN(l)&&(l=0),m()}function _(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,u=e,s&&(t.style.overflowY=e),h()}function h(){var e=window.pageYOffset,n=document.body.scrollTop,i=t.style.height;t.style.height="auto";var r=t.scrollHeight+l;0!==t.scrollHeight?(t.style.height=r+"px",d=t.clientWidth,document.documentElement.scrollTop=e,document.body.scrollTop=n):t.style.height=i}function m(){var e=t.style.height;h();var n=window.getComputedStyle(t,null);if(n.height!==t.style.height?"visible"!==u&&_("visible"):"hidden"!==u&&_("hidden"),e!==t.style.height){var i=r("autosize:resized");t.dispatchEvent(i)}}}(t,e)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],o),t},s.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],a),t}),e.exports=s})?i.apply(e,r):i)||(t.exports=o)},function(t,e){angular.module("genius").factory("BeforeUnloadCheck",["$window","I18n",function(t,e){var n=[];return t.onbeforeunload=function(){if(_.some(n,function(t){return t()}))return e.t("editing.dirty_unload")},{add:function(t){n.push(t)},remove:function(t){_.remove(n,function(e){return e===t})}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("Bindings",[function(){var t=function(t,e){var n=t[0];"?"===t[1]&&(n+="?");var i=t.slice(n.length)||e,r={"@":function(){return this.$attrs[i]},"<":function(){return this.$scope.$eval(this.$attrs[i])},"&":function(){var t=this;return function(e){return t.$scope.$eval(t.$attrs[i],e)}},"&?":function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=this;if(!_.isUndefined(this.$attrs[i]))return function(e){return t.$scope.$eval(t.$attrs[i],e)}})}[n];if(!r)throw new Error("invalid attribute specification passed to Bindings service: '".concat(t,"'"));return r};return{resolver:function(e){var i=function(){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.$scope=t,this.$attrs=e,this.assign_to(this)}var r,o,a;return r=i,(o=[{key:"assign_to",value:function(n){var i=this;_.each(e,function(e,r){Reflect.defineProperty(n,r,{get:t(e,r).bind(i)})})}}])&&n(r.prototype,o),a&&n(r,a),i}();return function(t,e){return new i(t,e)}}}}])},function(t,e,n){"use strict";n.r(e);n(120);angular.module("genius").factory("Bowser",["$window",function(t){return t.bowser}])},function(t,e){angular.module("genius").factory("BrandedChartClient",["ApiClient",function(t){return{songs:function(e){return t.returning("songs").get("/branded_charts/:id/songs",{id:e,text_format:"html"})}}}])},function(t,e){angular.module("genius").factory("Brightcove",["$q","AppConfig","getScript","wait_for_global",function(t,e,n,i){var r=/brightcove_(.*)_web_player_id/,o=t.defer(),a=function(r){return o.promise.then(function(){return n(function(t){return"//players.brightcove.net/"+e.brightcove_account_id+"/"+t+"_default/index.min.js"}(r),{cache:!0})}).then(function(){return t.all({videojs:i("videojs"),bc:i("bc")})})},s={account_id:e.brightcove_account_id,load_api:function(t){return o.resolve(),a(t)}};return _(e).keys().map(function(t){return t.match(r)}).filter().each(function(t){s[t[1]+"_player_id"]=e[t[0]]}),s}])},function(t,e,n){"use strict";n.r(e);n(146);angular.module("genius").value("Channel",window.Channel)},function(t,e){angular.module("genius").factory("ChartClient",["ApiClient",function(t){return{get:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.get("/:model/chart",_.assign({model:e},n))},state:function(e,n){return t.get("/:model/:id/charts/state",{model:e,id:n})},exclude:function(e,n){return t.put("/:model/:id/charts/exclude",{model:e,id:n})},unexclude:function(e,n){return t.put("/:model/:id/charts/unexclude",{model:e,id:n})}}}])},function(t,e,n){"use strict";n.r(e);n(766);angular.module("genius").factory("classnames",["$window",function(t){return t.classNames}])},function(t,e,n){(function(e){t.exports=e.classNames=n(767)}).call(this,n(1))},function(t,e,n){var i;
/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var i=arguments[e];if(i){var o=typeof i;if("string"===o||"number"===o)t.push(i);else if(Array.isArray(i))t.push(r.apply(null,i));else if("object"===o)for(var a in i)n.call(i,a)&&i[a]&&t.push(a)}}return t.join(" ")}t.exports?t.exports=r:void 0===(i=function(){return r}.apply(e,[]))||(t.exports=i)}()},function(t,e,n){"use strict";n.r(e);n(769);angular.module("genius").factory("Clipboard",["$window",function(t){return t.Clipboard}])},function(t,e,n){(function(e){t.exports=e.Clipboard=n(770)}).call(this,n(1))},function(t,e,n){var i;t.exports=function t(e,n,r){function o(s,c){if(!n[s]){if(!e[s]){var l="function"==typeof i&&i;if(!c&&l)return i(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return o(n||t)},d,d.exports,t,e,n,r)}return n[s].exports}for(var a="function"==typeof i&&i,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=function(t,e){for(;t&&t.nodeType!==i;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},{}],2:[function(t,e,n){var i=t("./closest");e.exports=function(t,e,n,r,o){var a=function(t,e,n,r){return function(n){n.delegateTarget=i(n.target,e),n.delegateTarget&&r.call(t,n)}}.apply(this,arguments);return t.addEventListener(n,a,o),{destroy:function(){t.removeEventListener(n,a,o)}}}},{"./closest":1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},{}],4:[function(t,e,n){var i=t("./is"),r=t("delegate");e.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!i.string(e))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(i.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}(t,e,n);if(i.string(t))return function(t,e,n){return r(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},{"./is":3,delegate:2}],5:[function(t,e,n){e.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(t),i.removeAllRanges(),i.addRange(r),e=i.toString()}return e}},{}],6:[function(t,e,n){function i(){}i.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function r(){i.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,a=i.length;o<a;o++)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}},e.exports=i},{}],7:[function(t,e,n){!function(i,r){if(void 0!==n)r(e,t("select"));else{var o={exports:{}};r(o,i.select),i.clipboardAction=o.exports}}(this,function(t,e){"use strict";var n,i=(n=e)&&n.__esModule?n:{default:n},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolveOptions(e),this.initSelection()}return o(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":r(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=a})},{select:5}],8:[function(t,e,n){!function(i,r){if(void 0!==n)r(e,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var o={exports:{}};r(o,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=o.exports}}(this,function(t,e,n,i){"use strict";var r=s(e),o=s(n),a=s(i);function s(t){return t&&t.__esModule?t:{default:t}}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.resolveOptions(n),i.listenClick(t),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),l(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===c(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,a.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new r.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return d("action",t)}},{key:"defaultTarget",value:function(t){var e=d("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return d("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}(o.default);function d(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}t.exports=u})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)},function(t,e){angular.module("genius").factory("CommentClient",["$http","$q","AppConfig","Markdown","signed_out_created_content",function(t,e,n,i,r){return{load:function(e,i,r){return t.get("".concat(n.api_root_url,"/").concat(e,"/").concat(i,"/comments"),{params:r}).then(function(t){return t.data.response})},destroy:function(e){return t.delete("".concat(n.api_root_url,"/comments/").concat(e))},create:function(o,a,s){s._deleted=!1;var c=_.assign({},s,{body:s.body.markdown,reason:s.reason?s.reason.raw_name:void 0});return s.body.html=i.to_html(c.body),t.post("".concat(n.api_root_url,"/").concat(o,"/").concat(a,"/comments?text_format=html"),{comment:c}).then(function(t){return _.assign(s,t.data.response.comment),r.add("comments",s.id),s.anonymous_author&&(s.anonymous_author.email=s.email),s}).catch(function(){return s._deleted=!0,e.reject()})},change_state:function(e,i){var r={state_event:i};return t.put("".concat(n.api_root_url,"/comments/").concat(e,"/change_state"),r)}}}])},function(t,e){angular.module("genius").factory("ContributionOpportunityAssignmentClient",["ApiClient",function(t){return{update:function(e,n){return t.put("/contribution_opportunity_assignments/:id",{id:e,contribution_opportunity_assignment:n})}}}])},function(t,e){angular.module("genius").factory("ConversationClient",["ApiClient",function(t){var e=t.set_param("text_format","html");return{latest:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.returning("conversations").get("/conversations",{page:t.page||1})},get:function(t){return e.returning("conversation").get("/conversations/:conversation_id",{conversation_id:t})},mark_read:function(t){return e.returning("conversation").post("/conversations/:conversation_id/mark_read",{conversation_id:t})},with_user:function(t){return e.returning("conversation").put("/conversations/with_user",{user_id:t})}}}])},function(t,e){angular.module("genius").factory("Cookies",[function(){return{get:function(t){return $.cookie(t)},getObject:function(t){var e=$.cookie(t);if(e)return JSON.parse(e)},getAll:function(){return $.cookie()},put:function(t,e,n){return $.cookie(t,e,n)},putObject:function(t,e,n){return $.cookie(t,JSON.stringify(e),n)},remove:function(t,e){return $.removeCookie(t,e)}}}])},function(t,e){angular.module("genius").factory("CoverArtClient",["ApiClient","Session",function(t,e){return{index:function(n,i){var r={text_format:e.user_signed_in?"html,markdown":"html"};return r["".concat(n,"_id")]=i,t.returning("cover_arts").get("/cover_arts",r)},create:function(e,n,i){var r={cover_art:i};return r["".concat(e,"_id")]=n,t.post("/cover_arts",r)},update:function(e,n){return t.put("/cover_arts/".concat(e),{cover_art:n})},destroy:function(e){return t.delete("/cover_arts/".concat(e))},move_between:function(e,n){return t.put("/cover_arts/".concat(e,"/move_between"),n)}}}])},function(t,e){angular.module("genius").factory("CursoredDataFeed",[function(){return function(){return function t(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"next_cursor";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cursor_name=a,this.next_cursor=o,this.params=_.clone(r),this.next=function(){var t={};return t[i.cursor_name]=i.next_cursor,e(_.assign(t,i.params)).then(function(t){return i.next_cursor=t[i.cursor_name],t[n]})},this.has_next=function(){return i.next_cursor||void 0===i.next_cursor},this.reset=function(){i.next_cursor=o}}}()}])},function(t,e){angular.module("genius").factory("CustomAppNotificationClient",["$http",function(t){return{send_preview_notification:function(e){return t.post("/custom_app_notifications",{custom_app_notification:_.assign(e,{preview:!0})})}}}])},function(t,e){angular.module("genius").factory("CustomPerformanceRoleClient",["$http","AppConfig",function(t,e){return{autocomplete_api_endpoint:"".concat(e.api_root_url,"/custom_performance_roles/autocomplete"),autocomplete:function(e){return t.get(this.autocomplete_api_endpoint,{params:{q:e}}).then(function(t){return t.data.response})},autocomplete_options:{minChars:2,parse:function(t){return _.map(t.response.custom_performance_roles,function(t){var e=t.label;return{data:[e],value:e,result:e}})}}}}])},function(t,e){angular.module("genius").factory("DateTools",[function(){return{days_to_ms:function(t){var e=new Date;return e.setTime(e.getTime()+864e5*t),e}}}])},function(t,e){angular.module("genius").factory("DiscussionClient",["ApiClient",function(t){return{forum_posts:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.get("/discussions/".concat(e,"/forum_posts"),_.defaults(n,{text_format:"html"}))}}}])},function(t,e){angular.module("genius").factory("EagerLoader",function(){var t=function(){this.data={},this.listeners={}};return t.prototype={loaded:function(t,e){this.listeners[t]?this.listeners[t].forEach(function(t){t(e)}):this.data[t]=e},listen_for:function(t,e){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e),this.data[t]&&(e(this.data[t]),delete this.data[t])}},t})},function(t,e){angular.module("genius").factory("EventEmitter",["$rootScope",function(t){return function(){this.proxy_emitter=t.$new(),this.emit=function(t,e){this.proxy_emitter.$emit(t,e)},this.on=function(t,e){return this.proxy_emitter.$on(t,function(t,n){t.stopPropagation(),t.preventDefault(),e(n)}),this}}}])},function(t,e){angular.module("genius").factory("Facebook",["AppConfig","$window","$q","getScript",function(t,e,n,i){var r=_.once(function(){var r=n.defer();return e.fbAsyncInit=function(){e.FB.init({appId:t.facebook_app_id,version:"v".concat(t.facebook_opengraph_api_version)}),r.resolve(e.FB)},i("//connect.facebook.net/en_US/sdk.js",{cache:!0}),r.promise});return $(r),{share:function(t){r().then(function(e){e.ui({method:"share",href:t})})},process_embeds:function(t){r().then(function(e){e.XFBML.parse(t)})}}}])},function(t,e){angular.module("genius").factory("FeedbackClient",["ApiClient",function(t){return{post_feedback:function(e){return t.post("/feedback",{feedback:{body:e}})}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("Filepicker",["$window","AppConfig","$q",function(t,e,i){var r=t.filepicker;r.setKey(e.filepicker_api_key);var o=["image/jpeg","image/png","image/gif"],a={policy:e.filepicker_policy,signature:e.filepicker_signature},s=["IMAGE_SEARCH","COMPUTER","URL"],c="IMAGE_SEARCH";return function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.allowed_mime_types=e.allowed_mime_types||o,this.services=e.services||s,this.open_to=e.open_to||c}var l,u,d;return l=t,(u=[{key:"allows_mime_type",value:function(t){return this.allowed_mime_types.includes((t||"").toLowerCase())}},{key:"_store",value:function(t,e){var n=this,o=angular.extend(angular.copy(a),e);o.container=t.container;var s=i.defer();return r.store(t,o,function(t){return s.resolve(n._construct_s3_url(t.key))},function(t){return s.reject(t)},function(t){return s.notify(t)}),s.promise}},{key:"_read_blob",value:function(t){var e=i.defer(),n=new FileReader;return n.onloadend=function(){return e.resolve(n.result)},n.readAsBinaryString(t),e.promise}},{key:"_construct_s3_url",value:function(t){return"https://s3.amazonaws.com/".concat(e.filepicker_s3_image_bucket,"/").concat(encodeURIComponent(t))}},{key:"store",value:function(t,e){var n=this;return t instanceof Blob?this._read_blob(t).then(function(t){return n._store(btoa(t),angular.extend(e,{base64decode:!0}))}):this._store(t,e)}},{key:"pick",value:function(t){var e=i.defer(),n=angular.extend(angular.copy(a),{mimetypes:this.allowed_mime_types,services:this.services,openTo:this.open_to},t);return r.pick(n,function(t){r.stat(t.url,angular.extend(angular.copy(a),{width:!0,height:!0}),function(n){return e.resolve({blob:t,dimensions:n})})}),e.promise}},{key:"pick_and_store",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.defer(),s=angular.extend(a,{mimetypes:this.allowed_mime_types,services:this.services,openTo:this.open_to},t);return r.pickAndStore(s,n,function(t){return o.resolve(e._construct_s3_url(t[0].key))},function(t){return o.reject(t)}),o.promise}}])&&n(l.prototype,u),d&&n(l,d),t}()}])},function(t,e){angular.module("genius").factory("FollowClient",["AppConfig","$http",function(t,e){return{set_following:function(n,i,r){return e.post("".concat(t.api_root_url,"/").concat(n,"s/").concat(i,"/").concat(r?"follow":"unfollow")).then(function(t){return t.data.response})}}}])},function(t,e){angular.module("genius").factory("getScript",["$q",function(t){return function(e,n){return t.when($.ajax(_.assign({url:e,type:"GET",dataType:"script"},n)))}}])},function(t,e){angular.module("genius").factory("GlobalErrorBus",["$rootScope",function(t){return t.$new("isolate")}])},function(t,e){angular.module("genius").factory("GlobalErrorInterceptor",["GlobalErrorBus","$q",function(t,e){return{responseError:function(n){if(429===n.status){var i=_.get(n,"data.response.message.html")||"<h1>You hit a rate limit!</h1>";t.$emit("global_error",i)}return e.reject(n)}}}])},function(t,e){angular.module("genius").factory("GlobalPageStateBus",["$rootScope",function(t){return t.$new("isolate")}])},function(t,e){angular.module("genius").factory("GlobalRefs",["$window",function(t){var e={global_message:".global_messages",cloudflare_unavailable_alert:"#cf_alert_div"};return{get_element:function(n){return t.$(e[n])}}}])},function(t,e){angular.module("genius").factory("Google",["getScript","$window",function(t,e){return{setup:_.once(function(){return t("https://apis.google.com/js/platform.js",{cache:!0})}),refresh_youtube_subscribe_in:function(t){e.gapi.ytsubscribe.go(t)}}}])},function(t,e){angular.module("genius").factory("HtmlConstants",["$window",function(t){var e={top_level_block_containers:t.TOP_LEVEL_BLOCK_CONTAINERS,top_level_stand_alone_blocks:t.TOP_LEVEL_STANDALONE_BLOCKS};return e.top_level_block_containers_regexp=new RegExp("</(".concat(e.top_level_block_containers.join("|"),")>\\s*"),"gi"),e.top_level_stand_alone_blocks_regexp=new RegExp("</(".concat(e.top_level_stand_alone_blocks.join("|"),")>\\s*"),"gi"),e}])},function(t,e){angular.module("genius").factory("I18n",["$window",function(t){return t.I18n}])},function(t,e){angular.module("genius").factory("IdentityClient",["$http","ApiClient","AppConfig","$q",function(t,e,n,i){return{destroy:function(e){return t.delete("".concat(n.api_root_url,"/identities/").concat(e),{},{params:{text_format:"html,markdown"}}).then(function(t){return t.data.response}).catch(function(t){return function(t){var e=new Error(t.data.meta.message);return _.assign(e,_.pick(t,"status","statusText")),i.reject(_.assign(e,t.data.response))}(t)})},spotify_credentials:function(){return e.returning("credentials").get("/identities/spotify_credentials")}}}])},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}angular.module("genius").factory("ImageTransform",["AppConfig","initial_image_urls",function(t,e){var i=new RegExp("^".concat(t.sizies_base_url)),r=["images.genius.com","images.rapgenius.com"],o=/\.(\d+).(\d+).\d+\.\w*$/,a=_(e).toArray().filter(function(t){return i.test(t)}).map(function(t){var e=n(_.takeRight(t.split("/"),2),2),i=e[0],r=e[1],o=n(i.split("x").map(function(t){return Number(t)}),2),a=o[0],s=o[1];return{src:decodeURIComponent(r),width:a,height:s,url:t}}).sortBy(function(t){return t.width*t.height}).value(),s=_.memoize(function(t){var e=c(t.original_url);e&&t.width&&!t.height&&(t.height=Math.round(t.width/e)),e&&t.height&&!t.width&&(t.width=Math.round(t.height*e));var n=t.width/t.height;return _.find(a,function(e){var i=e.src,r=e.width,o=e.height;return i===t.original_url&&r>=t.width&&o>=t.height&&Math.abs(r/o-n)<.05})}),c=function(t){var e=n(t.match(o)||[],3),i=e[0],r=e[1],a=e[2];if(i)return Number(r)/Number(a)};return{resize:function(n,i){if(n){if(e.has(n))return n;var o=new URL(n);if(!_.includes(r,o.host))return n;var c=parseInt(i.width||0),l=parseInt(i.height||0),u=s({original_url:n,width:c,height:l});if(u)return u.url;var d="".concat(t.sizies_base_url,"/").concat(c,"x").concat(l,"/").concat(encodeURIComponent(n));return a.push({src:n,width:c,height:l,url:d}),d}}}}])},function(t,e){angular.module("genius").factory("InboxClient",["Session","Pusher","ApiClient",function(t,e,n){return{get_line_item:function(e,i){var r=t.user_signed_in?"html,markdown":"html",o=e?"/inboxes/".concat(e,"/line_items/").concat(i):"/line_items/".concat(i);return n.get(o,{text_format:r}).then(function(t){return t.line_item})},line_items:function(t,e){return n.get("/inboxes/:inbox_name/line_items",{text_format:"html",timestamp_for_next_page:e,inbox_name:t}).then(function(t){return t.line_items.timestamp_for_next_page=t.timestamp_for_next_page,t.line_items})},mark_read:function(t,e){var i;if(e){i={};for(var r=0;r<e.length;r++)i[r+1]=e[r]}return n.post("/inboxes/:inbox_name/line_items/mark_read",{event_ids:i,inbox_name:t})},on_update:function(n,i){e.subscribe(t.current_user.pusher_channel,"new-".concat(n.replace(/_/g,"-"),"-event"),i),e.subscribe(t.current_user.pusher_channel,"inbox-marked-read",function(t){t.inbox===n&&i()})}}}])},function(t,e){angular.module("genius").factory("IntersectionObserver",[function(){return!("undefined"==typeof window)&&"IntersectionObserver"in window?window.IntersectionObserver:function(t,e){var n=e.shim,i=void 0===n?{}:n;this.observe=i.observe||_.noop,this.unobserve=i.unobserve||_.noop,this.disconnect=i.disconnect||_.noop}}])},function(t,e){angular.module("genius").factory("Iq",["PreloadCache","Session",function(t,e){var n=t.iq_by_event_type;return{for:function(t){var i=e.current_user.virtual_iq_event_type_map;return i&&_.has(i,t)&&(t=i[t]),_.has(n,t)?n[t]:0}}}])},function(t,e){angular.module("genius").factory("LeaderboardClient",["ApiClient",function(t){return{global:function(e){return t.get("/leaderboard",e)},for_tag:function(e,n){return t.get("/tags/:tag_id/leaderboard",_.assign({tag_id:e.id},n))}}}])},function(t,e){angular.module("genius").factory("Librato",["$http","$q","AnalyticsConfig","SessionConfig",function(t,e,n,i){return{set_page_type:function(t){this.page_type=t},measure:function(r,o){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:!0}).log&&_.get(i,"log_client_metrics")&&console.log("LIBRATO METRIC: ".concat(r," = ").concat(o)),_.get(n,"enabled")?t.post("https://".concat(n.librato_web_client_host,"/v1/metrics"),{gauges:[{name:r,value:o,source:"".concat(this.page_type,"_page")}]}):e.when()}}}])},function(t,e){angular.module("genius").factory("LinkEvents",function(){return{should_open_in_new_window_or_tab:function(t,e){return e=e||$(t.target).closest("a")[0],2===t.which||t.metaKey||t.ctrlKey||t.shiftKey||"_blank"===e.target||(n=document.getElementsByTagName("base")).length>0&&"_parent"===n[0].target&&!e.target;var n}}})},function(t,e){angular.module("genius").factory("LocalStorage",["$window",function(t){return{is_available:function(){try{var e="__storage_test__";return t.localStorage.setItem(e,e),t.localStorage.removeItem(e),!0}catch(t){return!1}},set_item:function(e,n){t.localStorage.setItem(e,JSON.stringify(n))},get_item:function(e){return JSON.parse(t.localStorage.getItem(e))},remove_item:t.localStorage.removeItem.bind(t.localStorage),safe_set_item:function(t,e){this.is_available()&&this.set_item(t,e)},safe_get_item:function(t,e){return this.is_available()?this.get_item(t):e},safe_remove_item:function(t){this.is_available()&&this.remove_item(t)}}}])},function(t,e){angular.module("genius").factory("LookupClient",["$http","AppConfig",function(t,e){return{lookup:function(n){return t.get("".concat(e.api_root_url,"/lookup"),{params:{url:n}}).then(function(t){return _(t.data.response).values().first()})}}}])},function(t,e){angular.module("genius").factory("Lyrics",["mobile_device",function(t){var e=t?"75vh":"50vh",n=function(t){return'\n    <span avoid-selection class="u-noselect">\n      <dfp-ad\n        name="'.concat(t,'"\n        class="u-display_block"\n        ad-classes="{\'dfp_unit--in_read\': $height > 1, \'u-xx_large_top_margin\': $height > 0}"\n      ></dfp-ad>\n    </span>\n  ')},i=(t?["mobile_song_medium1","mobile_song_medium2","mobile_song_medium3"]:["desktop_song_inread","desktop_song_inread2","desktop_song_inread3"]).map(function(t){return function(t){return'\n    <defer-compile\n      class="u-display_block"\n      timing-label="deferred-inread-ad-loaded-'.concat(t,'"\n      within-visibility-range="').concat(e,'">\n      ').concat(n(t),"\n    </defer-compile>\n  ")}(t)});return{prepare_for_display:function(t){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=$("<div>").html(t.replace(/\s*\n/g,"")),o=r.find("br");return e.forEach(function(t){o=_.drop(o,n),o=_.dropWhile(o,function(t){return"br"!==_.get(t,"previousSibling.nodeName","").toLowerCase()});var e=$(t),a=o.shift();a?$(a).before(e):i===t&&r.append(e)}),r.html()}(t,i,25).replace(/}}/g,"}\x3c!-- literal brace --\x3e}")}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("LyricsAnchorer",["$compile","ReferentLocator","ReferentRegistry","ReferentClient",function(t,e,i,r){var o=function(){function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.container=t.container,this.get_state=t.get_state,this.scope=t.scope,this.song=t.song}var s,c,l;return s=o,(c=[{key:"construct_referent",value:function(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return r.create_referent({song:_.pick(this.song,["id","updated_by_human_at"]),referent:s,community:!!o.community}).then(function(r){_.assign(r.annotations[0],{new:!0,_editing:{_form_visible:!0}}),i.preload_insert(r);var o=a(r.id);return o.html(e.extractContents()),e.insertNode(o[0]),t(o)(n.scope),i.register(r),r})}},{key:"create_referent",value:function(t,e){return this.construct_referent(t,e,this.calculate_referent_location(t))}},{key:"create_image_referent",value:function(t,e,n){var i=t.src;return this.construct_referent(e,n,{image_url:i,occurrence:this.get_occurrence_in_container_among('img[src="'.concat(i,'"]'),t)})}},{key:"calculate_referent_location",value:function(t){return e.calculate_referent_location(t,this.container[0])}},{key:"get_occurrence_in_container_among",value:function(t,e){return this.container.find(t).index(e)+1}}])&&n(s.prototype,c),l&&n(s,l),o}(),a=function(t){return $("<a>").attr("href","#").attr("class","referent").attr("ng-click","open()").attr("prevent-default-click","").attr("data-id","new").attr("on-hover-with-no-digest","set_current_hover_and_digest(hover ? fragment_id : undefined)").attr("annotation-fragment","'".concat(t,"'")).attr("classification","new")};return o}])},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}angular.module("genius").factory("LyricsEditProposal",["LyricsEditing","diff_match_patch","patch_structured_text","AppConfig",function(t,e,i,r){var o=new e;return o.Match_Threshold=r.dmp_match_threshold,o.Patch_DeleteThreshold=r.dmp_match_threshold,{diff:function(t,e){return o.diff_main(t,e)},apply_patches:function(t,e){var r=n("plain_text"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).edit_format?i(t,e,{dmp:o}):o.patch_apply(t,e),2);return{patched:r[0],success:r[1]}},make_patches:_.memoize(function(t){return o.patch_make(t)}),pretty_diff:_.memoize(function(t){var e=_.cloneDeep(t);return o.diff_cleanupSemantic(e),o.diff_prettyHtml(e).replace(/&para;/gm,"")}),lyrics_diffs_for_line_item_detail:function(e){var n=this;if("user_edited_the_lyrics_of_song"===e.strategy)return _.map(e.metadata,function(e){return{before:t.prepare_lyrics_for_editing(e.before).markdown,after:t.prepare_lyrics_for_editing(e.after).markdown}});var i=function(t,e){var i=n.make_patches(e.diff);return n.apply_patches(i,t,{edit_format:e.edit_format}).patched};return"lyrics_edit"===e.targets[0]._type?_.map(e.targets,function(n){var r,o;switch(e.strategy){case"user_created_lyrics_edit":switch(o=n.state,n.state){case"pending":r=n.current_lyrics_html;break;case"accepted":r=n.lyrics_before_accepted.html;break;case"rejected":case"inapplicable":r=n.lyrics_when_proposed.html}r=t.prepare_lyrics_for_editing(r).markdown;break;case"user_accepted_lyrics_edit":r=n.lyrics_before_accepted.plain;break;case"user_rejected_lyrics_edit":case"user_archived_lyrics_edit":r=n.lyrics_when_proposed.plain}var a={before:r,after:i(r,n)};return o&&_.merge(a,{state:o}),a}):null}}}])},function(t,e){angular.module("genius").factory("LyricsEditProposalClient",["ApiClient",function(t){return{lyrics_for_edit_proposal:function(e){var n=e.song_id;return t.transform(_.property("lyrics_for_edit_proposal")).get("/songs/:song_id/lyrics_for_edit_proposal",{song_id:n})},pending:function(e){var n=e.song_id;return t.transform(_.property("lyrics_edits")).get("/songs/:song_id/lyrics_edits",{song_id:n})},create:function(e){var n=e.song_id,i=e.version,r=e.edited_lyrics;return t.transform(_.property("lyrics_edit")).post("/songs/:song_id/lyrics_edits",{song_id:n,lyrics_edit:{edited_lyrics:r,before_version_number:i,edit_format:"plain_text"}})},reject:function(e){return t.post("/lyrics_edits/:id/reject",{id:e})}}}])},function(t,e,n){"use strict";n.r(e);n(810);function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").factory("LyricsEditing",["AppConfig","HtmlConstants","MarkdownHelpers","MarkdownPlaintextFinderRegex","ReferentRegistry","string_has_unmatched_parentheses","I18n",function(t,e,n,r,o,a,s){var c=["p","br","b","strong","em","i","a"],l={lyrics_html_without_referent:function(t,e){var n=$("<div>").append($(t));return n.find("[data-id='".concat(e,"']")).each(function(t,e){var n=$(e),i=n.find("img")[0]||n.text();n.replaceWith(i)}),n.html()},prepare_lyrics_for_editing:function(t){return this.lyrics_html_to_pseudo_markdown__deprecated(this.clean_up_lyrics__deprecated(t))},convert_editable_for_saving:function(t){return this.clean_up_lyrics__deprecated(this.lyrics_pseudo_markdown_to_html__deprecated(t.markdown,t.attr_hash))},prepare_lyrics_with_correction:function(t,e){if(e.referent.id){var n=$(t);return $(n.find("[data-id='".concat(e.referent.id,"']"))[e.referent.occurrence-1]).html(e.replacement.html),this.prepare_lyrics_for_editing(n[0].outerHTML)}var i=-1,o=e.referent.occurrence_in_markdown,a=this.prepare_lyrics_for_editing(t),s=r(e.original.markdown);return a.markdown=a.markdown.replace(s,function(){return++i===o?e.replacement.markdown:e.original.markdown}),a},clean_up_lyrics__deprecated:function(t){return $.trim($("<div>").append(t).find("a").each(function(){var t=$(this);if(!t.attr("data-id")&&!t.data("real-link")&&!t.hasClass("referent")){var e=new Error("Error processing lyrics for editing: detected non-referent link (".concat(t[0].outerHTML,")"));throw e.human_readable_message="Your browser's copy of the lyrics is out of sync. Try reloading the page",e}t.html().match(/<br[\s\/]?>$/i)&&(t.find("br:last").remove(),t.after("<br>"))}).end().find("#annotation_prompt").remove().end().html().replace(/<p( [^>]*)?>/gi,"").replace(/<\/p>\s*/gi,"\n\n").replace(e.top_level_block_containers_regexp,"$&\n\n").replace(e.top_level_stand_alone_blocks_regexp,"$&\n\n").replace(/\s*<br[\s\/]?>([ \t]*)\s*/gi,"\n$1"))},lyrics_html_to_pseudo_markdown__deprecated:function(t){var e={attr_hash:{}},n=$("<div>").append(t).find("a").each(function(){var t=$(this);t.find(".referent-vote_total").remove();var n=t.attr("data-id");_.isUndefined(n)?t.data("real-link")?t.replaceWith("[".concat(t.html(),"](").concat(t.attr("href"),")")):t.replaceWith(t.html()):(_.set(e.attr_hash,n,{class:t.attr("class"),"data-editorial-state":t.attr("data-editorial-state")}),t.replaceWith("[".concat(t.html(),"](").concat(n,")")))}).end().find("lyrics").removeAttr("ng-non-bindable").end();return e.markdown=_.unescape(n.find("annotatable-image").each(function(){var t=$(this),e=t.attr("src");t.replaceWith($("<img>").attr("src",e))}).end().html()),e},markdown_has_block_level_markup:function(t){return Boolean($("<div>").append(t).find(["*"].concat(i(c.map(function(t){return":not(".concat(t,")")}))).join("")).length)},html_has_block_level_markup:_.memoize(function(t){var e=l.lyrics_html_to_pseudo_markdown__deprecated(t).markdown;return l.markdown_has_block_level_markup(e)}),lyrics_pseudo_markdown_to_html__deprecated:function(e,i){i||(i={}),e=e.replace(/\n/gi,"<br>");var r=$("<div>").append(n.convert_markdown_anchors(e)).find("a").each(function(){var e=$(this);e.attr("href",$.trim(e.attr("href"))),e.attr("href").match(/^\d+$/)?e.attr("data-id",e.attr("href")).attr("href","/".concat(e.attr("data-id"))).attr(_.get(i,e.attr("data-id"),{})):!function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim();return"/"===e[0]||0===e.indexOf("http")||e.includes(t.canonical_domain)}(e.attr("href"))?e.replaceWith("[".concat(e.html(),"](").concat(e.attr("href"),")")):e.attr("target",$.isUrlInternal(e.attr("href"))?"_self":"_blank").attr("data-real-link",!0)}).end().find("lyrics").attr("ng-non-bindable",!0).end().html();return n.unescape_special_characters_escaped_by_markdown_anchor_converter(r)},backfill_angular_link_properties:function(t){var e=$("<div>").append(t).find("a[data-id]").each(function(){var t=$(this),e=Number(t.attr("data-id")),n=o.peek(e);n&&(t.attr("annotation-fragment",e),t.attr("on-hover-with-no-digest","set_current_hover_and_digest(hover ? fragment_id : undefined)"),t.attr("ng-click","open()"),t.attr("prevent-default-click",""),t.attr("classification",n.classification),t.attr("image",n.is_image),t.attr("pending-editorial-actions-count",n.pending_editorial_actions_count))}).end();return $("<div>").append(e).html()},validate_pseudo_markdown_lyrics:function(t,e,n){var i=n.is_music,r=void 0===i||i,o=[],c=$("<div>").append(e).text();if(a(c)&&o.push(s.t("lyrics.unmatched_parens_error")),r){var l=this.html_has_block_level_markup(t),u=this.markdown_has_block_level_markup(e);l&&u?o.push(s.t("lyrics.didnt_remove_block_level_html_from_music_error")):!l&&u&&o.push(s.t("lyrics.added_block_level_html_to_music_error"))}return o}};return l}])},function(t,e){
/*!
 * urlInternal - v1.0 - 10/7/2009
 * http://benalman.com/projects/jquery-urlinternal-plugin/
 * 
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
!function(t){var e,n,i,r,o,a,s,c=!1,l=window.location,u=Array.prototype.slice,d=l.href.match(/^((https?:\/\/.*?\/)?[^#]*)#?.*$/),p=d[1]+"#",f=d[2],_={};function h(t){var e=u.call(arguments,1);return function(){return t.apply(this,e.concat(u.call(arguments)))}}function m(t,e){return this.filter(":"+t+(e?"("+e+")":""))}function g(t,n,i,r){var o=r[3]||e()[(n.nodeName||"").toLowerCase()]||"";return o?!!t(n.getAttribute(o)):c}t.isUrlInternal=r=function(t){if(t&&!a(t)){if(s.test(t))return!0;if(/^(?:https?:)?\/\//i.test(t))return c;if(!/^[a-z\d.-]+:/i.test(t))return!0}},t.isUrlExternal=o=function(t){var e=r(t);return"boolean"==typeof e?!e:e},t.isUrlFragment=a=function(e){var n=(e||"").match(/^([^#]?)([^#]*#).*$/);return!(!n||"#"!==n[2]&&0!==e.indexOf(p)&&("/"===n[1]?f+n[2]!==p:/^https?:\/\//i.test(e)||0!==t('<a href="'+e+'"/>')[0].href.indexOf(p)))},t.fn.urlInternal=h(m,"urlInternal"),t.fn.urlExternal=h(m,"urlExternal"),t.fn.urlFragment=h(m,"urlFragment"),t.expr[":"].urlInternal=h(g,r),t.expr[":"].urlExternal=h(g,o),t.expr[":"].urlFragment=h(g,a),t.elemUrlAttr||(t.elemUrlAttr=function(e){return t.extend(_,e)})({a:"href",base:"href",iframe:"src",img:"src",input:"src",form:"action",link:"href",script:"src"}),e=t.elemUrlAttr,t.urlInternalHost=n=function(t){t=t?"(?:(?:"+Array.prototype.join.call(arguments,"|")+")\\.)?":"";var e=l.hostname.split(".");e.length>CANONICAL_DOMAIN_PARTS_LENGTH&&e.shift();var n=e.join("."),r=new RegExp("^"+t+"(.*)","i"),o="^(?:https?:)?//(?:(?:"+VALID_SUBDOMAINS.join("|")+").)?"+n.replace(r,t+"$1").replace(/\\?\./g,"\\.")+(l.port?":"+l.port:"")+"/";return i(o)},t.urlInternalRegExp=i=function(t){return t&&(s="string"==typeof t?new RegExp(t,"i"):t),s},n("www")}(jQuery)},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("LyricsSynchronizationClient",["$rootScope","$q","$http","AppConfig",function(t,e,i,r){var o=t.$new(),a=function(t){return _.isNumber(t)&&(t||0===t)},s=function(t,e){return _.compact([r.api_root_url,"lyrics_synchronizations",t,e]).join("/")},c=function(t){return new d(t.data.response.lyrics_synchronization)},l=function(t){var n=new Error(t.data.meta.message);return _.assign(n,_.pick(t,"status","statusText")),e.reject(_.assign(n,t.data.response))},u=function(t){return function(){this._dirty=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return _.tap(Reflect.apply(t,this,n),function(){o.$emit("edit")})}},d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_.assign(this,e)}var i,r,o;return i=t,(r=[{key:"max_timestamp_before_index",value:function(t){return _(this.lines.slice(0,t)).map("timestamp").max()||0}},{key:"min_timestamp_after_index",value:function(t){return _(this.lines.slice(t+1)).map("timestamp").compact().min()||this.duration}},{key:"timestamp_for_line_at_index",value:function(t){return-1===t?0:this.lines[t].timestamp}},{key:"line_index_for_position",value:function(t){return _.findLastIndex(this.lines,function(e){return a(e.timestamp)&&e.timestamp<t})}},{key:"next_visible_line_index_after_index",value:function(t){return _.findIndex(this.lines,function(e,n){return n>t&&!e.hidden})}},{key:"mark_dirty",get:function(){return u(_.noop)}},{key:"apply_timestamp_to_line_at_index",get:function(){return u(function(t,n){if(t<this.max_timestamp_before_index(n))throw new Error("Can't set time to earlier than a previous line");return this.lines[n].timestamp=t,this.lines.slice(n).forEach(function(e){e.timestamp<t&&(e.timestamp=null)}),e.when(this.lines[n])})}},{key:"set_line_at_index_hidden",get:function(){return u(function(t,e){_.assign(this.lines[t],{hidden:e,timestamp:null})})}},{key:"set_line_at_index_marked",get:function(){return u(function(t,e){this.lines[t].fixed=!1,this.lines[t].marked=e})}},{key:"set_line_at_index_fixed",get:function(){return u(function(t){this.lines[t].marked=!1,this.lines[t].fixed=!0})}},{key:"add_line_at_index",get:function(){return u(function(t,e){this.lines.splice(t,0,_.defaults(e||{},{added:!0,lyrics:"[Instrumental Break]",timestamp:null}))})}},{key:"remove_line_at_index",get:function(){return u(function(t){this.lines.splice(t,1)})}},{key:"all_lines_timestamped",get:function(){return _.every(this.lines,function(t){return t.hidden||a(t.timestamp)})}},{key:"all_timestamps_in_order",get:function(){return _(this.lines).map("timestamp").compact().every(function(t,e,n){return 0===e||t>n[e-1]})}},{key:"preview",get:function(){return"preview"===this.state}}])&&n(i.prototype,r),o&&n(i,o),t}();return{$on:o.$on.bind(o),get:function(t){return i.get(s(t)).then(c)},preview:function(t){return i.get(s("preview"),{params:t}).then(c).catch(l)},home:function(){return i.get(s("home")).then(function(t){var e=t.data.response.lyrics_synchronization_home;return e.checked_out=e.checked_out.map(function(t){return new d(t)}),e})},submit:function(t,n,r){return(n._dirty?this.save(n):e.when(n)).then(function(e){return i.post(s(e.id,t),_.assign(r||{},_.pick(e,"lock_version"))).then(c,l)})},submit_sync:function(t,n){var i=n.sync_and_staff_approve;return _.some(t.lines,"marked")?e.reject(new Error("Can't submit lyrics with lines still marked as incorrect")):this.submit("sync",t,{sync_and_staff_approve:i})},update_state:function(t,e){return i.put(s(e.id,"state"),{state:t}).then(c,l)},save:function(t){if(!t.all_timestamps_in_order)return e.reject(new Error("Can't save lyrics with timestamps out of order"));var n={lyrics_synchronization:t};return i.put(s(t.id),n).then(c,l)},revert_action:function(t,e){return i.post(s(e.id,"revert_action"),{action_id:t.id}).then(c,l)},skip:function(t,e){return i.post(s(e.id,"skip"),t).then(c,l)},change_song:function(t){return i.put(s(t.lyrics_synchronization_id,"song"),{song_id:t.song_id}).then(c,l)},start:function(t){return i.post(s("start"),{verb:t}).then(c,l)},set_finalized:function(t,e){return i[e?"put":"delete"]("".concat(s(t),"/finalized")).then(c,l)}}}])},function(t,e,n){"use strict";n.r(e);n(813);angular.module("genius").factory("Markdown",["$window",function(t){var e=angular.element;return{to_html:function(n){if(!n)return n;var i=new t.Attacklab.showdown.converter;n=n.replace(/(?:^|\s+)https?:\/\/(?:[a-z0-9\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)(?=$|\s+)/gim,function(t){return"\n\n![]("+e.trim(t)+")"});var r=i.makeHtml(n);return e("<div>").append(r).find("a").each(function(){var t=e(this);t.attr("href").match(/^\d+$/)&&t.attr("href","/"+t.attr("href"))}).end().html()}}}])},function(t,e,n){(function(e){t.exports=e.Attacklab=n(814)}).call(this,n(1))},function(t,e){var n=n||{};n.showdown=n.showdown||{},n.showdown.converter=function(){var t,e,n,i=0;this.makeHtml=function(i){if(null!==i)return t=new Array,e=new Array,n=new Array,i=(i=(i=(i=i.replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"),i=(i=O(i="\n\n"+i+"\n\n")).replace(/^[ \t]+$/gm,""),i=a(i),i=o(i),i=c(i),i=(i=(i=(i=(i=E(i)).replace(/~D/g,"$$")).replace(/~T/g,"~")).replace(/https?\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!]/g,function(t,e){var n=i.slice(0,e),r=i.slice(e);return n.match(/<[^>]+$/)&&r.match(/^[^>]*>/)?t:"<a href='"+t+"'>"+t+"</a>"})).replace(/[a-z0-9_\-+=.]+@[a-z0-9\-]+(\.[a-z0-9-]+)+/gi,function(t){return"<a href='mailto:"+t+"'>"+t+"</a>"})};var r,o=function(n){return n=n.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(n,i,r,o,a){return i=i.toLowerCase(),t[i]=k(r),o?o+a:(a&&(e[i]=a.replace(/"/g,"&quot;")),"")})},a=function(t){return t=(t=(t=(t=(t=(t=(t=t.replace(/\n/g,"\n\n")).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,s)).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,s)).replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,s)).replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,s)).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,s)).replace(/\n\n/g,"\n")},s=function(t,e){var i=e;return i=(i=(i=i.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),i="\n\n~K"+(n.push(i)-1)+"K\n\n"},c=function(t){t=h(t);var e=v("<hr />");return t=(t=(t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,e)).replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,e)).replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,e),t=m(t),t=g(t),t=$(t),t=a(t),t=x(t)},l=function(t){return t=b(t),t=u(t),t=C(t),t=f(t),t=d(t),t=S(t),t=k(t),t=(t=w(t)).replace(/  +\n/g," <br />\n")},u=function(t){return t=t.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e=T(e,"\\`*_")})},d=function(t){return t=(t=(t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,p)).replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,p)).replace(/(\[([^\[\]]+)\])()()()()()/g,p)},p=function(n,i,r,o,a,s,c,l){null==l&&(l="");var u=i,d=r,p=o.toLowerCase(),f=a,_=l;if(""==f)if(""==p&&(p=d.toLowerCase().replace(/ ?\n/g," ")),f="#"+p,null!=t[p])f=t[p],null!=e[p]&&(_=e[p]);else{if(!(u.search(/\(\s*\)$/m)>-1))return u;f=""}var h='<a href="'+(f=T(f,"*_"))+'"';return""!=_&&(_=_.replace(/"/g,"&quot;"),h+=' title="'+(_=T(_,"*_"))+'"'),h+=">"+d+"</a>"},f=function(t){return t=(t=t.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,_)).replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,_)},_=function(n,i,r,o,a,s,c,l){var u=i,d=r,p=o.toLowerCase(),f=a,_=l;if(_||(_=""),""==f){if(""==p&&(p=d.toLowerCase().replace(/ ?\n/g," ")),f="#"+p,null==t[p])return u;f=t[p],null!=e[p]&&(_=e[p])}d=d.replace(/"/g,"&quot;");var h='<img src="'+(f=T(f,"*_"))+'" alt="'+d+'"';return _=_.replace(/"/g,"&quot;"),h+=' title="'+(_=T(_,"*_"))+'"',h+=" />"},h=function(t){return t=(t=(t=t.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(t,e){return v("<h1>"+l(e)+"</h1>")})).replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(t,e){return v("<h2>"+l(e)+"</h2>")})).replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(t,e,n){var i=e.length;return v("<h"+i+">"+l(n)+"</h"+i+">")})},m=function(t){t+="~0";var e=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return i?t=t.replace(e,function(t,e,n){var i=e,o=n.search(/[*+-]/g)>-1?"ul":"ol";i=i.replace(/\n{2,}/g,"\n\n\n");var a=r(i);return a="<"+o+">"+(a=a.replace(/\s+$/,""))+"</"+o+">\n"}):(e=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,t=t.replace(e,function(t,e,n,i){var o=e,a=n,s=i.search(/[*+-]/g)>-1?"ul":"ol",c=(a=a.replace(/\n{2,}/g,"\n\n\n"),r(a));return c=o+"<"+s+">\n"+c+"</"+s+">\n"})),t=t.replace(/~0/,"")};r=function(t){return i++,t=t.replace(/\n{2,}$/,"\n"),t=(t=(t+="~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(t,e,n,i,r){var o=r;return e||o.search(/\n{2,}/)>-1?o=c(j(o)):(o=(o=m(j(o))).replace(/\n$/,""),o=l(o)),"<li>"+o+"</li>\n"})).replace(/~0/g,""),i--,t};var g=function(t){return t=(t=(t+="~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(t,e,n){var i=e,r=n;return i=y(j(i)),i=(i=(i=O(i)).replace(/^\n+/g,"")).replace(/\n+$/g,""),v(i="<pre><code>"+i+"\n</code></pre>")+r})).replace(/~0/,"")},v=function(t){return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(n.push(t)-1)+"K\n\n"},b=function(t){return t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,e,n,i,r){var o=i;return o=(o=o.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),e+"<code>"+(o=y(o))+"</code>"})},y=function(t){return t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),t=T(t,"*_{}[]\\",!1)},w=function(t){return t=(t=(t=t.replace(/(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\1/g,"<strong>$2</strong>")).replace(/(\w)_(\w)/g,"$1~E95E$2")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},$=function(t){return t=t.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(t,e){var n=e;return n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""),n=(n=(n=c(n)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){var n=e;return n=(n=n.replace(/^  /gm,"~0")).replace(/~0/g,"")}),v("<blockquote>\n"+n+"\n</blockquote>")})},x=function(t){for(var e=(t=(t=t.replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),i=new Array,r=e.length,o=0;o<r;o++){var a=e[o];a.search(/~K(\d+)K/g)>=0?i.push(a):a.search(/\S/)>=0&&(a=(a=(a=l(a)).replace(/\n/g,"<br />")).replace(/^([ \t]*)/g,"<p>"),a+="</p>",i.push(a))}r=i.length;for(o=0;o<r;o++)for(;i[o].search(/~K(\d+)K/)>=0;){var s=n[RegExp.$1];s=s.replace(/\$/g,"$$$$"),i[o]=i[o].replace(/~K\d+K/,s)}return i.join("\n\n")},k=function(t){return t=(t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?\$!])/gi,"&lt;")},C=function(t){return t=(t=t.replace(/\\(\\)/g,q)).replace(/\\([`*_{}\[\]()>#+-.!])/g,q)},S=function(t){return t=(t=t.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>')).replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(t,e){return A(E(e))})},A=function(t){var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+function(t){var e=t.charCodeAt(0);return"0123456789ABCDEF".charAt(e>>4)+"0123456789ABCDEF".charAt(15&e)}(t)+";"},function(t){return t}];return t=(t='<a href="'+(t=(t="mailto:"+t).replace(/./g,function(t){if("@"==t)t=e[Math.floor(2*Math.random())](t);else if(":"!=t){var n=Math.random();t=n>.9?e[2](t):n>.45?e[1](t):e[0](t)}return t}))+'">'+t+"</a>").replace(/">.+:/g,'">')},E=function(t){return t=t.replace(/~E(\d+)E/g,function(t,e){var n=parseInt(e);return String.fromCharCode(n)})},j=function(t){return t=(t=t.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")},O=function(t){return t=(t=(t=(t=(t=t.replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"~A~B")).replace(/~B(.+?)~A/g,function(t,e,n){for(var i=e,r=4-i.length%4,o=0;o<r;o++)i+=" ";return i})).replace(/~A/g,"    ")).replace(/~B/g,"")},T=function(t,e,n){var i="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(i="\\\\"+i);var r=new RegExp(i,"g");return t=t.replace(r,q)},q=function(t,e){return"~E"+e.charCodeAt(0)+"E"}};n.showdown;n.fileLoaded&&n.fileLoaded("showdown.js"),t.exports=n},function(t,e){angular.module("genius").factory("MarkdownHelpers",function(){var t=function(t,e,n,i,r,o,a,s){void 0===s&&(s="");var c=e,l=n,u=i.toLowerCase(),d=r,p=s;if(""===d){if(""===u&&(u=l.toLowerCase().replace(/ ?\n/g," ")),d="#"+u,!(c.search(/\(\s*\)$/m)>-1))return c;d=""}var f='<a href="'+d+'"';return""!==p&&(f+=' title="'+(p=p.replace(/"/g,"&quot;"))+'"'),f+=">"+l+"</a>"};return{unescape_special_characters_escaped_by_markdown_anchor_converter:function(t){return t.replace(/~E(\d+)E/,function(t,e){return String.fromCharCode(e)})},convert_markdown_anchors:function(e){return e.replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,t)}}})},function(t,e){angular.module("genius").factory("MarkdownPlaintextFinderRegex",[function(){return function(t){return new RegExp(t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"gm")}}])},function(t,e){angular.module("genius").factory("MarkdownPreviewClient",["$http","AppConfig",function(t,e){return{create_preview:function(n){return t.post("".concat(e.api_root_url,"/markdown_preview"),{markdown:n}).then(function(t){return t.data.response.html})}}}])},function(t,e){angular.module("genius").factory("MentionClient",["$http","AppConfig",function(t,e){return{autocomplete:function(n){return t.get("".concat(e.api_root_url,"/mentions"),{params:{q:n}}).then(function(t){return t.data.response.mentions})}}}])},function(t,e){angular.module("genius").factory("MessageClient",["ApiClient",function(t){return{for_conversation:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.returning("messages").get("/conversations/:conversation_id/messages",{conversation_id:e,text_format:"html",page:n.page||1})},create:function(e){return t.returning("message").post("/messages",{message:e,text_format:"html"})}}}])},function(t,e){angular.module("genius").factory("MetaTagData",["$document",function(t){var e={};return{get:function(n){if(_.has(e,n))return e[n];var i=t[0].head.querySelector("[itemprop=".concat(n,"]"));return e[n]=i?JSON.parse(i.content):void 0,e[n]}}}])},function(t,e){angular.module("genius").factory("MixedDataFeed",["$q",function(t){return function(){return function e(n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.scrollable_data_objects=n,this.reset=function(){_.each(i.scrollable_data_objects,function(t){t.src.reset()})},this.next=function(){return t.all(_.map(i.scrollable_data_objects,function(t){return t.src.next().then(function(e){return{type:t.type,models:e}})}))},this.has_next=function(){return _.some(i.scrollable_data_objects,function(t){return t.src.has_next()})}}}()}])},function(t,e){angular.module("genius").factory("ModelRouter",function(){return{lookup:function(t){if(!_.isString(t))throw Error("URL must be a string");var e=t.match(/^\/referents\/(\d+)$/);if(e)return{type:"referent",id:Number(e[1])}}}})},function(t,e,n){"use strict";n.r(e);n(45);angular.module("genius").factory("moment",["$window",function(t){return t.moment}])},function(t,e,n){"use strict";n.r(e);n(825),n(826);angular.module("genius").factory("Mousetrap",["$window","$rootScope",function(t,e){var n=function(t,n){return n=n||{},function(i){n.prevent_default&&i.preventDefault(),n.stop_propagation&&i.stopPropagation(),e.$apply(function(){t.call(this,i)}.bind(this))}},i=function(e,n){this.default_options=n||{},this.mousetrap=new t.Mousetrap(e)};return i.prototype.bind=function(t,e){this.mousetrap.bind(t,e)},i.prototype.$bind=function(t,e,i){i=_.assign({},this.default_options,i),this.bind(t,n(e,i))},_.assign(i,{$bind:function(t,e,i){this.bind(t,n(e,i))},bind:t.Mousetrap.bind.bind(t.Mousetrap),unbind:t.Mousetrap.unbind.bind(t.Mousetrap),trigger:t.Mousetrap.trigger.bind(t.Mousetrap),bindGlobal:t.Mousetrap.bindGlobal.bind(t.Mousetrap)})}])},function(t,e,n){var i;!function(r,o,a){for(var s,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p=1;p<20;++p)c[111+p]="f"+p;for(p=0;p<=9;++p)c[p+96]=p;function f(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function _(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return c[t.which]?c[t.which]:l[t.which]?l[t.which]:String.fromCharCode(t.which).toLowerCase()}function h(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function m(t,e,n){return n||(n=function(){if(!s)for(var t in s={},c)t>95&&t<112||c.hasOwnProperty(t)&&(s[c[t]]=t);return s}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function g(t,e){var n,i,r,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),r=0;r<n.length;++r)i=n[r],d[i]&&(i=d[i]),e&&"keypress"!=e&&u[i]&&(i=u[i],o.push("shift")),h(i)&&o.push(i);return{key:i,modifiers:o,action:e=m(i,o,e)}}function v(t){var e=this;if(t=t||o,!(e instanceof v))return new v(t);e.target=t,e._callbacks={},e._directMap={};var n,i={},r=!1,a=!1,s=!1;function c(t){t=t||{};var e,n=!1;for(e in i)t[e]?n=!0:i[e]=0;n||(s=!1)}function l(t,n,r,o,a,s){var c,l,u,d,p=[],f=r.type;if(!e._callbacks[t])return[];for("keyup"==f&&h(t)&&(n=[t]),c=0;c<e._callbacks[t].length;++c)if(l=e._callbacks[t][c],(o||!l.seq||i[l.seq]==l.level)&&f==l.action&&("keypress"==f&&!r.metaKey&&!r.ctrlKey||(u=n,d=l.modifiers,u.sort().join(",")===d.sort().join(",")))){var _=!o&&l.combo==a,m=o&&l.seq==o&&l.level==s;(_||m)&&e._callbacks[t].splice(c,1),p.push(l)}return p}function u(t,n,i,r){e.stopCallback(n,n.target||n.srcElement,i,r)||!1===t(n,i)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function d(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=_(t);n&&("keyup"!=t.type||r!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):r=!1)}function p(t,e,o,a){function l(e){return function(){s=e,++i[t],clearTimeout(n),n=setTimeout(c,1e3)}}function d(e){u(o,e,t),"keyup"!==a&&(r=_(e)),setTimeout(c,10)}i[t]=0;for(var p=0;p<e.length;++p){var f=p+1===e.length?d:l(a||g(e[p+1]).action);m(e[p],f,a,t,p)}}function m(t,n,i,r,o){e._directMap[t+":"+i]=n;var a,s=(t=t.replace(/\s+/g," ")).split(" ");s.length>1?p(t,s,n,i):(a=g(t,i),e._callbacks[a.key]=e._callbacks[a.key]||[],l(a.key,a.modifiers,{type:a.action},r,t,o),e._callbacks[a.key][r?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:r,level:o,combo:t}))}e._handleKey=function(t,e,n){var i,r=l(t,e,n),o={},d=0,p=!1;for(i=0;i<r.length;++i)r[i].seq&&(d=Math.max(d,r[i].level));for(i=0;i<r.length;++i)if(r[i].seq){if(r[i].level!=d)continue;p=!0,o[r[i].seq]=1,u(r[i].callback,n,r[i].combo,r[i].seq)}else p||u(r[i].callback,n,r[i].combo);var f="keypress"==n.type&&a;n.type!=s||h(t)||f||c(o),a=p&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var i=0;i<t.length;++i)m(t[i],e,n)},f(t,"keypress",d),f(t,"keydown",d),f(t,"keyup",d)}v.prototype.bind=function(t,e,n){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,n),this},v.prototype.unbind=function(t,e){return this.bind.call(this,t,function(){},e)},v.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},v.prototype.reset=function(){return this._callbacks={},this._directMap={},this},v.prototype.stopCallback=function(t,e){return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!function t(e,n){return null!==e&&e!==o&&(e===n||t(e.parentNode,n))}(e,this.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},v.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},v.init=function(){var t=v(o);for(var e in t)"_"!==e.charAt(0)&&(v[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},v.init(),r.Mousetrap=v,t.exports&&(t.exports=v),void 0===(i=function(){return v}.call(e,n,e,t))||(t.exports=i)}(window,document)},function(t,e){!function(t){var e={},n=t.prototype.stopCallback;t.prototype.stopCallback=function(t,i,r,o){return!!this.paused||!e[r]&&!e[o]&&n.call(this,t,i,r)},t.prototype.bindGlobal=function(t,n,i){if(this.bind(t,n,i),t instanceof Array)for(var r=0;r<t.length;r++)e[t[r]]=!0;else e[t]=!0},t.init()}(Mousetrap)},function(t,e,n){"use strict";n.r(e);n(828);angular.module("genius").factory("MusicKit",["$q","$window",function(t,e){var n=t.defer();return document.addEventListener("musickitloaded",n.resolve),e.loadjs(["https://js-cdn.music.apple.com/musickit/v1/musickit.js"],{async:!0,error:function(){n.reject(new Error("MusicKit failed to load"))}}),{load:function(){return n.promise.then(function(){var t=window.MusicKit;return t.configure({developerToken:window.MUSICKIT_TOKEN,declarativeMarkup:!1,debug:!0,app:{name:"Genius"},suppressErrorDialog:!0,features:["equivalencies"]}),t})}}}])},function(t,e){loadjs=function(){var t=function(){},e={},n={},i={};function r(t,e){if(t){var r=i[t];if(n[t]=e,r)for(;r.length;)r[0](t,e),r.splice(0,1)}}function o(e,n){e.call&&(e={success:e}),n.length?(e.error||t)(n):(e.success||t)(e)}function a(e,n,i,r){var o,s,c=document,l=i.async,u=(i.numRetries||0)+1,d=i.before||t,p=e.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(e)?(o=!0,(s=c.createElement("link")).rel="stylesheet",s.href=p):/(^img!|\.(png|gif|jpg|svg)$)/.test(e)?(s=c.createElement("img")).src=p:((s=c.createElement("script")).src=e,s.async=void 0===l||l),s.onload=s.onerror=s.onbeforeload=function(t){var c=t.type[0];if(o&&"hideFocus"in s)try{s.sheet.cssText.length||(c="e")}catch(t){c="e"}if("e"==c&&(r+=1)<u)return a(e,n,i,r);n(e,c,t.defaultPrevented)},!1!==d(e,s)&&c.head.appendChild(s)}function s(t,n,i){var s,c;if(n&&n.trim&&(s=n),c=(s?i:n)||{},s){if(s in e)throw"LoadJS";e[s]=!0}!function(t,e,n){var i,r,o=(t=t.push?t:[t]).length,s=o,c=[];for(i=function(t,n,i){if("e"==n&&c.push(t),"b"==n){if(!i)return;c.push(t)}--o||e(c)},r=0;r<s;r++)a(t[r],i,n)}(t,function(t){o(c,t),r(s,t)},c)}return s.ready=function(t,e){return function(t,e){t=t.push?t:[t];var r,o,a,s=[],c=t.length,l=c;for(r=function(t,n){n.length&&s.push(t),--l||e(s)};c--;)o=t[c],(a=n[o])?r(o,a):(i[o]=i[o]||[]).push(r)}(t,function(t){o(e,t)}),s},s.done=function(t){r(t,[])},s.reset=function(){e={},n={},i={}},s.isDefined=function(t){return t in e},s}()},function(t,e){angular.module("genius").factory("MutationObserver",["$window",function(t){return t.MutationObserver}])},function(t,e){angular.module("genius").factory("NewRelic",["$window","$rootScope","Session",function(t,e,n){var i=t.newrelic;return{init:function(t){var r,o,a;i&&(i.setCustomAttribute("signedIn",n.user_signed_in),t&&i.setPageViewName(t,"resource.path"),r=2,o=0,a=e.$watch(function(){(o+=1)===r&&(i.finished(),i.addPageAction("secondApply"),a())}))}}}])},function(t,e,n){"use strict";n.r(e);n(832);angular.module("genius").factory("Odometer",["$window",function(t){return t.Odometer}])},function(t,e,n){(function(e){t.exports=e.Odometer=n(833)}).call(this,n(1))},function(t,e,n){var i,r;(function(){var o,a,s,c,l,u,d,p,f,_,h,m,g,v,b,y,w,$,x,k,C,S,A=[].slice;a=/^\(?([^)]*)\)?(?:(.)(d+))?$/,o=2e3,s=2,c=1e3/30,b=document.createElement("div").style,d=null!=b.transition||null!=b.webkitTransition||null!=b.mozTransition||null!=b.oTransition,g=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,l=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,f=function(t){var e;return(e=document.createElement("div")).innerHTML=t,e.children[0]},m=function(t,e){return t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},p=function(t,e){return m(t,e),t.className+=" "+e},y=function(t,e){var n;if(null!=document.createEvent)return(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(n)},h=function(){var t,e;return null!=(t=null!=(e=window.performance)&&"function"==typeof e.now?e.now():void 0)?t:+new Date},v=function(t,e){return null==e&&(e=0),e?(t*=Math.pow(10,e),t+=.5,(t=Math.floor(t))/Math.pow(10,e)):Math.round(t)},w=function(t){return t<0?Math.ceil(t):Math.floor(t)},_=function(t){return t-v(t)},x=!1,($=function(){var t,e,n,i,r;if(!x&&null!=window.jQuery){for(x=!0,r=[],e=0,n=(i=["html","text"]).length;e<n;e++)t=i[e],r.push(function(t){var e;return e=window.jQuery.fn[t],window.jQuery.fn[t]=function(t){var n;return null==t||null==(null!=(n=this[0])?n.odometer:void 0)?e.apply(this,arguments):this[0].odometer.update(t)}}(t));return r}})(),setTimeout($,0),(u=function(){function t(e){var n,i,r,a,l,u,d,p,f,_=this;if(this.options=e,this.el=this.options.el,null!=this.el.odometer)return this.el.odometer;for(n in this.el.odometer=this,d=t.options)r=d[n],null==this.options[n]&&(this.options[n]=r);null==(a=this.options).duration&&(a.duration=o),this.MAX_VALUES=this.options.duration/c/s|0,this.resetFormat(),this.value=this.cleanValue(null!=(p=this.options.value)?p:""),this.renderInside(),this.render();try{for(l=0,u=(f=["innerHTML","innerText","textContent"]).length;l<u;l++)i=f[l],null!=this.el[i]&&function(t){Object.defineProperty(_.el,t,{get:function(){var e;return"innerHTML"===t?_.inside.outerHTML:null!=(e=_.inside.innerText)?e:_.inside.textContent},set:function(t){return _.update(t)}})}(i)}catch(t){t,this.watchForMutations()}}return t.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},t.prototype.watchForMutations=function(){var t=this;if(null!=l)try{return null==this.observer&&(this.observer=new l(function(e){var n;return n=t.el.innerText,t.renderInside(),t.render(t.value),t.update(n)})),this.watchMutations=!0,this.startWatchingMutations()}catch(t){t}},t.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})},t.prototype.stopWatchingMutations=function(){var t;return null!=(t=this.observer)?t.disconnect():void 0},t.prototype.cleanValue=function(t){var e;return"string"==typeof t&&(t=(t=(t=t.replace(null!=(e=this.format.radix)?e:".","<radix>")).replace(/[.,]/g,"")).replace("<radix>","."),t=parseFloat(t,10)||0),v(t,this.format.precision)},t.prototype.bindTransitionEnd=function(){var t,e,n,i,r,o,a=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,e=!1,o=[],n=0,i=(r="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd".split(" ")).length;n<i;n++)t=r[n],o.push(this.el.addEventListener(t,function(){return!!e||(e=!0,setTimeout(function(){return a.render(),e=!1,y(a.el,"odometerdone")},0),!0)},!1));return o}},t.prototype.resetFormat=function(){var t,e,n,i,r,o,s,c;if((t=null!=(s=this.options.format)?s:"(,ddd).dd")||(t="d"),!(n=a.exec(t)))throw new Error("Odometer: Unparsable digit format");return o=(c=n.slice(1,4))[0],r=c[1],i=(null!=(e=c[2])?e.length:void 0)||0,this.format={repeating:o,radix:r,precision:i}},t.prototype.render=function(t){var e,n,i,r,o,a,s;for(null==t&&(t=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",o=this.options.theme,r=[],a=0,s=(e=this.el.className.split(" ")).length;a<s;a++)(n=e[a]).length&&((i=/^odometer-theme-(.+)$/.exec(n))?o=i[1]:/^odometer(-|$)/.test(n)||r.push(n));return r.push("odometer"),d||r.push("odometer-no-transitions"),o?r.push("odometer-theme-"+o):r.push("odometer-auto-theme"),this.el.className=r.join(" "),this.ribbons={},this.formatDigits(t),this.startWatchingMutations()},t.prototype.formatDigits=function(t){var e,n,i,r,o,a,s,c,l;if(this.digits=[],this.options.formatFunction)for(r=0,a=(c=this.options.formatFunction(t).split("").reverse()).length;r<a;r++)(n=c[r]).match(/0-9/)?((e=this.renderDigit()).querySelector(".odometer-value").innerHTML=n,this.digits.push(e),this.insertDigit(e)):this.addSpacer(n);else for(i=!this.format.precision||!_(t)||!1,o=0,s=(l=t.toString().split("").reverse()).length;o<s;o++)"."===(e=l[o])&&(i=!0),this.addDigit(e,i)},t.prototype.update=function(t){var e,n=this;if(e=(t=this.cleanValue(t))-this.value)return m(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),p(this.el,e>0?"odometer-animating-up":"odometer-animating-down"),this.stopWatchingMutations(),this.animate(t),this.startWatchingMutations(),setTimeout(function(){return n.el.offsetHeight,p(n.el,"odometer-animating")},0),this.value=t},t.prototype.renderDigit=function(){return f('<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner"><span class="odometer-ribbon"><span class="odometer-ribbon-inner"><span class="odometer-value"></span></span></span></span></span>')},t.prototype.insertDigit=function(t,e){return null!=e?this.inside.insertBefore(t,e):this.inside.children.length?this.inside.insertBefore(t,this.inside.children[0]):this.inside.appendChild(t)},t.prototype.addSpacer=function(t,e,n){var i;return(i=f('<span class="odometer-formatting-mark"></span>')).innerHTML=t,n&&p(i,n),this.insertDigit(i,e)},t.prototype.addDigit=function(t,e){var n,i,r,o;if(null==e&&(e=!0),"-"===t)return this.addSpacer(t,null,"odometer-negation-mark");if("."===t)return this.addSpacer(null!=(o=this.format.radix)?o:".",null,"odometer-radix-mark");if(e)for(r=!1;;){if(!this.format.repeating.length){if(r)throw new Error("Bad odometer format without digits");this.resetFormat(),r=!0}if(n=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),"d"===n)break;this.addSpacer(n)}return(i=this.renderDigit()).querySelector(".odometer-value").innerHTML=t,this.digits.push(i),this.insertDigit(i)},t.prototype.animate=function(t){return d&&"count"!==this.options.animation?this.animateSlide(t):this.animateCount(t)},t.prototype.animateCount=function(t){var e,n,i,r,o,a=this;if(n=+t-this.value)return r=i=h(),e=this.value,(o=function(){var s,c;return h()-r>a.options.duration?(a.value=t,a.render(),void y(a.el,"odometerdone")):((s=h()-i)>50&&(i=h(),c=s/a.options.duration,e+=n*c,a.render(Math.round(e))),null!=g?g(o):setTimeout(o,50))})()},t.prototype.getDigitCount=function(){var t,e,n,i,r,o;for(t=r=0,o=(i=1<=arguments.length?A.call(arguments,0):[]).length;r<o;t=++r)n=i[t],i[t]=Math.abs(n);return e=Math.max.apply(Math,i),Math.ceil(Math.log(e+1)/Math.log(10))},t.prototype.getFractionalDigitCount=function(){var t,e,n,i,r,o,a;for(e=/^\-?\d*\.(\d*?)0*$/,t=o=0,a=(r=1<=arguments.length?A.call(arguments,0):[]).length;o<a;t=++o)i=r[t],r[t]=i.toString(),n=e.exec(r[t]),r[t]=null==n?0:n[1].length;return Math.max.apply(Math,r)},t.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},t.prototype.animateSlide=function(t){var e,n,i,r,o,a,s,c,l,u,d,f,_,h,m,g,v,b,y,$,x,k,C,S,A,E,j;if(g=this.value,(c=this.getFractionalDigitCount(g,t))&&(t*=Math.pow(10,c),g*=Math.pow(10,c)),i=t-g){for(this.bindTransitionEnd(),r=this.getDigitCount(g,t),o=[],e=0,d=y=0;0<=r?y<r:y>r;d=0<=r?++y:--y){if(v=w(g/Math.pow(10,r-d-1)),a=(s=w(t/Math.pow(10,r-d-1)))-v,Math.abs(a)>this.MAX_VALUES){for(u=[],f=a/(this.MAX_VALUES+this.MAX_VALUES*e*.5),n=v;a>0&&n<s||a<0&&n>s;)u.push(Math.round(n)),n+=f;u[u.length-1]!==s&&u.push(s),e++}else u=function(){j=[];for(var t=v;v<=s?t<=s:t>=s;v<=s?t++:t--)j.push(t);return j}.apply(this);for(d=$=0,k=u.length;$<k;d=++$)l=u[d],u[d]=Math.abs(l%10);o.push(u)}for(this.resetDigits(),d=x=0,C=(E=o.reverse()).length;x<C;d=++x)for(u=E[d],this.digits[d]||this.addDigit(" ",d>=c),null==(b=this.ribbons)[d]&&(b[d]=this.digits[d].querySelector(".odometer-ribbon-inner")),this.ribbons[d].innerHTML="",i<0&&(u=u.reverse()),_=A=0,S=u.length;A<S;_=++A)l=u[_],(m=document.createElement("div")).className="odometer-value",m.innerHTML=l,this.ribbons[d].appendChild(m),_===u.length-1&&p(m,"odometer-last-value"),0===_&&p(m,"odometer-first-value");return v<0&&this.addDigit("-"),null!=(h=this.inside.querySelector(".odometer-radix-mark"))&&h.parent.removeChild(h),c?this.addSpacer(this.format.radix,this.digits[c-1],"odometer-radix-mark"):void 0}},t}()).options=null!=(C=window.odometerOptions)?C:{},setTimeout(function(){var t,e,n,i,r;if(window.odometerOptions){for(t in r=[],i=window.odometerOptions)e=i[t],r.push(null!=(n=u.options)[t]?(n=u.options)[t]:n[t]=e);return r}},0),u.init=function(){var t,e,n,i,r,o;if(null!=document.querySelectorAll){for(o=[],n=0,i=(e=document.querySelectorAll(u.options.selector||".odometer")).length;n<i;n++)t=e[n],o.push(t.odometer=new u({el:t,value:null!=(r=t.innerText)?r:t.textContent}));return o}},null!=(null!=(S=document.documentElement)?S.doScroll:void 0)&&null!=document.createEventObject?(k=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&!1!==u.options.auto&&u.init(),null!=k?k.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){if(!1!==u.options.auto)return u.init()},!1),i=[n(12)],void 0===(r=function(){return u}.apply(e,i))||(t.exports=r)}).call(this)},function(t,e){angular.module("genius").factory("on_within_visibility_range",["$q","$window",function(t,e){var n=0,i=$(e).height(),r=[],o=function(){n=Math.max(n,$(e).scrollTop()),r=_.tap([],function(t){r.forEach(function(e){e.element.offset().top-e.range<n+i?e.resolve():t.push(e)})})};return $(e).on("scroll",_.throttle(o,100)),$(e).on("resize",function(){i=$(e).height()}),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _.tap(t(function(t){return r.push({resolve:t,range:n,element:$(e)})}),o)}}])},function(t,e){angular.module("genius").factory("only_changes",[function(){return function(t,e){return _.omitBy(t,function(t,n){return e[n]===t})}}])},function(t,e){angular.module("genius").factory("OnsiteInterceptor",function(){return{request:function(t){var e,n,i=(e=t.url,(n=document.createElement("a")).href=e,n.hostname);return i&&i!==window.location.hostname||(t.headers["X-Requested-With"]="XMLHttpRequest","GET"!==t.method&&(t.headers["X-CSRF-Token"]=$.cookie("_csrf_token"))),t}}})},function(t,e){angular.module("genius").factory("PageDataClient",["MetaTagData","ApiClient",function(t,e){return{load:function(t,n){return e.transform(_.property("page_data")).get("/page_data/:type",{type:t,page_path:n})},preloaded:function(){return t.get("page_data")}}}])},function(t,e){angular.module("genius").factory("PageTransition",["$document","$exceptionHandler","$location","$rootScope","Ads","AsyncAnalytics","cfpLoadingBar","PageDataClient",function(t,e,n,i,r,o,a,s){var c=!1,l=i.$new(!0);return{by_router_instruction:function(i,u){return _.isUndefined(u)&&e(new Error("must pass $prevInstruction as second argument to by_router_instruction")),_.isNull(u)&&s.preloaded()?(Object.assign(i.routeData,{page_data:s.preloaded()}),!0):(c=!0,a.start(),s.load(i.routeData.data.type,n.path()).then(function(e){if(c=!1,a.complete(),Object.assign(i.routeData,{page_data:e}),e.dfp_kv){var n={},s=!0,u=!1,d=void 0;try{for(var p,f=e.dfp_kv[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var _=p.value,h=_.name,m=_.values;n[h]=m}}catch(t){u=!0,d=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw d}}r.reset_for_new_page_view({targeting:n})}return t.prop("title",e.title),t.scrollTop(0),o.on_navigation(e),l.$broadcast("client_transition_complete"),!0}).catch(function(e){return t.prop("location").reload(),Promise.reject(e)}))},on_client_transition_complete:function(t){l.$on("client_transition_complete",t)},get transitioning(){return c}}}])},function(t,e){angular.module("genius").factory("PageVisibility",["$document","$rootScope",function(t,e){var n,i;_.isUndefined(t[0].hidden)?_.isUndefined(t[0].mozHidden)?_.isUndefined(t[0].msHidden)?_.isUndefined(t[0].webkitHidden)||(n="webkitHidden",i="webkitvisibilitychange"):(n="msHidden",i="msvisibilitychange"):(n="mozHidden",i="mozvisibilitychange"):(n="hidden",i="visibilitychange");var r=!_.isUndefined(n),o=[];return r&&t[0].addEventListener(i,function(){if(!_.isEmpty(o)){for(;_.some(o);)o.shift()();e.$apply()}}),{is_visible:function(){return!t[0][n]},is_hidden:function(){return t[0][n]},when_visible:function(e,i){e=i?e.bind(i):e,r&&t[0][n]?o.push(e):e()}}}])},function(t,e){angular.module("genius").factory("PagedDataFeed",[function(){return function(){return function t(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_.noop;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.next_page=o,this.params=_.clone(r),this.next=function(){return e(_.assign({page:i.next_page},i.params)).then(function(t){return i.next_page=t.next_page,i.total_entries=t.total_entries,a(t[n]),t[n]})},this.has_next=function(){return i.next_page},this.reset=function(){i.next_page=1}}}()}])},function(t,e){angular.module("genius").factory("parse_time_string",function(){return function(t){if(!t)return null;var e=t.split(/\D/);return 1===e.length?parseInt(e[0]):60*(e[0]?parseInt(e[0]):0)*1e3+1e3*(e[1]?parseInt(e[1]):0)+(e[2]?parseInt((e[2]+"000").slice(0,3)):0)}})},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}angular.module("genius").factory("patch_structured_text",["StructuredText","diff_match_patch",function(t,e){var i=e.DIFF_DELETE,r=e.DIFF_INSERT,o=e.DIFF_EQUAL;return function(a,s){var c=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).dmp;if(0===a.length)return[s,[]];a=(c=c||new e).patch_deepCopy(a),c.patch_splitMax(a);for(var l=c.patch_addPadding(a),u=new t(l+s+l),d=0,p=[],f=0;f<a.length;f++){var _=a[f].start2+d,h=c.diff_text1(a[f].diffs),m=void 0,g=-1;if(h.length>c.Match_MaxBits?-1!==(m=c.match_main(u.plain,h.substring(0,c.Match_MaxBits),_))&&(-1===(g=c.match_main(u.plain,h.substring(h.length-c.Match_MaxBits),_+h.length-c.Match_MaxBits))||m>=g)&&(m=-1):m=c.match_main(u.plain,h,_),-1===m)p[f]=!1,d-=a[f].length2-a[f].length1;else{p[f]=!0,d=m-_;var v=void 0;v=-1===g?u.plain.substring(m,m+h.length):u.plain.substring(m,g+c.Match_MaxBits);var b=c.diff_main(h,v,!1);if(h.length>c.Match_MaxBits&&c.diff_levenshtein(b)/h.length>c.Patch_DeleteThreshold)p[f]=!1;else{c.diff_cleanupSemanticLossless(b);var y=0,w=void 0,$=!0,x=!1,k=void 0;try{for(var C,S=a[f].diffs[Symbol.iterator]();!($=(C=S.next()).done);$=!0){var A=n(C.value,2),E=A[0],j=A[1];E!==o&&(w=c.diff_xIndex(b,y)),E===r?u=u.insert_at(m+w,j):E===i&&(u=u.remove_range(m+w,m+c.diff_xIndex(b,y+j.length))),E!==i&&(y+=j.length)}}catch(t){x=!0,k=t}finally{try{$||null==S.return||S.return()}finally{if(x)throw k}}}}}return[u.structured.substring(l.length,u.structured.length-l.length),p]}}])},function(t,e){angular.module("genius").factory("performance_mark",["$window",function(t){var e=function(e){_.get(t,"performance.mark")&&t.performance.mark(e)};return{create:e,create_once:_.memoize(e)}}])},function(t,e){angular.module("genius").factory("Preloader",["$q",function(t){var e=function(t){this.bulk_load_function=t};return e.prototype={cache:{},insert:function(e,n){this.cache[e]=t.when(n)},load:function(t){return this.bulk_load([t]),this.cache[t]},filter_unloaded:function(t){var e=this.cache;return t.filter(function(t){return!e[t]})},bulk_load:function(t){var e=this.cache,n=this.filter_unloaded(t),i=n.length?this.bulk_load_function(n):void 0;n.forEach(function(t){e[t]=i.then(function(e){return e[t]})})}},e}])},function(t,e,n){(function(t){function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("PromiseQueue",["$q",function(n){return function(){function i(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.pending_count=0,this.queue=(new t.Subject).do(function(){return e.pending_count++}).concatMap(function(e){var i=e.f,r=e.deferred;r.resolve(i());var o=t.Observable.fromPromise(r.promise);return n.fail_fast||(o=o.catch(function(e){return t.Observable.of(e)})),o}),this.queue.subscribe(function(){return e.pending_count--},_.noop)}var r,o,a;return r=i,(o=[{key:"is_empty",value:function(){return 0===this.pending_count}},{key:"add",value:function(t){var e=n.defer();return this.queue.next({f:t,deferred:e}),e.promise}}])&&e(r.prototype,o),a&&e(r,a),i}()}])}).call(this,n(122))},function(t,e,n){"use strict";n.r(e);n(847);angular.module("genius").factory("Pusher",["$window","$rootScope","AppConfig",function(t,e,n){var i,r={},o=function(){return i||(i=new t.Pusher(n.pusher_app_key)),i};return{pusher:o,subscribe:function(t,n,i){r[t]||(r[t]={},o().subscribe(t).bind_all(function(n,i){var o=r[t][n];o&&e.$applyAsync(function(){o.forEach(function(t){t(i)})})})),r[t][n]=r[t][n]||[],r[t][n].push(i)}}}])},function(t,e,n){
/*!
 * Pusher JavaScript Library v3.1.0-pre11
 * http://pusher.com/
 *
 * Copyright 2016, Pusher
 * Released under the MIT licence.
 */
var i;i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){"use strict";var i=n(1);t.exports=i.default},function(t,e,n){"use strict";var i=n(2),r=n(9),o=n(23),a=n(38),s=n(39),c=n(40),l=n(12),u=n(5),d=n(62),p=n(8),f=n(42),_=function(){function t(e,n){var l=this;!function(t){if(null==t)throw"You must pass your app key when you instantiate Pusher."}(e),n=n||{},this.key=e,this.config=r.extend(d.getGlobalConfig(),n.cluster?d.getClusterConfig(n.cluster):{},n),this.channels=f.default.createChannels(),this.global_emitter=new o.default,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new a.default(this.key,this.sessionID,{cluster:this.config.cluster,features:t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:s.default.INFO,version:u.default.VERSION}),this.config.disableStats||(this.timelineSender=f.default.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+i.default.TimelineTransport.name}));this.connection=f.default.createConnectionManager(this.key,r.extend({getStrategy:function(t){var e=r.extend({},l.config,t);return c.build(i.default.getDefaultStrategy(e),e)},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){l.subscribeAll(),l.timelineSender&&l.timelineSender.send(l.connection.isEncrypted())}),this.connection.bind("message",function(t){var e=0===t.event.indexOf("pusher_internal:");if(t.channel){var n=l.channel(t.channel);n&&n.handleEvent(t.event,t.data)}e||l.global_emitter.emit(t.event,t.data)}),this.connection.bind("disconnected",function(){l.channels.disconnect()}),this.connection.bind("error",function(t){p.default.warn("Error",t)}),t.instances.push(this),this.timeline.info({instances:t.instances.length}),t.isReady&&this.connect()}return t.ready=function(){t.isReady=!0;for(var e=0,n=t.instances.length;e<n;e++)t.instances[e].connect()},t.log=function(e){var n=Function("return this")();t.logToConsole&&n.console&&n.console.log&&n.console.log(e)},t.getClientFeatures=function(){return r.keys(r.filterObject({ws:i.default.Transports.ws},function(t){return t.isSupported({})}))},t.prototype.channel=function(t){return this.channels.find(t)},t.prototype.allChannels=function(){return this.channels.all()},t.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isEncrypted(),e=this.timelineSender;this.timelineSenderTimer=new l.PeriodicTimer(6e4,function(){e.send(t)})}},t.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.prototype.bind=function(t,e){return this.global_emitter.bind(t,e),this},t.prototype.bind_all=function(t){return this.global_emitter.bind_all(t),this},t.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},t.prototype.subscribe=function(t){var e=this.channels.add(t,this);return"connected"===this.connection.state&&e.subscribe(),e},t.prototype.unsubscribe=function(t){var e=this.channels.remove(t);e&&"connected"===this.connection.state&&e.unsubscribe()},t.prototype.send_event=function(t,e,n){return this.connection.send_event(t,e,n)},t.prototype.isEncrypted=function(){return"https:"===i.default.getProtocol()||Boolean(this.config.encrypted)},t.instances=[],t.isReady=!1,t.logToConsole=!1,t.Runtime=i.default,t.ScriptReceivers=i.default.ScriptReceivers,t.DependenciesReceivers=i.default.DependenciesReceivers,t.auth_callbacks=i.default.auth_callbacks,t}();e.__esModule=!0,e.default=_,i.default.setup(_)},function(t,e,n){"use strict";var i=n(3),r=n(7),o=n(14),a=n(15),s=n(16),c=n(4),l=n(17),u=n(18),d=n(25),p=n(26),f=n(27),_=n(28),h={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:c.ScriptReceivers,DependenciesReceivers:i.DependenciesReceivers,getDefaultStrategy:p.default,Transports:u.default,transportConnectionInitializer:f.default,HTTPFactory:_.default,TimelineTransport:l.default,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(t){var e=this;window.Pusher=t;var n=function(){e.onDocumentBody(t.ready)};window.JSON?n():i.Dependencies.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getGlobal:function(){return window},getAuthorizers:function(){return{ajax:r.default,jsonp:o.default}},onDocumentBody:function(t){var e=this;document.body?t():setTimeout(function(){e.onDocumentBody(t)},0)},createJSONPRequest:function(t,e){return new s.default(t,e)},createScriptRequest:function(t){return new a.default(t)},getLocalStorage:function(){try{return window.localStorage}catch(t){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return d.Network},createWebSocket:function(t){return new(this.getWebSocketAPI())(t)},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);if(this.isXDRSupported(0===e.indexOf("https:")))return this.HTTPFactory.createXDR(t,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var t=this.getXHRAPI();return Boolean(t)&&void 0!==(new t).withCredentials},isXDRSupported:function(t){var e=t?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===e},addUnloadListener:function(t){void 0!==window.addEventListener?window.addEventListener("unload",t,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",t)},removeUnloadListener:function(t){void 0!==window.addEventListener?window.removeEventListener("unload",t,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",t)}};e.__esModule=!0,e.default=h},function(t,e,n){"use strict";var i=n(4),r=n(5),o=n(6);e.DependenciesReceivers=new i.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),e.Dependencies=new o.default({cdn_http:r.default.cdn_http,cdn_https:r.default.cdn_https,version:r.default.VERSION,suffix:r.default.dependency_suffix,receivers:e.DependenciesReceivers})},function(t,e){"use strict";var n=function(){function t(t,e){this.lastId=0,this.prefix=t,this.name=e}return t.prototype.create=function(t){this.lastId++;var e=this.lastId,n=this.prefix+e,i=this.name+"["+e+"]",r=!1,o=function(){r||(t.apply(null,arguments),r=!0)};return this[e]=o,{number:e,id:n,name:i,callback:o}},t.prototype.remove=function(t){delete this[t.number]},t}();e.ScriptReceiverFactory=n,e.ScriptReceivers=new n("_pusher_script_","Pusher.ScriptReceivers")},function(t,e){"use strict";e.__esModule=!0,e.default={VERSION:"3.1.0-pre11",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""}},function(t,e,n){"use strict";var i=n(4),r=n(2),o=function(){function t(t){this.options=t,this.receivers=t.receivers||i.ScriptReceivers,this.loading={}}return t.prototype.load=function(t,e,n){var i=this;if(i.loading[t]&&i.loading[t].length>0)i.loading[t].push(n);else{i.loading[t]=[n];var o=r.default.createScriptRequest(i.getPath(t,e)),a=i.receivers.create(function(e){if(i.receivers.remove(a),i.loading[t]){var n=i.loading[t];delete i.loading[t];for(var r=function(t){t||o.cleanup()},s=0;s<n.length;s++)n[s](e,r)}});o.send(a)}},t.prototype.getRoot=function(t){var e=r.default.getDocument().location.protocol;return(t&&t.encrypted||"https:"===e?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},t.prototype.getPath=function(t,e){return this.getRoot(e)+"/"+t+this.options.suffix+".js"},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(8),r=n(2);e.__esModule=!0,e.default=function(t,e,n){var o;for(var a in(o=r.default.createXHR()).open("POST",this.options.authEndpoint,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)o.setRequestHeader(a,this.authOptions.headers[a]);return o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var t,e=!1;try{t=JSON.parse(o.responseText),e=!0}catch(t){n(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+o.responseText)}e&&n(!1,t)}else i.default.warn("Couldn't get auth info from your webapp",o.status),n(!0,o.status)},o.send(this.composeQuery(e)),o}},function(t,e,n){"use strict";var i=n(9),r=n(1),o={debug:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];r.default.log&&r.default.log(i.stringify.apply(this,arguments))},warn:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=i.stringify.apply(this,arguments),o=Function("return this")();o.console&&(o.console.warn?o.console.warn(n):o.console.log&&o.console.log(n)),r.default.log&&r.default.log(n)}};e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(10),r=n(11),o=Function("return this")();function a(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function s(t,e){for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i,t,n));return n}function c(t,e){var n={};return a(t,function(t,i){n[i]=e(t)}),n}function l(t,e){var n={};return a(t,function(i,r){(e&&e(i,r,t,n)||Boolean(i))&&(n[r]=i)}),n}function u(t){var e=[];return a(t,function(t,n){e.push([n,t])}),e}function d(t){return c(t,function(t){return"object"==typeof t&&(t=JSON.stringify(t)),encodeURIComponent(i.default(t.toString()))})}e.extend=function t(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){var o=n[r];for(var a in o)o[a]&&o[a].constructor&&o[a].constructor===Object?e[a]=t(e[a]||{},o[a]):e[a]=o[a]}return e},e.stringify=function(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):t.push(JSON.stringify(arguments[e]));return t.join(" : ")},e.arrayIndexOf=function(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},e.objectApply=a,e.keys=function(t){var e=[];return a(t,function(t,n){e.push(n)}),e},e.values=function(t){var e=[];return a(t,function(t){e.push(t)}),e},e.apply=function(t,e,n){for(var i=0;i<t.length;i++)e.call(n||o,t[i],i,t)},e.map=s,e.mapObject=c,e.filter=function(t,e){e=e||function(t){return!!t};for(var n=[],i=0;i<t.length;i++)e(t[i],i,t,n)&&n.push(t[i]);return n},e.filterObject=l,e.flatten=u,e.any=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},e.all=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},e.encodeParamsObject=d,e.buildQueryString=function(t){return s(u(d(l(t,function(t){return void 0!==t}))),r.default.method("join","=")).join("&")},e.safeJSONStringify=function(t){var e=[],n=JSON.stringify(t,function(t,n){if("object"==typeof n&&null!==n){if(-1!==e.indexOf(n))return;e.push(n)}return n});return e=null,n}},function(t,e){"use strict";var n=Function("return this")();e.__esModule=!0,e.default=function(t){return d(l(t))};for(var i=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={},a=0,s=r.length;a<s;a++)o[r.charAt(a)]=a;var c=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?i(192|e>>>6)+i(128|63&e):i(224|e>>>12&15)+i(128|e>>>6&63)+i(128|63&e)},l=function(t){return t.replace(/[^\x00-\x7F]/g,c)},u=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[r.charAt(n>>>18),r.charAt(n>>>12&63),e>=2?"=":r.charAt(n>>>6&63),e>=1?"=":r.charAt(63&n)].join("")},d=n.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,u)}},function(t,e,n){"use strict";var i=n(12),r={getGlobal:function(){return Function("return this")()},now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(t){return new i.OneOffTimer(0,t)},method:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1);return function(e){return e[t].apply(e,i.concat(arguments))}}};e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(13),o=Function("return this")();function a(t){o.clearTimeout(t)}function s(t){o.clearInterval(t)}var c=function(t){function e(e,n){t.call(this,setTimeout,a,e,function(t){return n(),null})}return i(e,t),e}(r.default);e.OneOffTimer=c;var l=function(t){function e(e,n){t.call(this,setInterval,s,e,function(t){return n(),t})}return i(e,t),e}(r.default);e.PeriodicTimer=l},function(t,e){"use strict";var n=function(){function t(t,e,n,i){var r=this;this.clear=e,this.timer=t(function(){r.timer&&(r.timer=i(r.timer))},n)}return t.prototype.isRunning=function(){return null!==this.timer},t.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var i=n(8);e.__esModule=!0,e.default=function(t,e,n){void 0!==this.authOptions.headers&&i.default.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var r=t.nextAuthCallbackID.toString();t.nextAuthCallbackID++;var o=t.getDocument(),a=o.createElement("script");t.auth_callbacks[r]=function(t){n(!1,t)};var s="Pusher.auth_callbacks['"+r+"']";a.src=this.options.authEndpoint+"?callback="+encodeURIComponent(s)+"&"+this.composeQuery(e);var c=o.getElementsByTagName("head")[0]||o.documentElement;c.insertBefore(a,c.firstChild)}},function(t,e){"use strict";var n=function(){function t(t){this.src=t}return t.prototype.send=function(t){var e=this,n="Error loading "+e.src;e.script=document.createElement("script"),e.script.id=t.id,e.script.src=e.src,e.script.type="text/javascript",e.script.charset="UTF-8",e.script.addEventListener?(e.script.onerror=function(){t.callback(n)},e.script.onload=function(){t.callback(null)}):e.script.onreadystatechange=function(){"loaded"!==e.script.readyState&&"complete"!==e.script.readyState||t.callback(null)},void 0===e.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(e.errorScript=document.createElement("script"),e.errorScript.id=t.id+"_error",e.errorScript.text=t.name+"('"+n+"');",e.script.async=e.errorScript.async=!1):e.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(e.script,i.firstChild),e.errorScript&&i.insertBefore(e.errorScript,e.script.nextSibling)},t.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var i=n(9),r=n(2),o=function(){function t(t,e){this.url=t,this.data=e}return t.prototype.send=function(t){if(!this.request){var e=i.buildQueryString(this.data),n=this.url+"/"+t.number+"?"+e;this.request=r.default.createScriptRequest(n),this.request.send(t)}},t.prototype.cleanup=function(){this.request&&this.request.cleanup()},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(2),r=n(4),o={name:"jsonp",getAgent:function(t,e){return function(n,o){var a="http"+(e?"s":"")+"://"+(t.host||t.options.host)+t.options.path,s=i.default.createJSONPRequest(a,n),c=i.default.ScriptReceivers.create(function(e,n){r.ScriptReceivers.remove(c),s.cleanup(),n&&n.host&&(t.host=n.host),o&&o(e,n)});s.send(c)}}};e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(19),r=n(21),o=n(20),a=n(2),s=n(3),c=n(9),l=new r.default({file:"sockjs",urls:o.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(t,e){return new window.SockJS(t,null,{js_path:s.Dependencies.getPath("sockjs",{encrypted:e.encrypted}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(t,e){t.send(JSON.stringify({path:e}))}}),u={isSupported:function(t){return a.default.isXDRSupported(t.encrypted)}},d=new r.default(c.extend({},i.streamingConfiguration,u)),p=new r.default(c.extend({},i.pollingConfiguration,u));i.default.xdr_streaming=d,i.default.xdr_polling=p,i.default.sockjs=l,e.__esModule=!0,e.default=i.default},function(t,e,n){"use strict";var i=n(20),r=n(21),o=n(9),a=n(2),s=new r.default({urls:i.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(a.default.getWebSocketAPI())},isSupported:function(){return Boolean(a.default.getWebSocketAPI())},getSocket:function(t){return a.default.createWebSocket(t)}}),c={urls:i.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};e.streamingConfiguration=o.extend({getSocket:function(t){return a.default.HTTPFactory.createStreamingSocket(t)}},c),e.pollingConfiguration=o.extend({getSocket:function(t){return a.default.HTTPFactory.createPollingSocket(t)}},c);var l={isSupported:function(){return a.default.isXHRSupported()}},u={ws:s,xhr_streaming:new r.default(o.extend({},e.streamingConfiguration,l)),xhr_polling:new r.default(o.extend({},e.pollingConfiguration,l))};e.__esModule=!0,e.default=u},function(t,e,n){"use strict";var i=n(5);function r(t,e,n){return t+(e.encrypted?"s":"")+"://"+(e.encrypted?e.hostEncrypted:e.hostUnencrypted)+n}function o(t,e){return"/app/"+t+("?protocol="+i.default.PROTOCOL+"&client=js&version="+i.default.VERSION+(e?"&"+e:""))}e.ws={getInitial:function(t,e){return r("ws",e,o(t,"flash=false"))}},e.http={getInitial:function(t,e){return r("http",e,(e.httpPath||"/pusher")+o(t))}},e.sockjs={getInitial:function(t,e){return r("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return o(t)}}},function(t,e,n){"use strict";var i=n(22),r=function(){function t(t){this.hooks=t}return t.prototype.isSupported=function(t){return this.hooks.isSupported(t)},t.prototype.createConnection=function(t,e,n,r){return new i.default(this.hooks,t,e,n,r)},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(11),o=n(9),a=n(23),s=n(8),c=n(2),l=function(t){function e(e,n,i,r,o){t.call(this),this.initialize=c.default.transportConnectionInitializer,this.hooks=e,this.name=n,this.priority=i,this.key=r,this.options=o,this.state="new",this.timeline=o.timeline,this.activityTimeout=o.activityTimeout,this.id=this.timeline.generateUniqueID()}return i(e,t),e.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},e.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},e.prototype.connect=function(){var t=this;if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return r.default.defer(function(){t.onError(e),t.changeState("closed")}),!1}return this.bindListeners(),s.default.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},e.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},e.prototype.send=function(t){var e=this;return"open"===this.state&&(r.default.defer(function(){e.socket&&e.socket.send(t)}),!0)},e.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},e.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},e.prototype.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))},e.prototype.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},e.prototype.onMessage=function(t){this.emit("message",t)},e.prototype.onActivity=function(){this.emit("activity")},e.prototype.bindListeners=function(){var t=this;this.socket.onopen=function(){t.onOpen()},this.socket.onerror=function(e){t.onError(e)},this.socket.onclose=function(e){t.onClose(e)},this.socket.onmessage=function(e){t.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=function(){t.onActivity()})},e.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},e.prototype.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},e.prototype.buildTimelineMessage=function(t){return o.extend({cid:this.id},t)},e}(a.default);e.__esModule=!0,e.default=l},function(t,e,n){"use strict";var i=n(24),r=Function("return this")(),o=function(){function t(t){this.callbacks=new i.default,this.global_callbacks=[],this.failThrough=t}return t.prototype.bind=function(t,e,n){return this.callbacks.add(t,e,n),this},t.prototype.bind_all=function(t){return this.global_callbacks.push(t),this},t.prototype.unbind=function(t,e,n){return this.callbacks.remove(t,e,n),this},t.prototype.unbind_all=function(t,e){return this.callbacks.remove(t,e),this},t.prototype.emit=function(t,e){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](t,e);var i=this.callbacks.get(t);if(i&&i.length>0)for(n=0;n<i.length;n++)i[n].fn.call(i[n].context||r,e);else this.failThrough&&this.failThrough(t,e);return this},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(9),r=function(){function t(){this._callbacks={}}return t.prototype.get=function(t){return this._callbacks[o(t)]},t.prototype.add=function(t,e,n){var i=o(t);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:e,context:n})},t.prototype.remove=function(t,e,n){if(t||e||n){var r=t?[o(t)]:i.keys(this._callbacks);e||n?this.removeCallback(r,e,n):this.removeAllCallbacks(r)}else this._callbacks={}},t.prototype.removeCallback=function(t,e,n){i.apply(t,function(t){this._callbacks[t]=i.filter(this._callbacks[t]||[],function(t){return e&&e!==t.fn||n&&n!==t.context}),0===this._callbacks[t].length&&delete this._callbacks[t]},this)},t.prototype.removeAllCallbacks=function(t){i.apply(t,function(t){delete this._callbacks[t]},this)},t}();function o(t){return"_"+t}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(){t.call(this);var e=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}return i(e,t),e.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},e}(n(23).default);e.NetInfo=r,e.Network=new r},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){var e;return e=t.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],[[":def","ws_options",{hostUnencrypted:t.wsHost+":"+t.wsPort,hostEncrypted:t.wsHost+":"+t.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:t.httpHost+":"+t.httpPort,hostEncrypted:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],e,":http_fallback_loop"]]]]]}},function(t,e,n){"use strict";var i=n(3);e.__esModule=!0,e.default=function(){var t=this;t.timeline.info(t.buildTimelineMessage({transport:t.name+(t.options.encrypted?"s":"")})),t.hooks.isInitialized()?t.changeState("initialized"):t.hooks.file?(t.changeState("initializing"),i.Dependencies.load(t.hooks.file,{encrypted:t.options.encrypted},function(e,n){t.hooks.isInitialized()?(t.changeState("initialized"),n(!0)):(e&&t.onError(e),t.onClose(),n(!1))})):t.onClose()}},function(t,e,n){"use strict";var i=n(29),r=n(31);r.default.createXDR=function(t,e){return this.createRequest(i.default,t,e)},e.__esModule=!0,e.default=r.default},function(t,e,n){"use strict";var i=n(30),r={getRequest:function(t){var e=new window.XDomainRequest;return e.ontimeout=function(){t.emit("error",new i.RequestTimedOut),t.close()},e.onerror=function(e){t.emit("error",e),t.close()},e.onprogress=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText),t.emit("finished",200),t.close()},e},abortRequest:function(t){t.ontimeout=t.onerror=t.onprogress=t.onload=null,t.abort()}};e.__esModule=!0,e.default=r},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.BadEventName=i;var r=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.RequestTimedOut=r;var o=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.TransportPriorityTooLow=o;var a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.TransportClosed=a;var s=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.UnsupportedTransport=s;var c=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.UnsupportedStrategy=c},function(t,e,n){"use strict";var i=n(32),r=n(33),o=n(35),a=n(36),s=n(37),c={createStreamingSocket:function(t){return this.createSocket(o.default,t)},createPollingSocket:function(t){return this.createSocket(a.default,t)},createSocket:function(t,e){return new r.default(t,e)},createXHR:function(t,e){return this.createRequest(s.default,t,e)},createRequest:function(t,e,n){return new i.default(t,e,n)}};e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(2),o=n(23),a=function(t){function e(e,n,i){t.call(this),this.hooks=e,this.method=n,this.url=i}return i(e,t),e.prototype.start=function(t){var e=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){e.close()},r.default.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)},e.prototype.close=function(){this.unloader&&(r.default.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},e.prototype.onChunk=function(t,e){for(;;){var n=this.advanceBuffer(e);if(!n)break;this.emit("chunk",{status:t,data:n})}this.isBufferTooLong(e)&&this.emit("buffer_too_long")},e.prototype.advanceBuffer=function(t){var e=t.slice(this.position),n=e.indexOf("\n");return-1!==n?(this.position+=n+1,e.slice(0,n)):null},e.prototype.isBufferTooLong=function(t){return this.position===t.length&&t.length>262144},e}(o.default);e.__esModule=!0,e.default=a},function(t,e,n){"use strict";var i=n(34),r=n(11),o=n(2),a=1,s=function(){function t(t,e){this.hooks=t,this.session=l(1e3)+"/"+function(t){for(var e=[],n=0;n<t;n++)e.push(l(32).toString(32));return e.join("")}(8),this.location=function(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}(e),this.readyState=i.default.CONNECTING,this.openStream()}return t.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},t.prototype.ping=function(){this.hooks.sendHeartbeat(this)},t.prototype.close=function(t,e){this.onClose(t,e,!0)},t.prototype.sendRaw=function(t){if(this.readyState!==i.default.OPEN)return!1;try{return o.default.createSocketRequest("POST",c((e=this.location,n=this.session,e.base+"/"+n+"/xhr_send"))).start(t),!0}catch(t){return!1}var e,n},t.prototype.reconnect=function(){this.closeStream(),this.openStream()},t.prototype.onClose=function(t,e,n){this.closeStream(),this.readyState=i.default.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:n})},t.prototype.onChunk=function(t){var e;if(200===t.status)switch(this.readyState===i.default.OPEN&&this.onActivity(),t.data.slice(0,1)){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var n=0;n<e.length;n++)this.onEvent(e[n]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0)}},t.prototype.onOpen=function(t){var e,n,r;this.readyState===i.default.CONNECTING?(t&&t.hostname&&(this.location.base=(e=this.location.base,n=t.hostname,(r=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e))[1]+n+r[3])),this.readyState=i.default.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},t.prototype.onEvent=function(t){this.readyState===i.default.OPEN&&this.onmessage&&this.onmessage({data:t})},t.prototype.onActivity=function(){this.onactivity&&this.onactivity()},t.prototype.onError=function(t){this.onerror&&this.onerror(t)},t.prototype.openStream=function(){var t=this;this.stream=o.default.createSocketRequest("POST",c(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(e){t.onChunk(e)}),this.stream.bind("finished",function(e){t.hooks.onFinished(t,e)}),this.stream.bind("buffer_too_long",function(){t.reconnect()});try{this.stream.start()}catch(e){r.default.defer(function(){t.onError(e),t.onClose(1006,"Could not start streaming",!1)})}},t.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},t}();function c(t){var e=-1===t.indexOf("?")?"?":"&";return t+e+"t="+ +new Date+"&n="+a++}function l(t){return Math.floor(Math.random()*t)}e.__esModule=!0,e.default=s},function(t,e){"use strict";var n;!function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=3]="CLOSED"}(n||(n={})),e.__esModule=!0,e.default=n},function(t,e){"use strict";e.__esModule=!0,e.default={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}}},function(t,e){"use strict";e.__esModule=!0,e.default={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}}},function(t,e,n){"use strict";var i=n(2),r={getRequest:function(t){var e=new(i.default.getXHRAPI());return e.onreadystatechange=e.onprogress=function(){switch(e.readyState){case 3:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText);break;case 4:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText),t.emit("finished",e.status),t.close()}},e},abortRequest:function(t){t.onreadystatechange=null,t.abort()}};e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=n(9),r=n(11),o=n(39),a=function(){function t(t,e,n){this.key=t,this.session=e,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return t.prototype.log=function(t,e){t<=this.options.level&&(this.events.push(i.extend({},e,{timestamp:r.default.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.prototype.error=function(t){this.log(o.default.ERROR,t)},t.prototype.info=function(t){this.log(o.default.INFO,t)},t.prototype.debug=function(t){this.log(o.default.DEBUG,t)},t.prototype.isEmpty=function(){return 0===this.events.length},t.prototype.send=function(t,e){var n=this,r=i.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(r,function(t,i){t||n.sent++,e&&e(t,i)}),!0},t.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},t}();e.__esModule=!0,e.default=a},function(t,e){"use strict";var n;!function(t){t[t.ERROR=3]="ERROR",t[t.INFO=6]="INFO",t[t.DEBUG=7]="DEBUG"}(n||(n={})),e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var i=n(9),r=n(11),o=n(41),a=n(30),s=n(55),c=n(56),l=n(57),u=n(58),d=n(59),p=n(60),f=n(61),_=n(2).default.Transports;e.build=function(t,e){return w(t,i.extend({},g,e))[1].strategy};var h={isSupported:function(){return!1},connect:function(t,e){var n=r.default.defer(function(){e(new a.UnsupportedStrategy)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};function m(t){return function(e){return[t.apply(this,arguments),e]}}var g={extend:function(t,e,n){return[i.extend({},e,n),t]},def:function(t,e,n){if(void 0!==t[e])throw"Redefining symbol "+e;return t[e]=n,[void 0,t]},def_transport:function(t,e,n,r,o,c){var l,u=_[n];if(!u)throw new a.UnsupportedTransport(n);l=!(t.enabledTransports&&-1===i.arrayIndexOf(t.enabledTransports,e)||t.disabledTransports&&-1!==i.arrayIndexOf(t.disabledTransports,e))?new s.default(e,r,c?c.getAssistant(u):u,i.extend({key:t.key,encrypted:t.encrypted,timeline:t.timeline,ignoreNullOrigin:t.ignoreNullOrigin},o)):h;var d=t.def(t,e,l)[1];return d.Transports=t.Transports||{},d.Transports[e]=l,[void 0,d]},transport_manager:m(function(t,e){return new o.default(e)}),sequential:m(function(t,e){var n=Array.prototype.slice.call(arguments,2);return new c.default(n,e)}),cached:m(function(t,e,n){return new u.default(n,t.Transports,{ttl:e,timeline:t.timeline,encrypted:t.encrypted})}),first_connected:m(function(t,e){return new f.default(e)}),best_connected_ever:m(function(){var t=Array.prototype.slice.call(arguments,1);return new l.default(t)}),delayed:m(function(t,e,n){return new d.default(n,{delay:e})}),if:m(function(t,e,n,i){return new p.default(e,n,i)}),is_supported:m(function(t,e){return function(){return e.isSupported()}})};function v(t){return"string"==typeof t&&":"===t.charAt(0)}function b(t,e){return e[t.slice(1)]}function y(t,e){if(v(t[0])){var n=b(t[0],e);if(t.length>1){if("function"!=typeof n)throw"Calling non-function "+t[0];var r=[i.extend({},e)].concat(i.map(t.slice(1),function(t){return w(t,i.extend({},e))[0]}));return n.apply(this,r)}return[n,e]}return function t(e,n){if(0===e.length)return[[],n];var i=w(e[0],n),r=t(e.slice(1),i[1]);return[[i[0]].concat(r[0]),r[1]]}(t,e)}function w(t,e){return"string"==typeof t?function(t,e){if(!v(t))return[t,e];var n=b(t,e);if(void 0===n)throw"Undefined symbol "+t;return[n,e]}(t,e):"object"==typeof t&&t instanceof Array&&t.length>0?y(t,e):[t,e]}},function(t,e,n){"use strict";var i=n(42),r=function(){function t(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return t.prototype.getAssistant=function(t){return i.default.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.prototype.isAlive=function(){return this.livesLeft>0},t.prototype.reportDeath=function(){this.livesLeft-=1},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=n(43),r=n(44),o=n(47),a=n(48),s=n(49),c=n(50),l=n(51),u=n(53),d=n(54),p={createChannels:function(){return new d.default},createConnectionManager:function(t,e){return new u.default(t,e)},createChannel:function(t,e){return new l.default(t,e)},createPrivateChannel:function(t,e){return new c.default(t,e)},createPresenceChannel:function(t,e){return new s.default(t,e)},createTimelineSender:function(t,e){return new a.default(t,e)},createAuthorizer:function(t,e){return new o.default(t,e)},createHandshake:function(t,e){return new r.default(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new i.default(t,e,n)}};e.__esModule=!0,e.default=p},function(t,e,n){"use strict";var i=n(11),r=n(9),o=function(){function t(t,e,n){this.manager=t,this.transport=e,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return t.prototype.createConnection=function(t,e,n,o){var a=this;o=r.extend({},o,{activityTimeout:this.pingDelay});var s=this.transport.createConnection(t,e,n,o),c=null,l=function(){s.unbind("open",l),s.bind("closed",u),c=i.default.now()},u=function(t){if(s.unbind("closed",u),1002===t.code||1003===t.code)a.manager.reportDeath();else if(!t.wasClean&&c){var e=i.default.now()-c;e<2*a.maxPingDelay&&(a.manager.reportDeath(),a.pingDelay=Math.max(e/2,a.minPingDelay))}};return s.bind("open",l),s},t.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(9),r=n(45),o=n(46),a=function(){function t(t,e){this.transport=t,this.callback=e,this.bindListeners()}return t.prototype.close=function(){this.unbindListeners(),this.transport.close()},t.prototype.bindListeners=function(){var t=this;this.onMessage=function(e){var n;t.unbindListeners();try{n=r.processHandshake(e)}catch(e){return t.finish("error",{error:e}),void t.transport.close()}"connected"===n.action?t.finish("connected",{connection:new o.default(n.id,t.transport),activityTimeout:n.activityTimeout}):(t.finish(n.action,{error:n.error}),t.transport.close())},this.onClosed=function(e){t.unbindListeners();var n=r.getCloseAction(e)||"backoff",i=r.getCloseError(e);t.finish(n,{error:i})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},t.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.prototype.finish=function(t,e){this.callback(i.extend({transport:this.transport,action:t},e))},t}();e.__esModule=!0,e.default=a},function(t,e){"use strict";e.decodeMessage=function(t){try{var e=JSON.parse(t.data);if("string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(t){if(!(t instanceof SyntaxError))throw t}return e}catch(e){throw{type:"MessageParseError",error:e,data:t.data}}},e.encodeMessage=function(t){return JSON.stringify(t)},e.processHandshake=function(t){if("pusher:connection_established"===(t=e.decodeMessage(t)).event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},e.getCloseAction=function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"ssl_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},e.getCloseError=function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(9),o=n(23),a=n(45),s=n(8),c=function(t){function e(e,n){t.call(this),this.id=e,this.transport=n,this.activityTimeout=n.activityTimeout,this.bindListeners()}return i(e,t),e.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},e.prototype.send=function(t){return this.transport.send(t)},e.prototype.send_event=function(t,e,n){var i={event:t,data:e};return n&&(i.channel=n),s.default.debug("Event sent",i),this.send(a.encodeMessage(i))},e.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},e.prototype.close=function(){this.transport.close()},e.prototype.bindListeners=function(){var t=this,e={message:function(e){var n;try{n=a.decodeMessage(e)}catch(n){t.emit("error",{type:"MessageParseError",error:n,data:e.data})}if(void 0!==n){switch(s.default.debug("Event recd",n),n.event){case"pusher:error":t.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong")}t.emit("message",n)}},activity:function(){t.emit("activity")},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(e){n(),e&&e.code&&t.handleCloseEvent(e),t.transport=null,t.emit("closed")}},n=function(){r.objectApply(e,function(e,n){t.transport.unbind(n,e)})};r.objectApply(e,function(e,n){t.transport.bind(n,e)})},e.prototype.handleCloseEvent=function(t){var e=a.getCloseAction(t),n=a.getCloseError(t);n&&this.emit("error",n),e&&this.emit(e)},e}(o.default);e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var i=n(2),r=function(){function t(t,e){this.channel=t;var n=e.authTransport;if(void 0===i.default.getAuthorizers()[n])throw"'"+n+"' is not a recognized auth transport";this.type=n,this.options=e,this.authOptions=(e||{}).auth||{}}return t.prototype.composeQuery=function(t){var e="socket_id="+encodeURIComponent(t)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return e},t.prototype.authorize=function(e,n){return t.authorizers=t.authorizers||i.default.getAuthorizers(),t.authorizers[this.type].call(this,i.default,e,n)},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=n(2),r=function(){function t(t,e){this.timeline=t,this.options=e||{}}return t.prototype.send=function(t,e){this.timeline.isEmpty()||this.timeline.send(i.default.TimelineTransport.getAgent(this,t),e)},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(50),o=n(8),a=n(52),s=function(t){function e(e,n){t.call(this,e,n),this.members=new a.default}return i(e,t),e.prototype.authorize=function(e,n){var i=this;t.prototype.authorize.call(this,e,function(t,e){if(!t){if(void 0===e.channel_data)return o.default.warn("Invalid auth response for channel '"+i.name+"', expected 'channel_data' field"),void n("Invalid auth response");var r=JSON.parse(e.channel_data);i.members.setMyID(r.user_id)}n(t,e)})},e.prototype.handleEvent=function(t,e){switch(t){case"pusher_internal:subscription_succeeded":this.members.onSubscription(e),this.subscribed=!0,this.emit("pusher:subscription_succeeded",this.members);break;case"pusher_internal:member_added":var n=this.members.addMember(e);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var i=this.members.removeMember(e);i&&this.emit("pusher:member_removed",i);break;default:r.default.prototype.handleEvent.call(this,t,e)}},e.prototype.disconnect=function(){this.members.reset(),t.prototype.disconnect.call(this)},e}(r.default);e.__esModule=!0,e.default=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(42),o=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.authorize=function(t,e){return r.default.createAuthorizer(this,this.pusher.config).authorize(t,e)},e}(n(51).default);e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(23),o=n(30),a=n(8),s=function(t){function e(e,n){t.call(this,function(t,n){a.default.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=n,this.subscribed=!1}return i(e,t),e.prototype.authorize=function(t,e){return e(!1,{})},e.prototype.trigger=function(t,e){if(0!==t.indexOf("client-"))throw new o.BadEventName("Event '"+t+"' does not start with 'client-'");return this.pusher.send_event(t,e,this.name)},e.prototype.disconnect=function(){this.subscribed=!1},e.prototype.handleEvent=function(t,e){0===t.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===t&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",e)):this.emit(t,e)},e.prototype.subscribe=function(){var t=this;this.authorize(this.pusher.connection.socket_id,function(e,n){e?t.handleEvent("pusher:subscription_error",n):t.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:t.name})})},e.prototype.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},e}(r.default);e.__esModule=!0,e.default=s},function(t,e,n){"use strict";var i=n(9),r=function(){function t(){this.reset()}return t.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},t.prototype.each=function(t){var e=this;i.objectApply(this.members,function(n,i){t(e.get(i))})},t.prototype.setMyID=function(t){this.myID=t},t.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},t.prototype.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},t.prototype.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},t.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(23),o=n(12),a=n(8),s=n(9),c=n(2),l=function(t){function e(e,n){var i=this;t.call(this),this.key=e,this.options=n||{},this.state="initialized",this.connection=null,this.encrypted=!!n.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var r=c.default.getNetwork();r.bind("online",function(){i.timeline.info({netinfo:"online"}),"connecting"!==i.state&&"unavailable"!==i.state||i.retryIn(0)}),r.bind("offline",function(){i.timeline.info({netinfo:"offline"}),i.connection&&i.sendActivityCheck()}),this.updateStrategy()}return i(e,t),e.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},e.prototype.send=function(t){return!!this.connection&&this.connection.send(t)},e.prototype.send_event=function(t,e,n){return!!this.connection&&this.connection.send_event(t,e,n)},e.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},e.prototype.isEncrypted=function(){return this.encrypted},e.prototype.startConnecting=function(){var t=this,e=function(n,i){n?t.runner=t.strategy.connect(0,e):"error"===i.action?(t.emit("error",{type:"HandshakeError",error:i.error}),t.timeline.error({handshakeError:i.error})):(t.abortConnecting(),t.handshakeCallbacks[i.action](i))};this.runner=this.strategy.connect(0,e)},e.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},e.prototype.disconnectInternally=function(){(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection)&&this.abandonConnection().close()},e.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},e.prototype.retryIn=function(t){var e=this;this.timeline.info({action:"retry",delay:t}),t>0&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new o.OneOffTimer(t||0,function(){e.disconnectInternally(),e.connect()})},e.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},e.prototype.setUnavailableTimer=function(){var t=this;this.unavailableTimer=new o.OneOffTimer(this.options.unavailableTimeout,function(){t.updateState("unavailable")})},e.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.prototype.sendActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new o.OneOffTimer(this.options.pongTimeout,function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.retryIn(0)})},e.prototype.resetActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.handlesActivityChecks()||(this.activityTimer=new o.OneOffTimer(this.activityTimeout,function(){t.sendActivityCheck()}))},e.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.prototype.buildConnectionCallbacks=function(){var t=this;return{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},activity:function(){t.resetActivityCheck()},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}}},e.prototype.buildHandshakeCallbacks=function(t){var e=this;return s.extend({},t,{connected:function(t){e.activityTimeout=Math.min(e.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected",{socket_id:e.socket_id})}})},e.prototype.buildErrorCallbacks=function(){var t=this,e=function(e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),e(n)}};return{ssl_only:e(function(){t.encrypted=!0,t.updateStrategy(),t.retryIn(0)}),refused:e(function(){t.disconnect()}),backoff:e(function(){t.retryIn(1e3)}),retry:e(function(){t.retryIn(0)})}},e.prototype.setConnection=function(t){for(var e in this.connection=t,this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},e.prototype.abandonConnection=function(){if(this.connection){for(var t in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}},e.prototype.updateState=function(t,e){var n=this.state;if(this.state=t,n!==t){var i=t;"connected"===i&&(i+=" with new socket ID "+e.socket_id),a.default.debug("State changed",n+" -> "+i),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:n,current:t}),this.emit(t,e)}},e.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},e}(r.default);e.__esModule=!0,e.default=l},function(t,e,n){"use strict";var i=n(9),r=n(42),o=function(){function t(){this.channels={}}return t.prototype.add=function(t,e){return this.channels[t]||(this.channels[t]=function(t,e){return 0===t.indexOf("private-")?r.default.createPrivateChannel(t,e):0===t.indexOf("presence-")?r.default.createPresenceChannel(t,e):r.default.createChannel(t,e)}(t,e)),this.channels[t]},t.prototype.all=function(){return i.values(this.channels)},t.prototype.find=function(t){return this.channels[t]},t.prototype.remove=function(t){var e=this.channels[t];return delete this.channels[t],e},t.prototype.disconnect=function(){i.objectApply(this.channels,function(t){t.disconnect()})},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(42),r=n(11),o=n(30),a=n(9),s=function(){function t(t,e,n,i){this.name=t,this.priority=e,this.transport=n,this.options=i||{}}return t.prototype.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})},t.prototype.connect=function(t,e){var n=this;if(!this.isSupported())return c(new o.UnsupportedStrategy,e);if(this.priority<t)return c(new o.TransportPriorityTooLow,e);var r=!1,s=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),l=null,u=function(){s.unbind("initialized",u),s.connect()},d=function(){l=i.default.createHandshake(s,function(t){r=!0,_(),e(null,t)})},p=function(t){_(),e(t)},f=function(){var t;_();try{t=JSON.stringify(s)}catch(e){t=a.safeJSONStringify(s)}e(new o.TransportClosed(t))},_=function(){s.unbind("initialized",u),s.unbind("open",d),s.unbind("error",p),s.unbind("closed",f)};return s.bind("initialized",u),s.bind("open",d),s.bind("error",p),s.bind("closed",f),s.initialize(),{abort:function(){r||(_(),l?l.close():s.close())},forceMinPriority:function(t){r||n.priority<t&&(l?l.close():s.close())}}},t}();function c(t,e){return r.default.defer(function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}e.__esModule=!0,e.default=s},function(t,e,n){"use strict";var i=n(9),r=n(11),o=n(12),a=function(){function t(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}return t.prototype.isSupported=function(){return i.any(this.strategies,r.default.method("isSupported"))},t.prototype.connect=function(t,e){var n=this,i=this.strategies,r=0,o=this.timeout,a=null,s=function(c,l){l?e(null,l):(r+=1,n.loop&&(r%=i.length),r<i.length?(o&&(o*=2,n.timeoutLimit&&(o=Math.min(o,n.timeoutLimit))),a=n.tryStrategy(i[r],t,{timeout:o,failFast:n.failFast},s)):e(!0))};return a=this.tryStrategy(i[r],t,{timeout:o,failFast:this.failFast},s),{abort:function(){a.abort()},forceMinPriority:function(e){t=e,a&&a.forceMinPriority(e)}}},t.prototype.tryStrategy=function(t,e,n,i){var r=null,a=null;return n.timeout>0&&(r=new o.OneOffTimer(n.timeout,function(){a.abort(),i(!0)})),a=t.connect(e,function(t,e){t&&r&&r.isRunning()&&!n.failFast||(r&&r.ensureAborted(),i(t,e))}),{abort:function(){r&&r.ensureAborted(),a.abort()},forceMinPriority:function(t){a.forceMinPriority(t)}}},t}();e.__esModule=!0,e.default=a},function(t,e,n){"use strict";var i=n(9),r=n(11),o=function(){function t(t){this.strategies=t}return t.prototype.isSupported=function(){return i.any(this.strategies,r.default.method("isSupported"))},t.prototype.connect=function(t,e){return function(t,e,n){var r=i.map(t,function(t,i,r,o){return t.connect(e,n(i,o))});return{abort:function(){i.apply(r,a)},forceMinPriority:function(t){i.apply(r,function(e){e.forceMinPriority(t)})}}}(this.strategies,t,function(t,n){return function(r,o){n[t].error=r,r?function(t){return i.all(t,function(t){return Boolean(t.error)})}(n)&&e(!0):(i.apply(n,function(t){t.forceMinPriority(o.transport.priority)}),e(null,o))}})},t}();function a(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(11),r=n(2),o=n(56),a=function(){function t(t,e,n){this.strategy=t,this.transports=e,this.ttl=n.ttl||18e5,this.encrypted=n.encrypted,this.timeline=n.timeline}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.encrypted,a=function(t){var e=r.default.getLocalStorage();if(e)try{var n=e[s(t)];if(n)return JSON.parse(n)}catch(e){c(t)}return null}(n),l=[this.strategy];if(a&&a.timestamp+this.ttl>=i.default.now()){var u=this.transports[a.transport];u&&(this.timeline.info({cached:!0,transport:a.transport,latency:a.latency}),l.push(new o.default([u],{timeout:2*a.latency+1e3,failFast:!0})))}var d=i.default.now(),p=l.pop().connect(t,function o(a,u){a?(c(n),l.length>0?(d=i.default.now(),p=l.pop().connect(t,o)):e(a)):(!function(t,e,n){var o=r.default.getLocalStorage();if(o)try{o[s(t)]=JSON.stringify({timestamp:i.default.now(),transport:e,latency:n})}catch(t){}}(n,u.transport.name,i.default.now()-d),e(null,u))});return{abort:function(){p.abort()},forceMinPriority:function(e){t=e,p&&p.forceMinPriority(e)}}},t}();function s(t){return"pusherTransport"+(t?"Encrypted":"Unencrypted")}function c(t){var e=r.default.getLocalStorage();if(e)try{delete e[s(t)]}catch(t){}}e.__esModule=!0,e.default=a},function(t,e,n){"use strict";var i=n(12),r=function(){function t(t,e){var n=e.delay;this.strategy=t,this.options={delay:n}}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n,r=this.strategy,o=new i.OneOffTimer(this.options.delay,function(){n=r.connect(t,e)});return{abort:function(){o.ensureAborted(),n&&n.abort()},forceMinPriority:function(e){t=e,n&&n.forceMinPriority(e)}}},t}();e.__esModule=!0,e.default=r},function(t,e){"use strict";var n=function(){function t(t,e,n){this.test=t,this.trueBranch=e,this.falseBranch=n}return t.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},t.prototype.connect=function(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)},t}();e.__esModule=!0,e.default=n},function(t,e){"use strict";var n=function(){function t(t){this.strategy=t}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.strategy.connect(t,function(t,i){i&&n.abort(),e(t,i)});return n},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var i=n(5);e.getGlobalConfig=function(){return{wsHost:i.default.host,wsPort:i.default.ws_port,wssPort:i.default.wss_port,httpHost:i.default.sockjs_host,httpPort:i.default.sockjs_http_port,httpsPort:i.default.sockjs_https_port,httpPath:i.default.sockjs_path,statsHost:i.default.stats_host,authEndpoint:i.default.channel_auth_endpoint,authTransport:i.default.channel_auth_transport,activity_timeout:i.default.activity_timeout,pong_timeout:i.default.pong_timeout,unavailable_timeout:i.default.unavailable_timeout}},e.getClusterConfig=function(t){return{wsHost:"ws-"+t+".pusher.com",httpHost:"sockjs-"+t+".pusher.com"}}}])},t.exports=i()},function(t,e){angular.module("genius").factory("PyongClient",["AppConfig","$http",function(t,e){var n=function(n,i,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o["".concat(i,"_id")]=r,e.post(t.api_root_url+n,o).then(function(t){return t.data.response[i]})};return{pyong:function(t,e){return n("/pyongs",t,e,{note_may_follow:!0})},finalizePyong:function(t,e,i){return n("/pyongs/finalize",t,e,{pyong_note:i})}}}])},function(t,e,n){"use strict";n.r(e);n(850);angular.module("genius").factory("querystring",[function(){return{stringify:function(t){return $.param(t)},parse:function(t){return $.deparam(t)}}}])},function(t,e,n){!function(e){try{var i=n(12)}catch(t){}t.exports=function(t){var e=function(t,e){var n={},i={true:!0,false:!1,null:null};return t.replace(/\+/g," ").split("&").forEach(function(t){var r,o=t.split("="),a=decodeURIComponent(o[0]),s=n,c=0,l=a.split("]["),u=l.length-1;if(/\[/.test(l[0])&&/\]$/.test(l[u])?(l[u]=l[u].replace(/\]$/,""),l=l.shift().split("[").concat(l),u=l.length-1):u=0,2===o.length)if(r=decodeURIComponent(o[1]),e&&(r=r&&!isNaN(r)&&+r+""===r?+r:"undefined"===r?void 0:void 0!==i[r]?i[r]:r),u)for(;c<=u;c++)a=""===l[c]?s.length:l[c],s=s[a]=c<u?s[a]||(l[c+1]&&isNaN(l[c+1])?{}:[]):r;else"[object Array]"===Object.prototype.toString.call(n[a])?n[a].push(r):!{}.hasOwnProperty.call(n,a)?n[a]=r:n[a]=[n[a],r];else a&&(n[a]=e?void 0:"")}),n};t&&(t.prototype.deparam=t.deparam=e);return e}(i)}()},function(t,e){angular.module("genius").factory("QuestionClient",["$http","$q","AppConfig","Reversible","ApiClient","Session",function(t,e,n,i,r,o){return{index:function(t,e,n){return n.text_format=o.user_signed_in?"html,markdown":"html",n["".concat(t,"_id")]=e,r.get("/questions",n)},create_if_not_exists:function(t){return t.id?e.resolve(t):this.create(t.questionable_type,t.questionable_id,t)},create:function(i,r,o){var a={question:_.assign({},o,{body:o.body}),text_format:"plain"};return a["".concat(i,"_id")]=r,t.post("".concat(n.api_root_url,"/questions"),a).then(function(t){return _.assign(o,t.data.response.question),o}).catch(function(t){return e.reject(_.set(t.data.response,"message",t.data.meta.message))})},update:function(r,o){var a=i.modify(r,o.question);return t.put("".concat(n.api_root_url,"/questions/").concat(r.id),o,{params:{text_format:"html,markdown"}}).then(function(t){_.assign(r,t.data.response.question)}).catch(function(t){return a(),e.reject(new Error(t.data.meta.message))})},move:function(i,r){var o={direction:r};return t.put("".concat(n.api_root_url,"/questions/").concat(i.id,"/move"),o,{params:{text_format:"html,markdown"}}).then(function(t){_.assign(i,t.data.response.question)}).catch(function(t){return e.reject(new Error(t.data.meta.message))})},change_state:function(i,r){var o={state_event:r},a="".concat(n.api_root_url,"/questions/").concat(i.id,"/change_state");return t.put(a,o,{params:{text_format:"html,markdown"}}).then(function(t){_.assign(i,t.data.response.question)}).catch(function(t){return e.reject(new Error(t.data.meta.message))})}}}])},function(t,e){angular.module("genius").factory("ReferentClient",["$http","AppConfig","Session","querystring",function(t,e,n,i){return{refresh:function(t){return this.get(t.id).then(function(e){return _.assign(t,_.omit(e,"annotations")),_.each(t.annotations,function(t){_.each(e.annotations,function(e){e.id===t.id&&_.assign(t,e)})}),t})},get:function(i){var r={text_format:n.user_signed_in?"html,markdown,plain":"html,plain"};return t.get("".concat(e.api_root_url,"/referents/").concat(i),{params:r}).then(function(t){return t.data.response.referent})},bulk_load:function(r){var o=n.user_signed_in?"html,markdown,plain":"html,plain",a=i.stringify({text_format:o,ids:r});return t.get("".concat(e.api_root_url,"/referents/multi?").concat(a)).then(function(t){return t.data.response.referents})},create_referent:function(n){var r=i.stringify({text_format:"html"});return t.post("".concat(e.api_root_url,"/songs/").concat(n.song.id,"/referents?").concat(r),n).then(function(t){return t.data.response.referent})}}}])},function(t,e){angular.module("genius").factory("ReferentElementMap",function(){return new Map})},function(t,e){angular.module("genius").factory("ReferentHelper",["Session",function(t){var e=function(e){return{_editing:{_form_visible:!0},new:!0,referent_id:e.id,body:{markdown:"",html:""},authors:[{user:t.current_user,pinned_role:e.current_user_metadata.relationships.pinned_role}],created_at:parseInt(Date.now()/1e3),needs_exegesis:0===e.annotations.length}};return{display_mode_by_classification:function(e){return _.includes(["verified","cosigned"],e)?"green":"unreviewed"===e&&t.has_permission("see_unreviewed_referents",t.current_user)?"red":"yellow"},create_verified_annotation_placeholder:function(t){return _.assign(e(t),{verified:!0})},create_community_annotation_placeholder:function(t){return _.assign(e(t),{id:t.id})},range_or_contents_intersects_links_or_contains_images:function(t){var e=t.cloneContents();return!!e.querySelectorAll("img").length||!!(e.querySelectorAll("a").length||$(t.startContainer).closest("a").length||$(t.endContainer).closest("a").length)}}}])},function(t,e){angular.module("genius").factory("ReferentLocator",["$document","AppConfig","string_to_symbol_array","LyricsEditing","MarkdownPlaintextFinderRegex",function(t,e,n,i,r){var o=e.annotator_context_length,a=function(t){return t.replace(/\s+/g,"")},s=function(e){var n=t[0].createRange();return n.selectNodeContents(e),n},c=function(t,e){var n=s(e);return n.setEnd(t.startContainer,t.startOffset),a(function(t){var e=t.cloneContents();return $(e).find("[avoid-selection]").remove(),s(e)}(n).toString())},l=function(t,e){var n=s(e);n.setEnd(t.startContainer,t.startOffset);var o=$(n.cloneContents().children).html(),a=i.prepare_lyrics_for_editing(o),c=r(t.toString());return(a.markdown.match(c)||[]).length};return{calculate_referent_location:function(t,e){var i=n(c(t,e)),r=i.slice(-o),u=n(function(t,e){var n=s(e);return n.setStart(t.endContainer,t.endOffset),a(n.toString())}(t,e)).slice(0,o);return{previous_context:r.join(""),text:t.toString(),next_context:u.join(""),total_offset:i.length,occurrence_in_markdown:l(t,e)}},calculate_image_location:function(t,e){return{image_url:e.src,occurrence:$(t).find('img[src="'.concat(e.src,'"]')).index(e)+1}}}}])},function(t,e){angular.module("genius").factory("ReferentRegistry",["Preloader","ReferentClient",function(t,e){var n=new t(function(t){return e.bulk_load(t)}),i={referents:{},referent_ids:[]},r=function(t){var e=i.referents[t.id];Reflect.deleteProperty(e,"stub"),Object.assign(e,t)};return{get:function(t){var e=this.peek(t);return e&&e.stub&&n.load(t).then(r),e},peek:function(t){return i.referents[t]},first:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).after_referent_id,n=i.referent_ids.indexOf(e),r=_.find(i.referent_ids,function(e,r){return r>n&&t(i.referents[e])});return i.referents[r]},register:function(t){return i.referents[t.id]?i.referents[t.id]:(i.referents[t.id]=t,i.referent_ids.push(t.id),t)},bulk_preload:function(t){n.bulk_load(t)},preload_insert:function(t){n.insert(t.id,t)},preload_from_start:function(t){this.preload_around(i.referent_ids[0],t)},preload_around:function(t,e){var r=i.referent_ids.indexOf(t),o=_(i.referent_ids).sortBy(function(t){return Math.abs(_.indexOf(i.referent_ids,t)-r)}).value(),a=n.filter_unloaded(o).slice(0,e);n.bulk_load(a)},update_if_present:function(t){var e=this.peek(t.id);return e?(e.stub&&Object.assign(e,t),e):t},clear:function(){Object.assign(i,{referents:{},referent_ids:[]})},reset_fragments:function(){_.each(i.referents,function(t){t.fragments=[]})}}}])},function(t,e){angular.module("genius").factory("RetryFailureInterceptor",["$injector","$q",function(t,e){return{responseError:function(n){var i=n.config;return i.retries&&i.retries>0?(i.retries-=1,t.get("$http")(i)):e.reject(n)}}}])},function(t,e){angular.module("genius").factory("Reversible",["$parse",function(t){return{modify:function(e,n){var i,r={},o={};for(i in n)r[i]=t(i),_.has(e,i)&&(o[i]=r[i](e)),r[i].assign(e,n[i]);return function(){for(i in n)_.has(o,i)?r[i].assign(e,o[i]):i.split(".").reduce(function(t,e,n,i){if(t)return n===i.length-1?Reflect.deleteProperty(t,e):t[e]},e)}}}}])},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}angular.module("genius").factory("ScrollFocus",["$window","EventEmitter",function(t,e){var n=t.JSONStore,s=function(){function t(){a(this,t),this.elements=[]}return c(t,[{key:"clear",value:function(){_.invokeMap(this.elements,"remove")}},{key:"draw_area",value:function(t,e){this.draw({position:"absolute",backgroundColor:"rgba(255, 0, 0, 0.1)",border:"1px solid red",width:"100%",top:t,height:e-t})}},{key:"draw_line",value:function(t){this.draw({position:"absolute",border:"1px solid blue",width:"100%",height:1,top:t})}},{key:"draw",value:function(t){var e=$("<div>").css(t).appendTo("body");this.elements.push(e)}}]),t}();return function(l){function u(e,n){var o;a(this,u),(o=i(this,r(u).call(this))).elements=e,o.options=_.defaults({},n,{update_ms:10,topmost_offset:.25,bottommost_offset:.6,zone_radius:.1,container:$(t.document.body),scroll_frame:t}),o.debug=new s;var c=null;return o.scroll_handler=_.throttle(function(){o._draw_debug();var t=o._focused_element();t!==c&&(o.emit("update",t),c=t)},o.options.update_ms),$(o.options.scroll_frame).on("scroll",o.scroll_handler),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,e),c(u,[{key:"replace",value:function(t){this.elements=t}},{key:"destroy",value:function(){$(this.options.scroll_frame).off("scroll",this.scroll_handler)}},{key:"_focused_element",value:function(){for(var t=this._trigger_top(),e=this._element_zones(),n=0;n<e.length;n++){var i=e[n];if(i.top<t&&i.bottom>t)return this.elements[n]}return null}},{key:"_trigger_top",value:function(){var t=$(this.options.scroll_frame).height(),e=$(this.options.container),n=e.offset().top+e.height()-t,i=Math.min(1,$(this.options.scroll_frame).scrollTop()/n),r=this.options.bottommost_offset-this.options.topmost_offset;return(this.options.topmost_offset+i*r)*t}},{key:"_element_zones",value:function(){var t=$(this.options.scroll_frame).height(),e=this.options.zone_radius*t,n=this.options.container.getBoundingClientRect(),i=_.map(this.elements,function(t){var i=t.getBoundingClientRect();return{top:Math.max(n.top,i.top-e),bottom:Math.min(n.bottom,i.bottom+e)}});return _.eachCons(i,2,function(t,e){if(t.bottom>e.top){var n=t.bottom-e.top;t.bottom=t.bottom-n/2,e.top=e.top+n/2}}),i}},{key:"_draw_debug",value:function(){var t=this;if(n.get_object("scroll_focus_debug")){var e=$(this.options.scroll_frame).scrollTop();this.debug.clear(),this.debug.draw_line(e+this._trigger_top()),_.each(this._element_zones(),function(n){t.debug.draw_area(e+n.top,e+n.bottom)})}}}]),u}()}])},function(t,e){angular.module("genius").factory("ScrollPoint",["$window",function(t){var e={},n={};return e.register=function(t,i){e.has_point(t)&&n[t].push(i),n[t]=[i]},e.unregister=function(t,i){e.has_point(t)&&(n[t]=_.without(n[t],i),n[t].length||delete n[t])},e.scroll_to=function(i){t.requestAnimationFrame(function(){e.has_point(i)&&$("html, body").animate({scrollTop:n[i][0].offset().top})})},e.has_point=function(t){return!!n[t]},e}])},function(t,e){angular.module("genius").factory("SearchClient",["ApiClient",function(t){return{multi:function(e,n){return t.returning("sections").get("/search/multi",_.assign({q:e},n))},section:function(e,n,i){return t.transform(function(t){return{hits:t.sections[0].hits,next_page:t.next_page}}).get("/search/:section",_.assign({q:n,section:e},i))}}}])},function(t,e){angular.module("genius").factory("Session",["SessionConfig",function(t){return Object.create(Object.prototype,{has_permission:{value:function(t,e){return _.includes(_.get(e,"current_user_metadata.permissions"),t)}},has_feature:{value:function(e){return _.includes(_.get(t.current_user,"current_user_metadata.features"),e)}},user_signed_in:{get:function(){return!!this.current_user}},current_user:{get:function(){return t.current_user},set:function(e){t.current_user=e}}})}])},function(t,e){angular.module("genius").factory("SessionConfig",["$window",function(t){return t.SESSION_CONFIG}])},function(t,e){angular.module("genius").factory("ShimInnerHtmlProp",["$window",function(t){return _.once(function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");_.isUndefined(e.innerHTML)&&t.GeniusShimInnerHtml()})}])},function(t,e){angular.module("genius").factory("signed_out_created_content",["$window","Session",function(t,e){var n=t.sessionStorage,i={};return{add:function(t,i){if(!e.user_signed_in){var r=this.get();r[t]=r[t]||[],r[t].push(i),function(t){if(n)try{n.setItem("signed_out_created_content",JSON.stringify(t))}catch(t){if("QuotaExceededError"!==t.name)throw t}}(r)}},get:function(){return n?JSON.parse(n.getItem("signed_out_created_content")||"{}"):i},clear:function(){i={},n.removeItem("signed_out_created_content")}}}])},function(t,e){angular.module("genius").factory("SmartRouting",["$q","$routerRootComponent","$document","$injector","$location","mobile_device",function(t,e,n,i,r,o){var a=function(t){return e=function(e){return e.recognize(t)},i.invoke(["$rootRouter",e]);var e},s=function(n){return angular.element(e).empty()?a(n).then(function(e){var i=o?"mobile":"desktop",a=_.get(e,"component.routeData.data.clientRoutableOn");return a&&-1!==a.indexOf(i)?r.url(n):t.reject(Error("Cannot route with client"))}):t.reject(Error("No root routing component"))},c=function(t){n[0].location.href=t};return{navigate_to_absolute_url:function(t){var e=new URL(t);if(e.hostname!==n[0].location.hostname)return c(t);var i=e.pathname+e.search+e.hash;s(i).catch(function(e){return c(t)})}}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").factory("SongClient",["$q","$http","AppConfig","Session","querystring",function(t,e,i,r,o){return{autocomplete_api_endpoint:"".concat(i.api_root_url,"/search"),autocomplete_options:{parse:function(t){return _.map(t.response.hits,"result").map(function(t){return{data:["".concat(t.title," | ").concat(t.primary_artist.name),t],value:t,result:t}})},formatItem:function(t){var e="".concat(t[1].title,"<br>").concat(t[1].primary_artist.name);return t[1].new?"Create new: ".concat(e):e}},autocomplete:function(t){return e.get("".concat(i.api_root_url,"/search/song"),{params:{q:t}}).then(function(t){return _.map(_.get(t,"data.response.sections[0].hits",[]),"result")})},count_view:function(t){return e.post("".concat(i.api_root_url,"/songs/").concat(t,"/count_view"))},load_contributor_data:function(t){return e.get("".concat(i.api_root_url,"/songs/").concat(t,"/contributors")).then(function(t){return t.data.response.contributors})},load_iq_earners:function(t,n){var r=o.stringify(n);return e.get("".concat(i.api_root_url,"/songs/").concat(t,"/iq_earners?").concat(r)).then(function(t){return t.data.response.contributors})},load_annotation_open_data:function(t){return e.get("".concat(i.api_root_url,"/songs/").concat(t,"/annotation_open_data")).then(function(t){return t.data.response.annotation_open_data})},load_song:function(t){return e.get("".concat(i.api_root_url,"/songs/").concat(t),{params:{text_format:"html,markdown"}}).then(function(t){return t.data.response.song})},load_lyrics:function(t){return e.get("".concat(i.api_root_url,"/songs/").concat(t,"/lyrics")).then(function(t){return t.data.response.song_lyrics})},perform_action:function(n,o,a){var s=r.user_signed_in?"html,markdown":"html";return e.put("".concat(i.api_root_url,"/songs/").concat(n,"/").concat(o),a,{params:{text_format:s}}).then(function(t){return t.data.response.song},function(e){return t.reject(new Error(_.get(e,["data","meta","message"],"Error performing admin action")))})},delete:function(t){return e.delete("".concat(i.api_root_url,"/songs/").concat(t))},update:function(r,o){var a,s=(a=o,_(a).pick(["id","title","updated_by_human_at","spotify_uuid","youtube_url","soundcloud_url","custom_header_image_url","release_date_components","albums","tags","featured_video","youtube_start","custom_song_art_image_url","recording_location","custom_performances"].concat(n(_.map(i.external_song_match_purposes,function(t){return"apple_song_for_".concat(t)})))).merge(["producer_artists","featured_artists","writer_artists"].reduce(function(t,e){return a[e]&&(t[e]=_.map(a[e],function(t){return _.pick(t,"name")})),t},{})).tap(function(t){a.primary_artist&&(t.primary_artist=a.primary_artist.name),a.primary_tag&&(t.primary_tag_id=a.primary_tag.id),a.song_relationships&&(t.song_relationships_by_id=[],_.each(a.song_relationships,function(e){t.song_relationships_by_id.push({type:e.type,song_ids:_.compact(_.map(e.songs,"id"))})}))}).omit(_.isUndefined).value());return e.put("".concat(i.api_root_url,"/songs/").concat(r),{song:s},{params:{text_format:"html,markdown"}}).then(function(t){return t.data.response.song},function(e){return t.reject(_.set(e.data.response,"message",e.data.meta.message))})},save_lyrics:function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.put("".concat(i.api_root_url,"/songs/").concat(n.id,"/lyrics"),_.merge({lyrics:{body:{html:r}},client_timestamps:_.pick(n,["updated_by_human_at","lyrics_updated_at"])},o)).then(function(t){return t.data.response.song_lyrics},function(e){return t.reject(e.data)})},line_items:function(t,n){var r="".concat(i.api_root_url,"/songs/").concat(t,"/activity_stream/line_items"),o={text_format:"html",page:n};return e.get(r,{params:o}).then(function(t){return t.data.response})},for_artist:function(t,n){return e.get("".concat(i.api_root_url,"/artists/").concat(t,"/songs"),{params:n}).then(function(t){return t.data.response})},search_with_artist:function(t,n){return e.get("".concat(i.api_root_url,"/artists/").concat(t,"/songs/search"),{params:n||{}}).then(function(t){return t.data.response})},hot:function(t){return e.get("".concat(i.api_root_url,"/songs/hot"),{params:t||{}}).then(function(t){return t.data.response})},attribution_visualization:function(t){return e.get("".concat(i.api_root_url,"/songs/").concat(t,"/attribution_visualization")).then(function(t){return t.data.response.attribution_visualization})},preview_lyrics_for_export:function(t){return e.get("".concat(i.api_root_url,"/songs/").concat(t,"/preview_lyrics_for_export")).then(function(t){return t.data.response.preview_lyrics_for_export.lyrics})}}}])},function(t,e){angular.module("genius").factory("Soundcloud",["$sce","$http","querystring",function(t,e,n){var i={auto_play:!1,buying:!1,liking:!1,download:!1,sharing:!1,show_artwork:!1,show_comments:!1,show_playcount:!1,show_user:!1,hide_related:!0,visual:!1},r=function(t){return e.get("https://soundcloud.com/oembed",{params:{url:t,format:"json"}}).then(function(t){var e=(new DOMParser).parseFromString(t.data.html,"text/html").querySelector("iframe").src.split("?")[1];return n.parse(e)})};return{oembed_url_for_src:function(t){return r(t).then(function(t){return t.url})},player_url_for_src:function(e){return r(e).then(function(e){var r=n.stringify(_.assign(e,i));return t.trustAsResourceUrl("https://w.soundcloud.com/player/?".concat(r))})}}}])},function(t,e){angular.module("genius").factory("SpotifyAnnotationClient",["$http",function(t){return{save_song:function(e,n,i){return t.post("/spotify_annotations/bulk_update",{song_id:e,spotify_annotations:i,spotify_song:{note:n.note,lock_version:n.lock_version,finalized:n.finalized}}).then(function(t){return t.data})},load_song:function(e){return t.get("/songs/".concat(e,"/spotify_annotations")).then(function(t){return t.data})}}}])},function(t,e){angular.module("genius").factory("SpotifyClient",["$http",function(t){return{load_artist_metadata:function(e){var n="https://api.spotify.com/v1/artists/"+e,i=$("[data-spotify-access-token]").attr("data-spotify-access-token");return i&&(n+="?access_token="+i),t.get(n).then(function(t){return t.data})}}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("SpotifyPlayer",["$interval","$q","$timeout","SpotifyPlayerClient","SpotifySocket",function(t,e,r,o,a){var s=50,c=3500,l=function(t){var e,n;return function(i){clearTimeout(e),i.is_playing||!1===n?t(i):e=setTimeout(function(){return t(i)},500),n=i.is_playing}};return function(){function u(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),this._callback=e,this._position_offset=0,this._last_player_state_update_at=0,this._pending_actions=[],this._log_entries=[],this._socket=new a;var i=l(this._on_player_state_changed.bind(this));this._socket.on("player_state_changed",function(t){n._log({label:"player_state_changed",raw_state:t}),i(t)}),t(function(){return n._callback(n.state)},s),t(function(){return n._force_update()},c),this._force_update()}var d,p,f;return d=u,(p=[{key:"pause",value:function(){var t=this;return this._log({label:"action_start",action_name:"pause"}),this._request_and_expect({action_name:"pause",request:function(){return o.pause()},expect:function(){return!t.is_playing}})}},{key:"play",value:function(t){var e=this;return this._log({label:"action_start",action_name:"play",action_arguments:{track_uri:t}}),this._request_and_expect({action_name:"play",request:function(){return o.play(t===e.track_uri?null:t)},expect:function(){return e.is_playing&&(!t||t===e.track_uri)}})}},{key:"seek",value:function(t){var e=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{play:!1}).play;return t=Number(t),this._log({label:"action_start",action_name:"seek",action_arguments:{position:t,play:n}}),this._request_and_expect({action_name:"seek",request:function(){return o.seek(t)},expect:function(){return Math.abs(e._player_state_message.state.progress_ms-t)<1e3}}).then(function(){return n?e.play():e.state})}},{key:"print_log_entries",value:function(){console.log(this._log_entries)}},{key:"download_log_entries",value:function(){var t=new Blob([JSON.stringify(this._log_entries)],{type:"text/csv"}),e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="spotify_player_log_".concat(Date.now(),".json"),e.click()}},{key:"_force_update",value:function(){o.shuffle(!1)}},{key:"_on_player_state_changed",value:function(t){var e=this;_.get(this._player_state_message,"event_id",0)>=t.event_id?alert("An irregular event has occurred. Please download the player log and forward it to engineering, along with a description of the network connection of your player device (wifi, ethernet, etc)"):(this._last_player_state_update_at=Date.now(),this._new_state_should_update_position_offset(t)&&(this._position_offset=this._last_player_state_update_at-t.state.timestamp),this._player_state_message=t,this._pending_actions.forEach(function(t){t.expect()&&t.deferred.resolve(e.state)}))}},{key:"_new_state_should_update_position_offset",value:function(t){var e=t.state;return!!this._player_state_message&&(this.is_playing!==e.is_playing||Math.abs(this._position_without_offset-e.progress_ms)>5e3)}},{key:"_request_and_expect",value:function(t){var n=this,i=t.request,o=t.expect,a=t.action_name;if(o())return e.when(this.state);var s,c={expect:o,deferred:e.defer()};return this._pending_actions.push(c),c.deferred.promise.finally(function(){r.cancel(s),_.pull(n._pending_actions,c)}),i().then(function(){s=r(function(){n._log({label:"action_timeout",action_name:a}),c.deferred.reject(new Error("Timeout"))},500)}).catch(function(t){n._log({label:"action_error",action_name:a,error:t}),c.deferred.reject(t)}),c.deferred.promise.then(function(t){return n._log({label:"action_success",action_name:a,result:t}),t})}},{key:"_log",value:function(t){this._log_entries=[].concat(n(_.takeRight(this._log_entries,5e3)),[_.extend(t,{state:this.state,timestamp:Date.now(),pending_action_count:this._pending_actions.length})])}},{key:"is_playing",get:function(){return _.get(this._player_state_message,["state","is_playing"],!1)}},{key:"position",get:function(){return this._player_state_message?Math.max(this._position_without_offset-this._position_offset,0):0}},{key:"track",get:function(){return _.get(this._player_state_message,["state","item"],null)}},{key:"track_uri",get:function(){return _.get(this.track,["linked_from","uri"])||_.get(this.track,"uri")||null}},{key:"state",get:function(){return _.pick(this,["is_playing","position","track","track_uri"])}},{key:"playback_type",get:function(){return"spotify"}},{key:"playback_label",get:function(){return"Spotify Websocket"}},{key:"_position_without_offset",get:function(){if(!this._player_state_message)return 0;var t=this.is_playing?Date.now()-this._last_player_state_update_at:0;return this._player_state_message.state.progress_ms+t}}])&&i(d.prototype,p),f&&i(d,f),u}()}])},function(t,e){angular.module("genius").factory("SpotifyPlayerClient",["$http","$q","IdentityClient",function(t,e,n){var i,r=function(){return _.get(i,"expires_at",0)>Date.now()/1e3?e.when(i.token):n.spotify_credentials().then(function(t){return(i=t).token})},o=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.params,a=i.data;return r().then(function(i){return t({method:e,params:o,data:a,url:"https://api.spotify.com/v1".concat(n),headers:{Authorization:"Bearer ".concat(i)}})})};return{fresh_token:r,play:function(t){var e={};return t&&(e.uris=[t]),o("put","/me/player/play",{data:e})},pause:function(){return o("put","/me/player/pause")},seek:function(t){return o("put","/me/player/seek",{params:{position_ms:t}})},subscribe:function(t){return o("put","/me/notifications/player",{params:{connection_id:t}})},shuffle:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return o("put","/me/player/shuffle",{params:{state:t}})}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("SpotifySocket",["$interval","$rootScope","$timeout","SpotifyPlayerClient",function(t,e,i,r){var o=1e4,a=JSON.stringify({type:"ping"}),s=["message","error","close"];return function(){function c(){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),_.bindAll(this,["_on_message","_on_error","_on_close"]),this._connection_id=null,this._scope=e.$new(!0),this._connect(),t(function(){return n._ping()},o)}var l,u,d;return l=c,(u=[{key:"on",value:function(t,e){this._scope.$on(t,function(t,n){return e(n)})}},{key:"_connect",value:function(){var t=this;return r.fresh_token().then(function(e){t._websocket&&t._dispose(),t._websocket=new WebSocket("wss://dealer.spotify.com?access_token=".concat(e)),s.forEach(function(e){return t._websocket.addEventListener(e,t["_on_".concat(e)])})})}},{key:"_ping",value:function(){var t=this;this.is_closed?this._connect():this.is_open&&(this._reconnect_timer=i(function(){return t._websocket.close()},1e3),this._websocket.send(a))}},{key:"_on_message",value:function(t){var e=this,n=JSON.parse(t.data);if("pong"!==n.type){var o=_.get(n,["headers","Spotify-Connection-Id"]);o&&o!==this._connection_id&&r.subscribe(o).then(function(){e._connection_id=o}),_(n.payloads||[]).flatMap("events").each(function(t){var n=t.type,i=t.event;e._scope.$emit(n.toLowerCase(),i)})}else i.cancel(this._reconnect_timer)}},{key:"_on_error",value:function(t){this._scope.$emit("error",t),this._websocket.close()}},{key:"_on_close",value:function(){this._connection_id=null,this._connect()}},{key:"_dispose",value:function(){var t=this;s.forEach(function(e){return t._websocket.removeEventListener(e,t["_on_".concat(e)])}),this._websocket.close()}},{key:"is_open",get:function(){return _.get(this._websocket,"readyState")===WebSocket.OPEN}},{key:"is_closed",get:function(){return _.get(this._websocket,"readyState")===WebSocket.CLOSED}}])&&n(l.prototype,u),d&&n(l,d),c}()}])},function(t,e){angular.module("genius").factory("StopWatch",["$window",function(t){return t.StopWatch}])},function(t,e){angular.module("genius").factory("StoryClient",["ApiClient",function(t){return{index:function(e){return t.get("/stories",e)}}}])},function(t,e){angular.module("genius").factory("string_has_unmatched_parentheses",[function(){return function(t){var e,n,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).parentheses,r=void 0===i?"[]()":i,o=[];for(e=0;n=t[e++];){var a=r.indexOf(n);if(!(a<0))if(Boolean(a%2)){if(!o.length||r.indexOf(o.pop())!==a-1)return!0}else o.push(n)}return o.length>0}}])},function(t,e){angular.module("genius").factory("string_to_symbol_array",function(){var t=new RegExp("".concat("[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]","|").concat("[\\u0000-\\uFFFF]"),"g");return function(e){return e.match(t)||[]}})},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("StructuredText",[function(){var t=String.fromCodePoint(parseInt("E000",16)+1),e=String.fromCodePoint(parseInt("E000",16)+2),i=/<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>/g,r=new RegExp("".concat(e,"|\\]\\(\\d+\\)|").concat(i.source),"g"),o=/\]\(\d+\)|<\/[^>]+>/,a=new RegExp("".concat(e,"|<\\w+(?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])+>")),s=new RegExp("".concat(i.source,"\\s?<\\/[^>]+>|\\[\\]\\(\\d+\\)"),"gm"),c=/(?:\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^[\]])*)\]\([ \t]*<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/gm,l=function(e){return _.pad("",e,t)},u=function(e){return e.replace(c,function(e,n,i){return"".concat(t).concat(n).concat(l(i.length+3))}).replace(i,function(t){return l(t.length)})};return function(){function l(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),this._string=n.replace(c,function(t,n,i){return"".concat(e).concat(n,"](").concat(i,")")});for(var i=u(n).split(""),r=0,o=0;o<i.length;o++)i[o]!==t&&r++;this.plain_to_structured_indices=new Array(r);for(var a=0,s=0;s<i.length;s++)i[s]!==t&&(this.plain_to_structured_indices[a]=s,a++)}var d,p,f;return d=l,(p=[{key:"remove_range",value:function(t,e){var n=this.plain_to_structured_indices[t],i=this.plain_to_structured_indices[e]||_.last(this.plain_to_structured_indices)+1,o=(this._string.substring(n,i).match(r)||[]).join("");return new this.constructor(this.string.substring(0,n)+o+this.string.substring(i))}},{key:"insert_at",value:function(t,e){var n=this.plain_to_structured_indices[t]||_.last(this.plain_to_structured_indices)+1,i=this._string.substring(0,n),r=this._string.substring(n),s=i.match(new RegExp("(?:".concat(a.source,")$"))),c=i.match(new RegExp("(?:".concat(o.source,")$"))),l=r.match(new RegExp("^(?:".concat(a.source,")"))),u=r.match(new RegExp("^(?:".concat(o.source,")"))),d=/^\n|\n$/.test(e);return s&&d?n-=s[0].length:u&&d?n+=u[0].length:!c||l||d?!l||c||d||(n+=l[0].length):n-=c[0].length,new this.constructor(this.string.substring(0,n)+e+this.string.substring(n))}},{key:"string",get:function(){return this._string.replace(new RegExp("".concat(e),"g"),"[")}},{key:"plain",get:function(){return this.string.replace(c,function(t,e){return e}).replace(i,"")}},{key:"structured",get:function(){return this.string.replace(s,"")}}])&&n(d.prototype,p),f&&n(d,f),l}()}])},function(t,e){angular.module("genius").factory("taboola",["$window","getScript","SessionConfig",function(t,e,n){return t._taboola=t._taboola||[],t._taboola.push({article:"auto"}),n.taboola_enabled&&e("//cdn.taboola.com/libtrc/genius/loader.js",{cache:!0}),{enabled:n.taboola_enabled,push_and_flush:function(e){t._taboola.push(e),t._taboola.push({flush:!0})}}}])},function(t,e){angular.module("genius").factory("TagClient",["$http","AppConfig",function(t,e){return{autocomplete:function(n){return t.get("".concat(e.api_root_url,"/tags/autocomplete"),{params:{q:n}}).then(function(t){return t.data.response.tags})},primary:function(){return t.get("".concat(e.api_root_url,"/tags/home")).then(function(t){return t.data.response.tags})}}}])},function(t,e,n){"use strict";n.r(e);n(134),n(882);angular.module("genius").factory("TetherDrop",["$window",function(t){return t.Drop}])},function(t,e,n){(function(e){t.exports=e.Drop=n(883)}).call(this,n(1))},function(t,e,n){var i,r,o;/*! tether-drop 1.5.0 */r=[n(134)],void 0===(o="function"==typeof(i=function(t){"use strict";var e=Function.prototype.bind,n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t,e,n){for(var i=!0;i;){var r=t,o=e,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var c=s.get;if(void 0===c)return;return c.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;t=l,e=o,n=a,i=!0,s=l=void 0}},o=t.Utils,a=o.extend,s=o.addClass,c=o.removeClass,l=o.hasClass,u=o.Evented;function d(t){var e=t.split(" "),i=n(e,2),r=i[0],o=i[1];if(["left","right"].indexOf(r)>=0){var a=[o,r];r=a[0],o=a[1]}return[r,o].join(" ")}function p(t,e){for(var n=void 0,i=[];-1!==(n=t.indexOf(e));)i.push(t.splice(n,1));return i}var f=["click"];"ontouchstart"in document.documentElement&&f.push("touchstart");var _={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},h="";for(var m in _)if({}.hasOwnProperty.call(_,m)){var g=document.createElement("p");void 0!==g.style[m]&&(h=_[m])}var v={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},b={},y=function n(){var o=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],_=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return new(e.apply(g,[null].concat(n)))};a(_,{createContext:n,drops:[],defaults:{}});var m={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,openDelay:0,closeDelay:50,focusDelay:null,blurDelay:null,hoverOpenDelay:null,hoverCloseDelay:null,loadContentOnDemand:!1,tetherOptions:{}}};a(_,m,o),a(_.defaults,m.defaults,o.defaults),void 0===b[_.classPrefix]&&(b[_.classPrefix]=[]),_.updateBodyClasses=function(){for(var t=!1,e=b[_.classPrefix],n=e.length,i=0;i<n;++i)if(e[i].isOpened()){t=!0;break}t?s(document.body,_.classPrefix+"-open"):c(document.body,_.classPrefix+"-open")};var g=function(e){function n(t){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),r(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.options=a({},_.defaults,t),this.target=this.options.target,void 0===this.target)throw new Error("Drop Error: You must provide a target.");var e="data-"+_.classPrefix,i=this.target.getAttribute(e);i&&(this.options.content=i);for(var o=["position","openOn"],c=0;c<o.length;++c){var l=this.target.getAttribute(e+"-"+o[c]);l&&(this.options[o[c]]=l)}this.options.classes&&!1!==this.options.addTargetClasses&&s(this.target,this.options.classes),_.drops.push(this),b[_.classPrefix].push(this),this._boundEvents=[],this.bindMethods(),this.setupElements(),this.setupEvents(),this.setupTether()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),i(n,[{key:"_on",value:function(t,e,n){this._boundEvents.push({element:t,event:e,handler:n}),t.addEventListener(e,n)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var t=this;if(this.drop=document.createElement("div"),s(this.drop,_.classPrefix),this.options.classes&&s(this.drop,this.options.classes),this.content=document.createElement("div"),s(this.content,_.classPrefix+"-content"),"function"==typeof this.options.content){var e=function(){var e=t.options.content.call(t,t);if("string"==typeof e)t.content.innerHTML=e;else{if("object"!=typeof e)throw new Error("Drop Error: Content function should return a string or HTMLElement.");t.content.innerHTML="",t.content.appendChild(e)}};this.options.loadContentOnDemand?this.on("beforeOpen",e.bind(this)):(e(),this.on("open",e.bind(this)))}else"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var e=this.options.position.split(" ");e[0]=v[e[0]],e=e.join(" ");var n=[];this.options.constrainToScrollParent?n.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):n.push({to:"scrollParent"}),!1!==this.options.constrainToWindow?n.push({to:"window",attachment:"together"}):n.push({to:"window"});var i={element:this.drop,target:this.target,attachment:d(e),targetAttachment:d(this.options.position),classPrefix:_.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:n,addTargetClasses:this.options.addTargetClasses};!1!==this.options.tetherOptions&&(this.tether=new t(a({},i,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var t=this;if(this.options.openOn)if("always"!==this.options.openOn){var e=this.options.openOn.split(" ");if(e.indexOf("click")>=0)for(var n=function(e){t.toggle(e),e.preventDefault()},i=function(e){t.isOpened()&&(e.target===t.drop||t.drop.contains(e.target)||e.target===t.target||t.target.contains(e.target)||t.close(e))},r=0;r<f.length;++r){var o=f[r];this._on(this.target,o,n),this._on(document,o,i)}var a=null,s=null,c=function(e){null!==s?clearTimeout(s):a=setTimeout(function(){t.open(e),a=null},("focus"===e.type?t.options.focusDelay:t.options.hoverOpenDelay)||t.options.openDelay)},l=function(e){null!==a?clearTimeout(a):s=setTimeout(function(){t.close(e),s=null},("blur"===e.type?t.options.blurDelay:t.options.hoverCloseDelay)||t.options.closeDelay)};e.indexOf("hover")>=0&&(this._on(this.target,"mouseover",c),this._on(this.drop,"mouseover",c),this._on(this.target,"mouseout",l),this._on(this.drop,"mouseout",l)),e.indexOf("focus")>=0&&(this._on(this.target,"focus",c),this._on(this.drop,"focus",c),this._on(this.target,"blur",l),this._on(this.drop,"blur",l))}else setTimeout(this.open.bind(this))}},{key:"isOpened",value:function(){if(this.drop)return l(this.drop,_.classPrefix+"-open")}},{key:"toggle",value:function(t){this.isOpened()?this.close(t):this.open(t)}},{key:"open",value:function(t){var e=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),void 0!==this.tether&&this.tether.enable(),s(this.drop,_.classPrefix+"-open"),s(this.drop,_.classPrefix+"-open-transitionend"),setTimeout(function(){e.drop&&s(e.drop,_.classPrefix+"-after-open")}),this.trigger("beforeOpen"),void 0!==this.tether&&this.tether.position(),this.trigger("open"),_.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(t){t.target===t.currentTarget&&(l(this.drop,_.classPrefix+"-open")||c(this.drop,_.classPrefix+"-open-transitionend"),this.drop.removeEventListener(h,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(t){var e=!0;return this.isClosing||"function"!=typeof this.options.beforeClose||(this.isClosing=!0,e=!1!==this.options.beforeClose(t,this)),this.isClosing=!1,e}},{key:"close",value:function(t){this.isOpened()&&this.beforeCloseHandler(t)&&(c(this.drop,_.classPrefix+"-open"),c(this.drop,_.classPrefix+"-after-open"),this.drop.addEventListener(h,this.transitionEndHandler),this.trigger("close"),void 0!==this.tether&&this.tether.disable(),_.updateBodyClasses(),this.options.remove&&this.remove(t))}},{key:"remove",value:function(t){this.close(t),this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&void 0!==this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove(),void 0!==this.tether&&this.tether.destroy();for(var t=0;t<this._boundEvents.length;++t){var e=this._boundEvents[t],n=e.element,i=e.event,r=e.handler;n.removeEventListener(i,r)}this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,p(b[_.classPrefix],this),p(_.drops,this)}}]),n}(u);return _}();return document.addEventListener("DOMContentLoaded",function(){y.updateBodyClasses()}),y})?i.apply(e,r):i)||(t.exports=o)},function(t,e){angular.module("genius").factory("TextSelection",["$window","$document","$rootScope","$immediate","XpathRange",function(t,e,n,i,r){var o=n.$new(),a=function(){var n=function(){var n=(t.getSelection||e[0].getSelection||$.noop)();if(void 0!==n&&n.rangeCount&&!n.isCollapsed)return n}();return n?function(t){for(var e=[],n=0;n<t.rangeCount;n++){var i=t.getRangeAt(n);i.getBoundingClientRect().width>.1&&e.push(i)}return e}(n):[]},s=[],c=function(){var t=a();(function(t,e){return!(!t||!e)&&t.length===e.length&&_.every(_.zip(t,e),function(t){var e=t[0],n=t[1];return e.startOffset===n.startOffset&&e.endOffset===n.endOffset&&e.startContainer.isEqualNode(n.startContainer)&&e.endContainer.isEqualNode(n.endContainer)})})(t,s)||(s=t,o.$emit("selection",{ranges:t}))};return o.restore_selection_if_clobbered=function(t,e){var n,i=a();i.length&&(n=r.fromRange(i[0],t));var o=e();if(n&&!a().length){var s=r.toRange(n.start,n.startOffset,n.end,n.endOffset,t),l=getSelection();l.removeAllRanges(),l.addRange(s),c()}return o},e.on("mouseup keyup",function(t){(!t.keyCode||t.keyCode>=37&&t.keyCode<=40)&&i(c)}),o}])},function(t,e){angular.module("genius").factory("TimestampedDataFeed",[function(){var t=function(){return Math.floor((new Date).getTime()/1e3)};return function(){return function e(n,i){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t();!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset=function(){r.timestamp_for_next_page=a},this.reset(),this.params=_.clone(o),this.next=function(){return n(_.assign({timestamp_for_next_page:r.timestamp_for_next_page},r.params)).then(function(t){return r.timestamp_for_next_page=t.timestamp_for_next_page,t[i]})},this.has_next=function(){return r.timestamp_for_next_page}}}()}])},function(t,e){angular.module("genius").factory("TopBarIndicatorsLoader",["EagerLoader","$http","Session",function(t,e,n){var i=new t,r=function(){n.user_signed_in&&e.get("/top_bar_indicators",{retries:2}).then(function(t){for(var e in t.data)i.loaded(e,t.data[e])})};return r(),{listen_for:i.listen_for.bind(i),refresh:r}}])},function(t,e){window.JSONStore={get_object:function(t){try{return JSON.parse(localStorage.getItem(t))}catch(t){return null}},set_object:function(t,e){var n=JSON.stringify(e);try{localStorage.setItem(t,n)}catch(t){}},delete:function(t){try{localStorage.removeItem(t)}catch(t){}},modify_store:function(t,e){this.set_object(t,e(this.get_object(t)))}}},function(t,e){angular.module("genius").factory("Twitter",["$window","querystring",function(t,e){return{share:function(n){var i=e.stringify({url:n.url,text:n.message}),r="https://twitter.com/intent/tweet?".concat(i);t.open(r)}}}])},function(t,e){angular.module("genius").factory("UserClient",["ApiClient","$http","AppConfig","$q",function(t,e,n,i){var r=function(t){var e=new Error(t.data.meta.message);return _.assign(e,_.pick(t,"status","statusText")),i.reject(_.assign(e,t.data.response))},o={autocomplete_api_endpoint:"".concat(n.api_root_url,"/users/autocomplete"),transform_autocomplete_results:function(t){return t.response.users},contribution_opportunity_assignments:function(e){return t.get("/users/:id/contribution_opportunity_assignments",{id:e,text_format:"html,markdown"})},mark_contribution_opportunity_assignments_read:function(e){return t.post("/users/:id/contribution_opportunity_assignments/mark_read",{id:e})},dismiss_contribution_opportunities_explanation:function(e){return t.delete("/users/:id/contribution_opportunities_explanation",{id:e})},accomplishments:function(t,i){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/accomplishments"),{params:i}).then(function(t){return t.data.response})},autocomplete:function(t){var n=this;return e.get(this.autocomplete_api_endpoint,{params:{q:t}}).then(function(t){return n.transform_autocomplete_results(t.data)})},load:function(t){return e.get("".concat(n.api_root_url,"/users/").concat(t)).then(function(t){return t.data.response.user})},impersonate:function(t){return e.post("/users/impersonate",{login:t})},autocomplete_options:{parse:function(t){var e=o.transform_autocomplete_results(t);return _.map(e,function(t){return{data:[t.login],value:t.login,result:t.login}})}},load_followers_by_artist:function(t,i){return e.get("".concat(n.api_root_url,"/artists/").concat(t,"/followers"),{params:i}).then(function(t){return t.data.response})},load_followers_by_user:function(t,i){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/followers"),{params:i}).then(function(t){return t.data.response})},load_followed_users:function(t,i){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/followed_users"),{params:i}).then(function(t){return t.data.response})},load_contributions:function(t,i,r){var o=i?"/".concat(i):"";return e.get("".concat(n.api_root_url,"/users/").concat(t,"/contributions").concat(o),{params:r}).then(function(t){return t.data.response})},update:function(t,i){return e.put("".concat(n.api_root_url,"/users/").concat(t),i,{params:{text_format:"html,markdown"}}).then(function(t){return t.data.response}).catch(function(t){return r(t)})},load_recent_signups:function(t,i){return i.spam_state=t,e.get("".concat(n.api_root_url,"/users/recent_signups"),{params:i}).then(function(t){return t.data.response})},add_role:function(t,i){return e.put("".concat(n.api_root_url,"/users/").concat(t,"/roles/").concat(i)).then(function(t){return t.data.response}).catch(function(t){return r(t)})},remove_role:function(t,i){return e.delete("".concat(n.api_root_url,"/users/").concat(t,"/roles/").concat(i)).then(function(t){return t.data.response}).catch(function(t){return r(t)})},associate_with_artist:function(t,i){return e.put("".concat(n.api_root_url,"/users/").concat(t,"/artist"),i).then(function(t){return t.data.response}).catch(function(t){return r(t)})},dissociate_from_artist:function(t){return e.delete("".concat(n.api_root_url,"/users/").concat(t,"/artist")).then(function(t){return t.data.response}).catch(function(t){return r(t)})},penalty_box:function(t){return e.put("".concat(n.api_root_url,"/users/").concat(t,"/penalty_box")).then(function(t){return t.data.response}).catch(function(t){return r(t)})},unpenalty_box:function(t){return e.delete("".concat(n.api_root_url,"/users/").concat(t,"/penalty_box")).then(function(t){return t.data.response}).catch(function(t){return r(t)})},update_spam_state:function(t,i){return e.put("".concat(n.api_root_url,"/users/").concat(t,"/spam"),i).then(function(t){return t.data.response}).catch(function(t){return r(t)})},mass_delete_unreviewed_activity:function(t){return e.delete("".concat(n.api_root_url,"/users/").concat(t,"/unreviewed_activity")).then(function(t){return t.data.response}).catch(function(t){return r(t)})},delete_votes:function(t,i){return e.delete("".concat(n.api_root_url,"/users/").concat(t,"/").concat(i)).then(function(t){return t.data.response}).catch(function(t){return r(t)})},other_users_with_ip:function(t,i){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/other_users_with_ip"),{params:i}).then(function(t){return t.data.response})},get_slug:function(t){return _(this.get_path(t).split("/")).last()},get_path:function(t){return new URL(t.url).pathname},activity_line_items:function(t,i){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/activity_stream/line_items"),{params:i}).then(function(t){return t.data.response})},spam_status:function(t){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/spam_status")).then(function(t){return t.data.response})},logout:function(){return e.delete("/logout")}};return o}])},function(t,e){angular.module("genius").factory("VideoClient",["ApiClient",function(t){return{index:function(e){return t.get("/videos",e)}}}])},function(t,e){function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}angular.module("genius").factory("VideoListClient",["ApiClient",function(t){return{index:function(e){return t.get("/video_lists",e)},update:function(e,n){return t.returning("video_list").put("/video_lists/:id",{id:e,video_list:n})},videos:function(e,i){return t.get("/video_lists/by_slug/:slug/videos",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),r.forEach(function(e){n(t,e,i[e])})}return t}({slug:e},i))}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("VideoPlacement",["Tracking","VideoRegistry","$immediate",function(t,e,i){return function(){function r(t,n){var o=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.noop;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.object=t,this.name=n,i(function(){e.videos_for_placement(o.object,o.name).then(function(t){o.videos=t,o.track_loaded(),a(o.videos)}),o.page_type=e.current_page_type(o.object)})}var o,a,s;return o=r,(a=[{key:"tracking_data",value:function(t){return{"Page Type":this.page_type,Placement:this.name,Position:_.indexOf(this.videos,t)+1,"Video ID":t.id,Relevance:t.relevance,"Object Type":this.object._type,"Object ID":this.object.id}}},{key:"track_loaded",value:function(){var e=this,n={};_.forEach(this.videos,function(t){n[t.relevance]=n[t.relevance]||[],n[t.relevance].push(t)}),_.forEach(n,function(n,i){t.attach_to_delayed_track("Videos Loaded (placement: ".concat(e.name,", relevance: ").concat(i,")"),{IDs:_.map(n,"id")})})}}])&&n(o.prototype,a),s&&n(o,s),r}()}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}angular.module("genius").factory("VideoRegistry",["VideoClient","PagedDataFeed","$q","PromiseQueue","AppConfig","SessionConfig",function(t,e,r,o,a,s){var c=["high","medium","low"],l={},u=function(t){return"".concat(t._type,":").concat(t.id)},d=function t(e){i(this,t),this.video=e,this.claimed=!1},p=function(){function l(n,o){var s=this;i(this,l),this.name=o,this.placements=_.map(a.video_placements[o],"name"),"song"===n._type&&n.song_story&&_.remove(this.placements,function(t){return"sidebar"===t||"sidebar_thumb"===t}),this.placement_deferreds={},_.forEach(this.placements,function(t){s.placement_deferreds[t]=r.defer()}),this.videos_with_metadata=[];var c={};c["".concat(n._type,"_id")]=n.id,this.paged_data_feed=new e(t.index,"videos",c,1,function(t){s.videos_with_metadata=s.videos_with_metadata.concat(_.map(t,function(t){return new d(t)}))}),this.series_videos_with_metadata=[],this.series_paged_data_feed=new e(t.index,"videos",_.merge({series:!0},c),1,function(t){s.series_videos_with_metadata=s.series_videos_with_metadata.concat(_.map(t,function(t){return new d(t)}))}),this.resolve_placements()}var u,p,f;return u=l,(p=[{key:"next_unclaimed_video",value:function(t,e){var n=this,i=e?this.series_paged_data_feed:this.paged_data_feed,o=r.defer(),a=_.reject(e?this.series_videos_with_metadata:this.videos_with_metadata,"claimed");if(_.some(a)){var s=_.head(a);c.indexOf(s.video.relevance)<=c.indexOf(t)?o.resolve(s):o.reject()}else i.has_next()?i.next().then(function(){return o.resolve(n.next_unclaimed_video(t,e))}):o.reject();return o.promise}},{key:"resolve_placements",value:function(){var t=this,e=new o;_.forEach(this.placements,function(n){return e.add(function(){return t.resolve_placement(n)})})}},{key:"resolve_placement",value:function(t){var e=this,n=_.find(a.video_placements[this.name],{name:t}),i=s.fringe_enabled&&!_.isUndefined(n.fringe_min_relevance)?n.fringe_min_relevance:n.min_relevance,c=[],l=new o({fail_fast:!0}),u=_.times(n.max_videos,function(){return l.add(function(){return e.next_unclaimed_video(i,n.series).then(function(t){t.claimed=!0,c.push(t)})})});return r.all(u).finally(function(){return e.placement_deferreds[t].resolve(_.map(c,"video"))}),this.placement_deferreds[t].promise}},{key:"videos_for_placement",value:function(t){return this.placement_deferreds[t].promise}},{key:"videos",value:function(){return _.map(this.videos_with_metadata,"video")}}])&&n(u.prototype,p),f&&n(u,f),l}();return{current_page_type:function(t){return l[u(t)].name},register_page:function(t,e){l[u(t)]=new p(t,e)},videos_for_placement:function(t,e){return l[u(t)].videos_for_placement(e)},videos_for:function(t){return l[u(t)].videos()},paged_data_feed_for:function(t){return l[u(t)].paged_data_feed}}}])},function(t,e){angular.module("genius").factory("VideoSourcesClient",["ApiClient",function(t){return{index:function(e){return t.returning("video_sources").get("/videos/:video_id/video_sources",{video_id:e})},create:function(e,n){return t.returning("video_source").post("/videos/:video_id/video_sources",{video_id:e,video_source:n})},destroy:function(e){return t.delete("/video_sources/:video_source_id",{video_source_id:e})}}}])},function(t,e){angular.module("genius").factory("VoteClient",["AppConfig","querystring","$http",function(t,e,n){return{load_voters:function(i,r){var o=_.set({},"".concat(i,"_id"),r);return n.get("".concat(t.api_root_url,"/voters?").concat(e.stringify(o))).then(function(t){return t.data.response.voters})},submit_vote:function(e,i,r){var o=_.set({direction:r||"middle"},"".concat(e,"_id"),i);return n.post("".concat(t.api_root_url,"/votes"),o)}}}])},function(t,e){angular.module("genius").factory("wait_for_global",["$q","$window",function(t,e){return function(n,i){return _.get(e,n)?t.when(_.get(e,n)):(i=_.defaults(i||{},{timeout:1e3}),t(function(t,r){setTimeout(function(){clearInterval(o),r(new Error("timed out waiting for '".concat(n,"' to load")))},i.timeout);var o=setInterval(function(){var i=_.get(e,n);i&&(clearInterval(o),t(i))},50)}))}}])},function(t,e){angular.module("genius").factory("wait_until",["$q",function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(function(t,i){var r=setTimeout(function(){clearInterval(o),i(new Error("timed out waiting for condition"))},n.timeout||1e4),o=setInterval(function(){e()&&(clearInterval(o),clearTimeout(r),t())},50)})}}])},function(t,e,n){"use strict";n.r(e);n(899),n(900);angular.module("genius").factory("Waypoint",["$window",function(t){return t.Waypoint}])},function(t,e){
/*!
Waypoints - 4.0.0
Copyright  2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
!function(){"use strict";function t(i){if(!i)throw new Error("No options passed to Waypoint constructor");if(!i.element)throw new Error("No element option passed to Waypoint constructor");if(!i.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,i),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=i.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),n[this.key]=this,e+=1}var e=0,n={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete n[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var i in n)e.push(n[i]);for(var r=0,o=e.length;o>r;r++)e[r][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=r.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,i[t.waypointContextKey]=this,n+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,i={},r=window.Waypoint,o=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete i[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,r.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||r.isTouch)&&(e.didScroll=!0,r.requestAnimationFrame(t))})},e.prototype.handleResize=function(){r.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var n in e){var i=e[n],r=i.newScroll>i.oldScroll?i.forward:i.backward;for(var o in this.waypoints[n]){var a=this.waypoints[n][o],s=i.oldScroll<a.triggerPoint,c=i.newScroll>=a.triggerPoint;(s&&c||!s&&!c)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}for(var l in t)t[l].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?r.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?r.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var n in this.waypoints[e])t.push(this.waypoints[e][n]);for(var i=0,r=t.length;r>i;i++)t[i].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,n=e?void 0:this.adapter.offset(),i={};for(var o in this.handleScroll(),t={horizontal:{contextOffset:e?0:n.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:n.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var a=t[o];for(var s in this.waypoints[o]){var c,l,u,d,p=this.waypoints[o][s],f=p.options.offset,_=p.triggerPoint,h=0,m=null==_;p.element!==p.element.window&&(h=p.adapter.offset()[a.offsetProp]),"function"==typeof f?f=f.apply(p):"string"==typeof f&&(f=parseFloat(f),p.options.offset.indexOf("%")>-1&&(f=Math.ceil(a.contextDimension*f/100))),c=a.contextScroll-a.contextOffset,p.triggerPoint=h+c-f,l=_<a.oldScroll,u=p.triggerPoint>=a.oldScroll,d=!l&&!u,!m&&(l&&u)?(p.queueTrigger(a.backward),i[p.group.id]=p.group):!m&&d?(p.queueTrigger(a.forward),i[p.group.id]=p.group):m&&a.oldScroll>=p.triggerPoint&&(p.queueTrigger(a.forward),i[p.group.id]=p.group)}}return r.requestAnimationFrame(function(){for(var t in i)i[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in i)i[t].refresh()},e.findByElement=function(t){return i[t.waypointContextKey]},window.onload=function(){o&&o(),e.refreshAll()},r.requestAnimationFrame=function(e){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,e)},r.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function n(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}var i={vertical:{},horizontal:{}},r=window.Waypoint;n.prototype.add=function(t){this.waypoints.push(t)},n.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},n.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var i=this.triggerQueues[n],r="up"===n||"left"===n;i.sort(r?e:t);for(var o=0,a=i.length;a>o;o+=1){var s=i[o];(s.options.continuous||o===i.length-1)&&s.trigger([n])}}this.clearTriggerQueues()},n.prototype.next=function(e){this.waypoints.sort(t);var n=r.Adapter.inArray(e,this.waypoints);return n===this.waypoints.length-1?null:this.waypoints[n+1]},n.prototype.previous=function(e){this.waypoints.sort(t);var n=r.Adapter.inArray(e,this.waypoints);return n?this.waypoints[n-1]:null},n.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},n.prototype.remove=function(t){var e=r.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},n.prototype.first=function(){return this.waypoints[0]},n.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},n.findOrCreate=function(t){return i[t.axis][t.name]||new n(t)},r.Group=n}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,n=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,n){t.prototype[n]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[n].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(n,i){t[i]=e[i]}),n.adapters.push({name:"jquery",Adapter:t}),n.Adapter=t}(),function(){"use strict";function t(t){return function(){var n=[],i=arguments[0];return t.isFunction(arguments[0])&&((i=t.extend({},arguments[1])).handler=arguments[0]),this.each(function(){var r=t.extend({},i,{element:this});"string"==typeof r.context&&(r.context=t(this).closest(r.context)[0]),n.push(new e(r))}),n}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}()},function(t,e){
/*!
Waypoints Sticky Element Shortcut - 4.0.0
Copyright  2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
!function(){"use strict";function t(i){this.options=e.extend({},n.defaults,t.defaults,i),this.element=this.options.element,this.$element=e(this.element),this.createWrapper(),this.createWaypoint()}var e=window.jQuery,n=window.Waypoint;t.prototype.createWaypoint=function(){var t=this.options.handler;this.waypoint=new n(e.extend({},this.options,{element:this.wrapper,handler:e.proxy(function(e){var n=this.options.direction.indexOf(e)>-1,i=n?this.$element.outerHeight(!0):"";this.$wrapper.height(i),this.$element.toggleClass(this.options.stuckClass,n),t&&t.call(this,e)},this)}))},t.prototype.createWrapper=function(){this.options.wrapper&&this.$element.wrap(this.options.wrapper),this.$wrapper=this.$element.parent(),this.wrapper=this.$wrapper[0]},t.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass),this.options.wrapper&&this.$element.unwrap())},t.defaults={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right"},n.Sticky=t}()},function(t,e){angular.module("genius").factory("WebAnnotatorClient",["ApiClient",function(t){return{load_web_page:function(e){return t.returning("web_page").get("/web_pages/:id",{id:e})},protect_web_page:function(e){return t.returning("web_page").post("/web_pages/:id/protect",{id:e})},unprotect_web_page:function(e){return t.returning("web_page").post("/web_pages/:id/unprotect",{id:e})},publish_web_page_drafts:function(e){return t.returning("web_page").post("/web_pages/:id/publish_drafts",{id:e})},load_user_roles:function(e,n){return t.returning("user_web_page_roles").get("/:type/:id/user_roles",{type:e,id:n})},create_user_role:function(e,n,i){return t.returning("user_web_page_role").post("/:type/:id/user_roles",{type:e,id:n,user_web_page_role:i})},update_user_role:function(e,n){return t.returning("user_web_page_role").put("/user_web_page_roles/:id",{id:e,user_web_page_role:n})},destroy_user_role:function(e){return t.delete("/user_web_page_roles/:id",{id:e})}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("WebAudioPlayer",["$document","$interval",function(t,e){var i=50;return function(){function r(n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this._callback=n,this._audio=t[0].createElement("audio"),e(function(){return o._callback(o.state)},i)}var o,a,s;return o=r,(a=[{key:"pause",value:function(){this._audio.pause(),this._callback(this.state)}},{key:"play",value:function(t){t&&this._audio.src!==t&&(this._audio.src=t,this._audio.currentTime=0),this._audio.play(),this._callback(this.state)}},{key:"seek",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{play:!1}).play;this._audio.currentTime=t/1e3,e&&this._audio.play(),this._callback(this.state)}},{key:"print_log_entries",value:function(){}},{key:"download_log_entries",value:function(){}},{key:"state",get:function(){return{is_playing:!this._audio.paused,position:1e3*this._audio.currentTime,duration:1e3*this._audio.duration,track_uri:this._audio.src}}},{key:"playback_type",get:function(){return"web_audio"}},{key:"playback_label",get:function(){return"Web Audio"}}])&&n(o.prototype,a),s&&n(o,s),r}()}])},function(t,e){angular.module("genius").factory("WindowTitle",["$document",function(t){return{update_count:function(e){var n=e>0?"(".concat(e,") "):"";t[0].title=t[0].title.replace(/^(\(\d+\) )?/,n)}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}angular.module("genius").factory("Youtube",["$rootScope","$q","$timeout","$window","getScript","wait_for_global",function(t,e,i,r,o,a){var s={controls:0,enablejsapi:1,fs:0,iv_load_policy:3,modestbranding:1,rel:0,showinfo:0},c=e.defer(),l=c.promise.then(function(){return o("https://www.youtube.com/player_api",{cache:!0})}).then(function(){return a("YT.Player")});return function(){function o(n,i){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.state=t.$new(!0),this.deferred_load=e.defer(),this.player=this.deferred_load.promise.then(function(){return c.resolve(),l}).then(function(o){return e(function(e){var a=new o(n,{height:"100%",width:"100%",playerVars:_.defaults({controls:i.controls?2:0,fs:i.fullscreen?1:0,playsinline:i.playsinline?1:0},s),events:{onReady:function(){e(a)},onStateChange:function(){t.$apply(r.update_state.bind(r))},onError:function(){t.$apply(function(){r.state.has_errored=!0})}}})})})}var a,u,d;return a=o,(u=[{key:"load",value:function(){return this.deferred_load.resolve(),this.player}},{key:"cue_video_by_id",value:function(t,e){var n=this;this.player.then(function(i){i.cueVideoById(t,e),n.state.placeholder="https://i.ytimg.com/vi/".concat(t,"/sddefault.jpg")})}},{key:"update_state",value:function(){var t=this;this.player.then(function(e){var n=e.getDuration(),o=e.getCurrentTime(),a=n>0?n-o:n;_.assign(t.state,{is_playing:e.getPlayerState()===r.YT.PlayerState.PLAYING,percentage:o/n,time_elapsed:1e3*o,time_remaining:1e3*a}),t.state.is_playing&&(t.state.is_loaded=!0,t.state.is_loading=!1,i(t.update_state.bind(t),500))})}},{key:"api",get:function(){var t=this;return this._api?this._api:(this._api={load_media:function(){return t.state.is_loading=!0,t.load().then(function(){t.state.is_loading=!1,t.state.is_loaded=!0})},seek_to:function(e){return t.player.then(function(t){t.seekTo(e*t.getDuration())})},pause:function(){return t.player.then(function(t){t.pauseVideo()})},playpause:function(){return t.player.then(function(e){e.getPlayerState()!==r.YT.PlayerState.PLAYING?(t.state.has_played=!0,e.playVideo()):e.pauseVideo()})},mute:function(){return t.player.then(function(t){t.mute()})}},this._api)}}])&&n(a.prototype,u),d&&n(a,d),o}()}])},function(t,e){angular.module("genius").filter("abbreviateBigNumber",[function(){return function(t){return t>1e6?"".concat(Math.round(t/1e5)/10,"M"):t>1e3?"".concat(Math.round(t/100)/10,"K"):t}}])},function(t,e){angular.module("genius").filter("andMore",[function(){return function(t){return"(and ".concat(t," more)")}}])},function(t,e){angular.module("genius").filter("boundedCount",[function(){return function(t,e){if(t)return e&&Number(t)>=Number(e)?"".concat(e,"+"):t.toString()}}])},function(t,e){angular.module("genius").filter("capitalize",[function(){return _.capitalize}])},function(t,e){angular.module("genius").filter("cast_to_date",[function(){return function(t){return _.isNumber(t)?new Date(1e3*t):_.isString(t)?new Date(t):_.isDate(t)?t:null}}])},function(t,e){angular.module("genius").filter("descriptionAnnotationName",["I18n","modelHumanNameFilter",function(t,e){return function(n){var i=e(n),r=t.t("description_annotation.".concat(n));return"".concat(_.lowerCase(i)," ").concat(r)}}])},function(t,e){angular.module("genius").filter("drop",[function(){return function(t,e){if(t)return e>=0?_.drop(t,e):_.dropRight(t,-e)}}])},function(t,e){angular.module("genius").filter("genericLineItemMessage",["i18nFilter",function(t){return function(e,n){var i=Object.assign({scope:"activemodel.activity_stream_line_item_message.message",defaultKey:"default"},n);return t(e,i)}}])},function(t,e){angular.module("genius").filter("highlight_braced",["$sce","$sanitize",function(t,e){var n=/\[(.+?)\]/g;return function(i){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).class_name,o=e(i),a='<span class="'.concat(r,'">$1</span>');return t.trustAsHtml(o.replace(n,a))}}])},function(t,e){angular.module("genius").filter("human_readable_datetime",["$filter",function(t){return function(e,n){return n=n||{weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"},t("cast_to_date")(e).toLocaleTimeString("en-US",n)}}])},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}angular.module("genius").filter("i18n",["I18n","AppConfig",function(t,e){return function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.defaultKey&&(r=Object.assign(r,{defaultValue:t.t(r.defaultKey,r)})),"object"===n(i)&&(i=_.findKey(i)),i=i||"__not_found",!t.lookup(i,r)){var o="Missing translation for ".concat(i,"!!!");if("development"===e.env)throw alert(o),new Error(o);return""}return t.t(i,r)}}])},function(t,e){angular.module("genius").filter("imprecise_date",["$filter",function(t){var e=["yyyy","MMMM yyyy","MMMM d, yyyy"];return function(n){if(n){var i=_(n).at("year","month","day").takeWhile().value(),r=new Date(i[0],(i[1]||1)-1,i[2]||1);return t("date")(r,e[i.length-1])}}}])},function(t,e){angular.module("genius").filter("indefinitize",[function(){return function(t){return/^[aeiou]/i.test(t)?"an ".concat(t):"a ".concat(t)}}])},function(t,e){angular.module("genius").filter("millisToDuration",["moment",function(t){return function(e){return t.utc(e).format(e>36e5?"HH:mm:ss":"mm:ss")}}])},function(t,e){angular.module("genius").filter("millisecondsToSeconds",[function(){return function(t){return 1e3*t}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}angular.module("genius").filter("min",[function(){return function(t){return Math.min.apply(Math,n(t))}}])},function(t,e){angular.module("genius").filter("minBy",["$parse",function(t){return function(e,n){var i=t(n);return _.minBy(e,function(t){return i(t)})}}])},function(t,e){angular.module("genius").filter("minimum_readable_time",["$window",function(t){var e=245,n=t.location.search.match(/wpm=(\d+)/);n&&(e=Number(n[1]));var i=6e4/e;return function(t){return(t?t.split(/\s+/).length:0)*i}}])},function(t,e){angular.module("genius").filter("minusModulo",[function(){return function(t,e){return t-t%e}}])},function(t,e){angular.module("genius").filter("modelHumanName",["I18n",function(t){return function(e){return t.t("activerecord.models.".concat(e.toLowerCase()))}}])},function(t,e){angular.module("genius").filter("richContentPreview",["truncateToBoundaryFilter",function(t){return function(e){if(e){var n=e.replace(/<[^>]+>/gm,"").trim();return n?t(n,75,{with_ellipsis:!0}):"[]"}}}])},function(t,e){angular.module("genius").filter("roleHumanName",["I18n",function(t){return function(e){return t.t("role.types.".concat(e,".one"))}}])},function(t,e){angular.module("genius").filter("signed_number",[function(){return function(t){return _.isUndefined(t)?0:t&&t>0?"+".concat(t.toString()):t.toString()}}])},function(t,e){angular.module("genius").filter("snakeCase",[function(){return _.snakeCase}])},function(t,e){angular.module("genius").filter("spotify_artist_metadata",["SpotifyClient",function(t){var e={};return function(n){if(!n)return{};var i=e[n];if(i)return i;e[n]={},t.load_artist_metadata(n).then(function(t){e[n]=t})}}])},function(t,e){angular.module("genius").filter("svg",[function(){return function(t){return"".concat(t,".svg")}}])},function(t,e){angular.module("genius").filter("timestamp_for_display",[function(){var t=function(t,e){return"0000".substring(0,e-t.toString().length)+t};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.skip_millis,r=n.always_millis;if(!e&&0!==e)return"";var o=e/1e3,a="".concat(Math.floor(o/60),":").concat(t(Math.floor(o%60),2)),s=Math.floor(e%1e3);return(r||s&&!i)&&(a+=".".concat(t(s,3))),a}}])},function(t,e){angular.module("genius").filter("to_utc",["$filter",function(t){return function(e){return t("cast_to_date")(e).toISOString()}}])},function(t,e){angular.module("genius").filter("truncateToBoundary",[function(){return function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).with_ellipsis;if(t){e=n?e-"".length:e;var i=t.substr(0,e);if(t[e]&&" "!==t[e]){var r=i.lastIndexOf(" ");-1!==r&&(i=i.substr(0,r))}return n&&i.length<t.length&&(i+=""),i}}}])},function(t,e){angular.module("genius").filter("withIndefiniteArticle",[function(){var t=/^[aeiou]/i;return function(e){return"".concat(t.test(e)?"an":"a"," ").concat(e)}}])},function(t,e){angular.module("genius").filter("withoutZeroWidthSpaces",[function(){return function(t){return t.replace(/\u200B/g,"")}}])},function(t,e){angular.module("genius").value("currentFlashMessages",new Array)},function(t,e){angular.module("genius").value("PreloadCache",{})},function(t,e,n){"use strict";n.r(e);n(939);angular.module("genius").value("XpathRange",window.XpathRange)},function(t,e,n){var i;!function t(e,n,r){function o(s,c){if(!n[s]){if(!e[s]){if(!c&&("function"==typeof i&&i))return i(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return o(n||t)},u,u.exports,t,e,n,r)}return n[s].exports}for(var a="function"==typeof i&&i,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){function i(t){return!0}e.exports=function(t,e){var n=[];e=e||i;do{n.push(t),t=t.parentNode}while(t&&t.tagName&&e(t));return n.slice(1)}},{}],2:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.default=function(t,e){if(t.whatToShow!==c)throw new Error(a);var n=0,i=t.referenceNode,u=null;if(p=e,!isNaN(parseInt(p))&&isFinite(p))u={forward:function(){return n<e},backward:function(){return n>e}};else{if(!function(t){return t.nodeType===l}(e))throw new Error(s);var d=function(t,e){if(t===e)return!1;var n=null,i=[t].concat(r.default(t)).reverse(),a=[e].concat(r.default(e)).reverse();for(;i[0]===a[0];)n=i.shift(),a.shift();i=i[0],a=a[0];var s=o.default(n.childNodes,i),c=o.default(n.childNodes,a);return s>c}(i,e)?function(){return!1}:function(){return i!==e};u={forward:d,backward:function(){return i!=e||!t.pointerBeforeReferenceNode}}}var p;for(;u.forward()&&null!==(i=t.nextNode());)n+=i.nodeValue.length;for(;u.backward()&&null!==(i=t.previousNode());)n-=i.nodeValue.length;return n};var r=i(t("ancestors")),o=i(t("index-of")),a="Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.",s="Argument 2 of seek must be a number or a Text Node.",c=4,l=3;e.exports=n.default},{ancestors:1,"index-of":4}],3:[function(t,e,n){e.exports=function t(e){if(r(e))return e;if(r(e.ownerDocument))return e.ownerDocument;if(r(e.document))return e.document;if(e.parentNode)return t(e.parentNode);if(e.commonAncestorContainer)return t(e.commonAncestorContainer);if(e.startContainer)return t(e.startContainer);if(e.anchorNode)return t(e.anchorNode)};var i=9;function r(t){return t&&t.nodeType===i}},{}],4:[function(t,e,n){
/*!
 * index-of <https://github.com/jonschlinkert/index-of>
 *
 * Copyright (c) 2014-2015 Jon Schlinkert.
 * Licensed under the MIT license.
 */
"use strict";e.exports=function(t,e,n){n=n||0;if(null==t)return-1;var i=t.length,r=n<0?i+n:n;if(r>=t.length)return-1;for(;r<i;){if(t[r]===e)return r;r++}return-1}},{}],5:[function(t,e,n){e.exports=t("./lib/xpath")},{"./lib/xpath":7}],6:[function(t,e,n){"use strict";n.__esModule=!0;var i=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.message=e,this.name=n,this.stack=(new Error).stack};n.default=i,(i.prototype=new Error).toString=function(){return this.name+": "+this.message},e.exports=n.default},{}],7:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.fromNode=function(t){var e=arguments.length<=1||void 0===arguments[1]?document:arguments[1],n="/";for(;t!==e;){if(!t){throw new o.default("The supplied node is not contained by the root node.","InvalidNodeTypeError")}n="/"+c(t)+"["+l(t)+"]"+n,t=t.parentNode}return n.replace(/\/$/,"")},n.toNode=function(t){var e=arguments.length<=1||void 0===arguments[1]?document:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];"function"==typeof e&&(n=e,e=document);e!==document&&(t=t.replace(/^\//,"./"));null===n&&document.lookupNamespaceURI&&(i=r.default(e).documentElement,o=i.lookupNamespaceURI(null)||s,n=function(t){var e={_default_:o};return e[t]||i.lookupNamespaceURI(t)});var i,o;return function(t,e,n){try{var i=t.replace(/\/(?!\.)([^\/:\(]+)(?=\/|$)/g,"/_default_:$1");return function(t,e,n){return document.evaluate(t,e,n,a,null).singleNodeValue}(i,e,n)}catch(n){return function(t,e){var n=t.split("/"),i=e;for(;i;){var r=n.shift();if(void 0===r)break;if("."!==r){var o=r.split(/[\[\]]/),a=o[0],s=o[1];a=a.replace("_default_:",""),s=s?parseInt(s):1,i=u(i,a,s)}}return i}(t,e)}}(t,e,n)};var r=i(t("get-document")),o=i(t("./dom-exception")),a=9,s="http://www.w3.org/1999/xhtml";function c(t){switch(t.nodeName){case"#text":return"text()";case"#comment":return"comment()";case"#cdata-section":return"cdata-section()";default:return t.nodeName.toLowerCase()}}function l(t){for(var e=t.nodeName,n=1;t=t.previousSibling;)t.nodeName===e&&(n+=1);return n}function u(t,e,n){for(t=t.firstChild;t;t=t.nextSibling)if(c(t)===e&&0==--n)return t;return null}},{"./dom-exception":6,"get-document":3}],8:[function(t,e,n){e.exports=t("./lib/range")},{"./lib/range":9}],9:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.fromRange=function(t,e){var n=t.startContainer,i=t.startOffset,r=t.endContainer,o=t.endOffset,s=a.fromNode(n,e),c=a.fromNode(r,e);return{start:s,end:c,startOffset:i,endOffset:o}},n.toRange=function(t,e,n,i,c){var l=r.default(c),u=a.toNode(t,c);if(null===u)throw g("start");var d=l.createNodeIterator(u,s),p=e-o.default(d,e);if(u=d.referenceNode,!d.pointerBeforeReferenceNode){if(p>0)throw v("start");p+=u.length}var f=a.toNode(n,c);if(null===f)throw g("end");var _=l.createNodeIterator(f,s),h=i-o.default(_,i);if(f=_.referenceNode,!_.pointerBeforeReferenceNode){if(h>0)throw v("end");h+=f.length}var m=l.createRange();return m.setStart(u,p),m.setEnd(f,h),m;function g(t){var e=new Error("The "+t+" node was not found.");return e.name="NotFoundError",e}function v(t){var e=new Error("There is no text at the requested "+t+" offset.");return e.name="IndexSizeError",e}};var r=i(t("get-document")),o=i(t("dom-seek")),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("simple-xpath-position")),s=4},{"dom-seek":2,"get-document":3,"simple-xpath-position":5}],10:[function(t,e,n){window.XpathRange=t("xpath-range")},{"xpath-range":8}]},{},[10])},function(t,e){window["com.genius.Genius"]||(window["com.genius.Genius"]={},window.require=function(){return window["com.genius.Genius"].require.apply(this,arguments)})},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,o,a,s,c=1,l={},u=!1,d=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?i=function(){var t=f(arguments);return e.nextTick(_(h,t)),t}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){h(t.data)},i=function(){var t=f(arguments);return o.port2.postMessage(t),t}):d&&"onreadystatechange"in d.createElement("script")?(r=d.documentElement,i=function(){var t=f(arguments),e=d.createElement("script");return e.onreadystatechange=function(){h(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e),t}):i=function(){var t=f(arguments);return setTimeout(_(h,t),0),t}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&h(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),i=function(){var e=f(arguments);return t.postMessage(a+e,"*"),e}),p.setImmediate=i,p.clearImmediate=m}function f(t){return l[c]=_.apply(n,t),c++}function _(t){var e=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(n,e):new Function(""+t)()}}function h(t){if(u)setTimeout(_(h,t),0);else{var e=l[t];if(e){u=!0;try{e()}finally{m(t),u=!1}}}}function m(t){delete l[t]}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(1),n(89))},function(t,e,n){var i=n(943);i.keys().forEach(i)},function(t,e,n){var i={"./alert.svg":944,"./apple.svg":945,"./apple_music_logo.svg":946,"./at_symbol.svg":947,"./between-the-lines.svg":948,"./billboard.svg":949,"./blockquote.svg":950,"./bts.svg":951,"./calendar.svg":952,"./centerstage.svg":953,"./checkmark.svg":954,"./checky.svg":955,"./circle.svg":956,"./clear_downvotes.svg":957,"./clear_upvotes.svg":958,"./clock.svg":959,"./comment.svg":960,"./deconstructed.svg":961,"./down_arrow.svg":962,"./drag.svg":963,"./envelope.svg":964,"./expand.svg":965,"./expand_alt.svg":966,"./external.svg":967,"./eye.svg":968,"./eye_cross.svg":969,"./facebook.svg":970,"./fact_track_icon.svg":971,"./fire.svg":972,"./flag.svg":973,"./for-the-record.svg":974,"./framework.svg":975,"./gear.svg":976,"./genius-level.svg":977,"./genius-test.svg":978,"./google.svg":979,"./hamburger.svg":980,"./instagram.svg":981,"./irl.svg":982,"./left_arrow.svg":983,"./lightning.svg":984,"./line_graph.svg":985,"./lock.svg":986,"./logo.svg":987,"./magnifying_glass.svg":988,"./music_notes_crossout.svg":989,"./new_message.svg":990,"./news.svg":991,"./no_document.svg":992,"./one_document.svg":993,"./open-mic.svg":994,"./pause_compact.svg":995,"./pause_transparent.svg":996,"./pencil.svg":997,"./people.svg":998,"./phone.svg":999,"./pin.svg":1e3,"./play.svg":1001,"./play_compact.svg":1002,"./play_transparent.svg":1003,"./playstore.svg":1004,"./rewind.svg":1005,"./right_arrow.svg":1006,"./role_icon_contributor_equilateral_triangle.svg":1007,"./role_icon_editor_square.svg":1008,"./role_icon_mediator_square.svg":1009,"./role_icon_moderator_diamond.svg":1010,"./role_icon_staff_circle.svg":1011,"./sgnarly.svg":1012,"./share.svg":1013,"./share_android.svg":1014,"./soundcloud.svg":1015,"./spotify.svg":1016,"./star.svg":1017,"./tag.svg":1018,"./tap.svg":1019,"./ten.svg":1020,"./the-cosign.svg":1021,"./thumbs_down.svg":1022,"./thumbs_up.svg":1023,"./twitter.svg":1024,"./two_documents.svg":1025,"./unlock.svg":1026,"./up_arrow.svg":1027,"./upload_image.svg":1028,"./verified.svg":1029,"./wordmark.svg":1030,"./x.svg":1031,"./x_small.svg":1032,"./youtube.svg":1033};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=943},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("alert.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 19.8"><path d="M11 4.12l7.6 13.68H3.4L11 4.12M11 0L0 19.8h22L11 0z"/><path d="M10 8.64h2v4.51h-2zm1 5.45a1.13 1.13 0 0 1 1.13 1.15A1.13 1.13 0 1 1 11 14.09z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("apple.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 20"><path d="M16.493 15.586a10.88 10.88 0 01-1.075 1.933c-.565.807-1.028 1.365-1.385 1.674-.553.509-1.146.77-1.78.784-.456 0-1.005-.13-1.645-.392-.641-.262-1.23-.392-1.77-.392-.565 0-1.172.13-1.82.392-.65.263-1.173.4-1.573.413-.609.026-1.215-.242-1.82-.805-.387-.337-.87-.914-1.45-1.733-.62-.874-1.132-1.888-1.532-3.043C.215 13.169 0 11.96 0 10.79c0-1.34.29-2.496.87-3.465a5.102 5.102 0 011.82-1.842 4.9 4.9 0 012.463-.695c.483 0 1.117.15 1.905.443.785.295 1.29.444 1.51.444.166 0 .726-.175 1.676-.523.898-.323 1.656-.457 2.277-.404 1.682.135 2.947.799 3.787 1.994-1.505.912-2.249 2.189-2.234 3.827.014 1.276.476 2.338 1.386 3.181a4.56 4.56 0 001.385.909c-.11.322-.228.63-.353.927zM12.634.4c0 1-.365 1.934-1.094 2.799-.879 1.027-1.942 1.621-3.095 1.527a3.114 3.114 0 01-.023-.379c0-.96.418-1.987 1.16-2.828A4.472 4.472 0 0110.996.458c.57-.278 1.11-.432 1.617-.458.015.134.021.267.021.4z" /></svg>')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("apple_music_logo.svg",'<svg viewBox="0 0 47 11" xmlns="http://www.w3.org/2000/svg"><path d="M42.13 7.288v-.894c0-1.544.678-2.303 1.68-2.303 1.003 0 1.545.759 1.545 1.599h1.625v-.163c0-1.544-1.192-2.845-3.197-2.845-2.113 0-3.386 1.382-3.386 3.712v.894c0 2.33 1.246 3.712 3.386 3.712 2.032 0 3.197-1.3 3.197-2.764v-.162h-1.625c0 .84-.515 1.517-1.545 1.517-1.03-.054-1.68-.758-1.68-2.303zm-5.174 3.522h1.707V2.818h-1.707v7.992zm-6.15-5.852c0-.623.514-1.002 1.327-1.002.921 0 1.382.514 1.436 1.083h1.598c-.027-1.408-1.219-2.41-3.007-2.41-1.707 0-3.034.866-3.034 2.438 0 1.354.948 2.004 2.059 2.248l1.192.271c.813.19 1.22.434 1.22 1.003 0 .623-.516 1.056-1.464 1.056-1.03 0-1.544-.514-1.599-1.11H28.91c.027 1.137.786 2.465 3.143 2.465 1.978 0 3.224-.975 3.224-2.547 0-1.463-1.003-2.032-2.168-2.276l-1.219-.27c-.731-.163-1.084-.488-1.084-.949zm-3.333 3.143V2.818h-1.707v5.04c0 1.083-.65 1.679-1.571 1.679-.949 0-1.599-.596-1.599-1.68v-5.04h-1.68v5.284c0 1.707 1.247 2.872 3.279 2.872s3.278-1.165 3.278-2.872zm-9.754 2.71h1.545V2.817H17.53l-2.222 4.958h-.054l-2.222-4.958h-1.734v8.02h1.517V5.634h.082l1.842 4.119h1.057l1.842-4.119h.081v5.175zM8.155 7.558c-.488-.46-.731-1.057-.731-1.734-.027-.894.379-1.598 1.165-2.086-.46-.65-1.111-1.003-2.005-1.084-.325-.027-.705.054-1.192.217-.515.19-.813.298-.894.298-.136 0-.407-.081-.786-.244-.38-.19-.732-.27-1.003-.27a2.5 2.5 0 0 0-1.3.378A2.418 2.418 0 0 0 .46 4.037C.163 4.552 0 5.202 0 5.933a6.3 6.3 0 0 0 .325 1.978c.217.623.488 1.192.813 1.653.298.434.542.759.759.948.325.298.623.46.948.434.217 0 .488-.081.84-.244.325-.135.65-.217.948-.217.298 0 .596.082.921.217.352.135.65.217.867.217.325-.027.65-.163.948-.434.109-.081.217-.217.326-.352.108-.163.243-.325.406-.542.108-.162.19-.325.298-.488a2.76 2.76 0 0 0 .271-.569c.027-.08.081-.162.108-.243.027-.082.055-.163.082-.271-.244-.082-.488-.271-.705-.46zM6.042 1.761c.38-.488.569-.975.569-1.544V0c-.271.027-.542.108-.867.244a3.269 3.269 0 0 0-.759.569c-.38.46-.596.948-.596 1.49v.217c.65.054 1.165-.19 1.653-.759z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("at_symbol.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.88 21.78"><path d="M11.34 0C4.77 0 0 4.65 0 11.05a10.61 10.61 0 0 0 11 10.73 10.58 10.58 0 0 0 4.67-1v-2.12A9 9 0 0 1 11 19.83 8.72 8.72 0 0 1 2.2 11a8.87 8.87 0 0 1 9.09-9.06 8.35 8.35 0 0 1 8.52 8.16c0 2.86-.89 4.63-2.31 4.63-.73 0-1.59-.31-1.59-1.8V5.59h-1.85v1.08l-.41-.33a4.84 4.84 0 0 0-3.09-1A5.47 5.47 0 0 0 5.2 11a5.32 5.32 0 0 0 5.49 5.62 4.86 4.86 0 0 0 3.6-1.42l.24-.25.17.3a2.89 2.89 0 0 0 2.66 1.37c2.74 0 4.52-2.56 4.52-6.52C21.88 4 16.43 0 11.34 0zm2.6 13.36l-.16.2a3.88 3.88 0 0 1-2.75 1A3.39 3.39 0 0 1 7.5 10.9a3.43 3.43 0 0 1 3.58-3.6 4.32 4.32 0 0 1 2.81 1z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("between-the-lines.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1287 414"><path d="M12.71 0h69.17c52.38 0 76.03 8.64 76.03 43.99 0 36.62-26.45 33.31-45.77 35.09v11.7c27.21 1.27 58.99.25 58.99 40.94 0 42.47-41.45 47.55-89.51 47.55H12.71V0zm76.04 64.59c11.44 0 20.6 1.78 20.6-10.93 0-11.7-9.15-10.93-20.6-10.93H61.28V64.6h27.47zm-.26 71.96c21.61 0 34.08 2.03 34.08-14.5 0-17.55-12.46-14.75-34.08-14.75H61.28v29.24h27.21zM251.99 47.55c41.7 0 71.2 25.68 71.2 62.81v12.46h-96.37c-.51 12.97 9.66 21.61 29.75 21.61 11.44 0 20.85-4.83 22.63-10.93h48.57c-1.53 18.31-24.92 48.31-71.2 48.31-51.11 0-75.01-32.29-75.01-68.66 0-40.17 28.73-65.6 70.43-65.6zm25.94 54.67c0-8.14-5.09-15.26-25.94-15.26-21.11 0-25.17 7.12-25.17 15.26h51.11zM462.97 136.55v42.72l-73.74 2.54c-15 .51-23.39-8.39-23.39-23.39v-65.6H334.3V50.09h31.53V29.24l48.57-15.26v36.11h43.49v42.72H414.4v46.28l48.57-2.54zM519.34 50.09l10.93 117.22h11.7l3.56-117.22H647.5l3.56 117.22h11.95L674.2 50.09h46.28l-12.72 129.18H606.05l-3.56-117.48h-11.95l-3.56 117.48H485.27L472.81 50.09h46.53zM800.43 47.55c41.7 0 71.2 25.68 71.2 62.81v12.46h-96.37c-.51 12.97 9.66 21.61 29.75 21.61 11.44 0 20.85-4.83 22.63-10.93h48.57c-1.53 18.31-24.92 48.31-71.2 48.31-51.11 0-75.01-32.29-75.01-68.66-.01-40.17 28.72-65.6 70.43-65.6zm25.93 54.67c0-8.14-5.09-15.26-25.94-15.26-21.11 0-25.18 7.12-25.18 15.26h51.12zM959.24 47.55c41.7 0 71.2 25.68 71.2 62.81v12.46h-96.37c-.51 12.97 9.66 21.61 29.75 21.61 11.44 0 20.85-4.83 22.63-10.93h48.57c-1.53 18.31-24.92 48.31-71.2 48.31-51.11 0-75.01-32.29-75.01-68.66 0-40.17 28.73-65.6 70.43-65.6zm25.94 54.67c0-8.14-5.09-15.26-25.94-15.26-21.1 0-25.17 7.12-25.17 15.26h51.11zM1101.67 134.77v44.5h-48.57V50.09h48.57v12.97l-9.41 26.19h11.95c5.09-22.89 20.85-41.7 48.32-41.7 34.33 0 55.18 23.39 55.18 65.35v66.37h-48.82v-58.49c0-22.38-5.34-30.51-24.16-30.51-19.84 0-33.06 7.63-33.06 44.5zM128.67 368.47v42.72l-73.74 2.54c-15 .51-23.39-8.39-23.39-23.39v-65.6H0v-42.72h31.53v-20.85l48.57-15.26v36.11h43.48v42.72H80.1v46.28l48.57-2.55zM303 344.82v66.37h-48.82V352.7c0-22.38-5.34-30.51-24.15-30.51-19.84 0-33.06 7.63-33.06 44.5v44.5H148.4v-186.9h48.57v70.69l-9.41 26.19h11.95c5.09-22.89 20.85-41.7 48.31-41.7 34.33 0 55.18 23.4 55.18 65.35zM385.13 279.47c41.7 0 71.2 25.68 71.2 62.81v12.46h-96.37c-.51 12.97 9.67 21.61 29.75 21.61 11.44 0 20.85-4.83 22.63-10.93h48.57c-1.53 18.31-24.92 48.31-71.2 48.31-51.11 0-75.01-32.29-75.01-68.66-.01-40.17 28.73-65.6 70.43-65.6zm25.94 54.67c0-8.14-5.09-15.26-25.94-15.26-21.1 0-25.18 7.12-25.18 15.26h51.12zM549.65 389.83V231.92h48.57v139.1l85.95-2.54v42.72l-110.11 2.54c-15.77.25-24.41-8.14-24.41-23.91zM696.47 368.47h35.6v-45.01l-32.29 1.27v-42.72l56.45-2.54c15.51-.76 24.67 8.14 24.67 24.16v64.84h35.85v42.72H696.47v-42.72zm32.04-118.24c0-14.24 9.41-20.85 24.67-20.85 15.26 0 25.68 6.61 25.68 20.85 0 14.75-10.42 20.85-25.68 20.85s-24.67-6.1-24.67-20.85zM879.83 366.69v44.5h-48.57V282.02h48.57v12.97l-9.41 26.19h11.95c5.09-22.89 20.85-41.7 48.32-41.7 34.33 0 55.18 23.39 55.18 65.35v66.37h-48.82v-58.49c0-22.38-5.34-30.51-24.16-30.51-19.83-.01-33.06 7.62-33.06 44.49zM1068 279.47c41.7 0 71.2 25.68 71.2 62.81v12.46h-96.37c-.51 12.97 9.66 21.61 29.75 21.61 11.44 0 20.85-4.83 22.63-10.93h48.57c-1.53 18.31-24.92 48.31-71.2 48.31-51.11 0-75.01-32.29-75.01-68.66-.01-40.17 28.73-65.6 70.43-65.6zm25.94 54.67c0-8.14-5.09-15.26-25.94-15.26-21.11 0-25.18 7.12-25.18 15.26h51.12zM1222.34 413.74c-49.84 0-71.45-19.07-71.45-49.08h48.57c0 5.09 4.58 13.98 24.67 13.98 7.88 0 13.48-1.02 13.48-5.34 0-3.3-3.31-4.07-23.9-11.19-23.9-8.14-56.96-14.24-56.96-45.26 0-24.16 21.87-37.38 58.49-37.38 43.23 0 66.62 21.61 66.62 48.06h-48.57c0-5.85-5.85-12.97-17.29-12.97-7.88 0-10.68 1.27-10.68 4.58 0 6.1 14.24 8.65 34.58 15.26 24.92 8.14 46.28 15.76 46.28 40.18-.01 22.63-17.05 39.16-63.84 39.16z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("billboard.svg",'<svg viewBox="0 0 77 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.807 4.86h3.59v10.92h-3.59zM16.14.59h3.59v15.19h-3.59zm4.333 0h3.59v15.19h-3.59zm42.225 5.397V4.86h-3.59v10.92h3.59v-5.205c0-1.338.7-2.06 1.975-2.06h.425v-3.76c-1.084.042-1.87.382-2.4 1.232zM13.602 0c-1.15 0-2.08.932-2.08 2.082s.93 2.082 2.08 2.082 2.082-.933 2.082-2.082C15.684.932 14.752 0 13.602 0zm41.172 5.692c-.505-.55-1.68-1.005-2.57-1.005-2.71 0-4.656 1.788-5.132 4.445-.52-2.55-2.74-4.51-5.45-4.51-2.735 0-4.975 1.983-5.465 4.58-.475-2.7-2.598-4.488-5.23-4.488-.978 0-1.785.213-2.487.7V.594h-3.59V15.78h3.527v-.998c.85.787 1.763 1.148 2.89 1.148 2.424 0 4.466-1.9 4.903-4.515.514 2.56 2.723 4.507 5.452 4.507 2.706 0 4.876-1.905 5.428-4.4.456 2.725 2.616 4.43 5.196 4.43.892 0 1.87-.3 2.528-.787v.616h3.59v-4.777c0-.196-.002-.387-.006-.573.004-.188.005-.38.005-.575V4.88h-3.59v.812zm-24.23 6.762c-1.15 0-2.082-.932-2.082-2.082s.932-2.08 2.082-2.08 2.082.93 2.082 2.08-.933 2.082-2.082 2.082zm11.078-.166c-1.15 0-2.082-.933-2.082-2.083 0-1.15.933-2.08 2.082-2.08 1.15 0 2.08.93 2.08 2.08s-.93 2.083-2.08 2.083zm10.787.066c-1.15 0-2.083-.933-2.083-2.083 0-1.147.93-2.08 2.08-2.08s2.082.933 2.082 2.08c0 1.15-.93 2.085-2.08 2.085zM73.063.59v4.82c-.7-.49-1.508-.7-2.486-.7-2.995 0-5.33 2.314-5.33 5.65 0 3.143 2.25 5.565 4.99 5.565 1.126 0 2.04-.362 2.89-1.148v.998h3.526V.588h-3.59zM70.95 12.426c-1.15 0-2.08-.932-2.08-2.08 0-1.15.93-2.083 2.08-2.083s2.082.932 2.082 2.082-.933 2.08-2.083 2.08zM6.075 4.714c-.977 0-1.784.213-2.486.7V.594H0V15.78h3.526v-.998c.85.787 1.763 1.148 2.89 1.148 2.74 0 4.99-2.423 4.99-5.566 0-3.334-2.336-5.65-5.33-5.65zm-.382 7.74c-1.15 0-2.08-.932-2.08-2.082s.93-2.08 2.08-2.08 2.082.93 2.082 2.08-.932 2.082-2.082 2.082z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("blockquote.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M15 10.47h1.7v4.3h-4.4v-3.75c0-2.78.63-5.3 4.39-5.52v2.22c-1.26 0-1.69.88-1.69 2.75zm-7 0h1.7v4.3H5.3v-3.75c0-2.78.63-5.3 4.39-5.52v2.22C8.43 7.72 8 8.6 8 10.47z"/><path d="M20.09 1.91v18.18H1.91V1.91h18.18M22 0H0v22h22V0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("bts.svg",'<svg viewBox="0 0 480 192" xmlns="http://www.w3.org/2000/svg"><path d="M480 5.326H5.323V192H0V0h480v5.326zM33.49 82.383V34.007h20.83c12.348 0 16.216 7.292 16.216 13.285 0 5.85-3.273 9.387-6.025 10.542 3.423.794 7.663 4.91 7.663 10.614 0 7.798-4.984 13.935-17.11 13.935h-21.57zm9.895-20.65v12.275h11.53c5.132 0 7.438-2.24 7.438-6.282 0-3.466-2.454-5.993-7.513-5.993H43.385zm9.82-19.35h-9.82v11.624H53.8c4.388 0 6.99-1.877 6.99-6.137 0-3.105-2.23-5.488-7.586-5.488zm26.953-8.376h35.26v8.375H90.052v10.326h23.655v8.375H90.052v12.925h25.738v8.375H80.158V34.007zm85.87 48.376h-9.82V61.01H134.04v21.373h-9.893V34.007h9.894v18.628h22.17V34.007h9.82v48.376zm20.63 0h-9.893V34.007h9.894v48.376zm20.484-24.116v24.116h-9.745V34.007h9.596l17.48 26.065c2.68 4.044 4.092 6.354 5.208 8.015h.076c-.074-1.805-.148-5.92-.148-9.46v-24.62h9.744v48.376h-9.595L212.2 56.823c-2.008-2.96-4.165-6.498-5.133-8.014h-.074c.074 1.803.15 5.92.15 9.456zm42.948-24.26h15.844c19.043 0 26.184 11.625 26.184 24.332 0 15.522-9.15 24.042-26.11 24.042H250.09V34.007zm16.216 8.375h-6.546v31.626h6.546c10.19 0 15.92-4.116 15.92-15.67 0-11.262-6.175-15.956-15.92-15.956zM55.798 161.014h-9.92v-42.34H29.77v-8.866h42.138v8.865h-16.11v42.34zm64.464 0h-9.845v-22.622H88.193v22.622h-9.92v-51.206h9.92v19.718h22.224v-19.718h9.845v51.206zm10.766-51.206h35.35v8.865h-25.43v10.93h23.716v8.865h-23.717v13.68h25.805v8.866h-35.724v-51.206zm75.08 18.954l6.564 2.522c7.98 3.057 11.783 7.413 11.783 15.285 0 9.093-6.935 15.82-18.495 15.82-5.594 0-11.038-1.377-15.215-4.05v-9.784h.746c2.836 2.675 8.877 4.815 13.576 4.815 6.786 0 9.47-3.21 9.47-6.572 0-3.67-2.236-5.35-6.785-7.11l-6.413-2.368c-6.04-2.293-11.486-6.115-11.486-14.675 0-7.337 6.714-14.215 17.75-14.215 5.67 0 10.293 1.834 12.605 3.44v9.553h-.745c-2.388-2.14-6.937-3.975-11.785-3.975-4.997 0-7.905 2.293-7.905 5.12 0 3.364 1.79 4.587 6.34 6.192zm64.39 19.412h.746v9.707c-3.58 2.677-9.1 4.51-16.26 4.51-15.735 0-26.55-11.463-26.55-26.98 0-15.513 11.337-26.977 26.55-26.977 6.34 0 12.083 2.063 15.365 4.51v9.63h-.748c-3.58-3.134-8.8-5.122-14.17-5.122-9.397 0-17.08 7.797-17.08 17.96 0 11.237 8.727 17.886 17.08 17.886 6.264 0 11.41-1.68 15.065-5.12zm8.603-38.366h35.353v8.865H289.02v10.93h23.717v8.865H289.02v13.68h25.805v8.866H279.1v-51.206zm53.876 25.68v25.526h-9.77v-51.206h9.62l17.527 27.59c2.685 4.28 4.102 6.726 5.22 8.484h.075c-.075-1.91-.15-6.268-.15-10.012v-26.062h9.77v51.206h-9.62l-17.6-27.055c-2.015-3.136-4.178-6.88-5.147-8.486h-.074c.075 1.91.15 6.267.15 10.012zm43.06-25.68h35.35v8.865h-25.432v10.93h23.716v8.865h-23.717v13.68h25.805v8.866h-35.724v-51.206zm57.75 18.954l6.563 2.522c7.98 3.057 11.783 7.413 11.783 15.285 0 9.093-6.936 15.82-18.496 15.82-5.593 0-11.038-1.377-15.214-4.05v-9.784h.746c2.833 2.675 8.874 4.815 13.572 4.815 6.788 0 9.473-3.21 9.473-6.572 0-3.67-2.238-5.35-6.787-7.11l-6.414-2.368c-6.04-2.293-11.485-6.115-11.485-14.675 0-7.337 6.71-14.215 17.75-14.215 5.667 0 10.29 1.834 12.603 3.44v9.553h-.745c-2.387-2.14-6.936-3.975-11.784-3.975-4.995 0-7.904 2.293-7.904 5.12 0 3.364 1.79 4.587 6.34 6.192z" fill="#FFF"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("calendar.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 21.98"><path d="M18.18 3.64V0h-1.91v3.64H5.73V0H3.82v3.64H0V22h22V3.64zm1.91 16.43H1.91V5.55h18.18z"/><path d="M7.18 17.3h1.43v-.65h4.77v.65h1.43v-.65h2.77v-1.43h-2.76v-1.7h2.77v-1.44h-2.77V10.4h2.77V9h-2.77v-.68h-1.43V9H8.61v-.68H7.18V9H4.42v1.4h2.76v1.68H4.42v1.43h2.76v1.7H4.42v1.43h2.76zm1.43-6.9h4.77v1.68H8.61zm0 3.11h4.77v1.7H8.61z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("centerstage.svg",'<svg viewBox="0 0 875 168"><path d="M70.1 109.804l-4.698 22.56c-1.8 6.688-4.498 12.777-7.797 17.868-3.399 4.492-7.198 8.684-12.296 12.078-5.398 3.793-11.895 5.59-19.692 5.59-7.797 0-13.695-1.797-17.694-5.59-3.798-3.394-5.798-7.586-6.697-12.078-1.6-5.191-1.6-10.98-.2-17.868l20.592-96.827c1.6-6.489 3.999-12.279 7.597-17.669 3.4-4.492 6.898-8.984 12.096-12.278C46.509 2.196 53.206 0 61.203 0 69.3 0 74.898 2.196 78.697 5.59c3.798 3.394 5.998 7.786 6.897 12.278 1.6 4.891 1.6 10.78.4 17.669l-4.898 22.56H58.504l4.899-22.56c.9-4.293.4-7.787-1.6-10.282-.9-1.098-2.699-1.797-5.198-1.797-4.298 0-6.897 3.095-8.697 5.99-.7 1.597-1.599 3.593-2.199 5.989l-20.592 96.827c-.7 4.292-.2 7.786 1.6 10.281.899 1.098 2.198 1.797 4.298 1.797 5.198 0 7.797-2.695 9.596-5.99.7-1.297 1.6-3.393 2.2-5.988l4.698-22.56H70.1zM109.985 1.797h55.28l-5.398 24.855h-31.089l-9.196 43.123h22.391l-5.598 26.353h-22.391l-9.597 45.22h31.089l-5.198 24.855h-55.28L109.985 1.797zm79.67 78.66l-.4-7.587h-1.299l-19.692 93.233h-22.192L181.059 1.697h21.492l5.198 85.647.4 7.586h1.3L229.34 1.697h22.191l-34.986 164.406h-21.492l-5.398-85.647zm68.075-53.904l5.398-24.856h69.874l-5.398 24.856h-22.891l-29.59 139.55h-24.19l29.589-139.55H257.73zm86.968-24.756h55.28l-5.399 24.855h-31.088l-9.197 43.123h22.392l-5.598 26.353h-22.392l-9.596 45.22h31.088l-5.198 24.855h-55.28L344.699 1.797zm79.27 164.306l2-69.376h-6.498l-14.595 69.376h-24.19L415.67 1.697h24.191c28.89 0 37.586 16.071 31.089 47.415-3.599 16.371-10.996 31.045-21.492 37.334l-1.3 79.657h-24.19zm.4-91.636c3.399 0 7.797-.2 12.096-3.594 4.298-3.393 8.496-9.183 10.995-20.762 2.5-11.68.9-17.669-1.999-21.063-2.899-3.394-7.397-3.394-10.796-3.394l-10.296 48.813zm105.06-28.649c1.1-5.39 2.2-11.38 1.6-16.071-.7-4.492-2.499-7.587-6.297-7.587-6.298.2-9.597 6.688-11.696 16.371-1.1 5.59-.2 11.38 2.2 17.669 2.498 6.288 5.397 12.777 8.696 19.665 4.298 8.285 7.597 16.77 10.296 25.055 2.5 8.285 3.599 16.77 1.6 25.754-2.5 10.98-5.998 21.062-12.996 28.848-6.997 7.786-15.894 12.478-29.389 12.478-15.494 0-23.091-5.79-25.99-14.774-3.399-8.984-1.6-20.563.9-33.14l24.19-2.197c-1.599 6.888-2.698 13.876-1.999 18.967.7 5.39 2.5 8.984 7.598 8.984 7.197 0 11.195-7.587 13.694-18.068 1.1-5.39 0-11.68-2.499-18.068-.7-1.597-1.3-3.394-1.999-4.891-.7-1.597-1.3-3.394-2-4.891-1.599-3.394-3.398-6.888-5.197-10.781-1.8-3.893-3.599-7.587-5.398-11.879-3.799-8.485-5.798-16.97-6.498-25.455-.7-4.292 0-8.684.9-13.176 1.8-8.984 5.798-18.567 12.795-25.954C508.437 5.49 517.433.4 528.83.2c14.994-.2 21.992 5.79 24.89 14.574 2.7 8.984 1.8 19.864-.2 29.048l-24.09 1.996zm34.488-19.265l5.398-24.856h69.874l-5.398 24.856h-22.892l-29.489 139.55h-24.19l29.588-139.55h-22.891zm45.283 139.55L668.977 1.697h29.589L688.47 166.103h-23.492l2.5-33.54h-23.292l-11.396 33.54H609.2zm64.476-110.902l.2-4.292h-1.3l-1.599 4.292-17.893 51.908h16.594l3.998-51.908zm89.367 5.59l5.398-25.254c.9-4.492.4-7.787-1.1-10.282-.9-1.098-2.499-1.797-4.498-1.797-4.299 0-6.898 3.095-8.497 5.99-.9 1.796-1.6 3.793-2 5.989l-21.091 98.823c-1.1 4.293-.7 7.786 1.1 10.282.899 1.098 2.198 1.797 4.298 1.797 4.298 0 6.897-2.696 8.496-5.99.7-1.297 1.6-3.394 2.2-5.989l6.297-29.747h-9.596l4.298-20.363h33.788l-17.294 81.853h-14.295l-1.3-7.786c-5.597 5.59-12.994 9.583-20.791 9.583-7.797 0-12.796-1.996-16.094-5.59-3.4-3.394-5.198-7.586-5.798-12.078-1.1-5.191-.7-10.98 1.1-17.868l20.592-96.827c1.6-6.489 3.998-12.279 7.597-17.669 3.399-4.492 6.897-8.984 12.095-12.278C753.145 2.196 759.843 0 767.84 0c8.097 0 13.695 2.196 17.493 5.59 3.799 3.394 5.998 7.786 6.898 12.278 1.6 4.891 1.6 10.78.4 17.669l-5.398 25.254h-24.191zM819.72 1.797H875l-5.398 24.855h-31.088l-9.197 43.123h22.392l-5.598 26.353h-22.392l-9.596 45.22h31.088l-5.198 24.855h-55.28L819.722 1.797z" fill="#fff"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("checkmark.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 16.2"><path d="M8.83 16.2L0 7.97l2.06-2.21 6.62 6.17L19.79 0 22 2.06 8.83 16.2"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("checky.svg",'<svg width="11" height="11" viewBox="0 0 11 11" xmlns="http://www.w3.org/2000/svg"><path fill="#27F145" d="M0 0h11v11H0z"/><path fill="#FFF" d="M4.764 5.9l-2-2L1.35 5.314l3.414 3.414 4.914-4.914L8.264 2.4"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("circle.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="64 0 20 20"><circle cx="74" cy="10" r="9"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("clear_downvotes.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22.24 22.9"><path d="M10.9 16.73c-1.08 2.74-1.9 4.14-2.38 4.14-.95-.54.25-3.36.7-4.43a4.29 4.29 0 0 0 .48-1.51 2.61 2.61 0 0 0-2.61-2.39H3c-.27 0-.37-.1-.37-.32 0-.43.75-2.6 1.62-5.12L2.67 5.53a47.05 47.05 0 0 0-2 6.65A2.29 2.29 0 0 0 3 14.54h4.1a.78.78 0 0 1 .6.36c-.06.17-.2.5-.31.77-.82 1.93-2.34 5.53.16 6.95a2.13 2.13 0 0 0 1.06.29 2 2 0 0 0 .69-.12c1.5-.53 2.43-2.62 3.49-5.31.16-.42.37-.92.54-1.31l-1.48-1.48a15.53 15.53 0 0 0-.95 2.04zm3.38-13.12v7.88l2 2V1.61H5.72a2.36 2.36 0 0 0-1.05.26l1.74 1.74zm3.1-2.08h4.86v12.96h-4.86zM-.007 1.41L1.407-.002l20.485 20.485-1.415 1.414z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("clear_upvotes.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22.24 22.9"><path d="M11.34 6.17C12.42 3.43 13.2 2 13.72 2c.95.54-.25 3.36-.7 4.43A4.29 4.29 0 0 0 12.55 8a2.61 2.61 0 0 0 2.61 2.39h4.1c.27 0 .37.1.37.32 0 .43-.75 2.6-1.62 5.12l1.57 1.57a47.05 47.05 0 0 0 2-6.65 2.29 2.29 0 0 0-2.37-2.37h-4.1a.78.78 0 0 1-.6-.36c.06-.17.2-.5.31-.77.82-1.93 2.34-5.53-.16-6.95a2.13 2.13 0 0 0-1-.3 2 2 0 0 0-.66.12c-1.5.53-2.43 2.63-3.49 5.31-.16.42-.37.92-.54 1.31l1.48 1.48a15.53 15.53 0 0 0 .89-2.05zM8 19.29v-7.88l-2-2v11.88h10.52a2.36 2.36 0 0 0 1.05-.29l-1.74-1.74zM0 8.4h4.86v12.96H0zm.34-5.982l1.414-1.414L22.24 21.488l-1.415 1.415z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("clock.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M16.27 13.45L12 10.58V4.46H9.76v7.25L15 15.25z"/><path d="M11 2a9 9 0 1 1-9 9 9 9 0 0 1 9-9m0-2a11 11 0 1 0 11 11A11 11 0 0 0 11 0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comment.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.2 22"><path d="M19.29 1.91v11.46H7.69l-.57.7L5 16.64v-3.27H1.91V1.91h17.38M21.2 0H0v15.28h3.12V22l5.48-6.72h12.6V0z"/><path d="M4.14 4.29h12.93V6.2H4.14zm0 4.09h12.93v1.91H4.14z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("deconstructed.svg",'<svg viewBox="0 0 402 35" xmlns="http://www.w3.org/2000/svg"><path d="M345.13 8.67h-2v8.67h2v8.64h-2v7.846h23.565V28.12h-17.02v-2.13h2v-6.667h15.643V17.31h-2v-3.695h-15.644V8.68h2V6.592h16.775V.885h-23.32V8.67zm-21.35 0h-2v8.67h2v8.64h-2v7.846h6.544V25.99h2v-8.68h-2V8.68h2V6.592h10.626V.885h-27.795v5.707h10.626V8.67zm-38.954 0h-2.03c-1.367 2.517-2.134 5.46-2.142 8.67h2c.004 3.2.74 6.133 2.083 8.64h-2.016c2.836 5.32 8.39 8.73 15.45 8.73 4.72 0 8.362-1.18 10.723-2.9v-5.83h-.976c-2.373 1.93-5.59 2.877-9.453 2.877-2.672 0-5.4-1.006-7.504-2.867h2.033c-2.253-1.977-3.796-4.93-3.796-8.674v-.006h-2c.02-3.485 1.456-6.535 3.72-8.63h2.06c1.994-1.8 4.62-2.875 7.486-2.875 3.29 0 6.493 1.103 8.824 2.875h1.015V2.902C308.137 1.328 304.35 0 300.168 0c-6.797 0-12.42 3.384-15.342 8.67zm-8.845.01v8.59h2v4.916c0 1.366-.15 2.66-.44 3.804h-2.003c-1.474 5.805-6.47 8.72-12.838 8.72-6.414 0-11.35-2.92-12.8-8.73h2c-.285-1.14-.434-2.432-.434-3.794V17.34h-2V8.67h2V.885h6.543V8.68h-2v8.59h2v4.572c0 1.68.337 3.09.973 4.148h-1.994c1.095 1.817 3.07 2.72 5.71 2.72 2.645 0 4.64-.906 5.75-2.73h2.006c.64-1.058.983-2.463.983-4.138V17.34h-2V8.67h2V.885h6.542V8.68h-2zm-75.824-.01h-2v8.67h2v8.64h-2v7.846h6.543V25.99h2v-8.68h-2V8.68h2V6.592h10.625V.885H189.53v5.707h10.625V8.67zm-34.667 0h-2.004c-.008.143-.012.287-.012.43 0 4.21 2.062 6.655 4.794 8.24h2.123c.84.47 1.74.865 2.66 1.205l4.23 1.526c3 1.133 4.477 2.215 4.477 4.577 0 .455-.078.906-.243 1.334h-1.99c-.608 1.623-2.457 2.927-6.014 2.927-2.996 0-6.818-1.286-8.758-2.926h-.69v6.125c2.756 1.722 6.348 2.607 10.037 2.607 6.973 0 11.396-3.62 12.1-8.72h1.995c.07-.485.103-.982.103-1.492 0-3.16-.977-5.442-2.99-7.188h-2.082c-1.203-1.03-2.766-1.873-4.7-2.603l-4.33-1.638c-3-1.042-4.182-1.836-4.182-4.02 0-.125.01-.248.027-.37h2.01c.274-1.62 2.142-2.875 5.18-2.875 3.197 0 6.2 1.18 7.772 2.558h.492v-6.15C183.97 1.182 180.92 0 177.18 0c-7.032 0-11.403 4.132-11.692 8.67zm-7.378.01v8.63h2v8.68h-2v7.836h-6.345l-5.23-7.846h2.02l-5.76-8.64h-2.047l-.593-.897c-1.328-2.034-2.755-4.465-3.394-5.507h-.05c.05 1.22.098 3.972.1 6.374h2v8.68h-2v7.836h-6.445V25.98h2v-8.64h-2V8.67h2V.885h6.346l5.075 7.795h-1.966l5.57 8.63h2.046l.836 1.285c1.77 2.755 2.706 4.33 3.444 5.46h.05c-.05-1.23-.1-4.034-.1-6.444v-.27h-2V8.67h2V.885h6.445V8.68h-2zm63.396-.01V.885h12.938c6.067 0 9.743 3.348 10.8 7.795h-1.988c.203.88.306 1.804.306 2.752 0 2.245-.513 4.222-1.467 5.838h1.958c-1.22 2.01-3.143 3.447-5.625 4.13l3.517 4.59h-1.992l5.675 7.344v.492h-7.133l-5.852-7.846h1.993l-2.947-3.99h-3.64v4h-2v7.836h-6.543V25.98h2v-8.64h-2V8.67h2zm4.542.01v8.01h5.61c3.787 0 5.36-2.28 5.36-5.258 0-1.045-.248-1.988-.75-2.762h1.965c-.865-1.28-2.448-2.078-4.773-2.078h-5.412V8.68h-2zM63.7 8.67C66.62 3.384 72.24 0 79.037 0c4.182 0 7.97 1.328 10.135 2.902V8.68h-1.015c-2.33-1.772-5.535-2.875-8.824-2.875-2.867 0-5.492 1.074-7.486 2.875h-2.06c-2.264 2.095-3.7 5.145-3.72 8.63h2v.006c0 3.744 1.543 6.697 3.796 8.674H69.83c2.103 1.86 4.832 2.867 7.504 2.867 3.862 0 7.08-.946 9.453-2.877h.976v5.83c-2.36 1.72-6.002 2.9-10.725 2.9-7.056 0-12.612-3.41-15.446-8.73h2.016c-1.342-2.507-2.08-5.44-2.083-8.64h-2c.008-3.21.775-6.153 2.143-8.67h2.03zm-28.738 0V.885H58.28v5.707H41.503V8.68h-2v4.935h15.644v3.695h2v1.973H41.503v6.707h-2v2.13h17.02v5.706H32.96V25.98h2v-8.64h-2V8.67h2zm65.434.01c-2.2 2.126-3.5 5.206-3.53 8.59h2v.046c0 3.417 1.36 6.555 3.62 8.674H94.44h6.045c1.904 1.786 4.447 2.877 7.35 2.877 2.902 0 5.444-1.09 7.35-2.877h2.01c2.247-2.114 3.603-5.238 3.61-8.64h-2c-.012-3.417-1.32-6.53-3.54-8.67h7.94c1.358 2.5 2.124 5.417 2.142 8.6h2v.046c0 3.197-.756 6.168-2.117 8.674h-2.006c-2.892 5.315-8.505 8.72-15.39 8.72-6.89 0-12.505-3.41-15.395-8.73h2c-1.36-2.5-2.116-5.462-2.12-8.65h-2c.007-3.21.775-6.153 2.143-8.67h2.03c2.92-5.286 8.544-8.67 15.34-8.67 6.8 0 12.426 3.388 15.347 8.68h-7.962c-1.888-1.784-4.427-2.875-7.384-2.875-2.957 0-5.496 1.09-7.384 2.875h-2.056zm-72.6 8.59h2v.144c0 3.33-.598 6.225-1.77 8.576H26.02c-2.552 5.113-7.81 7.836-15.492 7.836H0V25.98h2v-8.64H0V8.67h2V.885h10.478c8.028 0 12.858 3.22 15.304 7.795h-1.97c1.34 2.553 1.954 5.522 1.982 8.59zm-7.937-8.6c-1.79-1.425-4.22-2.078-7.134-2.078h-4.33V8.68h-2v8.59h2v8.72h-2v2.13h4.33c3.2 0 5.736-.633 7.515-2.14h2.01c1.963-1.668 3.003-4.44 3.003-8.566v-.074h-2c-.028-4.12-1.226-6.943-3.33-8.67h1.935zm378.153.01c1.345 2.556 1.962 5.528 1.99 8.6h2v.144c0 3.33-.6 6.225-1.77 8.576h-2.005c-2.552 5.113-7.81 7.836-15.492 7.836h-10.528V25.99h2v-8.64h-2V8.68h6.395v8.6h2V26h-2v2.13h4.33c3.2 0 5.735-.633 7.514-2.14h2.012c1.96-1.668 3-4.44 3-8.566v-.074h-2c-.028-4.12-1.226-6.943-3.33-8.67h9.862C397.54 4.104 392.71.885 384.684.885h-10.48V8.68h6.396V6.592h4.33c2.92 0 5.354.656 7.144 2.088h5.937z" fill="#FFF" fill-rule="evenodd"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("down_arrow.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.32 10.91"><path d="M10.66 10.91L0 1.5 1.32 0l9.34 8.24L20 0l1.32 1.5-10.66 9.41"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("drag.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 8.22"><path d="M0 0h22v1.99H0zm0 6.24h22v1.99H0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("envelope.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 15.34"><path d="M0 0v15.34h22V0zm12.32 8.2L11 9.47 9.68 8.2 8.3 6.88l-5.18-5h15.76l-5.18 5zm-5.5-.1L1.9 12.17v-8.8zm1.39 1.32L11 12.1l2.79-2.68 4.86 4H3.35zm7-1.33l4.89-4.72v8.8z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("expand.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.21 19.28"><path d="M17.21 11.21v4.61L3.36 2h4.42V0H0v8.07h2V3.46l13.85 13.83h-4.42v2h7.78v-8.08h-2"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("expand_alt.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.21 19.28"><path d="M2 11.21v4.61L15.85 2h-4.42V0h7.78v8.07h-2V3.46L3.36 17.29h4.42v2H0v-8.08h2"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("external.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.56 10.51"><path d="M2.49 0v2h4.6L0 9.09l1.41 1.42 7.15-7.15v4.42h2V0H2.49"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("eye.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 15.45"><path d="M11 2c4 0 7.26 3.85 8.6 5.72-1.34 1.87-4.6 5.73-8.6 5.73S3.74 9.61 2.4 7.73C3.74 5.86 7 2 11 2m0-2C4.45 0 0 7.73 0 7.73s4.45 7.73 11 7.73 11-7.73 11-7.73S17.55 0 11 0z"/><path d="M11 5a2.73 2.73 0 1 1-2.73 2.73A2.73 2.73 0 0 1 11 5m0-2a4.73 4.73 0 1 0 4.73 4.73A4.73 4.73 0 0 0 11 3z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("eye_cross.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 21.08"><path d="M1.71 0L.35 1.36l19.72 19.72 1.38-1.38L1.71 0M11 16.42c-4.09 0-7.37-3.94-8.7-5.8a19.31 19.31 0 0 1 2.81-3.17L3.75 6.09A21 21 0 0 0 0 10.62s4.45 7.73 11 7.73a9.16 9.16 0 0 0 4-1l-1.44-1.45a7 7 0 0 1-2.56.52zm0-11.61c4.09 0 7.37 3.93 8.7 5.8a19.64 19.64 0 0 1-2.81 3.17l1.37 1.37A21 21 0 0 0 22 10.62s-4.45-7.73-11-7.73a9.16 9.16 0 0 0-4 1l1.43 1.44A7 7 0 0 1 11 4.81z"/><path d="M12.62 15L11 13.3a2.79 2.79 0 0 1-2.7-2.67L6.64 9a4.68 4.68 0 0 0 6 6zm2.82-2.66a4.73 4.73 0 0 0-6.19-6.19l1.58 1.58h.25a2.81 2.81 0 0 1 2.8 2.8v.25z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("facebook.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9.95 20"><path d="M8.09 3.81c-1.4 0-1.58.84-1.58 1.67v1.3h3.35L9.49 11h-3v9H2.33v-9H0V6.88h2.42V3.81C2.42 1.3 3.81 0 6.6 0H10v3.81z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("fact_track_icon.svg",'<svg viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg"><path fill-opacity=".502" d="M10.895 2h36.923v36.48H10.895z"/><path d="M2 11.338h36.923v36.48H2z"/><path d="M27.244 29.815l-11.887 6.71v-13.42l11.887 6.71z" fill="#FFF"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("fire.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 26"><path fill="#FF1464" d="M4 3c2.95 1 6.84 8.93 6.84 8.93.94-1.645 1.29-3.56 1-5.43C15.068 9.46 16.934 13.62 17 18c-.12 7-8.85 8.05-8.85 8.05.926-.702 1.554-1.726 1.76-2.87.29-1.8-2.58-3.8-2.58-3.8-2.48 4.15-1.07 6.67-1.07 6.67S0 23.1 0 19.24c0-3.86 4.22-7.75 4.62-10.79C4.828 6.61 4.616 4.747 4 3zm2.58 5.51h-.02v.17c-.393 1.918-1.187 3.73-2.33 5.32C3.13 15.77 2 17.65 2 19.25c0 1 .88 2.07 2 3 .313-1.383.86-2.702 1.62-3.9l1.1-1.84 1.84 1.2c.59.45 3.29 2.48 3.44 5 1.808-.915 2.963-2.754 3-4.78-.01-2.238-.607-4.434-1.73-6.37-.19.5-.426.98-.7 1.44l-1.89 3.1-1.62-3.29c-.736-1.484-1.565-2.92-2.48-4.3z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("flag.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.48 23.01"><path d="M16 3.93C13.56 2 11.09 2.38 8.91 2.72a9.31 9.31 0 0 1-3.8.08L5.5.31 3.52 0 2 9.55l-.28 1.59-.1.59L0 22.71 2 23l1.54-10.05a9.43 9.43 0 0 0 5.68.36 7.87 7.87 0 0 1 4.43.13l1.17.51.18-1.27c.45-2.67.89-5.28 1.34-7.79l.1-.59zm-2.75 7.28a11.57 11.57 0 0 0-4.34.11c-1.84.29-3.45.53-5.05-.46L4 9.93c.29-1.67.58-3.38.88-5.12a11.54 11.54 0 0 0 4.34-.11c1.85-.29 3.46-.54 5.07.47q-.52 2.95-1.04 6.05z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("for-the-record.svg",'<svg viewbox="0 0 501 145" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="a" d="M0 145h500.922V0H0z"/></defs><g fill="none" fill-rule="evenodd"><path fill="#FFF" d="M49 20v3.977H28.418v10.958H47.84v3.977H28.418V56H24V20zM122.976 37.713c0-8.235-6.446-15.001-14.785-15.001-8.394 0-14.785 6.766-14.785 15 0 8.288 6.391 15.108 14.785 15.108 8.34 0 14.785-6.82 14.785-15.107m-33.903 0c0-10.722 8.448-19.062 19.118-19.062 10.669 0 19.117 8.34 19.117 19.062 0 10.94-8.448 19.168-19.117 19.168-10.67 0-19.118-8.228-19.118-19.168M179.584 37.17c5.58 0 7.907-2.275 7.907-6.607 0-4.28-2.328-6.88-7.581-6.88h-8.341V37.17h8.015zm13.593 18.467v.271h-4.981l-10.507-14.73h-6.12v14.73h-4.333V19.623h13.052c7.42 0 11.536 4.55 11.536 10.887 0 5.9-3.954 9.967-9.315 10.563l10.668 14.564zM318.477 55.909V23.63h-12.619v-4.008h29.516v4.008H322.81v32.278zM402.262 56.412v-17.33h-20.626v17.33h-4.333V20.126h4.333v14.948h20.626V20.126h4.332v36.286zM476.317 19.623v4.008h-20.943v11.046h19.86v4.008h-19.86V51.9h21.214v4.009H451.04V19.623zM36.11 107.34c5.577 0 7.907-2.276 7.907-6.608 0-4.28-2.33-6.879-7.582-6.879h-8.341v13.487h8.015zm13.594 18.466v.272H44.72l-10.506-14.73h-6.12v14.73H23.76V89.792h13.053c7.42 0 11.536 4.55 11.536 10.887 0 5.907-3.954 9.968-9.316 10.563l10.67 14.564zM121.32 89.792V93.8h-20.942v11.053h19.86v4.001h-19.86v13.216h21.214v4.008H96.045V89.792zM192.78 119.96h.27v4.279c-1.949 1.243-5.686 2.811-10.668 2.811-10.994 0-19.118-8.07-19.118-19.115 0-10.94 8.07-19.115 19.063-19.115 3.52 0 7.42.866 10.453 2.765v4.272h-.271c-1.788-1.349-5.633-2.976-10.127-2.976-8.503 0-14.786 6.442-14.786 15.054s6.283 15.054 14.84 15.054c4.766 0 8.34-1.515 10.344-3.03M265.074 107.882c0-8.228-6.444-15.001-14.785-15.001-8.394 0-14.785 6.773-14.785 15 0 8.289 6.391 15.108 14.785 15.108 8.341 0 14.785-6.82 14.785-15.107m-33.903 0c0-10.722 8.449-19.062 19.118-19.062 10.67 0 19.118 8.34 19.118 19.062 0 10.94-8.449 19.168-19.118 19.168-10.67 0-19.118-8.228-19.118-19.168M320.95 107.34c5.578 0 7.908-2.276 7.908-6.608 0-4.28-2.33-6.879-7.582-6.879h-8.34v13.487h8.014zm13.595 18.466v.272h-4.984l-10.506-14.73h-6.12v14.73h-4.332V89.792h13.052c7.42 0 11.536 4.55 11.536 10.887 0 5.907-3.954 9.968-9.315 10.563l10.669 14.564zM382.202 93.8v28.27h6.065c9.912 0 14.46-5.417 14.46-13.97 0-9.154-4.44-14.3-14.676-14.3h-5.85zm6.175-4.008c13.105 0 18.682 7.91 18.682 18.308 0 10.127-5.36 17.978-18.899 17.978h-10.29V89.792h10.507z"/><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><path d="M429.745 71.174h68.526V2.651h-68.526v68.523zm0 71.175h68.526V73.825h-68.526v68.524zM358.54 71.174h68.525V2.651H358.54v68.523zm0 71.175h68.525V73.825H358.54v68.524zM287.36 71.174h68.527V2.651H287.36v68.523zm0 71.175h68.527V73.825H287.36v68.524zm-71.177 0h68.525V73.825h-68.525v68.524zm-.17-71.175h68.527V2.651h-68.527v68.523zm-71.008 0h68.527V2.651h-68.527v68.523zm0 71.175h68.527V73.825h-68.527v68.524zM73.83 71.174h68.526V2.651H73.829v68.523zm0 71.175h68.526V73.825H73.829v68.524zM2.651 71.174h68.527V2.651H2.65v68.523zm0 71.175h68.527V73.825H2.65v68.524zM429.716 0H0v145H500.922V0h-71.206z" fill="#FFF" mask="url(#b)"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("framework.svg",'<svg viewbox="0 0 431 95" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><path d="M0 95h431V0H0v95zm8-8h415V8H8v79z"/><path d="M30.163 71.546V43.319h-7.057V35.83h7.057V23.3H48.02v7.706h-8.424v4.824h9.936v7.488h-9.936v28.227zM67.531 71.546h-9.433V35.83h22.106v8.065H67.531zM94.602 60.53c0 3.095 2.521 4.68 5.473 4.68 3.24 0 5.904-1.513 7.13-2.88v-6.12c-.866-.362-2.522-.793-5.042-.793-4.824 0-7.56 2.015-7.56 5.112zM89.49 45.694v-8.208c1.729-1.152 6.913-2.665 11.882-2.665 9.143 0 15.264 4.537 15.264 12.89v23.834h-8.928V68.81c-1.657 1.8-5.33 3.744-9.938 3.744-6.335 0-12.384-3.887-12.384-11.665 0-7.416 6.912-12.096 15.553-12.096 2.233 0 4.825.504 6.266 1.08v-1.368c0-3.24-1.946-5.76-7.346-5.76-4.32 0-7.992 1.512-9.65 2.951h-.719zM137.66 71.546h-9.435V35.83h52.997v35.715h-9.432V44.039h-12.314v27.507h-9.504V44.039H137.66zM215.505 50.376c-.216-4.824-3.17-7.992-7.777-7.992-4.248 0-8.208 2.807-8.712 7.992h16.489zm-25.562 3.601c0-10.873 7.488-19.155 17.785-19.155 10.44 0 16.778 7.85 16.778 19.802 0 .648-.072 1.368-.072 1.873-.073.287-.073.575-.073.863h-25.274c.792 4.321 4.177 7.274 10.514 7.274 4.896 0 8.856-1.368 11.665-3.601h.719v8.137c-2.664 1.944-7.128 3.384-13.177 3.384-11.521 0-18.865-7.633-18.865-18.577zM313.77 64.273c6.121 0 9.722-4.536 9.722-10.585 0-6.049-3.6-10.585-9.722-10.585-6.12 0-9.72 4.536-9.72 10.585 0 6.05 3.6 10.585 9.72 10.585m0-29.45c10.945 0 19.154 7.776 19.154 18.865 0 11.09-8.209 18.865-19.154 18.865-10.944 0-19.153-7.776-19.153-18.865 0-10.945 8.21-18.866 19.153-18.866M352.003 71.546h-9.433V35.83h22.106v8.065h-12.673zM405.932 36.55l-15.193 16.347 16.777 17.929v.72h-11.377l-13.465-14.762v14.762h-9.432V23.302h9.432v26.786l12.745-14.257h10.513zM276.79 35.831h9.433v35.715h-52.997V35.831h9.432v27.507h12.314V35.831h9.504v27.507h12.313z"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("gear.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 21.68"><path d="M8.79 21.68l-3-1.09v-2.95l-.47-.41-2.9.5-1.65-2.78 1.86-2.27-.11-.62L0 10.61l.55-3.22 2.91-.51.31-.54-1-2.75 2.46-2.07L7.8 3l.59-.21L9.4 0h3.23l1 2.78.59.22 2.53-1.49 2.48 2.09-1 2.78.3.54 2.9.5.57 3.18-2.52 1.48-.11.62 1.86 2.24-1.58 2.82-2.92-.51-.48.4v2.93l-3 1.09-1.89-2.24h-.63zm1-4.15h2.4l1.61 1.9.53-.19v-2.49l1.85-1.53 2.45.43.28-.5-1.58-1.91.42-2.36 2.15-1.26-.09-.55-2.47-.43-1.17-2.08.83-2.35-.44-.37-2.15 1.26-2.27-.84-.85-2.36h-.56l-.86 2.37-2.26.79-2.16-1.23L5 4.2l.86 2.33-1.2 2.08L2.2 9l-.1.58 2.14 1.23.42 2.36-1.58 1.97.28.48 2.47-.43 1.8 1.57v2.48l.53.19zM11 15.27a4.37 4.37 0 1 1 4.37-4.37A4.37 4.37 0 0 1 11 15.27zm0-6.82a2.46 2.46 0 1 0 2.46 2.46A2.43 2.43 0 0 0 11 8.44z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("genius-level.svg",'<svg viewBox="0 0 500 190"><path d="M266.9 130.1V81.5h9.6v40.1h22.6v8.4h-32.2v.1zM347 81.5v8.4h-24.7v10.4h23v8.4h-23v13h25.1v8.4h-34.7V81.5H347zm47.3 0h10.3L386.2 130H376l-18.3-48.5h10.4l10.3 29.7c.8 2.5 2.2 6.5 2.8 8.9h.1c.6-2.3 2-6.3 2.9-8.9l10.1-29.7zm57.2 0v8.4h-24.7v10.4h23v8.4h-23v13h25.1v8.4h-34.7V81.5h34.3zm15.8 48.6V81.5h9.6v40.1h22.6v8.4h-32.2v.1zM43 46.4c-3.3 2.3-9.1 4.8-17 4.8-15 0-26-10.9-26-25.6C0 10.9 11 0 25.8 0c6.4 0 11.9 2 15 4.4v9.1h-.7C37 10.7 32 8.7 26.2 8.7c-9.3 0-16.6 7.2-16.6 16.9 0 10.8 8.7 16.9 16.8 16.9 3.4 0 6.1-.7 7.8-1.6V31H22v-8.1h21v23.5zM92.9 1.3v8.4H68.2v10.4h23v8.4h-23v13h25.1v8.4H58.6V1.3h34.3zm25.3 48.5h-9.5V1.3h9.3l17 26.2c2.6 4.1 4 6.4 5.1 8h.1c-.1-1.8-.1-5.9-.1-9.5V1.3h9.5v48.5h-9.3l-17.1-25.6c-2-3-4.1-6.5-5-8h-.2c.1 1.8.1 5.9.1 9.5v24.1h.1zm49 0V1.3h9.6v48.5h-9.6zM194 32.7V1.3h9.6v30.9c0 6.7 3.7 10.1 9.9 10.1s9.9-3.3 9.9-10.1V1.3h9.6v31.4c0 12.2-8.3 18.4-19.6 18.4-11.2.1-19.4-6.1-19.4-18.4zm75.9-11c7.8 2.9 11.4 7 11.4 14.5 0 8.6-6.7 15-18 15-5.4 0-10.7-1.3-14.8-3.8V38h.7c2.8 2.5 8.6 4.6 13.2 4.6 6.6 0 9.2-3 9.2-6.2 0-3.5-2.2-5.1-6.6-6.7l-6.2-2.2c-5.9-2.2-11.2-5.8-11.2-13.9 0-7 6.5-13.5 17.2-13.5 5.5 0 10 1.7 12.2 3.3v9.1h-.7c-2.3-2-6.7-3.8-11.4-3.8-4.9 0-7.7 2.2-7.7 4.9 0 3.2 1.7 4.3 6.2 5.9l6.5 2.2zm32.5.9H500v9.6H302.4v-9.6zM.1 98.6h245.3v9.6H.1v-9.6zm.1 81.6H500v9.6H.2v-9.6z" fill="#fff"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("genius-test.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 187"><g fill="#FFF"><path d="M22.925 53.386V11.088H5.105V2.236h46.567v8.852H33.85v42.298zm72.538 0V30.762H70.925v22.624H60V2.236h10.925v19.673h24.538V2.236h10.925v51.15zm59.373-51.24V11h-28.12v10.91h26.24v8.853h-26.24v13.681h28.568v8.853H115.79V2.146h39.045zm84.448 47.574c-3.672 2.414-10.299 5.007-19.254 5.007-17.105 0-29.642-11.446-29.642-27.006S202.925.715 219.761.715c7.254 0 13.523 2.147 17.105 4.65v9.569h-.806c-3.582-2.951-9.224-5.008-15.761-5.008-10.657 0-18.896 7.6-18.896 17.795 0 11.357 9.85 17.795 19.164 17.795 3.85 0 6.896-.804 8.776-1.699V33.355h-13.88V24.77h23.91v24.95h-.09zm50.328-47.574V11h-28.12v10.91h26.24v8.853h-26.24v13.681h28.568v8.853h-39.493V2.146h39.045zm21.761 51.24h-10.836V2.236h10.657l19.343 27.542c2.956 4.292 4.567 6.707 5.732 8.495h.09c-.09-1.878-.18-6.26-.18-10.015V2.236h10.836v51.15h-10.657L316.925 26.38c-2.238-3.13-4.656-6.886-5.731-8.495h-.09c.09 1.877.18 6.26.18 10.015v25.486h.09zm48.358 0V2.236h10.926v51.15zm23.194-18.064V2.146h10.926v32.64c0 7.064 4.209 10.64 11.194 10.64 6.985 0 11.283-3.487 11.283-10.64V2.146h10.926v33.176c0 12.877-9.493 19.405-22.299 19.405-12.716 0-22.03-6.439-22.03-19.405zm78.895-11.625c8.867 3.04 12.986 7.422 12.986 15.291 0 9.122-7.702 15.828-20.418 15.828-6.179 0-12.179-1.341-16.836-4.024v-9.747h.806c3.135 2.683 9.851 4.829 15.045 4.829 7.522 0 10.478-3.22 10.478-6.528 0-3.666-2.508-5.365-7.523-7.064l-7.074-2.325c-6.717-2.325-12.717-6.081-12.717-14.666 0-7.332 7.433-14.218 19.612-14.218 6.269 0 11.373 1.878 13.97 3.398v9.568h-.806c-2.597-2.146-7.701-3.934-12.985-3.934-5.552 0-8.776 2.325-8.776 5.097 0 3.398 1.97 4.56 6.985 6.17l7.254 2.325zM48.896 158.01v-42.297H31.075v-8.852h46.567v8.852H59.82v42.298z"/><path d="M54 88.082c24.18 0 43.97 19.673 43.97 43.906 0 24.145-19.701 43.907-43.97 43.907-24.18 0-43.97-19.673-43.97-43.907 0-24.233 19.701-43.906 43.97-43.906zm0-9.39c-29.463 0-53.373 23.876-53.373 53.296 0 29.42 23.91 53.297 53.373 53.297 29.463 0 53.373-23.876 53.373-53.297 0-29.42-24-53.296-53.373-53.296zm144.09 28.079v8.853h-28.12v10.91h26.239v8.853H169.97v13.681h28.567v8.853h-39.492v-51.15h39.045z"/><path d="M178.03 88.082c24.179 0 43.97 19.673 43.97 43.906 0 24.145-19.701 43.907-43.97 43.907-24.18 0-43.97-19.673-43.97-43.907 0-24.233 19.701-43.906 43.97-43.906zm0-9.39c-29.463 0-53.373 23.876-53.373 53.296 0 29.42 23.91 53.297 53.373 53.297 29.463 0 53.373-23.876 53.373-53.297 0-29.42-24-53.296-53.373-53.296zm130.03 49.541c8.865 3.04 12.985 7.422 12.985 15.291 0 9.121-7.702 15.828-20.418 15.828-6.18 0-12.18-1.341-16.836-4.024v-9.747h.806c3.134 2.682 9.85 4.829 15.045 4.829 7.522 0 10.477-3.22 10.477-6.528 0-3.667-2.507-5.366-7.522-7.065l-7.075-2.325c-6.716-2.325-12.716-6.08-12.716-14.665 0-7.333 7.433-14.218 19.612-14.218 6.269 0 11.373 1.878 13.97 3.398v9.568h-.806c-2.597-2.146-7.701-3.935-12.985-3.935-5.552 0-8.776 2.325-8.776 5.097 0 3.399 1.97 4.561 6.985 6.17l7.254 2.326z"/><path d="M301.97 88.082c24.18 0 43.97 19.673 43.97 43.906 0 24.145-19.701 43.907-43.97 43.907-24.179 0-43.97-19.673-43.97-43.907.09-24.233 19.791-43.906 43.97-43.906zm0-9.39c-29.463 0-53.373 23.876-53.373 53.296 0 29.42 23.91 53.297 53.373 53.297 29.463 0 53.373-23.876 53.373-53.297 0-29.42-23.91-53.296-53.373-53.296zm119.015 79.945v-42.298h-17.82v-8.852h46.566v8.852h-17.82v42.298z"/><path d="M426 88.082c24.18 0 43.97 19.673 43.97 43.906 0 24.145-19.701 43.907-43.97 43.907-24.18 0-43.97-19.673-43.97-43.907.09-24.233 19.79-43.906 43.97-43.906zm0-9.39c-29.463 0-53.373 23.876-53.373 53.296 0 29.42 23.91 53.297 53.373 53.297 29.463 0 53.373-23.876 53.373-53.297 0-29.42-23.91-53.296-53.373-53.296z"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("google.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.59 19"><path d="M9.5 8.14v3.26h5.43a5.21 5.21 0 0 1-5.43 4.07 5.91 5.91 0 0 1-5.84-6 5.91 5.91 0 0 1 5.84-6A5.23 5.23 0 0 1 13.3 5l2.58-2.44A8.8 8.8 0 0 0 9.5 0 9.44 9.44 0 0 0 0 9.5 9.44 9.44 0 0 0 9.5 19c5.43 0 9.09-3.8 9.09-9.23a6.08 6.08 0 0 0-.14-1.63z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("hamburger.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14.46"><path d="M0 0h22v1.99H0zm0 6.24h22v1.99H0zm0 6.23h22v1.99H0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("instagram.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 0c2.724 0 3.062 0 4.125.06.83.017 1.65.175 2.426.467.668.254 1.272.65 1.77 1.162.508.498.902 1.1 1.153 1.768.292.775.45 1.595.467 2.424.06 1.063.06 1.41.06 4.123 0 2.712-.06 3.06-.06 4.123-.017.83-.175 1.648-.467 2.424-.52 1.34-1.58 2.402-2.922 2.92-.776.293-1.596.45-2.425.468-1.063.06-1.41.06-4.125.06-2.714 0-3.062-.06-4.125-.06-.83-.017-1.65-.175-2.426-.467-.668-.254-1.272-.65-1.77-1.162-.508-.498-.902-1.1-1.153-1.768-.292-.775-.45-1.595-.467-2.424C0 13.055 0 12.708 0 9.995c0-2.712 0-3.04.06-4.123.017-.83.175-1.648.467-2.424.25-.667.645-1.27 1.153-1.77.5-.507 1.103-.9 1.77-1.15C4.225.234 5.045.077 5.874.06 6.958 0 7.285 0 10 0zm0 1.798h.01c-2.674 0-2.992.06-4.046.06-.626.02-1.245.15-1.83.377-.434.16-.828.414-1.152.746-.337.31-.602.69-.775 1.113-.222.595-.34 1.224-.348 1.858-.06 1.064-.06 1.372-.06 4.045s.06 2.99.06 4.044c.007.633.125 1.262.347 1.857.17.434.434.824.775 1.142.31.33.692.587 1.113.754.596.222 1.224.34 1.86.348 1.063.06 1.37.06 4.045.06 2.674 0 2.992-.06 4.046-.06.635-.008 1.263-.126 1.86-.348.87-.336 1.56-1.025 1.897-1.897.217-.593.332-1.218.338-1.848.06-1.064.06-1.372.06-4.045s-.06-2.99-.06-4.044c-.01-.623-.128-1.24-.347-1.827-.16-.435-.414-.83-.745-1.152-.318-.34-.71-.605-1.143-.774-.596-.222-1.224-.34-1.86-.348-1.063-.06-1.37-.06-4.045-.06zm0 3.1c1.355 0 2.655.538 3.613 1.496.958.958 1.496 2.257 1.496 3.61 0 2.82-2.288 5.108-5.11 5.108-2.822 0-5.11-2.287-5.11-5.107 0-2.82 2.288-5.107 5.11-5.107zm0 8.415c.878 0 1.72-.348 2.34-.97.62-.62.97-1.46.97-2.338 0-1.827-1.482-3.31-3.31-3.31s-3.31 1.483-3.31 3.31 1.482 3.308 3.31 3.308zm6.51-8.633c0 .658-.533 1.192-1.192 1.192-.66 0-1.193-.534-1.193-1.192 0-.66.534-1.193 1.193-1.193.316 0 .62.126.844.35.223.223.35.526.35.843z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("irl.svg",'<svg viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg"><path d="M78.994 97.704H72.02v51.272H42.448V0h42.354c35.354 0 50.474 24.013 50.474 48.028 0 17.995-8.736 38.066-27.686 46.085l27.868 54.862h-30.42l-26.044-51.27zm65.208 51.27V0h29.573v123.183H200v25.792h-55.798zM72.02 72.71h11.004c13.18 0 22.68-10.228 22.68-24.68 0-12.45-7.784-22.235-24.904-22.235h-8.78V72.71zM0 148.975V0h29.573v148.975H0z" fill="#FFF" fill-rule="evenodd"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("left_arrow.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.87 21.32"><path d="M9.37 21.32L0 10.66 9.37 0l1.5 1.32-8.21 9.34L10.87 20l-1.5 1.32"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lightning.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11.37 22"><path d="M0 7l6.16-7 3.3 7H6.89S5.5 12.1 5.5 12.17h5.87L6.09 22l.66-7H.88l2.89-8z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("line_graph.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 13.91"><path d="M2.93 13.91L0 11.45l7.72-9.19 6.18 4.15L19.01 0 22 2.38l-7.31 9.17-6.25-4.19-5.51 6.55"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lock.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.08 22"><path d="M15.08 10.86V20H2v-9.14h13.08M8.54 0a6.31 6.31 0 0 0-6.31 6.31v2.55H0V22h17.08V8.86h-2.23V6.31A6.31 6.31 0 0 0 8.54 0zM4.63 8.86V6.31a3.91 3.91 0 0 1 7.81 0v2.55z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("logo.svg",'<svg viewBox="0 0 124 17" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M13.778 2.823l-.1-.1c-.908-.908-2.118-1.446-3.462-1.446-1.344 0-2.588.538-3.462 1.445-.235.235-.436.504-.638.773 0 .033-.034.033-.034.067 0 .067.068.134.135.134h.067c.57-.2 1.176-.336 1.815-.336 1.41 0 2.72.572 3.66 1.48.033.033.067.033.1.033h1.85c.066 0 .133-.068.133-.135V2.924c-.034-.034-.034-.068-.067-.1zm-.1 5.813h-1.884c-.973 0-1.78-.74-1.847-1.714 0-.067-.067-.134-.135-.134-.403.034-.772.202-1.075.47-.033 0-.033.034-.067.034l-.034.034v.033l-.033.03-.034.035-.036.033-.034.033-.033.034s0 .034-.033.034l-.034.035s0 .033-.033.033l-.033.034s0 .033-.034.033c0 0 0 .034-.033.034 0 0 0 .032-.034.032 0 0 0 .032-.034.032 0 0 0 .034-.036.034 0 0 0 .032-.034.032v.708c.035 1.007.84 1.814 1.85 1.814h1.344c.067 0 .134.067.134.134v.504c0 .067.066.135.133.135h.036c.807-.168 1.546-.538 2.15-1.042.034-.033.068-.066.068-.1v-.64.035-.607c-.034-.1-.1-.168-.168-.168z"/><path d="M13.576 14.18h-.033c-.94.37-2.017.572-3.092.572-4.702 0-8.533-3.83-8.533-8.535 0-1.11.202-2.15.572-3.092v-.067c0-.034-.068-.1-.136-.1-.033 0-.1.033-.1.066C.84 4.436 0 6.418 0 8.57c0 4.468 3.63 8.098 8.1 8.098 2.183 0 4.132-.84 5.577-2.218.034-.034.067-.067.067-.1 0-.102-.067-.17-.168-.17zm17.206-3.964h4.47c1.04 0 1.78-.706 1.78-1.68v-.17c0-.066-.067-.167-.168-.167h-6.082c-.068 0-.168.065-.168.165v1.714c.033.07.1.135.168.135zm6.485-8.436h-6.485c-.068 0-.168.068-.168.17v1.713c0 .067.067.168.168.168h4.84c1.04 0 1.78-.703 1.78-1.68v-.233c.033-.067-.034-.134-.135-.134z"/><path d="M37.267 14.65h-7.662c-1.243 0-1.982-.704-1.982-1.98V.47c0-.067-.067-.168-.168-.168-1.412.034-2.218.908-2.218 2.32V14.35c0 1.443.874 2.317 2.32 2.317h8.064c1.078 0 1.817-.706 1.817-1.714v-.168c0-.067-.067-.135-.168-.135zm15.123-.032c-.707-.168-1.143-.773-1.143-1.58V.538c0-.068-.034-.1-.068-.135h-.036c-.135-.067-.336-.067-.47-.067-1.11 0-1.85.773-1.85 1.95V14.72c0 1.174.74 1.947 1.85 1.947 1.075 0 1.814-.74 1.814-1.882 0-.067-.035-.135-.1-.168zm10.248.032c-.1 0-.235.035-.302.035-1.143.034-1.714-.538-2.218-1.378l-5.612-9.375c-.033-.034-.067-.068-.134-.068s-.168.068-.168.17V9.24l3.562 5.882c.47.806 1.11 1.546 2.52 1.546 1.31 0 2.184-.64 2.487-1.815v-.067c0-.067-.067-.135-.135-.135zm-1.176-4.838c.068 0 .168-.067.168-.168V.538c0-.068-.033-.135-.1-.135-.135-.033-.337-.067-.437-.067-1.11 0-1.85.773-1.85 1.95v3.93l2.12 3.496c0 .067.066.1.1.1zm16.366 4.806c-.74-.168-1.143-.74-1.143-1.58V.538c0-.068-.067-.135-.134-.135-.165-.067-.3-.067-.434-.067-1.11 0-1.848.773-1.848 1.95V14.72c0 1.174.74 1.947 1.848 1.947 1.075 0 1.814-.74 1.814-1.882v-.034c.033-.065-.034-.1-.1-.132zm23.22-.638c-.033 0-.067 0-.067.033l-.064.034c-.907.436-1.95.638-3.125.638-2.017 0-3.596-.605-4.705-1.747-1.143-1.21-1.747-2.99-1.747-5.31V.438c0-.068-.068-.136-.135-.136-.168-.033-.302-.067-.437-.067-1.11 0-1.848.773-1.848 1.95v7.09c0 4.704 2.487 7.426 6.788 7.426 2.352 0 4.234-.84 5.377-2.383l.033-.067c.034-.034.034-.068.034-.1.065-.1 0-.17-.103-.17z"/><path d="M101.15.27c-.17-.035-.303-.068-.438-.068-1.11 0-1.848.773-1.848 1.95v7.19c0 .907-.134 1.68-.403 2.25v.103c0 .068.07.168.17.168h.068c1.714-.336 2.587-1.747 2.587-4.167V.436c-.033-.1-.067-.134-.134-.167zm15.928 9.643l1.713.303c1.85.336 2.05 1.008 2.05 1.512v.034c0 .067.07.168.17.168h.035c1.378-.168 2.218-.874 2.218-1.85 0-.94-.772-1.544-2.352-1.847L119.2 7.93c-4-.74-4.84-2.89-4.84-4.57 0-.87.236-1.68.706-2.35l.068-.067c0-.033.035-.033.035-.066 0-.067-.067-.168-.168-.168h-.068l-.067.032c-1.85.84-2.924 2.42-2.924 4.3.034 2.52 1.848 4.27 5.14 4.874zm6.586 4.033h-.034l-.067.033c-.974.434-2.117.67-3.394.67-2.02 0-3.8-.605-5.447-1.815-.437-.336-.672-.74-.672-1.21 0-.067-.032-.134-.1-.134-.17-.033-.336-.067-.504-.067-.537 0-1.04.27-1.378.74-.303.403-.437.873-.404 1.344.067.503.336.94.807 1.276 1.715 1.277 3.563 1.882 5.646 1.882 2.553 0 4.637-.874 5.678-2.42l.034-.067c0-.034.034-.067.034-.067-.034-.1-.1-.167-.202-.167z"/><path d="M117.38 3.16c0 .066.067.133.134.133h.27c1.377 0 2.15.37 3.057 1.042.37.302.81.437 1.21.437.54 0 1.045-.27 1.38-.74.27-.336.404-.74.404-1.176 0-.067-.034-.134-.1-.134-.202-.067-.404-.168-.606-.302-.974-.706-1.814-1.11-3.26-1.11-1.478 0-2.52.706-2.486 1.714-.033.034 0 .1 0 .135z"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("magnifying_glass.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.48 21.59"><path d="M21.48 20.18L14.8 13.5a8.38 8.38 0 1 0-1.43 1.4l6.69 6.69zM2 8.31a6.32 6.32 0 1 1 6.32 6.32A6.32 6.32 0 0 1 2 8.31z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("music_notes_crossout.svg",'<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg"><path d="M20.779 17.11l-1.849-1.85V8.93l-5.44.89-1.603-1.602L18.93 7.06V4.18L9.453 5.784 7.856 4.186 20.77 2l.009 15.11zm-1.295 4.362a3.32 3.32 0 0 1-4.656-4.656l4.656 4.656zM8.628 10.615l-.028.005v10.06a3.32 3.32 0 1 1-3.32-3.32 3.29 3.29 0 0 1 1.49.37V8.758l1.858 1.857zm-6.278-7.7L3.764 1.5 24.25 21.985l-1.414 1.414L2.35 2.914z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("new_message.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22.28 22.73"><path d="M16.58 20.73H2V6.15h9.07l2-2H0v18.58h18.58V8.75l-2 2v9.98z"/><path d="M18.65 0l-4.16 4.15-2 2L8 10.66l-1.59 5.25 5.19-1.6 5-5 2-2 3.71-3.71zm-2.07 7.38l-5.71 5.71-1.23.38-.82-.82.38-1.26 5.25-5.23 2-2L18.65 2l1.67 1.67-1.74 1.71z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("news.svg",'<svg viewBox="0 0 660 321" xmlns="http://www.w3.org/2000/svg"><path d="m94.3 315.3s-27.9-95.8-33.6-114.9c-4.4-14.6-8.1-31.5-12.1-54.6 2.4 41.7 2.8 53.8 2.8 90.2v79.3h-51.4v-310.6h51s23.5 88.6 29.5 110.4c5.3 19.8 9.3 36 11.7 49.3-1.6-30.3-2-67.9-2-99.1 0-23.9 0-60.7 0-60.7h49.8v310.6h-45.7zm64.7 0v-310.6h119.1v46.5h-64.5v84.1h57.6v43.3h-57.6v90.2h79.8v46.5zm488.3-215.9v.2h-43.7c.6-6.1 2-22.5 2-29.7 0-26.7-6.5-35.5-17.4-35.5-12.5 0-21 11.6-21 35.3 0 33 16.5 45.9 29.6 53.9 4.6 2.8 11.7 7.5 15.9 10 25.6 15.1 47.2 43.8 47.2 99.3 0 56.7-12 87.2-70.1 87.2-39.5 0-72-19.7-72-80 0-7.4 2.5-30.3 4.7-40.1h45.9c-1.4 8.6-2.7 30.4-2.7 37.7 0 34.6 11.3 44.6 23 44.6 9 0 18.4-6 18.4-40.2 0-43.4-8.5-53.4-30.2-67-4.7-2.9-11.5-7-14-8.5-29.5-18.2-42.5-47.6-42.5-84.9 0-51.5 24.8-81.6 67.9-81.6 38.3 0 62.6 23.7 62.6 70.3 0 17-3.2 27.8-3.6 29zm-243.6 39.6c-3.6 22.4-12.2 62-15.2 85.3-4.4 35.2-11.7 85.4-12.5 91h-48.1l-36.8-310.6h52.2c.6 6.6 6.1 65.5 9.3 107.6v.1c1.6 21 3.6 69.4 3 74.8 1.2-5.4 10-54.2 12.8-75.2v-.1c5.7-41.2 8.7-80.1 12.4-107.2h46c3.6 27.1 6.7 65.9 12.4 107.2 2.8 21 11.6 69.8 12.8 75.2 0-5.4 1.4-53.8 3-74.8 3.2-42.1 8.7-101 9.3-107.6h52.2l-36.8 310.6h-48.1c-.8-5.6-8.1-55.8-12.5-91-3.1-23.3-11.7-62.8-15.4-85.3z" fill="#fff"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("no_document.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.21 21.21"><path d="M15.2 18.02H5.14V7.96l-1.89-1.9v13.85H17.1M16.07 3.19v10.04l1.9 1.89V1.3H4.14l1.9 1.89h10.03M.008 1.418L1.422.003l19.8 19.8-1.415 1.414z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("one_document.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.4 22"><path d="M15.47 1.92v18.16H1.92V1.92h13.55M17.4 0H0v22h17.4V0z"/><path d="M5.11 6.45h7.82v1.44H5.11zm0 8.1h7.82v1.44H5.11zm0-4.05h7.82v1.44H5.11z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("open-mic.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 89"><path d="M420.48 10.974c3.73 1.048 7.32-1.837 7.32-5.319A5.765 5.765 0 0 0 422.045 0a5.637 5.637 0 0 0-4.363 2.211 5.658 5.658 0 0 0-.999 4.795 5.473 5.473 0 0 0 3.797 3.968zm53.99 40.48l-.907-.626-.677.87a15.734 15.734 0 0 1-8.222 5.675 16.89 16.89 0 0 1-4.186.524c-8.64 0-15.446-6.992-15.446-15.917a16.222 16.222 0 0 1 4.368-11.204 15.116 15.116 0 0 1 11.078-4.67c4.944 0 9.245 2.155 12.428 6.252l.681.822.907-.63 4.546-3.11.96-.674-.691-.962a22.835 22.835 0 0 0-18.83-9.617c-12.519 0-22.45 9.507-23.357 21.966l-.288 3.078-5.919 10.43c-1.032 1.842-1.958 3.366-3.681 3.366-1.839 0-2.184-1.5-2.184-3.462V18.682h-7.608l-.03.053L398.516 48.9V29.987c0-7.035-3.225-11.993-10.478-11.993-4.949 0-9.091 2.193-12.888 8.305l-13.82 22.144V29.987c0-7.035-3.225-11.993-10.468-11.993-4.959 0-8.981 2.193-12.898 8.305l-13.819 22.144V29.857c.082-7.746-3.475-11.776-9.6-11.776a14.566 14.566 0 0 0-2.102.149c-3.581.25-7.07 2.053-10.56 7.564l-5.722 9.089-.48.755-4.378 6.967 6.893 4.607 10.253-16.662.302-.48c1.584-2.554 2.4-3.92 4.623-3.92 1.848 0 2.4 1.27 2.477 3.88v35.455h7.828l21.293-35.05c1.728-2.655 2.655-4.266 4.954-4.266s3.11 1.265 3.11 4.496v34.82h7.776l21.346-35.036c1.613-2.654 2.645-4.265 4.838-4.265 2.3 0 3.226 1.264 3.226 4.496V65.5h7.819l18.82-30.776v20.678c0 5.29 2.53 10.15 9.438 10.15 4.948 0 8.29-2.192 11.52-7.38l2.347-3.905a22.524 22.524 0 0 0 13.3 10.608 23.677 23.677 0 0 0 6.99 1.005 22.83 22.83 0 0 0 18.83-9.618l.696-.961-.984-.678-4.527-3.17zM249.202 53.42c-1.35 1.79-2.194 4.174-4.695 4.208-1.257 0-3.302-.154-3.302-4.02 0-6.17.115-10.637.182-13.407v-9.78c0-7.065-3.235-12.023-10.507-12.023a13.953 13.953 0 0 0-3.446.409c-3.624.803-6.778 3.193-9.864 8.011L204.634 47.54a.302.302 0 0 1-.557-.158V30.42c0-7.065-3.36-12.023-10.503-12.023-1.193-.01-2.383.13-3.542.419-3.658.807-6.782 3.197-9.763 7.992-.106.197-2.295 4.328-5.064 9.334 0 0-6.24 10.742-8.347 14.296-2.477 4.145-6.596 7.603-13.152 7.603a15.228 15.228 0 0 1-7.397-1.885.298.298 0 0 1-.082-.481 64.587 64.587 0 0 0 4.32-5.607l16.493-24.934 1.114-1.63a.303.303 0 0 0-.068-.413 24.738 24.738 0 0 0-14.39-4.819c-13.133 0-23.424 10.469-23.424 23.837v.62a25.01 25.01 0 0 0 .682 5.357 23.677 23.677 0 0 0 3.254 7.613.303.303 0 0 1-.106.428c-2.836 1.601-5.616 2.029-8.664 2.029-5.616 0-10.593-4.15-10.593-4.15l-.394-.327a23.307 23.307 0 0 0 3.005-11.488 23.56 23.56 0 0 0-.778-6.001 23.258 23.258 0 0 0-1.526-4.146c-2.693-6.347-8.112-10.382-14.002-12.16a23.346 23.346 0 0 0-25.44 7.91v-.481h.044l-.394-2.405v-.033c-1.709-6.78-7.344-10.229-14.222-8.497a12.642 12.642 0 0 0-6.293 3.539l-.24.26a18.378 18.378 0 0 0-3.495 6.15 48.48 48.48 0 0 0-1.046 2.62l-2.928 7.214a23.561 23.561 0 0 0-1.565-4.251c-2.779-6.603-8.347-10.753-14.371-12.565A23.93 23.93 0 0 0 7.38 24.9 24.034 24.034 0 0 0 .835 48.51a23.854 23.854 0 0 0 4.056 8.232c.091.125.187.24.283.36.226.29.48.568.696.852.216.284.552.61.836.909.13.134.254.27.388.399.135.13.346.332.519.48a23.967 23.967 0 0 0 26.664 4.127 24.164 24.164 0 0 0 5.491-3.636l-.062.096c-.11.154.278-.216.96-.918a24.638 24.638 0 0 0 1.636-1.76c1.364-1.505 3.015-3.424 4.32-5.184 4.484-6.01 11.122-21.125 11.122-21.125v-.053c1.248-2.745 2.952-7.078 5.76-7.078 2.304 0 3.394 2.125 3.6 4.328v58.926a.303.303 0 0 0 .302.298h8.012a.298.298 0 0 0 .297-.298V56.613l.082.101c.22.284.451.558.681.832.23.274.538.597.816.885.125.13.25.265.375.39l.509.48c8.768 8.225 22.338 8.434 31.353.481a.292.292 0 0 1 .403 0c4.023 4.121 9.288 6.093 15.75 6.093 4.655 0 9.186-.789 14.02-4.16a.297.297 0 0 1 .34 0 22.754 22.754 0 0 0 6.658 3.227 23.71 23.71 0 0 0 6.994 1.044c7.598 0 14.717-3.338 18.826-9.618 4.056-6.213 15.172-25.486 15.172-25.486 1.32-2.169 2.256-3.645 3.802-4.117h.053c.244-.043.491-.064.739-.062 2.203 0 3.125 1.27 3.125 4.51V65.28c0 .165.132.3.297.303h7.556l.052-.092h.317l21.37-34.594c1.411-2.169 2.29-3.645 3.811-4.12h.058c.239-.045.481-.066.724-.063 2.314 0 3.12 1.27 3.12 4.51l.03 22.404s-.831 12.022 10.506 12.022c6.557 0 9.836-3.905 12.86-8.3l10.468-16.407-6.94-4.622s-9.173 15.422-10.44 17.1zM24 58.186c-7.532.103-14.028-5.282-15.336-12.715C6.13 32.22 14.549 23.385 27.682 26.448c7.036 1.65 12.048 7.949 12.048 15.696 0 9.064-6.485 16.042-15.73 16.042zm70.138-.428c-7.335.091-13.658-5.151-14.938-12.388-2.482-12.94 5.76-21.557 18.552-18.542 6.854 1.61 11.736 7.752 11.736 15.301-.014 8.844-6.336 15.605-15.365 15.605l.015.024zm46.646-7.57a.297.297 0 0 1-.48-.047 16.44 16.44 0 0 1-2.064-8.012 16.198 16.198 0 0 1 4.368-11.247 15.097 15.097 0 0 1 11.074-4.67c.725 0 1.45.048 2.17.145a.298.298 0 0 1 .206.48l-12.202 19.11a54.652 54.652 0 0 1-3.086 4.218l.014.024z" fill="#FFF"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pause_compact.svg",'<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg"><path d="M.133.4h3.278v9.211H.133zM6.6.4h3.278v9.211H6.6z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pause_transparent.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M20.07 1.93v18.14H1.93V1.93h18.14M22 0H0v22h22V0z"/><path d="M6.62 6.86h2.95v8.29H6.62zm5.82 0h2.95v8.29h-2.95z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pencil.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.94 22"><path d="M16.92 0L2.16 14.73 0 22l7.18-2.22L21.94 5zM6.16 18.09l-1.7.52-1.12-1.12.52-1.75 13.07-13L19.24 5z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("people.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 16.47"><path d="M12.55 6.76a4 4 0 1 0 0-4.59 4.41 4.41 0 0 1 0 4.59zm3.07 2.91v5.17H22V9.66l-6.38.01M7 9a4.43 4.43 0 0 0 3.87-2.23 4.41 4.41 0 0 0 0-4.59 4.47 4.47 0 0 0-8.38 2.3A4.48 4.48 0 0 0 7 9zm-7 1.35v6.12h13.89v-6.14l-6.04.01-7.85.01"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("phone.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 17"><path d="M8.7 0h.5m-.5 0H1.3C.6 0 0 .6 0 1.4v14.2c0 .8.6 1.4 1.3 1.4h7.3c.7 0 1.3-.6 1.3-1.4V1.4C10 .6 9.4 0 8.7 0zM5 16.2c-.7 0-1.2-.6-1.2-1.2 0-.7.6-1.2 1.2-1.2.7 0 1.2.6 1.2 1.2.1.7-.5 1.2-1.2 1.2zM9 13H1V3h8v10z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pin.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.82 22"><path d="M21.82 20.62L17 15.83l3.59-3.59-3.04-3.07-3.36.12-4.1-4.1v-3L7.91 0 0 7.91l2.16 2.16 2.84.18 4.1 4.12-.1 3.36 3.08 3.08 3.59-3.59L20.43 22zM11 16.94l.12-3.36-5.27-5.24L3 8.16l-.25-.25 5.16-5.14.22.23v3l5.27 5.27 3.36-.12 1.09 1.09L12.06 18z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("play.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="#fff" d="M22 0H0v22h22V0z"/><path fill="#000" d="M15.6 11L7.9 6.5v9"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("play_compact.svg",'<svg width="10" height="12" xmlns="http://www.w3.org/2000/svg"><path d="M9.778 6L0 .5v11z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("play_transparent.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M20.07 1.93v18.14H1.93V1.93h18.14M22 0H0v22h22V0z"/><path d="M15.61 11L7.86 6.53v8.94L15.61 11"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("playstore.svg",'<svg width="19" height="20" viewBox="0 0 19 20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M.692 1.462v17c0 .46.154.846.385 1.076l.077.077 9.538-9.538v-.154L1.077.385C.847.615.692 1 .692 1.462z" fill="#00D2FF"/><path d="M13.846 13.308l-3.154-3.154v-.23l3.154-3.155.077.075L17.693 9c1.076.615 1.076 1.615 0 2.23l-3.847 2.078z" fill="#FFE000"/><path d="M13.923 13.23L10.693 10l-9.616 9.615c.385.385.923.385 1.615.077l11.23-6.46" fill="#FF3A44"/><path d="M2.692.385C2 0 1.462.077 1.077.462L10.692 10l3.23-3.23L2.692.384z" fill="#06E775"/><path d="M2.692.462l15 8.538c.462.308.77.615.77 1 0-.385-.23-.77-.77-1.077l-15-8.538C1.615-.23.77.308.77 1.538v.077c0-1.23.845-1.77 1.922-1.153z" fill="#FFF" opacity=".25"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("rewind.svg",'<svg viewbox="0 0 354 95" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="a" d="M0 94.321h353.633V0H0z"/></defs><g fill="none" fill-rule="evenodd"><path d="M105.215 44.002c-.278-6.226-4.088-10.315-10.035-10.315-5.483 0-10.593 3.624-11.244 10.315h21.28zm-32.987 4.646c0-14.031 9.664-24.717 22.952-24.717 13.474 0 21.65 10.128 21.65 25.554 0 .836-.093 1.765-.093 2.416-.092.37-.092.743-.092 1.115H84.029c1.022 5.575 5.39 9.385 13.567 9.385 6.318 0 11.429-1.766 15.053-4.646h.93v10.5c-3.438 2.509-9.2 4.368-17.005 4.368-14.868 0-24.346-9.85-24.346-23.975zM173.155 71.321l-6.69-23.788c-1.395-5.297-2.138-8.27-2.51-10.222h-.093c-.371 1.952-1.115 4.925-2.509 10.222l-6.69 23.788h-13.752l-14.404-46.089h11.802l7.434 25.646c1.486 5.204 1.765 6.97 2.23 9.014h.092c.464-1.952.929-4.182 2.324-9.014l7.062-25.646h13.288l6.876 25.646 2.509 9.014h.093c.743-2.51 1.208-4.646 2.416-9.014l7.434-25.646h11.8l-15.239 46.09h-13.473z" fill="#FFF"/><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><path fill="#FFF" mask="url(#b)" d="M216.745 71.321h12.173v-46.09h-12.173zM261.164 71.321H248.99V25.232h41.538v46.09h-12.173V35.824h-17.19z"/><path d="M341.46 58.033c-1.858 2.138-5.668 3.996-10.407 3.996-7.712 0-13.195-5.482-13.195-13.752 0-8.364 5.854-13.753 13.288-13.753 4.367 0 8.549 1.765 10.314 3.717v19.792zm12.173 13.289V0H0v94.322h353.633V83.627H10.694V10.695H341.46V27.74c-2.509-1.95-7.434-3.81-12.358-3.81-13.01 0-23.51 10.594-23.51 24.347 0 14.496 10.315 24.346 23.417 24.346 6.226 0 11.336-2.416 13.845-5.483v4.182h10.78z" fill="#FFF" mask="url(#b)"/><path fill="#FFF" mask="url(#b)" d="M61.358 34.885l-20.197-.079v36.515H28.987V24.213h32.37z"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("right_arrow.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.87 21.32"><path d="M1.5 21.32L0 20l8.21-9.34L0 1.32 1.5 0l9.37 10.66L1.5 21.32"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon_contributor_equilateral_triangle.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" ><polygon points="5,1 10,9 0,9"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon_editor_square.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><rect x="1" y="1" width="8" height="8"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon_mediator_square.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><rect x="1" y="1" width="8" height="8"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon_moderator_diamond.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><polygon points="5,0 10,5 5,10 0,5"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon_staff_circle.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><circle cx="5" cy="5" r="5"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("sgnarly.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><path d="M31.8 108.5c.3.2.6.3 1 .3 1 0 1.8-.8 1.8-1.8 0-.2 0-.5-.1-.7-2.6-7-4-14.6-4-22.6C30.4 66 37.6 49.8 49 38l.1-.1.1-.1c.2-.3.4-.7.4-1.1v-23c0-1-.8-1.8-1.8-1.8H24.7c-.5 0-1 .3-1.3.6-.5.4-.9.9-1.4 1.3C10.9 24.9 4 40.2 4 57.2s6.9 32.3 18 43.4c2.9 3 6.2 5.6 9.8 7.9zm43-48c-1 .1-1.7.9-1.7 1.8v.4c.5 5.1 2.5 9.7 5.7 13.3l.1.1.6.6.2.2.6.6.2.2c.2.2.4.3.6.5.1.1.2.2.3.2.2.2.4.3.6.5.1.1.2.2.3.2.2.1.4.3.5.4.1.1.2.2.4.3.2.1.4.2.5.4.1.1.3.2.4.3.2.1.4.2.5.3.1.1.3.2.4.2.2.1.4.2.5.3.2.1.3.2.5.2.2.1.3.2.5.3.2.1.3.1.5.2s.3.2.5.2c.2.1.3.1.5.2s.3.1.5.2.4.1.6.2c.2.1.3.1.5.2s.4.1.6.2c.2 0 .3.1.5.1.2.1.4.1.6.1.2 0 .3.1.5.1s.4.1.7.1c.2 0 .3.1.5.1s.5.1.7.1c.1 0 .3 0 .4.1.3 0 .6 0 .8.1h2c12.7-.3 22.9-10.6 22.9-23.4v-17c0-1 .8-1.8 1.8-1.8h6.4c1 0 1.8-.8 1.8-1.8 0-.2 0-.3-.1-.5-2.1-10-6.6-19.2-12.9-26.9-.3-.4-.8-.7-1.4-.7H98.1c-1 0-1.8.8-1.8 1.8v23.6c.1 12.3-9.4 22.4-21.5 23.2z"/><path d="M169 13.7c-.3-.4-.8-.7-1.4-.7-1 0-1.8.8-1.8 1.8 0 .2 0 .4.1.6v.1c4.6 12 7.2 25.2 7.2 38.8 0 59-47.8 106.8-106.8 106.8-13.7 0-26.8-2.6-38.8-7.3-.2-.1-.4-.1-.7-.1-1 0-1.8.8-1.8 1.8 0 .6.3 1.1.7 1.4 18.2 17.4 42.8 28 69.9 28 56 0 101.4-45.4 101.4-101.4 0-27.1-10.6-51.6-28-69.8z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("share.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.94 22"><path d="M16.03 7.39v12.7H1.91V7.39H0V22h17.94V7.39h-1.91"/><path d="M8.08 3.7v11.81h1.91V3.63l2.99 2.98 1.35-1.35L9.07 0 3.61 5.46l1.36 1.35L8.08 3.7"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("share_android.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 19.92"><path d="M15 14.08a2.91 2.91 0 0 0-2 .77L5.91 10.7A3.27 3.27 0 0 0 6 10a3.27 3.27 0 0 0-.09-.7L13 5.19A3 3 0 1 0 12 3a3.27 3.27 0 0 0 .09.7L5 7.81a3 3 0 1 0 0 4.38l7.12 4.16a2.82 2.82 0 0 0-.08.65A2.92 2.92 0 1 0 15 14.08z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("soundcloud.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 8.69"><path d="M.23 5.19a.08.08 0 0 0-.08.08L0 6.38l.15 1.1a.08.08 0 0 0 .08.08.08.08 0 0 0 .08-.08l.17-1.1-.17-1.11a.08.08 0 0 0-.08-.07zm.77-.6a.08.08 0 0 0-.17 0l-.2 1.8.2 1.76a.08.08 0 0 0 .17 0l.22-1.76L1 4.59zm3.1-1.66a.15.15 0 0 0-.1.15l-.16 3.3L4 8.52a.15.15 0 0 0 .3 0l.18-2.14-.18-3.3a.16.16 0 0 0-.15-.15zM2.54 4.08a.12.12 0 0 0-.12.12l-.17 2.18.18 2.12a.12.12 0 0 0 .23 0l.2-2.12-.2-2.19a.12.12 0 0 0-.12-.12zm3.24 4.59A.19.19 0 0 0 6 8.49l.15-2.1L6 2a.19.19 0 0 0-.37 0l-.14 4.4.14 2.1a.19.19 0 0 0 .18.18zm3.34 0a.26.26 0 0 0 .25-.25l.11-2-.11-5.11a.25.25 0 0 0-.51 0l-.1 5.08.1 2a.26.26 0 0 0 .25.25zm-1.68 0a.22.22 0 0 0 .22-.22l.13-2.07L7.65 2a.22.22 0 0 0-.44 0L7.1 6.39l.12 2.07a.22.22 0 0 0 .22.22zm-4.09 0a.14.14 0 0 0 .13-.13l.19-2.14-.19-2a.13.13 0 0 0-.27 0L3 6.38l.17 2.14a.14.14 0 0 0 .13.13zm-1.6-.14a.1.1 0 0 0 .1-.1l.21-2.05-.21-2.13a.1.1 0 0 0-.1-.1.1.1 0 0 0-.1.1l-.19 2.13.19 2.05a.1.1 0 0 0 .1.1zm6.52-6.65a.24.24 0 0 0-.27.24l-.07 4.27L8 8.44a.24.24 0 0 0 .47 0l.12-2.05-.08-4.27a.24.24 0 0 0-.24-.24zM5 8.67a.17.17 0 0 0 .17-.17l.17-2.12-.21-4.05a.17.17 0 0 0-.34 0l-.15 4.06.15 2.12a.17.17 0 0 0 .21.16zm1.84-.2l.14-2.09-.18-4.54a.2.2 0 0 0-.4 0l-.13 4.55.13 2.08a.2.2 0 0 0 .4 0zm10.7-4.71a2.46 2.46 0 0 0-1 .19 4.34 4.34 0 0 0-4.32-4 4.4 4.4 0 0 0-1.57.29c-.18.07-.23.15-.24.29v7.86a.3.3 0 0 0 .27.29h6.82a2.46 2.46 0 0 0 0-4.92zM10 .58a.27.27 0 0 0-.27.27l-.16 5.54.11 2a.27.27 0 0 0 .54 0l.12-2-.12-5.54A.27.27 0 0 0 10 .58z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("spotify.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 0a10 10 0 1 0 10 10A10 10 0 0 0 10 0zm4.63 14.21a.62.62 0 0 1-.55.5.68.68 0 0 1-.44-.12 9.2 9.2 0 0 0-2.62-1.06l-.32-.07h-.16l-.39-.06a12.26 12.26 0 0 0-1.74-.12 16.86 16.86 0 0 0-3 .31l-.41.04a1 1 0 0 1-.35 0 .62.62 0 0 1-.52-.59.61.61 0 0 1 .47-.61l1.17-.24A15.2 15.2 0 0 1 9 12a10.92 10.92 0 0 1 5.28 1.52.65.65 0 0 1 .35.68zm1.24-2.8a.76.76 0 0 1-.59.64.73.73 0 0 1-.57-.09 11.39 11.39 0 0 0-3.84-1.42 13.09 13.09 0 0 0-6.09.24.77.77 0 0 1-.92-.32.75.75 0 0 1 .14-.94.93.93 0 0 1 .37-.23A12.15 12.15 0 0 1 7 8.79l1.12-.06A14.82 14.82 0 0 1 14.37 10c.4.19.79.4 1.18.63a.76.76 0 0 1 .35.78zM16.6 9a.89.89 0 0 1-.67-.09 12.84 12.84 0 0 0-4.61-1.51 19 19 0 0 0-3.82-.22 13.88 13.88 0 0 0-3.17.52.93.93 0 1 1-.53-1.79 14.6 14.6 0 0 1 2.9-.53c.61-.05 1.23-.07 1.83-.1a19.71 19.71 0 0 1 6 .94 11.28 11.28 0 0 1 2.33 1.05A.92.92 0 0 1 16.6 9z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("star.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 20.9"><path d="M11 7l.36 1.27.4 1.39h5l-2.55 2.12-1 .8.34 1.2.77 2.7-2.28-1.52L11 14.2l-1.06.71-2.28 1.52.77-2.7.34-1.2-1-.8-2.49-2.12h5l.4-1.39L11 7m0-7L8.8 7.7H0l6.6 5.5-2.2 7.7 6.6-4.4 6.6 4.4-2.2-7.7L22 7.7h-8.8L11 0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("tag.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 21.96"><path d="M18.22 2L20 3.8v4.07L8.9 19.12l-6.06-6.05L14 2.09 18.22 2M19 0l-5.87.11L0 13.05 8.91 22 22 8.69V3l-3-3z"/><path d="M16.9 3.38A1.59 1.59 0 1 0 18.49 5a1.59 1.59 0 0 0-1.59-1.62z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("tap.svg",'<svg xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="7.5"/><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0 2C5.373 24 0 18.627 0 12S5.373 0 12 0s12 5.373 12 12-5.373 12-12 12z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("ten.svg",'<svg viewbox="0 0 518 122" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="nonzero"><path d="M0 7.248v14.388h11.331v92.117h17.051V7.248zM40.307 60.474a54.16 54.16 0 0 1 15.851-39.29 53.889 53.889 0 0 1 39.24-15.775 53.889 53.889 0 0 1 39.24 15.775 54.16 54.16 0 0 1 15.852 39.29 54.16 54.16 0 0 1-15.851 39.29 53.889 53.889 0 0 1-39.24 15.774 53.889 53.889 0 0 1-39.24-15.774 54.16 54.16 0 0 1-15.852-39.29zm93.186 0c.525-13.996-6.624-27.16-18.635-34.315a38.068 38.068 0 0 0-38.974 0c-12.01 7.155-19.16 20.319-18.634 34.315-.526 13.996 6.623 27.16 18.634 34.314a38.068 38.068 0 0 0 38.974 0c12.011-7.154 19.16-20.318 18.635-34.314zM111.91 32.076L67.934 76.16a31.915 31.915 0 0 0 5.395 7.735 30.124 30.124 0 0 0 5.99 4.922l43.706-44.084a32.456 32.456 0 0 0-5.396-7.735 30.233 30.233 0 0 0-5.935-4.922h.216zM364.38 7.248v14.388h11.332v92.117h17.05V7.248zM404.688 60.474c0-30.501 24.665-55.227 55.091-55.227 30.426 0 55.091 24.726 55.091 55.227 0 30.5-24.665 55.226-55.091 55.226-30.426 0-55.091-24.725-55.091-55.226zm93.186 0c.525-13.996-6.624-27.16-18.635-34.315a38.068 38.068 0 0 0-38.974 0c-12.011 7.155-19.16 20.319-18.635 34.315-.525 13.996 6.624 27.16 18.635 34.314a38.068 38.068 0 0 0 38.974 0c12.011-7.154 19.16-20.318 18.635-34.314zm-9.82 16.227l-43.977-44.246a31.835 31.835 0 0 0-7.716 5.409 30.176 30.176 0 0 0-4.694 6.22l43.706 44.084a32.374 32.374 0 0 0 7.716-5.409 30.274 30.274 0 0 0 4.964-6.004v-.054zM195.707 98.932V52.955h-11.493v-12.17h11.439V20.392h28.976v12.55h-13.652v7.843h16.188v12.17h-16.188v45.923zM259 39.162a29.799 29.799 0 0 1 22.204 8.587 29.95 29.95 0 0 1 8.876 22.136c0 17.208-13.915 31.157-31.08 31.157s-31.08-13.95-31.08-31.157a30.113 30.113 0 0 1 8.928-22.082A29.96 29.96 0 0 1 259 39.162zm0 47.924a15.575 15.575 0 0 0 12.039-4.908 15.656 15.656 0 0 0 4.149-12.347 15.915 15.915 0 0 0-7.393-15.1 15.83 15.83 0 0 0-16.78 0 15.915 15.915 0 0 0-7.393 15.1 15.657 15.657 0 0 0 3.88 12.039A15.577 15.577 0 0 0 259 87.086zM312.958 98.932h-15.216V40.785h35.882V54.09h-20.666z"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("the-cosign.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 199"><path d="M63.373 70.902c36.362 0 58.645 23.55 60.5 51.745h-23.52C98.96 107.308 86.428 92.592 63.37 92.592c-27.852 0-39.302 20.296-39.302 41.675 0 21.69 11.45 41.986 39.302 41.986 23.21 0 35.742-14.874 36.983-30.366h23.52c-1.703 28.35-24.138 52.055-60.5 52.055C22.677 197.945.86 168.816.86 134.267c0-34.238 21.817-63.365 62.513-63.365zm124.847 35.325v56.393c0 24.944-10.368 35.325-29.09 35.325s-29.09-10.38-29.09-35.325v-56.393c0-24.944 10.368-35.325 29.09-35.325s29.09 10.38 29.09 35.325zm-23.21 1.547c0-10.536-.775-13.635-5.88-13.635-5.105 0-5.88 3.099-5.88 13.635v53.294c0 10.536.775 13.635 5.88 13.635 5.105 0 5.88-3.096 5.88-13.635v-53.294zm148.585 51.747c0 26.494-15.318 38.424-55.703 38.424-40.385 0-63.75-11.93-63.75-46.168h23.21c0 16.73 9.903 24.478 40.54 24.478 24.448 0 32.493-4.648 32.493-15.184 0-15.182-18.877-15.647-45.183-19.675-23.52-3.564-47.967-8.676-47.967-35.943 0-21.069 13.152-34.548 54.002-34.548 43.946 0 60.81 11.93 60.81 39.97h-23.21c0-13.635-9.592-18.28-37.6-18.28-24.912 0-30.792 4.648-30.792 12.858 0 11.31 16.093 13.635 32.805 16.113 32.493 4.801 60.345 6.816 60.345 37.955zm29.378-87.07v123.942h-23.21V72.451zm41.112 50.352v-15.03c0-10.535-.927-13.634-5.88-13.634-5.105 0-5.88 3.099-5.88 13.635v53.294c0 10.536.775 13.635 5.88 13.635 5.105 0 5.88-3.096 5.88-13.635v-5.732h-5.88V132.1h29.09v64.294h-9.285l-3.715-8.831c-4.798 6.042-11.295 10.38-19.65 10.38-16.712 0-25.53-10.38-25.53-35.324v-56.391c0-24.944 10.368-35.325 29.09-35.325 18.723 0 29.09 10.38 29.09 35.325v16.576h-23.21zM480 72.451v123.942h-23.21l-19.96-61.197v61.197h-23.21V72.451h23.21l19.96 61.195V72.451zM47.017 9.004H28.325V51.45h-9.633V9.004H0V0h47.017zM77.782 0v51.45h-9.635V30.549H62.11V51.45h-9.635V0h9.635v20.901h6.037V0zm15.16 9.004v12.22h28.263v9.004H92.942v12.22h28.263v9.004H83.308V0h37.897v9.004z" fill="#FFF"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("thumbs_down.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.62 21.36"><path d="M8 21.36a2.12 2.12 0 0 1-1.06-.29c-2.5-1.42-1-5-.16-6.95.11-.27.25-.6.31-.77a.78.78 0 0 0-.6-.36H2.37A2.29 2.29 0 0 1 0 10.64c0-.82 1.59-5.4 2.92-9.09A2.39 2.39 0 0 1 5.1.07h10.56v12.79l-.84.13A3.45 3.45 0 0 0 13 14.08a13.16 13.16 0 0 0-.82 1.85c-1.06 2.69-2 4.79-3.49 5.31a2.06 2.06 0 0 1-.69.12zM5.1 2.07a.48.48 0 0 0-.31.17C3.48 5.89 2.07 10.06 2 10.68c0 .22.1.32.37.32h4.1a2.61 2.61 0 0 1 2.61 2.4 4.29 4.29 0 0 1-.48 1.51c-.46 1.09-1.65 3.89-.7 4.42.52 0 1.3-1.4 2.38-4.14a10 10 0 0 1 1.13-2.38 5.27 5.27 0 0 1 2.25-1.56V2.07zM16.76 0h4.86v12.96h-4.86z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("thumbs_up.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.62 21.36"><path d="M16.52 21.29H6V8.5l.84-.13a3.45 3.45 0 0 0 1.82-1.09 13.16 13.16 0 0 0 .82-1.85c1.06-2.69 2-4.78 3.52-5.31a2.06 2.06 0 0 1 1.74.17c2.5 1.42 1 5 .16 6.95-.11.27-.25.6-.31.77a.78.78 0 0 0 .6.36h4.1a2.29 2.29 0 0 1 2.37 2.37c0 .82-1.59 5.4-2.92 9.09a2.39 2.39 0 0 1-2.22 1.46zm-8.52-2h8.56a.48.48 0 0 0 .31-.17c1.31-3.65 2.73-7.82 2.79-8.44 0-.22-.1-.32-.37-.32h-4.1A2.61 2.61 0 0 1 12.54 8 4.29 4.29 0 0 1 13 6.46c.45-1.06 1.64-3.89.7-4.43-.52 0-1.3 1.4-2.38 4.14a10 10 0 0 1-1.13 2.38A5.28 5.28 0 0 1 8 10.11zM0 8.4h4.86v12.96H0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("twitter.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 16.43"><path d="M20 1.89l-2.3 2.16v.68a12.28 12.28 0 0 1-3.65 8.92c-5 5.13-13.1 1.76-14.05.81 0 0 3.78.14 5.81-1.76A4.15 4.15 0 0 1 2.3 9.86h2S.81 9.05.81 5.81A11 11 0 0 0 3 6.35S-.14 4.05 1.49.95a11.73 11.73 0 0 0 8.37 4.19A3.69 3.69 0 0 1 13.51 0a3.19 3.19 0 0 1 2.57 1.08 12.53 12.53 0 0 0 3.24-.81l-1.75 1.89A10.46 10.46 0 0 0 20 1.89z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("two_documents.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.59 22"><path d="M16.76 5.87v14.3H6.22V5.87h10.54M18.59 4H4.39v18h14.2V4z"/><path d="M7.73 8.45h7.44V9.9H7.73zm0 7.7h7.44v1.45H7.73zm0-3.85h7.44v1.45H7.73z"/><path d="M3.45 19.89H0V0h16.13v3.12H14.2V1.93H1.93v16.03h1.52v1.93"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("unlock.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.56 22"><path d="M14.56 11.26V20H2v-8.74h12.56M8.28 0a6.12 6.12 0 0 0-6.12 6.12v3.14H0V22h16.56V9.26H4.49V6.12a3.79 3.79 0 0 1 7.58 0h2.33A6.12 6.12 0 0 0 8.28 0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("up_arrow.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.32 10.91"><path d="M20 10.91l-9.34-8.24-9.34 8.24L0 9.41 10.66 0l10.66 9.41-1.32 1.5"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("upload_image.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 23"><path d="M17.13 9.726c.447 0 .81.358.81.798 0 .44-.363.8-.81.8-.447 0-.81-.36-.81-.8 0-.44.363-.798.81-.798zM6.75 6.228H22V23H0V6.228h3.05v2.02H1.94V20.98h18.12V8.248H6.75v-2.02zM11 19.364c-2.576 0-4.673-2.044-4.7-4.583-.02-1.876 1.112-3.58 2.866-4.312 1.755-.733 3.785-.35 5.14.972 1.354 1.32 1.765 3.316 1.04 5.053-.724 1.737-2.44 2.87-4.346 2.87zm0-7.352v.01c-.74 0-1.447.292-1.966.81-.52.52-.805 1.22-.794 1.95.027 1.495 1.275 2.688 2.793 2.67 1.517-.018 2.735-1.24 2.726-2.736-.01-1.496-1.242-2.703-2.76-2.704zM5.69 3.508h3.56v1.557H5.69v3.508H4.11V5.065H.55V3.508h3.56V0h1.58v3.508z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("verified.svg",'<svg viewBox="0 0 500 80" xmlns="http://www.w3.org/2000/svg"><path d="M60.133 0h16.91L46.795 79.78h-16.79L0 0h17.147l16.91 48.82c1.308 4.168 3.69 10.718 4.643 14.647h.237c.953-3.81 3.216-10.36 4.764-14.646L60.135 0zm82.163 0v13.812H101.69V30.84h37.867v13.813H101.69v21.315h41.2V79.78H85.855V0h56.442zm29.77 79.78h-15.838V0h31.198c18.933 0 27.03 12.86 27.03 25.72 0 12.384-6.906 21.553-18.337 24.292l23.336 28.577v1.19h-17.504l-29.888-36.914V79.78zm0-56.68l14.407 15.838c7.026-.596 12.146-5.478 12.146-13.218 0-6.668-4.17-11.907-13.338-11.907h-13.218V23.1zm57.514 56.68V0h15.837v79.78H229.58zM317.22 0v13.812H278.4V30.96h35.96v13.693H278.4V79.78h-15.836V0h54.655zm12.145 79.78V0h15.837v79.78h-15.837zM418.79 0v13.812h-40.605V30.84h37.867v13.813h-37.867v21.315h41.2V79.78H362.35V0h56.44zm39.296 0C488.57 0 500 19.17 500 40.128c0 25.602-14.646 39.653-41.795 39.653h-25.482V0h25.363zm-9.884 13.813v52.155h10.48c16.312 0 25.48-6.788 25.48-25.84 0-18.576-9.882-26.315-25.48-26.315H448.2z" fill="#FFF" fill-rule="evenodd"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("wordmark.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 15"><path d="M11.7 2.9s0-.1 0 0c-.8-.8-1.7-1.2-2.8-1.2-1.1 0-2.1.4-2.8 1.1-.2.2-.3.4-.5.6v.1c0 .1.1.1.1.1.4-.2.9-.3 1.4-.3 1.1 0 2.2.5 2.9 1.2h1.6c.1 0 .1-.1.1-.1V2.9c.1 0 0 0 0 0zm-.1 4.6h-1.5c-.8 0-1.4-.6-1.5-1.4.1 0 0-.1 0-.1-.3 0-.6.2-.8.4v.2c-.6 1.8.1 2.4.9 2.4h1.1c.1 0 .1.1.1.1v.4c0 .1.1.1.1.1.6-.1 1.2-.4 1.7-.8V7.6c.1 0 0-.1-.1-.1z"/><path d="M11.6 11.9s-.1 0 0 0c-.1 0-.1 0 0 0-.1 0-.1 0 0 0-.8.3-1.6.5-2.5.5-3.7 0-6.8-3-6.8-6.8 0-.9.2-1.7.5-2.5 0-.1-.1-.1-.2-.1h-.1C1.4 4.2.8 5.7.8 7.5c0 3.6 2.9 6.4 6.4 6.4 1.7 0 3.3-.7 4.4-1.8V12c.1 0 0-.1 0-.1zm13.7-3.1h3.5c.8 0 1.4-.5 1.4-1.3v-.2c0-.1-.1-.1-.1-.1h-4.8c-.1 0-.1.1-.1.1v1.4c-.1 0 0 .1.1.1zm5.1-6.7h-5.2c-.1 0-.1.1-.1.1v1.4c0 .1.1.1.1.1H29c.8 0 1.4-.5 1.4-1.3v-.2c.1-.1.1-.1 0-.1z"/><path d="M30.4 12.3h-6.1c-1 0-1.6-.6-1.6-1.6V1c0-.1-.1-.1-.1-.1-1.1 0-1.8.7-1.8 1.8V12c0 1.1.7 1.8 1.8 1.8H29c.8 0 1.4-.6 1.4-1.3v-.1c.1 0 .1-.1 0-.1zm12 0c-.6-.1-.9-.6-.9-1.3V1.1s0-.1-.1-.1H41c-.9 0-1.5.6-1.5 1.5v9.9c0 .9.6 1.5 1.5 1.5.8 0 1.4-.6 1.5-1.5 0-.1 0-.1-.1-.1zm8.2 0h-.2c-.9 0-1.4-.4-1.8-1.1l-4.5-7.4-.1-.1c-.1 0-.1.1-.1.1V8l2.8 4.7c.4.6.9 1.2 2 1.2 1 0 1.7-.5 2-1.4 0-.2-.1-.2-.1-.2zm-.9-3.8c.1 0 .1-.1.1-.1V1.1c0-.1 0-.1-.1-.1h-.4c-.9 0-1.5.6-1.5 1.5v3.1l1.7 2.8c.1 0 .1.1.2.1zm13 3.8c-.6-.1-.9-.6-.9-1.2v-10c0-.1 0-.1-.1-.1h-.3c-.9 0-1.5.6-1.5 1.5v9.9c0 .9.6 1.5 1.5 1.5.8 0 1.4-.6 1.5-1.5l-.2-.1zm18.4-.5H81c-.7.3-1.5.5-2.5.5-1.6 0-2.9-.5-3.7-1.4-.9-1-1.4-2.4-1.4-4.2V1c0-.1 0-.1-.1-.1H73c-.9 0-1.5.6-1.5 1.5V8c0 3.7 2 5.9 5.4 5.9 1.9 0 3.4-.7 4.3-1.9v-.1c0-.1 0-.1-.1-.1z"/><path d="M81.2.9h-.3c-.9 0-1.5.6-1.5 1.5v5.7c0 .7-.1 1.3-.3 1.8 0 .1.1.1.1.1 1.4-.3 2.1-1.4 2.1-3.3V1c0-.1-.1-.1-.1-.1zm12.7 7.6l1.4.3c1.5.3 1.6.8 1.6 1.2 0 .1.1.1.1.1 1.1-.1 1.8-.7 1.8-1.5s-.6-1.2-1.9-1.5l-1.4-.3c-3.2-.6-3.8-2.3-3.8-3.6 0-.7.2-1.3.6-1.9v-.2c0-.1-.1-.1-.1-.1-1.5.7-2.3 1.9-2.3 3.4-.1 2.3 1.3 3.7 4 4.1zm5.2 3.2c-.1.1-.1.1 0 0-.9.4-1.8.6-2.8.6-1.6 0-3-.5-4.3-1.4-.3-.3-.5-.6-.5-1 0-.1 0-.1-.1-.1s-.3-.1-.4-.1c-.4 0-.8.2-1.1.6-.2.3-.4.7-.3 1.1.1.4.3.7.6 1 1.4 1 2.8 1.5 4.5 1.5 2 0 3.7-.7 4.5-1.9v-.1c0-.1 0-.2-.1-.2z"/><path d="M94.1 3.2c0 .1.1.1.1.1h.2c1.1 0 1.7.3 2.4.8.3.2.6.3 1 .3s.8-.2 1.1-.6c.2-.3.3-.6.3-.9 0-.1 0-.1-.1-.1-.2 0-.3-.1-.5-.2-.8-.6-1.4-.9-2.6-.9-1.2 0-2 .6-2 1.4.1 0 .1 0 .1.1z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("x.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M22 1.39L20.61 0 11 9.62 1.39 0 0 1.39 9.62 11 0 20.61 1.39 22 11 12.38 20.61 22 22 20.61 12.38 11 22 1.39"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("x_small.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12.18 12.18"><path d="M12.18 1.41L10.77 0 6.09 4.68 1.41 0 0 1.41l4.68 4.68L0 10.77l1.41 1.41L6.09 7.5l4.68 4.68 1.41-1.41L7.5 6.09l4.68-4.68z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("youtube.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20.01 14.07"><path d="M19.81 3A4.32 4.32 0 0 0 19 1a2.86 2.86 0 0 0-2-.8C14.21 0 10 0 10 0S5.8 0 3 .2A2.87 2.87 0 0 0 1 1a4.32 4.32 0 0 0-.8 2S0 4.51 0 6.06V8a30 30 0 0 0 .2 3 4.33 4.33 0 0 0 .8 2 3.39 3.39 0 0 0 2.2.85c1.46.14 5.9.19 6.68.2h.4c1 0 4.35 0 6.72-.21a2.87 2.87 0 0 0 2-.84 4.32 4.32 0 0 0 .8-2 30.31 30.31 0 0 0 .2-3.21V6.28A30.31 30.31 0 0 0 19.81 3zM7.94 9.63V4l5.41 2.82z"/></svg>\n')}])},function(t,e,n){"use strict";n(250),n(148),n(251),n(252),n(253),n(254);$(function(){FastClick.attach(document.body)});n(69),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264);$(document).on("click",".atwho-container",function(t){t.stopPropagation()});n(265),n(266),n(267);_.mixin({eachCons:function(t,e,n){return _.zipWith.apply(null,_.times(e,function(n){return _.slice(t,n,t.length-e+n+1)}).concat(n))},flattenObject:function(t){return _.reduce(t,function(t,e,n){return _.isPlainObject(e)?_.each(_.flattenObject(e),function(e,i){t[n+"."+i]=e}):t[n]=e,t},{})}});var i=n(79),r=n.n(i);window.I18n=Object.assign(r.a,{defaultLocale:"en",translations:{en:{datetime:{distance_in_words:{about_x_hours:{one:"an hour",other:"%{count} hours"},about_x_months:{one:"a month",other:"%{count} months"},about_x_years:{one:"a year",other:"%{count} years"},over_x_years:{one:"a year",other:"%{count} years"},almost_x_years:{one:"a year",other:"%{count} years"}}},annotation:{present_tense:"annotate",past_tense:"annotated",singular_present:"annotates",present_participle:"annotating",singular_noun:"annotation",singular_noun_capitalized:"Annotation",one:"annotation",plural_noun:"annotations",other:"annotations",zero:"annotations",community_brand_name:"Genius Annotation",verified_brand_name:"Verified Annotation",prompt:"Write an Annotation",placeholder:"Dont just put the lyric in your own wordsdrop some knowledge!",description_placeholder:"Say something interesting",offsite_placeholder:"Add your annotation",new_community_prompt:"Start the Genius Annotation",new_verified_prompt:"Add your Verified Annotation",propose_edit_prompt:"Edit",sign_up_to_annotate:"Sign Up to Start Annotating",empty_validation:"Can't save an empty annotation",cannot_annotate_on_locked_song:"You need 600 IQ to add annotations to locked songs.",currently_annotating:{header:"Annotation In Progress",default_body:"%{name} is currently annotating this line.",taking_awhile_body:"%{name} is currently annotating this line but it might be taking awhile or something could have gone wrong. It might be best to delete this and start over."},prompts:{default:"Add knowledge to earn IQ",description:"Start the %{annotation_name}"},suggestion:"Suggest an improvement",share:"Share",unreviewed_notice:{notice_fragment:"This annotation is",notice_description_fragment:"This %{annotation_name} is",notice_adjective:"unreviewed",tooltip:"Genius is a crowdsourced websitethis annotation has not yet been edited, reviewed, or fact checked by the Genius Editorial Board.",tooltip_link:"Learn more about editorial review"}},annotation_edit:{one:"Proposed Edit",other:"Proposed Edits",show_message:"Show",resolve_message:"Resolve",hide_message:"Hide Proposed Edits"},article:{zero:"articles",one:"article",other:"articles",sponsor:{phrase:"Presented by:"}},video:{zero:"videos",one:"video",other:"videos"},album:{zero:"albums",one:"album",other:"albums",metadata:{name:"Name",release_date:"Release Date",custom_cover_art_url:"Cover Art URL",custom_header_image_url:"Header Image URL",artist:"Artist",album_performances:"Credits"},actions:{destroy:"Delete",lock:"Lock",super_lock:"Super Lock",unlock:"Unlock",sort_songs:"Sort Songs By Unreviewed Annotations"},action_confirmations:{destroy:"Are you sure you want to delete this album?",lock:"Are you sure you want to lock this album?",super_lock:"Are you sure you want to super lock this album?",unlock:"Are you sure you want to unlock this album?",admin_default:"Are you sure you want to perform this admin action?"},lock_state:{locked:"locked",super_locked:"super locked"}},comment:{signup_prompt_header:"Sign up for Genius",signup_prompt_preamble:"Tired of entering your email address? Create a Genius account and you'll never have to worry about it (or anything else) ever again:",state:{rejected:"rejected",marked_spam:"marked spam",archived:"archived",accepted:"accepted",integrated:"integrated"}},voting:{upvote:{annotation:"This is a good %{name}",comment:"This is a good suggestion",forumpost:""},downvote:{annotation:"This needs improvement",comment:"This is a bad suggestion  it should be deleted",forumpost:""}},annotator:{already_annotated_referent:"An annotation cannot contain another annotation",unable_to_anchor:"Whoops, couldn't find that line!",referent_mismatch:"Whoops, couldn't find that line!"},embed:{unable_to_anchor:"Sorry, we couldn't find where this annotation belongs on the page. But you can read it here:",click_underlying_link:"Go to the original link:"},asset_remover:{invalid_uri:"That url doesn't seem to be valid.",not_found:"Whoops, couldn't find that url!"},follow_message:{user:"Follow %{name} to see their annotations and pyongs in your newsfeed",discussion:"Follow this discussion to get notified when there are new posts",group:"Following %{name} is the same as following all of its discussions",artist:"Follow %{name} to see their new songs, texts, and annotations in your newsfeed",song:"Follow %{name} to get notified of new annotations and comments",webpage:"Follow %{name} to get notified of new annotations"},pyong_tooltip_text:"PYONG this %{text_type} to promote it to your Genius followers!",pressed_pyong_tooltip_text:"You pyonged this %{text_type} recently! You'll be able to pyong it again in a bit",manage_tags:{just_delete_warning:"AHHH! Do you really want to just delete that tag (instead of choosing a replacement to transfer associated songs to)?",delete_and_transfer_warning:"BEWARE! Do you really want to delete that tag, and transfer everything associated with it to this one??",tag_transfer_finished:"Successfully transferred everything associated with <b>%{from_tag}</b> to <b>%{to_tag}</b> and deleted <b>%{from_tag}</b>."},body_content_conflict_message:"This text has been changed by someone else. Copy your work to your clipboard and <a href='%{url}'>click here to reload</a>",media_player_error_message:"There was a problem loading the player media. <a href='#' id='fix_audio'>Fix it!</a>",recaptcha_explanation:"Sorry, but this %{model_name} looks like it might be spam! Prove to us you're a human with the form below.",cloud_flare_always_on_message:'Genius is experiencing a service disruption. Some features or pages may not work.<br>Check <a href="https://twitter.com/genius" target="_blank">@genius</a> for updates. We\'ll have things fixed soon.',cloud_flare_always_on_short_message:"Genius is experiencing a service disruption. Some features or pages may not work.",iq:"IQ",load_more:"Load More",sle:{edit_instruction:"Edit the song bio to add:",name:"%{type_name} Bio",prependable_to_name:"About"},editing:{dirty_unload:"You have unsaved edits!",dirty_unload_confirm_box:"You have unsaved edits! Do you want to discard changes?"},mark_spam:{confirm:"Are you sure you want to mark user as spam?"},mark_ham:{confirm:"Are you sure you want to mark user as ham?"},mass_delete_unreviewed_activity:{confirm:"Are you sure you want to delete all unreviewed annotations, all unreviewed comments, and all forum posts?"},mass_delete_votes:{votes:{confirm:"Are you sure you want to delete all votes?"},upvotes:{confirm:"Are you sure you want to delete all upvotes?"},downvotes:{confirm:"Are you sure you want to delete all downvotes?"}},forum_post:{deleted_body:"This post has been deleted."},question:{placeholder:"Ask a question",question:{one:"%{name} asked a question",other:"%{name} asked %{count} questions"},answer:{one:"%{name} answered a question",other:"%{name} answered %{count} questions"}},answer:{placeholder:"Answer this question"},example_featured_artists:"e.g. JAY Z, Karen O, Mariah Carey",example_producer_artists:"e.g. J Dilla, Kanye West, Avicii",example_writer_artists:"e.g. Pharrell Williams, Sean Garrett, John Lennon",name_for_body_content:{music:"lyrics",nonmusic:"text"},text_type:{music:"song",nonmusic:"text"},name_for_artist:{music:"artist",nonmusic:"author"},manage_accomplishments:{all:"All",hidden:"Hidden",visible:"Visible"},description_annotation:{song:"bio",artist:"bio",album:"bio",cover_art:"annotation"},will_paginate:{previous_label:"&laquo; Previous",next_label:"Next &raquo;",page_gap:"&hellip;"},charts:{title:"Charts",subtitle:"Trending on Genius",songs:{title:"Top Songs"},artists:{title:"Top Artists"},referents:{title:"Top Lyrics"},albums:{title:"Top Albums"},actions:{allow_in_charts:"Allow in charts",exclude_from_charts:"Exclude from charts"},filter:{header:{type:{songs:"Songs",albums:"Albums",artists:"Artists",referents:"Lyrics"},genre:{all:"All Genres",rap:"Rap",pop:"Pop",rb:"R&B",rock:"Rock",country:"Country"},time_period:{day:"Today",week:"This Week",month:"This Month",all_time:"All Time"}},select:{type:{name:"Type",songs:"Songs",albums:"Albums",artists:"Artists",referents:"Lyrics"},genre:{name:"Genre",all:"All",rap:"Rap",pop:"Pop",rb:"R&B",rock:"Rock",country:"Country"},time_period:{name:"Time",day:"Day",week:"Week",month:"Month",all_time:"All Time"}}}},contribution_type:{all_activity:{name:"All Contributions"},annotations:{name:"Annotations",sort:{chronologically:"Recent",popularity:"Popular"}},unreviewed_annotations:{name:"Unreviewed",sort:{chronologically:"Recent",popularity:"Popular"}},pyongs:{name:"Pyongs",sort:{chronologically:"Recent"}},transcriptions:{name:"Transcriptions",sort:{chronologically:"Recent",popularity:"Popular"}},articles:{name:"Articles",sort:{chronologically:"Recent",popularity:"Popular"}},comments:{name:"Suggestions",sort:{chronologically:"Recent"}},questions_and_answers:{name:"Q+A"}},editorial_placement:{label:{news:"news",video:"video",feature:"feature"},author_prefix:"by"},can_can:{access_denied:"Sorry, you're not allowed to do that"},activemodel:{activity_stream_line_item_message:{message:{default:"%{actors} %{verb} %{target} %{context}",user:{hit_pageview_threshold:{song:"%{target} %{message} (%{threshold} pageviews)"},make_editor:{user:{one:"%{actors} made %{target} an editor",other:"%{actors} made %{target} editors"}},make_mediator:{user:{one:"%{actors} made %{target} a mediator",other:"%{actors} made %{target} mediators"}},make_moderator:{user:{one:"%{actors} made %{target} a moderator",other:"%{actors} made %{target} moderators"}},make_educator:{user:{one:"%{actors} made %{target} an educator",other:"%{actors} made %{target} educators"}},make_staff:{user:{one:"%{actors} made %{target} staff",other:"%{actors} made %{target} staff"}},create:{identity:"Your %{provider} friend %{name} is on %{service_name}!",question:"%{actors} asked %{target} on <em>%{context}</em>",answer:"%{actors} %{verb} %{target} on <em>%{context}</em>",cover_art:"%{actors} added %{target} to <em>%{context}</em>",lyrics_edit:"%{actors} %{verb} %{target} on <em>%{context}</em>"},delete:{answer:"%{actors} %{verb} %{target} on <em>%{context}</em>",cover_art:"%{actors} removed %{target} from <em>%{context}</em>"},Follow:{artist:"%{actors} followed %{target}",web_page:"%{actors} followed <em>%{title}</em>"},Pyong:{song:"%{actors} %{verb} %{target} %{note_preview}",annotation:"%{actors} %{verb} %{target} %{context} %{note_preview}",article:"%{actors} %{verb} %{target} %{note_preview}",video:"%{actors} %{verb} %{target} %{note_preview}",album:"%{actors} %{verb} %{target} %{note_preview}"},Mention:{user:{ForumPost:"%{actors} %{verb} %{target} in <em>%{context}</em>",Comment:"%{actors} %{verb} %{target} in a %{comment_noun} on <em>%{context}</em>"},group:{ForumPost:"%{actors} %{verb} %{target} in <em>%{context}</em>",Comment:"%{actors} %{verb} %{target} in a %{comment_noun} on <em>%{context}</em>"}},GroupInvitation:{user:"%{actors} just gave %{target} access to the %{group_human_name} <em>%{context}</em>"},incorporate:{annotation:"%{actors} incorporated %{target} into a Genius Annotation"},move:{discussion:"%{actors} %{verb} %{target} to <em>%{context}</em>"},accept_offsite_beta_invitation:{user:"%{actors} accepted your beta invitation"},pin:{discussion:"%{actors} %{verb} %{target} to <em>%{group_name}</em>",question:"%{actors} %{verb} %{target} on <em>%{context}</em>"},unpin:{discussion:"%{actors} %{verb} %{target} from <em>%{group_name}</em>",question:"%{actors} %{verb} %{target} on <em>%{context}</em>"},merge:{artist:"%{actors} %{verb} %{artist_name_at_time_of_merge}'s discography into %{target_artist_name}'s"},edit:{question:"%{actors} edited %{target} on <em>%{context}</em>",answer:"%{actors} %{verb} %{target} on <em>%{context}</em>",cover_art:"%{actors} edited %{target} on <em>%{context}</em>"},archive:{question:"%{actors} archived %{target} on <em>%{context}</em>",lyrics_edit:"%{actors} automatically archived %{target} on <em>%{context}</em>"},Vote:{question:"%{actors} %{verb} %{target} on <em>%{context}</em>",answer:"%{actors} %{verb} %{target} on <em>%{context}</em>",video:"%{actors} %{verb} %{target}"},recognized:{song:{transcriber:"Thanks! We've been looking for the lyrics to %{target}",other:"%{actors} marked %{target} as a real song"}},accept:{lyrics_edit:"%{actors} %{verb} %{target} on <em>%{context}</em>"},reject:{lyrics_edit:"%{actors} %{verb} %{target} on <em>%{context}</em>"}}}}},activerecord:{models:{album_appearance:"Album",album:"Album",annotation_edit:"Annotation Edit",annotation:"Annotation",article:"Article",artist_name:"Artist name",artist:"Artist",cover_art:"Cover Art",forum_post:"Post",group:"Forum",facebook_identity:"Facebook",twitter_identity:"Twitter",edx_identity:"edX",google_identity:"Google",spotify_identity:"Spotify",apple_identity:"Apple",lyrics_edit:"Lyrics edit proposal",performance:"Artist",song_derivation:"Song Derivation",song:"Song",tagging:"Tag"},group:{access_policy:{human_description:{public:"Public Forum",role_based:"Private Forum accessible by certain roles (e.g. 'All Editors')",invite_only:"Private invitation only Forum"}}}},api_scopes:{me:"access your profile",create_annotation:"create annotations",manage_annotation:"update and delete annotations",vote:"vote on annotations",ifttt:"access your profile, be alerted of your activity, and follow new pages and songs"},artist:{merge_request_complete_message:"Submitted! The merge might take a minute to complete."},contribution_opportunity:{message:{answer_question:"Unanswered question on",review_annotation:"Unreviewed annotation on",missing_writer_artists_song:"Missing writer(s) on",missing_producer_artists_song:"Missing producer(s) on",missing_albums_song:"Missing album(s) on",missing_release_date_song:"Missing release date on",missing_media_song:"Missing media on"}},mentions:{trello_card_title:{annotation:"Mention of %{mention_string} in an annotation comment on %{title}",song:"Mention of %{mention_string} in a song-level comment on %{title}",discussion:"Mention of %{mention_string} in a post in %{title}",article:"Mention of %{mention_string} in an article comment on %{title}"}},preference:{mention_notifications:"Mention Notifications",creation_comment_notifications:"Create Comment Notifications",mentioned_forum_notifications:"Mentioned Forum Notifications",discussion_creation_notifications:"Discussion Creation Notifications",followed_thread_notifications:"Followed Thread Notifications",message_notifications:"Message Notifications",editorial_suggestion_notifications:"Editorial Suggestion Notifications",forum_post_creation_notifications:"Forum Post Creation Notifications",description:{mention_notifications:"Receive an email when someone @mentions you in a suggestion.",creation_comment_notifications:"Receive an email when someone comments on something you created.",mentioned_forum_notifications:"Receive an email when a forum you follow is mentioned.",discussion_creation_notifications:"Receive an email whenever someone posts a new thread in a forum you follow.",followed_thread_notifications:"Receive an email whenever someone posts in an individual forum thread you follow.",message_notifications:"Receive an email whenever someone sends you an onsite message.",editorial_suggestion_notifications:"Receive an email whenever someone integrates or archives your suggestions.",forum_post_creation_notifications:"Receive an email whenever someone posts a new thread or replies to a thread in a forum you follow."}},reason:{sentence_intro:"Marked this as",sentence:"Marked this as %{inline_reason}",inline:{"restates-the-line":"restating the line","its-a-stretch":"a stretch","missing-something":"missing something",other:"other",confusing:"confusing",boring:"boring",offensive:"offensive",obvious:"obvious",wordy:"wordy",needs_more_media:"lacking media",paraphrases_lyric:"paraphrasing lyric"}},role:{types:{contributor:{one:"Contributor",other:"Contributors"},moderator:{one:"Moderator",other:"Moderators"},postlet_editor:{one:"Postlet Editor",other:"Postlet Editors"},post_editor:{one:"Post Editor",other:"Post Editors"},comment_moderator:{one:"Comment Moderator",other:"Comment Moderators"},contrib:{one:"Contributor",other:"Contributors"},lyric_editor:{one:"Lyric Editor",other:"Lyric Editors"},boss:{one:"Boss",other:"Bosses"},mega_boss:{one:"Mega Boss",other:"Mega Bosses"},in_house_staff:{one:"In-house staff",other:"In-house staff"},community_artist:{one:"Community Artist",other:"Community Artists"},verified_artist:{one:"Verified Artist",other:"Verified Artists"},meme_artist:{one:"Meme Artist",other:"Meme Artists"},user_admin:{one:"User Administrator",other:"User Administrators"},message_admin:{one:"Message Administrator",other:"Message Administrators"},verifier:{one:"Verifier",other:"Verifiers"},weak_impersonator:{one:"Weak Impersonator",other:"Weak Impersonators"},engineer:{one:"Engineer",other:"Engineers"},editor:{one:"Editor",other:"Editors"},newb:{one:"Newb",other:"Newbs"},deactivated:{one:"Deactivated",other:"Deactivated"},message_receiver:{one:"Message Receiver",other:"Message Receivers"},educator:{one:"Educator",other:"Educators"},groups_admin:{one:"Groups Administrator",other:"Groups Administrators"},full_time_intern:{one:"Full-time Intern",other:"Full-time Interns"},founder:{one:"Founder",other:"Founders"},edx_student:{one:"Student",other:"Students"},edu_groups_admin:{one:"Class Group Admin",other:"Class Group Admins"},staff:{one:"Staff",other:"Staff"},bugkeeper:{one:"Bugkeeper",other:"Bugkeepers"},whitehat:{one:"Whitehat",other:"Whitehats"},tech_liaison:{one:"Tech Liason",other:"Tech Liasons"},offsite_tester:{one:"Offsite Tester",other:"Offsite Testers"},mediator:{one:"Mediator",other:"Mediators"},outside_song_ids_validator:{one:"Outside Song ID Validator",other:"Outside Song ID Validators"},design_contractor:{one:"Design Contractor",other:"Design Contractors"},spotify_annotation_nominator:{one:"Spotify Annotation Nominator",other:"Spotify Annotation Nominators"},spotify_annotation_editor:{one:"Spotify Annotation Editor",other:"Spotify Annotation Editors"},spotify_annotation_finalizer:{one:"Spotify Annotation Finalizer",other:"Spotify Annotation Finalizers"},custom_app_notification_author:{one:"Custom App Notification Author",other:"Custom App Notification Authors"},bagon_tester:{one:"Bagon Tester",other:"Bagon Testers"}}},song_derivation:{verb:{sample:"samples",interpolation:"interpolates",cover:"cover of",remix:"remix of",live:"live version of"}},song_relationship:{title:{samples:"Samples",sampled_in:"Sampled In",interpolates:"Interpolates",interpolated_by:"Interpolated By",cover_of:"Cover Of",covered_by:"Cover By",remix_of:"Remix Of",remixed_by:"Remixed By",live_version_of:"Live Version Of",performed_live_as:"Performed Live As"}},song:{actions:{destroy:"Delete",publish:"Lock",unpublish:"Unlock",disable_media:"Disable media",enable_media:"Enable media",hide:"Hide",unhide:"Unhide",reindex:"Reindex in search",view_annotation_engagement_data:"Toggle annotation opens",edit_spotify_annotations_for:"Spotify Annotations",view_lyrics_synchronization:"Synchronize Lyrics",verify_lyrics:"Verify Lyrics",unverify_lyrics:"Unverify Lyrics",award_transcription_iq:"Award transcription IQ",remove_transcription_iq:"Remove transcription IQ",hide_apple_player:"Hide Apple Player",unhide_apple_player:"Unhide Apple Player",trigger_apple_match:"Trigger Apple Match Attempt",mark_lyrics_evaluation_as_approved:"Approve lyrics quality",mark_lyrics_evaluation_as_staff_approved:"Staff approve lyrics quality",mark_lyrics_evaluation_as_unapproved:"Unapprove lyrics quality",mark_lyrics_evaluation_as_un_staff_approved:"Un-mark lyrics quality as staff approved"},action_confirmations:{publish:"Are you sure? Locking a song prevents lyrics changes and new annotations.",unpublish:"Do you really want to unlock this song?",dismiss_dirty:"Are you sure? You'll lose your unsaved changes.",unhide:"Are you sure?",destroy:" Are you absolutely sure you want to delete this song? This cannot be undone.",trigger_apple_match:"This will take a minute. The player will appear if successful.",admin_default:"Are you sure you want to perform this admin action?"},verified:{desktop:{commentary:"Verified commentary",lyrics:"Verified lyrics",commentary_and_lyrics:"Verified commentary & lyrics"},mobile:{commentary:"Verified commentary by",lyrics:"Verified lyrics by",commentary_and_lyrics:"Verified commentary & lyrics by"}},fact_tracks:{app_link_text:"Behind the Lyrics in Spotify",app_help_link_text:"What's a Fact Track?"},one:"song",other:"%{count} songs",metadata:{title_and_artists:"Title and Artists",title:"Title",primary_artist:"Artist",writer_artists:"Written By",featured_artists:"Featuring",producer_artists:"Produced By",album_date_and_tags:"Albums, Date, Location & Tags",albums:"Album(s)",release_date:"Release Date",release_date_components:"Release Date",recording_location:"Recorded At",primary_tag:"Primary Tag",tags:"Tags",song_relationships:"Song Relationships",audio_video_and_images:"Audio, Video & Images",spotify_uuid:"Spotify UUID",soundcloud_url:"SoundCloud URL",youtube_url:"YouTube URL",youtube_start:"Start",custom_song_art_image_url:"Song Art URL",featured_video:"Feature Video?",custom_header_image_url:"Header Background URL",apple_match_overrides:"Apple Match Overrides",apple_song_for_streaming_service_lyrics:"Apple song to match (ID or view URL) for lyrics",apple_song_for_streaming_service_player:"Apple song to match (ID or view URL) for player"},lyrics_state:{unreleased:{indicator:"(Unreleased)",message:"Lyrics for this song have yet to be released. Please check back once the song has been released.",confirm:"This box should only be checked if this song is a highly anticipated song that has not been released. If the song has been released, you should transcribe the lyrics. Are you sure you want to mark this song as unreleased?"},incomplete:{indicator:"(Missing Lyrics)",message:"The lyrics for this song have yet to be transcribed."}}},page_footer:{section:{description:"Genius is the worlds biggest collection of song lyrics and musical knowledge",about:"About Genius",contributor_guidelines:"Contributor Guidelines",press:"Press",advertise:"Advertise",event_space:"Event Space",privacy_policy:"Privacy Policy",privacy_preferences:"Privacy Preferences",licensing:"Licensing",jobs:"Jobs",developers:"Developers",copyright_policy:"Copyright Policy",contact_us:"Contact Us",ccpa:"Do Not Sell My Personal Information",sign_in:"Sign In",sign_out:"Sign Out",signing_out:"Signing Out...",delete_account:"Delete Account"},fine_print:{company:"Genius Media Group Inc.",terms:"Terms of Use"},all_artists:"All Artists:"},page_header:{section:{featured:"Featured",charts:"Charts",videos:"Videos",shop:"Shop",forums:"Forums",add_a_song:"Add A Song"},auth_links:{sign_up:"Sign Up",sign_in:"Sign In"},search_bar:{placeholder:"Search lyrics & more"}},search:{sections:{top_hit:{title:"Top Result"},song:{title:"Songs"},lyric:{title:"Lyric Matches"},artist:{title:"Artists"},album:{title:"Albums"},tag:{title:"Tags"},user:{title:"Users"},article:{title:"Articles"},video:{title:"Videos"}}},site:{default_title:"%{service_name} | Song Lyrics & Knowledge",default_meta_description:"Genius is the worlds biggest collection of song lyrics and musical knowledge."},song_page_header:{nav:{lyrics:"Lyrics",about:"About",contributions:"Contributions",comments:"Comments"}},song_stories:{gallery_title:"%{service_name} | Song Stories",gallery_intro_headline:"Everything you need to know about your favorite music.",gallery_intro_body:"Tap through for essential videos, interviews, playlists, and more.",gallery_learn_more_link_text:"Read More",featured_placement_prompt:{mobile:"Watch the story",desktop:"Watch the story"},sticky_placement_prompt:"Watch song story"},sort:{popularity:"Pageviews",title:"A-Z",release_date:"Release Date",unreviewed_annotations:"Unreviewed Annotations",probably_spam:"Probably Spam",probably_ham:"Probably Ham",definitely_spam:"Definitely Spam",definitely_ham:"Definitely Ham",unclassified_spam_state:"Unclassified"},terms:{contributor:{one:"contributor",other:"contributors"},scholar:{one:"1 Scholar",other:"%{count} Scholars"},album:{one:"Album",other:"Albums"}},artists:{page_title:"%{artist_name} Lyrics, Songs, and Albums"},comments:{feedback_noun:"improvement",placeholder:{annotation:"Add a comment",genius_annotation:"Suggest an improvement to earn IQ",song:"Suggest an improvement or correction to earn IQ",verified_annotation:"Add a comment",song_comment:"Add a comment"},noun:{annotation:"reply",genius_annotation:"suggestion",song:"reply",verified_annotation:"reply"},past_tense_verb:{annotation:"replied",genius_annotation:"added a suggestion",song:"added a suggestion",verified_annotation:"replied"},empty_validation:"Please enter a comment"},commentables:{noun:{annotation:"annotation",genius_annotation:"annotation",song:"song",verified_annotation:"annotation",description:"bio"}},comment_notifications:{comment_type:{annotation:"comment",genius_annotation:"suggestion",song:"reply",verified_annotation:"reply",description:"suggestion",article:"comment",video:"comment",album:"comment"},commentable_type:{annotation:"annotation",genius_annotation:"annotation",song:"song",verified_annotation:"annotation",description:"bio",article:"article",video:"video",album:"album"},action:{annotation:"added a comment to",genius_annotation:"added a suggestion for",song:"added a suggestion for",verified_annotation:"replied to",description:"added a suggestion for"}},community:{title:"Community",subtitle:"Geniuss community of contributors powers the worlds biggest collection of song lyrics and musical knowledge.",get_involved:"Get Involved",join:"Join Our Community",learn:"Learn How Genius Works",chart:{headers:{rank:"Rank",scholar:"Top Scholars Today",iq:"Iq Earned Today"}}},contributor_strategies:{newest:"The newest users with activity",losing:"These users are about to lose their active contributor streak",gaining:"These users are about to become active contributors",coachees:"These are your coachees, try to help them grow as contributors"},contributor_classifications:{losing:"Becoming Inactive",gaining:"Almost Active",active:"Active Contributor",inactive:"Inactive"},header:{groups_inbox:"Forums",newsfeed_inbox:"Feed",main_activity_inbox:"Me",messages_inbox:"Messages",iq_inbox:"Earn IQ"},latest:{title:"Latest",subtitle:"Most Recent News"},leaderboards:{periods:{day:"Daily",week:"Weekly",month:"Monthly",all_time:"All-time"}},lyrics:{save_error:"Sorry, we couldn't save your changes",reload_instructions:"Copy your changes and reload the page.",editing_stale:"The lyrics have changed since you started editing. Copy your work and then press Cancel to see the updated lyrics.",unmatched_parens_error:"Oops! It looks like you might have an uneven number of parentheses or square brackets. Check the lyrics to make sure that they match up.",added_block_level_html_to_music_error:"Music lyrics can only include <strong>, <b>, <em>, <i>, and <br> HTML tags.",tagged_block_level_html_as_music_error:"Lyrics that include HTML tags besides <strong>, <b>, <em>, <i>, or <br> cannot be tagged as music.",didnt_remove_block_level_html_from_music_error:"Music lyrics can only include <strong>, <b>, <em>, <i>, and <br> HTML tags. Please remove any unsupported HTML tags in order to save your edit."},profile_page:{songs:{all:"All Songs",search:{one:"%{count} search result",other:"%{count} search results"}},top_scholar:{one:"Top Scholar",other:"Top Scholars"},top_accomplishment:{one:"Top Accomplishment",other:"Top Accomplishments"},about_me:{default:"%{user_login} is keeping quiet for now",placeholder:"Do you like long walks on the beach?"}},songs:{hidden_album_count:"Appears on %{count} more",editing_stale:"The song has been modified since you started editing. Copy your work and then press Cancel to see the updated info."},users:{page_title:"%{user_name}",identity:{unlink:"Unlink",unlinking:"Unlinking..."},authentication:{invalid_credentials:"Invalid username or password"}},videos:{title:"Videos",subtitle:"Genius Original Series",read_more:"read more &raquo;"}}}});var o;n(269),n(45),n(270),n(271),n(272),n(273),n(120),n(276),n(277),n(278),n(940),n(941);window["Genius.css_loaded"]=window["Genius.css_loaded"]||{push:function(t){t()}},setImmediate(function(){var t=new Map;$("[initial-content-for]").each(function(e,n){var i=$(n);i.attr("ng-non-bindable",!0),t.set(i.attr("initial-content-for"),i)}),angular.module("genius").value("initial_placeholder_content",t),angular.module("genius").value("initial_image_urls",new Set(_([_.map($("img"),function(t){return t.currentSrc}),_.map($("[style]"),function(t){return _.get(t.style.backgroundImage.match(/^url\("(.*)"\)$/),1)})]).flatten().compact().value())),window.performance&&performance.mark&&window.performance.mark("angular_bootstrap_start");var e=Date.now();window["Genius.css_loaded"].push(function(){angular.bootstrap(document.body,["genius"],{strictDi:!0}).invoke(["$window","application_bootstrap","Librato","PageDataClient","performance_mark",function(t,n,i,r,o){if(o.create("angular_bootstrap_complete"),t.ga&&t.ANALYTICS_CONFIG){var a=Date.now()-e;i.set_page_type(_.get(r.preloaded(),"page_type","other")),i.measure("angular_bootstrap_time",a),t.ga("send","timing","Initial Load","Angular Bootstrap",a,{nonInteraction:!0})}setImmediate(n.done)}])})}),window.performance&&performance.mark&&window.performance.mark("bundle_load_end"),$("html").toggleClass("windows",!!bowser.windows),angular.module("genius",["ngSanitize","ngAnimate","ngTagsInput","angularMoment","angular-rich-text-diff","angular-inview","angular-svg-round-progressbar","ngComponentRouter","youtube-embed","ngSticky","cfp.loadingBar"]).config(["$locationProvider","$httpProvider","$animateProvider","$compileProvider","tagsInputConfigProvider","AppConfig","$anchorScrollProvider","cfpLoadingBarProvider","$qProvider",function(t,e,n,i,r,o,a,s,c){t.html5Mode({enabled:!0,rewriteLinks:!1}),t.hashPrefix("!"),e.interceptors.push("OnsiteInterceptor"),e.interceptors.push("RetryFailureInterceptor"),e.interceptors.push("GlobalErrorInterceptor"),n.classNameFilter(/nganimate-/),i.debugInfoEnabled(o.enable_angular_debug),i.commentDirectivesEnabled(!1),i.cssClassDirectivesEnabled(!1),a.disableAutoScrolling(),r.setDefaults("tagsInput",{placeholder:""}).setActiveInterpolation("tagsInput",{placeholder:!0}),s.includeSpinner=!1,i.preAssignBindingsEnabled(!0),c.errorOnUnhandledRejections(!1)}]).value("$routerRootComponent","routablePage").run(["AppConfig","Tracking","NewRelic",function(t,e,n){$.embedly.defaults.key=t.embedly_key,e.start_tracking(),n.init($('meta[name="newrelic-resource-path"]').attr("content"))}]),(o=n(279)).keys().forEach(o)},function(t,e,n){"use strict";n.r(e);n(887);var i=function(){this.enabled=!1,this.reset_counters()};i.arrange_arguments=function(t){return function(e,n,i){return"function"==typeof n&&(i=n,n={}),t.call(this,e,n,i)}},i.if_enabled=function(t){return function(){var e=arguments[arguments.length-1];return this.enabled?t.apply(this,arguments):("function"==typeof e&&setTimeout(e),!1)}},i.prototype={start_tracking:function(){if("undefined"==typeof mixpanel||void 0===mixpanel.register)return!1;var t;if(this.enabled=!0,this.tracking_data=window.TRACKING_DATA,"undefined"!=typeof CURRENT_TAG&&CURRENT_TAG&&(t=CURRENT_TAG.tag.slug),mixpanel.register({"Logged In":!!CURRENT_USER,"Is Editor":CURRENT_USER&&CURRENT_USER.is_editor,"Is Moderator":CURRENT_USER&&CURRENT_USER.is_moderator,"Mobile Site":MOBILE_DEVICE,AMP:!1,Tag:t,genius_platform:"web"}),CURRENT_USER?mixpanel.identify(CURRENT_USER.id):window.ga(function(t){return mixpanel.identify(t.get("clientId"))}),app.is_on_song_page&&app.is_on_song_page()&&this.track("Song Page Load"),$("body.act-new.cont-users").length>0){var e=$.deparam(location.search.substring(1)).from_question_email;e&&this.track("Question email signup clicked",{question_id:e})}var n={"from url":document.location.href};mixpanel.track_links(".android_interstitial-download","clicked_download_from_android_interstitial",n),window["Genius.cmp"]=window["Genius.cmp"]||[],window["Genius.cmp"].push(function(t){t.resolve_with_tracking(this)}.bind(this))},set_tacking_data:function(t){this.tracking_data=t},reset_counters:function(){this.annotations_opened=0,this.line_item_opens={},this.song_page_loaded_from_direct_link_to_un_annotated_line=!1,this.annotation_id_opened_from_permalink=null},registered_properties:{},register:function(t){_.extend(this.registered_properties,t)},build_event_data:function(t,e){var n;return n=(e=e||{}).properties?e.properties:this.is_old_preprocessed_event(t)?this.preprocess_options(t,e):e,$.extend({},this.registered_properties,this.tracking_data,_.flattenObject(n),{dfp_enabled:"googletag"in window})},is_old_preprocessed_event:function(t){return _.includes(["Song Page Load","Wrapped Web Page Load","Annotated Web Page Load","Open Annotation","Engaged Annotation View","Offsite Filter Selection","Inbox Open","Line Item Open"],t)},preprocess_options:function(t,e){if("Song Page Load"===t)return _.merge(e,{"Un-annotated direct link":!!this.song_page_loaded_from_direct_link_to_un_annotated_line,"Un-annotated line":this.song_page_loaded_from_direct_link_to_un_annotated_line});if("Wrapped Web Page Load"===t||"Annotated Web Page Load"===t)return{"Source location":e.source_location,script_source:e.script_source,script_source_version:e.script_source_version,"Host Page Referrer":e.referrer};if("Open Annotation"===t||"Engaged Annotation View"===t){this.annotations_opened++;var n={"Annotation ID":e.annotation_id,"Annotator Login":e.annotator_login,"Annotatable Type":e.annotatable_type,script_source:e.script_source,script_source_version:e.script_source_version};return e.skip_counters||$.extend(n,{"Cumulative Annos Opened":this.annotations_opened,"Anno Opened from Permalink":e.annotation_id===this.annotation_id_opened_from_permalink,"First Anno was Permalink":!!this.annotation_id_opened_from_permalink}),n}return"Offsite Filter Selection"===t?{"Filter Type":e.filter_type,"Filter Arguments":e.filter_args,"Filter Reason":e.reason,script_source:e.script_source,script_source_version:e.script_source_version}:"Inbox Open"===t?{"Inbox Name":e.inbox_name,"Unread Count When Opened":e.unread_count}:"Line Item Open"===t?(void 0===this.line_item_opens[e.inbox_name]&&(this.line_item_opens[e.inbox_name]=0),{"Inbox Name":e.inbox_name,"Line Item Index":e.index,"Action Name":e.action_name,"Target Type":e.target_type,"Viewing Context":e.viewing_context,"Cumulative Line Items Opened":this.line_item_opens[e.inbox_name]++,"Line Item Strategy":e.strategy_name,Bagon:!!e.bagon,iframe:!!e.iframe}):void 0},track:i.arrange_arguments(i.if_enabled(function(t,e,n){var i=this.build_event_data(t,e);mixpanel.track(t,i,n),window.FS&&window.FS.from_mixpanel(t,i)})),track_with_delayed_handling:i.arrange_arguments(i.if_enabled(function(t,e,n){bowser.mobile||bowser.tablet?JSONStore.modify_store("session_end_tracking_events",function(n){return(n=n||[]).concat({event_name:t,event_options:this.build_event_data(t,e),event_occurred_at:Date.now()})}.bind(this)):this.track(t,e,n)})),track_with_timeout:i.arrange_arguments(i.if_enabled(function(t,e,n){var i=this.fetch_mixpanel_config("track_links_timeout",0);n=_.once(n),setTimeout(n,i),this.track(t,e,n)})),track_link_click:function(t){var e=$(t.target).closest("a"),n=e.attr("href"),i=2===t.which||t.metaKey||t.ctrlKey||"_blank"===e.attr("target"),r=Array.prototype.slice.call(arguments,1);if(i)return this.track.apply(this,r);t.preventDefault();var o="function"==typeof r[r.length-1]?r.pop():null;return this.track_with_timeout.apply(this,r.concat(function(){o&&o(),window.location.href=n}))},set_annotation_opened_from_permalink:function(t){this.annotation_id_opened_from_permalink=t},set_song_page_loaded_from_direct_link_to_un_annotated_line:function(t){this.song_page_loaded_from_direct_link_to_un_annotated_line=t},fetch_mixpanel_config:function(t,e){return this.enabled&&"function"==typeof mixpanel.get_config?mixpanel.get_config(t):e}},$.extend(window.app,{tracking:new i}),$(function(){$(document.body).on("annotation:open","a[data-id]",function(){app.tracking.track("Open Annotation",{annotation_id:$(this).attr("data-id")})}),$(document).on("click",".show_help:not(.pressed)",function(){app.tracking.track("opened_what_is_genius_dropdown",{standalone_annotation:$(this).closest(".stand_alone_annotation_container").length>0})}),JSONStore.modify_store("session_end_tracking_events",function(t){return _.each(t,function(t){Date.now()-t.event_occurred_at<1e3*APP_CONFIG.mixpanel_delayed_events_timeout&&mixpanel.track(t.event_name,t.event_options)}),[]})}),angular.module("genius").factory("Tracking",["$window","AbTest","$timeout",function(t,e,n){var i=t.app.tracking,r=e.get_ab_tests().then(function(t){var e={};_.forIn(t,function(t,n){e["AB Test - ".concat(n)]=t}),i.register(e)}),o=[];return _.assign(i,{delayed_track:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.push({event:t,properties:e}),r.finally(function(){return n(function(){i.track(t,e),_.remove(o,{event:t})},3e3)})},attach_to_delayed_track:function(t,e){_.forEach(o,function(n){_.forEach(e,function(e,i){n.properties["".concat(t," - ").concat(i)]=e})})}}),i}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(1122);i.keys().forEach(i)},function(t,e,n){var i={"./add_annotation.html":1123,"./additional_artists.html":1124,"./admin_task.html":1125,"./admin_tasks_page.html":1126,"./admin_user_info.html":1127,"./adwords_ad_form.html":1128,"./adwords_ad_group_form.html":1129,"./adwords_ad_group_list.html":1130,"./adwords_campaign_form.html":1131,"./adwords_campaign_list.html":1132,"./adwords_editor.html":1133,"./album_admin_menu.html":1134,"./album_grid.html":1135,"./album_metadata_form.html":1136,"./album_page.html":1137,"./album_tracklist_row.html":1138,"./annotatable_image.html":1139,"./annotation.html":1140,"./annotation_edit.html":1141,"./annotation_edits.html":1142,"./annotation_embed.html":1143,"./annotation_history.html":1144,"./annotation_placeholder.html":1145,"./annotation_share_menu.html":1146,"./annotation_sidebar.html":1147,"./answer.html":1148,"./apple_match_evaluations_page.html":1149,"./apple_music_player.html":1150,"./article_admin_bar.html":1151,"./article_authors.html":1152,"./article_content_actions.html":1153,"./article_contributor_badge.html":1154,"./article_index_arrangeable.html":1155,"./article_index_item.html":1156,"./article_page.html":1157,"./artist_badge.html":1158,"./artist_opportunities.html":1159,"./artist_songs.html":1160,"./artist_songs_and_albums.html":1161,"./artist_songs_modal.html":1162,"./artist_tooltip.html":1163,"./artist_verification.html":1164,"./audio_source_label.html":1165,"./authentication_form.html":1166,"./autocomplete_result.html":1167,"./autocomplete_tags_input.html":1168,"./autocomplete_word.html":1169,"./breadcrumbs.html":1170,"./click_to_load.html":1171,"./collapsible_content.html":1172,"./comment.html":1173,"./comment_form.html":1174,"./comment_list.html":1175,"./comments.html":1176,"./comments_placeholder.html":1177,"./component_date_input.html":1178,"./compose_message.html":1179,"./contact_button.html":1180,"./contribution_opportunity.html":1181,"./conversation_messages.html":1182,"./conversations.html":1183,"./cosigns.html":1184,"./cover_art_form.html":1185,"./cover_art_modal.html":1186,"./deleted_answer.html":1187,"./description_annotation.html":1188,"./detailed_song_search.html":1189,"./dfp_ad.html":1190,"./edit_artist_profile.html":1191,"./edit_user_email_preferences.html":1192,"./edit_user_profile.html":1193,"./editable_markdown.html":1194,"./editable_tracklist.html":1195,"./editable_tracklist_number.html":1196,"./embedly_embed.html":1197,"./embedly_player.html":1198,"./embedly_youtube.html":1199,"./expandable_accordion_section.html":1200,"./expandable_container.html":1201,"./expandable_diff.html":1202,"./facebook_share_button.html":1203,"./fact_track_simulator.html":1204,"./flash_messages.html":1205,"./follow_button.html":1206,"./global_error_message.html":1207,"./global_message.html":1208,"./hang_initial_quote.html":1209,"./header_actions.html":1210,"./header_admin.html":1211,"./header_auth.html":1212,"./header_menu_item.html":1213,"./header_with_cover_art.html":1214,"./hidden_fields.html":1215,"./hide_song_form.html":1216,"./image_upload_button.html":1217,"./inbox.html":1218,"./inbox_container.html":1219,"./inbox_icon.html":1220,"./inbox_line_item.html":1221,"./inbox_line_item_action_icon.html":1222,"./inbox_line_item_detail/actions.html":1223,"./inbox_line_item_detail/actors.html":1224,"./inbox_line_item_detail/annotations_with_comments.html":1225,"./inbox_line_item_detail/annotations_with_rejection_comments.html":1226,"./inbox_line_item_detail/context.html":1227,"./inbox_line_item_detail/context_commentable.html":1228,"./inbox_line_item_detail/lyrics_diffs.html":1229,"./inbox_line_item_detail/lyrics_edit_acceptor.html":1230,"./inbox_line_item_detail/lyrics_edit_archive_info.html":1231,"./inbox_line_item_detail/merged_artist.html":1232,"./inbox_line_item_detail/metadata_changes.html":1233,"./inbox_line_item_detail/targets.html":1234,"./inbox_line_item_detail/user_acted_on_user.html":1235,"./inbox_line_item_detail_discussion.html":1236,"./inbox_line_item_detail_discussion_header.html":1237,"./inbox_line_item_detail_forum_post.html":1238,"./inbox_line_item_detail_forum_post_single.html":1239,"./inbox_line_item_detail_lyrics_diff.html":1240,"./inbox_line_item_detail_object.html":1241,"./inbox_line_items/generic.html":1242,"./inbox_line_items/pyong.html":1243,"./iq_inbox.html":1244,"./iq_notification_list.html":1245,"./leaderboard.html":1246,"./leaderboard_ad.html":1247,"./lyrics.html":1248,"./lyrics_edit_proposal.html":1249,"./lyrics_edit_proposal_moderation.html":1250,"./lyrics_export_preview.html":1251,"./lyrics_sync_editor.html":1252,"./lyrics_sync_home.html":1253,"./lyrics_sync_keyboard.html":1254,"./manage_chart_item.html":1255,"./manage_roles.html":1256,"./markdown_preview.html":1257,"./marquee_ad.html":1258,"./media_controls.html":1259,"./media_player.html":1260,"./merge_artist_form.html":1261,"./messages_inbox.html":1262,"./metadata_custom_performance_role_input.html":1263,"./metadata_input_and_label.html":1264,"./mini_album_card.html":1265,"./mini_annotatable_card.html":1266,"./mini_article_card.html":1267,"./mini_artist_card.html":1268,"./mini_song_card.html":1269,"./mini_user_card.html":1270,"./mini_video_card.html":1271,"./missing_metadata_form.html":1272,"./modal_window.html":1273,"./new_conversation.html":1274,"./other_users_with_ip.html":1275,"./paginated_accomplishments.html":1276,"./paginated_leaderboard.html":1277,"./placeholder_spinner.html":1278,"./placeholder_text.html":1279,"./play_pause_button.html":1280,"./profile_admin_pane.html":1281,"./profile_all_activity.html":1282,"./profile_annotation.html":1283,"./profile_artist_pane.html":1284,"./profile_contributions_annotations.html":1285,"./profile_contributions_answers.html":1286,"./profile_contributions_articles.html":1287,"./profile_contributions_comments.html":1288,"./profile_contributions_group.html":1289,"./profile_contributions_pyongs.html":1290,"./profile_contributions_questions.html":1291,"./profile_contributions_transcriptions.html":1292,"./profile_followers.html":1293,"./profile_identity.html":1294,"./profile_page.html":1295,"./profile_user_pane.html":1296,"./pyong_button_for_header.html":1297,"./pyong_button_square_button.html":1298,"./pyong_form.html":1299,"./question.html":1300,"./question_form.html":1301,"./question_list.html":1302,"./reasons_toggle.html":1303,"./recent_signups_page.html":1304,"./recirculated_content.html":1305,"./referent_editorial_indicator.html":1306,"./referent_fragment_container.html":1307,"./release_date.html":1308,"./relevant_videos.html":1309,"./role_icon.html":1310,"./role_selection_dialog.html":1311,"./scrollable_data.html":1312,"./search_form.html":1313,"./search_result_item.html":1314,"./search_result_items.html":1315,"./search_result_paginated_section.html":1316,"./search_result_section.html":1317,"./search_results.html":1318,"./search_results_page.html":1319,"./select_dropdown.html":1320,"./share_buttons.html":1321,"./simple_datetime_input.html":1322,"./song_activity.html":1323,"./song_admin_menu.html":1324,"./song_album.html":1325,"./song_albums.html":1326,"./song_attribution_visualization.html":1327,"./song_metadata.html":1328,"./song_metadata_form.html":1329,"./song_metadata_preview.html":1330,"./song_metadata_song_relationships_input.html":1331,"./song_missing_metadata.html":1332,"./song_page.html":1333,"./song_page_sidebar_multi_placement.html":1334,"./song_preview.html":1335,"./song_primary_album.html":1336,"./song_relationships.html":1337,"./song_story_featured_story_placement.html":1338,"./song_story_gallery_page.html":1339,"./song_story_lead_story_placement.html":1340,"./song_story_modal.html":1341,"./song_verified_artists.html":1342,"./song_verified_artists_section.html":1343,"./song_verified_artists_section_single.html":1344,"./soundcloud.html":1345,"./spam_status.html":1346,"./square_item_and_iq.html":1347,"./standalone_inbox.html":1348,"./standalone_referent.html":1349,"./standalone_search.html":1350,"./standard_rich_content.html":1351,"./statistics_panel.html":1352,"./statistics_panel_item.html":1353,"./text_corrector.html":1354,"./time_ago.html":1355,"./twitter_share_button.html":1356,"./user_attribution.html":1357,"./user_badge.html":1358,"./user_badge_and_timestamp.html":1359,"./user_identities.html":1360,"./user_info_with_actions.html":1361,"./user_moderation.html":1362,"./user_tooltip.html":1363,"./vertical_album_card.html":1364,"./vertical_search_result_item.html":1365,"./vertical_search_result_items.html":1366,"./video_carousel.html":1367,"./video_edit_form.html":1368,"./video_list_edit_form.html":1369,"./video_list_page.html":1370,"./video_list_video.html":1371,"./video_page.html":1372,"./videos_modal.html":1373,"./voters.html":1374,"./voting.html":1375,"./web_annotator_manager.html":1376,"./web_annotator_manager_errors.html":1377,"./web_annotator_role_row.html":1378,"./web_annotator_roles_table.html":1379,"./youtube_subscribe_button.html":1380};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=1122},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("add_annotation.html",'<div ng-if="can_add_community_annotation">\n  <square-item-and-iq event_type="created_community_annotation">\n    <button\n      ng-disabled="creating_referent"\n      ng-click="start_new_community_referent()"\n      ng-class="{\'square_button--waiting\': enable_waiting_class && creating_referent}"\n      class="square_button square_button--white_background"\n      ng-bind="::\'annotation.new_community_prompt\' | i18n"\n    ></button>\n  </square-item-and-iq>\n</div>\n\n<div ng-if="can_add_pinned_annotation">\n  <square-item-and-iq event_type="created_pinned_annotation">\n    <button\n      ng-disabled="creating_referent"\n      ng-click="start_new_referent()"\n      class="square_button square_button--white_background square_button--green"\n      ng-class="{\'u-top_margin\': can_add_community_annotation, \'square_button--waiting\': enable_waiting_class && creating_referent}"\n      ng-bind="::\'annotation.new_verified_prompt\' | i18n"\n    ></button>\n  </square-item-and-iq>\n</div>\n\n<div ng-if="ctrl.user_signed_in && !(can_add_community_annotation || can_add_pinned_annotation)">\n  <button\n    ng-disabled="true"\n    class="square_button square_button--disabled"\n    ng-bind="::\'annotation.cannot_annotate_on_locked_song\' | i18n"\n  ></button>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("additional_artists.html",'<div\n  class="metadata_unit"\n  ng-class="{\'metadata_unit--table_row\': variants.table}"\n  ng-if="collection.length > 0"\n>\n  <span class="metadata_unit-label">{{label}}</span>\n\n  <span class="metadata_unit-info">\n    <span\n      ng-repeat="artist in collection | limitTo: limit track by artist.id"\n    >\n      <a\n        ng-href="{{artist.url}}"\n        tether-drop-target\n      >\n        <tether-drop show-on="hover" position="bottom center">\n          <artist-tooltip artist="artist"></artist-tooltip>\n        </tether-drop>\n\n        {{ artist.name | withoutZeroWidthSpaces }}</a>{{ $last ? \'\' : $index === collection.length - 2 && !ctrl.more_to_show() ? \' &amp;\' : \',\' }}\n    </span>\n\n    <span ng-if="ctrl.more_to_show()">\n      &amp; <a href ng-click="ctrl.show_more()" class="metadata_unit-show_more">{{collection.length - limit}} more</a>\n    </span>\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("admin_task.html",'<form ng-submit="$ctrl.perform_task()" submit-on-cmd-enter>\n  <div ng-if="$ctrl.success_message" class="form_message form_message--success">{{$ctrl.success_message}}</div>\n  <div ng-repeat="error in $ctrl.validation_errors.base" class="form_message form_message--error">{{error}}</div>\n  <div ng-repeat="property in $ctrl.task.task_properties track by property.name">\n    <div ng-switch="property.type">\n      <div ng-switch-when="string">\n        <metadata-input-and-label label="{{property.human_name}}" errors="$ctrl.validation_errors[property.name]">\n          <input\n              ng-model="$ctrl.property_values[property.name]"\n              class="square_input square_form-standard_element_margin"\n              placeholder=""\n          />\n        </metadata-input-and-label>\n      </div>\n      <div ng-switch-when="text">\n        <metadata-input-and-label label="{{property.human_name}}" errors="$ctrl.validation_errors[property.name]">\n          <textarea\n              ng-model="$ctrl.property_values[property.name]"\n              class="square_input square_form-standard_element_margin"\n              placeholder=""\n          /></textarea>\n        </metadata-input-and-label>\n      </div>\n      <div ng-switch-when="boolean">\n        <metadata-input-and-label label="{{property.human_name}}" errors="$ctrl.validation_errors[property.name]">\n          <input\n            type="checkbox"\n            ng-model="$ctrl.property_values[property.name]"\n            class="square_form-standard_element_margin"\n          />\n        </metadata-input-and-label>\n      </div>\n      <div ng-switch-when="select">\n        <metadata-input-and-label label="{{property.human_name}}" errors="$ctrl.validation_errors[property.name]">\n          <div class="square_select_group">\n            <div class="square_select_group-single">\n              <select\n                ng-model="$ctrl.property_values[property.name]"\n                class="select_input"\n              >\n                <option ng-repeat="option in property.options" value="{{option}}">{{option}}</option>\n              </select>\n            </div>\n          </div>\n        </metadata-input-and-label>\n      </div>\n      <div ng-switch-default>\n        ERROR!!! Misconfigured and unrecognized task property type\n      </div>\n    </div>\n  </div>\n  <button\n    type="submit"\n    class="modal_window-save_button square_button square_button--purple"\n    ng-class="{\'square_button--waiting\': $ctrl.saving}"\n    ng-disabled="$ctrl.saving"\n    ng-bind="$ctrl.saving ? \'Running\' : \'Run task\'"\n  ></button>\n\n  <table ng-if="$ctrl.tabular_data" class="admin_table rich_text_formatting">\n    <tr>\n      <th ng-repeat="(header_key, _) in $ctrl.tabular_data[0] track by header_key">\n        {{header_key}}\n      </th>\n    </tr>\n    <tr ng-repeat="row in $ctrl.tabular_data track by $index">\n      <td ng-repeat="(_, value) in row track by $index">\n        <span ng-if="$ctrl.is_url(value)">\n          <a ng-href="{{value}}" target="_blank">{{value}}</a>\n        </span>\n        <span ng-if="!$ctrl.is_url(value)">{{value}}</span>\n      </td>\n    </tr>\n  </table>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("admin_tasks_page.html",'<div class="admin_tasks_list">\n  <div class="column_layout u-xx_large_vertical_margins">\n    <div class="column_layout-column_span--full">\n      <h1>Admin Tasks</h1>\n      <div class="square_select_group">\n        <div class="square_select_group-single u-width_100">\n          <select ng-options="task as task.label for task in $ctrl.select_tasks track by task.name" ng-model="selected_task" class="select_input"></select>\n        </div>\n      </div>\n\n      <div ng-if="selected_task.name !== $ctrl.no_task.name">\n        <placeholder-spinner ng-if="!admin_task"></placeholder-spinner>\n        <admin-task ng-if="admin_task" task="admin_task"></admin-task>\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("admin_user_info.html",'<div class="u-vertical_margins">\n  <span class="text_label u-display_block">Email</span>\n  <a href="mailto:{{$ctrl.user.email}}">{{$ctrl.user.email}}</a>\n</div>\n\n<div class="u-vertical_margins">\n  <span class="text_label u-display_block">Linked Accounts</span>\n  <user-identities ng-if="$ctrl.user.identities.length" user="$ctrl.user"></user-identities>\n  <span ng-if="!$ctrl.user.identities.length">No linked accounts</span>\n</div>\n\n<div class="u-vertical_margins">\n  <span class="text_label u-display_block">Browser Info</span>\n  <p><span class="u-bold">Browser: </span>{{$ctrl.user.browser || \'No info\'}}</p>\n  <p><span class="u-bold">Platform: </span>{{$ctrl.user.platform || \'No info\'}}</p>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_ad_form.html",'<form ng-submit="$ctrl.save($ctrl.model)" class="square_form">\n  <div class="text_label text_label--purple form_section_label">Add an Ad</div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Theme</div>\n    <div class="square_select_group">\n      <div class="square_select_group-single u-width_100">\n        <select\n          ng-model="$ctrl.model.theme_name"\n          ng-options="theme as theme for theme in $root.themes"\n          ng-init="$ctrl.model.theme_name = $root.themes[0]"\n          autofocus\n        ></select>\n      </div>\n    </div>\n  </div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Body</div>\n    <textarea class="square_input square_form-standard_element_margin" ng-model="$ctrl.model.body" placeholder="The body of this ad"></textarea>\n  </div>\n\n  <button type="submit" class="modal_window-save_button square_button square_button--purple u-small_vertical_margins" ng-class="{\'square_button--waiting\': $ctrl.saving}" ng-disabled="$ctrl.saving" ng-bind="$ctrl.saving ? \'Saving\' : \'Save\'"></button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_ad_group_form.html",'<form ng-submit="$ctrl.save($ctrl.model)" class="square_form">\n  <div class="text_label text_label--purple form_section_label">Add an Ad Group</div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Song ID</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.model.song_id" placeholder="The ID of the song to link back to" autofocus/>\n  </div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">YouTube ID</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.model.youtube_video_id" placeholder="The ID part of the YouTube URL to traffic against"/>\n  </div>\n\n  <button type="submit" class="modal_window-save_button square_button square_button--purple u-small_vertical_margins" ng-class="{\'square_button--waiting\': $ctrl.saving}" ng-disabled="$ctrl.saving" ng-bind="$ctrl.saving ? \'Saving\' : \'Save\'"></button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_ad_group_list.html",'<modal-window ng-if="$ctrl.adding_ad_group" on-close="$ctrl.adding_ad_group = false">\n  <adwords-ad-group-form campaign="$ctrl.campaign" on-save="$ctrl.load_ad_groups()" on-close="$ctrl.adding_ad_group = undefined"></adwords-ad-group-form>\n</modal-window>\n\n<modal-window ng-if="$ctrl.adding_ad_to_group" on-close="$ctrl.adding_ad_to_group = undefined">\n  <adwords-ad-form ad-group="$ctrl.adding_ad_to_group" on-save="$ctrl.load_ad_groups()" on-close="$ctrl.adding_ad_to_group = undefined"></adwords-ad-form>\n</modal-window>\n\n<div ng-repeat="ad_group in $ctrl.ad_groups" class="u-vertical_margins" ng-if="!$ctrl.loading">\n  <div class="text_label">\n    <a ng-href="{{ ad_group.song.url }}">{{ ad_group.song.title }} by {{ ad_group.song.primary_artist.name }}</a>\n    <a ng-href="{{ ad_group.youtube_url }}" target="_blank">({{ ad_group.youtube_video_id }})</a>\n  </div>\n\n  <ul>\n    <li ng-repeat="ad in ad_group.adwords_ads">\n      <a ng-click="$ctrl.change_ad_status(ad, ad.status === \'ENABLED\' ? \'PAUSED\' : \'ENABLED\')" prevent-default-click href="#" ng-switch="ad.status" confirm="Are you sure?">\n        <svg ng-switch-when="PAUSED" class="inline_icon inline_icon--red" src="circle.svg"></svg>\n        <svg ng-switch-when="ENABLED" class="inline_icon inline_icon--green" src="circle.svg"></svg>\n      </a>\n\n      <a class="u-hair_left_margin" ng-href="{{ ad.image_url }}" target="_blank" title="Preview (theme: {{ ad.theme_name }})">\n        <svg class="inline_icon" src="eye.svg"></svg>\n      </a>\n\n      <span class="u-half_left_margin" ng-bind="ad.body"></span>\n    </li>\n\n    <li>\n      <span class="text_label text_label--button text_label--purple" ng-click="$ctrl.adding_ad_to_group = ad_group">+ Ad</span>\n    </li>\n  </ul>\n</div>\n\n<div class="u-vertical_margins">\n  <span class="text_label text_label--button text_label--purple" ng-click="$ctrl.adding_ad_group = true">+ Ad Group</span>\n</div>\n\n<placeholder-spinner ng-if="$ctrl.loading"></placeholder-spinner>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_campaign_form.html",'<form ng-submit="$ctrl.save($ctrl.model)" class="square_form">\n  <div class="text_label text_label--purple form_section_label">Add a Campaign</div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Name</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.model.name" placeholder="Name of the campaign" autofocus/>\n  </div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Network</div>\n    <div class="square_select_group">\n      <div class="square_select_group-single u-width_100">\n        <select ng-options="network as network.name for network in $ctrl.available_adwords_networks" ng-model="$ctrl.model.adwords_network" class="select_input"></select>\n      </div>\n    </div>\n  </div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Budget (in USD)</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.model.budget" placeholder="50.00" autofocus/>\n  </div>\n\n  <button type="submit" class="modal_window-save_button square_button square_button--purple u-small_vertical_margins" ng-class="{\'square_button--waiting\': $ctrl.saving}" ng-disabled="$ctrl.saving" ng-bind="$ctrl.saving ? \'Saving\' : \'Save\'"></button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_campaign_list.html",'<modal-window ng-if="$ctrl.adding_campaign" on-close="$ctrl.adding_campaign = false">\n  <adwords-campaign-form on-save="$ctrl.load_campaigns()" on-close="$ctrl.adding_campaign = false"></adwords-campaign-form>\n</modal-window>\n\n<div ng-repeat="campaigns in $ctrl.grouped_campaigns" ng-if="!$ctrl.loading" class="u-vertical_margins">\n  <div class="text_label" ng-bind="campaigns[0].adwords_network.name"></div>\n\n  <ul>\n    <li ng-repeat="campaign in campaigns">\n      <div ng-switch="campaign === $ctrl.selected_campaign">\n        <span ng-switch-when="true" ng-bind="campaign.name"></span>\n        <a ng-switch-when="false" href="#" ng-click="$ctrl.select(campaign)" prevent-default-click ng-bind="campaign.name"></a>\n      </div>\n    </li>\n  </ul>\n</div>\n\n<div class="u-vertical_margins">\n  <span class="text_label text_label--button text_label--purple" ng-click="$ctrl.adding_campaign = true">+ Campaign</span>\n</li>\n\n<placeholder-spinner ng-if="$ctrl.loading"></placeholder-spinner>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_editor.html",'<div class="column_layout u-vertical_margins">\n  <div class="column_layout-column_span column_layout-column_span--secondary">\n    <span class="tag_label tag_label--large tag_label--black_background">Campaigns</span>\n    <adwords-campaign-list selected-campaign="$ctrl.campaign" on-select="$ctrl.campaign = campaign"></adwords-campaign-list>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-if="$ctrl.campaign">\n    <span class="tag_label tag_label--large tag_label--black_background">Advertisements</span>\n    <adwords-ad-group-list campaign="$ctrl.campaign" ng-if="$ctrl.campaign"></adwords-ad-group-list>\n  </div>\n</div>\n\n<modal-window ng-if="$ctrl.adding_ad" on-close="$ctrl.adding_ad = false">\n  <adwords-ad-form on-save="$ctrl.create_ad(data)"></adwords-ad-group-form>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("album_admin_menu.html",'<div\n  ng-show="$ctrl.has_admin_items"\n  class="square_button square_button--transparent u-half_horizontal_margins u-bottom_margin"\n  tether-drop-target\n>\n  More\n  <svg src="down_arrow.svg" class="inline_icon inline_icon--short inline_icon--up_1"></svg>\n  <tether-drop\n    show-on="click"\n    position="bottom left"\n    yields-api="$ctrl.tether_api = tetherApi"\n  >\n    <div class="tooltip tooltip--no_padding">\n      <div\n        ng-repeat="action in $ctrl.actions"\n        ng-if="$ctrl.can_perform(action)"\n        class="tooltip-list_item"\n        ng-click="$ctrl.attempt_admin_action(action); $ctrl.tether_api.hide()"\n      >\n        <span ng-switch="action">\n          <svg ng-switch-when="destroy" class="inline_icon tooltip-list_item-icon" src="x.svg"></svg>\n          <svg ng-switch-when="unlock" class="inline_icon inline_icon--reading_size inline_icon--up_1 tooltip-list_item-icon" src="unlock.svg"></svg>\n          <svg ng-switch-when="lock" class="inline_icon tooltip-list_item-icon" src="lock.svg"></svg>\n          <svg ng-switch-when="super_lock" class="inline_icon tooltip-list_item-icon" src="lock.svg"></svg>\n        </span>\n        {{ \'album.actions.\' + action | i18n }}\n        <span ng-if="action === \'unlock\'">&nbsp;({{ \'album.lock_state.\' + $ctrl.album.lock_state | i18n }})</span>\n      </div>\n      <div\n        class="tooltip-list_item"\n        copy-to-clipboard="$ctrl.tracklist_markup()"\n        text-to-show-after-copy="Copied to clipboard"\n      >\n        Copy Tracklist Markup\n      </div>\n      <div\n        ng-if="$ctrl.can_perform(\'see_short_id\')"\n        class="tooltip-list_item"\n        copy-to-clipboard="\'album:{{$ctrl.album.id}}\'"\n        text-to-show-after-copy="Copied to clipboard"\n      >\n        Copy Short ID (<code>album:{{$ctrl.album.id}}</code>)\n      </div>\n    </div>\n  </tether-drop>\n</div>\n\n<modal-window\n  ng-if="$ctrl.show_sorted_modal"\n  on-close="$ctrl.show_sorted_modal = false"\n  variants="{narrow_width: true}"\n>\n  <div\n    ng-repeat="album_appearance in $ctrl.album_appearances | orderBy:\'song.stats.unreviewed_annotations\':true track by album_appearance.id"\n    class="u-bottom_margin"\n  >\n    <mini-song-card\n      object="album_appearance.song"\n      variants="{show_unreviewed_count: true}"\n    ></mini-song-card>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("album_grid.html",'<div class="thumbnail_grid white_container" ng-if="$ctrl.albums.length > 0">\n  <div\n    class="thumbnail_grid-grid_element thumbnail_grid-grid_element--{{ $ctrl.variants.item_size || \'third\' }}"\n    ng-repeat="album in $ctrl.albums | limitTo: $ctrl.count track by $id(album)"\n  >\n    <vertical-album-card object="album"></vertical-album-card>\n  </div>\n</div>\n\n<div\n  class="full_width_button u-clickable u-quarter_top_margin"\n  ng-if="$ctrl.albums.length > 0"\n  ng-click="$ctrl.all_albums_pane_open = true"\n>\n  Show all albums by {{ $ctrl.artist.name }}\n  <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="right_arrow.svg"></svg>\n</div>\n\n<modal-window\n  ng-if="$ctrl.all_albums_pane_open"\n  on-close="$ctrl.all_albums_pane_open = undefined; $ctrl.artist_album_scrollable_data.reset()"\n  variants="{narrow_width: true, white_background: true}"\n>\n  <scrollable-data\n    src="$ctrl.artist_album_scrollable_data"\n    scroll-mechanism="infinite_scroll"\n    repeat-with="album"\n  >\n    <div class="profile_list_item" ng-class="{\'profile_list_item--last\': $last}">\n      <mini-album-card object="album" variants="{small: true}"></mini-album-card>\n    </div>\n  </scrollable-data>\n</modal-window>\n\n<div ng-if="$ctrl.albums.length == 0">\n  <div class="text_label text_label--gray u-xx_large_vertical_margins">\n    There are no albums by this artist on Genius\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("album_metadata_form.html",'<form ng-submit="$ctrl.save()" ng-model-options="{updateOn: \'submit\'}" submit-on-cmd-enter dirtyable yields-is-dirty="$ctrl.yields_is_dirty({is_dirty})">\n  <div ng-if="$ctrl.error" class="form_message form_message--error text_label">\n    {{ $ctrl.error.message }}\n    <span ng-repeat="base_error in $ctrl.error.response.validation_errors.base">\n      <br>\n      {{ base_error }}\n    </span>\n  </div>\n\n  <div class="square_form">\n    <metadata-input-and-label label="{{:: \'album.metadata.name\' | i18n}}" full="true" errors="$ctrl.error.response.validation_errors.name">\n      <input name="name" ng-model="$ctrl.album.name" placeholder="Album name" class="square_input square_form-standard_element_margin">\n    </metadata-input-and-label>\n\n    <metadata-input-and-label label="{{:: \'album.metadata.artist\' | i18n}}" errors="$ctrl.error.response.validation_errors.artist">\n      <input\n          ng-model="$ctrl.album.artist"\n          autocomplete-with="artist"\n          class="square_input square_form-standard_element_margin"\n          placeholder="Artist"\n          ng-value="$ctrl.album.artist.name"\n          display-field="name"\n      ></input>\n    </metadata-input-and-label>\n\n    <metadata-input-and-label label="{{:: \'album.metadata.release_date\' | i18n}}" full="true" errors="$ctrl.error.response.validation_errors.release_date_components">\n      <div class="u-bottom_margin">\n        <component-date-input ng-model="$ctrl.album.release_date_components"></component-date-input>\n      </div>\n    </metadata-input-and-label>\n\n    <metadata-input-and-label label="{{:: \'album.metadata.custom_header_image_url\' | i18n}}" full="true" errors="$ctrl.error.response.validation_errors.header_image_url">\n      <image-upload-button\n        default-image="$ctrl.album.custom_header_image_url"\n        on-file-picked="$ctrl.album.custom_header_image_url = url"\n      ></image-upload-button>\n    </metadata-input-and-label>\n\n\n    <metadata-input-and-label label="{{:: \'album.metadata.album_performances\' | i18n}}" full="true" errors="$ctrl.error.response.validation_errors.album_performances">\n      <metadata-custom-performance-role-input\n        custom-performance-roles="$ctrl.album.performance_groups"\n        role-field-placeholder="e.g. Executive Producer"\n        artist-field-placeholder="Phil Spector"\n        validation-errors="$ctrl.error.response.validation_errors"\n        class="u-width_100"\n      ></metadata-custom-performance-role-input>\n    </metadata-input-and-label>\n\n    <div class="u-small_vertical_margins">\n      <button\n        class="square_button square_button--green"\n        type="submit"\n      >Save</button>\n      <button ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Cancel</button>\n    </div>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("album_page.html",'<div class="leaderboard_ad_container">\n  <leaderboard-ad name="desktop_album_leaderboard"></leaderboard-ad>\n</div>\n\n<header-with-cover-art\n  type="album"\n  object="$ctrl.page_data.album"\n  cover-arts="$ctrl.page_data.album.cover_arts"\n  header-image-url="$ctrl.page_data.album.header_image_url"\n  cover-art-url="$ctrl.page_data.album.cover_art_url"\n  title-label="$ctrl.page_data.album.name"\n  artist="$ctrl.page_data.album.artist"\n  can-edit="$ctrl.has_permission(\'edit\')"\n  on-edit="$ctrl.editing = true; $ctrl.current_edit_panel = \'cover_art\'"\n  focused-cover-art-id="$ctrl.focused_cover_art_id"\n  on-close-cover-art-modal="$ctrl.unfocus_cover_art()"\n  variants="{\n    white_title: true,\n    type_label: \'Album\',\n    large_cover_art: true,\n    wide_primary_column: true\n  }"\n>\n  <metadata>\n    <div\n      ng-if="$ctrl.page_data.album.release_date_components"\n      class="metadata_unit"\n    >\n      {{$ctrl.is_released() ? \'Released\' : \'Expected\'}} {{$ctrl.page_data.album.release_date_components | imprecise_date }}\n    </div>\n  </metadata>\n  <secondary>\n    <div class="header_with_cover_art-metadata_preview u-small_top_margin u-right_margin">\n      <div\n        class="header_with_cover_art-metadata_preview-unit"\n        ng-if="$ctrl.page_data.album.song_pageviews"\n        title="{{ $ctrl.page_data.album.song_pageviews | number }} views of songs on this album"\n      >\n        <svg class="inline_icon inline_icon--gray" src="eye.svg"></svg>\n        <span class="text_label text_label--gray text_label--x_small_text_size">{{ $ctrl.page_data.album.song_pageviews | abbreviateBigNumber }}</span>\n      </div>\n    </div>\n  </secondary>\n</header-with-cover-art>\n\n<modal-window\n  hidden="$ctrl.saving"\n  ng-if="$ctrl.editing || $ctrl.saving"\n  on-close="$ctrl.attempt_close(!$ctrl.is_form_dirty(), $ctrl.close_form)"\n>\n  <div class="column_layout" ng-init="$ctrl.current_edit_panel = $ctrl.current_edit_panel || \'album_info\'">\n    <div class="column_layout-column_span column_layout-column_span--secondary">\n      <div\n        class="toggleable_list_item"\n        ng-class="{\'toggleable_list_item--selected\': $ctrl.current_edit_panel === \'album_info\'}"\n        ng-click="$ctrl.current_edit_panel = \'album_info\'"\n      >Edit Info</div>\n      <div\n        class="toggleable_list_item"\n        ng-class="{\'toggleable_list_item--selected\': $ctrl.current_edit_panel === \'cover_art\'}"\n        ng-click="$ctrl.current_edit_panel = \'cover_art\'"\n      >Edit Cover Art</div>\n    </div>\n\n    <div class="column_layout-column_span column_layout-column_span--primary" ng-switch="$ctrl.current_edit_panel">\n      <album-metadata-form\n        ng-switch-when="album_info"\n        album="$ctrl.page_data.album"\n        on-save="$ctrl.save(album)"\n        close="$ctrl.close_form()"\n        yields-is-dirty="$ctrl.is_form_dirty = is_dirty"\n      ></album-metadata-form>\n\n      <cover-art-form\n        ng-switch-when="cover_art"\n        cover-artable="$ctrl.page_data.album"\n        cover-arts="$ctrl.page_data.album.cover_arts"\n        type="album"\n        close="$ctrl.close_form()"\n        yields-is-dirty="$ctrl.is_form_dirty = is_dirty"\n      ></cover-art-form>\n    </div>\n  </div>\n</modal-window>\n\n<div class="column_layout u-top_margin">\n  <div class="column_layout-column_span column_layout-column_span--primary">\n    <div ng-hide="$ctrl.editing_tracklist">\n      <div class="square_button u-bottom_margin" ng-click="$ctrl.editing_tracklist = !$ctrl.editing_tracklist" ng-if="$ctrl.has_permission(\'edit\')">Edit Tracklist</div>\n      <div class="square_button u-bottom_margin" ng-click="$ctrl.editing = true" ng-if="$ctrl.has_permission(\'edit\')">Edit Album Info</div>\n      <album-admin-menu ng-if="$ctrl.user_signed_in" album="$ctrl.page_data.album" album-appearances="$ctrl.page_data.album_appearances"></album-admin-menu>\n      <h2\n        class="text_label text_label--gray u-half_bottom_margin"\n      >{{ $ctrl.page_data.album.name }} Tracklist</h2>\n      <album-tracklist-row\n        ng-repeat="album_appearance in $ctrl.page_data.album_appearances track by album_appearance.id"\n        album-appearance="album_appearance"\n        show-artist="$ctrl.page_data.album.artist.id !== album_appearance.song.primary_artist.id"\n      ></album-tracklist-row>\n    </div>\n    <editable-tracklist\n      ng-if="$ctrl.editing_tracklist"\n      album="$ctrl.page_data.album"\n      album-appearances="$ctrl.page_data.album_appearances"\n      editing="$ctrl.editing_tracklist"\n      on-update="$ctrl.page_data.album_appearances = album_appearances"\n      close="$ctrl.editing_tracklist = false"\n    ></editable-tracklist>\n\n    <recirculated-content\n      stories="$ctrl.page_data.related_articles"\n    ></recirculated-content>\n\n    <comments type="albums" commentable="$ctrl.page_data.album"></comments>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--secondary">\n    <relevant-videos\n      object="$ctrl.page_data.album"\n      placement="sidebar"\n      container-classes="white_container"\n      variants="{show_container_label: true}"\n    ></relevant-videos>\n\n    <div class="white_container u-x_large_top_margin">\n      <description-referent\n        object="$ctrl.page_data.album.description_annotation"\n        variants="{truncated: true}"\n      ></description-referent>\n    </div>\n\n    <dfp-ad\n      class="u-display_block"\n      name="desktop_album_sidebar"\n      ad-classes="[\'u-top_margin\']"\n    ></dfp-ad>\n\n    <h4\n      class="text_label text_label--gray u-x_large_top_margin u-half_bottom_margin"\n    >{{ $ctrl.page_data.album.name }} Q&amp;A</h4>\n    <div class="white_container">\n      <defer-compile\n        use-initial-content-with-key="question_list"\n        within-visibility-range="150px"\n        delay="500"\n      >\n        <question-list\n          questionable="$ctrl.page_data.album"\n          pinned-questions="$ctrl.page_data.pinned_questions"\n          pending-question-count="$ctrl.page_data.pending_question_count"\n          featured-question="$ctrl.page_data.featured_question"\n        ></question-list>\n      </defer-compile>\n    </div>\n\n    <div ng-if="!$ctrl.hide_leaderboard">\n      <h4\n        class="text_label text_label--gray u-x_large_top_margin u-half_bottom_margin"\n      >Top {{$ctrl.page_data.album.name}} scholars</h4>\n      <div class="white_container">\n        <paginated-leaderboard\n          source="$ctrl.get_leaderboard_page"\n          per-page="10"\n          on-empty="$ctrl.hide_leaderboard = true"\n          ng-attr-extra-info="{{$ctrl.page_data.album.current_user_metadata.iq_on_object ? \'Your IQ on \' + $ctrl.page_data.album.name + \': \' + ($ctrl.page_data.album.current_user_metadata.iq_on_object | number:0) : undefined}}"\n        ></paginated-leaderboard>\n      </div>\n    </div>\n\n    <div ng-if="$ctrl.page_data.album.performance_groups.length > 0">\n      <div class="white_container u-x_large_top_margin">\n        <h4\n          class="text_label u-half_bottom_margin"\n        >Album Credits</h4>\n        <div\n          ng-repeat="label_artists in $ctrl.page_data.album.performance_groups track by $index"\n        >\n          <expandable-list\n            collection="label_artists.artists"\n            template="additional_artists"\n            limit="3"\n            label="{{label_artists.label}}"\n            variants="{table: true}"\n          ></expandable-list>\n        </div>\n      </div>\n    </div>\n\n    <div ng-if="$ctrl.page_data.album.song_performances.length > 0">\n      <div class="white_container u-x_large_top_margin">\n        <h4\n          class="text_label u-half_bottom_margin"\n        >Song Credits</h4>\n        <div\n          ng-repeat="label_artists in $ctrl.page_data.album.song_performances | limitTo: $ctrl.album_credits_expanded ? null : 5 track by $index"\n        >\n          <expandable-list\n            collection="label_artists.artists"\n            template="additional_artists"\n            limit="3"\n            label="{{label_artists.label}}"\n            variants="{table: true}"\n          ></expandable-list>\n        </div>\n        <a\n          class="test_label text_label--purple u-top_margin u-display_block u-clickable"\n          ng-if="$ctrl.page_data.album.song_performances.length > 5"\n          ng-click="$ctrl.album_credits_expanded = !$ctrl.album_credits_expanded"\n        >\n          {{$ctrl.album_credits_expanded ? \'Show Fewer\' : \'Show \' + ($ctrl.page_data.album.song_performances.length - 5) + \' More\' }}\n          <svg ng-show="!$ctrl.album_credits_expanded" src="down_arrow.svg" class="inline_icon inline_icon--gray inline_icon--short"></svg>\n          <svg ng-show="$ctrl.album_credits_expanded" src="up_arrow.svg" class="inline_icon inline_icon--gray inline_icon--short"></svg>\n        </a>\n      </div>\n    </div>\n\n    <div ng-if="$ctrl.page_data.other_albums_by_artist.length > 0">\n      <h4\n        class="text_label text_label--gray u-x_large_top_margin u-half_bottom_margin"\n      >More {{$ctrl.page_data.album.artist.name}} albums</h4>\n\n      <album-grid\n        albums="$ctrl.page_data.other_albums_by_artist"\n        artist="$ctrl.page_data.album.artist"\n        count="2"\n        variants="{item_size: \'half\'}"\n      ></album-grid>\n    </div>\n  </div>\n</div>\n\n<div class="gray_container u-xx_large_top_margin">\n  <breadcrumbs order="[$ctrl.page_data.album.artist, $ctrl.page_data.album]"></breadcrumbs>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("album_tracklist_row.html",'<div class="chart_row chart_row--light_border chart_row--full_bleed_left chart_row--align_baseline chart_row--no_hover">\n  <div class="chart_row-number_container chart_row-number_container--align_left">\n    <span class="chart_row-number_container-number chart_row-number_container-number--gray">\n      <span>{{$ctrl.album_appearance.track_number}}</span>\n    </span>\n  </div>\n  <div class="chart_row-content">\n    <a ng-if="$ctrl.can(\'view\')" ng-href="{{$ctrl.album_appearance.song.url}}" class="u-display_block">\n      <h3 class="chart_row-content-title">\n        {{$ctrl.show_artist ? $ctrl.album_appearance.song.full_title : $ctrl.album_appearance.song.title_with_featured}}\n        <span class="chart_row-content-title-subtitle">Lyrics</span>\n        <svg src="checky.svg" class="checky checky--up_1 u-quarter_horizontal_margins" ng-if="$ctrl.album_appearance.song.has_verified_artists"></svg>\n      </h3>\n    </a>\n    <h3 ng-if="!$ctrl.can(\'view\')" class="chart_row-content-title">\n      {{$ctrl.show_artist ? $ctrl.album_appearance.song.full_title : $ctrl.album_appearance.song.title_with_featured}}\n      <span class="chart_row-content-title-subtitle">Lyrics</span>\n      <svg src="checky.svg" class="checky checky--up_1 u-quarter_horizontal_margins" ng-if="$ctrl.album_appearance.song.has_verified_artists"></svg>\n    </h3>\n    <div ng-if="$ctrl.expanded">\n      <div ng-if="$ctrl.has_credits()" class="u-half_top_margin">\n        <expandable-list\n          collection="$ctrl.album_appearance.song.featured_artists"\n          label="Featuring"\n          limit="2"\n          template="additional_artists"\n        ></expandable-list>\n        <expandable-list\n          collection="$ctrl.album_appearance.song.producer_artists"\n          label="Produced by"\n          limit="2"\n          template="additional_artists"\n        ></expandable-list>\n        <expandable-list\n          collection="$ctrl.album_appearance.song.writer_artists"\n          label="Written by"\n          limit="2"\n          template="additional_artists"\n        ></expandable-list>\n      </div>\n      <div ng-if="$ctrl.album_appearance.song.description_preview" class="rich_text_formatting u-half_top_margin">\n        <span>{{ $ctrl.album_appearance.song.description_preview | truncateToBoundary:125:{with_ellipsis: true} }}</span>\n        <a class="chart_row-content-read_more" ng-href="{{$ctrl.album_appearance.song.url}}">\n          <span>read more</span>\n          <svg src="external.svg" class="inline_icon inline_icon--dark_purple inline_icon--half_height"></svg>\n        </a>\n      </div>\n      <song-missing-metadata\n        ng-if="$ctrl.can(\'edit_anything\')"\n        song="$ctrl.album_appearance.song"\n        possible-missing-info="[\'writer_artists\', \'producer_artists\', \'release_date_components\']"\n      ></song-missing-metadata>\n    </div>\n  </div>\n  <div\n    class="chart_row-metadata_element chart_row-metadata_element--large"\n    ng-if="$ctrl.album_appearance.song.lyrics_state === \'unreleased\'"\n    tether-drop-target\n  >\n    {{:: \'song.lyrics_state.unreleased.indicator\' | i18n }}\n    <tether-drop show-on="hover">\n      <div class="tooltip u-half_left_margin">{{:: \'song.lyrics_state.unreleased.message\' | i18n }}</div>\n    </tether-drop>\n  </div>\n  <div\n    class="chart_row-metadata_element chart_row-metadata_element--large"\n    ng-if="$ctrl.album_appearance.song.lyrics_state === \'incomplete\'"\n    tether-drop-target\n  >\n    {{:: \'song.lyrics_state.incomplete.indicator\' | i18n }}\n    <tether-drop show-on="hover">\n      <div class="tooltip u-half_left_margin">{{:: \'song.lyrics_state.incomplete.message\' | i18n }}</div>\n    </tether-drop>\n  </div>\n  <div\n    class="chart_row-metadata_element chart_row-metadata_element--hot chart_row-metadata_element--large"\n    ng-if="$ctrl.album_appearance.song.lyrics_state === \'complete\' && $ctrl.album_appearance.song.stats.concurrents + 1 > 50"\n  >\n    <svg src="fire.svg" class="inline_icon inline_icon--pink inline_icon--reading_size inline_icon--up_2"></svg>\n    {{$ctrl.album_appearance.song.stats.concurrents + 1 | number}}\n  </div>\n  <div\n    class="chart_row-metadata_element chart_row-metadata_element--large"\n    ng-if="$ctrl.album_appearance.song.lyrics_state === \'complete\' && $ctrl.album_appearance.song.stats.pageviews"\n  >\n    <svg src="eye.svg" class="inline_icon inline_icon--up_1"></svg>\n    {{$ctrl.album_appearance.song.stats.pageviews | abbreviateBigNumber}}\n  </div>\n  <div\n    class="chart_row-expand u-increase_tap_area_full_space"\n    ng-class="{\'chart_row-expand--expanded\': $ctrl.expanded}"\n    ng-click="$ctrl.expanded = !$ctrl.expanded"\n  >\n    <svg\n      src="down_arrow.svg"\n      ng-if="($ctrl.album_appearance.song.description_preview || $ctrl.has_credits() || $ctrl.can(\'edit_anything\'))"\n      class="inline_icon inline_icon--gray inline_icon--up_1 inline_icon--short"\n    ></svg>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotatable_image.html",'<div class="annotatable_image" on-hover-with-no-digest="ctrl.set_current_hover_and_digest(hover)">\n  <div class="annotatable_image-add_annotation_button" ng-if="hovering_over_image">\n    <add-annotation\n      ng-if="!creating_image_referent && !image_referent_created"\n      creating-referent="false"\n      can-add-pinned-annotation="can_perform(\'add_pinned_annotation_to\', song)"\n      can-add-community-annotation="can_perform(\'add_community_annotation_to\', song)"\n      song="song"\n      annotation="annotation"\n      start-new-community-referent="ctrl.create_image_referent({community: true})"\n      start-new-referent="ctrl.create_image_referent()"\n    ></add-annotation>\n    <placeholder-spinner ng-if="creating_image_referent"></placeholder-spinner>\n  </div>\n  <img sized-src="src"/>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation.html",'<div\n  ng-if="annotation.state === \'pending\'"\n  class="dashed_background_message u-clickable"\n  tether-drop-target\n>\n  <svg class="inline_icon inline_icon--pink" src="alert.svg"></svg>\n  <span ng-if="variants.isDescription">{{ \'annotation.unreviewed_notice.notice_description_fragment\' | i18n:{annotation_name: (referent.annotatable._type | descriptionAnnotationName)} }}</span>\n  <span ng-if="!variants.isDescription">{{ \'annotation.unreviewed_notice.notice_fragment\' | i18n }}</span>\n  <span class="dashed_background_message-underlined_word">{{ \'annotation.unreviewed_notice.notice_adjective\' | i18n }}</span>\n\n  <tether-drop\n    show-on="hover"\n    position="bottom center"\n  >\n    <div\n      class="tooltip tooltip--tiny u-half_vertical_margins u-half_horizontal_margins"\n      stop-propagation="click"\n    >\n      <p>\n        {{ \'annotation.unreviewed_notice.tooltip\' | i18n }}\n        <a ng-href="{{ctrl.unreviewed_annotation_tooltip_info_url}}" target="_blank">{{ \'annotation.unreviewed_notice.tooltip_link\' | i18n }}</a>.\n      </p>\n    </div>\n  </tether-drop>\n</div>\n\n<user-badge\n  ng-if="annotation.verified && annotation.new"\n  size="medium"\n  object="annotation.authors[0].user"\n  pinned-role="annotation.authors[0].pinned_role"\n  sponsor="annotation.source && annotation.source.name"\n  variants="{\'hide_iq\': annotation.source && annotation.source.name}"\n></user-badge>\n\n<user-badge-and-timestamp\n  ng-if="annotation.verified && !annotation.new"\n  size="medium"\n  user="annotation.authors[0].user"\n  pinned-role="annotation.authors[0].pinned_role"\n  time="annotation.created_at"\n  sponsor="annotation.source && annotation.source.name"\n  variants="{\'hide_iq\': annotation.source && annotation.source.name}"\n></user-badge-and-timestamp>\n\n<div\n  class="annotation_label"\n  ng-class="{\'u-clickable\': !ctrl.annotation_is_unwritten()}"\n  ng-if="ctrl.show_annotation_label() && annotation.state !== \'pending\'"\n  ng-click="toggle_contributors()"\n>\n  <h3 ng-if="variants.isDescription" class="u-inline">{{:: ctrl.annotation_title() }}</h3>\n  <span ng-if="!variants.isDescription">{{:: ctrl.annotation_title() }}</span>\n  <span class="annotation_label-underline" ng-if="!ctrl.annotation_is_unwritten()">\n    {{ annotation.authors.length }} {{ \'terms.contributor\' | i18n:{count:annotation.authors.length} }}\n  </span>\n</div>\n\n<div ng-if="ctrl.show_placeholder_annotation_label()" class="placeholder">\n  <div class="placeholder-pulsing_content u-bottom_margin">\n    <placeholder-user-badge size="x_small"></placeholder-user-badge>\n  </div>\n</div>\n\n<user-badge-and-timestamp\n  ng-if="annotation.state === \'pending\'"\n  size="x_small"\n  user="annotation.authors[0].user"\n  pinned-role="annotation.authors[0].pinned_role"\n  time="annotation.created_at"\n></user-badge-and-timestamp>\n\n<div ng-if="showing_contributors && !ctrl.annotation_is_unwritten()">\n  <leaderboard collection="annotation.authors"></leaderboard>\n  <div class="u-half_vertical_margins">\n    <span ng-click="ctrl.showing_all_versions = true" class="u-float_right text_label text_label--x_small_text_size text_label--button">View all edits</span>\n    <div class="leaderboard_footer">\n      <p>\n        Created by\n        <a href="{{ annotation.created_by.url }}">{{ annotation.created_by.name }}</a>\n        <time-ago time="annotation.created_at"></time-ago>\n      </p>\n      <p ng-if="annotation.state !== \'pending\' && annotation.accepted_by">\n        Accepted by\n        <a href="{{ annotation.accepted_by.url }}">{{ annotation.accepted_by.name }}</a>\n      </p>\n    </div>\n  </div>\n</div>\n\n<div ng-if="ctrl.annotation_is_being_created_by_someone_else()">\n  <div class="annotation_label u-half_bottom_margin">{{ \'annotation.currently_annotating.header\' | i18n }}</div>\n  {{\n    {\n      \'annotation.currently_annotating.default_body\': !can(\'destroy\'),\n      \'annotation.currently_annotating.taking_awhile_body\': can(\'destroy\')\n    } | i18n:{name: annotation.created_by.login}\n  }}\n  <div class="u-top_margin" ng-if="can(\'destroy\')">\n    <square-item-and-iq\n      event-type="you_deleted_an_annotation"\n      show-pill="!ctrl.is_authored_by_current_user()"\n    >\n      <button\n        ng-click="delete()"\n        confirm="Are you sure?"\n        class="square_button square_button--red"\n      >Delete</button>\n    </square-item-and-iq>\n  </div>\n</div>\n\n<div\n  ng-if="\n    ctrl.annotation_is_unwritten() &&\n    (annotation.needs_exegesis || can(\'edit\')) &&\n    !annotation._editing._form_visible &&\n    ctrl.user_signed_in &&\n    !annotation.deleted\n  "\n  class="u-bottom_margin"\n>\n  <div ng-if="disable_saving_with !== \'Saving\'">\n    <square-item-and-iq\n      event-type="{{ annotation.verified ? \'created_pinned_annotation\' : \'created_community_annotation\' }}"\n      variants="{full_width: true}"\n    >\n      <textarea\n        ng-click="start_editing()"\n        class="square_input square_input--full_width square_input--single_line_height"\n        placeholder="{{(\'annotation.prompts.\' + (variants.isDescription ? \'description\' : \'default\') | i18n:{annotation_name: (referent.annotatable._type | descriptionAnnotationName)})}}"\n        autosize-off\n      ></textarea>\n    </square-item-and-iq>\n\n    <div ng-if="can(\'destroy\')" class="u-half_top_margin">\n      <square-item-and-iq\n        event-type="you_deleted_an_annotation"\n        show-pill="!ctrl.is_authored_by_current_user()"\n      >\n        <button\n          ng-click="delete()"\n          confirm="Are you sure?"\n          class="square_button square_button--red"\n        >Delete</button>\n      </square-item-and-iq>\n    </div>\n  </div>\n\n  <placeholder-spinner ng-if="disable_saving_with === \'Saving\'"></placeholder-spinner>\n</div>\n\n<cosigns ng-if="annotation.cosigned_by.length"></cosigns>\n\n<div\n  class="truncated_annotation_text"\n  ng-if="ctrl.content_is_truncated && !annotation._editing._form_visible && !ctrl.annotation_is_unwritten()"\n>\n  <span\n    embedly\n    class="truncated_annotation_text-body rich_text_formatting"\n    ng-bind-html="annotation.body.html | truncateToBoundary:ctrl.truncation_length:{with_ellipsis: true}"\n  ></span>\n  <span\n    class="truncated_annotation_text-read_more"\n    ng-click="ctrl.content_is_truncated = false"\n  >read more &raquo;</span>\n</div>\n\n<standard-rich-content\n  html="annotation.body.html"\n  ng-show="!annotation._editing._form_visible && !ctrl.annotation_is_unwritten() && !ctrl.content_is_truncated"\n  watch-images-loaded="annotation.body.html"\n  open-links-in-new-window\n  handle-intra-page-links\n></standard-rich-content>\n\n<div\n  ng-if="annotation.source"\n  ng-hide="annotation._editing._form_visible"\n  class="u-bottom_margin "\n>\n  <a\n    ng-if="annotation.source.url"\n    target="_blank"\n    ng-href="{{annotation.source.url}}"\n    class="text_label text_label--button text_label--purple"\n  >\n    <span ng-if="annotation.source.name !== \'Billboard\'">via {{annotation.source.name}}</span>\n    <span ng-if="annotation.source.name === \'Billboard\'">\n      read the full interview on\n      <svg src="billboard.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3"></svg>\n    </span>\n  </a>\n  <span\n    ng-if="!annotation.source.url && annotation.source.name !== \'Billboard\'"\n    class="text_label text_label--purple"\n  >via {{annotation.source.name}}</span>\n  <span\n    ng-if="!annotation.source.url && annotation.source.name === \'Billboard\'"\n    class="text_label text_label--purple"\n  >read the full interview on\n    <svg src="billboard.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3"></svg>\n  </span>\n</div>\n\n<form\n  name="form"\n  ng-if="annotation._editing._form_visible"\n  ng-submit="finish_editing()"\n  ng-model-options="{updateOn: \'submit blur\'}"\n  submit-on-cmd-enter\n  dirtyable\n>\n  <div\n    ng-if="form.$submitted && form.$invalid"\n    class="form_message form_message--error text_label"\n  >{{:: \'annotation.empty_validation\' | i18n}}</div>\n\n  <editable-markdown\n    is-required="true"\n    html="annotation._editing.html"\n    markdown="annotation._editing.markdown"\n    placeholder="{{:: (variants.isDescription ? \'annotation.description_placeholder\' : \'annotation.placeholder\') | i18n }}"\n  ></editable-markdown>\n\n  <div ng-if="can(\'edit_custom_preview\', annotation)">\n    <button\n      ng-if="!ctrl.show_annotation_custom_preview_form()"\n      type="button"\n      class="square_button"\n      ng-click="ctrl.initialize_annotation_custom_preview()"\n    >Add a custom annotation preview</button>\n\n    <div ng-if="ctrl.show_annotation_custom_preview_form()">\n      <label class="text_label">\n        Custom annotation preview\n        <textarea\n          autosize-init-on-focus\n          ng-model="annotation._editing.custom_preview"\n          class="square_input square_input--full_width"\n        ></textarea>\n      </label>\n\n      <button\n        type="button"\n        class="square_button u-top_margin"\n        ng-click="ctrl.clear_annotation_custom_preview()"\n      >Use default preview</button>\n    </div>\n  </div>\n\n  <hr>\n\n  <textarea\n    ng-if="annotation.body.markdown && !annotation.new && !annotation.verified"\n    ng-model="annotation._editing.edit_note"\n    class="square_input square_input--full_width"\n    placeholder="Briefly describe your edit"></textarea>\n\n  <label\n    ng-if="can(\'update_source\', annotation)"\n    class="square_checkbox u-half_top_margin"\n  >\n    <input\n      type="checkbox"\n      stop-propagation="click"\n      ng-model-options="{updateOn: \'default\'}"\n      ng-model="annotation._editing._has_source"\n      mousetrap-input\n    >\n    <div class="text_label">Include Source?</div>\n  </label>\n  <div ng-if="annotation._editing._has_source && can(\'update_source\', annotation)">\n    <input\n      ng-model="annotation._editing.source.name"\n      class="square_input square_input--full_width u-half_top_margin"\n      placeholder="Source"\n    />\n    <input\n      ng-model="annotation._editing.source.url"\n      class="square_input square_input--full_width u-half_top_margin"\n      placeholder="Source URL"\n    />\n  </div>\n\n  <div class="u-top_margin u-xx_large_bottom_margin">\n    <square-item-and-iq\n      event-type="{{ annotation.verified ? \'created_pinned_annotation\' : \'created_community_annotation\' }}"\n      show-pill="annotation.needs_exegesis || annotation.being_created"\n    >\n      <button\n        type="submit"\n        class="square_button square_button--green"\n        ng-class="{\'square_button--waiting\': disable_saving_with}"\n        ng-disabled="disable_saving_with"\n      >{{ disable_saving_with || \'Save\' }}</button>\n    </square-item-and-iq>\n    <button\n      ng-click="cancel_editing()"\n      class="square_button square_button--transparent square_button--gray"\n      ng-hide="disable_saving_with"\n    >Cancel</button>\n  </div>\n</form>\n\n<div\n  ng-if="annotation.body.html"\n  ng-hide="variants.hide_moderation || annotation.needs_exegesis || annotation._editing._form_visible || annotation.deleted"\n  class="u-vertical_margins"\n>\n  <kb shortcut="shift+e" action="start_editing()" ng-if="can(\'edit\')"></kb>\n  <button\n    ng-click="start_editing()"\n    ng-if="can(\'edit\') && !ctrl.content_is_truncated"\n    title="shortcut: shift+e"\n    class="square_button"\n  >Edit</button>\n\n  <button ng-click="toggle_cosign(true)"\n    ng-if="can(\'cosign\') && !saving_cosign || can(\'uncosign\') && saving_cosign && !ctrl.content_is_truncated"\n    class="square_button square_button--green"\n    ng-disabled="saving_cosign"\n  >Cosign</button>\n\n  <button\n    ng-click="toggle_cosign(false)"\n    ng-if="can(\'uncosign\') && !saving_cosign || can(\'cosign\') && saving_cosign && !ctrl.content_is_truncated"\n    class="square_button square_button--transparent square_button--gray"\n    ng-disabled="saving_cosign"\n  >Un-cosign</button>\n\n  <button\n    ng-if="!ctrl.showing_edits && ctrl.edits_to_show_count()"\n    ng-click="ctrl.showing_edits = true"\n    class="square_button"\n    ng-class="{\'square_button--red\': can(\'edit\')}"\n  >\n    {{can(\'edit\') ? \'annotation_edit.resolve_message\' : \'annotation_edit.show_message\' | i18n}} {{ctrl.edits_to_show_count()}} {{ \'annotation_edit\' | i18n:{count: ctrl.edits_to_show_count()} }}\n  </button>\n\n  <button ng-click="ctrl.showing_edits = false" ng-if="ctrl.showing_edits && ctrl.edits_to_show_count()" class="square_button" class="square_button">\n    {{\'annotation_edit.hide_message\' | i18n}}\n  </button>\n\n  <kb shortcut="shift+e" action="start_editing({proposed_edit: true})" ng-if="can(\'propose_edit_to\')"></kb>\n  <button\n    ng-click="start_editing({proposed_edit: true})"\n    ng-if="can(\'propose_edit_to\') && !ctrl.content_is_truncated"\n    title="shortcut: shift+e"\n    class="square_button"\n  >\n    {{ \'annotation.propose_edit_prompt\' | i18n }}\n  </button>\n\n\n  <square-item-and-iq\n    event-type="you_deleted_an_annotation"\n    ng-if="can(\'destroy\') && !ctrl.content_is_truncated"\n    show-pill="!ctrl.is_authored_by_current_user()"\n  >\n    <button ng-click="delete()" confirm="Are you sure?" class="square_button square_button--gray square_button--transparent">Delete</button>\n  </square-item-and-iq>\n\n  <button ng-click-disabled="toggling_pin_status" ng-click="toggle_pin_status()" ng-if="can(\'pin_to_profile\') && !ctrl.content_is_truncated" class="square_button square_button--gray square_button--transparent">\n    <placeholder-spinner ng-show="toggling_pin_status" variants=":: {inline: true}"></placeholder-spinner>\n    Pin To Profile\n  </button>\n\n  <button ng-click-disabled="toggling_pin_status" ng-click="toggle_pin_status()" ng-if="can(\'unpin_from_profile\') && !ctrl.content_is_truncated" class="square_button square_button--gray square_button--transparent">\n    <placeholder-spinner ng-show="toggling_pin_status" variants=":: {inline: true}"></placeholder-spinner>\n    Unpin From Profile\n  </button>\n\n  <button ng-click="clear_votes()" ng-if="can(\'clear_votes\') && !ctrl.content_is_truncated" ng-show="annotation.votes_total < 0" confirm="Are you sure?" class="square_button square_button--gray square_button--transparent">Clear Votes</button>\n</div>\n\n<annotation-edits\n  ng-if="ctrl.showing_edits && ctrl.edits_to_show_count()"\n  object="annotation"\n  on-resolution="ctrl.update_editorial_action_count()"\n  context-updated-at="context_updated_at"\n></annotation-edits>\n\n<div\n  ng-if="rejecting"\n  slide-down\n  slide-down-callback="focus_comment_textarea()"\n  class="comments gray_container u-top_margin"\n>\n  <comment-form\n    on-save="reject_with_comment(comment)"\n    save-text="Submit rejection"\n    saving-text="Rejecting"\n    textarea-placeholder="Explain your rejection"\n    allow-reasons="true"\n    commentable="annotation"\n    show-full-form-by-default="true"\n  ></comment-form>\n</div>\n\n<div ng-if="can(\'accept\') && !variants.hide_moderation && !annotation.deleted" slide-up-on="rejecting">\n  <square-item-and-iq event-type="you_accepted_an_annotation" ng-if="can(\'accept\')">\n    <span\n      ng-click="accept()"\n      class="square_button square_button--green"\n    >Accept</span>\n  </square-item-and-iq>\n  <square-item-and-iq event-type="you_rejected_an_annotation" ng-if="can(\'reject\')">\n    <span\n      ng-click="begin_rejection()"\n      class="square_button square_button--transparent square_button--gray"\n    >Reject</span>\n  </square-item-and-iq>\n  <a\n    href="/Genius-coaching-best-practices-annotated"\n    target="_blank"\n    class="square_button square_button--transparent square_button--x_small_text_size"\n  >Coaching guide</a>\n</div>\n\n<div ng-if="!ctrl.annotation_is_unwritten() && !variants.hide_social" class="u-vertical_margins">\n  <voting\n    vote-total-clicked="toggle_voters()"\n    type="annotation"\n    object="annotation"\n    on-unauthorized="ctrl.prompt_auth = true"\n    variants="{\'hide_upvote_text\': ctrl.content_is_truncated}"\n  ></voting>\n\n  <span\n    ng-click="start_editing()"\n    ng-if="can(\'edit\') && ctrl.content_is_truncated"\n    title="shortcut: shift+e"\n    class="annotation_label"\n  >\n    <span class="annotation_label-underline">\n      {{ variants.isDescription && !annotation.body.html ? (\'annotation.empty_description_prompt\' | i18n:{type_name: (referent.annotatable._type | modelHumanName | withIndefiniteArticle)}) : \'Edit\' }}\n    </span>\n  </span>\n\n  <div class="u-float_right">\n    <div\n      ng-if="variants.hideComments"\n      class="square_button square_button--transparent"\n      ng-class="{\'square_button--purple\': ctrl.hiding_comments, \'square_button--gray\': !ctrl.hiding_comments}"\n      ng-click="ctrl.hiding_comments = !ctrl.hiding_comments"\n    >\n      <svg class="inline_icon inline_icon--reading_size inline_icon--down_1" src="comment.svg"></svg>\n      {{ annotation.comment_count ? annotation.comment_count : \'\' }}\n    </div>\n    <pyong-button\n      ng-if="!ctrl.content_is_truncated"\n      type="annotation"\n      object="annotation"\n      variants="{\'transparent\': true, \'purple\': true}"\n      on-unauthorized="ctrl.prompt_auth = true"\n    ></pyong-button>\n    <div\n      ng-if="!ctrl.content_is_truncated"\n      class="square_button square_button--transparent square_button--gray"\n      ng-click="toggle_ellipsis_menu()"\n    >\n      <svg\n        src="share.svg"\n        class="inline_icon inline_icon--reading_size inline_icon--up_2 inline_icon--gray square_button-right_icon_margin"\n      ></svg>\n      Share\n    </div>\n    <div\n      class="square_button square_button--transparent square_button--gray"\n      tether-drop-target\n    >\n      <svg\n        src="down_arrow.svg"\n        class="inline_icon inline_icon--up_1 inline_icon--short inline_icon--gray"\n      ></svg>\n\n      <tether-drop show-on="click" position="bottom center">\n        <div class="tooltip tooltip--no_padding tooltip--tiny" stop-propagation="click">\n          <span\n             ng-if="!ctrl.reported_abuse"\n             confirm="Are you sure?"\n             ng-click="ctrl.report_as_abusive()"\n             class="tooltip-list_item"\n          >report abuse</span>\n          <span\n             ng-if="ctrl.reported_abuse"\n             class="tooltip-list_item tooltip-list_item--disabled"\n          >reported</span>\n        </div>\n      </tether-drop>\n    </div>\n  </div>\n</div>\n\n<div class="u-vertical_margins" ng-show="showing_ellipsis_menu">\n  <annotation-share-menu\n    annotation="annotation"\n    variants="variants"\n  ></annotation-share-menu>\n</div>\n\n<voters ng-if="showing_voters" type="annotation" object="annotation"></voters>\n\n<authentication-form\n  ng-if="ctrl.prompt_auth"\n  on-cancel="ctrl.prompt_auth = false"\n  variants="{display_in_context: true}"\n></authentication-form>\n\n<div ng-if="focused_comments" class="gray_container">\n  <comment-list\n    comments="focused_comments"\n    commentable="annotation"\n    variants="{first_element_in_container: true}"\n  ></comment-list>\n</div>\n\n<comments\n  ng-if="ctrl.should_show_comments() && !focused_comments"\n  prevent-compose="annotation.needs_exegesis"\n  allow-reasons="!annotation.verified && !variants.isDescription"\n  are-suggestions="!annotation.verified"\n  type="annotations"\n  commentable="annotation"\n  context-updated-at="context_updated_at"\n  on-dirty="on_dirty()"\n  on-clean="on_clean()"\n></comments>\n\n<dfp-ad\n  ng-if="variants.showAd && !ctrl.annotation_is_being_created_by_someone_else()"\n  name="desktop_song_annotation"\n  ad-classes="[\'dfp_unit--in_read u-top_margin\']"\n  instance-id="annotation_{{annotation.id}}"\n></dfp-ad>\n\n<modal-window ng-if="ctrl.showing_all_versions" on-close="ctrl.showing_all_versions = false">\n  <annotation-history annotation="annotation" on-revert="ctrl.showing_all_versions = false"></annotation-history>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_edit.html",'<user-badge-and-timestamp size="x_small" user=":: edit.created_by" time=":: edit.created_at"></user-badge-and-timestamp>\n<div class="note_bubble u-small_top_margin" ng-if=":: edit.note" ng-bind-html=":: edit.note"></div>\n\n<rich-text-diff detect-image-diffs ng-if="edit.annotation_before && edit.annotation_after" class="rich_text_formatting" left=":: before_html" right=":: edit.annotation_after.body.html"></rich-text-diff>\n\n<div ng-hide="ctrl.working">\n  <square-item-and-iq\n    event-type="you_merged_an_annotation_edit"\n    ng-if=":: ctrl.can_moderate"\n  >\n    <span\n      class="square_button square_button--green"\n      ng-click="ctrl.merging = true"\n    >Merge</span>\n  </square-item-and-iq>\n  <square-item-and-iq\n    event-type="you_rejected_an_annotation_edit"\n    ng-if=":: ctrl.can_moderate"\n  >\n    <span\n      class="square_button square_button--gray square_button--transparent"\n      confirm="Are you sure?"\n      ng-click="ctrl.reject()"\n    >Reject</span>\n  </square-item-and-iq>\n</div>\n\n<modal-window ng-if="ctrl.merging" on-close="ctrl.merging = false">\n  <div class="proposed_edits">\n    <div class="proposed_edits-before_diff">\n      <div class="text_label text_label--purple form_section_label">Before</div>\n      <standard-rich-content html=":: before_html"></standard-rich-content>\n    </div>\n\n    <div class="proposed_edits-after_diff">\n      <div class="text_label text_label--purple form_section_label">After</div>\n      <standard-rich-content html=":: edit.annotation_after.body.html"></standard-rich-content>\n    </div>\n  </div>\n\n  <div class="u-small_vertical_margins">\n    <span class="square_button square_button--green" ng-click="ctrl.merge()" ng-disabled="working">{{ working ? \'Confirming\' : \'Confirm Merge\' }}</span>\n    <span class="square_button square_button--transparent" ng-click="ctrl.merging = false" ng-hide="working">Cancel</span>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_edits.html",'<div class="gray_container u-vertical_margins">\n  <annotation-placeholder ng-if="ctrl.loading_edits && (!annotation.edits || !annotation.edits.length)" no-label="true"></annotation-placeholder>\n  <annotation-edit\n    ng-if="!ctrl.loading_edits"\n    ng-repeat="edit in annotation.edits | filter:{_deleted: \'!\', _merged: \'!\'} track by edit.id"\n    object="edit"\n    before-html="annotation.body.html"\n    on-merge="ctrl.on_merge(edit)"\n    on-resolution="on_resolution()"\n    class="comment"\n    ng-class="{\'comment--no_top_margin\': $first}"\n  ></annotation-edit>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_embed.html",'<div class="annotation_embed annotation_embed--{{$ctrl.display_mode}}_border">\n  <standalone-referent variants="{largeReferent: true, disableTooltips: true, hide_moderation: $ctrl.simple, hide_social: $ctrl.simple, show_full_referent: $ctrl.simple}" object="$ctrl.referent"></standalone-referent>\n  <a\n    ng-href="{{$ctrl.referent.url}}"\n    target="_blank" class="annotation_embed-deep_link"\n    ng-if="!$ctrl.simple"\n  >\n    <svg src="wordmark.svg" class="annotation_embed-wordmark"></svg>\n  </a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_history.html",'<div class="annotation_history">\n  <div class="text_label text_label--purple form_section_label">Edit History</div>\n\n  <div class="annotation_history-versions">\n    <placeholder-spinner ng-if="!versions"></placeholder-spinner>\n\n    <div class="annotation_history-version" ng-repeat="version in versions track by version.id">\n      <div class="text_label text_label--purple u-small_vertical_margins" ng-if="$first">Current Version:</div>\n\n      <user-badge-and-timestamp size="x_small" user="version.user" time="version.created_at"></user-badge-and-timestamp>\n\n      <standard-rich-content html="version.body.html"></standard-rich-content>\n\n      <div ng-if="!$first && ctrl.can_revert">\n        <button\n          ng-click="ctrl.revert_to(version.id)"\n          class="square_button square_button--purple"\n          ng-class="{\'square_button--disabled\': reverting_to}"\n          ng-disabled="reverting_to"\n        >\n          {{ reverting_to === version.id ? \'Reverting\' : \'Revert to this version\' }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_placeholder.html",'<div class="placeholder" ng-class="[\'annotation_placeholder\', {\'annotation_placeholder--hide\': !showCondition}]">\n  <div class="annotation_label" ng-hide="noLabel">\n    {{:: placeholder_title || (\'annotation.community_brand_name\' | i18n) }}\n  </div>\n\n  <div class="rich_text_formatting placeholder-pulsing_content u-top_margin">\n    <placeholder-text></placeholder-text>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_share_menu.html",'<div class="ellipsis_menu gray_container">\n  <div class="u-bottom_margin">\n    <facebook-share-button\n      url="$ctrl.annotation.share_url"\n      variants="{ \'showText\': true }"\n    ></facebook-share-button>\n    <twitter-share-button\n      url="$ctrl.annotation.share_url"\n      variants="{ \'showText\': true }"\n      message="$ctrl.annotation.twitter_share_message"\n    ></twitter-share-button>\n  </div>\n  <div class="ellipsis_menu-row">\n    <label for="share_url_{{ $ctrl.annotation.id }}" class="text_label ellipsis_menu-label">Share URL</label>\n    <input\n      id="share_url_{{ $ctrl.annotation.id }}"\n      class="square_input ellipsis_menu-input"\n      value="{{ $ctrl.annotation.share_url }}"\n      readonly\n      select-all-on-click\n    />\n    <div\n      class="square_button"\n      copy-to-clipboard="$ctrl.annotation.share_url"\n      text-to-show-after-copy="Copied!"\n    >Copy</div>\n  </div>\n  <div class="ellipsis_menu-row">\n    <label for="embed_content_{{ $ctrl.annotation.id }}" class="text_label ellipsis_menu-label">Embed</label>\n    <input\n      id="embed_content_{{ $ctrl.annotation.id }}"\n      class="square_input ellipsis_menu-input"\n      value="{{ $ctrl.annotation.embed_content }}"\n      readonly\n      select-all-on-click\n    />\n    <div\n      class="square_button"\n      copy-to-clipboard="$ctrl.annotation.embed_content"\n      text-to-show-after-copy="Copied!"\n    >Copy</div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_sidebar.html",'<div\n  class="annotation_sidebar_arrow"\n  position-beside="$ctrl.lyrics_positioning_target"\n  apply-annotation-arrow-class\n  ng-show="referent && !referent.stub"\n>\n  <svg src="left_arrow.svg"></svg>\n</div>\n\n<div\n  class="u-relative"\n  ng-class="{\'nganimate-fade_slide_from_left\': referent}"\n  position-beside="$ctrl.lyrics_positioning_target"\n  position-for-maximum-visibility=":: true"\n  click-outside="ctrl.close()"\n  suppress-click-outside-if-handled\n>\n  <div class="annotation_sidebar_unit" ng-show="referent && referent.stub">\n    <annotation-placeholder></annotation-placeholder>\n  </div>\n\n  <div\n    class="annotation_sidebar_unit"\n    ng-class="{\'annotation_sidebar_unit--center_items\': ctrl.can_create_referent_from_selection() || sidebar.signing_up}"\n    ng-if="(!ctrl.referent_creation_failed && ctrl.can_create_referent_from_selection() && !referent) || sidebar.signing_up"\n  >\n    <button ng-if="!ctrl.user_signed_in" class="square_button" ng-hide="sidebar.signing_up" ng-click="sidebar.signing_up = true" ng-bind="\'annotation.sign_up_to_annotate\' | i18n"></button>\n    <authentication-form ng-if="sidebar.signing_up" header-text="\'annotation.sign_up_to_annotate\' | i18n"></authentication-form>\n\n    <add-annotation\n      ng-if="ctrl.can_create_referent_from_selection()"\n      creating-referent="$ctrl.creating_referent"\n      can-add-pinned-annotation="can_perform(\'add_pinned_annotation_to\', song)"\n      can-add-community-annotation="can_perform(\'add_community_annotation_to\', song)"\n      song="song"\n      annotation="annotation"\n      start-new-community-referent="ctrl.start_new_referent_annotation({community: true})"\n      start-new-referent="ctrl.start_new_referent_annotation()"\n      enable-waiting-class="::true"\n    ></add-annotation>\n  </div>\n\n  <div\n    class="annotation_sidebar_unit annotation_sidebar_unit--error"\n    ng-if="ctrl.referent_creation_failed"\n  >\n    <div class="u-vertical_margins">\n      <div class="text_label text_label--red u-half_bottom_margin">Error Saving</div>\n      Something went wrong and your work may not be saved. Please copy your work and reload the page to try again.\n    </div>\n  </div>\n\n  <div\n    ng-if="!ctrl.referent_creation_failed && ctrl.can_create_annotation_type_on_referent(\'verified\')"\n    class="annotation_sidebar_unit annotation_sidebar_unit--verified"\n  >\n    <square-item-and-iq event_type="created_pinned_annotation">\n      <button class="square_button square_button--green" ng-click="ctrl.add_pinned_annotation()">\n        {{::\'annotation.new_verified_prompt\' | i18n}}\n      </button>\n    </square-item-and-iq>\n  </div>\n\n  <div\n    ng-if="referent && !ctrl.referent_creation_failed"\n    ng-repeat="annotation in referent.annotations | filter:{_deleted: \'!\'} track by annotation.id"\n    class="annotation_sidebar_unit"\n    ng-class="{\'annotation_sidebar_unit--verified\': annotation.pinned}"\n    empty-copy-content="referent.fragment_from_lyrics"\n    show-arrow-at-offset\n  >\n    <annotation\n      object="annotation"\n      referent="referent"\n      variants="{showAd: true}"\n      on-dirty="ctrl.annotation_dirty = true"\n      on-clean="ctrl.annotation_dirty = false"\n    ></annotation>\n  </div>\n\n  <div\n    ng-if="!ctrl.referent_creation_failed && ctrl.can_create_community_annotation_on_referent()"\n    class="annotation_sidebar_unit"\n  >\n    <square-item-and-iq event_type="created_community_annotation">\n      <button class="square_button square_button" ng-click="ctrl.add_community_annotation()">\n        {{::\'annotation.new_community_prompt\' | i18n}}\n      </button>\n    </square-item-and-iq>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("answer.html",'<div ng-show="$ctrl.show_answer() && $ctrl.answer.answer_source">\n  <div class="verified_answer">\n    <a ng-href="{{$ctrl.answer.answer_source.artist.url}}">\n      <div\n        class="verified_answer-artist_avatar user_avatar user_avatar--x_large clipped_background_image--background_fill"\n        clipped-background-image=":: $ctrl.answer.answer_source.artist.image_url"\n      ></div>\n    </a>\n\n    <div class="verified_answer-main">\n      <a\n        class="text_label verified_answer-artist"\n        ng-href="{{$ctrl.answer.answer_source.artist.url}}"\n      >\n        {{$ctrl.answer.answer_source.artist.name}}\n        <span ng-if="!$ctrl.answer.answer_source.source_name">:</span>\n      </a>\n\n      <span\n        ng-if="$ctrl.answer.answer_source.source_name"\n        class="tag_label tag_label--lowercase tag_label--gray_background"\n      >via {{ $ctrl.answer.answer_source.source_name }}</span>\n\n      <standard-rich-content\n        html="$ctrl.answer.body.html"\n        watch-images-loaded="$ctrl.answer.body.html"\n        open-links-in-new-window\n        handle-intra-page-links\n        variants="{\'no_vertical_margins\': true}"\n      ></standard-rich-content>\n\n      <div ng-if="$ctrl.answer.editorial_state == \'sourced\'" class="verified_answer-attribution">\n        <a\n          target="_blank"\n          ng-href="{{$ctrl.answer.answer_source.source_url}}"\n          class="text_label text_label--button text_label--purple"\n        >\n          <span ng-if="$ctrl.answer.answer_source.source_name !== \'Billboard\'">via {{$ctrl.answer.answer_source.source_name}}</span>\n          <span ng-if="$ctrl.answer.answer_source.source_name === \'Billboard\'">\n            read the full interview on\n            <svg src="billboard.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3"></svg>\n          </span>\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div ng-show="$ctrl.show_answer() && !$ctrl.answer.answer_source">\n  <standard-rich-content\n    html="$ctrl.answer.body.html"\n    watch-images-loaded="$ctrl.answer.body.html"\n    open-links-in-new-window\n    handle-intra-page-links\n    variants="{\'no_vertical_margins\': true}"\n  ></standard-rich-content>\n</div>\n\n<div ng-if="$ctrl.show_blank_answer_message()">\n  <em>This question does not yet have an answer.</em>\n</div>\n\n<form\n  name="answer_form"\n  ng-if="$ctrl.show_answer_edit_form()"\n  ng-submit="$ctrl.finish_editing()"\n  ng-model-options="{updateOn: \'submit blur\'}"\n  submit-on-cmd-enter\n  dirtyable\n>\n  <div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label"\n  >{{ error }}</div>\n\n  <square-item-and-iq\n    ng-if="$ctrl.answer._editing._form_active || !$ctrl.variants.no_answer_prompt"\n    show-pill="!$ctrl.answer._editing._form_active && !$ctrl.answer.id"\n    iq-params="$ctrl.iq_api.answer"\n    variants="{full_width: true}"\n  >\n    <textarea\n      required\n      ng-autofocus="$ctrl.answer._editing._form_active"\n      autosize-init-on-focus\n      ng-focus="$ctrl.start_editing()"\n      ng-model="$ctrl.answer._editing.markdown"\n      class="square_input square_input--full_width square_input--single_line_height"\n      placeholder="{{ \'answer.placeholder\' | i18n }}"\n    ></textarea>\n  </square-item-and-iq>\n\n  <label\n    ng-if="$ctrl.can(\'update_answer_source\', $ctrl.question) && $ctrl.answer._editing._form_active"\n    class="square_checkbox u-half_top_margin"\n  >\n    <input\n      type="checkbox"\n      stop-propagation="click"\n      ng-checked="$ctrl.answer.answer_source || $ctrl.source_form_open"\n      ng-click="$ctrl.source_form_open = !$ctrl.source_form_open"\n      mousetrap-input\n    >\n    <div class="text_label">Add source?</div>\n  </label>\n\n  <label\n    ng-if="$ctrl.can(\'pin\', $ctrl.question) && $ctrl.answer._editing._form_active && !$ctrl.source_form_open && !$ctrl.question_is_pinned()"\n    class="square_checkbox u-half_top_margin"\n  >\n    <input\n      type="checkbox"\n      ng-model="$ctrl.answer._editing.pin_question"\n      ng-model-options="{updateOn: \'default\'}"\n      ng-init="$ctrl.answer._editing.pin_question = true"\n    >\n    <div class="text_label">Pin this answer?</div>\n  </label>\n\n  <div ng-if="$ctrl.source_form_open && $ctrl.can(\'update_answer_source\', $ctrl.question)">\n    <input\n      required\n      autocomplete-with="artist"\n      ng-model="$ctrl.answer.answer_source.artist_name"\n      class="square_input square_input--full_width u-half_top_margin"\n      placeholder="Artist name"\n    />\n    <input\n      ng-model="$ctrl.answer.answer_source.source_name"\n      class="square_input square_input--full_width u-half_top_margin"\n      placeholder="Source"\n    />\n    <input\n      ng-model="$ctrl.answer.answer_source.source_url"\n      class="square_input square_input--full_width u-half_top_margin"\n      placeholder="Source URL"\n    />\n  </div>\n\n  <div class="u-small_top_margin" ng-show="$ctrl.answer._editing._form_active">\n    <square-item-and-iq\n      show-pill="!$ctrl.answer.id"\n      iq-params="$ctrl.iq_api.answer"\n    >\n      <button\n        type="submit"\n        class="square_button"\n        ng-class="{\'square_button--waiting\': $ctrl.disable_saving_with}"\n        ng-disabled="$ctrl.disable_saving_with"\n      >{{ $ctrl.disable_saving_with || \'Save\' }}</button>\n    </square-item-and-iq>\n    <span\n      ng-click="$ctrl.cancel_editing()"\n      class="square_button square_button--transparent square_button--gray"\n      ng-hide="$ctrl.disable_saving_with"\n    >Cancel</span>\n  </div>\n</form>\n\n<div class="question-footer">\n  <voting\n    ng-if="$ctrl.show_answer()"\n    object="$ctrl.answer"\n    variants="{\'hide_upvote_text\': true}"\n    type="answer"\n    on-unauthorized="$ctrl.prompt_auth = true"\n    vote-total-clicked="$ctrl.show_voters = !$ctrl.show_voters"\n    class="u-half_right_margin"\n  ></voting>\n\n  <div\n    class="annotation_label"\n    ng-if="$ctrl.show_contributors()"\n    ng-click="$ctrl.toggle_contributors()"\n  >\n    <span class="annotation_label-underline">\n      {{ $ctrl.question.contributors_count }} {{ \'terms.contributor\' | i18n:{count:$ctrl.question.contributors_count} }}\n    </span>\n  </div>\n</div>\n\n<voters ng-if="$ctrl.show_voters" type="answer" object="$ctrl.answer"></voters>\n\n<authentication-form\n  ng-if="$ctrl.prompt_auth"\n  on-cancel="$ctrl.prompt_auth = false"\n  variants="{display_in_context: true}"\n></authentication-form>\n\n<div ng-if="$ctrl.showing_contributors">\n  <leaderboard collection="$ctrl.answer.authors"></leaderboard>\n  <div ng-if="$ctrl.question.author" class="leaderboard_footer u-half_top_margin">\n    Asked by\n    <a ng-if="$ctrl.question.author.url" ng-href="{{$ctrl.question.author.url}}">{{$ctrl.question.author.name}}</a>\n    <span ng-if="!$ctrl.question.author.url">{{$ctrl.question.author.name}}</span>\n    <time-ago time="$ctrl.question.created_at"></time-ago>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("apple_match_evaluations_page.html",'<div class="apple_match_evaluations_page">\n  <div class="column_layout u-xx_large_vertical_margins">\n    <div class="column_layout-column_span--half">\n      <song-preview song="$ctrl.song"></song-preview>\n    </div>\n    <div class="column_layout-column_span--half">\n      <iframe\n        allow="autoplay *; encrypted-media *;"\n        frameborder="0"\n        width="100%"\n        sandbox="allow-forms allow-popups allow-same-origin allow-scripts"\n        ng-src="{{ $ctrl.apple_embed_url }}"\n        ng-if="$ctrl.apple_embed_url"\n      ></iframe>\n      <div\n        class="metadata_unit"\n        ng-if="$ctrl.apple_albums.length > 0"\n      >\n        <span class="metadata_unit-label">Apple albums:</span>\n        <span class="metadata_unit-info">\n          <span ng-repeat="album in $ctrl.apple_albums">\n            <a ng-href="{{ album.url }}">{{ album.name }}</a>{{ !$last ? \',\' : \'\' }}\n          </span>\n        </span>\n      </div>\n      <h2 ng-if="!$ctrl.apple_embed_url">No apple song matched.</h2>\n      <div class="apple_match_evaluation--form square_form">\n        <textarea\n          class="square_input square_form-standard_element_margin"\n          ng-model="$ctrl.model.notes"\n          placeholder="Details on the match (Why is it bad? What\'s the right apple url? Is it good, but borderline?)"\n          ng-autofocus\n        ></textarea>\n        <div\n          ng-if="$ctrl.evaluation.state != \'pending\'"\n          class="u-width_100 text_label square_form-standard_element_margin"\n          ng-class="{\n            good: \'text_label--green\',\n            bad: \'text_label--red\',\n          }[$ctrl.evaluation.state] || \'text_label--purple\'"\n        >Current State: {{ $ctrl.evaluation.state }}</div>\n        <button\n          ng-click="$ctrl.submit(\'good\')"\n          class="square_button square_button--green"\n          ng-class="{\'square_button--disabled\': $ctrl.saving == \'good\'}"\n        >\n          <placeholder-spinner ng-show="$ctrl.saving == \'good\'" variants=":: {inline: true}"></placeholder-spinner>\n          Mark good\n        </button>\n        <button\n          ng-click="$ctrl.submit(\'bad\')"\n          class="square_button square_button--red"\n          ng-class="{\'square_button--disabled\': $ctrl.saving == \'bad\'}"\n        >\n          <placeholder-spinner ng-show="$ctrl.saving == \'bad\'" variants=":: {inline: true}"></placeholder-spinner>\n          Mark bad\n        </button>\n        <button\n          ng-click="$ctrl.skip()"\n          class="square_button square_button--purple"\n          ng-class="{\'square_button--disabled\': $ctrl.saving == \'skip\'}"\n        >\n          <placeholder-spinner ng-show="$ctrl.saving == \'skip\'" variants=":: {inline: true}"></placeholder-spinner>\n          Skip!\n        </button>\n      </div>\n      <expandable-container class="u-display_block u-top_margin" title="Match Instructions">\n        <ul class="u-bullet_list apple_match_instructions">\n          <li>If the audio is <em>different</em>, mark it bad. You don\'t have to listen to the actual audio, just determine whether the song is of a type that could reasonably thought off as having different audioremixes, radio edits, live versions, etc.</li>\n          <li>If the <em>Apple</em> song is on a compilation, re-release, or "greatest hits" album and the Genius one is not, mark it <em>good</em> with a note.</li>\n          <li>If there is a better <em>Genius</em> song we could have matched, mark it <em>good</em> with a note. For example, a 100 view pressburg duplicate vs 10k view actual page.</li>\n        </ul>\n      </expandable-container>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("apple_music_player.html",'<div\n  class="apple_music_player_desktop_positioning_container"\n  ng-class="{\n    \'apple_music_player_desktop_positioning_container--visible\': $ctrl.in_apple_music_deal,\n  }"\n>\n  <div class="apple_music_player_iframe_wrapper">\n    <div ng-if="!$ctrl.loaded" class="apple_music_player_iframe_wrapper-loader">\n      <placeholder-spinner></placeholder-spinner>\n    </div>\n    <iframe\n      ng-style="{width: $ctrl.dismissed ? \'185px\' : \'100vw\'}"\n      class="apple_music_player_iframe"\n      width="100%"\n      height="64px"\n      sandbox="allow-scripts allow-same-origin allow-popups allow-forms allow-popups-to-escape-sandbox"\n      allow="encrypted-media"\n      ng-src="{{$ctrl.src}}"\n      amp-iframe-resizable\n      on-amp-iframe-resize="$ctrl.on_resize({width})"\n      on-iframe-load="$ctrl.loaded = true"\n    ></iframe>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_admin_bar.html",'<div\n  ng-if="\n    $ctrl.can(\'edit_article\', $ctrl.video) ||\n    $ctrl.can(\'edit\', $ctrl.article)\n  "\n  class="article_info_and_action_box u-top_margin"\n>\n  <span\n    ng-if="$ctrl.video ? $ctrl.can(\'edit_article\', $ctrl.video) : $ctrl.can(\'edit\', $ctrl.article)"\n    class="article_info_and_action_box-action"\n    title="Edit (shift+e)"\n    ng-click="$ctrl.edit_article()"\n  >\n    <svg src="pencil.svg" class="inline_icon inline_icon--large_reading_size"></svg>\n    <kb\n      shortcut="shift+e"\n      action="$ctrl.edit_article()"\n    ></kb>\n  </span>\n  <span\n    ng-if="$ctrl.video ? $ctrl.can(\'destroy_article\', $ctrl.video) : $ctrl.can(\'destroy\', $ctrl.article)"\n    class="article_info_and_action_box-action u-clickable"\n    ng-click="$ctrl.delete()"\n    title="Delete"\n  >\n    <svg src="x.svg" class="inline_icon inline_icon--red inline_icon--large_reading_size"></svg>\n  </span>\n  <a\n    ng-if="$ctrl.can(\'create_article\', $ctrl.current_user)"\n    class="article_info_and_action_box-action"\n    href="/articles/new"\n    title="New article"\n  >\n    <svg src="new_message.svg" class="inline_icon inline_icon--large_reading_size"></svg>\n  </a>\n  <span\n    ng-if="$ctrl.can(\'manage_articles\', $ctrl.current_user)"\n    class="article_info_and_action_box-action"\n    ng-click="$ctrl.manage_articles()"\n    title="Manage articles (shift+m)"\n  >\n    <svg src="two_documents.svg" class="inline_icon inline_icon--large_reading_size"></svg>\n    <kb\n      shortcut="shift+m"\n      action="$ctrl.manage_articles()"\n    ></kb>\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_authors.html",'<div class="article_credit text_label u-vertical_margins">\n  By:\n  <span ng-repeat-start="author in $ctrl.authors track by author.id">{{ $first ? "" : $last ? " &amp; " : ", "}}</span>\n  <a ng-repeat-end ng-href="{{author.url}}" class="text_label--button">{{ author.name }}</a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_content_actions.html",'<div class="article_info_and_action_box">\n  <div class="article_info_and_action_box-action article_info_and_action_box-action--no_padding article_info_and_action_box-action--fill_box">\n    <facebook-share-button\n      url="$ctrl.object.url"\n      variants="{\'transparent\': true}"\n    ></facebook-share-button>\n  </div>\n\n  <div class="article_info_and_action_box-action article_info_and_action_box-action--no_padding article_info_and_action_box-action--fill_box">\n    <twitter-share-button\n      url="$ctrl.object.url"\n      message="$ctrl.object.twitter_share_message"\n      variants="{\'transparent\': true}"\n    ></twitter-share-button>\n  </div>\n\n  <div class="article_info_and_action_box-action article_info_and_action_box-action--no_padding article_info_and_action_box-action--fill_box">\n    <pyong-button\n      type="{{$ctrl.type}}"\n      object="$ctrl.object"\n      on-unauthorized="$ctrl.prompt_auth = true"\n      variants="{\'transparent\': true}"\n    ></pyong-button>\n  </div>\n\n  <div\n    ng-if="!$ctrl.variants.two_rows"\n    class="article_info_and_action_box-action article_info_and_action_box-action--no_padding article_info_and_action_box-action--double_width"\n  >\n    <voting\n      type="{{$ctrl.type}}"\n      object="$ctrl.object"\n      on-unauthorized="$ctrl.prompt_auth = true"\n    ></voting>\n  </div>\n</div>\n\n<div\n  ng-if="$ctrl.variants.two_rows"\n  class="u-vertical_margins u-text_center"\n>\n  <voting\n    vote-total-clicked="$ctrl.toggle_voters()"\n    type="{{$ctrl.type}}"\n    object="$ctrl.object"\n    on-unauthorized="$ctrl.prompt_auth = true"\n  ></voting>\n\n  <voters ng-if="$ctrl.showing_voters" type="{{$ctrl.type}}" object="$ctrl.object"></voters>\n</div>\n\n<modal-window\n  ng-if="$ctrl.prompt_auth"\n  on-close="$ctrl.prompt_auth = false"\n  variants="{narrow_width: true}"\n>\n  <authentication-form></authentication-form>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_contributor_badge.html",'<a ng-href="{{:: $ctrl.contributor.url }}" class="user_badge">\n  <div\n    class="user_avatar user_avatar--large u-quarter_right_margin"\n    clipped-background-image="$ctrl.contributor.avatar.small.url"\n  ></div>\n  <div class="user_badge-text">\n    <div class="user_badge-text-emphasis">by {{:: $ctrl.contributor.name }}</div>\n    <div>@{{:: $ctrl.contributor.login }}</div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_index_arrangeable.html",'<div class="articles_list_arrangeable-container">\n  <div\n    ng-if="$ctrl.error"\n    class="form_message form_message--error text_label"\n  >{{ $ctrl.error }}</div>\n  <div class="articles_list-header">\n    <div>Homepage Arrangement</div>\n    <div class="articles_list-controls">\n      <button\n        ng-if="$ctrl.arrange_mode_locked()"\n        class="square_button articles_list-button"\n        ng-click="$ctrl.enable_rearranging()"\n      >Enable Arranging</button>\n      <button\n        ng-if="!$ctrl.arrange_mode_locked()"\n        class="square_button square_button--green articles_list-button"\n        ng-class="{\'square_button--waiting\': $ctrl.arrange_mode_saving()}"\n        ng-click="$ctrl.save_arrangement()"\n        ng-disabled="$ctrl.arrange_mode_saving()"\n      >{{ $ctrl.arrange_mode_saving() ? "Saving..." : "Save Arrangement" }}</button>\n      <button\n        ng-if="$ctrl.arrange_mode_active()"\n        class="square_button articles_list-button"\n        ng-click="$ctrl.cancel_rearrange()"\n        ng-disabled="$ctrl.arrange_mode_saving()"\n      >Cancel Rearranging</button>\n    </div>\n  </div>\n  <div ng-repeat="slot_section in $ctrl.slot_sections track by slot_section.name">\n    <div class="articles_list-section_title">\n      {{ slot_section.name }}\n    </div>\n    <div\n      ng-if="slot_section.error"\n      class="form_message form_message--error text_label"\n    >{{ slot_section.error }}</div>\n    <div ng-repeat="slot in slot_section.slots track by slot">\n      <div\n        class="articles_list-visibility_label"\n        ng-if="slot === \'home_top_hero\'"\n      >Desktop & Mobile:</div>\n      <div\n        class="articles_list-visibility_label"\n        ng-if="slot === \'home_desktop_second\'"\n      >Desktop Only:</div>\n      <div\n        class="editable_article-row-entry-container"\n        ng-if="$ctrl.article_for_slot(slot)"\n        drag-and-drop\n        on-drop="$ctrl.place_article_into_slot(data.id, slot)"\n      >\n        <div\n          ng-if="$ctrl.arrange_mode_active()"\n          class="editable_article-row-entry"\n          drag-and-drop="$ctrl.article_for_slot(slot)"\n          draggable="{{ $ctrl.arrange_mode_active() }}"\n        >\n          <article-index-item\n            article="$ctrl.article_for_slot(slot)"\n            unfeature="$ctrl.clear_slot(slot)"\n            disable-go-to-article="true"\n          ></article-index-item>\n        </div>\n        <article-index-item\n          article="$ctrl.article_for_slot(slot)"\n          ng-if="!$ctrl.arrange_mode_active()"\n        ></article-index-item>\n      </div>\n      <div\n        ng-if="!$ctrl.article_for_slot(slot)"\n        class="articles_list-empty_slot-container"\n        ng-class="{\'articles_list-home-promo-unit\': slot === \'home_promo_unit\'}"\n        drag-and-drop\n        cant-drop="slot === \'home_promo_unit\'"\n        on-drop="$ctrl.place_article_into_slot(data.id, slot)"\n      >\n        <span>{{ $ctrl.slot_holder_text($index + 1, slot) }}</span>\n      </div>\n    </div>\n  </div>\n\n  <div class="articles_list-section_title">\n    Recently Published\n  </div>\n\n  <div\n    ng-repeat="article in $ctrl.unfeatured_articles() track by article.id"\n  >\n    <div\n      ng-if="$ctrl.arrange_mode_active()"\n      class="editable_article-row-entry"\n      drag-and-drop="article"\n      draggable="true"\n    >\n      <article-index-item\n        article="article"\n        feature="$ctrl.place_article_into_slot(article.id, \'home_top_hero\')"\n        feature-video="$ctrl.place_article_into_slot(article.id, \'home_video_hero\')"\n        disable-go-to-article="true"\n      ></article-index-item>\n    </div>\n    <article-index-item\n      article="article"\n      ng-if="!$ctrl.arrange_mode_active()"\n    ></article-index-item>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_index_item.html",'<div\n  class="articles_list-item"\n  ng-class="{\'articles_list-item--unpublished\': $ctrl.article.draft}"\n>\n  <div ng-click="$ctrl.goToArticle()" class="articles_list-item-link">\n    <div class="articles_list-item-information">\n      <div ng-if="$ctrl.can(\'edit\')" class="text_label text_label--x_small_text_size">\n        <div ng-if="$ctrl.article.published">Published</div>\n        <div ng-if="$ctrl.article.scheduled">Scheduled</div>\n        <div ng-if="$ctrl.article.draft">Draft</div>\n      </div>\n\n      <div class="text_label text_label--x_small_text_size">\n        {{ $ctrl.article.article_type }}\n      </div>\n\n      <div ng-if="$ctrl.article.published_at" class="text_label text_label--x_small_text_size">\n        <span class="u-no_break">{{$ctrl.article.published_at | human_readable_datetime}}</span> \n        <span class="u-no_break">\n          <time-ago time="$ctrl.article.published_at"></time-ago>\n        </span>\n      </div>\n\n      <div class="articles_list-item-article_info">\n        <div class="articles_list-item-article_info-title">{{$ctrl.article.title}}</div>\n        <div ng-if="$ctrl.article.dek" class="articles_list-item-article_info-dek">{{$ctrl.article.dek}}</div>\n      </div>\n\n      <div class="text_label text_label--x_small_text_size">\n        {{$ctrl.article.author_list_for_display}}\n      </div>\n\n      <div\n        ng-if="$ctrl.article.hero_caption"\n        class="text_label text_label--x_small_text_size"\n        ng-bind-html="$ctrl.article.hero_caption.html"\n      ></div>\n    </div>\n    <div class="articles_list-item-actions">\n      <a\n        ng-if="$ctrl.can(\'edit\')"\n        ng-href="/articles/{{$ctrl.article.id}}/edit"\n        class="square_button square_button--small_text_size"\n      >Edit</a>\n      <a\n        ng-if="$ctrl.displayFeatureButton()"\n        ng-click="$ctrl.feature()"\n        class="square_button square_button--small_text_size"\n        prevent-default-click\n      >Feature</a>\n      <a\n        ng-if="$ctrl.displayFeatureVideoButton()"\n        ng-click="$ctrl.featureVideo()"\n        class="square_button square_button--small_text_size"\n        prevent-default-click\n      >Feature Video</a>\n      <a\n        ng-if="$ctrl.displayUnfeatureButton()"\n        ng-click="$ctrl.unfeature()"\n        prevent-default-click\n        class="square_button square_button--small_text_size"\n      >Un-Feature</a>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_page.html",'<div class="white_container white_container--no_padding">\n  <div class="grid_layout">\n    <div class="grid_layout--full u-xxx_large_bottom_margin">\n      <dfp-ad\n        class="u-display_block"\n        name="desktop_article_leaderboard"\n        ad-classes="[\'u-xx_large_top_margin\', \'dfp_unit--centered_billboard\']"\n      ></dfp-ad>\n\n      <div ng-if="$ctrl.article_params" class="u-flex_directive u-xx_large_vertical_margins">\n        <form action="{{$ctrl.article_update_url}}" method="post" class="u-width_100">\n          <input type="hidden" name="_method" value="put">\n          <input type="hidden" name="authenticity_token" value="{{$ctrl.authenticity_token}}">\n          <hidden-fields key="article" value="$ctrl.article_params"></hidden-fields>\n          <input type="submit" class="square_button square_button--purple u-width_100" value="Save Changes">\n        </form>\n\n        <form action="{{$ctrl.article_edit_url}}" method="post" class="u-width_100">\n          <input type="hidden" name="authenticity_token" value="{{$ctrl.authenticity_token}}">\n          <hidden-fields key="article" value="$ctrl.article_params"></hidden-fields>\n          <input type="submit" class="square_button u-width_100 u-left_margin" value="Continue Editing">\n        </form>\n      </div>\n\n      <h1 class="article_title article_title--outlined u-xx_large_top_margin">{{$ctrl.page_data.article.title}}</h1>\n\n      <div class="u-text_center u-small_top_margin u-x_large_bottom_margin">\n        <div class="article_info_bar">\n          <div class="article_type">{{$ctrl.page_data.article.article_type}}</div>\n\n          <div class="article_info_bar-text u-half_left_margin">\n            <div ng-if="$ctrl.page_data.article.published">\n              {{$ctrl.page_data.article.published_at * 1000 | date:\'mediumDate\'}}\n            </div>\n            <div ng-if="!$ctrl.page_data.article.published && $ctrl.page_data.article.published_at">\n              Scheduled for {{$ctrl.page_data.article.published_at | human_readable_datetime}}\n            </div>\n            <div ng-if="!$ctrl.page_data.article.published && !$ctrl.page_data.article.published_at">\n              Draft\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div ng-if="$ctrl.page_data.article.sponsored" class="u-top_margin u-x_large_bottom_margin">\n        <div ng-if="!$ctrl.page_data.article.sponsor_link" class="article_sponsor">\n          <span class="text_label text_label--gray">{{$ctrl.page_data.article.sponsor_phrase || (\'article.sponsor.phrase\' | i18n)}}</span>\n          <div\n            class="article_sponsor-logo"\n\t    ng-class="{\'article_sponsor-logo--larger\': $ctrl.page_data.article.sponsor_image_style === \'larger\'}"\n            clipped-background-image="$ctrl.page_data.article.sponsor_image"\n            clipped-background-image-fit-height\n          ></div>\n        </div>\n\n        <a\n          ng-if="$ctrl.page_data.article.sponsor_link"\n          ng-href="{{$ctrl.page_data.article.sponsor_link}}"\n          target="_blank"\n          class="article_sponsor"\n        >\n          <span class="text_label text_label--gray">{{$ctrl.page_data.article.sponsor_phrase || (\'article.sponsor.phrase\' | i18n)}}</span>\n          <div\n            class="article_sponsor-logo"\n\t    ng-class="{\'article_sponsor-logo--larger\': $ctrl.page_data.article.sponsor_image_style === \'larger\'}"\n            clipped-background-image="$ctrl.page_data.article.sponsor_image"\n            clipped-background-image-fit-height\n          ></div>\n        </a>\n      </div>\n\n      <div class="article_hero" ng-class="{\'article_hero--full_width\': $ctrl.page_data.article.hero_style === \'full\'}">\n        <video\n          brightcove\n          ng-if="$ctrl.video.provider === \'brightcove\'"\n          object="$ctrl.video"\n          player-name="standard"\n          class="article_hero-asset video-js"\n          ng-attr-poster="{{$ctrl.page_data.article.preview_image}}"\n          autoplays-on-page-load="true"\n        ></video>\n\n        <div ng-if="$ctrl.video.provider !== \'brightcove\'">\n          <div\n            ng-if="!$ctrl.player_state.is_loaded"\n            clipped-background-image="$ctrl.page_data.article.preview_image"\n            clipped-background-image-fit-height\n            class="article_hero-asset article_hero-asset--background_image"\n          ></div>\n\n          <embedly-player\n            controls="true"\n            ng-if="$ctrl.video"\n            ng-show="$ctrl.player_state.is_loaded"\n            media="$ctrl.video"\n            player-class="article_hero-embedly_player_container"\n            yields-api="$ctrl.player_api = api"\n            yields-state="$ctrl.player_state = state"\n            allow-full-screen="true"\n            preload="true"\n          ></embedly-player>\n        </div>\n      </div>\n\n      <div\n        ng-if="$ctrl.page_data.article.hero_caption"\n        class="u-text_center text_label text_label--light text_label--x_small_text_size text_label--gray text_label--underline_links u-top_margin"\n        ng-bind-html="$ctrl.page_data.article.hero_caption.html"\n      ></div>\n    </div>\n\n    <div class="grid_layout--sidebar">\n      <div class="article_info_and_action_box article_info_and_action_box--full_padding u-bottom_margin">\n        <div>\n          <div\n            ng-repeat="author in $ctrl.page_data.article.authors track by author.id"\n            ng-class="{\'u-bottom_margin\': !$last}"\n          >\n            <article-contributor-badge object="author"></article-contributor-badge>\n          </div>\n        </div>\n      </div>\n\n      <article-admin-bar article="$ctrl.page_data.article"></article-admin-bar>\n\n      <div class="u-top_margin">\n        <article-content-actions\n          type="article"\n          object="$ctrl.page_data.article"\n          variants="{\'two_rows\': true}"\n        ></article-content-actions>\n      </div>\n\n\n      <div\n        ng-repeat="(section, options) in {artists: {title: \'Artists\', link_title: \'name\'}, albums: {title: \'Albums\', link_title: \'name\'}, songs: {title: \'Songs\', link_title: \'title\'}} track by section"\n        ng-if="$ctrl.page_data.article[\'referenced_\' + section].length > 0" class="u-xx_large_vertical_margins"\n      >\n        <div class="text_label text_label--light text_label--x_small_text_size text_label--gray u-bottom_margin">Referenced {{options.title}}</div>\n\n        <div ng-repeat="reference in $ctrl.page_data.article[\'referenced_\' + section] track by reference.id" class="u-half_bottom_margin">\n          <a ng-href="{{reference.url}}" class="article_reference_link" target="_blank">\n            {{reference[options.link_title]}}\n          </a>\n        </div>\n      </div>\n\n      <div ng-if="!$ctrl.page_data.article.published && $ctrl.page_data.article.preview_url" class="u-xx_large_vertical_margins">\n        <div class="text_label text_label--light text_label--x_small_text_size text_label--gray u-half_bottom_margin">External Preview URL</div>\n        <a ng-href="{{$ctrl.page_data.article.preview_url}}" class="article_reference_link article_reference_link--no_text_transform" target="_blank">{{$ctrl.page_data.article.preview_url}}</a>\n      </div>\n\n      <dfp-ad\n        class="u-display_block"\n        name="desktop_article_sidebar"\n        ad-classes="[\'u-vertical_margins\']"\n      ></dfp-ad>\n    </div>\n\n    <div class="grid_layout--main u-xxx_large_bottom_margin">\n      <div>\n        <h2 class="article_dek">\n          <hang-initial-quote content="$ctrl.page_data.article.dek"></hang-initial-quote>\n        </h2>\n\n        <standard-rich-content\n          html="$ctrl.page_data.article.body.html"\n          variants="{article: true}"\n          open-links-in-new-window\n        ></standard-rich-content>\n      </div>\n\n      <div tracking="scroll_into_view" tracking-event="Article Page View Footer"></div>\n\n      <div class="u-xxx_large_top_margin">\n        <div class="u-large_bottom_margin">\n          <span class="text_label text_label--x_small_text_size text_label--gray">Share</span>\n        </div>\n\n        <div class="u-top_margin">\n          <article-content-actions type="article" object="$ctrl.page_data.article"></article-content-actions>\n        </div>\n\n        <div class="u-xxx_large_top_margin u-large_bottom_margin">\n          <span class="text_label text_label--x_small_text_size text_label--gray">Comments</span>\n        </div>\n\n        <comments\n          variants="{no_background: true}"\n          type="articles"\n          commentable="$ctrl.page_data.article"\n        ></comments>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div ng-if="$ctrl.page_data.article.suggested_articles.length" class="grid_layout grid_layout--gray_background">\n  <div class="grid_layout--full u-xxx_large_vertical_margins">\n    <div class="article_title u-text_uppercase u-xx_large_bottom_margin">Next Up</div>\n    <div class="article_next_up">\n      <a\n        ng-repeat="suggested_article in $ctrl.page_data.article.suggested_articles track by suggested_article.id"\n        ng-href="{{suggested_article.url}}"\n        class="article_next_up-article"\n        ng-class="{\'u-xx_large_left_margin\': !$first}"\n      >\n        <div\n          clipped-background-image="suggested_article.preview_image"\n          ng-attr-clipped-background-image-fit-height="{{$ctrl.page_data.article.suggested_articles.length === 1 ? \'true\' : undefined}}"\n          class="article_next_up-article-image"\n        ></div>\n        <div class="u-text_center u-vertical_margins">\n          <div class="article_type">{{suggested_article.article_type}}</div>\n        </div>\n        <div\n          class="article_next_up-article-title"\n          ng-class="{\'article_next_up-article-title--large\': $ctrl.page_data.article.suggested_articles.length === 1 }"\n        >{{suggested_article.title}}</div>\n      </a>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_badge.html",'<a ng-href="{{:: $ctrl.artist.url}}" class="user_badge">\n  <div class="user_avatar user_avatar--x_small" clipped-background-image=":: $ctrl.artist.image_url"></div>\n  <div class="user_badge-text">\n    <span class="user_badge-login">{{:: $ctrl.artist.name }}</span>\n    <svg ng-if=":: $ctrl.artist.is_verified" class="checky" src="checky.svg"></svg>\n    <span class="user_badge-iq tag_label tag_label--yellow_background" ng-if=":: $ctrl.artist.iq">{{:: $ctrl.artist.iq | number:0 }}</span>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_opportunities.html",'<scrollable-data\n  src="$ctrl.scrollable_data"\n  repeat-with="opp"\n  scroll-mechanism="infinite_scroll"\n>\n  <contribution-opportunity\n    contribution-opportunity="opp"\n    source="artist_opportunities"\n  ></contribution-opportunity>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_songs.html",'<div class="square_input_and_icon">\n  <svg src="magnifying_glass.svg" class="square_input_and_icon-icon"></svg>\n  <input\n    ng-change="$ctrl.search()"\n    ng-model="$ctrl.search_text"\n    type="text"\n    class="square_input"\n    placeholder="Search {{ $ctrl.artist.name }} Songs"\n    ng-autofocus="true"\n  >\n</div>\n\n<div class="profile_list_item profile_list_item--large_padding">\n  <span class="text_label text_label--x_small_text_size text_label--gray">\n    <span ng-if="$ctrl.search_text.length">\n      <span ng-if="$ctrl.searching">Searching...</span>\n      <span ng-if="!$ctrl.searching">\n        {{ \'profile_page.songs.search\' | i18n:{count: $ctrl.artist_song_infinite_scrollable_data.total_entries} }}\n      </span>\n    </span>\n    <span ng-if="!$ctrl.search_text.length">{{:: \'profile_page.songs.all\' | i18n }}</span>\n  </span>\n  <span ng-if="!$ctrl.search_text.length" class="u-float_right u-clickable">\n    <span class="text_label text_label--pink text_label--x_small_text_size" ng-click="$ctrl.sort_dropdown_opened = !$ctrl.sort_dropdown_opened" click-outside="$ctrl.sort_dropdown_opened = false">\n      {{\'sort.\' + $ctrl.sort_method | i18n}}\n      <svg class="inline_icon inline_icon--short inline_icon--up_1 inline_icon--pink" src="down_arrow.svg"></svg>\n    </span>\n    <div\n      class="tooltip tooltip--tiny tooltip--no_padding tooltip--dock_top_right"\n      ng-show="$ctrl.sort_dropdown_opened"\n      ng-click="$ctrl.sort_dropdown_opened = false"\n    >\n      <div class="tooltip-list_item" ng-click="$ctrl.sort_songs_by(\'popularity\');" ng-show="$ctrl.sort_method !== \'popularity\'">\n        {{:: \'sort.popularity\' | i18n }}\n      </div>\n      <div class="tooltip-list_item" ng-click="$ctrl.sort_songs_by(\'title\');" ng-show="$ctrl.sort_method !== \'title\'">\n        {{:: \'sort.title\' | i18n }}\n      </div>\n      <div class="tooltip-list_item" ng-click="$ctrl.sort_songs_by(\'release_date\');" ng-show="$ctrl.sort_method !== \'release_date\'">\n        {{:: \'sort.release_date\' | i18n }}\n      </div>\n      <div class="tooltip-list_item" ng-click="$ctrl.sort_songs_by(\'unreviewed_annotations\');" ng-show="$ctrl.can(\'sort_artist_songs\', $ctrl.artist) && $ctrl.sort_method !== \'unreviewed_annotations\'">\n        {{:: \'sort.unreviewed_annotations\' | i18n }}\n      </div>\n    </div>\n  </span>\n</div>\n<scrollable-data src="$ctrl.artist_song_infinite_scrollable_data" scroll-mechanism="infinite_scroll" repeat-with="song">\n  <div class="profile_list_item" ng-class="{\'profile_list_item--last\': $last}">\n    <mini-song-card object="song" variants="{small: true, show_unreviewed_count: $ctrl.sort_method == \'unreviewed_annotations\'}"></mini-song-card>\n  </div>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_songs_and_albums.html",'<div ng-if="$ctrl.artist_songs.length > 0" class="text_label text_label--gray u-xx_large_top_margin u-half_bottom_margin">Popular {{$ctrl.artist.name}} songs</div>\n\n<div class="mini_card_grid">\n  <div class="mini_card_grid-song" ng-if="$ctrl.artist_songs.length > 0" ng-repeat="song in $ctrl.artist_songs">\n    <mini-song-card object="song" artist="$ctrl.artist"></mini-song-card>\n  </div>\n</div>\n\n<div\n  ng-if="$ctrl.artist_has_more_songs && $ctrl.artist_songs.length > 0"\n  class="full_width_button u-clickable"\n  ng-class="{\'u-bottom_margin\' :$ctrl.artist_songs.length >= 10}"\n  ng-click="$ctrl.open_all_songs_pane()"\n>\n  Show all songs by {{ $ctrl.artist.name }} <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="right_arrow.svg"></svg>\n</div>\n\n<div ng-if="$ctrl.artist_songs && $ctrl.artist_songs.length == 0">\n  <div class="text_label text_label--gray u-xx_large_vertical_margins">\n    There are no songs by this artist on Genius\n  </div>\n</div>\n\n<div ng-if="$ctrl.artist_albums.length" class="text_label text_label--gray u-xx_large_top_margin u-half_bottom_margin">Popular {{$ctrl.artist.name}} albums</div>\n\n<album-grid\n  albums="$ctrl.artist_albums"\n  artist="$ctrl.artist"\n  count="6"\n></album-grid>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_songs_modal.html",'<modal-window\n  ng-if="$ctrl.modal_open"\n  on-close="$ctrl.modal_open = undefined; $ctrl.artist_song_infinite_scrollable_data.reset()"\n  variants="{narrow_width: true, white_background: true}"\n>\n  <artist-songs artist="$ctrl.artist"></artist-songs>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_tooltip.html",'<div class="tooltip user_info_with_actions u-half_vertical_margins u-half_horizontal_margins" stop-propagation="click">\n  <div class="user_badge">\n    <div class="user_avatar user_avatar--xx_large" clipped-background-image="$ctrl.artist.image_url"></div>\n    <div class="user_badge-text">\n      <div class="user_badge-login_and_iq user_badge-login_and_iq--large">\n        <a href="{{ $ctrl.artist.url }}" class="user_badge-login">{{ $ctrl.artist.name }}</a>\n        <span class="user_badge-iq tag_label tag_label--yellow_background" ng-if=":: $ctrl.artist.iq">{{ $ctrl.artist.iq | number:0 }}</span>\n      </div>\n      <div class="user_info_with_actions-user_badge_actions" ng-if=":: $ctrl.artist.user">\n        <a ng-href="{{$ctrl.artist.user.url}}" target="_blank" class="square_button square_button--green">See verified profile</a>\n      </div>\n    </div>\n  </div>\n  <div class="u-top_margin placeholder" ng-if="!$ctrl.artist.description">\n    <div class="placeholder-pulsing_content">\n      <placeholder-text></placeholder-text>\n    </div>\n  </div>\n  <div class="rich_text_formatting u-top_margin" ng-if="$ctrl.artist.description_preview">{{ $ctrl.artist.description_preview | truncateToBoundary:150:{with_ellipsis: true} }}</p>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_verification.html",'<form\n  name="form"\n  ng-submit="form.$valid && $ctrl.verify()"\n  dirtyable\n  exports-form-api="$ctrl.form = api"\n>\n  <div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label"\n  >{{ error }}</div>\n\n  <div ng-if="!$ctrl.artist" class="square_form-input_and_label u-vertical_margins">\n    <div class="text_label">Verify this user as</div>\n    <input\n      required\n      autocomplete-with="artist"\n      ng-model="$ctrl.name"\n      class="square_input square_form-standard_element_margin"\n      placeholder="Artist name"\n    />\n  </div>\n  <div ng-if="$ctrl.artist" class="u-vertical_margins">\n    Verified as <a ng-href="{{$ctrl.artist.url}}">{{$ctrl.artist.name}}</a>\n  </div>\n\n  <div class="square_form-input_and_label u-vertical_margins">\n    <div class="text_label">Verification Level</div>\n    <div ng-repeat="role in $ctrl.user_verification_roles" class="u-x_small_vertical_margins">\n      <label>\n        <input\n          required\n          name="role"\n          ng-model="$ctrl.role"\n          value="{{role}}"\n          type="radio"\n        />\n        {{role | roleHumanName}}\n      </label>\n    </div>\n  </div>\n\n  <button\n    class="square_button square_button--green u-small_bottom_margin"\n    ng-class="{\'square_button--waiting\': $ctrl.updating()}"\n    ng-disabled="$ctrl.updating()"\n    type="submit"\n  >{{ $ctrl.verifying ? \'Verifying\' : \'Verify\' }}</button>\n  <button\n    ng-if="$ctrl.artist"\n    ng-click="$ctrl.unverify()"\n    class="square_button square_button--red u-small_bottom_margin"\n    ng-class="{\'square_button--waiting\': $ctrl.updating()}"\n    ng-disabled="$ctrl.updating()"\n  >{{ $ctrl.unverifying ? \'Unverifying\' : \'Unverify\' }}</button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("audio_source_label.html",'<p>\n<small>{{ $ctrl.external_song.title }} <strong>on</strong> {{$ctrl.external_song.album}} <strong>by</strong> <span ng-repeat="artist in $ctrl.external_song.artists">{{ artist }}{{$last ? \'\' : \', \'}}</span> <strong>from</strong> <a ng-href="{{$ctrl.external_song.provider_url}}" target="_blank">{{ $ctrl.external_song.provider | capitalize }}</a></small>\n</p>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("authentication_form.html",'<div class="authentication_form" ng-class="{\'authentication_form--display_in_context\': variants.display_in_context}">\n  <a ng-click="on_cancel()" href="#" prevent-default-click class="u-float_right" ng-if="variants.display_in_context">\n    <svg class="inline_icon inline_icon--purple inline_icon--up_2" src="x.svg"></svg>\n  </a>\n\n  <form ng-submit="ctrl.submit()" ng-model-options="{updateOn: \'submit\'}" submit-on-cmd-enter>\n    <div class="text_label text_label--purple form_section_label">\n      <span ng-if="!header_text">Sign {{ ctrl.signing_in ? \'in to\' : \'up for\' }} Genius</span>\n      <span ng-if="header_text">{{ header_text }}</span>\n    </div>\n\n    <div ng-if="preamble_text" class="u-half_vertical_margins">\n      <p>{{ preamble_text }}</p>\n    </div>\n\n    <div ng-if="include_social !== false">\n      <div class="u-half_vertical_margins">\n        <a href="/auth/facebook" http-method="post" set-desired-location prevent-default-click class="square_button square_button--facebook">\n          <span class="square_button-padded_icon">\n            <svg class="inline_icon" src="facebook.svg"></svg>\n          </span>\n          Sign in with Facebook\n        </a>\n      </div>\n\n      <div class="u-half_vertical_margins">\n        <a href="/auth/twitter" http-method="post" set-desired-location prevent-default-click class="square_button square_button--twitter">\n          <span class="square_button-padded_icon">\n            <svg class="inline_icon" src="twitter.svg"></svg>\n          </span>\n          Sign in with Twitter\n        </a>\n      </div>\n\n      <div class="u-half_vertical_margins">\n        <a href="/auth/google" http-method="post" set-desired-location prevent-default-click class="square_button square_button--google">\n          <span class="square_button-padded_icon">\n            <svg class="inline_icon" src="google.svg"></svg>\n          </span>\n          Sign in with Google\n        </a>\n      </div>\n    </div>\n\n    <div class="u-half_vertical_margins" ng-show="!ctrl.show_email_fields && !ctrl.signing_in">\n      <a href="#" ng-click="ctrl.show_email_fields = true" prevent-default-click class="square_button square_button--email">\n        <span class="square_button-padded_icon">\n          <svg class="inline_icon" src="envelope.svg"></svg>\n        </span>\n        Sign up with email\n      </a>\n    </div>\n\n    <div ng-show="ctrl.show_email_fields || ctrl.signing_in">\n      <div class="hr" ng-if="include_social !== false"></div>\n      <div class="text_label">\n        <ul ng-if="ctrl.errors" class="form_message form_message--error">\n          <li ng-repeat="error in ctrl.errors">\n            {{error}}\n          </li>\n        </ul>\n      </div>\n\n      <input\n        name="login"\n        type="text"\n        ng-autofocus="ctrl.signing_in"\n        required\n        placeholder="Username"\n        ng-model="user_session.login"\n        class="square_input square_form-standard_element_margin"\n      >\n      <input\n        name="email"\n        type="email"\n        required\n        placeholder="Email"\n        ng-if="!ctrl.signing_in"\n        ng-model="user_session.email"\n        class="square_input square_form-standard_element_margin"\n      >\n      <input\n        name="password"\n        type="password"\n        required\n        placeholder="Password"\n        ng-model="user_session.password"\n        class="square_input square_form-standard_element_margin"\n      >\n\n      <div class="rich_text_formatting" ng-if=\'!ctrl.signing_in\'>\n        <small class="square_form-standard_element_margin">\n          By clicking &ldquo;Sign Up&rdquo;, you are indicating that you have\n          read and agree to the <a href=\'/static/terms\' target="_blank">Terms of Service</a>.\n        </small>\n      </div>\n\n      <button\n        ng-disabled="user_session_form.$invalid || ctrl.saving"\n        class="square_button"\n        ng-class="{\'square_button--disabled\': user_session_form.$invalid, \'square_button--waiting\': ctrl.saving}"\n        type="submit"\n      >{{ ctrl.signing_in ? \'Sign In\' : \'Sign Up\'}}</button>\n    </div>\n\n    <div class="u-top_margin">\n      <a\n        href="/signup"\n        ng-if="ctrl.signing_in"\n        prevent-default-click\n        ng-click="ctrl.toggle_signup_signin()"\n        class="text_label text_label--button text_label--gray"\n      >Create an account</a>\n\n      <a\n        href="/password_resets/new"\n        ng-if="ctrl.signing_in"\n        class="text_label text_label--button text_label--gray"\n      >I forgot my password</a>\n\n      <a\n        href="/login"\n        ng-if="!ctrl.signing_in"\n        prevent-default-click\n        ng-click="ctrl.toggle_signup_signin()"\n        class="text_label text_label--button text_label--gray"\n      >Already have an account? Sign in here</a>\n    </div>\n  </form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("autocomplete_result.html",'<strong ng-if="::data._new">Create new:</strong> {{:: $getDisplayText()}}\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("autocomplete_tags_input.html",'<tags-input\n  ng-disabled="disabled"\n  min-length="1"\n  template="autocomplete_word.html"\n  key-property="{{ display_property }}"\n  display-property="{{ display_property }}"\n  replace-spaces-with-dashes="false"\n  ng-model="bindTo"\n  placeholder="{{ placeholder() }}"\n  class="{{ inputClasses }}"\n  add-from-autocomplete-only="true"\n  prevent-default-keydown="13"\n>\n  <auto-complete\n    source="autocomplete($query)"\n    template="autocomplete_result.html"\n    min-length="1"\n    max-results-to-show="{{:: max_results }}"\n  ></auto-complete>\n</tags-input>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("autocomplete_word.html",'<span class="autocomplete-word" ng-bind=":: $getDisplayText()"></span>\n<svg src="x.svg" class="tag_item-remove_button" ng-click="$removeTag()"></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("breadcrumbs.html",'<ul class="breadcrumbs">\n  <li\n    ng-repeat="item in $ctrl.heirarchy"\n    ng-class="{\'breadcrumb-current_page\': $last}"\n    class="breadcrumb"\n    itemscope\n    itemtype="http://data-vocabulary.org/Breadcrumb"\n  >\n    <a ng-href="{{ item.url }}" itemprop="url">\n      <span itemprop="title">{{ item.title }}</span>\n    </a>\n  </li>\n</ul>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("click_to_load.html",'<div ng-if="loading" ng-transclude></div>\n<span ng-if="!loading" ng-click="load()" class="square_button" ng-bind="message"></button>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("collapsible_content.html",'<div\n  ng-class="{\'referent_container-excerpt_container\': $ctrl.max_height}"\n  ng-style="{maxHeight: $ctrl.max_height}"\n  yields-bounding-box-height="$ctrl.content_height_changed(height)"\n  ng-transclude\n></div>\n\n<p class="text_label u-clickable" ng-if="$ctrl.max_height" ng-click="$ctrl.expand()">\n  {{ $ctrl.text }}\n  <svg class="inline_icon inline_icon--short inline_icon--up_1" src="down_arrow.svg"></svg>\n</p>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comment.html",'<div\n  class="comment"\n  ng-class="{\n    \'comment--animate_slide_down comment--animate_flash\': comment._new,\n    \'comment--no_top_divider\': variants.first_element_in_container,\n    \'comment--no_top_margin\': variants.first_element_in_container\n  }"\n>\n  <div ng-if="is_removed()" class="dashed_background_message">\n    This {{comment.disposition}} has been {{comment.deleted_at ? \'deleted\' : (\'comment.state.\' + comment.state | i18n)}}.\n  </div>\n\n  <user-badge-and-timestamp\n    size="x_small"\n    user="comment.author"\n    anonymous-user="comment.anonymous_author"\n    time="comment.created_at"\n    pinned-role="comment.pinned_role"\n  ></user-badge-and-timestamp>\n\n  <a class="comment-reason" target="_blank" ng-href="{{ comment.reason.context_url }}" ng-if="comment.reason">\n    {{ \'reason.sentence_intro\' | i18n }}\n    <span class="comment-reason-title">{{ \'reason.inline.\' + comment.reason.name | i18n }}</span>\n  </a>\n\n  <standard-rich-content html="comment.body.html" ng-show="!!comment.body.html"></standard-rich-content>\n\n  <authentication-form\n    on-cancel="ctrl.hide_auth = true"\n    ng-if="comment._new && comment.anonymous_author && !ctrl.hide_auth"\n    user-session="comment.anonymous_author"\n    social="false"\n    sign-in="false"\n    show-email="true"\n    header-text="\'comment.signup_prompt_header\' | i18n"\n    preamble-text="\'comment.signup_prompt_preamble\' | i18n"\n    variants="{display_in_context: true}"\n  ></authentication-form>\n\n  <div ng-if="!is_removed()">\n    <voting\n      vote-total-clicked="toggle_voters()"\n      type="comment"\n      object="comment"\n      on-unauthorized="ctrl.prompt_auth = true"\n      variants="{\'hide_upvote_text\': true}"\n    ></voting>\n\n    <div class="u-float_right">\n      <div\n        ng-if="can_perform(\'accept\')"\n        ng-click="perform_action(\'accept\', \'accepted\')"\n        confirm="Are you sure?"\n        class="square_button square_button--gray square_button--x_small_text_size square_button--transparent"\n      >Accept</div>\n      <div\n        ng-if="can_perform(\'reject\')"\n        ng-click="perform_action(\'reject\', \'rejected\')"\n        class="square_button square_button--gray square_button--x_small_text_size square_button--transparent"\n      >Reject</div>\n      <square-item-and-iq\n        ng-if="can_perform(\'integrate\')"\n        event_type="you_integrated_a_comment"\n      >\n        <div\n          ng-click="integrate()"\n          class="square_button square_button--gray square_button--x_small_text_size square_button--transparent"\n        >Integrate</div>\n      </square-item-and-iq>\n      <square-item-and-iq\n        ng-if="can_perform(\'archive\')"\n        event_type="you_archived_a_comment"\n      >\n        <div\n          ng-if="can_perform(\'archive\')"\n          ng-click="perform_action(\'archive\', \'archived\')"\n          class="square_button square_button--gray square_button--x_small_text_size square_button--transparent"\n        >Archive</div>\n      </square-item-and-iq>\n\n      <div\n        ng-if="can_perform(\'destroy\') || can_perform(\'mark_spam\')"\n        class="square_button square_button--transparent square_button--gray"\n        tether-drop-target\n      >\n        <svg\n          src="down_arrow.svg"\n          class="inline_icon inline_icon--up_2 inline_icon--short inline_icon--gray"\n        ></svg>\n\n        <tether-drop show-on="click" position="bottom center">\n          <div class="tooltip tooltip--no_padding tooltip--tiny" stop-propagation="click">\n            <span\n              class="tooltip-list_item"\n              ng-if="can_perform(\'mark_spam\')"\n              ng-click="perform_action(\'mark_spam\', \'marked_spam\')"\n              confirm="Are you sure you want to mark this comment as spam?"\n            >Mark spam!</span>\n            <span\n              class="tooltip-list_item"\n              ng-if="can_perform(\'destroy\')"\n              ng-click="destroy()"\n              confirm="Are you sure?"\n            >Delete</span>\n          </div>\n        </tether-drop>\n      </div>\n    </div>\n\n    <voters ng-if="showing_voters" type="comment" object="comment"></voters>\n  </div>\n\n  <authentication-form\n    ng-if="ctrl.prompt_auth"\n    on-cancel="ctrl.prompt_auth = false"\n    variants="{display_in_context: true}"\n  ></authentication-form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comment_form.html",'<form\n  name="form"\n  ng-submit="form.$valid && ctrl.save()"\n  ng-model-options="{updateOn: \'submit\'}"\n  class="u-large_bottom_margin"\n  submit-on-cmd-enter\n  dirtyable\n>\n  <div\n    ng-if="form.$submitted && form.$invalid"\n    class="form_message form_message--error text_label"\n  >{{:: \'comments.empty_validation\' | i18n}}</div>\n\n  <div ng-if="allowReasons">\n    <div ng-if="ctrl.show_reasons_form()" slide-down no-slide-when="ctrl.show_full_form_by_default || ctrl.show_reasons_by_default">\n      <reasons-toggle reason-changed="comment.reason = reason"></reasons-toggle>\n    </div>\n  </div>\n\n  <div ng-class="{\'u-quarter_top_margin u-small_bottom_margin\': ctrl.showing_full_form}">\n    <div class="square_input_with_avatar">\n      <div class="square_input_with_avatar-avatar" ng-if="!ctrl.showing_full_form && ctrl.current_user">\n        <div class="user_avatar user_avatar--small" clipped-background-image="ctrl.current_user.avatar.small.url"></div>\n      </div>\n      <div class="square_input_with_caret square_input_with_avatar-input">\n        <span\n          ng-if="allowReasons && ctrl.body_is_required() && ctrl.showing_full_form"\n          class="square_input_with_caret-caret"\n        ></span>\n        <textarea\n          mentionable\n          ng-required="ctrl.body_is_required()"\n          ng-model="comment.body.markdown"\n          ng-model-options="{updateOn: \'default\'}"\n          focus-on-change="comment.reason"\n          class="square_input square_input--full_width square_input--single_line_height"\n          ng-attr-placeholder="{{ textareaPlaceholder }}{{ ctrl.body_is_required() ? \'\' : \' (optional)\' }}"\n          ng-focus="ctrl.show_full_form()"\n          autosize-init-on-focus\n        ></textarea>\n      </div>\n    </div>\n\n    <div\n      ng-if="!ctrl.user_signed_in"\n      ng-show="ctrl.showing_full_form"\n    >\n      <input\n        required\n        ng-model="comment.name"\n        class="square_input square_input--full_width u-small_vertical_margins"\n        placeholder="Your name"\n      />\n      <input\n        required\n        ng-model="comment.email"\n        type="email"\n        class="square_input square_input--full_width"\n        placeholder="Your email address"\n      />\n    </div>\n  </div>\n\n  <div ng-show="ctrl.showing_full_form">\n    <button\n      class="square_button square_button--green"\n      ng-class="{\'square_button--waiting\': saving}"\n      ng-disabled="saving"\n      type="submit"\n      ng-bind="saving ? savingText : saveText"\n    ></button>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comment_list.html",'<div ng-repeat="comment in $ctrl.comments | filter:{_deleted:\'!true\'} track by comment.id">\n  <comment object="comment" variants="{first_element_in_container: $ctrl.variants.first_element_in_container && $first}"></comment>\n  <dfp-ad\n    ng-if="$ctrl.intersperse_ads && $index % 5 === 0"\n    instance-id="after-comment-{{ comment.id }}"\n    name="{{$ctrl.intersperse_ads}}"\n    ad-classes="[\'comment\']"\n  ></dfp-ad>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comments.html",'<div\n  ng-hide="$ctrl.prevent_compose && !$ctrl.visible_comments().length"\n  class="comments u-vertical_margins"\n  ng-class="{\'gray_container\': !$ctrl.variants.no_background}"\n>\n  <comment-form\n    ng-show="$ctrl.can_create_comment()"\n    on-save="$ctrl.save_comment(comment)"\n    save-text="Submit"\n    saving-text="Submitting"\n    textarea-placeholder="{{ \'comments.placeholder.\' + ($ctrl.are_suggestions ? \'genius_annotation\' : \'annotation\') | i18n }}"\n    allow-reasons="$ctrl.allow_reasons"\n    show-reasons-by-default="$ctrl.commentable.state === \'pending\'"\n    commentable="$ctrl.commentable"\n    on-dirty="$ctrl.on_dirty()"\n    on-clean="$ctrl.on_clean()"\n  ></comment-form>\n\n  <comment-list\n    commentable="commentable"\n    variants="{first_element_in_container: !$ctrl.can_create_comment()}"\n    intersperse-ads="{{$ctrl.intersperse_ads}}"\n    comments="$ctrl.comments"\n  ></comment-list>\n\n  <comments-placeholder ng-if="$ctrl._loading"></comments-placeholder>\n  <div\n    ng-if="$ctrl.has_next() && !$ctrl._loading"\n    ng-click="$ctrl.load_more()"\n    class="u-top_margin"\n  >\n    <span class="text_label text_label--button text_label--purple">Show More ({{$ctrl.commentable.comment_count - $ctrl.visible_comments().length}})</span>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comments_placeholder.html",'<div class="comment placeholder placeholder--slide_down">\n  <div class="comment-header">\n    <div class="comment-user_badge"><placeholder-user-badge size="x_small"></placeholder-user-badge></div>\n  </div>\n  <div class="comment-body rich_text_formatting placeholder-pulsing_content u-top_margin">\n    <placeholder-text></placeholder-text>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("component_date_input.html",'<div class="square_select_group">\n  <div class="square_select_group-single">\n    <select\n      ng-disabled="disabled"\n      ng-options="month.number as month.name for month in ctrl.months"\n      ng-model="ngModel.month"\n      ng-model-options="{updateOn: \'default\'}"\n      class="select_input"\n    >\n      <option value="" disabled selected>Month</option>\n    </select>\n  </div>\n  <span\n    class="square_select_group-separator u-clickable u-quarter_left_margin"\n    ng-click="ngModel.month = \'\'"\n  >\n    <svg src="x.svg" class="inline_icon inline_icon--gray"></svg>\n  </span>\n\n  <div class="square_select_group-single">\n    <select\n      ng-disabled="disabled"\n      ng-options="day as day for day in ctrl.days"\n      ng-model="ngModel.day"\n      ng-model-options="{updateOn: \'default\'}"\n      class="select_input"\n    >\n      <option value="" disabled selected>Day</option>\n    </select>\n  </div>\n  <span\n    class="square_select_group-separator u-clickable u-quarter_left_margin"\n    ng-click="ngModel.day = \'\'"\n  >\n    <svg src="x.svg" class="inline_icon inline_icon--gray"></svg>\n  </span>\n\n  <div class="square_select_group-single">\n    <select\n      ng-disabled="disabled"\n      ng-options="year as year for year in ctrl.years"\n      ng-model="ngModel.year"\n      ng-model-options="{updateOn: \'default\'}"\n      class="select_input"\n    >\n      <option value="" disabled selected>Year</option>\n    </select>\n  </div>\n  <span\n    class="square_select_group-separator u-clickable u-quarter_left_margin"\n    ng-click="ngModel.year = \'\'"\n  >\n    <svg src="x.svg" class="inline_icon inline_icon--gray"></svg>\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("compose_message.html",'<form\n  dirtyable\n  yields-is-dirty="yields_is_dirty({is_dirty: is_dirty})"\n  exports-form-api="ctrl.form = api"\n  class="conversation-compose_area"\n  ng-class="{\'conversation-compose_area--tall\': ctrl.new_message}"\n  ng-submit="ctrl.send()"\n  submit-on-cmd-enter\n>\n  <div class="conversation-compose_area-recipient" ng-if="ctrl.new_message">\n    <label for="recipient" class="text_label">To</label>\n    <input\n      ng-model="message.recipient"\n      autocomplete-with="user"\n      autofocus\n      class="square_input square_form-standard_element_margin"\n      placeholder="Enter the recipient\'s name"\n    ></input>\n  </div>\n\n  <div class="u-bottom_margin">\n    <span\n      class="text_label text_label--no_margin"\n      ng-class="{\'text_label--purple text_label--button\': ctrl.showing_markdown_preview}"\n      ng-click="ctrl.hide_markdown_preview()"\n    >Write</span>\n    <span\n      class="text_label text_label--no_margin u-small_horizontal_margins"\n      ng-class="{\'text_label--purple text_label--button\': !ctrl.showing_markdown_preview}"\n      ng-click="ctrl.show_markdown_preview()"\n    >Preview</span>\n  </div>\n\n  <div class="u-bottom_margin">\n    <div ng-if="error" class="form_message form_message--error">{{error}}</div>\n  </div>\n\n  <textarea\n    mentionable\n    ng-hide="ctrl.showing_markdown_preview"\n    focus-on-change="message.recipient_id && sending"\n    class="square_input square_input--full_width conversation-message_textarea"\n    placeholder="Enter your message"\n    ng-model="message.body"\n    ng-model-options="{debounce: 300}"\n  ></textarea>\n\n  <div\n    class="conversation-compose_area-markdown_preview"\n    ng-if="ctrl.markdown_preview_initialized"\n    ng-show="ctrl.showing_markdown_preview"\n  >\n    <div ng-cloak class="conversation-message conversation-message--right">\n      <div class="user_avatar user_avatar--medium" clipped-background-image="ctrl.current_user.avatar.small.url"></div>\n      <markdown-preview markdown-content="message.body"></markdown-preview>\n      <span class="conversation-message-timestamp">now</span>\n    </div>\n  </div>\n\n  <div class="u-small_top_margin">\n    <input\n      type="submit"\n      class="square_button square_button--purple modal_window-save_button"\n      ng-class="{\'square_button--disabled\': sending}"\n      ng-disabled="sending"\n      ng-value="sending ? \'Sending\' : \'Send Message\'"\n    />\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("contact_button.html",'<a href ng-click="$ctrl.open_contact_form = true" ng-bind="\'Contact us\'"></a>\n<modal-window ng-if="$ctrl.open_contact_form" on-close="$ctrl.close()">\n  <div class="u-text_center u-vertical_margins">\n    <a href="/press" class="text_label text_label--purple text_label--button">Press</a>\n    <a href="mailto:inquiry@genius.com" class="text_label text_label--purple text_label--button">Advertising</a>\n  </div>\n\n  <hr>\n\n  <div ng-if="$ctrl.success">\n    <div class="text_label u-vertical_margins">Feedback received! Thank you! :)</div>\n    <div ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Close</div>\n  </div>\n\n  <form\n      ng-if="!$ctrl.success"\n      ng-submit="$ctrl.submit()"\n      dirtyable\n  >\n    <div class="square_form-input_and_label">\n      <div class="text_label">Send us your feedback</div>\n      <textarea\n          class="square_input square_form-standard_element_margin"\n          ng-model="$ctrl.feedback_body"\n      ></textarea>\n    </div>\n\n    <div>\n      <button\n          class="square_button square_button--green u-small_bottom_margin"\n          ng-class="{\'square_button--waiting\': $ctrl.sending}"\n          ng-disabled="$ctrl.sending"\n          type="submit"\n      >Save</button>\n      <div ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Cancel</div>\n    </div>\n  </form>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("contribution_opportunity.html",'<div class="contribution_opportunity nganimate-fade_slide_out_right" ng-if="!$ctrl.optimistically_removed">\n  <div class="contribution_opportunity-content">\n    <div class="contribution_opportunity-header">\n      <inbox-line-item-action-icon action-name="\'created\'"></inbox-line-item-action-icon>\n      <div class="u-left_margin">\n        {{ \'contribution_opportunity.message.\' + $ctrl.contribution_opportunity.message.key | i18n }}\n        <a\n          ng-href="{{$ctrl.contribution_opportunity.target.url}}"\n          target="_blank"\n          ng-click="$ctrl.track_open($event)"\n        >{{ $ctrl.contribution_opportunity.message.params.context }}</a>\n      </div>\n    </div>\n    <div ng-switch="$ctrl.contribution_opportunity.message.key" class="u-large_top_margin">\n      <div ng-switch-when="answer_question">\n        <question\n          question="$ctrl.contribution_opportunity.target"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.question_api = api"\n          variants="{no_drop_down: true, no_answer_prompt: true, no_expansion: true}"\n        ></question>\n      </div>\n\n      <div ng-switch-when="review_annotation">\n        <standalone-referent\n          object="$ctrl.contribution_opportunity.target"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.annotation_api = api"\n          variants="{hide_moderation: true}"\n        ></standalone-referent>\n      </div>\n\n      <div ng-switch-when="missing_writer_artists_song">\n        <missing-metadata-form\n          missing-params="{writer_artists: \'autocomplete_artists\'}"\n          object="$ctrl.contribution_opportunity.target"\n          placeholder="e.g., Pharrell Williams, Sean Garrett"\n          type="song"\n          source="IQ Opps"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.missing_metadata_api = api"\n        ></missing-metadata-form>\n      </div>\n\n      <div ng-switch-when="missing_producer_artists_song">\n        <missing-metadata-form\n          missing-params="{producer_artists: \'autocomplete_artists\'}"\n          object="$ctrl.contribution_opportunity.target"\n          placeholder="e.g., J Dilla, No I.D."\n          type="song"\n          source="IQ Opps"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.missing_metadata_api = api"\n        ></missing-metadata-form>\n      </div>\n\n      <div ng-switch-when="missing_albums_song">\n        <missing-metadata-form\n          missing-params="{albums: \'autocomplete_albums\'}"\n          object="$ctrl.contribution_opportunity.target"\n          type="song"\n          source="IQ Opps"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.missing_metadata_api = api"\n        ></missing-metadata-form>\n      </div>\n\n      <div ng-switch-when="missing_release_date_song">\n        <missing-metadata-form\n          missing-params="{release_date_components: \'date_components\'}"\n          object="$ctrl.contribution_opportunity.target"\n          type="song"\n          source="IQ Opps"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.missing_metadata_api = api"\n        ></missing-metadata-form>\n      </div>\n\n      <div ng-switch-when="missing_media_song">\n        <missing-metadata-form\n          missing-params="{youtube_url: \'text\', soundcloud_url: \'text\'}"\n          object="$ctrl.contribution_opportunity.target"\n          type="song"\n          source="IQ Opps"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.missing_metadata_api = api"\n        ></missing-metadata-form>\n      </div>\n    </div>\n  </div>\n  <div ng-switch="$ctrl.contribution_opportunity.message.key" class="contribution_opportunity-actions">\n    <div ng-switch-when="answer_question">\n      <square-item-and-iq\n        ng-if="$ctrl.can(\'add_answer\')"\n        ng-click="$ctrl.question_api.answer()"\n        iq-params="$ctrl.iq_api.answer"\n      >\n        <span class="square_button square_button--green">Answer</span>\n      </square-item-and-iq>\n      <square-item-and-iq\n        ng-if="$ctrl.can(\'archive\')"\n        ng-click="$ctrl.question_api.archive()"\n        iq-params="$ctrl.iq_api.archive"\n      >\n        <span class="square_button square_button--gray square_button--transparent">Archive</span>\n      </square-item-and-iq>\n    </div>\n    <div ng-switch-when="review_annotation">\n      <square-item-and-iq\n        ng-click="$ctrl.annotation_api.accept()"\n        iq-params="$ctrl.iq_api.accept"\n      >\n        <span class="square_button square_button--green">Accept</span>\n      </square-item-and-iq>\n      <square-item-and-iq\n        ng-click="$ctrl.annotation_api.reject()"\n        iq-params="$ctrl.iq_api.reject"\n      >\n        <span class="square_button square_button--gray square_button--transparent">Reject</span>\n      </square-item-and-iq>\n    </div>\n    <div ng-if="[\'missing_writer_artists_song\', \'missing_producer_artists_song\', \'missing_albums_song\', \'missing_release_date_song\', \'missing_media_song\'].indexOf($ctrl.contribution_opportunity.message.key) !== -1">\n      <square-item-and-iq\n        ng-if="$ctrl.can(\'edit_anything\')"\n        ng-click="$ctrl.missing_metadata_api.edit()"\n        iq-params="$ctrl.iq_api.edit_metadata"\n      >\n        <span class="square_button square_button--green">Edit</span>\n      </square-item-and-iq>\n    </div>\n    <div class="u-text_right">\n      <a\n        ng-href="{{$ctrl.contribution_opportunity.target.url}}"\n        target="_blank"\n        ng-click="$ctrl.track_open($event)"\n        class="square_button square_button--gray square_button--transparent square_button--x_small_text_size"\n      >Open</a>\n      <span\n        ng-if="$ctrl.assignment"\n        ng-click="$ctrl.dismiss()"\n        class="square_button square_button--gray square_button--transparent square_button--x_small_text_size"\n      >Skip</span>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.submitted" class="local_overlay">\n    <div class="contribution_opportunity-completed_message">Completed!</div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("conversation_messages.html",'<div class="conversation">\n  <div class="text_label text_label--purple form_section_label">\n    Conversation with <a ng-href="{{ conversation.contacts[0].url }}" target="_blank">{{ conversation.contacts[0].name }}</a>\n  </div>\n\n  <div\n    class="conversation-message_list"\n    scroll-from-bottom\n    upwards-infinite-scroll="ctrl.load_next_page()"\n    infinite-scroll-disabled="!ctrl.should_paginate()"\n    scroll-to-bottom-when="messages.length > 0"\n    scroll-only-this-element\n  >\n    <placeholder-spinner ng-if="!finished_paginating" placeholder-classes="u-vertical_margins"></placeholder-spinner>\n    <div\n      ng-cloak\n      ng-repeat="message in messages track by message.id"\n      ng-class="{\n        \'conversation-message--left\': message.sender.id === conversation.contacts[0].id,\n        \'conversation-message--right\': message.sender.id !== conversation.contacts[0].id\n      }"\n      class="conversation-message"\n    >\n      <a ng-href="{{ message.sender.url }}">\n        <div class="user_avatar user_avatar--medium" clipped-background-image="message.sender.avatar.small.url"></div>\n      </a>\n      <standard-rich-content html="message.body.html"></standard-rich-content>\n      <span class="conversation-message-timestamp"><time-ago time="message.sent_at"></time-ago></span>\n    </div>\n  </div>\n\n  <compose-message\n    recipient="conversation.contacts[0]"\n    on-sent="ctrl.message_sent(message)"\n    yields-is-dirty="yields_is_dirty({is_dirty: is_dirty})"\n  ></compose-message>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("conversations.html",'<div infinite-scroll="ctrl.load_page()" infinite-scroll-disabled="!ctrl.should_paginate()">\n  <div ng-repeat="conversation in conversations track by conversation.id" ng-click="ctrl.open(conversation.id, $event)" class="feed_dropdown-item" ng-class="{\'feed_dropdown-item--unread\': conversation.unread}">\n    <div class="inbox_line_item">\n      <div class="inbox_line_item-avatars">\n        <div class="user_avatar user_avatar--medium" clipped-background-image="conversation.contacts[0].avatar.small.url"></div>\n        <span class="feed_dropdown-item-unread_indicator numbered_indicator" ng-if="conversation.unread">\n          {{ conversation.unread_messages_count }}\n        </span>\n      </div>\n      <div class="inbox_line_item-content">\n        <div class="inbox_line_item-content-sender">{{ conversation.contacts[0].name }}</div>\n        <span ng-if="conversation.latest_message.sender.id !== conversation.contacts[0].id">&lsh; </span>\n        <span ng-bind="conversation.latest_message.body_preview | truncateToBoundary:100:{with_ellipsis: true}"></span>\n      </div>\n      <div class="inbox_line_item-timestamp">\n        <time-ago time="conversation.latest_message.sent_at"></time-ago>\n      </div>\n    </div>\n    <modal-window\n      ng-if="open_conversation_id == conversation.id"\n      on-close="attempt_close(reason.close_button || !ctrl.is_form_dirty(), ctrl.close)"\n      variants="{full_height: !embed, no_margin: embed, internal_close: embed}"\n      content-dimensions="modal_dimensions"\n    >\n      <conversation-messages conversation="conversation" yields-is-dirty="ctrl.is_form_dirty = is_dirty"></conversation-messages>\n    </modal-window>\n  </div>\n\n  <div ng-if="!conversations.length && ctrl.all_pages_loaded" class="u-vertical_margins u-horizontal_margins">\n    No messages\n  </div>\n\n  <placeholder-spinner ng-if="!ctrl.all_pages_loaded" placeholder-classes="feed_dropdown-item"></placeholder-spinner>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("cosigns.html",'<div class="cosigns u-bottom_margin">\n  <a ng-repeat="user in annotation.cosigned_by" ng-href="{{ user.url }}" class="user_badge">\n    <div class="user_avatar" ng-class="{\'user_avatar--large\': user.is_meme_verified, \'user_avatar--medium\': !user.is_meme_verified}" clipped-background-image="user.avatar.medium.url"></div>\n    <div class="user_badge-text">\n      <div class="user_badge-subhead u-quarter_bottom_margin">Cosigned by</div>\n      <span class="user_badge-login">{{ user.name }}</span>\n      <svg class="checky" src="checky.svg" ng-if="user.is_meme_verified"></svg>\n    </div>\n  </a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("cover_art_form.html",'<div ng-if="$ctrl.error" class="form_message form_message--error text_label">\n  {{ $ctrl.error.message }}\n  <span ng-repeat="error in $ctrl.error.response.errors track by error"><br>{{ error }}</span>\n</div>\n\n<div class="text_label text_label--gray text_label--x_small_text_size u-small_bottom_margin">Drag to reorder</div>\n\n<div class="cover_art_form">\n  <div\n    ng-repeat="cover_art in $ctrl.visible_cover_arts() track by cover_art.id"\n    class="cover_art_form-cover_art_container"\n    drag-and-drop\n    on-drop="$ctrl.move_before(cover_art, data)"\n    cant-drop="$ctrl.cant_drop(cover_art)"\n  >\n    <div\n      class="cover_art_form-cover_art"\n      drag-and-drop="cover_art"\n      draggable="true"\n      on-dragstart="$ctrl.cover_art_being_dragged = cover_art"\n      on-dragend="$ctrl.cover_art_being_dragged = null"\n    >\n      <image-upload-button\n        default-image="cover_art.image_url"\n        on-file-picked="$ctrl.update(cover_art, url)"\n        allow-clear="$ctrl.can(\'destroy\', cover_art)"\n        clear-confirm="Are you sure you want to delete this cover art and its associated annotation?"\n        on-clear="$ctrl.destroy(cover_art)"\n        allow-crop-to-square="true"\n      ></image-upload-button>\n    </div>\n  </div>\n\n  <div\n    class="cover_art_form-cover_art_container"\n    drag-and-drop\n    on-drop="$ctrl.move_before(null, data)"\n    cant-drop="$ctrl.cover_art_being_dragged.id === $ctrl.visible_cover_arts()[$ctrl.visible_cover_arts().length - 1].id"\n  >\n    <div class="cover_art_form-cover_art">\n      <image-upload-button\n        on-file-picked="$ctrl.create(url)"\n        allow-crop-to-square="true"\n      ></image-upload-button>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.saving" class="local_overlay local_overlay--gray">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n</div>\n\n<button\n  class="square_button square_button--transparent square_button--gray"\n  ng-disabled="true"\n>{{$ctrl.autosaving || $ctrl.saving ? \'Saving\' : \'Saved\'}}</button>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("cover_art_modal.html",'<modal-window\n  on-close="$ctrl.close()"\n  variants="{window_width: true, width_of_contents: true, vertically_center_self: true}"\n>\n  <div class="cover_art_annotation">\n    <div class="cover_art_annotation-cover_art">\n      <div class="cover_art">\n        <img\n          class="cover_art-image"\n          sized-src="$ctrl.focused_cover_art().image_url"\n          class-for-browser="{msie: \'cover_art-image_ie\', _default: \'cover_art-image\'}"\n        ></img>\n      </div>\n      <div\n        ng-if="$ctrl.focused_cover_art_index() > 0"\n        class="cover_art_annotation-cover_art-arrow cover_art_annotation-cover_art-arrow--left"\n        ng-click="$ctrl.move_cover_art_focus(-1)"\n      >\n        <svg src="left_arrow.svg"></svg>\n        <kb shortcut="left" action="$ctrl.move_cover_art_focus(-1)"></kb>\n      </div>\n      <div\n        class="cover_art_annotation-cover_art-arrow cover_art_annotation-cover_art-arrow--right"\n        ng-if="$ctrl.focused_cover_art_index() < $ctrl.cover_arts().length - 1"\n        ng-click="$ctrl.move_cover_art_focus(1)"\n      >\n        <svg src="right_arrow.svg"></svg>\n        <kb shortcut="right" action="$ctrl.move_cover_art_focus(1)"></kb>\n      </div>\n    </div>\n    <div class="cover_art_annotation-annotation">\n      <description-referent\n        ng-if="$ctrl.focused_cover_art().description_annotation"\n        object="$ctrl.focused_cover_art().description_annotation"\n        variants="{force_genius_annotation_title: true}"\n      ></description-referent>\n      <placeholder-spinner ng-if="!$ctrl.focused_cover_art().description_annotation"></placeholder-spinner>\n\n      <authentication-form\n        ng-if="!$ctrl.user_signed_in && $ctrl.focused_cover_art().description_annotation.classification === \'needs_exegesis\'"\n        header-text="\'annotation.sign_up_to_annotate\' | i18n"\n      ></authentication-form>\n    </div>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("deleted_answer.html",'<div class="u-bottom_padding">\n  <div class="annotation_label">{{$ctrl.answer.question.body}}</div>\n\n  <standard-rich-content\n    html="$ctrl.answer.body.html"\n    watch-images-loaded="$ctrl.answer.body.html"\n    open-links-in-new-window\n    handle-intra-page-links\n    variants="{\'no_vertical_margins\': true}"\n  ></standard-rich-content>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("description_annotation.html",'<annotation\n  variants="{\n    isDescription: true,\n    hideComments: true,\n    truncate_content: variants.truncated,\n    force_genius_annotation_title: variants.force_genius_annotation_title\n  }"\n  object="referent.annotations[0]"\n  referent="referent"\n  annotatable-title="referent.annotatable.title"\n></annotation>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("detailed_song_search.html",'<div class="rich_text_formatting detailed_song_search">\n  <p class="detailed_song_search-error_message" ng-if="$ctrl.error">{{ $ctrl.error.message }}</p>\n  <input\n    ng-model="$ctrl.url"\n    placeholder="genius.com URL"\n    class="square_input square_input--full_width square_form-text_input half u-half_vertical_margins"\n  >\n\n  <input\n    ng-model="$ctrl.autocompleted_song"\n    autocomplete-with="song"\n    display-field="full_title"\n    placeholder="Search"\n    class="square_input square_input--full_width square_form-text_input half u-half_vertical_margins"\n  >\n    <table ng-if="$ctrl.song_data">\n      <tbody>\n        <tr>\n          <th class="detailed_song_search-table_cell">Title</th>\n          <td class="detailed_song_search-table_cell">\n            <a href="/songs/{{$ctrl.song_data.id}}" target="_blank">\n              {{ $ctrl.song_data.title }}\n            </a>\n          </td>\n        </tr>\n        <tr>\n          <th class="detailed_song_search-table_cell">Albums</th>\n          <td class="detailed_song_search-table_cell">\n            <ul class="detailed_song_search-table_artist_list">\n              <li ng-repeat="album in $ctrl.song_data.albums">\n                {{ album.name }}\n              </li>\n            </ul>\n          </td>\n        </tr>\n        <tr>\n          <th class="detailed_song_search-table_cell">Artists</th>\n          <td class="detailed_song_search-table_cell">\n            <ul class="detailed_song_search-table_artist_list">\n              <li ng-repeat="artist in $ctrl.song_data.artists">\n                {{ artist.name }}\n              </li>\n            </ul>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <button\n      ng-disabled="!$ctrl.song.id || $ctrl.saving"\n      ng-class="{\'square_button--disabled\': !$ctrl.song.id || $ctrl.saving}"\n      ng-click="$ctrl.submit({song: this.song})"\n      confirm="Are you sure?"\n      class="square_button square_button--green"\n    >{{ $ctrl.saving ? \'Updating...\' : \'Confirm\' }}</button>\n\n    <button\n      ng-click="$ctrl.cancel()"\n      class="square_button"\n    >Cancel</button>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("dfp_ad.html",'<div\n  ng-if="!$ctrl.no_ad"\n  class="dfp_unit {{$ctrl.compiled_ad_unit_classes()}}"\n>\n  <div\n    id="{{$ctrl.id}}"\n    class="dfp_unit-ad_container"\n    ng-style="!$ctrl.filled && {\n      \'width\': $ctrl.creative_size[0],\n      \'height\': $ctrl.creative_size[1]\n    }"\n  ></div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("edit_artist_profile.html",'<form\n  name="form"\n  ng-submit="form.$valid && $ctrl.update_artist()"\n  ng-model-options="{updateOn: \'submit\'}"\n  dirtyable\n>\n  <div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label"\n  >{{ error }}</div>\n\n  <div class="square_form">\n    <div ng-if="$ctrl.can(\'edit\')" class="square_form-input_and_label">\n      <div class="text_label">Artist Name</div>\n      <input\n        required\n        ng-model="$ctrl.editable_artist.name"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Artist\'s name"\n      />\n    </div>\n\n    <div ng-if="$ctrl.can(\'edit_names\')" class="square_form-input_and_label">\n      <div class="text_label">Alternate Names</div>\n      <div class="text_label text_label--x_small_text_size text_label--gray">\n        Separate multiple alternate names with commas\n      </div>\n      <input\n        ng-model="$ctrl.editable_artist.alternate_names"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Artist\'s alternate names"\n      />\n    </div>\n\n    <div class="square_form-input_and_label square_form-input_and_label--half_width" ng-if="$ctrl.can(\'edit_images\')">\n      <div class="text_label">Avatar</div>\n      <image-upload-button\n        default-image="$ctrl.editable_artist.image_url"\n        on-file-picked="$ctrl.editable_artist.image_url = url"\n        allow-crop-to-square="true"\n        variants="{avatar: true}"\n      ></image-upload-button>\n    </div>\n\n    <div class="square_form-input_and_label square_form-input_and_label--half_width" ng-if="$ctrl.can(\'edit_images\')">\n      <div class="text_label">Cover Art</div>\n      <image-upload-button\n        default-image="$ctrl.editable_artist.header_image_url"\n        on-file-picked="$ctrl.editable_artist.header_image_url = url"\n        variants="{dock_tooltip_right: true}"\n      ></image-upload-button>\n    </div>\n\n    <div ng-if="$ctrl.can(\'edit\')" class="square_form-input_and_label">\n      <div class="text_label">Instagram Name</div>\n      <input\n        ng-model="$ctrl.editable_artist.instagram_name"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Artist\'s instagram name"\n      />\n    </div>\n\n    <div ng-if="$ctrl.can(\'edit\')" class="square_form-input_and_label">\n      <div class="text_label">Twitter Name</div>\n      <input\n        ng-model="$ctrl.editable_artist.twitter_name"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Artist\'s twitter name"\n      />\n    </div>\n\n    <div ng-if="$ctrl.can(\'edit\')" class="square_form-input_and_label">\n      <div class="text_label">Facebook Name</div>\n      <input\n        ng-model="$ctrl.editable_artist.facebook_name"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Artist\'s facebook name"\n      />\n    </div>\n\n    <div\n      ng-if="$ctrl.can(\'edit_translation_artist\')"\n      class="square_form-standard_element_margin"\n    >\n      <div class="text_label">Translation Artist?</div>\n      <input\n        type="checkbox"\n        ng-model="$ctrl.editable_artist.translation_artist"\n      />\n    </div>\n\n    <div>\n      <button\n        class="square_button square_button--green u-small_bottom_margin"\n        ng-class="{\'square_button--waiting\': $ctrl.saving}"\n        ng-disabled="$ctrl.saving"\n        type="submit"\n      >Save</button>\n      <button ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Cancel</button>\n    </div>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("edit_user_email_preferences.html",'<form\n  name="form"\n  ng-submit="form.$valid && $ctrl.update_user()"\n  ng-model-options="{updateOn: \'submit\'}"\n  dirtyable\n>\n  <div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label"\n  >{{ error }}</div>\n\n  <div class="square_form">\n    <label for="{{preference}}" class="square_checkbox u-quarter_vertical_margins" ng-repeat="(preference, val) in $ctrl.editable_user.preferences track by preference">\n      <input id="{{preference}}" type="checkbox" ng-model="$ctrl.editable_user.preferences[preference]"/>\n      <span class="text_label u-half_right_margin">{{\'preference.\' + preference | i18n}}</span>\n      <span for="{{preference}}" class="text_label--gray u-display_block">{{\'preference.description.\' + preference | i18n}}</span>\n    </div>\n\n    <div class="u-vertical_margins">\n      <button\n        class="square_button square_button--green u-small_bottom_margin"\n        ng-class="{\'square_button--waiting\': $ctrl.saving}"\n        ng-disabled="$ctrl.saving"\n        type="submit"\n      >Save</button>\n      <button ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Cancel</button>\n    </div>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("edit_user_profile.html",'<form\n  name="form"\n  ng-submit="form.$valid && $ctrl.update_user()"\n  ng-model-options="{updateOn: \'submit\'}"\n  dirtyable\n>\n  <div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label"\n  >{{ error }}</div>\n\n  <div class="square_form">\n    <div class="square_form-input_and_label">\n      <div class="text_label">Username</div>\n      <div class="text_label text_label--x_small_text_size text_label--gray">\n        {{$ctrl.can(\'change_login\') ? \'You can only change this once a month\' : \'Moderators can\\\'t change their username\'}}\n      </div>\n      <input\n        required\n        ng-model="$ctrl.editable_user.login"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Username"\n        ng-disabled="!$ctrl.can(\'change_login\')"\n      />\n    </div>\n\n    <div ng-if="!$ctrl.user.artist" class="square_form-input_and_label square_form-input_and_label--half_width" ng-if="!$ctrl.disable_image_edit">\n      <div class="text_label">Avatar</div>\n      <image-upload-button\n        default-image="$ctrl.editable_user.photo_url"\n        on-file-picked="$ctrl.editable_user.photo_url = url"\n        allow-crop-to-square="true"\n        variants="{avatar: true}"\n      ></image-upload-button>\n    </div>\n\n    <div ng-if="!$ctrl.user.artist" class="square_form-input_and_label square_form-input_and_label--half_width" ng-if="!$ctrl.disable_image_edit">\n      <div class="text_label">Cover Art</div>\n      <image-upload-button\n        default-image="$ctrl.editable_user.custom_header_image_url"\n        on-file-picked="$ctrl.editable_user.custom_header_image_url = url"\n        variants="{dock_tooltip_right: true}"\n      ></image-upload-button>\n    </div>\n\n    <div class="square_form-input_and_label" ng-if="!$ctrl.disable_user_bio_edit">\n      <div class="text_label">Change Bio</div>\n      <editable-markdown\n        html="$ctrl.editable_user.about_me.html"\n        markdown="$ctrl.editable_user.about_me.markdown"\n        placeholder="{{:: \'profile_page.about_me.placeholder\' | i18n }}"\n      ></editable-markdown>\n    </div>\n\n    <div class="square_form-input_and_label">\n      <div class="text_label">Change Email</div>\n      <input\n        required\n        ng-model="$ctrl.editable_user.email"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Email"\n      />\n    </div>\n\n    <div class="square_form-input_and_label">\n      <div class="text_label">Change Password</div>\n      <input\n        ng-model="$ctrl.editable_user.password"\n        class="square_input square_form-standard_element_margin"\n        placeholder="New password"\n        type="password"\n      />\n    </div>\n\n    <div class="square_form-input_and_label">\n      <div class="text_label">Confirm Password</div>\n      <input\n        ng-model="$ctrl.editable_user.confirm_password"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Confirm password"\n        type="password"\n      />\n    </div>\n\n    <div>\n      <button\n        class="square_button square_button--green u-small_bottom_margin"\n        ng-class="{\'square_button--waiting\': $ctrl.saving}"\n        ng-disabled="$ctrl.saving"\n        type="submit"\n      >Save</button>\n      <button ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Cancel</button>\n    </div>\n  </div>\n</form>\n\n<user-identities user="$ctrl.user" editable="true"></user-identities>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("editable_markdown.html",'<div class="editable_markdown u-bottom_margin">\n  <textarea\n    ng-required="is_required"\n    ng-init="resize_textarea()"\n    ng-model="editable.markdown"\n    insertable-at-cursor="ctrl.insert_at_markdown_cursor = insertFn"\n    class="wysiwyg_input wysiwyg_input--full_width u-vertical_margins"\n    placeholder="{{ placeholder }}"\n    autofocus\n    ng-autofocus="true"\n    rows="8"\n  ></textarea>\n\n  <div class="editable_markdown-tools">\n    <div><span class="text_label text_label--gray editable_markdown-text_label_header">Tools:</span></div>\n    <div>\n      <span ng-click="ctrl.pick_image()" class="text_label text_label--purple editable_markdown-text_label">Add image</span>\n      <span ng-click="ctrl.show_formatting_help = !ctrl.show_formatting_help" class="text_label editable_markdown-text_label" ng-class="{\'text_label--purple\': !ctrl.show_formatting_help, \'text_label--gray\': ctrl.show_formatting_help}">Formatting help</span>\n      <a href="/Genius-how-genius-works-annotated" target="_blank" class="text_label text_label--purple editable_markdown-text_label" tabindex="-1">How to annotate</a>\n    </div>\n  </div>\n\n  <div class="gray_container u-vertical_margins" ng-show="ctrl.show_formatting_help">\n    <p>Add an image, video, or tweet by pasting the URL</p>\n    <pre class="gray_container rich_text_formatting u-vertical_margins"><code>http://genius.com/logo.png</code></pre>\n    <p>Add a link</p>\n    <pre class="gray_container rich_text_formatting u-vertical_margins"><code>[Check out my fave website](http://genius.com)</code></pre>\n    <p>Simple formatting</p>\n    <pre class="gray_container rich_text_formatting u-top_margin"><code>*Italicize*\n**Bold**\n&gt; Blockquote</code></pre>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("editable_tracklist.html",'<div ng-if="$ctrl.editing" class="u-bottom_margin">\n  <div\n    class="square_button square_button--green"\n    ng-click="$ctrl.save()"\n    ng-class="{\'square_button--disabled\': $ctrl.saving}"\n  >{{$ctrl.saving ? \'Saving\' : \'Save\'}}</div>\n  <div\n    class="square_button square_button--gray square_button--transparent"\n    ng-click="$ctrl.close()"\n    ng-class="{\'square_button--disabled\': $ctrl.saving}"\n  >Cancel</div>\n</div>\n\n<div ng-if="$ctrl.error" class="form_message form_message--error text_label">{{ $ctrl.error }}</div>\n\n<div class="editable_tracklist" always-dirty>\n  <div\n    ng-repeat="slot in $ctrl.numbered_slots track by $index"\n    class="editable_tracklist-row u-vertical_margins nganimate-fade_in nganimate-fade_out"\n  >\n    <editable-tracklist-number track-number="slot.track_number" on-update="$ctrl.update_slot_number(slot, input)"></editable-tracklist-number>\n    <div\n      class="editable_tracklist-row-entry-container"\n      ng-if="slot.song_id"\n      drag-and-drop\n      on-drop="$ctrl.place_song_into_slot(data, slot)"\n      cant-drop="$ctrl.slot_being_dragged.track_number === slot.track_number"\n    >\n      <div\n        class="editable_tracklist-row-entry"\n        drag-and-drop="slot"\n        draggable="true"\n        on-dragstart="$ctrl.slot_being_dragged = slot"\n        on-dragend="$ctrl.slot_being_dragged = null; $ctrl.remove_trailing_empty_slots()"\n      >\n        <div class="editable_tracklist-row-entry-title">{{slot.title}}</div>\n        <div ng-if="slot.lyrics_state" class="text_label text_label--gray">\n          <input\n            type="checkbox"\n            ng-checked="slot.lyrics_state === \'unreleased\'"\n          >\n          <label ng-click="$ctrl.toggle_unreleased(slot)" class="editable_tracklist-row-entry-unreleased_label u-clickable">Unreleased</label>\n        </div>\n        <div>\n          <svg src="drag.svg" class="inline_icon inline_icon--gray u-small_left_margin"></svg>\n        </div>\n        <div>\n          <svg src="x.svg" ng-click="$ctrl.clear_slot(slot); $ctrl.remove_trailing_empty_slots()" class="u-clickable inline_icon inline_icon--gray inline_icon--small_reading_size u-small_left_margin"></svg>\n        </div>\n      </div>\n    </div>\n    <div\n      ng-if="!slot.song_id"\n      class="editable_tracklist-row-placeholder"\n      drag-and-drop\n      on-drop="$ctrl.place_song_into_slot(data, slot)"\n    ></div>\n  </div>\n\n  <div class="editable_tracklist-row u-vertical_margins">\n    <div class="editable_tracklist-row-number"></div>\n    <div\n      class="editable_tracklist-row-placeholder"\n      drag-and-drop\n      on-dragenter="$ctrl.add_slot_after_delay()"\n      on-dragleave="$ctrl.cancel_add_slot()"\n      on-drop="$ctrl.add_slot_and_fill(data)"\n    >\n      <div class="text_label text_label--gray">Drop here to add as track {{$ctrl.numbered_slots.length + 1}}</div>\n    </div>\n  </div>\n\n  <div class="text_label text_label--gray">Unnumbered</div>\n\n  <div\n    ng-repeat="slot in $ctrl.unnumbered_slots track by $index"\n    class="editable_tracklist-row u-vertical_margins nganimate-fade_in nganimate-fade_out"\n  >\n    <editable-tracklist-number track-number="slot.track_number" on-update="$ctrl.update_slot_number(slot, input)"></editable-tracklist-number>\n    <div class="editable_tracklist-row-entry-container">\n      <div\n        class="editable_tracklist-row-entry"\n        draggable="true"\n        drag-and-drop="slot"\n        on-dragstart="$ctrl.slot_being_dragged = slot"\n        on-dragend="$ctrl.slot_being_dragged = null; $ctrl.remove_trailing_empty_slots()"\n      >\n        <div class="editable_tracklist-row-entry-title">{{slot.title}}</div>\n        <div ng-if="slot.lyrics_state" class="text_label text_label--gray">\n          <input\n            type="checkbox"\n            ng-checked="slot.lyrics_state === \'unreleased\'"\n          >\n          <label ng-click="$ctrl.toggle_unreleased(slot)" class="editable_tracklist-row-entry-unreleased_label u-clickable">Unreleased</label>\n        </div>\n        <div>\n          <svg src="drag.svg" class="inline_icon inline_icon--gray u-small_left_margin"></svg>\n        </div>\n        <div>\n          <svg src="x.svg" ng-click="$ctrl.clear_slot(slot); $ctrl.remove_trailing_empty_slots()" class="u-clickable inline_icon inline_icon--gray inline_icon--small_reading_size u-small_left_margin"></svg>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="editable_tracklist-row u-vertical_margins">\n    <div class="editable_tracklist-row-number"></div>\n    <div\n      class="editable_tracklist-row-placeholder"\n      drag-and-drop\n      on-drop="$ctrl.clear_slot(data); $ctrl.make_unnumbered(data); $ctrl.remove_trailing_empty_slots()"\n      cant-drop="!$ctrl.slot_being_dragged.track_number"\n    >\n      <div class="text_label text_label--gray">Drop here to clear track number</div>\n    </div>\n  </div>\n\n  <div class="editable_tracklist-row u-vertical_margins">\n    <div class="editable_tracklist-row-number"></div>\n    <input\n      autocomplete-with="song"\n      on-select="$ctrl.add_song(data)"\n      class="square_input square_input--full_width"\n      placeholder="Add a song"\n      create-result="$ctrl.create_result(term)"\n    >\n  </div>\n\n  <div ng-if="$ctrl.saving" class="local_overlay local_overlay--page_background_color">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("editable_tracklist_number.html",'<div class="editable_tracklist-row-number">\n  <div ng-click="$ctrl.editing = true" ng-hide="$ctrl.editing">\n    {{$ctrl.track_number}}\n    <div\n      class="editable_tracklist-row-number-edit_icon"\n      ng-class="{\n        \'editable_tracklist-row-number-edit_icon--no_number\': $ctrl.track_number === undefined\n      }"\n    >\n      <button class="button--unstyled" aria-label="edit">\n        <svg src="pencil.svg" class="inline_icon inline_icon--gray"></svg>\n      </button>\n    </div>\n  </div>\n  <form ng-if="$ctrl.editing" ng-submit="$ctrl.submit()" submit-on-cmd-enter>\n    <input ng-model="$ctrl.editable_track_number" class="square_input editable_tracklist-row-number-input u-x_small_right_margin" ng-autofocus>\n    <button class="button--unstyled" aria-label="submit">\n      <svg\n        src="checkmark.svg"\n        class="inline_icon inline_icon--gray u-x_small_right_margin u-clickable"\n        ng-click="$ctrl.submit()"\n      ></svg>\n    </button>\n    <button class="button--unstyled" aria-label="cancel">\n      <svg\n        src="x.svg"\n        class="inline_icon inline_icon--gray u-x_small_right_margin u-clickable"\n        ng-click="$ctrl.reset()"\n        aria-label="cancel"\n      ></svg>\n    </button>\n  </form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("embedly_embed.html",'<div\n  class="embedly_preview"\n  ng-class="{\n    \'embedly_preview--video\': $ctrl.embed.type === \'video\' && $ctrl.embed.provider_name !== \'Instagram\',\n    \'embedly_preview--instagram_video\': $ctrl.embed.type === \'video\' && $ctrl.embed.provider_name === \'Instagram\',\n  }"\n>\n  <div ng-if=":: $ctrl.embed.html" ng-bind-html=":: $ctrl.trusted_html()"></div>\n  <div ng-if=":: !$ctrl.embed.html" class="gray_container gray_container--full_padding">\n    <div class="embedly_preview-thumb" ng-if=":: $ctrl.embed.thumbnail_url">\n      <img ng-src="{{:: $ctrl.embed.thumbnail_url}}" style="{{:: $ctrl.embed.style}}"/>\n    </div>\n    <div class="embedly_preview-text">\n      <a ng-href="{{:: $ctrl.embed.original_url}}" class="embedly_preview-title">{{:: $ctrl.embed.title}}</a>\n      <a ng-if=":: $ctrl.embed.provider_name" href="{{:: $ctrl.embed.provider_url }}" class="embedly_preview-provider">{{:: $ctrl.embed.provider_name }}</a>\n      <div class="embedly_preview-description" ng-if=":: $ctrl.embed.description">{{:: $ctrl.embed.description}}</div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("embedly_player.html",'<div ng-class="playerClass" ng-bind-html="media_html" ng-show="state.is_loaded" ng-if="media && is_initialized"></div>\n<div ng-class="playerClass" ng-if="!media" ng-transclude></div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("embedly_youtube.html",'<div class="embedly_preview embedly_preview--video">\n  <youtube-video\n    video-id="$ctrl.video_id"\n    player-vars="{modestbranding: 1, start: $ctrl.start, showinfo:0}"\n    player="youtubePlayer"\n  ></youtube-video>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("expandable_accordion_section.html",'<div class="expandable_accordion_section" ng-class="{\'expandable_accordion_section--expanded\':expanded}">\n  <div class="accordion_label form_section_label" ng-click="expand_content()">\n    <div class="accordion_label-text text_label text_label--purple">\n      {{::label}}\n      <span class="text_label text_label--x_small_text_size">({{::shortcut}})</span>\n    </div>\n\n    <svg class="inline_icon inline_icon--purple inline_icon--short" ng-src="expanded ? \'up_arrow.svg\' : \'down_arrow.svg\'"></svg>\n  </div>\n  <ng-transclude class="expandable_accordion_section-content"></ng-transclude>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("expandable_container.html",'<div\n  class="accordion_label"\n  ng-click="$ctrl.toggle_expand()"\n>\n  <div class="accordion_label-text">\n    <ng-transclude ng-transclude-slot="expandable_container_title">\n      <span class="text_label text_label--gray" ng-bind="$ctrl.title"></span>\n    </ng-transclude>\n  </div>\n  <svg\n    ng-if="!$ctrl.variants.no_arrow"\n    class="inline_icon inline_icon--short"\n    ng-src="$ctrl.expanded ? \'up_arrow.svg\' : \'down_arrow.svg\'"\n  ></svg>\n</div>\n\n<ng-transclude ng-if="$ctrl.start_initialized || $ctrl.expanded" ng-show="$ctrl.expanded"></ng-transclude>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("expandable_diff.html",'<div ng-repeat="range in $ctrl.ranges track by [range.start, range.end]">\n  <div\n    class="square_button square_button--transparent square_button--gray"\n    ng-if="$index > 0 || range.start > 0"\n    ng-click="$ctrl.expand_range_start($index)"\n  >\n    <span class="text_label text_label--link text_label--x_small_text_size text_label--gray">\n      <svg src="up_arrow.svg" class="inline_icon u-quarter_right_margin inline_icon--half_height inline_icon--up_1"></svg>\n      Show {{$ctrl.expand_amount}} more lines\n    </span>\n  </div>\n  <div ng-bind-html="$ctrl.render_lines(range.start, range.end)"></div>\n</div>\n<div\n  ng-if="$ctrl.ranges[$ctrl.ranges.length - 1].end < $ctrl.lines.length"\n  ng-click="$ctrl.expand_range_end($ctrl.ranges.length - 1)"\n  class="square_button square_button--transparent square_button--gray"\n>\n  <span class="text_label text_label--x_small_text_size text_label--gray">\n    <svg src="down_arrow.svg" class="inline_icon u-quarter_right_margin inline_icon--half_height inline_icon--up_1"></svg>\n    Show {{$ctrl.expand_amount}} more lines\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("facebook_share_button.html",'<a\n  ng-click="$ctrl.share_on_facebook()"\n  class="square_button"\n  ng-class="{\n    \'square_button--transparent square_button--facebook_inverse nganimate-disable_transition\': $ctrl.variants.transparent,\n    \'square_button--facebook\': !$ctrl.variants.transparent\n  }"\n>\n  <svg class="inline_icon" src="facebook.svg"></svg>\n  <span ng-if="$ctrl.variants.showText">Share</span>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("fact_track_simulator.html",'<div class="fact_track_card fact_track_card-{{ current_annotation.content_type }}_card fact_track_card--front" ng-click="ctrl.card_clicked()">\n  <div class="fact_track_card-album_image" ng-show="album.images.length && current_annotation.content_type === \'intro\'" ng-attr-style="background-image: url(\'{{ album.images[0].url }}\')"></div>\n  <div class="fact_track_card-headline" ng-switch="current_annotation.content_type">\n    <span ng-switch-when="lyrics">Lyrics</span>\n    <span ng-switch-when="verified">Lyrics</span>\n    <span ng-switch-when="verified_annotation">\n      <span class="fact_track_card-headline-artist_name">{{ (current_annotation.spotify_artist_uuid | spotify_artist_metadata).name }}</span> Exclusive\n    </span>\n    <span ng-switch-when="annotation">Behind the Lyrics</span>\n    <span ng-switch-when="iq">Track Fact</span>\n    <span ng-switch-when="credits">Credits</span>\n  </div>\n  <div class="fact_track_card-body fact_track_card-body--{{ current_annotation.content_type }}">\n    <span class="fact_track_card-body-highlight" ng-bind-html="current_annotation.content | highlight_braced:{class_name:\'fact_track_card-emphasis\'}"></span>\n  </div>\n  <div class="fact_track_card-verified_headline" ng-show="current_annotation.content_type == \'verified_annotation\'">\n    <div class="user_avatar user_avatar--xxx_large" clipped-background-image="((current_annotation.spotify_artist_uuid | spotify_artist_metadata).images | minBy:\'width\').url"></div>\n  </div>\n  <div class="fact_track_card-countdown_timer">\n    <div class="fact_track_card-countdown_timer-time_remaining" style="width:{{ (ctrl.annotation_percentage() * 100).toFixed(3) }}%"></div>\n  </div>\n</div>\n\n<div class="fact_track_controls media_control">\n  <div class="media_control-button_group" ng-click="ctrl.toggle_play_pause()">\n    <play-pause-button playing="playing"></play-pause-button>\n  </div>\n  <div class="media_control-scrubber">\n    <div class="media_control-scubber-handle_container" scrubber scrub-percentage="scrub_percentage" scrubbed="ctrl.seek_to_percentage(percentage)">\n      <span class="media_control-scubber-handle" style="left:{{ ((scrub_percentage || (time / duration)) * 100).toFixed(3) }}%"></span>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("flash_messages.html",'<div ng-repeat="message in flash_messages" ng-click="$parent.ctrl.close_message(message)" class="global_message global_message--{{ message.type }}">\n  <div class="global_message-message" ng-bind-html="message.message"></div>\n  <div class="global_message-close"><svg src="x.svg" class="global_message-x_icon x_icon"></svg></div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("follow_button.html",'<a\n  ng-click="toggle_following()"\n  class="square_button"\n  ng-class="{\n    \'square_button--purple\': variants.purple,\n    \'square_button--transparent\': variants.transparent,\n    \'square_button--active\': following,\n    \'square_button--disabled\': disabled\n  }"\n  ng-disabled="disabled"\n  ng-if=":: can_follow()"\n>\n  <span ng-bind="label()"></span>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("global_error_message.html",'<modal-window ng-if="ctrl.message_html" on-close="ctrl.message_html = null" ng-cloak>\n  <div ng-bind-html="ctrl.message_html" class="rich_text_formatting"></div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("global_message.html",'<div class="global_message global_message--error">\n  <div class="global_message-message" ng-transclude></div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("hang_initial_quote.html","<div\n  ng-class=\"{\n    'u-hang_initial_single_quote': $ctrl.hang_initial_single_quote,\n    'u-hang_initial_double_quote': $ctrl.hang_initial_double_quote\n  }\"\n  ng-bind=\"$ctrl.content\"\n></div>\n")}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("header_actions.html",'<mutually-exclusive-switches property="open_header_menus">\n  <div ng-if="$ctrl.user_signed_in" class="header-actions">\n    <inbox-container inbox-name="groups_inbox" open-inboxes="open_header_menus"></inbox-container>\n    <inbox-container inbox-name="newsfeed_inbox" abbreviate-after="20" open-inboxes="open_header_menus"></inbox-container>\n    <inbox-container inbox-name="main_activity_inbox" sync-count-to-title="true" open-inboxes="open_header_menus"></inbox-container>\n    <inbox-container inbox-name="messages_inbox" use-messages-inbox="true" open-inboxes="open_header_menus"></inbox-container>\n    <inbox-container\n      ng-if="$ctrl.can(\'view_contribution_opportunity_assignments\')"\n      inbox-name="iq_inbox"\n      use-iq-inbox="true"\n      open-inboxes="open_header_menus"\n    ></inbox-container>\n    <header-admin open-header-menus="open_header_menus"></header-admin>\n  </div>\n  <header-auth ng-if="!$ctrl.user_signed_in"></header-auth>\n</mutually-exclusive-switches>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("header_admin.html",'<div\n  class="header-action"\n  ng-class="{\'header-action--active\': $ctrl.open_header_menus.admin_menu}"\n  ng-click="$ctrl.open_header_menus.admin_menu = !$ctrl.open_header_menus.admin_menu"\n  stop-propagation="click"\n>\n  <div\n    class="header-user_avatar"\n    clipped-background-image=":: $ctrl.user.avatar.thumb.url"\n  ></div>\n  <div class="header-action-label">{{ $ctrl.user.iq | number:0 }} IQ</div>\n</div>\n\n<div\n  click-outside="$ctrl.open_header_menus.admin_menu = false"\n  class="feed_dropdown feed_dropdown--narrow_width"\n  ng-show="$ctrl.open_header_menus.admin_menu"\n  scroll-only-this-element=""\n>\n  <div class="feed_dropdown-header">\n    <span class="text_label">Account</span>\n  </div>\n\n  <a\n    ng-href="{{$ctrl.user.url}}"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Profile</a>\n\n  <a\n    href="/feedback/new"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Report a Problem</a>\n\n  <a\n    ng-click="$ctrl.logout()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Sign out</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_activity_stream_firehose\')"\n    href="/firehose"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Firehose</a>\n\n  <a\n    ng-if="$ctrl.can(\'manage_messages\')"\n    href="/messages/all"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >MsgSnoop</a>\n\n  <a\n    ng-if="$ctrl.can(\'impersonate\')"\n    ng-click="$ctrl.impersonate_user()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Impersonate Another User</a>\n  <modal-window ng-if="$ctrl.impersonating">\n    <p><b>Hang tight!</b> We\'re trying to log you in to the account you specified...</p>\n  </modal-window>\n\n  <a\n    ng-if="$ctrl.can(\'remove_asset\')"\n    ng-click="$ctrl.remove_asset()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Remove Asset</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_rate_limits\')"\n    href="/rate_limits"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Rate Limits</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_penalties\')"\n    href="/penalties"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Penalties</a>\n\n  <a\n    ng-if="$ctrl.can(\'search_user_aliases\')"\n    ng-click="$ctrl.search_user_aliases()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Search User Aliases</a>\n\n  <a\n    ng-if="$ctrl.can(\'manage_incoming_emails\')"\n    href="/incoming_emails/manage"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Manage Incoming Emails</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_probably_spam_songs\')"\n    href="/songs/probably_spam"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Probably Spam Songs</a>\n\n  <div ng-if="$ctrl.can(\'view_chartbeat\')">\n    <a\n      href="/chartbeat"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View Chartbeat</a>\n\n    <a\n      href="/chartbeat?bigboard=1"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View Chartbeat Top Pages</a>\n\n    <a\n      href="/chartbeat?ios=1"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View iOS Chartbeat</a>\n  </div>\n\n  <div ng-if="$ctrl.loading" class="local_overlay">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("header_auth.html",'<div class="header-actions">\n  <a\n    href="/signup"\n    class="header-action"\n    ng-class="{\'header-action--active\': $ctrl.prompt_auth === \'signing_up\'}"\n    ng-click="$ctrl.prompt_auth = \'signing_up\'"\n    prevent-default-click="true"\n  >Sign Up</a>\n  <a\n    href="/login"\n    class="header-action header-action--sign_in"\n    ng-class="{\'header-action--active\': $ctrl.prompt_auth === \'signing_in\'}"\n    ng-click="$ctrl.prompt_auth = \'signing_in\'"\n    prevent-default-click="true"\n  >Sign In</a>\n</div>\n\n<modal-window\n  ng-if="$ctrl.prompt_auth"\n  on-close="$ctrl.prompt_auth = false"\n  variants="{narrow_width: true}"\n>\n  <authentication-form signing-in="$ctrl.prompt_auth === \'signing_in\'"></authentication-form>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("header_menu_item.html",'<li class="nav_menu-item" click-outside="opened = false" ng-if="!url">\n  <a ng-click="opened = !opened" class="nav_menu-link nav_menu-link--has_dropdown" ng-class="{pressed: opened}">{{ name }}</a>\n  <div ng-transclude ng-show="opened"></div>\n</li>\n\n<li class="nav_menu-item" ng-if="url">\n  <a class="nav_menu-link" ng-href="{{ url }}">{{ name }}</a>\n</li>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("header_with_cover_art.html",'<div\n  class="header_with_cover_art"\n  ng-class="{\'header_with_cover_art--fade_in_background\': $ctrl.header_image_url}"\n  clipped-background-image="$ctrl.header_image_url"\n  clipped-background-image-width-increment="10"\n>\n  <div class="header_with_cover_art-inner column_layout">\n    <div\n      class="column_layout-column_span"\n      ng-class="{\n        \'column_layout-column_span--primary\': !$ctrl.variants.wide_primary_column,\n        \'column_layout-column_span--three_quarter column_layout-column_span--force_padding\': $ctrl.variants.wide_primary_column\n      }"\n    >\n      <pyong-button\n        for-header\n        type="{{$ctrl.type}}"\n        object="$ctrl.object"\n        on-unauthorized="$ctrl.prompt_auth = true"\n        variants="{\n          tooltip_position: \'bottom left\',\n          far_hang: $ctrl.cover_arts.length > 1\n        }"\n      ></pyong-button>\n      <modal-window ng-if="$ctrl.prompt_auth" on-close="$ctrl.prompt_auth = false" variants="{narrow_width: true}">\n        <authentication-form></authentication-form>\n      </modal-window>\n\n      <div\n        class="header_with_cover_art-cover_art show_tiny_edit_button_on_hover"\n        ng-class="{\n          \'header_with_cover_art-cover_art--large\': $ctrl.variants.large_cover_art,\n          \'header_with_cover_art-cover_art--annotated\': $ctrl.cover_arts.length\n        }"\n      >\n        <a\n          ng-if="$ctrl.cover_arts.length"\n          ng-href="{{$ctrl.cover_arts[0].url}}"\n        >\n          <div\n            ng-repeat="cover_art in $ctrl.cover_arts | limitTo:3 track by cover_art.id"\n            class="cover_art"\n            ng-class="{\'u-absolute\': !$first}"\n          >\n            <img\n              class="cover_art-image"\n              sized-src="cover_art.image_url"\n              class-for-browser="{msie: \'cover_art-image_ie\', _default: \'cover_art-image\'}"\n            ></img>\n            <div ng-if="$first" class="cover_art-cta">\n              <svg src="expand.svg" class="u-quarter_horizontal_margins inline_icon inline_icon--white inline_icon--small_reading_size inline_icon--up_1"></svg>\n              {{$ctrl.cover_art_cta_text()}}\n            </div>\n          </div>\n        </a>\n\n        <div ng-if="!$ctrl.cover_arts.length" class="cover_art">\n          <img\n            class="cover_art-image"\n            sized-src="$ctrl.cover_art_url"\n            class-for-browser="{msie: \'cover_art-image_ie\', _default: \'cover_art-image\'}"\n          ></img>\n        </div>\n\n        <div\n          class="tiny_edit_button"\n          ng-if="$ctrl.can_edit"\n          ng-click="$ctrl.on_edit()"\n          stop-propagation="click"\n        >\n          <svg src="pencil.svg" class="tiny_edit_button-svg"></svg>\n        </div>\n      </div>\n\n      <div class="header_with_cover_art-primary_info_container">\n        <div class="header_with_cover_art-primary_info">\n          <div ng-if="$ctrl.variants.type_label" class="text_label text_label--yellow text_label--x_small_text_size u-small_bottom_margin">{{$ctrl.variants.type_label}}</div>\n          <h1\n            class="header_with_cover_art-primary_info-title"\n            ng-class="{\'header_with_cover_art-primary_info-title--white\': $ctrl.variants.white_title}"\n          >{{$ctrl.titleLabel}}</h1>\n          <h2>\n            <span tether-drop-target>\n              <a\n                ng-href="{{$ctrl.artist.url}}"\n                class="header_with_cover_art-primary_info-primary_artist"\n              >{{$ctrl.artist.name}}</a>\n              <tether-drop show-on="hover">\n                <artist-tooltip artist="$ctrl.artist"></artist-tooltip>\n              </tether-drop>\n            </span>\n          </h2>\n          <ng-transclude ng-transclude-slot="metadata"></ng-transclude>\n        </div>\n      </div>\n      <song-verified-artists\n        ng-if="$ctrl.verified_contributors"\n        verified-contributors="$ctrl.verified_contributors"\n      ></song-verified-artists>\n    </div>\n    <div\n      class="column_layout-column_span"\n      ng-class="{\n        \'column_layout-column_span--secondary\': !$ctrl.variants.wide_primary_column,\n        \'column_layout-column_span--one_quarter\': $ctrl.variants.wide_primary_column\n      }"\n    >\n      <ng-transclude ng-transclude-slot="secondary"></ng-transclude>\n    </div>\n  </div>\n</div>\n\n<cover-art-modal\n  ng-if="$ctrl.focused_cover_art_id"\n  focused-cover-art-id="$ctrl.focused_cover_art_id"\n  close="$ctrl.close_cover_art_modal()"\n  cover-artable="$ctrl.object"\n  tiny-cover-arts="$ctrl.cover_arts"\n  type="album"\n></cover-art-modal>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("hidden_fields.html",'<div ng-switch="$ctrl.type">\n  <hidden-fields ng-switch-when="object" ng-repeat="(key, value) in $ctrl.value track by key" key="{{$ctrl.key + \'[\' + key + \']\'}}" value="value"></hidden-fields>\n  <hidden-fields ng-switch-when="array" ng-repeat="value in $ctrl.value track by $index" key="{{$ctrl.key + \'[]\'}}" value="value"></hidden-fields>\n  <input ng-switch-when="constant" type="hidden" name="{{$ctrl.key}}" value="{{$ctrl.value}}">\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("hide_song_form.html",'<modal-window on-close="on_close()">\n  <role-selection-dialog\n    save="ctrl.save(selected_roles)"\n    error="error"\n    prompt="Select who should be able to see this song"\n    saving="ctrl.saving"\n  ></role-selection-dialog>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("image_upload_button.html",'<div click-outside="$ctrl.tooltip_opened = false" class="image_upload_button-container">\n  <div\n    class="image_upload_button"\n    ng-class="{\'image_upload_button--avatar\': $ctrl.variants.avatar, \'image_upload_button--active\': $ctrl.tooltip_opened}"\n    clipped-background-image="$ctrl.default_image"\n    ng-click="$ctrl.pick_image_for_artist(\'COMPUTER\')"\n  >\n    <svg src="upload_image.svg" class="inline_icon inline_icon--large_reading_size inline_icon--white"></svg>\n  </div>\n  <div\n    ng-if="$ctrl.allow_clear"\n    ng-click="$ctrl.on_clear()"\n    confirm="{{$ctrl.clear_confirm || \'Are you sure you want to delete this image?\'}}"\n    class="image_upload_button-clear u-clickable"\n  >\n    <svg\n      src="x.svg"\n      class="inline_icon inline_icon--short inline_icon--gray"\n    ></svg>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox.html",'<div class="feed_dropdown-header">\n  <span class="text_label">{{:: \'header.\' + $ctrl.inbox_name | i18n }}</span>\n</div>\n<div infinite-scroll="$ctrl.load_next_page()" infinite-scroll-disabled="!$ctrl.should_paginate()">\n  <div ng-repeat="line_item in $ctrl.line_items track by line_item.event_ids">\n    <inbox-line-item inbox-name=":: $ctrl.inbox_name" object=":: line_item" eager-load-details="$first && $ctrl.opened"></inbox-line-item>\n  </div>\n  <placeholder-spinner ng-if="!$ctrl.done_loading" placeholder-classes="feed_dropdown-item"></placeholder-spinner>\n\n  <div ng-if="$ctrl.done_loading && !$ctrl.line_items.length" class="feed_dropdown-item feed_dropdown-item--active">\n    No notifications\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_container.html",'<inbox-icon\n  ng-click="$ctrl.opened_once = true; $ctrl.open_inboxes[$ctrl.inbox_name] = !$ctrl.open_inboxes[$ctrl.inbox_name]"\n  stop-propagation="click"\n  inbox-name="{{$ctrl.inbox_name}}"\n  opened="$ctrl.open_inboxes[$ctrl.inbox_name]"\n  sync-count-to-title="$ctrl.sync_count_to_title"\n  abbreviate-after="$ctrl.abbreviate_after"\n  yields-api="$ctrl.unread_count_api = api"\n></inbox-icon>\n\n<div\n  class="feed_dropdown"\n  ng-if="$ctrl.opened_once"\n  ng-show="$ctrl.open_inboxes[$ctrl.inbox_name]"\n  click-outside="$ctrl.open_inboxes[$ctrl.inbox_name] = false"\n  stop-propagation="click"\n  scroll-only-this-element=""\n>\n  <iq-inbox\n    ng-if="$ctrl.use_iq_inbox"\n    opened="$ctrl.open_inboxes[$ctrl.inbox_name]"\n    clear-unread-count="$ctrl.unread_count_api.clear()"\n  ></iq-inbox>\n  <messages-inbox\n    ng-if="$ctrl.use_messages_inbox"\n    opened="$ctrl.open_inboxes[$ctrl.inbox_name]"\n    decrement-unread-count="$ctrl.unread_count_api.decrement(unread_messages_count)"\n  ></messages-inbox>\n  <inbox\n    ng-if="!$ctrl.use_messages_inbox && !$ctrl.use_iq_inbox"\n    inbox-name="{{$ctrl.inbox_name}}"\n    opened="$ctrl.open_inboxes[$ctrl.inbox_name]"\n    clear-unread-count="$ctrl.unread_count_api.clear()"\n  ></inbox>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_icon.html",'<span class="header-action" ng-class="{\'header-action--active\': $ctrl.opened}">\n  <span class="header-action-icon header-action-icon--{{ $ctrl.inbox_name }}"></span>\n  <span class="header-action-label">{{ \'header.\' + $ctrl.inbox_name | i18n }}</span>\n  <span ng-if="$ctrl.unread_count" class="header-action-count numbered_indicator numbered_indicator--pink_filled">{{ $ctrl.unread_count | boundedCount:$ctrl.abbreviate_after }}</span>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item.html",'<div\n  class="feed_dropdown-item"\n  ng-class="{\n    \'feed_dropdown-item--unread\': line_item.unread && !variants.active_display,\n    \'feed_dropdown-item--active\': ctrl.state.show_details || variants.active_display\n  }"\n  ng-click="ctrl.toggle_visible()"\n>\n  <div class="inbox_line_item">\n    <div class="inbox_line_item-avatars">\n      <div\n        class="user_avatar user_avatar--medium"\n        ng-class=":: {\'inbox_line_item-avatars-stacked_avatar--over\': line_item.actor_avatars.length > 1}"\n        clipped-background-image=":: line_item.actor_avatars[0].small.url"\n      ></div>\n      <div\n        class="user_avatar user_avatar--medium inbox_line_item-avatars-stacked_avatar--under"\n        ng-if=":: line_item.actor_avatars.length > 1"\n        clipped-background-image=":: line_item.actor_avatars[1].thumb.url"\n      ></div>\n    </div>\n    <div class="inbox_line_item-action">\n      <div class="inbox_line_item-action-center">\n        <div class="feed_dropdown-item-unread_indicator numbered_indicator" ng-if=":: line_item.event_ids.length > 1" ng-class="{\'numbered_indicator--gray\': !line_item.unread}">\n          {{:: line_item.event_ids.length > ctrl.max_line_item_event_count && ctrl.truncate_line_item_event_count ? ctrl.max_line_item_event_count + \'+\' : line_item.event_ids.length }}\n        </div>\n        <inbox-line-item-action-icon action-name="line_item.action_name"></inbox-line-item-action-icon>\n        <div\n          ng-if=":: line_item.iq_gained"\n          class="inbox_line_item-action-iq_difference text_label"\n          ng-class=":: {\n            \'text_label--red\': line_item.iq_gained < 0,\n            \'text_label--green\': line_item.iq_gained > 0\n          }"\n        >{{:: (line_item.iq_gained | signed_number) }}</div>\n      </div>\n    </div>\n    <div class="inbox_line_item-content inbox_line_item-content--emphasized_title">\n      <inbox-line-item-message\n        template="ctrl.message_template"\n        key="ctrl.message_components.key"\n        params="ctrl.message_components.params"\n        state="ctrl.state"\n      ></inbox-line-item-message>\n    </div>\n    <div class="inbox_line_item-timestamp">\n      <time-ago time=":: line_item.timestamp"></time-ago>\n    </div>\n  </div>\n</div>\n\n<div\n  ng-if="ctrl.state.load_details"\n  ng-show="ctrl.state.show_details"\n  class="feed_dropdown-expanded_section"\n>\n  <inbox-line-item-detail\n    ng-if="ctrl.formation && ctrl.line_item_detail"\n    line-item-detail="ctrl.line_item_detail"\n    formation="ctrl.formation"\n  ></inbox-line-item-detail>\n\n  <div class="u-vertical_margins" ng-if="!ctrl.iframe_loaded && !ctrl.line_item_detail">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n\n  <iframe\n    ng-if=":: !ctrl.formation"\n    on-load="ctrl.iframe_loaded = true"\n    auto-resize-iframe\n    ng-src="{{:: details_url}}"\n    class="feed_dropdown-expanded_section-legacy_iframe_content"\n  ></iframe>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_action_icon.html",'<div ng-switch=":: action_name">\n  <svg ng-switch-when="upvoted" src="thumbs_up.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="downvoted" src="thumbs_down.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="replied_to" src="comment.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="added_a_suggestion_to" src="comment.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="mentioned" src="at_symbol.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="posted_in" src="pin.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="pinned" src="pin.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="unpinned" src="pin.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="created" src="blockquote.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="pyonged" src="lightning.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="edited" src="pencil.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="edited_the_lyrics_of" src="pencil.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="edited_the_metadata_of" src="pencil.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="proposed_an_edit_to" src="pencil.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="accepted" src="checkmark.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="archived" src="checkmark.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="rejected" src="x.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="deleted" src="x.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="marked_as_spam" src="x.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="followed" src="eye.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="are_commanded_to_follow" src="eye.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="added_a_photo" src="eye.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="cosigned" src="checky.svg" class="inline_icon checky"></svg>\n  <svg ng-switch-when="verified_the_lyrics_of" src="checky.svg" class="inline_icon checky"></svg>\n  <svg ng-switch-when="unverified_the_lyrics_of" src="x.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="locked" src="lock.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="unpublished" src="eye_cross.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="integrated" src="checkmark.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="made_an_editor_out_of" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="made_a_moderator_out_of" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="staffed" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="mediatored" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="made_an_educator_out_of" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="de-modded" src="down_arrow.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="de-staffed" src="down_arrow.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="accepted_the_invitation" src="envelope.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="invited" src="envelope.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="unlocked" src="unlock.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="moved" src="right_arrow.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="marked" src="circle.svg" class="inline_icon inline_icon--purple"></svg>\n  <svg ng-switch-when="incorporated" src="two_documents.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="merged" src="two_documents.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="recognized" src="one_document.svg" class="inline_icon inline_icon--green"></svg>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/actions.html",'<div\n  ng-repeat="action in $ctrl.detail.actions track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <inbox-line-item-detail-object\n    object="action"\n    variants="{deleted: $ctrl.detail.action_name === \'deleted\'}"\n  ></inbox-line-item-detail-object>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/actors.html",'<div class="gray_container">\n  <div\n    class="inbox_line_item_detail-actor"\n    ng-repeat="user in $ctrl.detail.actors track by user.id"\n  >\n    <inbox-line-item-action-icon action_name=":: $ctrl.detail.action_name"></inbox-line-item-action-icon>\n    <user-badge-and-timestamp\n      size="x_small"\n      user=":: user"\n      time=":: $ctrl.detail.timestamp"\n      class="u-flex_directive"\n    ></user-badge-and-timestamp>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/annotations_with_comments.html",'<div\n  ng-repeat="target in $ctrl.detail.targets track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <standalone-referent object=":: target" focused-comments="$ctrl.detail.actions"></standalone-referent>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/annotations_with_rejection_comments.html",'<div\n  ng-repeat="target in $ctrl.detail.targets track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <standalone-referent object=":: target" focused-comments="target.rejection_comments"></standalone-referent>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/context.html",'<inbox-line-item-detail-object\n  object="$ctrl.detail.context"\n  variants="{deleted: $ctrl.detail.action_name === \'deleted\'}"\n></inbox-line-item-detail-object>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/context_commentable.html",'<div ng-if="$ctrl.detail.context._type === \'comment\'">\n  <inbox-line-item-detail-object object="$ctrl.detail.context.commentable"></inbox-line-item-detail-object>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/lyrics_diffs.html",'<div\n  ng-repeat="lyrics_diff in $ctrl.lyrics_diffs track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <inbox-line-item-detail-lyrics-diff\n    before="lyrics_diff.before"\n    after="lyrics_diff.after"\n    state="lyrics_diff.state"\n  ></inbox-line-item-detail-lyrics-diff>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/lyrics_edit_acceptor.html",'<div ng-if="$ctrl.detail.metadata[0].lyrics_edit_acceptor" class="gray_container">\n  <div class="inbox_line_item_detail-actor">\n    <inbox-line-item-action-icon action_name="\'accepted\'"></inbox-line-item-action-icon>\n    <user-badge-and-timestamp\n      size="x_small"\n      user=":: $ctrl.detail.metadata[0].lyrics_edit_acceptor"\n      time=":: $ctrl.detail.timestamp"\n      class="u-flex_directive"\n    ></user-badge-and-timestamp>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/lyrics_edit_archive_info.html","<div class=\"gray_container rich_text_formatting\">\n  The lyrics have changed significantly since your edit{{$ctrl.detail.targets.length > 1 ? 's' : ''}}, and the lyrics you proposed changing no longer appear on the page. Try reviewing the current lyrics and proposing another edit.\n</div>\n")}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/merged_artist.html",'<div class="gray_container">\n  Merged {{$ctrl.detail.metadata[0].artist_name_at_time_of_merge}} (Artist ID: {{$ctrl.detail.targets[0].id}})\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/metadata_changes.html",'<div\n   ng-repeat="metadata in $ctrl.detail.metadata track by $index"\n   ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <div\n    ng-repeat="(attribute, changes) in metadata.changes track by attribute"\n    ng-class="{\'u-bottom_margin\': !$last}"\n    class="gray_container"\n  >\n    <div class="text_label text_label--gray u-half_bottom_margin">{{attribute}}</div>\n    <div>Before:</div>\n    <div class="rich_text_formatting" ng-bind-html="changes[0]"></div>\n    <div>After:</div>\n    <div class="rich_text_formatting" ng-bind-html="changes[1]"></div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/targets.html",'<div\n  ng-repeat="target in $ctrl.detail.targets track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <inbox-line-item-detail-object\n    object="target"\n    variants="{deleted: $ctrl.detail.action_name === \'deleted\'}"\n  ></inbox-line-item-detail-object>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/user_acted_on_user.html",'<div\n  class="user_acts_on_user"\n  ng-repeat="target in $ctrl.detail.targets track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <div class="user_acts_on_user-user u-half_horizontal_margins">\n    <user-badge variants="::{show_user_role: true}" size="medium" object=":: $ctrl.detail.actors[0]"></user-badge>\n  </div>\n  <div class="user_acts_on_user-user u-half_horizontal_margins">\n    <user-badge variants="::{show_user_role: true}" size="medium" object=":: target"></user-badge>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_discussion.html",'<div class="inbox_line_item_detail_forum_post">\n  <inbox-line-item-detail-discussion-header discussion="$ctrl.discussion"></inbox-line-item-detail-discussion-header>\n\n  <span\n    ng-if="$ctrl.has_next() && !$ctrl.loading"\n    ng-click="$ctrl.load_more()"\n    class="text_label text_label--purple text_label--button text_label--x_small_text_size"\n  >\n    Load older replies\n  </span>\n  <div class="u-bottom_margin">\n    <placeholder-spinner ng-if="$ctrl.loading"></placeholder-spinner>\n  </div>\n\n  <inbox-line-item-detail-forum-post-single\n    ng-repeat="forum_post in $ctrl.forum_posts | orderBy:\'-\' track by forum_post.id"\n    forum-post="forum_post"\n  ></inbox-line-item-detail-forum-post-single>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_discussion_header.html",'<div class="inbox_line_item_detail_forum_post-titles">\n  <div class="inbox_line_item_detail_forum_post-titles-post_title">\n    <a ng-href="{{:: $ctrl.discussion.url }}">\n      {{:: $ctrl.discussion.title }}\n    </a>\n  </div>\n  <div>\n    <a\n      ng-href="{{:: $ctrl.discussion.group.url }}"\n      class="text_label text_label--gray text_label--x_small_text_size"\n    >{{:: $ctrl.discussion.group.name }}</a>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_forum_post.html",'<div class="inbox_line_item_detail_forum_post">\n  <inbox-line-item-detail-discussion-header discussion="$ctrl.forum_post.discussion"></inbox-line-item-detail-discussion-header>\n  <inbox-line-item-detail-forum-post-single forum-post="$ctrl.forum_post"></inbox-line-item-detail-forum-post-single>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_forum_post_single.html",'<div class="inbox_line_item_detail_forum_post-body_container u-top_margin">\n  <user-badge-and-timestamp\n    size="medium"\n    variants="::{show_user_role: true}"\n    user=":: $ctrl.forum_post.author"\n    time=":: $ctrl.forum_post.created_at"\n  ></user-badge-and-timestamp>\n\n  <standard-rich-content\n    ng-if="$ctrl.forum_post.body"\n    html="$ctrl.forum_post.body.html"\n  ></standard-rich-content>\n  <div\n    ng-if="!$ctrl.forum_post.body"\n    class="rich_text_formatting rich_text_formatting--small rich_text_formatting--no_vertical_margins"\n  >\n    <p>{{ $ctrl.forum_post.deleted_body | i18n }}</p>\n  </div>\n\n  <div class="u-top_margin">\n    <voting\n      type="forum_post"\n      object="$ctrl.forum_post"\n      variants="{\'hide_upvote_text\': true}"\n    ></voting>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_lyrics_diff.html",'<div class="gray_container">\n  <div\n    ng-if="$ctrl.state"\n    class="text_label u-half_bottom_margin"\n  >{{$ctrl.state}}</div>\n  <div class="lyrics lyrics--no_margin">\n    <expandable-diff html="$ctrl.diff_html"></expandable-diff>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_object.html",'<div ng-switch="$ctrl.object._type">\n  <div ng-switch-when="referent">\n    <standalone-referent object=":: $ctrl.object"></standalone-referent>\n  </div>\n\n  <inbox-line-item-detail-forum-post object=":: $ctrl.object" ng-switch-when="forum_post"></inbox-line-item-detail-forum-post>\n\n  <inbox-line-item-detail-discussion object=":: $ctrl.object" ng-switch-when="discussion"></inbox-line-item-detail-discussion>\n\n  <mini-song-card object=":: $ctrl.object" ng-switch-when="song"></mini-song-card>\n\n  <mini-album-card object=":: $ctrl.object" ng-switch-when="album"></mini-album-card>\n\n  <mini-video-card object=":: $ctrl.object" ng-switch-when="video"></mini-video-card>\n\n  <mini-article-card object=":: $ctrl.object" ng-switch-when="article"></mini-article-card>\n\n  <mini-artist-card object=":: $ctrl.object" ng-switch-when="artist"></mini-artist-card>\n\n  <div ng-switch-when="question" class="gray_container">\n    <question question=":: $ctrl.object" variants="{link: true}"></question>\n  </div>\n\n  <div ng-switch-when="answer">\n    <deleted-answer ng-if="$ctrl.variants.deleted" answer=":: $ctrl.object"></deleted-answer>\n    <div ng-if="!$ctrl.variants.deleted" class="gray_container">\n      <question question=":: $ctrl.object.question" variants="{link: true}"></question>\n    </div>\n  </div>\n\n  <div ng-switch-when="cover_art">\n    <a ng-href="{{$ctrl.object.url}}">\n      <img sized-src="$ctrl.object.image_url">\n    </a>\n  </div>\n\n  <div ng-switch-when="comment" class="gray_container">\n    <comment\n      object=":: $ctrl.object"\n      variants="{first_element_in_container: true, only_delete: true}"\n    ></comment>\n  </div>\n\n  <div ng-switch-when="annotation_edit" class="gray_container">\n    <annotation-edit\n      object=":: $ctrl.object"\n      before-html="$ctrl.object.annotation_before.body.html"\n    ></annotation-edit>\n  </div>\n\n  <div ng-switch-when="group">\n    <a ng-href="{{$ctrl.object.url}}" class="mini_card">\n      <div\n        class="mini_card-thumbnail clipped_background_image--background_fill"\n        clipped-background-image="$ctrl.object.image_url"\n      ></div>\n\n      <div class="mini_card-info">\n        <div class="mini_card-title_and_subtitle">\n          <div class="mini_card-title">{{$ctrl.object.name}}</div>\n        </div>\n      </div>\n    </a>\n  </div>\n\n  <div ng-switch-when="web_page">\n    <a ng-href="{{$ctrl.object.url}}">{{$ctrl.object.title}}</a>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_items/generic.html",'<span ng-bind-html=":: $ctrl.key | genericLineItemMessage:$ctrl.params"></span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_items/pyong.html",'<span>\n  {{:: $ctrl.params.actors }}\n  {{:: $ctrl.params.verb }}\n  <span ng-bind-html=":: $ctrl.params.target"></span>\n  <span ng-bind-html=":: $ctrl.params.context"></span>\n\n  <span ng-if=":: $ctrl.params.note">\n    <span ng-if="!$ctrl.state.show_details" class=\'inbox_line_item-content-note note_bubble\' ng-bind-html=":: $ctrl.params.note | richContentPreview"></span>\n    <span ng-if="$ctrl.state.show_details" class=\'inbox_line_item-content-note note_bubble\' ng-bind-html=":: $ctrl.params.note"></span>\n  </span>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("iq_inbox.html",'<div class="u-horizontal_margins u-vertical_margins">\n  <span class="text_label text_label--gray u-half_left_margin">\n    IQ Opportunities\n  </span>\n\n  <div ng-if="$ctrl.show_explanation" class="feed_dropdown-notice feed_dropdown-notice--fill_full_space">\n    <div class="feed_dropdown-notice-header">\n      <span class="feed_dropdown-notice-header-title">What\'s this?</span>\n      <svg\n        src="x.svg"\n        class="u-clickable inline_icon inline_icon--white inline_icon--reading_size"\n        ng-click="$ctrl.dismiss_explanation()"\n      ></svg>\n    </div>\n    <div class="rich_text_formatting">\n      <p>The Earn IQ feed provides an ongoing stream of IQ opportunities personalized just for you based on artists you follow or have contributed to. You can find questions to answer, metadata to fill in, and more that will all help boost your IQ. Want more opportunities? Follow more artists!</p>\n    </div>\n  </div>\n\n  <div\n    ng-repeat="assignment in $ctrl.assignments track by assignment.id"\n    class="nganimate-fade_slide_from_left nganimate-short_stagger nganimate-fade_slide_out_right"\n  >\n    <contribution-opportunity\n      contribution-opportunity="assignment.contribution_opportunity"\n      assignment="assignment"\n      on-dismiss="$ctrl.remove(assignment)"\n      source="iq_inbox"\n    ></contribution-opportunity>\n  </div>\n\n  <placeholder-spinner ng-if="!$ctrl.loaded"></placeholder-spinner>\n  <div\n    ng-if="$ctrl.loaded && !$ctrl.assignments.length"\n    class="u-half_left_margin u-top_margin"\n  >No IQ opportunities.</div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("iq_notification_list.html",'<div class="iq_notification_list">\n  <div\n    class="iq_notification_list-list_item nganimate-fade_slide_from_left nganimate-fade_out nganimate-stagger"\n    ng-repeat="notification in $ctrl.notifications track by $id(notification)"\n    ng-switch=":: notification._type"\n  >\n    <div ng-switch-when="activity_stream/line_item" class="iq_notification">\n      <div\n        class="iq_notification-action"\n        ng-class=":: {\'iq_notification-action--positive\': notification.iq_gained > 0, \'iq_notification-action--negative\': notification.iq_gained < 0}"\n      >\n        <inbox-line-item-action-icon action-name=":: notification.action_name">\n        </inbox-line-item-action-icon>\n        <div>{{:: notification.iq_gained | signed_number }} IQ</div>\n      </div>\n      <div class="iq_notification-message">\n        <div\n          class="user_avatar user_avatar--x_small"\n          clipped-background-image=":: notification.actor_avatars[0].thumb.url"\n        ></div>\n        <span ng-bind-html=":: notification.message_components.key | genericLineItemMessage:notification.message_components.params"></span>\n      </div>\n    </div>\n\n    <div ng-switch-when="user" class="iq_notification iq_notification--user">\n      <div\n        class="user_avatar user_avatar--small"\n        clipped-background-image=":: $ctrl.user.avatar.thumb.url"\n      ></div>\n      <div class="u-half_left_margin">\n        <odometer value="$ctrl.user.iq" options="{format: \',ddd\'}"></odometer> IQ\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("leaderboard.html",'<div class="leaderboard u-half_top_margin">\n  <user-attribution rank="$index + 1" object="leaderboard_row" class="leaderboard-row" ng-class="{\'leaderboard-row--no_border\': $last}" ng-repeat="leaderboard_row in leaderboard_rows track by leaderboard_row.user.id"></user-attribution>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("leaderboard_ad.html",'<div\n  class="leaderboard_ad_placeholder u-vertical_margins"\n  ng-show="$ctrl.should_stick()"\n  ng-style="{\n    width: $ctrl.bounding_client_rect.width,\n    height: $ctrl.bounding_client_rect.height,\n  }"\n></div>\n\n<dfp-ad\n  name="{{ $ctrl.name }}"\n  ad-classes="[\n    \'dfp_unit--centered_billboard\',\n    {\n      \'dfp_unit--sticky\': $ctrl.should_stick(),\n      \'u-vertical_margins\': !$ctrl.empty,\n      \'dfp_unit--sticky_animate\': $ctrl.can_stick() && $ctrl.loaded_when_not_naturally_in_view,\n    }\n  ]"\n  on-filled="$ctrl.on_filled(render_event)"\n></dfp-ad>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics.html",'<div>\n    <a\n      ng-if="can_perform(\'preview_react_song_page\')"\n      class="square_button react_song_page_preview_link"\n      href="{{lyrics_ctrl.react_song_page_link}}"\n      > Click here to preview the new song page! \n    </a>\n\n  <div\n    class="lyrics_controls"\n    ng-if="can_perform(\'edit_anything\') || can_perform(\'propose_lyrics_edit\')"\n  >\n    <span ng-if="!lyrics_ctrl.saving">\n      <span ng-if="lyrics_ctrl.should_show_full_lyrics_start_edit_button()">\n        <kb shortcut="shift+l" action="lyrics_ctrl.start_editing()"></kb>\n\n        <button\n          ng-click="lyrics_ctrl.start_editing()"\n          ng-disabled="lyrics_ctrl.edit_blocked"\n          title="shortcut: shift+l"\n          class="square_button"\n          ng-class="{\'square_button--disabled\': lyrics_ctrl.edit_blocked}"\n        >Edit Lyrics</button>\n      </span>\n\n      <button\n        ng-click="lyrics_ctrl.start_proposing_edit()"\n        ng-if="lyrics_ctrl.should_show_full_lyrics_start_propose_button()"\n        ng-disabled="lyrics_ctrl.edit_blocked"\n        class="square_button"\n        ng-class="{\'square_button--disabled\': lyrics_ctrl.edit_blocked}"\n      >Edit Lyrics</button>\n\n      <span ng-if="lyrics_ctrl.should_show_full_lyrics_save_cancel_buttons()">\n        <button\n          tabindex="2"\n          ng-click="lyrics_ctrl.lyrics_form.submit()"\n          class="square_button square_button--green"\n          ng-disabled="lyrics_ctrl.editable_lyrics_stale"\n          ng-class="{\'square_button--disabled\': lyrics_ctrl.editable_lyrics_stale}"\n          title="(shift+enter)"\n        >\n          <span ng-if="lyrics_ctrl.editing">Save</span>\n          <span ng-if="lyrics_ctrl.proposing_edit">Propose This Edit</span>\n        </button>\n\n        <button\n          tabindex="3"\n          ng-click="lyrics_ctrl.cancel_edit_or_proposal()"\n          class="square_button"\n        >Cancel</button>\n      </span>\n    </span>\n\n    <button\n      ng-disabled\n      ng-if="lyrics_ctrl.saving"\n      class="square_button square_button--waiting"\n    >\n      <span ng-if="lyrics_ctrl.saving === \'saving_edit\'">Saving</span>\n      <span ng-if="lyrics_ctrl.saving === \'saving_proposal\'">Proposing</span>\n    </button>\n\n    <button\n      ng-disabled="song_ctrl.edit_blocked"\n      ng-if="can_perform(\'edit_anything\')"\n      class="square_button"\n      ng-click="song_ctrl.show_metadata_form(\'title_and_artists\')"\n      stop-propagation="click"\n      ng-hide="lyrics_ctrl.editing || lyrics_ctrl.proposing_edit"\n      title="(shift+a)"\n      ng-disabled="song_ctrl.saving"\n      ng-class="{\'square_button--disabled\': song_ctrl.saving || song_ctrl.edit_blocked}"\n    >Edit Song Facts</button>\n\n    <lyrics-edit-proposal-moderation\n      song="song"\n      lyrics-html="canonical_lyrics_html"\n      on-lyrics-update="lyrics_ctrl.apply_lyrics_update(lyrics_data)"\n      ng-if="can_perform(\'moderate_lyrics_edit_proposals\')"\n    ></lyrics-edit-proposal-moderation>\n\n    <song-admin-menu ng-if="user_signed_in" ng-cloak>\n      <additional-buttons>\n        <div\n          ng-if="lyrics_ctrl.should_show_edit_annotation_brackets_button()"\n          ng-click="lyrics_ctrl.start_editing()"\n          class="tooltip-list_item"\n        >Edit Annotation Brackets</div>\n        <lyrics-export-preview song="song"></lyrics-export-preview>\n      </additional-buttons>\n    </song-admin-menu>\n\n    <div\n      ng-if="lyrics_ctrl.edit_proposal_submitted"\n      class="text_label text_label--x_small_text_size text_label--green u-float_right u-half_top_margin"\n    >\n      <svg\n        src="checkmark.svg"\n        class="inline_icon inline_icon--green inline_icon--up_1"\n      />\n      Proposed\n    </div>\n\n    <div\n      ng-if="lyrics_ctrl.errors.length && !lyrics_ctrl.correcting"\n      class="u-top_margin form_message form_message--error form_message--block"\n    >\n      <div class="text_label">{{:: \'lyrics.save_error\' | i18n }}</div>\n      <ul class="u-half_top_margin">\n        <li ng-repeat="error in lyrics_ctrl.errors" ng-bind-html="error"></li>\n        <li ng-if="lyrics_ctrl.edit_blocked">\n          {{:: \'lyrics.reload_instructions\' | i18n }}\n        </li>\n      </ul>\n    </div>\n\n    <div\n      class="u-vertical_margins form_message form_message--error form_message--block"\n      ng-if="lyrics_ctrl.editing && lyrics_ctrl.editable_lyrics_stale"\n      ng-bind=":: \'lyrics.editing_stale\' | i18n"\n    ></div>\n  </div>\n\n  <div\n    class="form_message form_message--notify form_message--block"\n    ng-if="lyrics_ctrl.proposing_edit && song.lyrics_marked_complete_by"\n  >\n    These lyrics have been marked complete by <a ng-href="{{ song.lyrics_marked_complete_by.url }}">{{ song.lyrics_marked_complete_by.name }}</a> and are locked, but you can still propose edits.\n  </div>\n\n  <div\n    class="form_message form_message--error form_message--block"\n    ng-if="lyrics_ctrl.should_show_lyrics_sync_warning()"\n  >\n    Editing the lyrics of a staff approved song will invalidate all of its lyric synchronizations until they\'re manually updated. After saving your changes, please also update the lyrics synchronizations!\n  </div>\n\n  <div class="lyrics">\n    <div ng-if="!lyrics_ctrl.editing && !canonical_lyrics_html">\n      <span ng-if="song.lyrics_state === \'unreleased\'">\n        {{:: \'song.lyrics_state.unreleased.message\' | i18n }}\n      </span>\n      <span ng-if="song.lyrics_state === \'incomplete\'">\n        {{:: \'song.lyrics_state.incomplete.message\' | i18n }}\n      </span>\n    </div>\n\n    <form\n      ng-submit="lyrics_ctrl.finish_editing()"\n      ng-model-options="{updateOn: \'submit\'}"\n      submit-on-cmd-enter\n      dirtyable\n      exports-form-api="lyrics_ctrl.lyrics_form = api"\n    >\n      <textarea\n        ng-show="lyrics_ctrl.should_show_lyrics_edit_form()"\n        ng-disabled="lyrics_ctrl.edit_blocked"\n        tabindex="1"\n        ng-model="editable.markdown"\n        class="wysiwyg_input wysiwyg_input--full_width u-vertical_margins"\n        ng-class="{\'wysiwyg_input--warning\': lyrics_ctrl.editable_lyrics_stale}"\n      ></textarea>\n      <textarea\n        ng-show="lyrics_ctrl.should_show_lyrics_edit_proposal_form()"\n        ng-disabled="lyrics_ctrl.edit_blocked"\n        tabindex="1"\n        ng-model="lyrics_ctrl.lyrics_for_edit_proposal.markdown"\n        class="wysiwyg_input wysiwyg_input--full_width u-vertical_margins"\n        ng-class="{\'wysiwyg_input--warning\': lyrics_ctrl.editable_lyrics_stale}"\n      ></textarea>\n    </form>\n\n    <section\n      ng-hide="lyrics_ctrl.should_show_lyrics_edit_form() || lyrics_ctrl.should_show_lyrics_edit_proposal_form()"\n      text-selection-changed="lyrics_ctrl.update_selection_range(ranges[0])"\n    ></section>\n\n    <div\n      ng-if="can_perform(\'edit_lyrics\') || can_perform(\'propose_lyrics_edit\')"\n      class="lyrics-correct_line"\n      position-beside="$ctrl.lyrics_positioning_target || lyrics_ctrl.correction.rect"\n    >\n      <span\n        ng-if="lyrics_ctrl.can_correct_line()"\n        ng-click="lyrics_ctrl.start_correcting()"\n        class="lyrics-correct_line-button"\n        click-outside="lyrics_ctrl.text_corrector.cancel_edit_or_proposal()"\n        tether-drop-target\n        title="Correct this line"\n      >\n        <svg\n          ng-hide="lyrics_ctrl.correction"\n          src="pencil.svg"\n          class="inline_icon inline_icon--purple inline_icon--reading_size inline_icon--up_1"\n        ></svg>\n        <tether-drop visible="lyrics_ctrl.correction" position="bottom left">\n          <div\n            stop-propagation="click"\n            ng-if="lyrics_ctrl.correction"\n            class="tooltip u-large_top_vertical_margin u-half_horizontal_margins tooltip--wide"\n          >\n            <p>Correct This Line</p>\n            <div\n              ng-if="lyrics_ctrl.errors"\n              class="u-vertical_margins form_message form_message--error form_message--block"\n            >\n              <ul>\n                <li ng-repeat="error in lyrics_ctrl.errors" ng-bind-html="error"></li>\n              </ul>\n            </div>\n            <text-corrector\n              yields-text-corrector="lyrics_ctrl.text_corrector = text_corrector"\n              text="lyrics_ctrl.correction.replacement.markdown"\n              proposing-edit="lyrics_ctrl.proposing_edit"\n              submit="lyrics_ctrl.submit_line_correction(corrected)"\n              cancel="lyrics_ctrl.cancel_edit_or_proposal()"\n            ></text-corrector>\n          </div>\n        </tether-drop>\n      </span>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_edit_proposal.html",'<div>\n  <div class="lyrics_edit_proposal-user_badge_and_timestamp">\n    <user-badge-and-timestamp\n      size="medium"\n      variants="::{show_user_role: true}"\n      user=":: $ctrl.edit_proposal.user"\n      time=":: $ctrl.edit_proposal.created_at"\n    ></user-badge-and-timestamp>\n  </div>\n\n  <div\n    ng-if="$ctrl.error"\n    class="form_message form_message--error u-bottom_margin"\n  >{{ $ctrl.error }}</div>\n\n  <div class="lyrics lyrics--no_margin">\n    <expandable-diff html="$ctrl.diff_html"></expandable-diff>\n  </div>\n\n  <div class="lyrics_edit_proposal-actions">\n    <square-item-and-iq\n      event-type="accepted_a_lyrics_edit"\n      ng-hide="$ctrl.moderated_state && $ctrl.moderated_state !== \'accepted\'"\n      ng-click="$ctrl.accept()"\n    >\n      <button\n        ng-disabled="$ctrl.moderated_state"\n        ng-class="{\'lyrics_edit_proposal-actions-pulse\': $ctrl.moderated_state}"\n        class="square_button square_button--green"\n      >{{ $ctrl.moderated_state === \'accepted\' ? \'Accepted\' : \'Accept\' }}</button>\n    </square-item-and-iq>\n    <square-item-and-iq\n      event-type="rejected_a_lyrics_edit"\n      ng-hide="$ctrl.moderated_state && $ctrl.moderated_state !== \'rejected\'"\n      ng-click="$ctrl.reject()"\n    >\n      <button\n        ng-disabled="$ctrl.moderated_state"\n        ng-class="{\'lyrics_edit_proposal-actions-pulse\': $ctrl.moderated_state}"\n        class="square_button square_button--transparent square_button--gray"\n      >{{ $ctrl.moderated_state === \'rejected\' ? \'Rejected\' : \'Reject\' }}</button>\n    </square-item-and-iq>\n    <button\n      ng-if="$ctrl.moderated_state === \'inapplicable\'"\n      ng-disabled="true"\n      class="square_button lyrics_edit_proposal-actions-pulse"\n    >Inapplicable</button>\n  <div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_edit_proposal_moderation.html",'<button\n  ng-if="$ctrl.pending_count()"\n  class="square_button square_button--red"\n  ng-click="$ctrl.show()"\n>Lyrics Edits ({{$ctrl.pending_count()}})</button>\n<modal-window\n  ng-if="$ctrl.showing"\n  on-close="$ctrl.close()"\n  media="$ctrl.song.media"\n>\n  <div ng-if="$ctrl.pending_count() === 0">No lyrics edit proposals</div>\n  <div\n    class="lyrics_edit_proposal nganimate-fade_out"\n    ng-hide="edit_proposal._moderated"\n    ng-repeat="edit_proposal in $ctrl.lyrics_edit_proposals track by edit_proposal.id"\n  >\n    <lyrics-edit-proposal\n      edit-proposal="edit_proposal"\n      editable="$ctrl.editable"\n      accept-with="$ctrl.accept(params)"\n    ></lyrics-edit-proposal>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_export_preview.html",'<div\n  ng-if="$ctrl.can_perform(\'preview_lyrics_for_export\')"\n  ng-click="$ctrl.show_modal()"\n  class="tooltip-list_item"\n>Preview Lyrics For Export</div>\n\n<modal-window\n  ng-if="$ctrl.should_show_modal()"\n  on-close="$ctrl.hide_modal()"\n>\n  <div class="u-white_space_pre_line">{{ $ctrl.preview_lyrics_for_export }}</div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_sync_editor.html",'<div class="lyrics_sync_editor column_layout column_layout--no_max_width u-body_bottom_padding">\n  <div class="column_layout-column_span column_layout-column_span--primary">\n    <table\n      ng-if="$ctrl.lyrics_synchronization.song_id"\n      class="lyrics_sync_editor-lyrics-table">\n      <tbody>\n        <tr\n          class="lyrics_sync_editor-start_row"\n          ng-class="{\'lyrics_sync_editor-start_row--focused\': $ctrl.current_line_index === -1 && !$ctrl.lyrics_synchronization.preview,\'lyrics_sync_editor-start_row--pulsing\': $ctrl.position === 0 && !$ctrl.lyrics_synchronization.preview, \'lyrics_sync_editor-start_row--preview\': $ctrl.lyrics_synchronization.preview }"\n        >\n          <td ng-if="$ctrl.can(\'sync\') && $ctrl.can(\'submit\')" class="lyrics_sync_editor-timestamp_cell lyrics_sync_editor-timestamp--gray">\n            <span class="lyrics_sync_editor-timestamp">0:00.000</span>\n          </td>\n          <td class="lyrics_sync_editor-timestamp_cell lyrics_sync_editor-timestamp--gray">\n            <span class="lyrics_sync_editor-timestamp">0:00.000</span>\n          </td>\n          <td\n            class="lyrics_sync_editor-start_cell u-clickable"\n            ng-click="$ctrl.seek_to_index_and_play(-1)"\n          >{{ $ctrl.lyrics_synchronization.preview ? \'Preview\' : \'Start\' }}</td>\n          <td\n            ng-if="$ctrl.can(\'edit\')"\n            class="lyrics_sync_editor-line_control_cell"\n          >\n            <button\n              ng-if="$ctrl.can(\'sync\')"\n              ng-click="$ctrl.lyrics_synchronization.add_line_at_index(0)"\n              class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n            >&darr;&nbsp;Break</button>\n          </td>\n          <td\n            ng-if="$ctrl.can(\'edit\')"\n            class="lyrics_sync_editor-state_visibility_cell"\n          ></td>\n        </tr>\n        <tr\n          keep-in-view="$index === $ctrl.current_line_index"\n          ng-class="{\'lyrics_sync_editor-line_row--focused\': $index === $ctrl.current_line_index, \'lyrics_sync_editor-line_row--marked\': line.marked, \'lyrics_sync_editor-line_row--fixed\': line.fixed}"\n          ng-repeat="line in $ctrl.lyrics_synchronization.lines"\n          class="lyrics_sync_editor-line_row"\n          ng-if="!line.hidden || $ctrl.showing_hidden_lines"\n        >\n          <td ng-if="$ctrl.can(\'sync\') && $ctrl.can(\'submit\')" class="lyrics_sync_editor-timestamp_cell">\n            <span\n              class="lyrics_sync_editor-timestamp"\n              ng-if="($ctrl.lyrics_synchronization.next_visible_line_index_after_index($ctrl.current_line_index) === $index && $ctrl.position > 0) || ($index === 0 && $ctrl.position === 0)">\n              {{ $ctrl.position | timestamp_for_display:{always_millis: true} }}\n            </span>\n          </td>\n          <td class="lyrics_sync_editor-timestamp_cell">\n            <div\n              class="lyrics_sync_editor-timestamp"\n              ng-class="{\'u-clickable\': $ctrl.can(\'edit\')}"\n              ng-click="$ctrl.edit_line_timestamp_at_index($index)"\n              ng-if="!line._editing_time">\n              <span\n                ng-if="line.timestamp !== null || $index === 0">\n                {{ (line.timestamp || 0) | timestamp_for_display:{always_millis: true} }}\n              </span>\n            </div>\n            <form\n              ng-if="line._editing_time"\n              ng-submit="$ctrl.after_edit_line_timestamp_at_index($index)">\n              <input\n                ng-autofocus\n                lyric-sync-timestamp-input\n                class="square_input u-width_100 lyrics_sync_editor-table_input lyrics_sync_editor-timestamp_input"\n                validators="{in_order: $ctrl.in_order_validator_for_index($index)}"\n                ng-blur="$ctrl.after_edit_line_timestamp_at_index($index)"\n                ng-model="line.timestamp"/>\n            </form>\n          </td>\n          <td class="lyrics_sync_editor-lyric_cell" ng-class="{\'u-clickable\': !line._editing_lyrics, \'lyrics_sync_editor-lyric_cell--gray\': line.hidden}" ng-click="!line._editing_lyrics ? $ctrl.seek_to_index($index) : null">\n            <span\n              class="lyrics_sync_editor-lyric"\n              ng-if="!line._editing_lyrics"\n              ng-dblclick="$ctrl.edit_line_lyrics_at_index($index)"\n            >{{ line.lyrics }}</span>\n            <form\n              ng-if="line._editing_lyrics"\n              ng-submit="$ctrl.after_edit_line_lyrics_at_index($index)">\n              <input\n                ng-autofocus\n                type="text"\n                class="square_input u-width_100 lyrics_sync_editor-table_input"\n                ng-blur="$ctrl.after_edit_line_lyrics_at_index($index)"\n                ng-model="line.lyrics">\n            </form>\n          </td>\n          <td ng-if="$ctrl.can(\'edit\')" class="lyrics_sync_editor-line_control_cell">\n            <div ng-if="$ctrl.can(\'approve\') || $ctrl.can(\'staff_approve\')">\n             <button\n                ng-click="$ctrl.lyrics_synchronization.set_line_at_index_marked($index, !line.marked)"\n                class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n              >{{ line.marked ? \'&check;&nbsp;Unmark\' : \'&cross;&nbsp;Mark\' }}</button>\n            </div>\n            <div ng-if="$ctrl.can(\'sync\')">\n              <button\n                ng-if="!line.added && !line.marked"\n                ng-click="$ctrl.lyrics_synchronization.set_line_at_index_hidden($index, !line.hidden)"\n                class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n              >{{ line.hidden ? \'&check;&nbsp;Show\' : \'&cross;&nbsp;Hide\' }}</button>\n\n              <button\n                ng-if="line.added && !line.marked"\n                ng-click="$ctrl.lyrics_synchronization.remove_line_at_index($index)"\n                class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n              >&cross;&nbsp;Remove</button>\n\n              <button\n                ng-if="!line.marked"\n                ng-click="$ctrl.lyrics_synchronization.add_line_at_index($index + 1)"\n                class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n              >&darr;&nbsp;Break</button>\n\n              <button\n                ng-if="line.marked"\n                ng-click="$ctrl.lyrics_synchronization.set_line_at_index_fixed($index)"\n                class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n              >&check;&nbsp;Fixed</button>\n            </div>\n          </td>\n          <td\n            ng-if="$ctrl.can(\'edit\')"\n            class="lyrics_sync_editor-state_visibility_cell"\n          ></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div class="u-horizontal_margins u-vertical_margins column_layout-column_span column_layout-column_span--secondary rich_text_formatting">\n    <div sticky class="lyrics_sync_editor-controls" sticky-class="lyrics_sync_editor-controls--stuck">\n      <p>\n        <a href ng-click="$ctrl.go_to_home()">&larr; Back to Dashboard</a> |\n        <a ng-href="{{$ctrl.instructions_url}}" target="_blank">View Instructions</a>\n        <span ng-if="$ctrl.lyrics_synchronization.song_id">\n          | <a ng-href="/songs/{{$ctrl.lyrics_synchronization.song_id}}">Song Page</a>\n        </span>\n        <span ng-if="$ctrl.can(\'edit\')">\n          | <a href ng-click="$ctrl.showing_keyboard_shortcuts = !$ctrl.showing_keyboard_shortcuts">Keyboard Shortcuts (?)</a>\n        </span>\n      </p>\n\n      <lyrics-sync-keyboard\n        ng-if="$ctrl.lyrics_synchronization"\n        showing="$ctrl.showing_keyboard_shortcuts"\n      ></lyrics-sync-keyboard>\n\n      <hr>\n\n      <div ng-if="!$ctrl.lyrics_synchronization.song_id">\n        <p><strong>No song page associated with this audio.</strong> Use the "Change Lyrics" tool below to associate a song page with search or by URL.</p>\n      </div>\n\n      <div ng-if="$ctrl.lyrics_synchronization.state === \'preview\'">\n        <p><strong>Previewing new lyrics taken from "{{ $ctrl.lyrics_synchronization.title_with_artists }}".</strong></p>\n      </div>\n\n      <div ng-if="$ctrl.lyrics_synchronization.checked_out_by_other_user">\n        <p><strong>{{ $ctrl.lyrics_synchronization.checked_out_by.login }}</strong> is currently working on this song.</p>\n        <div ng-if="$ctrl.can(\'check_in\')">\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_in\')"\n            class="square_button u-quarter_vertical_margins"\n          >Unlock from {{ $ctrl.lyrics_synchronization.checked_out_by.login }}</button>\n        </div>\n        <hr>\n      </div>\n\n      <div ng-if="$ctrl.can(\'clean_up\') && !$ctrl.redirecting">\n        <div ng-if="$ctrl.can(\'submit\')">\n          <p>Cleaning Up "{{ $ctrl.lyrics_synchronization.title_with_artists }}"</p>\n          <p>Visit the <a href="/songs/{{$ctrl.lyrics_synchronization.song_id}}">main song page</a> to edit the lyrics for synchronization.</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'clean_up\').then($ctrl.go_to_home)"\n            class="square_button square_button--green u-quarter_vertical_margins"\n          >Submit Clean Up</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_in\').then($ctrl.go_to_home)"\n            class="square_button u-quarter_vertical_margins"\n          >Cancel Clean Up</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.skipping = \'clean_up\'"\n            class="square_button u-quarter_vertical_margins"\n          >Skip This Song</button>\n        </div>\n        <div ng-if="$ctrl.can(\'check_out\')">\n          <p>This song is available to <strong>clean up</strong>.</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_out\')"\n            class="square_button u-quarter_vertical_margins">Lock for Clean Up</button>\n        </div>\n        <hr>\n      </div>\n\n      <div ng-if="$ctrl.can(\'sync\') && !$ctrl.redirecting">\n        <div ng-if="$ctrl.can(\'submit\')">\n          <p>Syncing "{{ $ctrl.lyrics_synchronization.title_with_artists }}"</p>\n          <p>Use the player and line selection controls to assign timestamps.</p>\n          <div ng-if="$ctrl.can(\'sync_and_staff_approve\')">\n            <label class="square_checkbox">\n              <input\n                type="checkbox"\n                stop-propagation="click"\n                ng-model="$ctrl.sync_and_staff_approve"\n                mousetrap-input\n              />\n              <div class="text_label">Staff Approve?</div>\n            </label>\n          </div>\n          <button\n            ng-disabled="!$ctrl.lyrics_synchronization.all_lines_timestamped || saving"\n            ng-class="{\'square_button--disabled\': !$ctrl.lyrics_synchronization.all_lines_timestamped || saving}"\n            ng-click="$ctrl.submit_sync().then($ctrl.go_to_home)"\n            class="square_button u-quarter_vertical_margins square_button--green"\n          >Submit Sync</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_in\').then($ctrl.go_to_home)"\n            class="square_button u-quarter_vertical_margins"\n          >Cancel Sync</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.skipping = \'sync\'"\n            class="square_button u-quarter_vertical_margins"\n          >Skip This Song</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.update_state(\'pristine\').then($ctrl.go_to_home)"\n            class="square_button square_button--red u-quarter_vertical_margins"\n            confirm="Are you sure? This will clear existing sync data."\n          >Needs Clean Up</button>\n        </div>\n        <div ng-if="$ctrl.can(\'check_out\')">\n          <p>This song is available to <strong>sync</strong>.</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_out\')"\n            class="square_button u-quarter_vertical_margins"\n          >Lock for Sync</button>\n        </div>\n        <hr>\n      </div>\n\n      <div ng-if="$ctrl.can(\'approve\') && !$ctrl.redirecting">\n        <div ng-if="$ctrl.can(\'submit\')">\n          <p>Approve "{{ $ctrl.lyrics_synchronization.title_with_artists }}"?</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'approve\').then($ctrl.go_to_home)"\n            class="square_button square_button--green u-quarter_vertical_margins"\n          >Approve</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'reject\', {note: $ctrl.note}).then($ctrl.go_to_home)"\n            class="square_button square_button--red u-quarter_vertical_margins"\n          >Reject</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_in\').then($ctrl.go_to_home)"\n            class="square_button u-quarter_vertical_margins"\n          >Cancel Approve</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.skipping = \'approve\'"\n            class="square_button u-quarter_vertical_margins"\n          >Skip This Song</button>\n\n          <textarea class="square_input square_input--full_width u-vertical_margins" ng-model="$ctrl.note"></textarea>\n          <small>Note required for rejection.</small>\n        </div>\n        <div ng-if="$ctrl.can(\'check_out\')">\n          <p>This song is available to <strong>approve</strong>.</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_out\')"\n            class="square_button u-quarter_vertical_margins"\n          >Lock to Approve</button>\n        </div>\n        <hr>\n      </div>\n\n      <div ng-if="$ctrl.can(\'staff_approve\') && !$ctrl.redirecting">\n        <div ng-if="$ctrl.can(\'submit\')">\n          <p>Approve "{{ $ctrl.lyrics_synchronization.title_with_artists }}" as staff?</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'staff_approve\').then($ctrl.go_to_home)"\n            class="square_button square_button--green u-quarter_vertical_margins"\n          >Approve</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'staff_reject\', {note: $ctrl.note}).then($ctrl.go_to_home)"\n            class="square_button square_button--red u-quarter_vertical_margins"\n          >Reject</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_in\').then($ctrl.go_to_home)"\n            class="square_button u-quarter_vertical_margins"\n          >Cancel Approve</button>\n\n          <textarea class="square_input square_input--full_width u-vertical_margins" ng-model="$ctrl.note"></textarea>\n          <small>Note required for rejection.</small>\n        </div>\n        <div ng-if="$ctrl.can(\'check_out\')">\n          <p>This song is available to <strong>staff approve</strong>.</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_out\')"\n            class="square_button u-quarter_vertical_margins"\n          >Lock to Approve</button>\n        </div>\n        <hr>\n      </div>\n\n      <div ng-if="$ctrl.error">\n        <p class=lyrics_sync_editor-error_message>{{$ctrl.error.message}}</p>\n        <hr>\n      </div>\n\n      <media-controls\n        ng-if="$ctrl.media_player"\n        class="u-flex_directive lyrics_sync_editor-media_control"\n        media-player="$ctrl.media_player"\n        variants="{show_time_elapsed: true}"\n      ></media-controls>\n\n      <audio-source-label\n        external-song="$ctrl.lyrics_synchronization.external_song"\n        ng-if="$ctrl.lyrics_synchronization.external_song"\n      ></audio-source-label>\n\n      <button\n        ng-if="!$ctrl.reassociating && $ctrl.can(\'change_song\')"\n        class="square_button square_button--red"\n        ng-click="$ctrl.reassociating = true"\n      >Change Lyrics</button>\n\n      <detailed-song-search\n        class="u-vertical_margins u-display_block"\n        ng-if="$ctrl.reassociating"\n        on-cancel="$ctrl.cancel_reassociation()"\n        on-select="$ctrl.preview_with_song(song)"\n        on-confirm="$ctrl.change_song(song)"\n      ></detailed-song-search>\n\n      <div\n        class="square_form-input_and_label"\n        ng-if="$ctrl.lyrics_synchronization.lines"\n      >\n        <label class="square_checkbox">\n          <input type="checkbox" stop-propagation="click" ng-model="$ctrl.auto_advance" mousetrap-input>\n          <div class="text_label">Auto Advance?</div>\n        </label>\n      </div>\n\n      <button\n        ng-if="$ctrl.can(\'edit\') && !$ctrl.redirecting"\n        class="square_button square_button--green"\n        ng-disabled="$ctrl.saving || !$ctrl.lyrics_synchronization._dirty"\n        ng-class="{\'square_button--disabled\': $ctrl.saving || !$ctrl.lyrics_synchronization._dirty}"\n        ng-click="$ctrl.save()"\n      >{{ $ctrl.saving ? \'Saving...\' : \'Save\' }}</button>\n\n      <button\n        ng-if="$ctrl.can(\'sync\') && $ctrl.can(\'edit\') && !$ctrl.redirecting"\n        class="square_button"\n        ng-disabled="saving"\n        ng-class="{\'square_button--disabled\': saving}"\n        ng-click="$ctrl.showing_hidden_lines = !$ctrl.showing_hidden_lines"\n      >{{ $ctrl.showing_hidden_lines ? \'Stop Showing Hidden\' : \'Show Hidden Lines\' }}</button>\n\n      <hr>\n\n      <table>\n        <tbody>\n          <tr ng-repeat="action in $ctrl.lyrics_synchronization.actions">\n            <td class="lyrics_sync_editor-history_table_cell">\n              Marked <strong>{{action.label}}</strong> by {{action.performed_by_login}}\n              <div ng-if="action.note">\n                <small>"{{action.note}}"</small>\n              </div>\n            </td>\n            <td class="lyrics_sync_editor-history_table_cell">{{action.performed_at | human_readable_datetime:{year: \'numeric\', month: \'numeric\', day: \'numeric\', hour: \'2-digit\', minute: \'2-digit\'} }}</td>\n            <td class="lyrics_sync_editor-history_table_undo_cell"><a href ng-if="$last && $ctrl.can(\'revert_last\') && !$ctrl.redirecting" confirm="Are you sure?" ng-click="$ctrl.revert_action(action)" ng-hide="saving">Revert</a></td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <modal-window ng-if="$ctrl.skipping" on-close="$ctrl.skipping = false">\n    <div class="rich_text_formatting">\n      <h1>What Made You Skip This Song?</h1>\n      <textarea ng-disabled="$ctrl.saving" class="square_input square_input--full_width u-vertical_margins" ng-model="$ctrl.skip_note"></textarea>\n      <button\n        class="square_button u-vertical_margins"\n        ng-disabled="!$ctrl.skip_note || $ctrl.saving"\n        ng-class="{\'square_button--disabled\': !$ctrl.skip_note}"\n        ng-click="$ctrl.skip({verb: $ctrl.skipping, note: $ctrl.skip_note}).then($ctrl.go_to_home)"\n      >Skip</button>\n    </div>\n  </modal-window>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_sync_home.html",'<div>\n  <lyrics-sync-editor\n    ng-if="$ctrl.id"\n    model-id="$ctrl.id"\n    instructions-url="{{ $ctrl.instructions_url }}"\n    go-to-home="$ctrl.navigate_to(\'home\')"\n  ></lyrics-sync-editor>\n  <div ng-if="!$ctrl.id" class="rich_text_formatting lyrics_sync_editor column_layout u-body_bottom_padding">\n    <div class="u-width_100">\n      <h1>Lyrics Synchronization Dashboard</h1>\n      <p ng-if="!$ctrl.navigating">\n        <a ng-href="{{:: $ctrl.instructions_url }}" target="_blank">Instructions</a>\n      </p>\n\n      <div ng-if="$ctrl.tasks.length">\n        <hr>\n        <button\n          class="square_button u-quarter_vertical_margins u-quarter_horizontal_margins"\n          ng-repeat="task in $ctrl.tasks"\n          ng-click="$ctrl.start(task.verb)"\n          ng-disabled="!task.verb || $ctrl.checked_out.length || $ctrl.assignments.length"\n          ng-class="{\'square_button--disabled\': !task.verb || $ctrl.checked_out.length || $ctrl.assignments.length}"\n        >{{ task.label }}</button>\n        <small\n          class="u-display_block u-quarter_vertical_margins u-quarter_horizontal_margins"\n          ng-if="$ctrl.checked_out.length">\n          Can\'t start a new task until current one is completed, skipped, or unlocked.\n        </small>\n\n        <small\n          class="u-display_block u-quarter_vertical_margins u-quarter_horizontal_margins"\n          ng-if="$ctrl.assignments.length && !$ctrl.checked_out.length">\n          Can\'t start a new task until assigned ones have been completed.\n        </small>\n      </div>\n      <div ng-if="$ctrl.checked_out.length">\n        <hr>\n        <h2>Currently Locked Tasks:</h2>\n        <table class="lyrics_sync-task_table">\n          <tbody>\n            <tr ng-repeat="sync in $ctrl.checked_out">\n              <td class="lyrics_sync-task_table_song_name">\n                <a href ng-click="$ctrl.navigate_to(sync.id)">\n                  {{ sync.title_with_artists }}\n                </a>\n              </td>\n              <td>\n                <button class="square_button" ng-click="$ctrl.check_in(sync)">\n                  Unlock\n                </button>\n                <br>\n                <small ng-if="sync.assigned">Assigned</span>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div ng-if="$ctrl.assignments.length">\n        <hr>\n        <h2>Assigned Tasks:</h2>\n        <table class="lyrics_sync-task_table">\n          <tbody>\n            <tr ng-repeat="sync in $ctrl.assignments">\n              <td class="lyrics_sync-task_table_song_name">\n                <a href ng-click="$ctrl.navigate_to(sync.id)">\n                  {{ sync.title_with_artists }}\n                </a>\n              </td>\n              <td>\n                <button class="square_button" ng-click="$ctrl.check_out(sync)">\n                  Start\n                </button>\n              </td>\n              <td></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_sync_keyboard.html",'<table ng-show="showing">\n  <tbody>\n    <tr ng-if=":: definition.label" ng-repeat="definition in :: definitions">\n      <td><em ng-bind-html=":: definition.label"></em></td>\n      <td>{{:: definition.description }}</td>\n    </tr>\n  </tbody>\n</table>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("manage_chart_item.html","<div>\n  <placeholder-spinner ng-if=\"$ctrl.loading\"></placeholder-spinner>\n  <div ng-if=\"!$ctrl.loading\">\n    <div ng-click=\"$ctrl.toggle_excluded()\">\n      {{ 'charts.actions.' + ($ctrl.excluded ? 'allow_in_charts' : 'exclude_from_charts') | i18n }}\n    </div>\n  </div>\n</div>\n")}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("manage_roles.html",'<div class="u-vertical_margins">\n  <div ng-repeat="role in $ctrl.user.roles_for_display" class="text_label text_label--gray">\n    {{ role | roleHumanName }}<role-icon role="role" has-checky="role == \'verified_artist\'"></role-icon>\n  </div>\n</div>\n\n<div class="u-vertical_margins rich_text_formatting">\n  <ul>\n    <li ng-repeat="role in $ctrl.user.calculated_roles">{{role}}</li>\n  </ul>\n</div>\n\n<div ng-repeat="role in $ctrl.user_authority_roles" ng-if="$ctrl.has_role(role)">\n  <hr class="hr hr--gray">\n  <div class="u-vertical_margins">\n    <div class="manage_roles-role">\n      <div class="text_label text_label--gray manage_roles-role_label">{{ role | roleHumanName }}<role-icon role="role"></role-icon></div>\n      <button\n        ng-click="$ctrl.grant(role, false)"\n        ng-if="$ctrl.can_toggle(role)"\n        class="square_button square_button--purple"\n      >De-{{ role | roleHumanName }}</button>\n    </div>\n    <p class="u-half_top_margin rich_text_formatting" ng-if="$ctrl.role_grant(role)">\n      <a ng-href="{{$ctrl.role_grant(role).actor.url}}">{{$ctrl.role_grant(role).actor.login}}</a> granted {{$ctrl.user.login}} the {{ role | roleHumanName }} role <span am-time-ago="$ctrl.role_grant(role).occurred_at*1000"></span>.\n    </p>\n    <p class="u-half_top_margin" ng-if="!$ctrl.role_grant(role)">\n      Unfortunately, we don\'t know who granted {{$ctrl.user.login}} the {{ role | roleHumanName }} role.\n    </p>\n  </div>\n</div>\n\n<div ng-repeat="role in $ctrl.user_authority_roles" ng-if="!$ctrl.has_role(role) && $ctrl.can_toggle(role)">\n  <hr class="hr hr--gray">\n  <div class="u-vertical_margins">\n    <div\n      ng-if="$ctrl.errors[role]"\n      ng-repeat="error in $ctrl.errors[role]"\n      class="form_message form_message--error text_label"\n    >{{ error }}</div>\n\n    <button\n      ng-click="$ctrl.grant(role, true)"\n      class="square_button square_button--purple"\n    ><role-icon role="role"></role-icon>Grant {{$ctrl.user.login}} the {{ role | roleHumanName }} role</button>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("markdown_preview.html",'<standard-rich-content html="html_content"></standard-rich-content>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("marquee_ad.html",'<div\n  class="marquee_ad"\n  ng-class="{\n    \'marquee_ad--permanently_collapsed\': $ctrl.permanently_collapsed,\n    \'marquee_ad--marquee_not_ready\': !$ctrl.marquee_ready\n  }"\n>\n  <dfp-ad\n    name="{{$ctrl.name}}"\n    on-filled="$ctrl.on_filled(render_event, custom_values)"\n  ></dfp-ad>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("media_controls.html",'<div class="media_control">\n  <div\n    class="media_control-button_group"\n    stop-propagation="click"\n    ng-click="media.api.playpause()"\n    ng-if="!hide_playpause"\n  >\n    <play-pause-button playing="media.state.is_playing" loading="media.state.is_loading"></play-pause-button>\n  </div>\n\n  <div\n    ng-if="variants.show_time_elapsed"\n    class="media_control-timer media_control-timer--left_side"\n    ng-bind="(media.state.time_elapsed || 0) | timestamp_for_display:{skip_millis:true}"\n  ></div>\n\n  <div class="media_control-scrubber">\n    <div\n      class="media_control-scubber-handle_container"\n      scrubber\n      scrub-percentage="scrub_percentage"\n      scrubbed="media.api.seek_to(percentage)"\n    >\n      <span\n        class="media_control-scubber-handle"\n        ng-style="{left: ((scrub_percentage !== undefined ? scrub_percentage : media.state.percentage) * 100).toFixed(2) + \'%\'}"\n      ></span>\n    </div>\n  </div>\n  <div class="media_control-timer" ng-bind="(media.state.time_remaining || 0) | timestamp_for_display:{skip_millis:true}"></div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("media_player.html",'<div\n  class="song_media_controls u-bottom_margin show_tiny_edit_button_on_hover"\n  ng-if="$ctrl.media"\n  ng-switch="$ctrl.media.provider"\n>\n  <div\n    class="song_media_controls-controls"\n    ng-class="{\n      \'song_media_controls-controls--half_width\': !$ctrl.sticky_offset && $ctrl.show_video_player && $ctrl.media.provider === \'youtube\'\n    }"\n    sticky="$ctrl.sticky_offset && $ctrl.played_once"\n    sticky-use-parent-as-wrapper\n    sticky-class="song_media_controls-controls--docked"\n    sticky-offset="{{$ctrl.sticky_offset}}"\n  >\n    <div class="song_media_controls-playpause_container">\n      <div\n        class="song_media_controls-playpause"\n        stop-propagation="click"\n        ng-click="$ctrl.play(); $ctrl.show_video_player = true"\n      >\n        <play-pause-button\n          loading="$ctrl.media_player.state.is_loading"\n          playing="$ctrl.media_player.state.is_playing"\n        ></play-pause-button>\n      </div>\n    </div>\n\n    <media-controls\n      class="u-flex_directive"\n      media-player="$ctrl.media_player"\n      hide-playpause="true"\n    ></media-controls>\n\n    <div class="song_media_controls-provider">\n      <a\n        href="{{ $ctrl.media.url }}"\n        target="_blank"\n        stop-propagation="click"\n      >\n        <div class="song_media_controls-provider-icon">\n          <svg class="inline_icon inline_icon--purple inline_icon--x_small_reading_size" ng-src="$ctrl.media.provider + \'.svg\'"></svg>\n          <div\n            ng-if="$ctrl.media.provider === \'soundcloud\'"\n            class="song_media_controls-provider-icon-soundcloud_text"\n          >\n            <div class="song_media_controls-provider-icon-soundcloud_text-line_1">powered by</div>\n            <div class="text_label song_media_controls-provider-icon-soundcloud_text-line_2">SOUNDCLOUD</div>\n          </div>\n        </div>\n\n        <span\n          ng-bind="$ctrl.media.attribution"\n          class="text_label song_media_controls-provider-attribution"\n        ></span>\n      </a>\n    </div>\n  </div>\n\n  <div\n    class="tiny_edit_button song_media_controls-edit_button"\n    ng-if="$ctrl.can_edit"\n    ng-click="$ctrl.on_edit()"\n    stop-propagation="click"\n  >\n    <svg src="pencil.svg" class="tiny_edit_button-svg"></svg>\n  </div>\n\n  <div\n    ng-switch-when="youtube"\n    class="song_media_controls-docked_video"\n    ng-show="$ctrl.media_player.state.is_loaded && $ctrl.show_video_player"\n  >\n    <youtube-player\n      controls="true"\n      fullscreen="true"\n      src="$ctrl.media.url"\n      start="$ctrl.media.start"\n      yields-api="$ctrl.media_player.api = api"\n      yields-state="$ctrl.media_player.state = state"\n    ></youtube-player>\n    <div\n      class="song_media_controls-close_player u-clickable"\n      ng-click="$ctrl.media_player.api.pause(); $ctrl.show_video_player = false"\n      stop-propagation="click"\n    >\n      <svg class="inline_icon inline_icon--white" src="x.svg"></svg>\n    </div>\n  </div>\n\n  <soundcloud\n    ng-switch-when="soundcloud"\n    soundcloud-src="$ctrl.media.url"\n    ng-hide="::true"\n    yields-api="$ctrl.media_player.api = api"\n    yields-state="$ctrl.media_player.state = state"\n  ></soundcloud>\n\n  <global-message ng-if="$ctrl.can_edit && $ctrl.media_player.state.has_errored" ng-cloak>\n    <span>There was a problem loading the media player</span>\n    <span class="text_label text_label--white text_label--button" ng-click="$ctrl.on_edit()" stop-propagation="click">Fix it</span>\n  </global-message>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("merge_artist_form.html",'<div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label u-bottom_margin"\n>{{ error }}</div>\n\n<div\n    ng-if="$ctrl.artist_merge_complete"\n    class="form_message form_message--success text_label u-bottom_margin"\n>{{ \'artist.merge_request_complete_message\' | i18n }}</div>\n\n<form\n    name="merge_form"\n    ng-submit="$ctrl.merge_artist()"\n    ng-model-options="{updateOn: \'submit\'}"\n    ng-if="$ctrl.can(\'merge\', $ctrl.artist) && !$ctrl.artist_merge_complete"\n>\n\n  <div\n      class="square_form-standard_element_margin"\n  >\n    If {{:: $ctrl.artist.name }} is an alternate name for another artist (e.g., "Tupac" is an alternate name for "2Pac"),\n    you can move {{:: $ctrl.artist.name }}\'s songs into that artist and DELETE {{:: $ctrl.artist.name }}.\n  </div>\n\n  <div ng-if="$ctrl.show_warning" class="u-bottom_margin">\n    <input\n        ng-model="$ctrl.artist_name_to_merge_with"\n        autocomplete-with="artist"\n        autofocus\n        class="square_input square_form-standard_element_margin"\n        placeholder="Enter the artist\'s name">\n\n    <span class="form_message form_message--error text_label">\n      (this action cannot be undone! If you abuse this tool you will corrupt data and will immediately lose your moderator status.)\n    </span>\n  </div>\n\n  <button\n      class="square_button square_button--red u-small_bottom_margin"\n      ng-class="{\'square_button--waiting\': $ctrl.saving}"\n      ng-disabled="$ctrl.saving"\n      type="submit"\n  >\n    <span ng-if="!$ctrl.show_warning">I Understand, Let me do it</span>\n    <span ng-if="$ctrl.show_warning">Submit</span>\n  </button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("messages_inbox.html",'<div ng-style="{minHeight: $ctrl.modal_open && $ctrl.modal_dimensions.height + 32}">\n  <div class="feed_dropdown-header">\n    <span class="text_label">{{:: \'header.messages_inbox\' | i18n }}</span>\n    <span ng-click="$ctrl.composing = true; $ctrl.on_modal_open()" class="feed_dropdown-header_action">Send a new message</span>\n    <modal-window\n      ng-if="$ctrl.composing"\n      on-close="$ctrl.attempt_close(reason.close_button || !$ctrl.is_form_dirty())"\n      variants="{full_height: !$ctrl.embed, no_margin: $ctrl.embed, internal_close: $ctrl.embed}"\n      content-dimensions="$ctrl.modal_dimensions"\n    >\n      <new-conversation yields-is-dirty="$ctrl.is_form_dirty = is_dirty"></new-conversation>\n    </modal-window>\n  </div>\n  <conversations\n    refresh-at="$ctrl.refresh_at"\n    visible="$ctrl.opened"\n    on-conversation-read="$ctrl.on_conversation_read(unread_messages_count)"\n    on-modal-open="$ctrl.on_modal_open()"\n    on-modal-close="$ctrl.on_modal_close()"\n    embed="$ctrl.embed"\n    modal-dimensions="$ctrl.modal_dimensions"\n  ></conversations>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("metadata_custom_performance_role_input.html",'<div ng-repeat="customPerformanceRole in customPerformanceRoles" class="square_form-sub_section">\n  <metadata-input-and-label label="Additional role" is-disabled="is_disabled" errors="ctrl.errors_for_label(customPerformanceRole.label)">\n    <input\n      ng-model="customPerformanceRole.label"\n      autocomplete-with="customPerformanceRole"\n      class="square_input square_form-standard_element_margin"\n      placeholder="{{role_field_placeholder}}"\n      ng-disabled="isDisabled">\n    </input>\n  </metadata-input-and-label>\n\n  <metadata-input-and-label label="Artists in the role" is-disabled="is_disabled">\n    <autocomplete-tags-input\n      bind-to="customPerformanceRole.artists"\n      name="artist"\n      autocomplete-model="artist"\n      placeholder="{{artist_field_placeholder}}"\n      input-classes="tags_input square_input square_form-standard_element_margin"\n      ng-disabled="isDisabled">\n    </autocomplete-tags-input>\n  </metadata-input-and-label>\n\n  <div\n    class="square_form-sub_section-remove"\n    ng-click="ctrl.remove_custom_performance(customPerformanceRole)"\n  >\n    <svg class="inline_icon" src="x.svg"></svg>\n  </div>\n</div>\n\n<span class="text_label text_label--button text_label--purple" ng-click="ctrl.add_new_custom_performance()" ng-if="customPerformanceRoles && !isDisabled">+ Add Additional Credits</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("metadata_input_and_label.html",'<div class="square_form-input_and_label" ng-class="{\'square_form-input_and_label--half_width\': !full, \'square_form-input_and_label--error\': errors.length}">\n  <div class="text_label" ng-class="{\'text_label--gray\': is_disabled}">\n    {{label}}\n    <span ng-if="is_disabled" tether-drop-target>\n      <svg src="lock.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3 inline_icon--gray"></svg>\n      <tether-drop show-on="hover">\n        <div class="tag_label tag_label--purple_background u-hair_horizontal_margins">{{\'can_can.access_denied\' | i18n}}</div>\n      </tether-drop>\n    </span>\n    <div ng-repeat="error in errors" class="form_message form_message--error">{{error}}</div>\n  </div>\n  <ng-transclude></ng-transclude>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_album_card.html",'<a href="{{$ctrl.album.url}}" title="{{$ctrl.album.name}}" class="mini_card" ng-class="{\'mini_card--small\': $ctrl.variants.small}">\n  <div\n    class="mini_card-thumbnail clipped_background_image--background_fill"\n    clipped-background-image=":: $ctrl.album.cover_art_thumbnail_url"\n  ></div>\n  <div class="mini_card-info">\n    <div class="mini_card-title_and_subtitle">\n      <div class="mini_card-title">{{$ctrl.album.name}}</div>\n      <div class="mini_card-subtitle">{{$ctrl.album.release_date_components.year}}</div>\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_annotatable_card.html",'<a ng-href="{{ $ctrl.object.url }}" class="mini_card--transparent mini_card" ng-class="{\'mini_card--small\': $ctrl.variants.small}" set-class-before-navigate="mini_card--active">\n  <div\n    class="mini_card-thumbnail clipped_background_image--background_fill"\n    clipped-background-image=":: $ctrl.object.image_url"\n  ></div>\n  <div class="mini_card-info">\n    <div class="mini_card-title_and_subtitle">\n      <div class="mini_card-title">{{:: $ctrl.object.title }}</div>\n      <div class="mini_card-subtitle">{{ $ctrl.object.context }}</div>\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_article_card.html",'<a\n  ng-href="{{$ctrl.article.url}}"\n  title="{{$ctrl.article.title}}"\n  class="mini_article_card"\n>\n  <div\n    class="mini_article_card-thumbnail clipped_background_image--background_fill"\n    clipped-background-image=":: $ctrl.article.preview_image"\n  ></div>\n\n  <div class="mini_article_card-title">{{$ctrl.article.title}}</div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_artist_card.html",'<a ng-href="{{ $ctrl.artist.url }}" class="mini_card" set-class-before-navigate="mini_card--active">\n  <div class="mini_card-thumbnail">\n    <div\n      class="user_avatar user_avatar--large clipped_background_image--background_fill"\n      clipped-background-image=":: $ctrl.artist.image_url"\n    ></div>\n  </div>\n  <div class="mini_card-info mini_card-info--centered">\n    <div class="mini_card-title">{{:: $ctrl.artist.name }}</div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_song_card.html",'<a ng-href="{{ $ctrl.song.url }}" class="mini_card" ng-class="{\'mini_card--small\': $ctrl.variants.small}">\n  <div\n    class="mini_card-thumbnail clipped_background_image--background_fill"\n    clipped-background-image=":: $ctrl.song.song_art_image_thumbnail_url"\n  >\n    <div class="mini_card-chart_number" ng-if="$ctrl.number">\n      <div class="mini_card-chart_number-square">\n        <div>{{$ctrl.number}}</div>\n      </div>\n    </div>\n  </div>\n  <div class="mini_card-info">\n    <div class="mini_card-title_and_subtitle">\n      <div class="mini_card-title">{{:: $ctrl.song.title }}</div>\n      <div class="mini_card-subtitle">\n        {{ $ctrl.song.primary_artist.name }}<span ng-if="$ctrl.non_primary_artist_present">, <span class="mini_card-muted_subtitle">{{$ctrl.artist.name}}</span></span>\n      </div>\n    </div>\n    <div\n      ng-if="$ctrl.excerpt_with_markup"\n      class="mini_card-lyric_excerpt"\n      ng-bind-html="$ctrl.excerpt_with_markup"\n    ></div>\n    <div ng-if="!$ctrl.excerpt_with_markup">\n      <div ng-if="$ctrl.song.lyrics_state === \'complete\'" class="mini_card-metadata">\n        <svg\n          ng-if=":: $ctrl.song.verified_annotations"\n          src="checky.svg"\n          class="mini_card-artist_and_metadata-checky checky"\n        ></svg>\n        <span\n          ng-if=":: $ctrl.song.stats.hot"\n          class="mini_card-artist_and_metadata-hot"\n        >\n          <svg src="fire.svg" class="inline_icon inline_icon--reading_size"></svg>\n          {{ $ctrl.song.stats.concurrents + 1 | abbreviateBigNumber }}\n        </span>\n        <span ng-if=":: $ctrl.song.stats.pageviews">\n          <svg src="eye.svg" class="inline_icon inline_icon--up_1"></svg>\n          {{ $ctrl.song.stats.pageviews | abbreviateBigNumber }}\n        </span>\n        <span\n          ng-if="$ctrl.variants.show_unreviewed_count"\n          class="mini_card-artist_and_metadata-unreviewed_annotations"\n        >\n          <svg src="circle.svg" class="inline_icon inline_icon--up_1"></svg>\n          {{$ctrl.song.stats.unreviewed_annotations}}\n        </span>\n      </div>\n      <div ng-if="$ctrl.song.lyrics_state === \'unreleased\'" class="mini_card-metadata">\n        {{ \'song.lyrics_state.unreleased.indicator\' | i18n }}\n      </div>\n      <div ng-if="$ctrl.song.lyrics_state === \'incomplete\'" class="mini_card-metadata">\n        {{ \'song.lyrics_state.incomplete.indicator\' | i18n }}\n      </div>\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_user_card.html",'<a ng-href="{{ $ctrl.user.url }}" class="mini_card" set-class-before-navigate="mini_card--active">\n  <div class="mini_card-thumbnail">\n    <div\n      class="user_avatar user_avatar--large clipped_background_image--background_fill"\n      clipped-background-image=":: $ctrl.user.avatar.medium.url"\n    ></div>\n  </div>\n  <div class="mini_card-info mini_card-info--centered">\n    <div class="mini_card-title">{{:: $ctrl.user.name }}</div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_video_card.html",'<a\n  ng-href="{{:: $ctrl.video.url}}"\n  title="{{:: $ctrl.video.title}}"\n  class="mini_card"\n>\n  <div\n    class="mini_card-thumbnail mini_card-thumbnail--video clipped_background_image--background_fill"\n    clipped-background-image=":: $ctrl.video.poster_url"\n  >\n    <svg src="play.svg" class="play_button"></svg>\n  </div>\n\n  <div class="mini_card-info">\n    <div class="mini_card-title">{{:: $ctrl.video.title}}</div>\n    <div class="mini_card-metadata">\n      <span>\n        <svg src="clock.svg" class="inline_icon inline_icon--reading_size inline_icon--up_1"></svg>\n        {{:: $ctrl.video.duration | millisToDuration }}\n      </span>\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("missing_metadata_form.html",'<form ng-submit="$ctrl.submit()" submit-on-cmd-enter>\n  <div ng-repeat="error in $ctrl.errors" class="form_message form_message--error">{{error}}</div>\n\n  <div\n    ng-repeat="(key, type) in $ctrl.missing_params track by key"\n    class="missing_metadata-row"\n  >\n    <div class="u-half_bottom_margin">{{$ctrl.object._type + \'.metadata.\' + key | i18n}}</div>\n\n    <div class="missing_metadata-input" ng-click="$ctrl.show_full_form = true">\n      <square-item-and-iq\n        show-pill="!$ctrl.show_full_form && $ctrl.params.length === 1"\n        iq-params="$ctrl.iq_api.edit_metadata"\n        variants="{full_width: true}"\n      >\n        <div ng-switch="type">\n          <div ng-switch-when="autocomplete_artists">\n            <autocomplete-tags-input\n              bind-to="$ctrl.changes[key]"\n              autocomplete-model="artist"\n              placeholder="{{$ctrl.placeholder}}"\n              input-classes="tags_input square_input u-display_block"\n            ></autocomplete-tags-input>\n          </div>\n          <div ng-switch-when="autocomplete_albums">\n            <autocomplete-tags-input\n              bind-to="$ctrl.changes[key]"\n              autocomplete-model="album"\n              autocomplete-options="{only_editable: true}"\n              placeholder="{{$ctrl.placeholder}}"\n              input-classes="tags_input square_input u-display_block"\n            ></autocomplete-tags-input>\n          </div>\n          <div ng-switch-when="date_components">\n            <component-date-input ng-model="$ctrl.changes[key]"></component-date-input>\n          </div>\n          <div ng-switch-default>\n            <input\n              ng-model="$ctrl.changes[key]"\n              class="square_input square_input--full_width"\n              type="{{type}}"\n            >\n          </div>\n        </div>\n      </square-item-and-iq>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.show_full_form" class="u-small_top_margin">\n    <square-item-and-iq\n      show-pill="$ctrl.show_full_form"\n      iq-params="$ctrl.iq_api.edit_metadata"\n    >\n      <button\n        type="submit"\n        class="square_button"\n        ng-class="{\'square_button--waiting\': $ctrl.saving}"\n        ng-disabled="$ctrl.saving"\n      >{{$ctrl.saving ? \'Saving\' : \'Save\'}}</button>\n    </square-item-and-iq>\n    <span\n      ng-if="!$ctrl.saving"\n      ng-click="$ctrl.cancel()"\n      class="square_button square_button--transparent square_button--gray"\n    >Cancel</span>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("modal_window.html",'<div\n  class="modal_window"\n  ng-class="{\'modal_window--center_content_width_window\': variants.width_of_contents}"\n  ng-hide="hidden"\n  ng-body-class="{\'u-noscroll\': !hidden, \'u-dark_overlay\': !hidden}"\n  ng-click="close({clicked_outside_modal: true})"\n  stop-propagation="click"\n>\n  <kb shortcut="esc" action="close({esc: true})"></kb>\n  <div\n    class="modal_window-content"\n    ng-class="{\n      \'modal_window-content--full_height\': variants.full_height || !!media,\n      \'modal_window-content--narrow_width\': variants.narrow_width,\n      \'modal_window-content--window_width\': variants.window_width,\n      \'modal_window-content--no_max_width\': variants.no_max_width,\n      \'modal_window-content--no_background\': variants.no_background,\n      \'modal_window-content--white_background\': variants.white_background,\n      \'modal_window-content--dark_background\': variants.dark_background,\n      \'modal_window-content--vertically_center_contents\': variants.vertically_center_contents,\n      \'modal_window-content--vertically_center_self\': variants.vertically_center_self,\n      \'modal_window-content--width_of_contents\': variants.width_of_contents,\n      \'modal_window-content--with_media\': !!media,\n    }"\n    stop-propagation="click"\n    click-outside-target\n    ng-style="{\n      top: content_dimensions.top + \'px\',\n      height: content_dimensions.height + \'px\',\n      width: content_dimensions.width + \'px\',\n    }"\n  >\n    <ng-transclude\n      ng-class="{\n        \'u-width_100\': variants.full_width_parent,\n        \'modal_window-content-transclude\': !!media\n      }"\n    ></ng-transclude>\n    <div ng-if="media" class="modal_window-content-media">\n      <media-player\n        media-sources="media"\n        can-edit="false"\n      ></media-player>\n    </div>\n\n    <div\n      ng-if="variants.internal_close"\n      class="modal_window-close_button modal_window-close_button--internal"\n      ng-click="close({close_button: true})"\n    >\n      <svg src="x.svg" class="modal_window-close_button-svg"></svg>\n    </div>\n  </div>\n\n  <div\n    ng-if="!variants.internal_close"\n    class="modal_window-close_button"\n    ng-click="close({close_button: true})"\n  >\n    <svg src="x.svg" class="modal_window-close_button-svg"></svg>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("new_conversation.html",'<div ng-if="!conversation">\n  <div class="text_label text_label--purple form_section_label">Send a new message</div>\n  <compose-message on-sent="ctrl.did_send(message)" yields-is-dirty="yields_is_dirty({is_dirty: is_dirty})"></compose-message>\n</div>\n<conversation-messages ng-if="conversation" conversation="conversation"></conversation-messages>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("other_users_with_ip.html",'<scrollable-data src="$ctrl.infinite_scroll_data" repeat-with="user" scroll-mechanism="button">\n  <a class="u-display_block u-break_word" ng-href="{{user.url}}">{{user.login}}</a>\n  <empty>\n    <div class="u-top_margin">No other users with IP.</div>\n  </empty>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("paginated_accomplishments.html",'<div class="top_accomplishments u-horizontal_margins u-vertical_margins ng-scope">\n  <span class="top_accomplishments-title text_label text_label--gray">{{:: \'profile_page.top_accomplishment.other\' | i18n }}</span>\n  <div class="u-horizontal_margins">\n    <select-dropdown\n      ng-if="$ctrl.managing"\n      on-select="$ctrl.visibility = selection.value"\n      options="$ctrl.filter_options"\n      variants=":: {right_aligned: true}"\n    ></select-dropdown>\n  </div>\n  <span\n    ng-if="$ctrl.can(\'manage_accomplishments\')"\n    class="text_label text_label--button text_label--purple"\n    ng-click="$ctrl.toggle_managing()"\n  >{{ $ctrl.managing ? \'Done\' : \'Manage\' }}</span>\n</div>\n\n<div class="white_container">\n  <div class="leaderboard">\n    <div class="leaderboard-row leaderboard-row--no_padding">\n      <span class="leaderboard-rank leaderboard-label">Rank</span>\n      <span class="leaderboard-user leaderboard-label">Artist</span>\n      <span class="leaderboard-sort_value leaderboard-label">Artist IQ</span>\n      <span ng-if="$ctrl.managing" class="leaderboard-actions text_label text_label--x_small_text_size text_label--gray">Actions</span>\n    </div>\n    <scrollable-data\n      src="$ctrl.scrollable_data"\n      repeat-with="leaderboard_row"\n      scroll-mechanism="button"\n      button-classes="leaderboard-load_more"\n    >\n      <div\n        ng-if="(leaderboard_row.hidden ? \'hidden\' : \'visible\') === $ctrl.visibility || $ctrl.visibility === \'all\'"\n        class="leaderboard-row leaderboard-row--no_padding"\n        ng-class="{\'leaderboard-row--no_border\': $last, \'leaderboard-row--disabled\': leaderboard_row.hidden}"\n      >\n        <span class="leaderboard-rank" ng-bind="leaderboard_row.iq_rank"></span>\n        <span class="leaderboard-user"><artist-badge artist="leaderboard_row.artist"></artist-badge></span>\n        <span class="leaderboard-sort_value"><span ng-if="$first">+</span>{{leaderboard_row.iq_earned | number:0 }}</span>\n        <span ng-if="$ctrl.managing" class="leaderboard-actions">\n          <span class="text_label u-clickable" ng-click="$ctrl.toggle(leaderboard_row)" ng-class="{\'text_label--purple\': !leaderboard_row.hidden, \'text_label--gray\': leaderboard_row.hidden}">\n            {{ leaderboard_row.hidden ? \'Unhide\' : \'Hide\' }}\n          </span>\n        </span>\n      </div>\n    </scrollable-data>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("paginated_leaderboard.html",'<div class="leaderboard">\n  <scrollable-data\n    src="$ctrl.scrollable_data"\n    repeat-with="leaderboard_row"\n    scroll-mechanism="button"\n    button-classes="leaderboard-load_more"\n    on-empty="$ctrl.on_empty()"\n  >\n    <user-attribution class="leaderboard-row" rank="$index + 1" object="leaderboard_row" ng-class="{\'leaderboard-row--no_border\': $last}"></user-attribution>\n  </scrollable-data>\n  <div\n    ng-if="$ctrl.extra_info"\n    class="text_label text_label--purple text_label--x_small_text_size leaderboard-extra_info"\n    ng-class="{\'leaderboard-extra_info--has_next\': $ctrl.scrollable_data.has_next()}"\n  >{{$ctrl.extra_info}}</div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("placeholder_spinner.html",'<div\n  class="{{ placeholderClasses }} placeholder"\n  ng-class="{\'placeholder-spinner--inline\': variants.inline}"\n>\n  <svg\n    class="{{ variants.inline? \'placeholder-spinner placeholder-spinner--inline\' : \'placeholder-spinner\' }}"\n    src="circle.svg"\n  ></svg>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("placeholder_text.html",'<p class="placeholder-text">\n  <div class="placeholder-text-line placeholder-text-line--short"></div>\n  <div class="placeholder-text-line placeholder-text-line--long"></div>\n  <div class="placeholder-text-line placeholder-text-line--medium"></div>\n</p>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("play_pause_button.html",'<span ng-hide="playing">\n  <svg src="play_transparent.svg" class="media_control-button"></svg>\n</span>\n<span ng-show="playing">\n  <svg src="pause_transparent.svg" class="media_control-button"></svg>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_admin_pane.html",'<div ng-if="$ctrl.can(\'view_admin_info\')">\n  <div class="text_label text_label--gray u-horizontal_margins u-top_margin u-half_bottom_margin">Admin Info</div>\n  <div class="white_container">\n    <admin-user-info user="$ctrl.user"></admin-user-info>\n  </div>\n</div>\n\n<div ng-if="$ctrl.can(\'view_roles\')">\n  <div class="text_label text_label--gray u-horizontal_margins u-top_margin u-half_bottom_margin">Manage Roles</div>\n  <div class="white_container">\n    <manage-roles user="$ctrl.user"></manage-roles>\n  </div>\n</div>\n\n<div ng-if="$ctrl.can(\'toggle_verification_status\')">\n  <div class="text_label text_label--gray u-horizontal_margins u-top_margin u-half_bottom_margin">Manage Verification</div>\n  <div class="white_container">\n    <artist-verification user="$ctrl.user" artist="$ctrl.user.artist"></artist-verification>\n  </div>\n</div>\n\n<div ng-if="$ctrl.can_moderate">\n  <div class="text_label text_label--gray u-horizontal_margins u-top_margin u-half_bottom_margin">Moderation</div>\n  <div class="white_container">\n    <user-moderation user="$ctrl.user"></user-moderation>\n  </div>\n</div>\n\n<div class="u-top_margin white_container" ng-if="$ctrl.can(\'view_admin_info\')">\n  <expandable-container title="Other Users With IP" class="u-top_margin">\n    <other-users-with-ip user="$ctrl.user"></other-users-with-ip>\n  </expandable-container>\n</div>\n\n<div class="u-top_margin white_container" ng-if="$ctrl.can(\'view_spam_status\')">\n  <expandable-container title="Spam Status">\n    <spam-status user="$ctrl.user"></spam-status>\n  </expandable-container>\n</div>\n\n<div ng-if="$ctrl.can(\'view_tracked_errors\')" class="u-top_margin white_container">\n  <a\n    class="text_label text_label--purple text_label--button"\n    ng-href="{{$ctrl.view_errors_link}}"\n    target="_blank"\n  >View Bugsnag Errors &rarr;</a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_all_activity.html",'<div class="profile_list_item profile_list_item--large_padding u-x_large_top_margin">\n  <select-dropdown\n    ng-model="$ctrl.activity_type"\n    options="$ctrl.activity_types"\n  ></select-dropdown>\n</div>\n\n<scrollable-data src="$ctrl.activity_type.profile_activity_scrollable_data" repeat-with="line_item" scroll-mechanism="infinite_scroll" auto-reset="true">\n  <inbox-line-item object=":: line_item" variants="::{active_display:true}"></inbox-line-item>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_annotation.html",'<div class="standalone_annotation" ng-if="!$ctrl.deleted">\n  <div class="u-large_bottom_margin" ng-if="!($ctrl.variants && $ctrl.variants.hide_annotatable)">\n    <mini-annotatable-card object="$ctrl.referent.annotatable"></mini-annotatable-card>\n  </div>\n\n  <div class="standalone_annotation-referent_fragment" ng-class="{\'standalone_annotation-referent_fragment--with_caret\': !($ctrl.variants && $ctrl.variants.hide_annotatable)}">\n    <referent-fragment>\n      <a\n        ng-href="{{ $ctrl.referent.url }}"\n        class="referent referent--accent_font referent--line_break"\n        ng-class="[\'referent--\' + $ctrl.referent_display_mode]"\n      >{{ $ctrl.referent.is_image ? \'[Image]\' : $ctrl.referent.fragment }}</a>\n    </referent-fragment>\n  </div>\n  <div class="standalone_annotation-annotation">\n    <annotation\n      variants="{hideComments: true}"\n      object="$ctrl.annotation"\n      referent="$ctrl.referent"\n      annotatable-title="$ctrl.referent.annotatable.title"\n    ></annotation>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_artist_pane.html",'<div class="u-bottom_margin">\n  <relevant-videos\n    object="$ctrl.artist"\n    variants="{two_across: true}"\n    placement="sidebar"\n    container-classes="white_container"\n  ></relevant-videos>\n</div>\n\n<div class="white_container" ng-if="$ctrl.user_signed_in || $ctrl.artist.description_preview">\n  <description-referent object="$ctrl.artist.description_annotation" variants="{truncated: true}"></description-referent>\n</div>\n\n<dfp-ad\n  name="desktop_artist_sidebar"\n  ad-classes="[\'u-top_margin u-bottom_margin\']"\n></dfp-ad>\n\n<div ng-init="$ctrl.show_leaderboard = true">\n  <div ng-if="$ctrl.show_leaderboard">\n    <div class="text_label text_label--gray u-horizontal_margins u-top_margin u-half_bottom_margin">Top {{$ctrl.artist.name}} scholars</div>\n\n    <div class="white_container">\n      <paginated-leaderboard\n        source="$ctrl.get_leaderboard_page"\n        per-page="10"\n        on-empty="$ctrl.show_leaderboard = false"\n      ></paginated-leaderboard>\n    </div>\n  </div>\n</div>\n\n<div class="u-text_center u-vertical_margins">\n  <a ng-if="$ctrl.artist.facebook_name" target="_blank" href="{{$ctrl.facebook_url}}" class="square_button square_button--facebook u-quarter_vertical_margins">\n    <svg class="inline_icon" src="facebook.svg"></svg>\n    {{$ctrl.artist.facebook_name}}\n  </a>\n  <a ng-if="$ctrl.artist.twitter_name" target="_blank" href="{{$ctrl.twitter_url}}" class="square_button square_button--twitter u-quarter_vertical_margins">\n    <svg class="inline_icon" src="twitter.svg"></svg>\n    @{{$ctrl.artist.twitter_name}}\n  </a>\n  <a ng-if="$ctrl.artist.instagram_name" target="_blank" href="{{$ctrl.instagram_url}}" class="square_button square_button--instagram u-quarter_vertical_margins">\n    <svg class="inline_icon" src="instagram.svg"></svg>\n    @{{$ctrl.artist.instagram_name}}\n  </a>\n</div>\n\n<div ng-if="$ctrl.can(\'see_short_id\', $ctrl.artist)">\n  <div class="white_container u-top_margin">\n    Artist ID: {{$ctrl.artist.id}}\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_annotations.html",'<div class="profile_contributions_group-rollup_content">\n  <div ng-if="$ctrl.annotations.length > 1" class="profile_contributions_group-count numbered_indicator numbered_indicator--purple_filled"><span>{{ $ctrl.annotations.length }}</span></div>\n  <profile-annotation\n    ng-repeat="annotation in $ctrl.annotations | limitTo: $ctrl.limit track by annotation.id"\n    annotation="annotation"\n    referent="annotation.referent"\n    variants="::{ hide_annotatable: !$first }"></profile-annotation>\n</div>\n<div\n  ng-if="$ctrl.annotations.length > $ctrl.limit"\n  ng-click="$ctrl.limit = $ctrl.annotations.length"\n  class="full_width_button u-clickable u-quarter_top_margin"\n>\n  {{ $ctrl.annotations.length - 1 }} more {{ \'annotation\' | i18n: {count: $ctrl.annotations.length - 1} }} by {{ $ctrl.user.name }}\n  <svg class="inline_icon inline_icon--short inline_icon--up_1" src="down_arrow.svg"></svg>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_answers.html",'<div class="profile_contribution">\n  <svg src="comment.svg" class="profile_contribution-icon"></svg>\n\n  <div class="profile_contribution-content">\n    {{:: \'question.answer\' | i18n:{count: $ctrl.answers.length, name: $ctrl.user.name} }} on {{:: $ctrl.answers[0].question.questionable_type | modelHumanName | lowercase | indefinitize }}:\n\n    <div class="profile_contribution-target u-bottom_margin">\n      <a\n        ng-href="{{$ctrl.answers[0].question.questionable.url}}"\n        target="_blank"\n        ng-bind="$ctrl.answers[0].question.questionable.full_title"\n      ></a>\n    </div>\n\n    <div ng-repeat="answer in $ctrl.answers track by answer.id">\n      <question question="answer.question" variants="{link: true, bottom_border: !$last}"></question>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_articles.html",'<a href="{{:: $ctrl.article.url }}" class="profile_contribution" class="u-horizontal_margins">\n  <svg src="one_document.svg" class="profile_contribution-icon"></svg>\n\n  <div class="profile_contribution-content">\n    <span>{{:: $ctrl.user.name }} wrote an article </span>\n\n    <div class="profile_contribution-target">\n      {{:: $ctrl.article.title }}\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_comments.html",'<a href="{{:: $ctrl.commentable.url }}" class="profile_contribution">\n  <svg src="comment.svg" class="profile_contribution-icon"></svg>\n\n  <div class="profile_contribution-content">\n    {{:: $ctrl.comments[0].author.name }}\n\n    <span ng-if="$ctrl.comments[0].disposition === \'comment\'">commented on</span>\n    <span ng-if="$ctrl.comments[0].disposition === \'suggestion\'">added a suggestion to</span>\n\n    <span ng-if="$ctrl.commentable.author">{{:: $ctrl.commentable.author.name}}\'s</span>\n    <span ng-if="!$ctrl.commentable.author">{{:: $ctrl.commentable.type == \'Song\' || $ctrl.commentable.type == \'Video\' ? \'a\' : \'an\'}}</span>\n\n    {{:: ($ctrl.commentable.type | snakeCase) | i18n:{count: 1} }}<span ng-if="$ctrl.commentable.type == \'Annotation\'"> on</span>:\n\n    <div class="profile_contribution-target">{{:: $ctrl.commentable.title }}</div>\n\n    <div class="profile_contribution-content" ng-repeat="comment in $ctrl.comments track by comment.id">\n      <div class="note_bubble u-small_top_margin">\n        <span ng-if="comment.reason">\n          <span class="note_bubble-label">Marked as: </span>{{:: comment.reason.raw_name}}\n        </span>\n        <div ng-bind-html=":: comment.body.html"></div>\n      </div>\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_group.html",'<div class="profile_contributions_group" ng-switch="$ctrl.contributions_group.contribution_type">\n\n  <profile-contributions-articles\n    ng-switch-when="article"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-articles>\n\n  <profile-contributions-annotations\n    ng-switch-when="annotation"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-annotations>\n\n  <profile-contributions-comments\n    ng-switch-when="comment"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-comments>\n\n  <profile-contributions-pyongs\n    ng-switch-when="pyong"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-pyongs>\n\n  <profile-contributions-transcriptions\n    ng-switch-when="song"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-transcriptions>\n\n  <profile-contributions-questions\n    ng-switch-when="question"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-questions>\n\n  <profile-contributions-answers\n    ng-switch-when="answer"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-answers>\n\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_pyongs.html",'<a href="{{:: $ctrl.pyong.pyongable.url }}" class="profile_contribution" class="u-horizontal_margins">\n  <svg src="lightning.svg" class="profile_contribution-icon profile_contribution-icon--thin"></svg>\n\n  <div class="profile_contribution-content" ng-switch="$ctrl.pyong.pyongable_type">\n\n    <span ng-switch-when="song">{{:: $ctrl.user.name }} pyonged a song</span>\n    <span ng-switch-when="annotation">{{:: $ctrl.user.name }} pyonged an annotation on</span>\n    <span ng-switch-when="article">{{:: $ctrl.user.name }} pyonged an article</span>\n    <span ng-switch-when="video">{{:: $ctrl.user.name }} pyonged a video</span>\n    <span ng-switch-when="album">{{:: $ctrl.user.name }} pyonged an album</span>\n\n    <div class="profile_contribution-target">\n      {{:: $ctrl.pyong.pyongable.context_title }}\n    </div>\n\n    <div\n      class="note_bubble u-small_top_margin"\n      ng-if="$ctrl.pyong.note.html"\n      ng-bind-html=":: $ctrl.pyong.note.html"\n    ></div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_questions.html",'<div class="profile_contribution">\n\n  <svg src="comment.svg" class="profile_contribution-icon"></svg>\n\n  <div class="profile_contribution-content">\n    {{:: \'question.question\' | i18n:{count: $ctrl.questions.length, name: $ctrl.user.name} }} on a song:\n\n    <div class="profile_contribution-target u-bottom_margin">\n      <a\n        ng-href="{{$ctrl.questions[0].song.url}}"\n        target="_blank"\n        ng-bind="$ctrl.questions[0].song.full_title"\n      ></a>\n    </div>\n\n    <div ng-repeat="question in $ctrl.questions track by question.id">\n      <question question="question" variants="{link: true, bottom_border: !$last}"></question>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_transcriptions.html",'<a href="{{:: $ctrl.song.url }}" class="profile_contribution" class="u-horizontal_margins">\n  <svg src="one_document.svg" class="profile_contribution-icon"></svg>\n\n  <div class="profile_contribution-content">\n    <span>{{:: $ctrl.user.name }} {{ $ctrl.user.id === $ctrl.song.lyrics_owner_id && $ctrl.song.lyrics_state === \'complete\' ? \'transcribed\' : \'created a page\' }}</span>\n\n    <div class="profile_contribution-target">\n      {{:: $ctrl.song.full_title }}\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_followers.html",'<scrollable-data src="$ctrl.scrollable_data" repeat-with="user" scroll-mechanism="infinite_scroll">\n  <div class="profile_list_item profile_list_item--large_padding">\n    <div class="u-float_left">\n      <user-badge size="x_small" object="user"></user-badge>\n    </div>\n  </div>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_identity.html",'<div class="profile_identity">\n  <div class="profile_identity-text">\n    <h1 class="profile_identity-name_iq_and_role_icon u-hair_bottom_margin">\n      {{ $ctrl.artist.name || \'@\' + $ctrl.user.login }}\n      <span ng-if="$ctrl.user" class="profile_identity-iq tag_label tag_label--yellow_background" ng-bind="$ctrl.user.iq | number:0"></span>\n    </h1>\n    <div ng-if="$ctrl.artist.alternate_names.length" class="profile_identity-alternate_names">\n      AKA: <span ng-repeat="name in $ctrl.artist.alternate_names | limitTo: $ctrl.alternate_name_limit">{{name}}{{($last) ? \'\' : \', \'}}</span><span ng-if="$ctrl.more_alternate_names_to_show()">...</span>\n      <span\n        ng-click="$ctrl.show_all_alternate_names()"\n        ng-if="$ctrl.more_alternate_names_to_show()"\n        class="profile_identity-alternate_names-see_all u-clickable"\n      >See All </span>\n    </div>\n    <span class="profile_identity-subhead">\n      <span ng-if="$ctrl.artist && $ctrl.user">@{{$ctrl.user.login}}</span>\n      <span ng-if="$ctrl.artist && $ctrl.user.role_for_display"> | </span>\n      <span ng-if="$ctrl.user.role_for_display" tether-drop-target ng-class="{\'u-clickable\':$ctrl.user_has_more_than_one_role()}">\n        <role-icon\n          ng-if="$ctrl.user.role_for_display"\n          role="$ctrl.user.role_for_display"\n          has-checky="$ctrl.user.is_verified"\n        ></role-icon>\n        {{ \'role.types.\' + $ctrl.user.role_for_display | i18n: {count:1, defaultValue: $ctrl.user.role_for_display} }}\n        <svg ng-if="$ctrl.user_has_more_than_one_role()" src="down_arrow.svg" class="inline_icon inline_icon--short inline_icon--up_1 inline_icon--gray"></svg>\n        <tether-drop ng-if="$ctrl.user_has_more_than_one_role()" show-on="click" position="bottom center">\n          <div class="tooltip tooltip--tiny">\n            <div class="tooltip-plain_text_list_item" ng-repeat="role in $ctrl.user.roles_for_display">\n              <span>\n                <role-icon\n                  role="role"\n                  has-checky="role === \'verified_artist\'"\n                ></role-icon>\n                {{ \'role.types.\' + role  | i18n: {count:1} }}\n              </span>\n            </div>\n          </div>\n        </tether-drop>\n      </span>\n    </span>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_page.html",'<div class="leaderboard_ad_container">\n  <leaderboard-ad\n    name="{{$ctrl.display_as_artist() ? \'desktop_artist_leaderboard\' : \'desktop_user_leaderboard\'}}"\n  ></leaderboard-ad>\n</div>\n\n<div class="profile_header">\n  <div class="banner_image banner_image--more_transparent_gradient">\n    <div class="banner_image-blurred_image" clipped-background-image="$ctrl.header_url()"></div>\n  </div>\n  <div class="column_layout">\n    <div class="column_layout-column_span column_layout-column_span--secondary">\n      <div\n        class="user_avatar profile_header-avatar clipped_background_image--background_fill"\n        ng-class="{\'profile_header-avatar--verified\': $ctrl.user.is_verified}"\n        clipped-background-image="$ctrl.avatar_url()"\n        ng-show="!$ctrl.show_artist_pane"\n      ></div>\n    </div>\n    <div class="column_layout-column_span column_layout-column_span--primary">\n      <div class="profile_header-tabs profile_tabs" ng-init="$ctrl.change_state(\'description\')">\n        <h3\n          ng-click="$ctrl.change_state(\'description\')"\n          class="profile_tabs-tab"\n          ng-class="{\'profile_tabs-tab--selected\': $ctrl.state === \'description\'}"\n        ><svg src="star.svg" class="inline_icon inline_icon--white inline_icon--reading_size inline_icon--up_3 u-right_half_margin"></svg> Featured</h3>\n        <h3\n          ng-if="$ctrl.display_as_artist() && $ctrl.can(\'view_contribution_opportunities\', $ctrl.artist)"\n          ng-click="$ctrl.change_state(\'opportunities\')"\n          class="profile_tabs-tab"\n          ng-class="{\'profile_tabs-tab--selected\': $ctrl.state === \'opportunities\'}"\n        >Earn IQ</h3>\n        <h3\n          ng-click="$ctrl.change_state(\'followers\')"\n          class="profile_tabs-tab"\n          ng-class="{\'profile_tabs-tab--selected\': $ctrl.state === \'followers\'}"\n        ><span class="profile_tabs-tab-count">{{ ($ctrl.artist || $ctrl.user).followers_count | number:0 }}</span> Followers</h3>\n        <h3\n          ng-if="$ctrl.display_as_user()"\n          ng-click="$ctrl.change_state(\'follows\')"\n          class="profile_tabs-tab"\n          ng-class="{\'profile_tabs-tab--selected\': $ctrl.state === \'follows\'}"\n        ><span class="profile_tabs-tab-count">{{ $ctrl.user.followed_users_count | number:0 }}</span> Following</h3>\n        <h3\n            ng-if="$ctrl.can(\'view_activity_stream\', $ctrl.user) || $ctrl.can(\'view_activity_stream\', $ctrl.artist)"\n            ng-click="$ctrl.change_state(\'all_activity\')"\n            class="profile_tabs-tab"\n            ng-class="{\'profile_tabs-tab--selected\': $ctrl.state === \'all_activity\'}"\n        >All Activity</h3>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="column_layout" ng-show="!$ctrl.show_artist_pane" ng-switch="$ctrl.state">\n  <div class="column_layout-column_span column_layout-column_span--secondary">\n    <div class="profile_identity_and_description">\n      <profile-identity artist="$ctrl.artist" user="$ctrl.user"></profile-identity>\n      <div class="profile_identity_and_description-action_row">\n        <follow-button\n          ng-if="$ctrl.artist"\n          type="artist"\n          object="$ctrl.artist"\n        ></follow-button>\n        <follow-button\n          ng-if="!$ctrl.artist && $ctrl.user"\n          type="user"\n          object="$ctrl.user"\n        ></follow-button>\n        <div\n          class="square_button"\n          ng-click="$ctrl.show_conversation_modal = true"\n          ng-if="$ctrl.can_message_user"\n        >Message</div>\n        <div\n          class="square_button"\n          ng-if="$ctrl.can_edit_profile"\n          ng-click="$ctrl.show_edit_artist_profile_modal = true"\n        ><svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="pencil.svg"></svg> Edit</div>\n      </div>\n      <div\n        ng-if="$ctrl.artist.is_verified && $ctrl.user.is_verified && $ctrl.user.annotations_count > 0"\n        class="u-quarter_top_margin u-text_center"\n        ng-click="$ctrl.change_state(\'description\'); $ctrl.scroll_to(\'verified_annotations\')"\n      >\n        <span class="text_label text_label--button text_label--verified text_label--x_small_text_size">\n          Read {{ $ctrl.artist.name }}\'s Verified Annotations\n        </span>\n      </div>\n      <div\n        ng-click="$ctrl.open_all_songs_pane()"\n        ng-if="$ctrl.artist_has_more_songs && !$ctrl.artist_songs.length"\n        class="u-text_center u-top_margin"\n      >\n        <span class="text_label text_label--button text_label--purple">\n          Show all songs {{:: $ctrl.artist.name }} appears on\n        </span>\n      </div>\n      <div class="u-top_margin" ng-switch="$ctrl.display_as_artist()">\n        <profile-artist-pane ng-switch-when="true" artist="$ctrl.artist"></profile-artist-pane>\n        <profile-user-pane\n          ng-switch-when="false"\n          user="$ctrl.user"\n          on-statistics-select="$ctrl.change_state(\'description\'); $ctrl.filter_activity_by_type(statistics_type)"\n        ></profile-user-pane>\n      </div>\n      <profile-admin-pane\n        ng-if="$ctrl.user"\n        user="$ctrl.user"\n        view-errors-link="$ctrl.bugsnag_link"\n      ></profile-admin-pane>\n    </div>\n  </div>\n\n  <artist-songs-modal\n    ng-if="$ctrl.artist"\n    artist="$ctrl.artist"\n    yields-open="$ctrl.open_all_songs_pane = open"\n  ></artist-songs-modal>\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-switch-when="description">\n    <artist-songs-and-albums\n      ng-if="$ctrl.artist"\n      artist="$ctrl.artist"\n      artist-songs="$ctrl.artist_songs"\n      artist-albums="$ctrl.artist_albums"\n      artist-has-more-songs="$ctrl.artist_has_more_songs"\n      open-all-songs-pane="$ctrl.open_all_songs_pane()"\n    ></artist-songs-and-albums>\n\n    <div ng-if="$ctrl.user" scroll-point="verified_annotations">\n      <div ng-if="$ctrl.pinned_annotations.length" class="text_label text_label--gray u-xx_large_top_margin">\n        <svg src="star.svg" class="inline_icon inline_icon--gray inline_icon--reading_size inline_icon--up_3"></svg>\n        Pinned {{ \'annotation\' | i18n: { count: $ctrl.pinned_annotations.length } }}\n      </div>\n\n      <div ng-repeat="annotation in $ctrl.pinned_annotations" class="u-half_vertical_margins">\n        <profile-annotation annotation="annotation" referent="annotation.referent"></profile-annotation>\n      </div>\n\n      <div class="profile_list_item profile_list_item--large_padding u-x_large_top_margin" scroll-point="user_activity">\n        <span class="text_label text_label--gray">\n          {{ $ctrl.user.name }}\'s Contributions\n        </span>\n        <div class="profile_list_item-dropdown_container">\n          <span class="u-half_right_margin" ng-if="$ctrl.filter_by_contribution_type.sort.length > 0">\n            <select-dropdown\n              on-select="$ctrl.filter_activity_by($ctrl.filter_by_contribution_type, selection)"\n              options="$ctrl.filter_by_contribution_type.sort"\n              variants=":: {right_aligned: true, gray: true}"\n            ></select-dropdown>\n          </span>\n          <select-dropdown\n            on-select="$ctrl.filter_activity_by(selection)"\n            options="$ctrl.user_activity_sort_options_by_filter"\n            selection="$ctrl.filter_by_contribution_type"\n            variants=":: {right_aligned: true}"\n          ></select-dropdown>\n        </div>\n      </div>\n\n      <scrollable-data\n        src="$ctrl.user_contributions_scrollable_data"\n        scroll-mechanism="infinite_scroll"\n        repeat-with="contributions_group"\n        preload="$ctrl.filter_by_contribution_type.filter ? [] : $ctrl.preloaded_user_activity"\n        auto-reset="true"\n      >\n        <div\n          ng-if="!$ctrl.filter_by_contribution_type.filter && (($scrollable_data_ctrl.models[$index - 1].date | millisecondsToSeconds | date: \'longDate\') !== (contributions_group.date | millisecondsToSeconds | date: \'longDate\'))"\n          class="text_label text_label--gray u-x_large_top_margin u-hair_bottom_margin"\n        >\n          <svg src="calendar.svg" class="inline_icon inline_icon--gray inline_icon--reading_size inline_icon--up_3"></svg> {{:: contributions_group.date | millisecondsToSeconds | date: "longDate" }}\n        </div>\n        <profile-contributions-group user="$ctrl.user" contributions-group="contributions_group"></profile-contributions-group>\n        <empty>\n          <div class="u-top_margin">\n            Looks like {{$ctrl.user.name}} doesn\'t have any {{\n            $ctrl.filter_by_contribution_type.filter ?\n            ($ctrl.filter_by_contribution_type.i18n_key | i18n | lowercase) :\n            \'contributions\'\n            }}.\n          </div>\n        </empty>\n      </scrollable-data>\n    </div>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-switch-when="opportunities">\n    <div class="u-x_large_top_margin u-right_margin">\n      <artist-opportunities artist="$ctrl.artist"></artist-opportunities>\n    </div>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-switch-when="followers">\n    <div class="u-x_large_top_margin u-right_margin">\n      <profile-followers artist="$ctrl.artist" user="$ctrl.user"></profile-followers>\n    </div>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-switch-when="follows">\n    <div class="u-x_large_top_margin u-right_margin">\n      <profile-followers artist="$ctrl.artist" user="$ctrl.user" follows="true"></profile-followers>\n    </div>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-switch-when="all_activity">\n    <div class="u-x_large_top_margin u-right_margin">\n      <profile-all-activity user="$ctrl.user" artist="$ctrl.artist"></profile-all-activity>\n    </div>\n  </div>\n\n</div>\n\n<modal-window\n  ng-if="$ctrl.show_edit_artist_profile_modal"\n  on-close="$ctrl.show_edit_artist_profile_modal = undefined"\n>\n  <div class="column_layout" ng-init="$ctrl.current_edit_panel = $ctrl.can_edit_artist_profile ? \'show_edit_artist_profile_modal\' : \'show_edit_user_profile_modal\'">\n    <div class="column_layout-column_span column_layout-column_span--secondary">\n      <div\n        ng-if="$ctrl.can_edit_artist_profile"\n        ng-click="$ctrl.current_edit_panel = \'show_edit_artist_profile_modal\'"\n        ng-class="{\'toggleable_list_item--selected\':$ctrl.current_edit_panel === \'show_edit_artist_profile_modal\'}"\n        class="toggleable_list_item"\n      >Edit Artist Profile</div>\n      <div\n        ng-if="$ctrl.can_edit_user_profile"\n        ng-click="$ctrl.current_edit_panel = \'show_edit_user_profile_modal\'"\n        ng-class="{\'toggleable_list_item--selected\':$ctrl.current_edit_panel === \'show_edit_user_profile_modal\'}"\n        class="toggleable_list_item"\n      >Edit User Profile</div>\n      <div\n          ng-if="$ctrl.can_edit_user_profile"\n          ng-click="$ctrl.current_edit_panel = \'show_edit_user_email_preferences_modal\'"\n          ng-class="{\'toggleable_list_item--selected\':$ctrl.current_edit_panel === \'show_edit_user_email_preferences_modal\'}"\n          class="toggleable_list_item"\n      >Edit Email Preferences</div>\n      <div\n        ng-if="$ctrl.can(\'merge\', $ctrl.artist)"\n        ng-click="$ctrl.current_edit_panel = \'show_merge_artist_modal\'"\n        ng-class="{\'toggleable_list_item--selected\':$ctrl.current_edit_panel === \'show_merge_artist_modal\'}"\n        class="toggleable_list_item toggleable_list_item--last"\n      >Merge artists</div>\n    </div>\n\n    <div class="column_layout-column_span column_layout-column_span--primary" ng-switch="$ctrl.current_edit_panel">\n      <div ng-switch-when="show_edit_artist_profile_modal">\n        <edit-artist-profile\n          artist="$ctrl.artist"\n          close="$ctrl.show_edit_artist_profile_modal = undefined"\n        ></edit-artist-profile>\n      </div>\n\n      <div ng-switch-when="show_edit_user_profile_modal">\n        <edit-user-profile\n          user="$ctrl.user"\n          disable-image-edit="$ctrl.artist && !$ctrl.community_artist"\n          disable-user-bio-edit="$ctrl.artist && !$ctrl.community_artist"\n          close="$ctrl.show_edit_artist_profile_modal = undefined"\n        ></edit-user-profile>\n      </div>\n\n      <div ng-switch-when="show_merge_artist_modal">\n        <merge-artist-form artist="$ctrl.artist"></merge-artist-form>\n      </div>\n\n      <div ng-switch-when="show_edit_user_email_preferences_modal">\n        <edit-user-email-preferences\n          user="$ctrl.user"\n          close="$ctrl.show_edit_artist_profile_modal = undefined"\n        ></edit-user-email-preferences>\n      </div>\n    </div>\n  </div>\n</modal-window>\n\n<modal-window\n  ng-if="$ctrl.show_conversation_modal"\n  on-close="$ctrl.attempt_close(!$ctrl.is_conversation_dirty(), $ctrl.close_conversation_modal)"\n  variants="{full_height: true}"\n>\n  <conversation-with-user user="$ctrl.user" yields-is-dirty="$ctrl.is_conversation_dirty = is_dirty"></conversation-with-user>\n</modal-window>\n\n<global-error-message></global-error-message>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_user_pane.html",'<div class="white_container">\n  <div class="rich_text_formatting">\n    <div ng-if="$ctrl.user.about_me.html" ng-bind-html="$ctrl.user.about_me.html"></div>\n    <span ng-if="!$ctrl.user.about_me.html">{{\'profile_page.about_me.default\' | i18n:{user_login: $ctrl.user.login} }}</span>\n  </div>\n</div>\n\n<div class="text_label text_label--gray u-horizontal_margins u-vertical_margins">Stats</div>\n<div class="u-vertical_margins">\n  <statistics-panel user="$ctrl.user" on-select="$ctrl.on_statistics_select({statistics_type: type})"></statistics-panel>\n</div>\n\n<dfp-ad\n  name="desktop_user_sidebar"\n  ad-classes="[\'u-top_margin u-bottom_margin\']"\n></dfp-ad>\n\n<paginated-accomplishments user="$ctrl.user"></paginated-accomplishments>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pyong_button_for_header.html",'<div\n  class="pyong_button header_with_cover_art-pyong_button"\n  ng-class="{\n    \'header_with_cover_art-pyong_button--disabled\': ctrl.pyonged(),\n    \'header_with_cover_art-pyong_button--far_hang\': variants.far_hang\n  }"\n  ng-click="ctrl.pyong()"\n  ng-disabled="ctrl.pyonged()"\n  tether-drop-target\n>\n  <span ng-class="{\'nganimate-cycle_upwards\': ctrl.clicked_pyong}">\n    <svg class="header_with_cover_art-pyong_button-icon" src="lightning.svg"></svg>\n  </span>\n  <span ng-bind="pyongable.pyongs_count" class="header_with_cover_art-pyongs_count"></span>\n\n  <tether-drop\n    show-on="always"\n    position="{{ variants.tooltip_position ? variants.tooltip_position : \'bottom center\' }}"\n    ng-if="ctrl.show_pyong_form"\n  >\n    <pyong-form type="type" id="pyongable.id" on-complete="ctrl.show_pyong_form = false"></pyong-form>\n  </tether-drop>\n\n  <tether-drop\n    position="{{ variants.tooltip_position ? variants.tooltip_position : \'bottom center\' }}"\n    ng-if="!ctrl.show_pyong_form"\n    show-on="hover"\n  >\n    <div class="tooltip tooltip--tiny u-half_vertical_margins" ng-cloak stop-propagation="click">\n      <span ng-if="ctrl.pyonged()">{{ \'pressed_pyong_tooltip_text\' | i18n:{text_type: type} }}</span>\n      <span ng-if="!ctrl.pyonged()">{{ \'pyong_tooltip_text\' | i18n:{text_type: type} }}</span>\n    </div>\n  </tether-drop>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pyong_button_square_button.html",'<div\n  class="pyong_button square_button"\n  ng-click="ctrl.pyong()"\n  ng-disabled="ctrl.pyonged()"\n  ng-class="{\n    \'square_button--transparent nganimate-disable_transition\': variants.transparent,\n    \'square_button--purple\': variants.purple,\n    \'square_button--disabled\': ctrl.pyonged(),\n    \'square_button--depress_on_click\': !ctrl.pyonged(),\n  }"\n  tether-drop-target\n>\n  <span ng-class="{\'nganimate-cycle_upwards\': ctrl.clicked_pyong}">\n    <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="lightning.svg"></svg>\n  </span>\n  <span ng-bind="pyongable.pyongs_count"></span>\n\n  <tether-drop\n    show-on="always"\n    position="{{ variants.tooltip_position ? variants.tooltip_position : \'bottom center\' }}"\n    ng-if="ctrl.show_pyong_form"\n  >\n    <pyong-form type="type" id="pyongable.id" on-complete="ctrl.show_pyong_form = false"></pyong-form>\n  </tether-drop>\n\n  <tether-drop\n    position="{{ variants.tooltip_position ? variants.tooltip_position : \'bottom center\' }}"\n    ng-if="!ctrl.show_pyong_form"\n    show-on="hover"\n  >\n    <div class="tooltip tooltip--tiny u-half_vertical_margins" ng-cloak stop-propagation="click">\n      <span ng-if="ctrl.pyonged()">{{ \'pressed_pyong_tooltip_text\' | i18n:{text_type: type} }}</span>\n      <span ng-if="!ctrl.pyonged()">{{ \'pyong_tooltip_text\' | i18n:{text_type: type} }}</span>\n    </div>\n  </tether-drop>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pyong_form.html",'<form name="form" class="tooltip u-vertical_margins" ng-submit="form.$valid && submit(pyong_note)" submit-on-cmd-enter stop-propagation="click" click-outside="submit(null)" ng-model-options="{updateOn: \'submit\'}">\n  <div ng-if="form.$submitted && form.$invalid" class="form_message form_message--error text_label">\n    Please enter a note to go with your Pyong.\n  </div>\n\n  <div class="u-small_bottom_margin">\n    <textarea required placeholder="Add a note for your followers" ng-disabled="disabled" ng-model="pyong_note" class="square_input square_input--full_width" autofocus="disabled"></textarea>\n  </div>\n\n  <button ng-disabled="disabled" class="square_button square_button--depress_on_click" ng-class="{\'square_button--disabled\': disabled}" type="submit">{{ disabled ? \'Saving\' : \'Add note\' }}</button>\n  <button class="square_button square_button--depress_on_click square_button--transparent square_button--gray" ng-if="!disabled" ng-click="submit(null)" prevent-default-click>No Thanks</button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("question.html",'<li\n  ng-attr-id="{{$ctrl.featured ? $ctrl.question.id : undefined}}"\n  class="question"\n  ng-class="{\n    \'question--top_border\': $ctrl.variants.top_border,\n    \'question--bottom_border\': $ctrl.variants.bottom_border\n  }"\n  class-for-duration="{\'question--animate_flash\': $ctrl.featured ? 3000 : 0}"\n>\n  <div class="question-hanging_actions" ng-if="$ctrl.variants.hanging_actions">\n    <span\n      class="question-hanging_actions-action question-hanging_actions-action--empty_star question-hanging_actions-action--show_on_hover"\n      ng-if="$ctrl.can(\'pin\', $ctrl.question) && !$ctrl.is_pinned()"\n      ng-click="$ctrl.pin()"\n      title="pin"\n    >\n      <svg src="star.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3"></svg>\n    </span>\n    <span\n      class="question-hanging_actions-action"\n      ng-if="$ctrl.can(\'unpin\', $ctrl.question) && $ctrl.is_pinned()"\n      ng-click="$ctrl.unpin()"\n      title="unpin"\n    >\n      <svg src="star.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3"></svg>\n    </span>\n    <span\n      class="question-hanging_actions-action question-hanging_actions-action--show_on_hover"\n      ng-if="$ctrl.can(\'move\', $ctrl.question) && $ctrl.is_pinned()"\n      ng-click="$ctrl.move(\'up\')"\n      title="move up"\n    >\n      <svg src="up_arrow.svg" class="inline_icon inline_icon--gray "></svg>\n    </span>\n    <span\n      class="question-hanging_actions-action question-hanging_actions-action--show_on_hover"\n      ng-if="$ctrl.can(\'move\', $ctrl.question) && $ctrl.is_pinned()"\n      ng-click="$ctrl.move(\'down\')"\n      title="move down"\n    >\n      <svg src="down_arrow.svg" class="inline_icon inline_icon--gray "></svg>\n    </span>\n  </div>\n  <div\n    ng-if="!$ctrl.variants.no_drop_down && !$ctrl.question._editing._form_visible && ($ctrl.can(\'edit\', $ctrl.question) || $ctrl.can(\'archive\', $ctrl.question))"\n    class="question-drop_down square_button square_button--transparent square_button--gray u-float_right"\n    tether-drop-target\n  >\n    <svg\n      src="down_arrow.svg"\n      class="inline_icon inline_icon--up_2 inline_icon--short inline_icon--gray"\n    ></svg>\n\n    <tether-drop show-on="click" position="bottom center" yields-api="$ctrl.tetherApi = tetherApi">\n      <div class="tooltip tooltip--no_padding tooltip--tiny" stop-propagation="click">\n        <span\n          class="tooltip-list_item"\n          ng-if="$ctrl.can(\'edit\', $ctrl.question)"\n          ng-class="{\'tooltip-list_item--disabled\': $ctrl.question._editing._form_visible}"\n          ng-click="$ctrl.start_editing()"\n        >\n          <svg src="pencil.svg" class="inline_icon tooltip-list_item-icon"></svg>\n          Edit Question\n        </span>\n        <square-item-and-iq\n          ng-if="$ctrl.can(\'archive\', $ctrl.question)"\n          iq-params="$ctrl.question.current_user_metadata.iq_by_action.archive"\n          variants="{full_width: true}"\n        >\n          <span\n            class="tooltip-list_item tooltip-list_item--bottom_border"\n            ng-click="$ctrl.archive()"\n          >\n            <svg src="checkmark.svg" class="inline_icon inline_icon--red tooltip-list_item-icon"></svg>\n            Archive Question\n          </span>\n        </square-item-and-iq>\n        <span\n          class="tooltip-list_item"\n          ng-if="$ctrl.answerApi.can_edit()"\n          ng-click="$ctrl.answerApi.start_editing(); $ctrl.tetherApi.hide()"\n        >\n          <svg src="pencil.svg" class="inline_icon tooltip-list_item-icon"></svg>\n          Edit Answer\n        </span>\n        <span\n          class="tooltip-list_item"\n          ng-if="$ctrl.answerApi.can_clear()"\n          ng-click="$ctrl.answerApi.clear_answer(); $ctrl.tetherApi.hide()"\n        >\n          <svg src="x.svg" class="inline_icon inline_icon--red tooltip-list_item-icon"></svg>\n          Clear Answer\n        </span>\n      </div>\n    </tether-drop>\n  </div>\n\n  <div ng-show="!$ctrl.question._editing._form_visible" class="u-bottom_margin">\n    <div class="question-inline_voting">\n      <voting\n        ng-if="!$ctrl.question.answer && $ctrl.question.id"\n        object="$ctrl.question"\n        variants="{\'hide_upvote_text\': true, \'hide_downvote\': true}"\n        type="question"\n        on-unauthorized="$ctrl.prompt_auth = true"\n        vote-total-clicked="$ctrl.show_voters = !$ctrl.show_voters"\n      ></voting>\n    </div>\n    <h3 class="annotation_label">\n      <a ng-if="$ctrl.variants.link" class="annotation_label-underline" ng-href="{{$ctrl.question.url}}">{{$ctrl.question.body}}</a>\n      <span ng-if="!$ctrl.variants.link">{{$ctrl.question.body}}</span>\n    </h3>\n  </div>\n\n  <form\n    name="question_form"\n    class="u-bottom_margin"\n    ng-if="$ctrl.question._editing._form_visible"\n    ng-submit="$ctrl.finish_editing()"\n    ng-model-options="{updateOn: \'submit blur\'}"\n    submit-on-cmd-enter\n    dirtyable\n  >\n    <textarea\n      required\n      autofocus\n      ng-model="$ctrl.question._editing.body"\n      class="square_input square_input--full_width"\n      placeholder="{{ \'question.placeholder\' | i18n }}"\n      maxlength="80"\n    ></textarea>\n\n    <div class="u-small_top_margin">\n      <button\n        type="submit"\n        class="square_button"\n        ng-class="{\'square_button--waiting\': $ctrl.disable_saving_with}"\n        ng-disabled="$ctrl.disable_saving_with"\n      >{{ $ctrl.disable_saving_with || \'Save\' }}</button>\n      <span\n        ng-click="$ctrl.cancel_editing()"\n        class="square_button square_button--transparent square_button--gray"\n        ng-hide="$ctrl.disable_saving_with"\n      >Cancel</span>\n    </div>\n  </form>\n\n  <voters ng-if="$ctrl.show_voters" type="question" object="$ctrl.question"></voters>\n\n  <authentication-form\n    ng-if="$ctrl.prompt_auth"\n    on-cancel="$ctrl.prompt_auth = false"\n    variants="{display_in_context: true}"\n  ></authentication-form>\n\n  <answer\n    question="$ctrl.question"\n    answer="$ctrl.question.answer"\n    yields-api="$ctrl.answerApi = answerApi"\n    on-pending-event="$ctrl.on_pending_event({event: event, result: result})"\n    yields-iq="$ctrl.yields_iq({iq_api: iq_api})"\n    variants="{no_answer_prompt: $ctrl.variants.no_answer_prompt}"\n  ></answer>\n</li>\n\n<div\n  ng-class="{\n    \'u-margin_bottom\': $ctrl.ad_filled,\n    \'question\': $ctrl.ad_filled,\n    \'question--bottom_border\': $ctrl.ad_filled\n  }"\n>\n  <dfp-ad\n    ng-if="$ctrl.variants.monetized"\n    instance-id="question-{{ $ctrl.question.id }}"\n    name="desktop_song_q_and_a"\n    ad-classes="[\'dfp_unit--in_read u-top_margin\']"\n    on-filled="$ctrl.ad_filled = true"\n  ></dfp-ad>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("question_form.html",'<form\n  name="question_form"\n  ng-submit="$ctrl.save()"\n  ng-model-options="{updateOn: \'submit\'}"\n  submit-on-cmd-enter\n  dirtyable\n>\n  <div\n    ng-if="$ctrl.error.validation_errors.body.length"\n    class="form_message form_message--error text_label"\n  >Question {{:: $ctrl.error.validation_errors.body[0]}}</div>\n\n  <div\n    ng-if="$ctrl.thank_you && !$ctrl.saving"\n    class="form_message form_message--success text_label"\n  >Thanks! Your question has been posted.</div>\n\n  <div ng-class="{\'square_form-input_and_label--error\': $ctrl.error.validation_errors.body.length}">\n    <square-item-and-iq\n      show_pill="!$ctrl.showing_full_form"\n      event_type="asked_a_question"\n      variants="{full_width: true}"\n    >\n      <textarea\n        required\n        autosize-init-on-focus\n        placeholder="{{ \'question.placeholder\' | i18n }}"\n        ng-model="$ctrl.question.body"\n        class="square_input square_input--full_width square_input--single_line_height"\n        ng-focus="$ctrl.showing_full_form = true"\n        maxlength="80"\n      ></textarea>\n    </square-item-and-iq>\n  </div>\n\n  <div\n    ng-if="!$ctrl.user_signed_in"\n    ng-show="$ctrl.showing_full_form"\n  >\n    <input\n      required\n      ng-model="$ctrl.question.author_name"\n      class="square_input square_input--full_width u-small_vertical_margins"\n      placeholder="Your name"\n    />\n    <input\n      required\n      ng-model="$ctrl.question.author_email"\n      type="email"\n      class="square_input square_input--full_width"\n      placeholder="Your email address"\n    />\n  </div>\n\n  <div ng-show="$ctrl.showing_full_form" class="u-small_top_margin">\n    <square-item-and-iq event-type="asked_a_question">\n      <button\n        class="square_button"\n        ng-class="{\'square_button--waiting\': $ctrl.saving}"\n        ng-disabled="$ctrl.saving"\n        type="submit"\n      >{{ $ctrl.saving ? \'Submitting\' : \'Submit\' }}</button>\n    </square-item-and-iq>\n    <span\n      ng-click="$ctrl.showing_full_form = false"\n      class="square_button square_button--transparent square_button--gray"\n      ng-hide="$ctrl.saving"\n    >Cancel</span>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("question_list.html",'<ul>\n  <question\n    ng-repeat="question in $ctrl.questions | orderBy : $ctrl.sorting_predicates"\n    ng-if="!question._deleted"\n    question="question"\n    variants="{\n      \'bottom_border\': true,\n      \'hanging_actions\': true,\n      monetized: $ctrl.is_monetized(question)\n    }"\n    move-question="$ctrl.move_question(direction, question)"\n    featured="$ctrl.is_featured_question(question)"\n  ></question>\n</ul>\n\n<div class="u-bottom_margin" ng-if="$ctrl.has_next()">\n  <div ng-click="$ctrl.load_more()" class="square_button" ng-hide="$ctrl._loading">Show {{ $ctrl.questions.length > 0 ? \'More\' : \'Questions\' }} ({{ $ctrl.pending_question_count }})</div>\n  <div class="u-vertical_margins" ng-if="$ctrl._loading">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n</div>\n\n<div class="question">\n  <div class="annotation_label">Ask us a question about this {{ $ctrl.questionable._type | modelHumanName | lowercase }}</div>\n  <question-form\n    on-new-question="$ctrl.questions.push(question)"\n    questionable="$ctrl.questionable"\n  ></question-form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("reasons_toggle.html",'<div class="reasons">\n  <div class="reasons-help_text">\n    <p>Help us improve this annotation</p>\n    <a href="{{ $ctrl.comment_reasons_help_url }}" target="_blank" class="reasons-help_text-link">Read our contributor guidelines</a>\n  </div>\n  <div class="reasons-columns">\n    <div\n      class="reasons-reason"\n      ng-repeat="reason in $ctrl.comment_reasons track by reason.slug"\n      ng-class="{\'reasons-reason--active\': $ctrl.selectedReason === reason || (!$ctrl.selectedReason && reason.slug === \'other\')}"\n      ng-click="$ctrl.change_reason(reason)"\n    >\n      <div\n        class="reasons-reason-icon reasons-reason-icon--{{ reason.slug }}"\n        title="{{ reason.handle }}"\n      ></div>\n      <div class="reasons-reason-title">{{ reason.handle }}</div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("recent_signups_page.html",'<div class="recent_signups">\n  <div class="recent_signup-container u-vertical_margins">\n    <div>\n      <span>Recent Signups</span>\n      <span class="u-float_right">\n        <span\n            class="text_label text_label--pink text_label--x_small_text_size"\n            ng-click="$ctrl.filter_spam_state_dropdown_opened = !$ctrl.filter_spam_state_dropdown_opened"\n            click-outside="$ctrl.filter_spam_state_dropdown_opened = false">\n          {{\'sort.\' + $ctrl.filtering_spam_state | i18n}}\n          <svg class="inline_icon inline_icon--short inline_icon--up_1 inline_icon--pink" src="down_arrow.svg"></svg>\n        </span>\n        <div\n          class="tooltip tooltip--tiny tooltip--no_padding tooltip--dock_top_right"\n          ng-show="$ctrl.filter_spam_state_dropdown_opened"\n          ng-click="$ctrl.filter_spam_state_dropdown_opened = false">\n          <div class="tooltip-list_item" ng-repeat="spam_state in [\'unclassified_spam_state\', \'probably_spam\', \'probably_ham\', \'definitely_spam\', \'definitely_ham\']" ng-click="$ctrl.filter_by_spam_state(spam_state);" ng-show="$ctrl.filtering_spam_state !== spam_state">\n            {{:: \'sort.\' + spam_state | i18n }}\n          </div>\n        </div>\n      </span>\n    </div>\n  </div>\n\n  <div class="recent_signup-container">\n    <scrollable-data\n        src="$ctrl.recent_signups_scrollable_data"\n        repeat-with="user_spam_evaluation"\n        scroll-mechanism="infinite_scroll"\n    >\n      <div ng-if="!user_spam_evaluation.marked_spam_state" class="u-vertical_margins">\n        <div class="recent_signup-row">\n          <span class="recent_signup-column">\n            <a ng-href="{{:: user_spam_evaluation.user.url}}">{{:: user_spam_evaluation.user.login }}</a>\n            <br>\n            <div class="recent_signup-date">\n              <small>{{ user_spam_evaluation.signed_up_at | human_readable_datetime }}</small>\n            </div>\n          </span>\n          <span\n            class="recent_signup-column text_label"\n            ng-class="{\'text_label--green\': user_spam_evaluation.spam_state == \'probably_ham\', \'text_label--red\': user_spam_evaluation.spam_state == \'probably_spam\'}" tether-drop-target>\n            {{:: user_spam_evaluation.spam_state }}\n            <tether-drop show-on="hover" position="bottom center">\n              <div class="tooltip tooltip--tiny" stop-propagation="click">\n                <table>\n                  <tr\n                    ng-class="{\n                      \'spam_check_feature--bold\': spam_check_feature.value != 0,\n                      \'spam_check_feature--green\': spam_check_feature.outcome == \'probably_ham\',\n                      \'spam_check_feature--red\': spam_check_feature.outcome == \'probably_spam\'\n                    }"\n                    ng-repeat="spam_check_feature in user_spam_evaluation.spam_check_features | filter:{label: \'!!\'}"\n                    class="spam_check_feature"\n                  >\n                    <td>\n                      <span class="u-horizontal_margins">{{:: spam_check_feature.value }}</span>\n                    </td>\n                    <td>{{:: spam_check_feature.label }}</td>\n                  </tr>\n                </table>\n              </div>\n            </tether-drop>\n          </span>\n          <span class="recent_signup-column">\n            <button\n                ng-disabled="user_spam_evaluation.marking_spam_state"\n                ng-click="$ctrl.mark(\'ham\', user_spam_evaluation)"\n                ng-class="{\'square_button--waiting\': user_spam_evaluation.marking_spam_state}"\n                class="square_button square_button--green square_button--white_background"\n            >Mark {{:: user_spam_evaluation.user.login }} as ham</button>\n          </span>\n          <span class="recent_signup-column">\n            <button\n                ng-disabled="user_spam_evaluation.marking_spam_state"\n                ng-click="$ctrl.mark(\'spam\', user_spam_evaluation)"\n                ng-class="{\'square_button--waiting\': user_spam_evaluation.marking_spam_state}"\n                class="square_button square_button--red square_button--white_background"\n            >Mark {{:: user_spam_evaluation.user.login }} as spam</button>\n          </span>\n        </div>\n      </div>\n    </scrollable-data>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("recirculated_content.html",'<div class="u-xx_large_vertical_margins" ng-if="$ctrl.video_placement.videos.length || $ctrl.stories.length">\n  <div class="text_label text_label--gray">More on Genius</div>\n\n  <div ng-repeat="video in $ctrl.video_placement.videos track by $id(video)">\n    <a\n      ng-href="{{ video.url }}?utm_source=recirculated_content"\n      class="recirculated_content"\n      tracking="click"\n      tracking-event="Recirculated Content"\n      tracking-options="{\n        \'recirculated_content_story\': {target: \'video\', provider: video.provider, provider_id: video.provider_id, id: video.id},\n        \'recirculated_content_type\': \'video\'\n      }"\n    >\n      <div class="recirculated_content-image recirculated_content-image--with_play_button">\n        <img sized-src="video.poster_url" />\n        <svg\n          src="play.svg"\n          class="play_button play_button--small"\n        ></svg>\n      </div>\n      <div class="recirculated_content-info">\n        <div class="recirculated_content-title">\n          {{ video.title }}\n        </div>\n      </div>\n    </a>\n  </div>\n\n  <div ng-repeat="story in $ctrl.stories track by $id(story)">\n    <a\n      ng-href="{{story.behavior.attributes.url}}"\n      class="recirculated_content"\n      tracking="click"\n      tracking-event="Recirculated Content"\n      tracking-options="{\n        \'recirculated_content_story\': story.metadata,\n        \'recirculated_content_url\': story.behavior.attributes.url,\n        \'recirculated_content_type\': story.metadata.target\n      }"\n    >\n      <div class="recirculated_content-image" clipped-background-image="story.appearance.image_url"></div>\n      <div class="recirculated_content-info">\n        <div class="recirculated_content-title">{{ story.appearance.title }}</div>\n      </div>\n    </a>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("referent_editorial_indicator.html",'<div\n  ng-show="highlighted_fragment_id !== fragment_id"\n  ng-if="!referent._deleted && referent.pending_editorial_actions_count > 0"\n  class="referent_editorial_indicator numbered_indicator numbered_indicator--red"\n  data-count="{{ referent.pending_editorial_actions_count }}"\n></div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("referent_fragment_container.html",'<div class="referent_container referent_container--inverse"\n  ng-class="[\'referent_container--\' + referent.display_mode || \'yellow\']"\n>\n  <div ng-transclude="referentHeader"></div>\n\n  <collapsible-content\n    max-collapsed-height="80"\n    min-expansion-height="40"\n    text="show full {{ referent.annotatable.type === \'Song\' ? \'lyric\' : \'quote\' }}"\n    auto-expand="variants.show_full_referent"\n  >\n    <div ng-transclude="referentFragment"></div>\n  </collapsible-content>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("release_date.html",'<div\n  class="metadata_unit"\n  ng-class="{\'metadata_unit--table_row\': variants.table}"\n  ng-if="date_components"\n>\n  <span class="metadata_unit-label">{{\'song.metadata.release_date\' | i18n}}</span>\n  <span class="metadata_unit-info metadata_unit-info--text_only">{{ date_components | imprecise_date }}</span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("relevant_videos.html",'<div\n  ng-if="$ctrl.video_placement.videos.length > 0"\n  class="videos {{ $ctrl.container_classes }}"\n>\n  <div\n    ng-if="$ctrl.variants.show_container_label"\n    class="text_label text_label--x_small_text_size u-half_bottom_margin"\n  >Recommended Video</div>\n\n  <div ng-class="{\'thumbnail_grid\': $ctrl.variants.two_across}">\n    <div\n      ng-repeat="video in $ctrl.video_placement.videos track by video.id"\n      ng-click="$ctrl.selected_video = video"\n      class="u-clickable"\n      ng-class="{\n        \'thumbnail_grid-grid_element thumbnail_grid-grid_element--half thumbnail_grid-grid_element--no_bottom_margin\': $ctrl.variants.two_across\n      }"\n    >\n      <div\n        class="videos-video_element clipped_background_image--background_fill"\n        clipped-background-image="video.poster_url"\n      >\n        <svg\n          src="play.svg"\n          class="play_button"\n        ></svg>\n      </div>\n      <h3 class="videos-title" ng-bind="video.short_title"></h3>\n    </div>\n  </div>\n</div>\n\n<videos-modal\n  ng-if="$ctrl.selected_video"\n  object="$ctrl.object"\n  initial-video="$ctrl.selected_video"\n  on-close="$ctrl.selected_video = null"\n  build-tracking-data="$ctrl.video_placement.tracking_data(video)"\n></videos-modal>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon.html",'<svg ng-if="hasChecky" class="checky" src="checky.svg"></svg>\n<span ng-if="!hasChecky" ng-switch="role" class="user_badge-role_icon user_badge-role_icon--{{ role }}">\n  <svg ng-switch-when="mediator" src="role_icon_mediator_square.svg"></svg>\n  <svg ng-switch-when="editor" src="role_icon_editor_square.svg"></svg>\n  <svg ng-switch-when="moderator" src="role_icon_moderator_diamond.svg"></svg>\n  <svg ng-switch-when="staff" src="role_icon_staff_circle.svg"></svg>\n  <svg ng-switch-when="contributor" src="role_icon_contributor_equilateral_triangle.svg"></svg>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_selection_dialog.html",'<form name="song_form" ng-submit="submit()">\n  <div class="form_section_label text_label text_label--purple" ng-bind="prompt"></div>\n  <div class="square_form">\n    <div ng-repeat="role in available_roles | orderBy:role" class="square_form-input_and_label square_form-input_and_label--half_width">\n      <label class="square_checkbox square_form-standard_element_margin">\n        <input type="checkbox" stop-propagation="click" ng-model="backing[role]">\n        <div class="text_label">{{ \'role.types.\' + role | i18n:{count:2} }}</div>\n      </label>\n    </div>\n  </div>\n  <button type="submit" class="modal_window-save_button square_button square_button--purple u-small_vertical_margins" ng-class="{\'square_button--waiting\': saving}" ng-bind="saving ? \'Saving\' : \'Save\'"></button>\n  <div ng-if="error" ng-bind="error" class="form_message form_message--error"></div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("scrollable_data.html",'<ng-transclude ng-transclude-slot="empty" ng-if="!$scrollable_data_ctrl.loading && $scrollable_data_ctrl.models.length === 0">\n  <div>{{ $scrollable_data_ctrl.empty_message || \'Nothing here.\' }}</div>\n</ng-transclude>\n\n<div ng-if="$scrollable_data_ctrl.models.length" class="{{$scrollable_data_ctrl.container_classes}}">\n  <transclude-injecting-local-scope\n    ng-repeat="scrollable_data_model in $scrollable_data_ctrl.models track by $id(scrollable_data_model)"\n    copy-value-to-scope="{key: $scrollable_data_ctrl.repeat_with, value: scrollable_data_model}"\n    class="u-display_block {{$scrollable_data_ctrl.item_classes}}"\n  ></transclude-injecting-local-scope>\n</div>\n\n<div ng-if="$scrollable_data_ctrl.has_next()" ng-switch="$scrollable_data_ctrl.scroll_mechanism">\n  <ng-transclude\n    ng-switch-when="button"\n    ng-transclude-slot="show_more"\n    ng-click="$scrollable_data_ctrl.load_next()"\n    ng-hide="$scrollable_data_ctrl.loading"\n  >\n    <div class="{{$scrollable_data_ctrl.button_classes || \'square_button\'}}">Show More</div>\n  </ng-transclude>\n\n  <div ng-switch-when="infinite_scroll">\n    <div\n      infinite-scroll="$scrollable_data_ctrl.load_next()"\n      infinite-scroll-disabled="!$scrollable_data_ctrl.has_next()"\n      yields-on-load-more="$scrollable_data_ctrl.more_loaded_callback = callback"\n    ></div>\n  </div>\n</div>\n\n<div class="u-vertical_margins" ng-if="$scrollable_data_ctrl.loading">\n  <placeholder-spinner></placeholder-spinner>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_form.html",'<form\n  action="/search"\n  method="get"\n  class="global_search global_search--{{ style }}"\n  ng-class="{\'global_search--high_z_index\': focused}"\n  click-outside="unfocus()"\n>\n  <kb shortcut="/" action="focus()"></kb>\n\n  <input\n    autocomplete="off"\n    ng-click="focus()"\n    ng-model="search_text"\n    ng-readonly="submitting"\n    name="q"\n    type="text"\n    class="quick_search autocomplete search quick_search--{{ style }}"\n    placeholder="Search lyrics &amp; more"\n    required\n  />\n\n  <div class="global_search-submit_button u-clickable" ng-click="submit_form()">\n    <svg src="magnifying_glass.svg" class="global_search-search_icon"></svg>\n  </div>\n\n  <div\n    ng-show="focused && search_text"\n    class="search_results_autocomplete_container"\n    links-navigable-by-arrow-keys="$ctrl.refresh_links = refresh"\n  >\n    <div\n      class="feed_dropdown feed_dropdown--medium_width feed_dropdown--left_align feed_dropdown--darker_background"\n      stop-propagation="click"\n      scroll-only-this-element=""\n    >\n      <search-results\n        search-text="search_text"\n        sections="sections"\n        scroll-container-selector=".feed_dropdown"\n        on-filter="$ctrl.refresh_links()"\n        on-sections-change="$ctrl.refresh_links()"\n        on-load-next="$ctrl.refresh_links(false)"\n        on-animation-end="$ctrl.refresh_links()"\n      ></search-results>\n    </div>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_result_item.html",'<div\n  class="u-quarter_vertical_margins u-clickable"\n  ng-switch="$ctrl.hit.type"\n  tracking="click"\n  tracking-event="Search Result Tap"\n>\n  <mini-song-card\n    object="$ctrl.hit.result"\n    ng-switch-when="song"\n    search-highlights="$ctrl.hit.highlights"\n  ></mini-song-card>\n  <mini-artist-card object="$ctrl.hit.result" ng-switch-when="artist"></mini-artist-card>\n  <mini-user-card object="$ctrl.hit.result" ng-switch-when="user"></mini-user-card>\n  <mini-article-card object="$ctrl.hit.result" ng-switch-when="article"></mini-article-card>\n  <mini-video-card object="$ctrl.hit.result" ng-switch-when="video"></mini-article-card>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_result_items.html",'<div ng-repeat="hit in $ctrl.results | limitTo: $ctrl.limit_to">\n  <search-result-item hit="hit"></search-result-item>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_result_paginated_section.html",'<div class="text_label u-text_center u-large_vertical_margins">\n  All {{:: $ctrl.section_type }} results\n</div>\n\n<scrollable-data\n  src="$ctrl.infinite_scroll_data"\n  repeat-with="hit"\n  scroll-mechanism="infinite_scroll"\n  container-classes="{{$ctrl.section_type === \'album\' ? \'thumbnail_grid white_container\' : \'\'}}"\n  item-classes="{{$ctrl.section_type === \'album\' ? \'thumbnail_grid-grid_element thumbnail_grid-grid_element--third u-clickable\' : \'\'}}"\n>\n  <vertical-search-result-item\n    ng-if="$ctrl.section_type === \'album\'"\n    hit="hit"\n  ></vertical-search-result-item>\n\n  <search-result-item\n    ng-if="$ctrl.section_type !== \'album\'"\n    hit="hit"\n  ></search-result-item>\n\n  <empty>\n    <div class="u-horizontal_margins">\n      No search results found.\n    </div>\n  </empty>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_result_section.html",'<div ng-if="$ctrl.section.hits.length > 0">\n  <div\n    class="search_results_label text_label text_label--x_small_text_size text_label--gray"\n    ng-class="{\'search_results_label--no_horizontal_padding\': $ctrl.variants.no_horizontal_label_padding}"\n    ng-bind=":: \'search.sections.\' + $ctrl.section.type + \'.title\' | i18n"\n  ></div>\n  <div ng-switch="$ctrl.section.type === \'album\' || ($ctrl.section.type === \'top_hit\' && $ctrl.section.hits[0].index === \'album\')">\n    <vertical-search-result-items\n      ng-switch-when="true"\n      results="$ctrl.section.hits"\n      limit-to="$ctrl.limit_to"\n    ></vertical-search-result-items>\n\n    <search-result-items\n      ng-switch-default\n      results="$ctrl.section.hits"\n      limit-to="$ctrl.limit_to"\n    ></search-result-items>\n  </div>\n\n  <a\n    href=""\n    prevent-default-click\n    ng-if="$ctrl.section.type !== \'top_hit\'"\n    ng-click="$ctrl.on_show_more({section_type: $ctrl.section.type})"\n    class="full_width_button u-bottom_margin"\n    tracking="click"\n    tracking-event="Search More Results Page View"\n  >\n    Show more {{:: \'search.sections.\' + $ctrl.section.type + \'.title\' | i18n | lowercase }}\n    <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="right_arrow.svg"></svg>\n  </a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_results.html",'<div class="feed_dropdown-header feed_dropdown-header--bottom_border">\n  <span class="text_label">Search results</span>\n</div>\n\n<div class="u-xxx_large_vertical_margins" ng-if="!$ctrl.sections">\n  <placeholder-spinner></placeholder-spinner>\n</div>\n\n<div class="global_search-search_results">\n  <div ng-hide="$ctrl.filter" class="global_search-search_results-sections nganimate-slide_out_left nganimate-slide_from_left">\n    <search-result-section\n      ng-repeat="section in $ctrl.sections"\n      section="section"\n      limit-to="section.type === \'top_hit\' ? 1 : 3"\n      on-show-more="$ctrl.filter = section_type; $ctrl.save_scroll_and_scroll_top(); $ctrl.on_filter()"\n    ></search-result-section>\n\n    <div ng-if="$ctrl.sections && !$ctrl.has_results()" class="u-xxx_large_vertical_margins u-text_center">\n      No results\n    </div>\n  </div>\n\n  <div\n    ng-if="$ctrl.filter"\n    class="global_search-search_results-show_more nganimate-slide_out_right nganimate-slide_from_right"\n  >\n    <a\n      href=""\n      prevent-default-click\n      ng-click="$ctrl.filter = null; $ctrl.restore_scroll(); $ctrl.on_filter()"\n      class="global_search-search_results-back"\n    >\n      <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="left_arrow.svg"></svg>\n      Back\n    </a>\n\n    <search-result-paginated-section\n      section-type="{{$ctrl.filter}}"\n      search-text="{{$ctrl.search_text}}"\n      on-load-next="$ctrl.on_load_next()"\n    ></search-result-paginated-section>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_results_page.html",'<leaderboard-ad\n  name="desktop_search_leaderboard"\n></leaderboard-ad>\n\n<div class="u-xx_large_vertical_margins">\n  <div ng-if="$ctrl.q" class="u-text_center">\n    <h2 class="search_results_page-header">{{$ctrl.q}}</h2>\n    <div class="text_label">All Results</div>\n  </div>\n\n  <div ng-if="!$ctrl.sections" class="placeholder placeholder--full_height">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n\n  <div ng-if="$ctrl.sections && $ctrl.has_results" class="column_layout">\n    <div class="column_layout-column_span column_layout-column_span--primary">\n      <div ng-repeat="section in $ctrl.sections">\n        <search-result-section\n          ng-if="[\'top_hit\', \'song\', \'lyric\'].includes(section.type)"\n          section="section"\n          on-show-more="$ctrl.filter = section_type"\n          limit-to="section.type === \'top_hit\' ? 1 : 5"\n          variants="{no_horizontal_label_padding: true}"\n        ></search-result-section>\n      </div>\n    </div>\n\n    <div class="column_layout-column_span column_layout-column_span--secondary">\n      <div ng-repeat="section in $ctrl.sections">\n        <search-result-section\n          ng-if="![\'top_hit\', \'song\', \'lyric\'].includes(section.type)"\n          section="section"\n          on-show-more="$ctrl.filter = section_type"\n          limit-to="3"\n          variants="{no_horizontal_label_padding: true}"\n        ></search-result-section>\n      </div>\n      <dfp-ad name="desktop_search_sidebar"></dfp-ad>\n    </div>\n\n    <modal-window\n      ng-if="$ctrl.filter"\n      on-close="$ctrl.filter = null"\n      variants="{narrow_width: true, white_background: true}"\n    >\n      <search-result-paginated-section\n        section-type="{{$ctrl.filter}}"\n        search-text="{{$ctrl.q}}"\n      ></search-result-paginated-section>\n    </modal-window>\n  </div>\n\n  <div ng-if="$ctrl.sections && !$ctrl.has_results" class="u-xxx_large_vertical_margins u-text_center">\n    No results\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("select_dropdown.html",'<span\n  class="text_label"\n  ng-class="{\n    \'text_label--pink\': !$ctrl.variants.gray,\n    \'text_label--gray\': $ctrl.variants.gray,\n    \'text_label--x_small_text_size\': $ctrl.variants.small,\n    \'u-clickable\': $ctrl.is_clickable()\n  }"\n  ng-click="$ctrl.dropdown_opened = !$ctrl.dropdown_opened"\n  ng-click-disabled="!$ctrl.is_clickable()"\n  click-outside="$ctrl.dropdown_opened = false"\n>\n  {{ $ctrl.selected.i18n_key | i18n:{defaultValue: $ctrl.selected.label} }}\n\n  <svg\n    class="inline_icon inline_icon--short inline_icon--up_1"\n    ng-class="{\'inline_icon--pink\': !$ctrl.variants.gray, \'inline_icon--gray\': $ctrl.variants.gray}"\n    src="down_arrow.svg"\n    ng-if="$ctrl.is_clickable()"\n  ></svg>\n</span>\n<div\n  class="tooltip tooltip--tiny tooltip--no_padding"\n  ng-show="$ctrl.dropdown_opened"\n  ng-click="$ctrl.dropdown_opened = false"\n  ng-class="{\n    \'tooltip--dock_top_left\': $ctrl.variants.left_aligned,\n    \'tooltip--dock_top_right\': $ctrl.variants.right_aligned\n  }"\n>\n  <div\n      ng-repeat="option in $ctrl.options"\n      class="tooltip-list_item"\n      ng-click="$ctrl.selected = option; $ctrl.on_select({ selection: option })"\n      ng-show="$ctrl.selected !== option"\n  >\n    {{ option.i18n_key | i18n:{defaultValue: option.label} }}\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("share_buttons.html",'<div class="share_buttons u-vertical_margins">\n  <facebook-share-button url="song.share_url"></facebook-share-button>\n  <twitter-share-button url="song.share_url" message="song.twitter_share_message_without_url"></twitter-share-button>\n  <span ng-cloak>\n    <pyong-button\n      type="song"\n      object="song"\n      on-unauthorized="ctrl.prompt_auth = true"\n    ></pyong-button>\n    <follow-button type="song" object="song" on-unauthorized="ctrl.prompt_auth = true"></follow-button>\n    <span class="square_button" ng-click="ctrl.showing_ellipsis_menu = !ctrl.showing_ellipsis_menu" ng-class="{\'square_button--active\': ctrl.showing_ellipsis_menu}">Embed</span>\n\n    <modal-window ng-if="ctrl.prompt_auth" on-close="ctrl.prompt_auth = false" variants="{narrow_width: true}">\n      <authentication-form></authentication-form>\n    </modal-window>\n  </span>\n</div>\n<div class="ellipsis_menu gray_container" ng-if="ctrl.showing_ellipsis_menu" ng-cloak>\n  <div class="ellipsis_menu-row">\n    <label for="share_url_{{ song.id }}" class="text_label ellipsis_menu-label">Share URL:</label>\n    <input id="share_url_{{ song.id }}" class="square_input ellipsis_menu-input" value="{{ song.share_url }}" readonly select-all-on-click />\n    <div class="square_button" copy-to-clipboard="song.share_url" text-to-show-after-copy="Copied!">Copy</div>\n  </div>\n  <div class="ellipsis_menu-row">\n    <label for="embed_content_{{ song.id }}" class="text_label ellipsis_menu-label">Embed on your website:</label>\n    <input id="embed_content_{{ song.id }}" class="square_input ellipsis_menu-input" value="{{ song.embed_content }}" readonly select-all-on-click />\n    <div class="square_button" copy-to-clipboard="song.embed_content" text-to-show-after-copy="Copied!">Copy</div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("simple_datetime_input.html",'<div class="square_select_group">\n  <div class="square_select_group-single">\n    <select ng-options="month.number as month.name for month in months" ng-model="datetime.month"></select>\n  </div>\n  <div class="square_select_group-single">\n    <select ng-options="day as day for day in days" ng-model="datetime.day"></select>\n  </div>\n  <div class="square_select_group-single">\n    <select ng-options="year as year for year in years" ng-model="datetime.year"></select>\n  </div>\n  <span class="square_select_group-separator u-quarter_left_margin"></span>\n  <div class="square_select_group-single">\n    <select ng-options="hour as hour for hour in hours" ng-model="datetime.hour"></select>\n  </div>\n  <span class="square_select_group-separator u-quarter_left_margin">:</span>\n  <div class="square_select_group-single">\n    <select ng-options="minute as minute for minute in minutes" ng-model="datetime.minute"></select>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_activity.html",'<div class="song_activity-title">Contributions & Activity</div>\n<div class="text_label u-bottom_margin">Annotation stats</div>\n<span class="annotation_stat">\n  <span class="annotation_stat-pill annotation_stat-pill--green">\n    <svg class="inline_icon inline_icon--up_1" src="checkmark.svg"></svg>\n    {{ song.stats.accepted_annotations }}\n  </span>\n  Accepted {{ \'annotation\' | i18n:{count:song.stats.accepted_annotations} }}\n</span>\n<span class="annotation_stat">\n  <span class="annotation_stat-pill annotation_stat-pill--red">\n    <svg class="inline_icon inline_icon--up_1" src="x.svg"></svg>\n    {{ song.stats.unreviewed_annotations }}\n  </span>\n  Unreviewed {{ \'annotation\' | i18n:{count:song.stats.unreviewed_annotations} }}\n</span>\n<span class="annotation_stat">\n  <span class="annotation_stat-pill">\n    <svg class="checky" src="checky.svg"></svg>\n    {{ song.stats.verified_annotations }}\n  </span>\n  Verified {{ \'annotation\' | i18n:{count:song.stats.verified_annotations} }}\n</span>\n<div ng-if="song.stats.transcribers" class="u-xx_large_vertical_margins">\n  <div class="text_label">Transcribed by {{ \'terms.scholar\' | i18n:{count:song.stats.transcribers} }}</div>\n  <leaderboard collection="contributors.transcribers"></leaderboard>\n  <span class="leaderboard-load_more" ng-show="ctrl.loading_contributors">Loading</span>\n</div>\n<div ng-if="song.stats.iq_earners" class="u-xx_large_vertical_margins">\n  <div class="text_label">Annotated by {{ \'terms.scholar\' | i18n:{count:song.stats.iq_earners} }}</div>\n  <leaderboard collection="contributors.iq_earners"></leaderboard>\n  <a class="leaderboard-load_more" ng-click="ctrl.load_more_iq_earners()" ng-show="has_more_iq_earners && !ctrl.loading_iq_earners">Load more {{ \'terms.contributor\' | i18n:{count:2} }}</a>\n  <span class="leaderboard-load_more" ng-show="ctrl.loading_iq_earners">Loading</span>\n</div>\n<div class="song_activity-activity_stream">\n  <div class="text_label">Recent Activity</div>\n\n  <div infinite-scroll="ctrl.load_next_page()" infinite-scroll-disabled="!ctrl.should_paginate()">\n    <div ng-repeat="line_item in line_items track by line_item.event_ids">\n      <inbox-line-item object=":: line_item" eager-load-details="$first && opened" variants="::{active_display:true}"></inbox-line-item>\n    </div>\n    <placeholder-spinner ng-if="!done_loading" placeholder-classes="feed_dropdown-item"></placeholder-spinner>\n\n    <div ng-if="done_loading && !line_items.length" class="u-vertical_margins u-horizontal_margins">\n      No activity\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_admin_menu.html",'<div\n  ng-show="has_admin_items"\n  class="square_button square_button--transparent"\n  tether-drop-target\n>\n  Admin\n  <svg src="down_arrow.svg" class="inline_icon inline_icon--short inline_icon--up_1"></svg>\n  <tether-drop\n    show-on="click"\n    position="bottom left"\n    yields-api="$ctrl.tetherApi = tetherApi"\n  >\n    <div class="tooltip tooltip--no_padding">\n      <div\n        ng-repeat="action in actions"\n        ng-if="can_perform(action)"\n        class="tooltip-list_item"\n        ng-click="attempt_admin_action(action); $ctrl.tetherApi.hide()"\n      >\n        <svg ng-if="action === \'unpublish\'" class="inline_icon inline_icon--reading_size inline_icon--up_1 tooltip-list_item-icon" src="unlock.svg"></svg>\n        <svg ng-if="action === \'publish\'" class="inline_icon tooltip-list_item-icon" src="lock.svg"></svg>\n        <svg ng-if="action === \'hide\'" class="inline_icon tooltip-list_item-icon" src="eye_cross.svg"></svg>\n        <svg ng-if="action === \'unhide\'" class="inline_icon tooltip-list_item-icon" src="eye.svg"></svg>\n        <svg ng-if="action === \'destroy\'" class="inline_icon tooltip-list_item-icon" src="x.svg"></svg>\n        <svg ng-if="action === \'edit_spotify_annotations_for\'" class="inline_icon tooltip-list_item-icon" src="spotify.svg"></svg>\n        {{ \'song.actions.\' + action | i18n }}\n      </div>\n      <div\n        ng-if="can_perform(\'see_short_id\')"\n        class="tooltip-list_item"\n        copy-to-clipboard="\'song:{{song.id}}\'"\n        text-to-show-after-copy="Copied to clipboard"\n      >\n        Copy short ID (<code>song:{{song.id}}</code>)\n      </div>\n      <div\n        ng-if="can_perform(\'see_short_id\')"\n        class="tooltip-list_item"\n        copy-to-clipboard="\'artist:{{song.primary_artist.id}}\'"\n        text-to-show-after-copy="Copied to clipboard"\n      >\n        Copy artist ID (<code>artist:{{song.primary_artist.id}}</code>)\n      </div>\n      <div class="tooltip-list_item" ng-if="can_perform(\'manage_chart_item\')">\n        <manage-chart-item type="\'songs\'" id="song.id"></manage-chart-item>\n      </div>\n      <div\n        ng-transclude="additional_buttons"\n        ng-click="$ctrl.tetherApi.hide()"\n      ></div>\n    </div>\n  </tether-drop>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_album.html",'<div class="u-xx_large_vertical_margins">\n  <div class="song_album u-bottom_margin">\n    <a\n      ng-href="{{:: $ctrl.album.url}}"\n      title="{{:: $ctrl.album.name}}"\n      class="song_album-album_art"\n    >\n      <img sized-src=":: $ctrl.album.cover_art_url">\n    </a>\n\n    <div class="song_album-info">\n      <a\n        ng-href="{{:: $ctrl.album.url}}"\n        title="{{:: $ctrl.album.name}}"\n        class="song_album-info-title"\n      >\n      {{:: $ctrl.album.name}}\n      <span class="song_album-info-release_year" ng-if=":: $ctrl.album.release_date_components.year">({{:: $ctrl.album.release_date_components.year }})</span>\n      </a>\n      <a\n        ng-href="{{:: $ctrl.album.artist.url}}"\n        title="{{:: $ctrl.album.name}}"\n        class="song_album-info-artist"\n      >{{:: $ctrl.album.artist.name}}</a>\n    </div>\n  </div>\n\n  <div\n    class="track_listing"\n    ng-class="{\'track_listing--columns\': $ctrl.tracks.length > 7}"\n  >\n    <div ng-repeat="track in $ctrl.tracks track by $index">\n      <div\n        class="track_listing-track"\n        ng-class="{\'track_listing-track--current\': $ctrl.is_current_song(track.song)}"\n      >\n        <span\n          ng-if=":: track.number"\n          class="track_listing-track_number"\n        >{{:: track.number}}.&nbsp;&nbsp;</span>\n        <a\n          ng-if=":: $ctrl.should_link_to_track(track)"\n          ng-href="{{:: track.song.url}}"\n          title="{{:: track.song.title}}"\n        >\n          {{:: track.song.title}}\n          <span ng-if=":: track.song.lyrics_state === \'unreleased\'">{{:: \'song.lyrics_state.unreleased.indicator\' | i18n }}</span>\n          <span ng-if=":: track.song.lyrics_state === \'incomplete\'">{{:: \'song.lyrics_state.incomplete.indicator\' | i18n }}</span>\n        </a>\n        <span ng-if=":: !$ctrl.should_link_to_track(track)">\n          {{:: track.song.title}}\n          <span ng-if=":: track.song.lyrics_state === \'unreleased\'">{{:: \'song.lyrics_state.unreleased.indicator\' | i18n }}</span>\n          <span ng-if=":: track.song.lyrics_state === \'incomplete\'">{{:: \'song.lyrics_state.incomplete.indicator\' | i18n }}</span>\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_albums.html",'<song-album\n  ng-if="$ctrl.primary_album()"\n  album="$ctrl.primary_album()"\n  tracks="$ctrl.primary_album_tracks"\n  current-song="$ctrl.song"\n></song-album>\n\n<song-album\n  ng-repeat="album in ($ctrl.other_albums() | drop:-$ctrl.hidden_album_count()) track by album.id"\n  album="album"\n></song-album>\n\n<a\n  href\n  class="text_label text_label--button text_label--purple"\n  ng-if="$ctrl.hidden_album_count()"\n  ng-click="$ctrl.show_all()"\n>{{ \'songs.hidden_album_count\' | i18n:{count:$ctrl.hidden_album_count()} }}</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_attribution_visualization.html",'<div class="u-vertical_margins" ng-if="!$ctrl.words">\n  <placeholder-spinner></placeholder-spinner>\n</div>\n\n<div ng-if="$ctrl.words" class="u-half_vertical_margins">\n  <div class="u-half_vertical_margins">\n    <span class="text_label">Version {{$ctrl.current_time_index + 1}} / {{$ctrl.change_times.length}} ({{$ctrl.change_times[$ctrl.current_time_index] * 1000 | date:"h:mma MM/dd/yyyy"}})</span>\n  </div>\n  <button class="square_button" ng-click="$ctrl.adjust_current_time_index(-1)">&larr; Back</button>\n  <button class="square_button" ng-click="$ctrl.adjust_current_time_index(1)">Forward &rarr; </button>\n</div>\n\n<span tether-drop-target ng-repeat="word in $ctrl.words_to_show()">\n  <span ng-style="{backgroundColor: $ctrl.color(word)}">{{ word.word }}</span>\n  <tether-drop ng-if="word.user_id" show-on="hover">\n    <user-tooltip user="$ctrl.users[word.user_id]"></user-tooltip>\n  </tether-drop>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_metadata.html",'<div class="song_metadata">\n  <div>\n    <div class="metadata_with_icon" ng-class="{\'metadata_with_icon--hot\': song.stats.concurrents + 1 > 50}">\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg ng-if="song.stats.concurrents + 1 <= 50" class="metadata_with_icon-icon" src="clock.svg"></svg>\n      </span>\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg ng-if="song.stats.concurrents + 1 > 50" class="metadata_with_icon-icon" src="fire.svg"></svg>\n      </span>\n      {{ song.stats.concurrents + 1 | number }} <span class="text_label text_label--x_small_text_size">viewing</span>\n    </div>\n    <div class="metadata_with_icon metadata_with_icon-views" ng-if="song.stats.pageviews">\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg class="metadata_with_icon-icon" src="eye.svg"></svg>\n      </span>\n      {{ song.stats.pageviews | number }} <span class="text_label text_label--x_small_text_size">views</span>\n    </div>\n  </div>\n  <div>\n    <div class="metadata_with_icon metadata_with_icon-contributors u-clickable" ng-click="ctrl.showing_all_metadata = true">\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg class="metadata_with_icon-icon" src="people.svg"></svg>\n      </span>\n      <span class="metadata_with_icon-link">\n        {{ song.stats.contributors | number }}\n        <span class="text_label text_label--x_small_text_size">\n          {{ \'terms.contributor\' | i18n:{count:song.stats.contributors} }}\n        </span>\n      </span>\n    </div>\n    <div\n      class="metadata_with_icon metadata_with_icon-contributors u-clickable"\n      ng-click="ctrl.show_attribution_visualization = true"\n      ng-if="ctrl.has_permission(\'view_attribution_visualization\')"\n    >\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg class="metadata_with_icon-icon" src="pencil.svg"></svg>\n      </span>\n      <span class="metadata_with_icon-link">\n        <span class="text_label text_label--x_small_text_size">Attribution Visualization</span>\n      </span>\n    </div>\n    <div class="metadata_with_icon" ng-if="song.tags.length">\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg class="metadata_with_icon-icon" src="tag.svg"></svg>\n      </span>\n      <div class="metadata_with_icon-tags">\n        <span ng-repeat="tag in song.tags track by tag.id">\n          <a\n            class="metadata_with_icon-link"\n            ng-href="{{ tag.url }}"\n          ><span ng-class="{\'metadata_with_icon-tags-primary_tag\': tag.primary}">{{ tag.name }}</span></a>{{ $last ? \'\' : \', \' }}\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n\n<modal-window ng-if="ctrl.showing_all_metadata" on-close="ctrl.showing_all_metadata = false">\n  <song-activity song="song"></song-activity>\n</modal-window>\n\n<modal-window ng-if="ctrl.show_attribution_visualization" on-close="ctrl.show_attribution_visualization = false">\n  <song-attribution-visualization id="song.id"></attribution-visualization>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_metadata_form.html",'<form name="ctrl.song_form" ng-submit="ctrl.submit()" ng-model-options="{updateOn: \'submit\'}" submit-on-cmd-enter dirtyable yields-is-dirty="yields_is_dirty({is_dirty: is_dirty})">\n  <div class="u-vertical_margins form_message form_message--error" ng-if="ctrl.editable_metadata_stale" ng-bind=":: \'songs.editing_stale\' | i18n"></div>\n  <div ng-if="ctrl.error" class="form_message form_message--error u-bottom_margin">\n    <div class="text_label">\n      {{ ctrl.error.message }}\n      <span ng-repeat="base_error in ctrl.error.validation_errors.base">\n        <br>\n        {{ base_error }}\n      </span>\n    </div>\n  </div>\n  <expandable-accordion-section label="{{\'song.metadata.title_and_artists\' | i18n}}" shortcut="shift+a" expanded="expanded_sections.title_and_artists">\n    <div class="square_form">\n      <metadata-input-and-label label="{{\'song.metadata.title\' | i18n}}" full="true" errors="ctrl.error.validation_errors.title" is-disabled="!ctrl.has_permission(\'rename\')">\n        <input ng-disabled="!ctrl.has_permission(\'rename\')" name="title" ng-model="song.title" placeholder="Song title" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.primary_artist\' | i18n}}" errors="ctrl.error.validation_errors.primary_artist" is-disabled="!ctrl.has_permission(\'rename\')">\n        <input\n            ng-model="song.primary_artist"\n            autocomplete-with="artist"\n            class="square_input square_form-standard_element_margin"\n            placeholder="Primary artist on this song"\n            ng-value="song.primary_artist.name"\n            display-field="name"\n            ng-disabled="!ctrl.has_permission(\'rename\')">\n        </input>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.writer_artists\' | i18n}}" errors="ctrl.error.validation_errors.writer_artists" is-disabled="!ctrl.has_permission(\'edit\')">\n        <autocomplete-tags-input\n          ng-disabled="!ctrl.has_permission(\'edit\')"\n          bind-to="song.writer_artists"\n          name="writer_artists"\n          autocomplete-model="artist"\n          placeholder="e.g. Pharrell Williams, Sean Garrett"\n          input-classes="tags_input square_input square_form-standard_element_margin">\n        </autocomplete-tags-input>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.featured_artists\' | i18n}}" errors="ctrl.error.validation_errors.featured_artists" is-disabled="!ctrl.has_permission(\'rename\')">\n        <autocomplete-tags-input\n          ng-disabled="!ctrl.has_permission(\'rename\')"\n          bind-to="song.featured_artists"\n          name="featured_artists"\n          autocomplete-model="artist"\n          placeholder="e.g. JAY Z, Lil Wayne, T.I."\n          input-classes="tags_input square_input square_form-standard_element_margin">\n        </autocomplete-tags-input>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.producer_artists\' | i18n}}" errors="ctrl.error.validation_errors.producer_artists" is-disabled="!ctrl.has_permission(\'edit\')">\n        <autocomplete-tags-input\n          ng-disabled="!ctrl.has_permission(\'edit\')"\n          bind-to="song.producer_artists"\n          name="producer_artists"\n          autocomplete-model="artist"\n          placeholder="e.g. J Dilla, No I.D."\n          input-classes="tags_input square_input square_form-standard_element_margin">\n        </autocomplete-tags-input>\n      </metadata-input-and-label>\n\n      <metadata-custom-performance-role-input\n        custom-performance-roles="song.custom_performances"\n        role-field-placeholder="e.g. mastered by, arranged by"\n        artist-field-placeholder="e.g. Bob Katz, Van Dyke Parks"\n        is-disabled="!ctrl.has_permission(\'edit\')"\n        validation-errors="ctrl.error.validation_errors"\n        class="u-width_100"\n      ></metadata-custom-performance-role-input>\n    </div>\n  </expandable-accordion-section>\n\n  <expandable-accordion-section label="{{\'song.metadata.audio_video_and_images\' | i18n}}" shortcut="shift+m" expanded="expanded_sections.audio_video_and_images">\n    <div class="square_form">\n      <metadata-input-and-label label="{{\'song.metadata.spotify_uuid\' | i18n}}"  errors="ctrl.error.validation_errors.spotify_uuid" ng-if="ctrl.has_permission(\'edit_spotify_details\')">\n        <input name="spotify_uuid" ng-model="song.spotify_uuid" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label errors="ctrl.error.validation_errors.soundcloud_url" label="{{\'song.metadata.soundcloud_url\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit_soundcloud_url\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit_soundcloud_url\')" name="soundcloud_url" ng-model="song.soundcloud_url" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.youtube_url\' | i18n}}" errors="ctrl.error.validation_errors.youtube_url" class="square_form-input_and_label--combo_large" is-disabled="!ctrl.has_permission(\'edit_youtube_url\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit_youtube_url\')" name="youtube_url" ng-model="song.youtube_url" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.youtube_start\' | i18n}}" class="square_form-input_and_label--combo_small" is-disabled="!ctrl.has_permission(\'edit_youtube_url\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit_youtube_url\') || !song.youtube_url" name="youtube_start" placeholder="00:00" ng-model="song.youtube_start" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label errors="ctrl.error.validation_errors.custom_song_art_image_url" label="{{\'song.metadata.custom_song_art_image_url\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit\')" name="custom_song_art_image_url" ng-model="song.custom_song_art_image_url" class="square_input square_form-standard_element_margin" proxied-image>\n      </metadata-input-and-label>\n\n      <div class="square_form-input_and_label square_form-input_and_label--bottom_aligned square_form-input_and_label--half_width" ng-click="song.featured_video = !song.featured_video">\n        <div class="square_checkbox square_form-standard_element_margin">\n          <input\n            mousetrap-input\n            ng-disabled="!ctrl.has_permission(\'toggle_featured_video\')"\n            type="checkbox"\n            stop-propagation="click"\n            ng-click="song.featured_video = !song.featured_video"\n            name="featured_video"\n            ng-model="song.featured_video"\n          >\n          <div class="text_label">{{\'song.metadata.featured_video\' | i18n}}</div>\n        </div>\n      </div>\n\n      <metadata-input-and-label errors="ctrl.error.validation_errors.custom_header_image_url" label="{{\'song.metadata.custom_header_image_url\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit\')" name="custom_header_image_url" ng-model="song.custom_header_image_url" class="square_input square_form-standard_element_margin" proxied-image>\n      </metadata-input-and-label>\n    </div>\n  </expandable-accordion-section>\n\n  <expandable-accordion-section label="{{\'song.metadata.album_date_and_tags\' | i18n}}" shortcut="shift+t" expanded="expanded_sections.album_date_and_tags">\n    <div class="square_form">\n      <metadata-input-and-label label="{{\'song.metadata.albums\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit\')">\n        <autocomplete-tags-input\n          ng-disabled="!ctrl.has_permission(\'edit\')"\n          bind-to="song.albums"\n          name="albums"\n          autocomplete-model="album"\n          autocomplete-options="{artist_id: song.primary_artist.id, only_editable: true}"\n          input-classes="tags_input square_input square_form-standard_element_margin">\n        </autocomplete-tags-input>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.release_date\' | i18n}}" errors="ctrl.error.validation_errors.release_date" is-disabled="!ctrl.has_permission(\'edit\')">\n        <component-date-input ng-model="song.release_date_components" disabled="!ctrl.has_permission(\'edit\')"></component-date-input>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.recording_location\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit\')" name="recording_location" ng-model="song.recording_location" placeholder="Where this song was recorded" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.primary_tag\' | i18n}}" errors="ctrl.error.validation_errors.primary_tag" is-disabled="!ctrl.has_permission(\'edit_tags\')">\n        <div class="square_select_group">\n          <div class="square_select_group-single u-width_100">\n            <select ng-disabled="!ctrl.has_permission(\'edit_tags\')" ng-options="tag as tag.name for tag in available_primary_tags" ng-model="song.primary_tag" class="select_input"></select>\n          </div>\n        </div>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.tags\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit_tags\')">\n        <autocomplete-tags-input\n          ng-disabled="!ctrl.has_permission(\'edit_tags\')"\n          bind-to="song.tags"\n          name="tags"\n          autocomplete-model="tag"\n          require-existing="!ctrl.has_permission(\'create_tag\')"\n          input-classes="tags_input square_input square_form-standard_element_margin">\n        </autocomplete-tags-input>\n      </metadata-input-and-label>\n    </div>\n  </expandable-accordion-section>\n\n  <expandable-accordion-section label="{{\'song.metadata.song_relationships\' | i18n}}" shortcut="shift+r" expanded="expanded_sections.song_relationships">\n    <div class="square_form">\n      <song-metadata-song-relationships-input\n          song-relationships="song.song_relationships"\n          is-disabled="!ctrl.has_permission(\'edit\')"\n          class="u-width_100"\n      ></song-metadata-song-relationships-input>\n    </div>\n  </expandable-accordion-section>\n\n  <expandable-accordion-section\n    ng-if="ctrl.has_permission(\'override_apple_match\')"\n    label="{{\'song.metadata.apple_match_overrides\' | i18n}}"\n    shortcut="shift+p"\n    expanded="expanded_sections.apple_match_overrides"\n  >\n    <div class="square_form">\n      <metadata-input-and-label ng-repeat="purpose in ctrl.apple_purposes track by purpose" label="{{\'song.metadata.apple_song_for_\' + purpose | i18n}}" errors="ctrl.error.validation_errors[\'apple_song_for_\' + purpose]" full="true">\n        <input name="apple_song_for_{{purpose}}" ng-model="song[\'apple_song_for_\' + purpose]" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n    </div>\n  </expandable-accordion-section>\n\n  <button type="submit" class="modal_window-save_button square_button square_button--purple u-small_vertical_margins">Save</button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_metadata_preview.html",'<div class="header_with_cover_art-metadata_preview header_with_cover_art-metadata_preview--bottom_left">\n  <div class="header_with_cover_art-metadata_preview-unit" title="{{ song.stats.concurrents + 1 | number}} viewing">\n    <svg ng-if="song.stats.concurrents + 1 <= 50" class="inline_icon inline_icon--gray inline_icon--small_reading_size inline_icon--up_1" src="clock.svg"></svg>\n    <svg ng-if="song.stats.concurrents + 1 > 50" class="inline_icon inline_icon--pink inline_icon--reading_size inline_icon--up_2" src="fire.svg"></svg>\n    <span\n      class="text_label text_label--x_small_text_size"\n      ng-class="{\n        \'text_label--gray\': song.stats.concurrents + 1 <= 50,\n        \'text_label--pink\': song.stats.concurrents + 1 > 50\n      }"\n    >{{ song.stats.concurrents + 1 | number }}</span>\n  </div>\n  <div class="header_with_cover_art-metadata_preview-unit" ng-if="song.stats.pageviews" title="{{ song.stats.pageviews | number }} views">\n    <svg class="inline_icon inline_icon--gray" src="eye.svg"></svg>\n    <span class="text_label text_label--gray text_label--x_small_text_size">{{ song.stats.pageviews | abbreviateBigNumber }}</span>\n  </div>\n  <div\n    class="u-clickable header_with_cover_art-metadata_preview-unit"\n    ng-click="ctrl.showing_all_metadata = true"\n    title="{{ song.stats.contributors | number }} {{ \'terms.contributor\' | i18n:{count:song.stats.contributors} }}"\n  >\n    <svg class="inline_icon inline_icon--gray" src="people.svg"></svg>\n    <span class="text_label text_label--gray text_label--x_small_text_size text_label--button">\n      {{ song.stats.contributors | number }}\n    </span>\n  </div>\n</div>\n\n<modal-window ng-if="ctrl.showing_all_metadata" on-close="ctrl.showing_all_metadata = false">\n  <song-activity song="song"></song-activity>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_metadata_song_relationships_input.html",'<div ng-repeat="song_relationship in $ctrl.visible_relationships track by song_relationship.type" class="square_form-sub_section">\n  <div class="text_label text_label--link" ng-click="$ctrl.dropdown_opened = song_relationship.type === $ctrl.dropdown_opened ? undefined : song_relationship.type" click-outside="$ctrl.dropdown_opened = undefined" suppress-click-outside-if-handled prevent-default-click>\n    {{ \'song_relationship.title.\' + song_relationship.type | i18n }}\n    <svg ng-if="!$ctrl.isDisabled" class="inline_icon inline_icon--short inline_icon--up_1" src="down_arrow.svg" viewBox="0 0 34 15"></svg>\n  </div>\n  <div class="tooltip tooltip--tiny tooltip--no_padding tooltip--dock_top_left" ng-if="!$ctrl.isDisabled && song_relationship.type === $ctrl.dropdown_opened" ng-click="$ctrl.dropdown_opened = undefined">\n    <div class="tooltip-list_item" ng-repeat="available_relationship in $ctrl.available_relationships()" value="{{ available_relationship.type }}" ng-click="$ctrl.change_relationship_to(song_relationship, available_relationship)">{{ \'song_relationship.title.\' + available_relationship.type | i18n }}</div>\n  </div>\n\n  <metadata-input-and-label is-disabled="$ctrl.isDisabled">\n    <div class="u-large_top_margin">\n      <autocomplete-tags-input\n          ng-disabled="$ctrl.isDisabled"\n          bind-to="song_relationship.songs"\n          name="song_relationships"\n          autocomplete-model="song"\n          placeholder="e.g. Dust a Soundboy"\n          input-classes="tags_input square_input square_form-standard_element_margin"\n          require-existing="true"\n          exclude-if="result.id === song.id"\n      ></autocomplete-tags-input>\n    </div>\n\n    <div\n      class="square_form-sub_section-remove"\n      ng-if="!$ctrl.isDisabled"\n      ng-click="$ctrl.remove_song_relationship(song_relationship)"\n    >\n      <svg class="inline_icon" src="x.svg"></svg>\n    </div>\n  </metadata-input-and-label>\n</div>\n\n<span class="text_label text_label--button text_label--purple" ng-click="$ctrl.add_new_song_relationship()" ng-if="$ctrl.available_relationships().length && !$ctrl.isDisabled">+ Add New</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_missing_metadata.html",'<div class="u-xx_large_vertical_margins song_missing_metadata" ng-if="$ctrl.has_missing_info()">\n  <div class="text_label song_missing_metadata-title" ng-cloak>Missing Track Info</div>\n\n  <missing-metadata-form\n    ng-if="$ctrl.missing_info(\'writer_artists\')"\n    missing-params="{writer_artists: \'autocomplete_artists\'}"\n    object="$ctrl.song"\n    type="song"\n    placeholder="e.g., Pharrell Williams, Sean Garrett"\n    source="Missing"\n  ></missing-metadata-form>\n\n  <missing-metadata-form\n    ng-if="$ctrl.missing_info(\'producer_artists\')"\n    missing-params="{producer_artists: \'autocomplete_artists\'}"\n    object="$ctrl.song"\n    type="song"\n    placeholder="e.g., J Dilla, No I.D."\n    source="Missing"\n  ></missing-metadata-form>\n\n  <missing-metadata-form\n    ng-if="$ctrl.missing_info(\'albums\')"\n    missing-params="{albums: \'autocomplete_albums\'}"\n    object="$ctrl.song"\n    type="song"\n    source="Missing"\n  ></missing-metadata-form>\n\n    <missing-metadata-form\n    ng-if="$ctrl.missing_info(\'release_date_components\')"\n    missing-params="{release_date_components: \'date_components\'}"\n    object="$ctrl.song"\n    type="song"\n    source="Missing"\n  ></missing-metadata-form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_page.html",'<div\n  ng-if="song"\n  ng-controller="SongCtrl as song_ctrl"\n>\n  <div>\n    <div class="leaderboard_ad_container">\n      <leaderboard-ad\n        class="u-display_block"\n        name="desktop_song_leaderboard"\n      ></leaderboard-ad>\n    </div>\n\n    <header-with-cover-art\n      type="song"\n      object="song"\n      header-image-url="song.header_image_url"\n      cover-art-url="song.song_art_image_url"\n      title-label="song.title"\n      artist="song.primary_artist"\n      can-edit="can_perform(\'edit_any_media\')"\n      on-edit="song_ctrl.show_metadata_form(\'audio_video_and_images\')"\n      verified-contributors="song.verified_contributors"\n    >\n      <metadata>\n        <h3>\n          <expandable-list\n            collection="song.featured_artists"\n            label="Featuring"\n            limit="3"\n            template="additional_artists"\n          ></expandable-list>\n        </h3>\n        <h3>\n          <expandable-list\n            collection="song.producer_artists"\n            label="Produced by"\n            limit="3"\n            template="additional_artists"\n          ></expandable-list>\n        </h3>\n        <h3>\n          <song-primary-album album="song.album" ng-if="song.album"></song-primary-album>\n        </h3>\n      </metadata>\n      <secondary>\n        <div class="column_layout-column_span-initial_content u-height_100">\n          <media-player\n            ng-if="!song_ctrl.is_apple_music_player_enabled() || can_perform(\'view_transcriber_media_player\')"\n            media-sources="song.media"\n            on-edit="song_ctrl.show_metadata_form(\'audio_video_and_images\')"\n            can-edit="can_perform(\'edit_any_media\')"\n            sticky-offset="song_ctrl.media_player_sticky_offset"\n          ></media-player>\n          <song-metadata-preview song="song"></song-metadata-preview>\n        </div>\n      </secondary>\n    </header-with-cover-art>\n\n    <div class="song_body column_layout">\n      <div class="column_layout-column_span column_layout-column_span--primary">\n        <div class="song_body-lyrics">\n          <h2\n            ng-if="!user_signed_in"\n            class="text_label text_label--gray text_label--x_small_text_size u-top_margin"\n          >{{song.title}} Lyrics</h2>\n\n          <defer-compile use-initial-content-with-key="lyrics">\n            <lyrics\n              class="lyrics"\n              remove-class-on-angular-load="lyrics"\n              yields-api="$ctrl.lyrics_interface = api"\n              canonical-lyrics-html="$ctrl.page_data.lyrics_data.body.html"\n              on-selection-range-updated="$ctrl.update_lyrics_selection_range(range)"\n            ></lyrics>\n          </defer-compile>\n\n          <share-buttons song="song"></share-buttons>\n\n          <defer-compile\n            use-initial-content-with-key="recirculated_content"\n            within-visibility-range="150px"\n          >\n            <recirculated-content\n              song="song"\n              stories="recirculated_content"\n              placement="recirculated"\n            ></recirculated-content>\n          </defer-compile>\n\n          <dfp-ad\n            name="desktop_song_lyrics_footer"\n            ad-classes="[\'dfp_unit--in_read u-top_margin\']"\n          ></dfp-ad>\n\n          <taboola\n            mode="thumbnails-a"\n            placement="Below Article Thumbnails"\n            container-classes="u-vertical_margins"\n          ></taboola>\n\n          <div class="u-vertical_margins">\n            <defer-compile within-visibility-range="150px">\n              <comments type="songs" commentable="song" intersperse-ads="desktop_song_comments"></comments>\n            </defer-compile>\n          </div>\n        </div>\n      </div>\n\n      <div\n        class="column_layout-column_span column_layout-column_span--secondary u-top_margin column_layout-flex_column"\n      >\n        <div class="column_layout-column_span-initial_content">\n          <div ng-show="initial_sidebar_content_showing()">\n            <song-page-sidebar-multi-placement\n              song="song"\n              show-song-story="song_ctrl.show_song_story = true"\n            ></song-page-sidebar-multi-placement>\n\n            <description-referent\n              object="song.description_annotation"\n              variants="{truncated: true}"\n            ></description-referent>\n\n            <defer-compile\n              use-initial-content-with-key="question_list"\n              within-visibility-range="150px"\n              delay="500"\n            >\n              <question-list\n                questionable="song"\n                pinned-questions="pinned_questions"\n                default-questions="default_questions"\n                featured-question="featured_question"\n                pending-question-count="pending_question_count"\n              ></question-list>\n            </defer-compile>\n\n            <button\n              ng-if="!user_signed_in && song.description_annotation.annotations[0].needs_exegesis"\n              ng-init="song_ctrl.signing_up = false"\n              class="square_button"\n              ng-hide="song_ctrl.signing_up"\n              ng-click="song_ctrl.signing_up = true"\n              ng-bind=":: \'annotation.sign_up_to_annotate\' | i18n"\n            ></button>\n\n            <authentication-form\n              ng-if="song_ctrl.signing_up"\n              header-text=":: \'annotation.sign_up_to_annotate\' | i18n"\n            ></authentication-form>\n\n            <defer-compile delay="500" within-visibility-range="150px">\n              <div class="show_tiny_edit_button_on_hover u-xx_large_bottom_margin u-top_margin gray_container">\n                <song-metadata song="song"></song-metadata>\n\n                <div class="song_metadata song_metadata--no_min_height">\n                  <div>\n                    <div\n                      tether-drop-target\n                      ng-if="song.hidden"\n                      class="metadata_with_icon"\n                    >\n                      <span class="metadata_with_icon-icon_wrapper">\n                        <svg src="eye_cross.svg" class="metadata_with_icon-icon"></svg>\n                      </span>\n                      <span class="metadata_with_icon-value">Hidden</span>\n                      <tether-drop show-on="hover" position="bottom center">\n                        <div class="tooltip tooltip--tiny rich_text_formatting rich_text_formatting--no_vertical_margins">\n                          <p><strong>This page is accessible to</strong></p>\n                          <ul>\n                            <li>Verified artists on the song</li>\n                            <li ng-repeat="role in song.viewable_by_roles" ng-bind="\'role.types.\' + role | i18n:{count:2, defaultValue: role}"></li>\n                          </ul>\n                        </div>\n                      </tether-drop>\n                    </div>\n                    <div\n                      tether-drop-target\n                      ng-if="song.published"\n                      class="metadata_with_icon"\n                    >\n                      <span class="metadata_with_icon-icon_wrapper">\n                        <svg src="lock.svg" class="metadata_with_icon-icon"></svg>\n                      </span>\n                      <span class="metadata_with_icon-value">Locked</span>\n                      <tether-drop show-on="hover" position="bottom center">\n                        <div class="tooltip tooltip--tiny">\n                          <p>This song has been locked and is considered "done". You need <u>600 IQ</u> to add annotations to locked songs.</p>\n                        </div>\n                      </tether-drop>\n                    </div>\n                    <div\n                      ng-if="song.lyrics_marked_complete_by"\n                      class="metadata_with_icon"\n                      tether-drop-target\n                    >\n                      <span class="metadata_with_icon-icon_wrapper">\n                        <svg src="checkmark.svg" class="metadata_with_icon-icon"></svg>\n                      </span>\n                      <span class="metadata_with_icon-value">Lyrics Complete</span>\n                      <tether-drop show-on="hover" position="bottom center">\n                        <div class="tooltip tooltip--tiny">\n                          <p>These lyrics have been marked complete by <a ng-href="{{ song.lyrics_marked_complete_by.url }}">{{ song.lyrics_marked_complete_by.name }}</a> and are locked, but you can still propose edits.</p>\n                        </div>\n                      </tether-drop>\n                    </div>\n                  </div>\n                </div>\n\n                <div\n                  class="tiny_edit_button"\n                  ng-click="song_ctrl.show_metadata_form(\'album_date_and_tags\')"\n                  ng-hide="song_ctrl.saving"\n                  ng-if="can_perform(\'edit_anything\')"\n                  stop-propagation="click"\n                >\n                  <svg src="pencil.svg" class="tiny_edit_button-svg"></svg>\n                </div>\n              </div>\n            </defer-compile>\n\n            <dfp-ad\n              name="desktop_song_medium1"\n              ad-classes="[\'dfp_unit--in_read u-top_margin\']"\n            ></dfp-ad>\n\n            <defer-compile\n              use-initial-content-with-key="track_info"\n              within-visibility-range="150px"\n              delay="500"\n            >\n              <div\n                class="u-xx_large_vertical_margins show_tiny_edit_button_on_hover"\n                ng-if="song_ctrl.has_track_info(\'writer_artists\', \'release_date_components\', \'recording_location\', \'custom_performances\') || song_ctrl.has_song_relationships()"\n              >\n                <h3 class="text_label u-x_small_bottom_margin">"<span ng-bind="song.title"></span>" Track Info</h3>\n                <div\n                  class="tiny_edit_button"\n                  ng-if="can_perform(\'edit_anything\')"\n                  ng-hide="song_ctrl.saving"\n                  ng-click="song_ctrl.show_metadata_form(\'title_and_artists\')"\n                  stop-propagation="click"\n                >\n                  <svg src="pencil.svg" class="tiny_edit_button-svg"></svg>\n                </div>\n\n                <expandable-list\n                  collection="song.writer_artists"\n                  label="Written By"\n                  limit="3"\n                  template="additional_artists"\n                  variants="{table: true}"\n                ></expandable-list>\n\n                <div\n                  ng-repeat="label_artists in song.custom_performances track by $index"\n                >\n                  <expandable-list\n                    collection="label_artists.artists"\n                    template="additional_artists"\n                    limit="3"\n                    label="{{label_artists.label}}"\n                    variants="{table: true}"\n                  ></expandable-list>\n                </div>\n\n                <div class="metadata_unit metadata_unit--table_row" ng-if="song.recording_location">\n                  <span class="metadata_unit-label">{{ \'song.metadata.recording_location\' | i18n }}</span>\n                  <span class="metadata_unit-info metadata_unit-info--text_only" ng-bind="song.recording_location"></span>\n                </div>\n\n                <release-date\n                  date-components="song.release_date_components"\n                  variants="{table: true}"\n                ></release-date>\n\n                <div class="show_tiny_edit_button_on_hover">\n                  <div\n                    class="tiny_edit_button"\n                    ng-if="can_perform(\'edit_anything\') && song_ctrl.has_song_relationships()"\n                    ng-hide="song_ctrl.saving"\n                    ng-click="song_ctrl.show_metadata_form(\'song_relationships\')"\n                    stop-propagation="click"\n                  >\n                    <svg src="pencil.svg" class="tiny_edit_button-svg"></svg>\n                  </div>\n                </div>\n\n                <expandable-list\n                  ng-repeat="song_relationship in song.song_relationships" collection="song_relationship.songs"\n                  template="song_relationships"\n                  limit="1"\n                  label="{{:: song_relationship.type }}"\n                  variants="{table: true}"\n                ></expandable-list>\n              </div>\n            </defer-compile>\n\n            <defer-compile within-visibility-range="150px" delay="500">\n              <song-missing-metadata\n                ng-if="$ctrl.page_data.show_edit_form && can_perform(\'edit_anything\')"\n                song="song"\n                possible-missing-info="[\'writer_artists\', \'producer_artists\', \'albums\', \'release_date_components\']"\n              ></song-missing-metadata>\n            </defer-compile>\n\n            <div\n              class="videos bordered_media_container bordered_media_container--sidebar"\n              ng-if="$ctrl.youtube_media() && can_perform(\'view_apple_music_player\')"\n            >\n              <div class="text_label text_label--x_small_text_size u-half_bottom_margin">Music Video</div>\n              <div\n                class="videos-video_element clipped_background_image--background_fill"\n              >\n                <youtube-player\n                  class="u-fill_parent"\n                  src="$ctrl.youtube_media().url"\n                  eager-load="true"\n                  controls="true"\n                  fullscreen="true"\n                  start="$ctrl.youtube_media().start"\n                  on-playing="$ctrl.track_youtube_play()"\n                ></youtube-player>\n              </div>\n            </div>\n\n            <defer-compile\n              use-initial-content-with-key="album"\n              within-visibility-range="150px"\n              delay="500"\n            >\n              <song-albums\n                song="song"\n                primary-album-tracks="primary_album_tracks"\n              ></song-albums>\n            </defer-compile>\n          </div>\n        </div>\n        <div class="column_layout-flex_column-fill_column">\n          <annotation-sidebar referent="current_referent"></annotation-sidebar>\n        </div>\n      </div>\n    </div>\n\n    <breadcrumbs order="[song.primary_artist, song]"></breadcrumbs>\n\n    <global-message ng-if="can_perform(\'mark_as_not_spam\') && $ctrl.page_data.probably_spam">\n      <span>This song is considered probable spam</span>\n      <span><a href="/songs/probably_spam" class="text_label text_label--white text_label--button" target="_blank">view more probable spam</a></span>\n      <span ng-click="perform_admin_action(\'destroy\')" ng-if="can_perform(\'destroy\')" class="text_label text_label--white text_label--button" confirm="Are you sure? This cannot be undone">delete it</span>\n      <span ng-click="perform_admin_action(\'mark_as_not_spam\')" class="text_label text_label--white text_label--button">not spam</span>\n    </global-message>\n\n    <kb shortcut="shift+a" action="song_ctrl.show_metadata_form(\'title_and_artists\', \'from_keyboard_shortcut\')"></kb>\n    <kb shortcut="shift+m" action="song_ctrl.show_metadata_form(\'audio_video_and_images\', \'from_keyboard_shortcut\')"></kb>\n    <kb shortcut="shift+t" action="song_ctrl.show_metadata_form(\'album_date_and_tags\', \'from_keyboard_shortcut\')"></kb>\n    <kb shortcut="shift+r" action="song_ctrl.show_metadata_form(\'song_relationships\', \'from_keyboard_shortcut\')"></kb>\n    <kb ng-if="can_perform(\'override_apple_match\')" shortcut="shift+p" action="song_ctrl.show_metadata_form(\'apple_match_overrides\', \'from_keyboard_shortcut\')"></kb>\n    <modal-window hidden="song_ctrl.saving" ng-if="song_ctrl.show_metadata_form_sections" on-close="attempt_close(reason.close_button || !song_ctrl.is_form_dirty(), song_ctrl.close)">\n      <song-metadata-form object="song" expanded-sections="song_ctrl.show_metadata_form_sections" on-save="song_ctrl.save(song)" yields-is-dirty="song_ctrl.is_form_dirty = is_dirty"></song-metadata-form>\n    </modal-window>\n\n    <song-story-modal\n      ng-if="song_ctrl.show_song_story"\n      story="song.song_story"\n      song="song"\n      on-close="song_ctrl.show_song_story = false"\n    ></song-story-modal>\n\n    <hide-song-form song="song" ng-if="song_ctrl.hiding_prompt_visible" on-close="song_ctrl.hiding_prompt_visible = false"></hide-song-form>\n\n    <global-message ng-if="song.hidden">\n      <span ng-bind=":: \'This song is hidden\'"></span>\n    </global-message>\n\n    <global-error-message></global-error-message>\n  </div>\n\n  <apple-music-player\n    ng-if="song_ctrl.should_load_apple_music_player()"\n    url="song.apple_music_player_url"\n    apple-music-id="song.apple_music_id"\n  ></apple-music-player>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_page_sidebar_multi_placement.html",'<div ng-class="{\n  \'u-x_large_bottom_margin\': !$ctrl.is_empty()\n}">\n  <song-story-featured-story-placement\n    ng-if="$ctrl.song.song_story"\n    ng-click="$ctrl.show_song_story()"\n    story="$ctrl.song.song_story"\n    label="Song Story"\n  ></song-story-featured-story-placement>\n\n  <relevant-videos\n    ng-if="!$ctrl.song.song_story"\n    ng-show="$ctrl.should_render_video_component()"\n    object="$ctrl.song"\n    placement="sidebar"\n    container-classes="bordered_media_container bordered_media_container--sidebar"\n    variants="{show_container_label: true}"\n    on-filled="$ctrl.video_did_fill(videos)"\n    on-no-video="$ctrl.no_video(videos)"\n  ></relevant-videos>\n\n  <relevant-videos\n    ng-if="$ctrl.should_render_video_component()"\n    object="$ctrl.song"\n    placement="sidebar_thumb"\n    container-classes="bordered_media_container bordered_media_container--sidebar"\n    variants="{two_across: true}"\n  ></relevant-videos>\n\n  <dfp-ad\n    ng-if="$ctrl.should_show_ad()"\n    name="desktop_song_sidebar_top"\n    on-no-ad="$ctrl.no_ad()"\n    ad-classes="[\'dfp_unit--in_read\']"\n  ></dfp-ad>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_preview.html",'<div>\n  <div class="song_preview">\n    <div class="song_preview--art">\n      <img sized-src="$ctrl.song.album.cover_art_url || $ctrl.song.song_art_image_url">\n    </div>\n    <h1><a ng-href="{{ $ctrl.song.url }}">{{ $ctrl.song.title }}</a></h1>\n    <h2><a ng-href="{{ $ctrl.song.primary_artist.url }}">{{ $ctrl.song.primary_artist.name }}</a></h2>\n    <h3>\n      <expandable-list\n        collection="$ctrl.song.featured_artists"\n        label="Featuring"\n        limit="3"\n        template="additional_artists"\n      ></expandable-list>\n    </h3>\n    <h3>\n      <expandable-list\n        collection="$ctrl.song.producer_artists"\n        label="Produced by"\n        limit="3"\n        template="additional_artists"\n      ></expandable-list>\n    </h3>\n    <h3>\n      <song-primary-album album="$ctrl.song.album" ng-if="$ctrl.song.album"></song-primary-album>\n    </h3>\n    <div\n      ng-if="$ctrl.song.stats.pageviews"\n      title="{{ $ctrl.song.stats.pageviews | number }} views"\n    >\n      <svg class="inline_icon inline_icon--gray" src="eye.svg"></svg>\n      <span class="text_label text_label--gray text_label--x_small_text_size">{{ $ctrl.song.stats.pageviews | abbreviateBigNumber }} views</span>\n    </div>\n  </div>\n  <media-player\n    class="song_preview--genius_player"\n    media-sources="$ctrl.song.media"\n    sticky-offset="-1"\n  ></media-player>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_primary_album.html",'<div class="metadata_unit">\n  <span class="metadata_unit-label">{{:: (\'terms.album\' | i18n:{count:1}) }}</span>\n  <span class="metadata_unit-info">\n    <a ng-href="{{ album.url }}" ng-bind="album.name"></a>\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_relationships.html",'<div\n  ng-if="collection.length"\n  class="metadata_unit"\n  ng-class="{\'metadata_unit--table_row\': variants.table}"\n>\n  <span class="metadata_unit-label">{{ \'song_relationship.title.\' + label | i18n }}</span>\n  <span class="metadata_unit-info">\n    <div ng-repeat="song in collection | limitTo: limit track by song.id" class="u-x_small_bottom_margin">\n      <a ng-href="{{:: song.path}}" tether-drop-target>\n        {{:: song.full_title}}\n\n        <tether-drop show-on="hover" position="bottom center">\n          <div class="tooltip tooltip--no_padding u-half_vertical_margins u-half_horizontal_margins">\n            <mini-song-card object="song"></mini-song-card>\n          </div>\n        </tether-drop>\n      </a>\n    </div>\n    <div ng-if="ctrl.more_to_show()">\n      <a href ng-click="ctrl.show_more()" class="metadata_unit-show_more">{{collection.length - limit}} more</a>\n    </div>\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_story_featured_story_placement.html",'<div\n  class="song_story_featured_story_placement"\n  ng-class="{\n    \'song_story_featured_story_placement--shadow\': $ctrl.variants.shadow\n  }"\n>\n  <div\n    class="song_story_featured_story_placement-text"\n    ng-class="{\n      \'song_story_featured_story_placement-text--large_padding\': $ctrl.variants.size === \'large\'\n    }"\n  >\n    <div class="song_story_featured_story_placement-text-top">\n      <div ng-if="$ctrl.label" class="song_story_featured_story_placement-label">\n        <div class="text_label text_label--x_small_text_size text_label--no_margin">{{$ctrl.label}}</div>\n      </div>\n      <div\n        ng-bind="$ctrl.story.title"\n        class="song_story_featured_story_placement-title"\n      ></div>\n      <div\n        ng-if="$ctrl.story.subtitle"\n        ng-bind="$ctrl.story.subtitle"\n        ng-class="{\n          \'u-quarter_top_margin\': $ctrl.variants.size === \'large\'\n        }"\n      ></div>\n      <div\n        ng-bind="$ctrl.story.featured_placement_text"\n        class="song_story_featured_story_placement-text-description"\n        ng-class="{\n          \'song_story_featured_story_placement-text-description--headline\': $ctrl.variants.size === \'large\'\n        }"\n      ></div>\n    </div>\n    <div class="song_story_featured_story_placement-cta">\n      <svg class="song_story_play_icon" src="play.svg"></svg>\n      <div\n        ng-bind="\'song_stories.featured_placement_prompt.desktop\' | i18n"\n        class="text_label text_label--x_small_text_size text_label--no_margin"\n      ></div>\n    </div>\n  </div>\n  <div\n    class="song_story_featured_story_placement-image"\n    ng-class="{\n      \'song_story_featured_story_placement-image--medium\': $ctrl.variants.size === \'medium\',\n      \'song_story_featured_story_placement-image--large\': $ctrl.variants.size === \'large\',\n    }"\n  >\n    <img ng-src="{{$ctrl.story.gallery_cover_image_url}}">\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_story_gallery_page.html",'<div class="full_page_width_banner full_page_width_banner--large_top_margin">\n  <img\n    ng-src="{{$ctrl.page_data.banner_image_url}}"\n    class="full_page_width_banner-image"\n  />\n</div>\n\n<div class="u-xxx_large_vertical_margins">\n  <song-story-lead-story-placement\n    show-story="$ctrl.active_story = $ctrl.page_data.featured_story"\n    story="$ctrl.page_data.featured_story"\n  >\n    <div class="song_story_lead_story_placement-black_box">\n      <div class="text_label text_label--white">Song Stories</div>\n      <h1 class="song_story_lead_story_placement-black_box-headline">{{$ctrl.page_data.intro_headline}}</h1>\n      <h2 class="song_story_lead_story_placement-black_box-body">\n        <span>{{$ctrl.page_data.intro_body}}</span>\n        <a\n          ng-href="{{$ctrl.page_data.learn_more_link.url}}"\n          class="song_story_gallery-learn_more_link"\n        >\n          <span ng-bind="$ctrl.page_data.learn_more_link.text"></span>\n          <svg src="external.svg" class="inline_icon inline_icon--white inline_icon--up_1 inline_icon--half_height u-hair_left_margin">\n        </a>\n      </h2>\n    </div>\n  </song-story-lead-story-placement>\n</div>\n\n<div class="song_stories_list">\n  <div\n    ng-repeat="story in $ctrl.page_data.latest_stories track by story.id"\n    class="song_stories_list-item"\n  >\n    <song-story-featured-story-placement\n      ng-click="$ctrl.active_story = story"\n      story="story"\n      label="Song Story"\n      variants="{size: \'medium\'}"\n    ></song-story-featured-story-placement>\n  </div>\n</div>\n\n<song-story-modal\n  ng-if="$ctrl.active_story"\n  story="$ctrl.active_story"\n  on-close="$ctrl.active_story = null"\n></song-story-modal>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_story_lead_story_placement.html",'<div class="song_story_lead_story_placement column_layout">\n  <ng-transclude></ng-transclude>\n\n  <song-story-featured-story-placement\n    ng-click="$ctrl.show_story()"\n    story="$ctrl.story"\n    label="Featured Song Story"\n    variants="{size: \'large\', shadow: true}"\n  ></song-story-featured-story-placement>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_story_modal.html",'<modal-window\n  variants="{no_background: true, width_of_contents: true, vertically_center_self: true}"\n  on-close="$ctrl.on_close()"\n>\n  <div class="song_story_modal">\n    <div class="u-bottom_margin u-accept_pointer_events" ng-switch="$ctrl.placement">\n      <div ng-if="$ctrl.song">\n        <span class="text_label text_label--x_small_text_size text_label--white">{{$ctrl.title}}</span>\n        <a\n          ng-if="$ctrl.can(\'view_song_story_gallery\', $ctrl.song)"\n          class="text_label text_label--x_small_text_size text_label--white text_label--button u-left_margin"\n          href="/song-stories?utm_source=genius_modal"\n        >Visit Gallery</a>\n      </div>\n      <div ng-if="!$ctrl.song">\n        <a\n          class="text_label text_label--x_small_text_size text_label--white text_label--button"\n          ng-if="$ctrl.title_url"\n          ng-href="{{$ctrl.title_url}}"\n        >{{$ctrl.title}}</a>\n        <span class="text_label text_label--x_small_text_size text_label--white" ng-if="!$ctrl.title_url">{{$ctrl.title}}</span>\n      </div>\n    </div>\n    <iframe\n      ng-src="{{$ctrl.src}}"\n      class="u-black_background u-display_block u-accept_pointer_events"\n      scrolling="no"\n      frameborder="0"\n      width="375"\n      height="667"\n    ></iframe>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_verified_artists.html",'<div class="song_verified_artists">\n  <song-verified-artists-section contributors="$ctrl.commentary_and_lyrics_by" label="{{ \'song.verified.desktop.commentary_and_lyrics\' | i18n }}" featured="$ctrl.featured"></song-verified-artists-section>\n  <song-verified-artists-section contributors="$ctrl.commentary_by" label="{{ \'song.verified.desktop.commentary\' | i18n }}" featured="$ctrl.featured"></song-verified-artists-section>\n  <song-verified-artists-section contributors="$ctrl.lyrics_by" label="{{ \'song.verified.desktop.lyrics\' | i18n }}" featured="$ctrl.featured"></song-verified-artists-section>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_verified_artists_section.html",'<div class="song_verified_artists-section" ng-if="$ctrl.contributors.length">\n  <div class="text_label text_label--gray u-quarter_bottom_margin" ng-if="!$ctrl.featured">{{:: $ctrl.label}} by</div>\n  <div class="song_verified_artists-users">\n    <song-verified-artists-section-single\n      ng-repeat="contributor in $ctrl.contributors track by $id(contributor)"\n      contributor="contributor"\n      variants="{first: $first}"\n      label="{{$ctrl.label}}"\n      featured="$ctrl.featured"\n    ></song-verified-artists-section-single>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_verified_artists_section_single.html",'<a ng-href="{{ $ctrl.url }}" class="song_verified_artists-user_badge user_badge" tether-drop-target>\n  <div\n    class="user_avatar user_avatar--x_small clipped_background_image--background_fill"\n    ng-class="{\n              \'user_avatar--medium\': $ctrl.variants.first,\n              \'u-left_margin\': !$ctrl.variants.first,\n              \'user_avatar--large\': $ctrl.featured,\n              \'song_verified_artists-user_avatar--featured\': $ctrl.featured,\n              \'song_verified_artists-user_avatar--is_meme_verified\': $ctrl.is_meme_verified\n              }"\n    clipped-background-image="$ctrl.image_url"\n  ></div>\n  <div class="user_badge-text">\n    <div class="user_badge-subhead u-quarter_bottom_margin" ng-if="$ctrl.featured">{{:: $ctrl.label}} by</div>\n    <span class="user_badge-login">{{ $ctrl.name }}</span>\n    <svg class="checky" src="checky.svg" ng-if="$ctrl.is_meme_verified"></svg>\n  </div>\n\n  <tether-drop show-on="hover">\n    <user-tooltip ng-if="$ctrl.contributor.user" user="$ctrl.contributor.user"></user-tooltip>\n    <artist-tooltip ng-if="!$ctrl.contributor.user" artist="$ctrl.contributor.artist"></artist-tooltip>\n  </tether-drop>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("soundcloud.html",'<iframe class="iframe" width="100%" height="465" scrolling="no" frameborder="no"></iframe>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("spam_status.html",'<div ng-if="$ctrl.user_spam_evaluation">\n  <div class="gray_container u-vertical_margins">\n    <div class="text_label">\n      Spam State: {{:: $ctrl.user_spam_evaluation.spam_state || \'?\' }}\n    </div>\n    <div class="spam_check_feature--red text_label" ng-if="$ctrl.user_spam_evaluation.spam_score >= 0">\n      Spam Score: {{:: $ctrl.user_spam_evaluation.spam_score == null ? \'?\' : $ctrl.user_spam_evaluation.spam_score }}\n    </div>\n    <div class="spam_check_feature--green text_label" ng-if="$ctrl.user_spam_evaluation.trust_score >= 0">\n      Trust Score: {{:: $ctrl.user_spam_evaluation.trust_score == null ? \'?\' : $ctrl.user_spam_evaluation.trust_score }}\n    </div>\n  </div>\n\n  <table>\n    <tr\n      ng-class="{\n        \'spam_check_feature--bold\': spam_check_feature.value != 0,\n        \'spam_check_feature--green\': spam_check_feature.outcome == \'probably_ham\',\n        \'spam_check_feature--red\': spam_check_feature.outcome == \'probably_spam\'\n      }"\n      ng-repeat="spam_check_feature in $ctrl.user_spam_evaluation.spam_check_features | filter:{label: \'!!\'}"\n      class="spam_check_feature text_label"\n    >\n      <td><span class="u-horizontal_margins">{{:: spam_check_feature.value }}</span></td>\n      <td>{{:: spam_check_feature.label }}</td>\n    </tr>\n  </table>\n</div>\n\n<placeholder-spinner ng-if="!$ctrl.user_spam_evaluation"></placeholder-spinner>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("square_item_and_iq.html","<span\n  ng-class=\"{\n    'square_item_and_iq': $ctrl.show_pill(),\n    'square_item_and_iq--full_width': $ctrl.variants.full_width,\n    'square_item_and_iq--two_digits': $ctrl.show_pill() && $ctrl.iq().toString().length === 2,\n    'square_item_and_iq--three_digits': $ctrl.show_pill() && $ctrl.iq().toString().length === 3,\n  }\"\n>\n  <ng-transclude></ng-transclude>\n  <div ng-if=\"$ctrl.show_pill()\" class=\"iq_pill\">\n    ({{ $ctrl.iq() | signed_number }} IQ)\n  </div>\n</span>\n")}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("standalone_inbox.html",'<div\n  ng-class="{\'standalone_inbox--embed\': $ctrl.embed}"\n  ng-style="$ctrl.embed && {maxHeight: $ctrl.max_height}"\n  ng-transclude\n  scroll-only-this-element\n></div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("standalone_referent.html",'<referent-fragment-container object="referent" variants="{show_full_referent: variants.show_full_referent}">\n  <referent-header>\n    <a ng-href="{{ referent.annotatable.url }}" class="referent-annotatable_title">\n      {{ referent.annotatable.link_title }}\n    </a>\n  </referent-header>\n  <referent-fragment>\n    <a\n      ng-href="{{ referent.url }}"\n      class="referent referent--white referent--accent_font"\n      ng-class="{\'referent--large\': variants.largeReferent}"\n    >{{ referent.is_image ? \'[Image]\' : referent.fragment }}</a>\n  </referent-fragment>\n</referent-fragment-container>\n<div class="u-vertical_margins">\n  <annotation\n    ng-repeat="annotation in referent.annotations track by annotation.id"\n    object="annotation"\n    referent="referent"\n    variants="{hideComments: !focused_comments.length, hide_moderation: variants.hide_moderation, hide_social: variants.hide_social}"\n    yields-api="yields_api({api: api, id: annotation.id})"\n    on-pending-event="on_pending_event({event: event, result: result})"\n    yields-iq="yields_iq({iq_api: iq_api, id: annotation.id})"\n    focused-comments="focused_comments"\n  ></annotation>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("standalone_search.html",'<div\n  class="standalone_search"\n  ng-style="{maxHeight: $ctrl.max_height}"\n  scroll-only-this-element\n>\n  <search-results\n    search-text="$ctrl.search_text"\n    sections="$ctrl.sections"\n    scroll-container-selector=".standalone_search"\n  ></search-results>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("standard_rich_content.html","<div\n  ng-class=\"{\n    'article_rich_text_formatting': variants.article,\n    'rich_text_formatting': !variants.article,\n    'rich_text_formatting--large': variants.isLarge,\n    'rich_text_formatting--no_vertical_margins': variants.no_vertical_margins,\n  }\"\n  ng-bind-html=\"trusted_html\"\n  embedly\n></div>\n")}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("statistics_panel.html",'<div class="statistics_panel">\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'annotations\'})" label="Annotations" value=":: $ctrl.user.stats.annotations_count" icon="blockquote.svg"></statistics-panel-item>\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'comments\'})" label="Suggestions" value=":: $ctrl.user.stats.comments_count" icon="comment.svg"></statistics-panel-item>\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'transcriptions\'})" label="Transcriptions" value=":: $ctrl.user.stats.transcriptions_count" icon="one_document.svg"></statistics-panel-item>\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'questions_and_answers\'})" label="Questions" value=":: $ctrl.user.stats.questions_count" icon="magnifying_glass.svg"></statistics-panel-item>\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'questions_and_answers\'})" label="Answers" value=":: $ctrl.user.stats.answers_count" icon="star.svg"></statistics-panel-item>\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'pyongs\'})" label="Pyongs" value=":: $ctrl.user.stats.pyongs_count" icon="lightning.svg"></statistics-panel-item>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("statistics_panel_item.html",'<div title="{{:: $ctrl.value | number:0 }}">\n  <div class="statistic_and_label">\n    <div class="statistic_and_label-primary">\n      <svg\n        class="inline_icon inline_icon--reading_size"\n        ng-class="{\n          \'inline_icon--down_2\': $ctrl.icon === \'comment.svg\',\n          \'inline_icon--down_1\': $ctrl.icon === \'blockquote.svg\' || $ctrl.icon === \'one_document.svg\' || $ctrl.icon === \'magnifying_glass.svg\'\n        }"\n        src="{{:: $ctrl.icon }}"\n      ></svg>\n      <span class="statistic_and_label-number">{{:: $ctrl.value | abbreviateBigNumber}}</span>\n    </div>\n    <div class="statistic_and_label-subtext">{{:: $ctrl.label }}</div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("text_corrector.html",'<form \n  dirtyable \n  yields-is-dirty="$ctrl.is_dirty = is_dirty" \n  ng-submit="$ctrl.submit_form()" \n  submit-on-cmd-enter \n  exports-form-api="$ctrl.correction_form = api"\n>\n  <textarea \n    autofocus \n    ng-show="$ctrl.text || $ctrl.text == \'\'" \n    ng-model="$ctrl.text" \n    ng-model-options="{updateOn: \'submit\'}" \n    class="square_input square_input--full_width u-vertical_margins"\n  ></textarea>\n  <button \n    ng-disabled="ctrl.saving" \n    ng-hide="$ctrl.proposing_edit" \n    class="square_button square_button--green" \n    ng-class="{\'square_button--disabled\': $ctrl.saving}" \n    type="submit"\n  >{{ $ctrl.saving ? \'Saving\' : \'Save\' }}</button>\n  <button \n    ng-disabled="ctrl.saving" \n    ng-show="$ctrl.proposing_edit" \n    class="square_button square_button--green" \n    ng-class="{\'square_button--disabled\': $ctrl.saving}" \n    type="submit"\n  >{{ $ctrl.saving ? \'Proposing Edit\' : \'Propose Edit\' }}</button>\n  <button \n    ng-disabled="ctrl.saving" \n    class="square_button square_button--transparent square_button--gray" \n    ng-click="$ctrl.cancel_correction()" \n    prevent-default-click\n  >Cancel</button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("time_ago.html",'<span title="{{ time*1000 | date: \'medium\' }}" am-time-ago="time * 1000"></span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("twitter_share_button.html",'<a\n  ng-click="$ctrl.share_on_twitter()"\n  class="square_button"\n  ng-class="{\n    \'square_button--transparent square_button--twitter_inverse nganimate-disable_transition\': $ctrl.variants.transparent,\n    \'square_button--twitter\': !$ctrl.variants.transparent\n  }"\n>\n  <svg class="inline_icon" src="twitter.svg"></svg>\n  <span ng-if="$ctrl.variants.showText">Tweet</span>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_attribution.html",'<div class="leaderboard-percentage_fill" ng-if="$ctrl.object.attribution" style="width: {{ ($ctrl.object.attribution * 100) | number:2 }}%"></div>\n<span class="leaderboard-rank" ng-bind="$ctrl.rank"></span>\n<span class="leaderboard-user">\n  <user-badge size="x_small" object="$ctrl.object.user"></user-badge>\n</span>\n<span class="leaderboard-sort_value">\n  <span ng-if="$ctrl.object.attribution">{{ ($ctrl.object.attribution * 100) | number:0 }}%</span>\n  <span ng-if="$ctrl.object.attribution_value"><span ng-if="$index === 0">+</span>{{ $ctrl.object.attribution_value | number:0 }}</span>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_badge.html",'<a ng-href="{{ variants.no_profile_link ? undefined : user.url }}" class="user_badge" ng-if="user" tether-drop-target>\n  <div\n    ng-class=":: [\'user_avatar\', \'user_avatar--\' + size]"\n    clipped-background-image="avatar_url"\n  ></div>\n  <div class="user_badge-text">\n    <div\n      ng-if=":: is_two_lines"\n      class="user_badge-subhead"\n      ng-class="{\'user_badge-subhead--green\': user.is_verified && !sponsor}"\n    >\n      <div ng-if=":: !variants.show_user_role">\n        <span>{{:: pinned_role}}</span>\n        <svg class="checky" src="checky.svg" ng-if=":: user.is_verified && !sponsor"></svg>\n      </div>\n      <div ng-if=":: variants.show_user_role && user.role_for_display">\n        <span>{{:: \'role.types.\' + user.role_for_display | i18n:{count:1, defaultValue: user.role_for_display} }}</span>\n        <role-icon ng-if="user.role_for_display" role="user.role_for_display" has-checky="user.is_meme_verified"></role-icon>\n      </div>\n    </div>\n    <div class="user_badge-login_and_iq" ng-class=":: {\'user_badge-login_and_iq--one_line\': !is_two_lines}">\n      <span class="user_badge-login">{{:: user.name }}</span>\n      <role-icon ng-if="user.role_for_display && !is_two_lines" role="user.role_for_display" has-checky="::user.is_verified"></role-icon>\n      <span\n        class="user_badge-iq"\n        ng-class=":: {\n          \'tag_label tag_label--yellow_background\': is_two_lines,\n          \'user_badge-iq--one_line\': !is_two_lines\n        }"\n        ng-if=":: !variants.hide_iq"\n      >{{:: user.iq | number:0 }}</span>\n\n      <span ng-if=":: sponsor && is_two_lines">\n        <span class="user_badge-iq tag_label tag_label--gray_background tag_label--lowercase">via {{:: sponsor }}</span>\n        <svg class="checky checky--up_1" src="checky.svg" ng-if=":: user.is_verified"></svg>\n      </span>\n    </div>\n  </div>\n  <tether-drop show-on="hover" ng-if=":: !disables_user_tooltips">\n    <user-tooltip user="user"></user-tooltip>\n  </tether-drop>\n</a>\n\n<div class="user_badge" ng-if="!user && anonymous_user">\n  <div\n    ng-class=":: [\'user_avatar\', \'user_avatar--\' + size]"\n    class="clipped_background_image clipped_background_image--background_fill"\n  ></div>\n  <div class="user_badge-text">\n    <div class="user_badge-login_and_iq" ng-class=":: {\'user_badge-login_and_iq--one_line\': !is_two_lines}">\n      <span class="user_badge-login">{{:: anonymous_user.name}}</span>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_badge_and_timestamp.html",'<div class="user_badge_and_timestamp">\n  <div class="user_badge_and_timestamp-badge">\n    <user-badge\n      size="{{size}}"\n      object="user"\n      anonymous-user="anonymous_user"\n      pinned-role="pinned_role"\n      sponsor=":: sponsor"\n      variants=":: variants"\n    ></user-badge>\n  </div>\n  <div class="user_badge_and_timestamp-created_at">\n    <time-ago time="time" ng-if="time"></time-ago>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_identities.html",'<div>\n  <button\n    ng-if="$ctrl.can_edit()"\n    ng-repeat="available_identity in $ctrl.user.available_identity_providers track by available_identity"\n    class="square_button square_button--with_icon square_button--{{available_identity}} u-quarter_vertical_margins u-display_block"\n    http-method="post"\n    action="{{$ctrl.identity_auth_path(available_identity)}}"\n  >\n    <span class="square_button-padded_icon">\n      <svg class="inline_icon" ng-src="available_identity | svg"></svg>\n    </span>\n    Link your {{available_identity + \'_identity\' | modelHumanName}} account!\n  </button>\n  <button\n    ng-repeat="identity in $ctrl.user.identities track by identity.id"\n    class="square_button square_button--with_icon square_button--{{identity.provider}} u-quarter_vertical_margins u-display_block square_button-right_icon_margin"\n  >\n    <span class="square_button-padded_icon">\n      <svg class="inline_icon" ng-src="identity.provider | svg"></svg>\n    </span>\n    {{identity.name}}\n    <span class="u-half_left_margin" ng-if="$ctrl.can_edit()" ng-click="$ctrl.unlink_identity(identity)">\n      <svg\n        ng-if="!$ctrl.saving_identity[identity.provider]"\n        class="inline-icon inline_icon--transparent square_button-x_icon"\n        src="x.svg"></svg>\n      <placeholder-spinner ng-if="$ctrl.saving_identity[identity.provider]" variants=":: {inline: true}"></placeholder-spinner>\n    </span>\n  </button>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_info_with_actions.html",'<div class="user_info_with_actions">\n  <div class="user_badge">\n    <a href="{{ $ctrl.user.url }}" class="u-block_level_link">\n      <div\n        class="user_avatar user_avatar--{{:: $ctrl.variants.avatar_size}} clipped_background_image--background_fill"\n        clipped-background-image="$ctrl.user.avatar.medium.url"\n      ></div>\n    </a>\n    <div class="user_badge-text">\n      <a href="{{ $ctrl.user.url }}" class="u-block_level_link">\n        <div\n          ng-if="$ctrl.user.role_for_display"\n          class="user_badge-subhead"\n          ng-class="{\'user_badge-subhead--green\': $ctrl.user.is_meme_verified}"\n        >\n          <span>\n            {{ \'role.types.\' + $ctrl.user.role_for_display | i18n:{count:1, defaultValue: $ctrl.user.role_for_display} }}\n          </span>\n          <role-icon\n            ng-if="$ctrl.user.role_for_display"\n            role="$ctrl.user.role_for_display"\n            has-checky="$ctrl.user.is_meme_verified"\n          ></role-icon>\n        </div>\n        <div class="user_badge-login_and_iq">\n          <span class="user_badge-login">{{ $ctrl.user.name }}</span>\n          <span class="user_badge-iq tag_label tag_label--yellow_background">{{ $ctrl.user.iq | number:0 }}</span>\n        </div>\n      </a>\n      <div class="user_info_with_actions-user_badge_actions" ng-if="$ctrl.user_signed_in && $ctrl.user.id !== $ctrl.current_user.id">\n        <follow-button\n          type="user"\n          object="$ctrl.user"\n          disabled="!$ctrl.user.current_user_metadata"\n        ></follow-button>\n        <span class="square_button" ng-click="$ctrl.sending_message = true">Message</span>\n      </div>\n    </div>\n  </div>\n\n  <p class="rich_text_formatting u-top_margin" ng-if="$ctrl.user.about_me_summary">\n    {{ $ctrl.user.about_me_summary | truncateToBoundary:100:{with_ellipsis: true} }}\n  </p>\n</div>\n\n<modal-window\n  ng-if="$ctrl.sending_message"\n  on-close="$ctrl.attempt_close(!$ctrl.is_conversation_dirty(), $ctrl.close_conversation_modal)"\n  variants="{full_height: true}"\n>\n  <conversation-with-user user="$ctrl.user" yields-is-dirty="$ctrl.is_conversation_dirty = is_dirty"></conversation-with-user>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_moderation.html",'<div\n  ng-if="$ctrl.errors"\n  ng-repeat="error in $ctrl.errors"\n  class="u-vertical_margins form_message form_message--error text_label"\n>{{ error }}</div>\n\n<div\n  ng-if="$ctrl.messages"\n  ng-repeat="message in $ctrl.messages"\n  class="u-vertical_margins form_message form_message--success text_label"\n>{{ message }}</div>\n\n<div class="u-break_word">\n  <div\n    class="u-vertical_margins u-clickable"\n    ng-if="$ctrl.can(\'toggle_penalty_status\')"\n    ng-click="$ctrl.toggle_penalty_status()"\n  >\n    <span class="text_label" ng-class="{\'text_label--gray\': $ctrl.updating, \'text_label--purple\': !$ctrl.updating}">\n      <svg\n        class="inline_icon inline_icon--reading_size inline_icon--up_2"\n        ng-class="{\'inline_icon--gray\': $ctrl.updating, \'inline_icon--purple\': !$ctrl.updating}"\n        src="alert.svg"\n      ></svg> {{ $ctrl.user.penalty_box_until ? \'Take \' + $ctrl.user.login + \' out of the penalty box\' : \'Put \' + $ctrl.user.login + \' in the penalty box\' }}\n    </span>\n    <span ng-if="$ctrl.user.penalty_box_until" class="u-display_block text_label--gray">\n      {{ $ctrl.user.login }} is in the penalty box until {{ $ctrl.user.penalty_box_until | human_readable_datetime }}\n    </span>\n  </div>\n\n  <div\n    class="u-vertical_margins u-clickable"\n    ng-if="$ctrl.can(\'mark_spam\') && $ctrl.user.spam_state != \'definitely_spam\'"\n    ng-click="$ctrl.update_spam_state(\'spam\')"\n  >\n    <span class="text_label" ng-class="{\'text_label--gray\': $ctrl.updating, \'text_label--purple\': !$ctrl.updating}">\n      <svg\n        class="inline_icon inline_icon--reading_size inline_icon--up_2"\n        ng-class="{\'inline_icon--gray\': $ctrl.updating, \'inline_icon--purple\': !$ctrl.updating}"\n        src="flag.svg"\n      ></svg> Mark {{$ctrl.user.login}} as spam\n    </span>\n  </div>\n\n  <div\n    class="u-vertical_margins u-clickable"\n    ng-if="$ctrl.can(\'mark_ham\') && $ctrl.user.spam_state != \'definitely_ham\'"\n    ng-click="$ctrl.update_spam_state(\'ham\')"\n  >\n    <span class="text_label" ng-class="{\'text_label--gray\': $ctrl.updating, \'text_label--purple\': !$ctrl.updating}">\n      <svg\n        class="inline_icon inline_icon--reading_size inline_icon--up_2"\n        ng-class="{\'inline_icon--gray\': $ctrl.updating, \'inline_icon--purple\': !$ctrl.updating}"\n        src="flag.svg"\n      ></svg> Mark {{$ctrl.user.login}} as ham\n    </span>\n  </div>\n\n  <div\n    class="u-vertical_margins u-clickable"\n    ng-if="$ctrl.can(\'mass_delete_unreviewed_activity\')"\n    ng-click="$ctrl.mass_delete_unreviewed_activity()"\n  >\n    <span class="text_label" ng-class="{\'text_label--gray\': $ctrl.updating, \'text_label--purple\': !$ctrl.updating}">\n      <svg\n        class="inline_icon inline_icon--reading_size inline_icon--up_2"\n        ng-class="{\'inline_icon--gray\': $ctrl.updating, \'inline_icon--purple\': !$ctrl.updating}"\n        src="x.svg"\n      ></svg> Delete all of {{$ctrl.user.login}}\'s unreviewed annotations, suggestions, and forum posts\n    </span>\n  </div>\n\n  <div\n    ng-repeat="type in $ctrl.vote_types"\n    class="u-vertical_margins u-clickable"\n    ng-if="$ctrl.can(\'mass_delete_votes\')"\n    ng-click="$ctrl.mass_delete_votes(type)"\n  >\n    <span class="text_label" ng-class="{\'text_label--gray\': $ctrl.updating, \'text_label--purple\': !$ctrl.updating}">\n      <svg\n        class="inline_icon inline_icon--reading_size inline_icon--up_2"\n        ng-class="{\'inline_icon--gray\': $ctrl.updating, \'inline_icon--purple\': !$ctrl.updating}"\n        src="{{ type == \'votes\' ? \'x\' : \'clear_\'+type | svg }}"\n      ></svg> Clear all of {{$ctrl.user.login}}\'s {{type}}\n    </span>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_tooltip.html",'<div\n  class="tooltip u-half_vertical_margins u-half_horizontal_margins"\n  stop-propagation="click"\n>\n  <user-info-with-actions object=":: user" variants="{avatar_size: \'xx_large\'}"></user-info-with-actions>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("vertical_album_card.html",'<a href="{{$ctrl.album.url}}" title="{{$ctrl.album.name}}" class="vertical_album_card" set-class-before-navigate="vertical_album_card--active">\n  <div class="cover_art">\n    <img\n      class-for-browser="{msie: \'cover_art-image_ie\', _default: \'cover_art-image\'}"\n      sized-src="$ctrl.album.cover_art_thumbnail_url"\n    />\n  </div>\n  <div class="vertical_album_card-info">\n    <h3>{{$ctrl.album.name}}</h3>\n    <div class="vertical_album_card-release_date">\n      {{$ctrl.album.release_date_components.year}}\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("vertical_search_result_item.html",'<div\n  tracking="click"\n  tracking-event="Search Result Tap"\n>\n  <vertical-album-card object="$ctrl.hit.result"></vertical-album-card>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("vertical_search_result_items.html",'<div class="thumbnail_grid white_container u-quarter_vertical_margins">\n  <div\n    ng-repeat="hit in $ctrl.results | limitTo: $ctrl.limit_to"\n    class="thumbnail_grid-grid_element u-clickable"\n    ng-class="{ \'thumbnail_grid-grid_element--third\': hit.type === \'album\' }"\n  >\n    <vertical-search-result-item hit="hit"></vertical-search-result-item>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_carousel.html",'<div\n  ng-if="!$ctrl.loaded || $ctrl.video_placement.videos.length"\n  class="video_carousel"\n  ng-class="{\n    \'video_carousel--half_black_background\': $ctrl.variants.half_black_background,\n    \'video_carousel--striped_background\': $ctrl.variants.striped_background\n  }"\n>\n  <div class="video_carousel-container">\n    <div class="video_carousel-video video_carousel-video--intro_card">\n      <a\n        ng-if="$ctrl.video_list"\n        ng-href="{{$ctrl.video_list.url}}"\n        class="video_carousel-video-card video_carousel-video-card--intro_card_text"\n      >\n        <svg\n          ng-if="$ctrl.has_logo()"\n          ng-src="$ctrl.logo_name()"\n          class="video_carousel-video-card-logo {{ $ctrl.logo_variants() }}"\n        ></svg>\n        <span ng-if="!$ctrl.has_logo()">{{ $ctrl.video_list.title }}</span>\n      </a>\n      <div\n        ng-if="!$ctrl.video_list"\n        class="video_carousel-video-card video_carousel-video-card--intro_card_text"\n      >\n        {{ $ctrl.title }}\n      </div>\n    </div>\n\n    <div ng-if="$ctrl.active_video" class="video_carousel-video video_carousel-video--active">\n      <div class="video_carousel-video-card">\n        <img class="video_carousel-video-image" sized-src="$ctrl.active_video.poster_url" />\n        <div>\n          <div class="video_carousel-video-currently_playing_label text_label text_label--x_small_text_size text_label--white">\n            Currently Playing\n          </div>\n        </div>\n      </div>\n      <div class="video_carousel-video-title">{{ $ctrl.active_video.title }}</div>\n    </div>\n\n    <a\n      ng-repeat="video in $ctrl.video_placement.videos track by video.id"\n      ng-href="{{video.url}}?utm_source=recommended"\n      class="video_carousel-video"\n    >\n      <div class="video_carousel-video-card">\n        <div class="u-relative">\n          <img class="u-display_block" sized-src="video.poster_url" />\n          <svg\n            src="play.svg"\n            class="play_button"\n          ></svg>\n        </div>\n      </div>\n      <div class="video_carousel-video-title">\n        {{ video.title }}\n      </div>\n    </a>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_edit_form.html",'<div class="text_label text_label--purple">Video Sources</div>\n\n<placeholder-spinner ng-if="!$ctrl.loaded"></placeholder-spinner>\n\n<div ng-if="$ctrl.loaded">\n  <div ng-if="$ctrl.error" class="form_message form_message--error text_label">\n    {{ $ctrl.error.message }}\n    <ul class="u-bullet_list">\n      <li ng-repeat="error in $ctrl.error.response.errors">\n        {{ error }}\n      </li>\n    </ul>\n  </div>\n\n  <table class="admin_table rich_text_formatting">\n    <tr>\n      <th>URL</th>\n      <th>Views</th>\n      <th></th>\n    </tr>\n    <tr ng-repeat="video_source in $ctrl.video_sources track by video_source.id">\n      <td>\n        <a target="_blank" ng-href="{{ video_source.external_url }}">{{ video_source.external_url }}</a>\n      </td>\n      <td>\n        {{ video_source.view_count | number }}\n      </td>\n      <td>\n        <button\n          ng-if="$ctrl.has_permission(\'destroy\', video_source)"\n          prevent-default-click\n          ng-click="$ctrl.remove_video_source(video_source)"\n          class="square_button square_button--red"\n        >Remove</button>\n      </td>\n    </tr>\n  </table>\n\n  <form ng-submit="$ctrl.add_video_source()" ng-model-options="{updateOn: \'submit\'}" submit-on-cmd-enter>\n    <input class="square_input" ng-model="$ctrl.new_source.external_url" placeholder="External URL">\n    <input class="modal_window-save_button square_button square_button--purple" type="submit" value="Add">\n  </form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_list_edit_form.html",'<div ng-if="$ctrl.errors.length" class="form_message form_message--error text_label rich_text_formatting u-vertical_margins">\n  <ul>\n    <li ng-repeat="error in $ctrl.errors">{{ error }}</li>\n  </ul>\n</div>\n\n<form class="square_form" ng-submit="$ctrl.save()" ng-model-options="{updateOn: \'submit\'}" submit-on-cmd-enter>\n  <div class="square_form-input_and_label square_form-input_and_label--half_width">\n    <div class="text_label">Title Image URL</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.editable_video_list.title_image_url" placeholder="Title Image URL">\n  </div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--half_width">\n    <div class="text_label">Mobile Title Image URL</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.editable_video_list.mobile_title_image_url">\n  </div>\n\n  <input class="modal_window-save_button square_button square_button--purple u-small_vertical_margins" type="submit" value="Save">\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_list_page.html",'<div class="video_list_page">\n  <div\n    ng-if="$ctrl.page_data.video_list.title_image_url"\n    class="full_page_width_banner show_tiny_edit_button_on_hover"\n  >\n    <img\n      sized-src="$ctrl.page_data.video_list.title_image_url"\n      class="full_page_width_banner-image"\n    />\n    <div\n      class="tiny_edit_button"\n      stop-propagation="click"\n      ng-click="$ctrl.show_banner_edit_modal = true"\n      ng-if="$ctrl.can_perform(\'edit\')"\n    ><svg src="pencil.svg" class="tiny_edit_button-svg"></svg></div>\n  </div>\n\n  <div\n    ng-if="$ctrl.page_data.video_list.title_image_url"\n    class="u-top_margin video_list_title_card-subscribe_button"\n  >\n    <youtube-subscribe-button></youtube-subscribe-button>\n  </div>\n\n  <div\n    ng-if="!$ctrl.page_data.video_list.title_image_url"\n    class="video_list_title_card video_list_title_card--text show_tiny_edit_button_on_hover"\n  >\n    <div class="video_list_title_card-text_and_background_container">\n      <div class="video_list_title_card-text_container">\n        <h1 class="video_list_title_card-text_container-title">{{ $ctrl.page_data.video_list.title }}</h1>\n        <p>{{ $ctrl.page_data.video_list.description }}</p>\n        <div class="u-x_large_top_margin">\n          <youtube-subscribe-button></youtube-subscribe-button>\n        </div>\n      </div>\n    </div>\n    <div\n      class="tiny_edit_button"\n      stop-propagation="click"\n      ng-click="$ctrl.show_banner_edit_modal = true"\n      ng-if="$ctrl.can_perform(\'edit\')"\n    ><svg src="pencil.svg" class="tiny_edit_button-svg"></svg></div>\n  </div>\n\n  <scrollable-data\n    src="$ctrl.scrollable_videos_data"\n    preload="$ctrl.page_data.videos"\n    repeat-with="video"\n    scroll-mechanism="infinite_scroll"\n    container-classes="video_list"\n  >\n    <video-list-video\n      class="video_list-item"\n      video="video"\n      video-list="$ctrl.page_data.video_list"\n      position="$index + 1"\n      variants="{show_dates: $ctrl.page_data.video_list.show_dates, show_numbers: $ctrl.page_data.video_list.show_numbers}"\n    ></video-list-video>\n  </scrollable-data>\n</div>\n\n<modal-window ng-if="$ctrl.show_banner_edit_modal" on-close="$ctrl.show_banner_edit_modal = false">\n  <video-list-edit-form\n    object="$ctrl.page_data.video_list"\n    on-updated="$ctrl.page_data.video_list = video_list; $ctrl.show_banner_edit_modal = false"\n  ></video-list-edit-form>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_list_video.html",'<div ng-if="$ctrl.variants.show_numbers">\n  <svg height="36px" class="video_list-item-numeral">\n    <text x="50%" y="34px">#{{ $ctrl.position }}</text>\n  </svg>\n</div>\n\n<a\n  ng-href="{{$ctrl.video.url}}?utm_source=video_list"\n  class="video_list-item-title"\n  ng-class="{\'video_list-item-title--small\': $ctrl.variants.show_numbers}"\n>\n  {{ $ctrl.video.short_title }}\n</a>\n\n<div class="video_list-item-video">\n  <div ng-if="$ctrl.video_played">\n    <video brightcove\n      object="$ctrl.video"\n      can-play="$ctrl.video_can_play = true"\n      tracking-data="$ctrl.tracking_data"\n      player-name="standard"\n      class="video-js"\n    ></video>\n  </div>\n  <div\n    ng-click="$ctrl.video_played = true"\n    ng-if="!$ctrl.video_played && !$ctrl.video_can_play"\n    class="video-js video_list-item-video-poster_image"\n    ng-class="{\'video_list-item-video-poster_image--cover_video\': $ctrl.video_played}"\n  >\n    <img sized-src="$ctrl.video.poster_url" class="vjs-tech" />\n    <placeholder-spinner\n      ng-show="$ctrl.video_played"\n      placeholder-classes="placeholder--centered"\n    ></placeholder-spinner>\n    <svg\n      ng-hide="$ctrl.video_played"\n      src="play.svg"\n      class="play_button play_button--large"\n    ></svg>\n  </div>\n</div>\n\n<div class="video_list-item-metadata">\n  <span class="video_list-item-metadata-item">\n    <svg src="clock.svg" class="inline_icon inline_icon--white inline_icon--up_2 inline_icon--reading_size"></svg>\n    {{ $ctrl.video.duration | millisToDuration }}\n  </span>\n\n  <span class="video_list-item-metadata-item">\n    <svg class="inline_icon inline_icon--white inline_icon--up_1 inline_icon--small_reading_size" src="eye.svg"></svg>\n    {{ $ctrl.video.view_count | number }}\n  </span>\n\n  <span class="video_list-item-metadata-item" ng-if="$ctrl.variants.show_dates">\n    <svg src="calendar.svg" class="inline_icon inline_icon--white inline_icon--up_2 inline_icon--reading_size"></svg>\n    {{ ($ctrl.video.published_at * 1000) | date: "MMM d yyyy" }}\n  </span>\n</div>\n\n<div class="video_list-item-description video_list-item-description--truncated">\n  {{ $ctrl.video.description }}\n</div>\n\n<div class="video_list-item-read_more">\n  <a\n    ng-href="{{ $ctrl.video.url }}"\n    class="video_list-item-read_more-link"\n    ng-bind-html=":: \'videos.read_more\' | i18n"\n  ></a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_page.html",'<div class="video_page video_page--black_background">\n  <div class="video_page-video">\n    <div ng-show="$ctrl.video_can_play">\n      <video brightcove\n        object="$ctrl.page_data.video"\n        can-play="$ctrl.video_can_play = true"\n        on-time-change="$ctrl.update_progress(current, duration)"\n        on-finish="$ctrl.countdown_to_next_video()"\n        tracking-data="$ctrl.tracking_data"\n        player-name="standard"\n        yields-api="$ctrl.add_video_api($ctrl.page_data.video.id, api)"\n        class="video-js"\n        ng-attr-autoplay="true"\n        autoplays-on-page-load="true"\n      ></video>\n    </div>\n\n    <div ng-show="!$ctrl.video_can_play" class="video-js video_page-video-poster_image">\n      <img sized-src="$ctrl.page_data.video.poster_url" class="u-width_100" />\n      <placeholder-spinner placeholder-classes="placeholder--centered"></placeholder-spinner>\n    </div>\n\n    <div class="video_page-video-next_video" ng-if="$ctrl.seconds_until_next_video">\n      <svg\n        ng-click="$ctrl.navigate_to_next_video()"\n        src="circle.svg"\n        class="video_page-video-next_video-loader"\n      ></svg>\n      <div\n        class="video_page-video-next_video-title"\n        ng-click="$ctrl.navigate_to_next_video()"\n      >Up next: {{ $ctrl.next_video.title }}</div>\n      <div\n        class="video_page-video-next_video-cancel"\n        ng-click="$ctrl.stop_countdown_to_next_video()"\n      >cancel</div>\n    </div>\n  </div>\n\n  <video-carousel\n    object="$ctrl.page_data.video"\n    placement="{{$ctrl.page_data.video.primary_video_list ? \'series_related\' : \'related\'}}"\n    variants="{half_black_background: true}"\n    title="Recommended"\n    active-video="$ctrl.page_data.video"\n    on-load="$ctrl.next_video = videos[0]"\n    video-list="$ctrl.page_data.video.primary_video_list"\n  ></video-carousel>\n</div>\n\n<div class="white_container white_container--no_padding">\n  <div class="grid_layout">\n    <div class="grid_layout--full">\n      <h1 class="article_title article_title--outlined u-xx_large_top_margin">{{$ctrl.page_data.video.title}}</h1>\n\n      <div ng-if="$ctrl.page_data.article.sponsored" class="u-top_margin u-x_large_bottom_margin">\n        <div ng-if="!$ctrl.page_data.article.sponsor_link" class="article_sponsor">\n          <span class="text_label text_label--gray">{{$ctrl.page_data.article.sponsor_phrase || (\'article.sponsor.phrase\' | i18n)}}</span>\n          <div\n            class="article_sponsor-logo"\n\t    ng-class="{\'article_sponsor-logo--larger\': $ctrl.page_data.article.sponsor_image_style === \'larger\'}"\n            clipped-background-image="$ctrl.page_data.article.sponsor_image"\n            clipped-background-image-fit-height\n          ></div>\n        </div>\n\n        <a\n          ng-if="$ctrl.page_data.article.sponsor_link"\n          ng-href="{{$ctrl.page_data.article.sponsor_link}}"\n          target="_blank"\n          class="article_sponsor"\n        >\n          <span class="text_label text_label--gray">{{$ctrl.page_data.article.sponsor_phrase || (\'article.sponsor.phrase\' | i18n)}}</span>\n          <div\n            class="article_sponsor-logo"\n\t    ng-class="{\'article_sponsor-logo--larger\': $ctrl.page_data.article.sponsor_image_style === \'larger\'}"\n            clipped-background-image="$ctrl.page_data.article.sponsor_image"\n            clipped-background-image-fit-height\n          ></div>\n        </a>\n      </div>\n\n      <div class="u-text_center u-small_top_margin u-x_large_bottom_margin">\n        <div class="article_info_bar">\n          <div class="article_info_bar-text">\n            <svg class="inline_icon inline_icon--reading_size inline_icon--up_2" src="clock.svg"></svg>\n            {{ $ctrl.page_data.video.duration | millisToDuration }}\n          </div>\n\n          <div class="article_info_bar-text u-small_horizontal_margins">\n            <svg class="inline_icon inline_icon--small_reading_size inline_icon--up_2" src="eye.svg"></svg>\n            {{ $ctrl.page_data.video.view_count | number }}\n          </div>\n\n          <div\n            ng-if="$ctrl.page_data.video.primary_video_list && $ctrl.page_data.video.primary_video_list.show_dates"\n            class="article_info_bar-text"\n          >\n            <svg src="calendar.svg" class="inline_icon inline_icon--up_2 inline_icon--reading_size"></svg>\n            {{ ($ctrl.page_data.video.published_at * 1000) | date:\'mediumDate\' }}\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="grid_layout--sidebar">\n      <div\n        ng-if="$ctrl.page_data.video.authors.length"\n        class="article_info_and_action_box article_info_and_action_box--full_padding u-bottom_margin"\n      >\n        <div>\n          <div\n            ng-repeat="author in $ctrl.page_data.video.authors track by author.id"\n            ng-class="{\'u-bottom_margin\': !$last}"\n          >\n            <article-contributor-badge object="author"></article-contributor-badge>\n          </div>\n        </div>\n      </div>\n\n      <article-admin-bar ng-if="$ctrl.page_data.article" article="$ctrl.page_data.article" video="$ctrl.page_data.video"></article-admin-bar>\n\n      <div class="article_info_and_action_box u-top_margin">\n        <span\n          ng-if=":: $ctrl.can(\'view_video_sources\', $ctrl.page_data.video)"\n          ng-click="$ctrl.showing_sources = true"\n          class="article_info_and_action_box-action"\n          title="View video sources (shift+s)"\n        >\n          <svg src="gear.svg" class="inline_icon inline_icon--large_reading_size u-quarter_right_margin"></svg>\n          <kb shortcut="shift+s" action="$ctrl.showing_sources = true"></kb>\n          View Video Sources (shift+s)\n        </span>\n      </div>\n\n      <modal-window\n        ng-if="$ctrl.showing_sources"\n        on-close="$ctrl.showing_sources = false"\n      >\n        <video-edit-form object="$ctrl.page_data.video"></video-edit-form>\n      </modal-window>\n\n      <div class="u-top_margin">\n        <article-content-actions\n          type="video"\n          object="$ctrl.page_data.video"\n          variants="{\'two_rows\': true}"\n        ></article-content-actions>\n      </div>\n\n      <div class="u-text_center">\n        <youtube-subscribe-button></youtube-subscribe-button>\n      </div>\n\n      <dfp-ad\n        name="desktop_video_sidebar"\n        ad-classes="[\'u-top_margin\', \'u-bottom_margin\']"\n      ></dfp-ad>\n    </div>\n\n    <div class="grid_layout--main">\n      <div>\n        <h2 class="article_dek">\n          <hang-initial-quote content="$ctrl.page_data.article.dek"></hang-initial-quote>\n        </h2>\n\n        <standard-rich-content\n          ng-if="$ctrl.page_data.video.body"\n          html="$ctrl.page_data.video.body.html"\n          variants="{article: true}"\n          open-links-in-new-window\n        ></standard-rich-content>\n\n        <div class="article_rich_text_formatting" ng-if="!$ctrl.page_data.video.body">\n          <p ng-bind-html="$ctrl.page_data.video.description"></p>\n        </div>\n      </div>\n\n      <div class="u-xxx_large_vertical_margins">\n        <div class="u-xxx_large_top_margin u-x_large_bottom_margin">\n          <span class="text_label text_label--x_small_text_size text_label--gray">Comments</span>\n        </div>\n\n        <comments\n          variants="{no_background: true}"\n          type="videos"\n          commentable="$ctrl.page_data.video"\n        ></comments>\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("videos_modal.html",'<modal-window\n  on-close="$ctrl.on_close()"\n  variants="{\n    no_background: true,\n    no_max_width: true,\n    full_width_parent: true,\n    vertically_center_contents: true\n  }"\n>\n  <div class="video_page">\n    <div class="video_page-video">\n      <div ng-show="$ctrl.video_can_play">\n        <video brightcove\n          ng-repeat="video in [$ctrl.active_video] track by video.id"\n          object="$ctrl.active_video"\n          can-play="$ctrl.video_can_play = true"\n          on-time-change="$ctrl.update_progress(current, duration)"\n          on-finish="$ctrl.next_video()"\n          tracking-data="$ctrl.tracking_data($ctrl.active_video)"\n          player-name="modal"\n          yields-api="$ctrl.add_video_api($ctrl.active_video.id, api)"\n          class="video-js u-accept_pointer_events"\n          ng-attr-autoplay="true"\n        ></video>\n      </div>\n      <div ng-show="!$ctrl.video_can_play" class="video-js video_page-video-poster_image">\n        <img ng-src="{{ $ctrl.active_video.poster_url }}" class="vjs-tech" />\n        <placeholder-spinner placeholder-classes="placeholder--centered"></placeholder-spinner>\n      </div>\n    </div>\n    <a ng-href="{{ $ctrl.active_video.url }}" class="video_page-caption u-accept_pointer_events">{{ $ctrl.active_video.title }}</a>\n    <div class="video_carousel u-accept_pointer_events">\n      <div class="video_carousel-container">\n        <div class="video_carousel-video video_carousel-video--intro_card">\n          <div class="video_carousel-video-card video_carousel-video-card--intro_card_text video_carousel-video-card--dark_background">Now Playing</div>\n        </div>\n        <div\n          ng-repeat="video in $ctrl.carousel_videos track by video.id"\n          ng-click="$ctrl.select_video(video)"\n          class="video_carousel-video"\n          ng-class="{\n            \'video_carousel-video--active\': $ctrl.active_video.id === video.id,\n            \'u-clickable\': $ctrl.active_video.id !== video.id\n          }"\n        >\n          <div class="video_carousel-video-card">\n            <div class="u-relative">\n              <img class="u-display_block video_carousel-video-image" sized-src="video.poster_url" />\n              <svg\n                ng-if="!($ctrl.active_video.id === video.id)"\n                src="play.svg"\n                class="play_button"\n              ></svg>\n            </div>\n            <div ng-if="$ctrl.active_video.id === video.id">\n              <div class="video_carousel-video-progress_bar" ng-style="{width: $ctrl.play_pct + \'%\'}"></div>\n              <div class="video_carousel-video-currently_playing_label text_label text_label--x_small_text_size text_label--white">\n                Currently Playing\n              </div>\n            </div>\n          </div>\n          <div class="video_carousel-video-title">\n            {{ video.title }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("voters.html",'<div class="voters gray_container u-vertical_margins">\n  <placeholder-spinner ng-if="!loaded_voters"></placeholder-spinner>\n\n  <div ng-if="loaded_voters" class="voters-loaded">\n    <p ng-if="voters.up.length + voters.down.length === 0">No voters.</p>\n\n    <ul class="voters-list voters--up" ng-if="voters.up.length">\n      <li class="voters-vote_count voters-vote_count--up">{{ voters.up.length | signed_number }}</li>\n      <li ng-repeat="user in voters.up track by user.id">\n        <user-badge object="user" size="x_small"></user-badge>\n      </li>\n    </ul>\n    <ul class="voters-list voters--down" ng-if="voters.down.length">\n      <li class="voters-vote_count voters-vote_count--down">{{ -voters.down.length | signed_number }}</li>\n      <li ng-repeat="user in voters.down track by user.id">\n        <user-badge object="user" size="x_small"></user-badge>\n      </li>\n    </ul>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("voting.html",'<div class="voting">\n  <div\n    class="voting-button voting-upvote square_button square_button--transparent square_button--depress_on_click"\n    ng-class="{\'voting-upvote--active\': voteable.current_user_metadata.interactions.vote === \'up\'}"\n    ng-click="ctrl.submit_vote(\'up\')"\n  >\n    <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="thumbs_up.svg"></svg>\n    <span ng-if="!variants.hide_upvote_text">Upvote</span>\n  </div>\n  <div\n    ng-if="voteable.has_voters"\n    class="voting-total square_button square_button--transparent"\n    ng-class="{\n      \'voting-total--positive\': voteable.votes_total > 0,\n      \'voting-total--negative\': voteable.votes_total < 0,\n      \'voting-total--animate_press\': !!voteable.current_user_metadata.interactions.vote\n    }"\n    ng-click="voteTotalClicked()"\n  >{{ voteable.votes_total | signed_number }}</div>\n  <div\n    ng-if="!variants.hide_downvote"\n    class="voting-button voting-downvote square_button square_button--transparent square_button--depress_on_click"\n    ng-class="{\'voting-downvote--active\': voteable.current_user_metadata.interactions.vote === \'down\'}"\n    ng-click="ctrl.submit_vote(\'down\')"\n  >\n    <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="thumbs_down.svg"></svg>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("web_annotator_manager.html",'<div ng-if="$ctrl.web_page">\n  <h3>Managing</h3>\n  <h1 class="web_annotator_manager-web_page_title">{{ $ctrl.web_page.title }}</h1>\n  <p>\n    <a ng-href="{{ $ctrl.web_page.share_url }}" target="_blank">\n      <code>http:{{ $ctrl.web_page.normalized_url }}</code>\n    </a>\n    <br>{{ $ctrl.web_page.annotation_count}} annotations\n  </p>\n\n  <hr class="web_annotator-hr">\n\n  <web-annotator-manager-errors\n    yields-on-error="$ctrl.on_error = on_error"\n  ></web-annotator-manager-errors>\n\n  <button\n    class="square_button"\n    ng-click="$ctrl.protect(!$ctrl.web_page.protected)"\n  >{{ $ctrl.web_page.protected ? \'Un-protect This Page\' : \'Protect This Page\' }}</button>\n  <button\n    class="square_button"\n    ng-click="$ctrl.publish_drafts()"\n    ng-disabled="!$ctrl.web_page.draft_annotation_count"\n    ng-class="{\'square_button--green\': !!$ctrl.web_page.draft_annotation_count, \'square_button--disabled\': !$ctrl.web_page.draft_annotation_count}"\n  >Publish All Draft Annotations ({{ $ctrl.web_page.draft_annotation_count }})</button>\n\n  <hr class="web_annotator-hr">\n\n  <web-annotator-roles-table\n    header="Annotator Roles on This Page"\n    web-location-id="$ctrl.web_page.id"\n    web-location-type="web_page"\n  ></web-annotator-roles-table>\n\n  <web-annotator-roles-table\n    header="Annotator Roles on All of \'{{$ctrl.web_page.domain}}\'"\n    web-location-id="$ctrl.web_page.web_site_id"\n    web-location-type="web_site"\n  ></web-annotator-pages-role-table>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("web_annotator_manager_errors.html",'<div\n  class="web_annotator_manager-error nganimate-fade_out"\n  ng-repeat="error in $ctrl.errors"\n>\n  <p\n    class="web_annotator_manager-error-message"\n  ><strong>{{ error.message }}</strong></p>\n  <ul\n    class="web_annotator_manager-error-errors"\n    ng-if="error.response.errors.length"\n  >\n    <li ng-repeat="e in error.response.errors">{{ e }}</li>\n  </ul>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("web_annotator_role_row.html",'<form>\n  <td tether-drop-target>\n    <span ng-if="$ctrl.user_role.id">\n       {{ $ctrl.user_role.user.name }}\n      <tether-drop show-on="hover" ng-if="$ctrl.user_role.user">\n        <user-tooltip user="$ctrl.user_role.user"></user-tooltip>\n      </tether-drop>\n    </span>\n    <input\n      required\n      ng-if="!$ctrl.user_role.id"\n      autocomplete-with="user"\n      ng-model="$ctrl.user_role.user_login"\n      class="square_input square_input--full_width web_annotator_manager-role_table_input"\n      placeholder="User Name"\n    >\n\n    <tether-drop show-on="hover" ng-if="!$ctrl.user_role.user">\n  </td>\n\n  <td>\n    <span ng-if="!$ctrl.editing">{{ $ctrl.user_role.role }}</span>\n    <input\n      ng-if="$ctrl.editing"\n      class="square_input square_input--full_width web_annotator_manager-role_table_input"\n      ng-model="$ctrl.user_role.role"\n      placeholder="Role Name"\n    >\n  </td>\n\n  <td>\n    <span\n      ng-if="!$ctrl.editing"\n    >{{ $ctrl.user_role.page_moderator ? \'&#x2714;\' : \'\' }}</span>\n    <input\n      ng-if="$ctrl.editing"\n      type="checkbox"\n      ng-model="$ctrl.user_role.page_moderator"\n    >\n  </td>\n\n  <td class="web_annotator_manager-role_table_cell">\n    <span\n      ng-if="!$ctrl.editing"\n    >{{ $ctrl.user_role.auto_feature ? \'&#x2714;\' : \'\' }}</span>\n    <input\n      ng-if="$ctrl.editing"\n      type="checkbox"\n      ng-model="$ctrl.user_role.auto_feature"\n    >\n  </td>\n\n  <td\n    ng-if="$ctrl.user_role.id"\n\n  >\n    <button\n      class="square_button"\n      ng-click="$ctrl.editing = true"\n      ng-if="!$ctrl.editing && $ctrl.user_role.id"\n    >Edit</button>\n\n    <button\n      class="square_button square_button--green"\n      ng-click="$ctrl.save()"\n      ng-if="$ctrl.editing && $ctrl.user_role.id"\n      ng-class="{\'square_button--disabled\': $ctrl.saving}"\n      ng-disabled="$ctrl.saving"\n    >{{ $ctrl.saving ? \'Saving...\' : \'Save\' }}</button>\n  </td>\n\n  <td\n    ng-if="$ctrl.user_role.id"\n  >\n    <button\n      class="square_button"\n      ng-click="$ctrl.editing = false"\n      ng-if="$ctrl.editing"\n    >Cancel</button>\n\n    <button\n      class="square_button square_button--red"\n      ng-click="$ctrl.destroy()"\n      ng-if="!$ctrl.editing"\n      confirm="Are you sure?"\n    >Delete</button>\n  </td>\n\n  <td\n    colspan="2"\n    ng-if="!$ctrl.user_role.id"\n  >\n    <button\n      class="square_button square_button--green"\n      ng-click="$ctrl.create()"\n      ng-class="{\'square_button--disabled\': $ctrl.saving}"\n      ng-disabled="$ctrl.saving"\n    >{{ $ctrl.saving ? \'Creating...\' : \'Create\' }}</button>\n  </td>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("web_annotator_roles_table.html",'<h3\n  class="web_annotator_manager-table_header"\n>{{ $ctrl.header }}</h3>\n\n<web-annotator-manager-errors\n  yields-on-error="$ctrl.on_error = on_error"\n></web-annotator-manager-errors>\n\n<table class="admin_table web_annotator_manager-role_table">\n  <thead>\n    <th>Name</th>\n    <th>Role</th>\n    <th>Moderator</th>\n    <th>Auto Feature</th>\n    <th colspan="2"></th>\n  </thead>\n  <tbody>\n    <tr web-annotator-role-row\n      class="web_annotator_manager-role_table_row"\n      ng-repeat="user_role in $ctrl.user_roles | filter:{_deleted: \'!\'}"\n      on-error="$ctrl.on_error(error)"\n      user-role="user_role"\n    ></tr>\n    <tr web-annotator-role-row\n      ng-if="$ctrl.user_roles"\n      class="web_annotator_manager-role_table_row"\n      on-create="$ctrl.create(params)"\n      on-error="$ctrl.on_error(error)"\n      user-role="{auto_feature: true}"\n    ></tr>\n  </tbody>\n</table>\n<placeholder-spinner\n  ng-if="!$ctrl.user_roles"\n  placeholder-classes="u-vertical_margins"\n></placeholder-spinner>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("youtube_subscribe_button.html",'<div class="g-ytsubscribe" data-channel="RapGeniusVideo" data-layout="default" data-count="default"></div>\n')}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);n(1034),n(942),n(1121)}]);